
/*
* Zimbra Collaboration Suite Web Client
* Copyright (C) 2004-2017 Synacor, Inc.
* https://www.zimbra.com/license
*/
if(AjxPackage.define("XForms")){if(AjxPackage.define("ajax.dwt.events.DwtXFormsEvent")){DwtXFormsEvent=function(b,c,a){if(arguments.length==0){return
}this.form=b;
this.formItem=c;
this.details=a
};
DwtEvent.prototype.toString=function(){return"DwtXFormsEvent"
}
}if(AjxPackage.define("ajax.dwt.events.DwtXModelEvent")){DwtXModelEvent=function(a,d,c,b){if(arguments.length==0){return
}this.instance=a;
this.modelItem=d;
this.refPath=c;
this.details=b
};
DwtEvent.prototype.toString=function(){return"DwtXModelEvent"
}
}if(AjxPackage.define("ajax.dwt.events.DwtIdleTimer")){DwtIdleTimer=function(b,a){DwtIdleTimer._initEvents();
this.timeout=b;
this.handler=a;
this.idle=false;
this._onIdle=AjxCallback.simpleClosure(this.setIdle,this);
this._startTimer();
DwtIdleTimer.getHandlers().add(this)
};
DwtIdleTimer.idleHandlers=0;
DwtIdleTimer.prototype.toString=function(){return"DwtIdleTimer"
};
DwtIdleTimer.prototype.kill=function(){this._stopTimer();
this.idle=false;
DwtIdleTimer.getHandlers().remove(this)
};
DwtIdleTimer.prototype.resurrect=function(a){this.idle=false;
DwtIdleTimer.getHandlers().add(this,null,true);
if(a!=null){this.timeout=a
}this._startTimer()
};
DwtIdleTimer.prototype.setIdle=function(){if(!this.idle){DwtIdleTimer.idleHandlers++;
this.idle=true;
this.handler.run(true)
}};
DwtIdleTimer.prototype.resume=function(){if(this.idle){this.idle=false;
this.handler.run(false);
DwtIdleTimer.idleHandlers--
}};
DwtIdleTimer.prototype._startTimer=function(){this._stopTimer();
this._timer=setTimeout(this._onIdle,this.timeout)
};
DwtIdleTimer.prototype._stopTimer=function(){if(this._timer){clearTimeout(this._timer);
this._timer=null
}};
DwtIdleTimer._initEvents=function(){if(!DwtIdleTimer._initialized){if(window.addEventListener){window.addEventListener("keydown",DwtIdleTimer.resetIdle,true);
window.addEventListener("mousemove",DwtIdleTimer.resetIdle,true);
window.addEventListener("mousedown",DwtIdleTimer.resetIdle,true);
window.addEventListener("focus",DwtIdleTimer.resetIdle,true)
}else{if(window.attachEvent){document.body.attachEvent("onkeydown",DwtIdleTimer.resetIdle);
document.body.attachEvent("onkeyup",DwtIdleTimer.resetIdle);
document.body.attachEvent("onmousedown",DwtIdleTimer.resetIdle);
document.body.attachEvent("onmousemove",DwtIdleTimer.resetIdle);
document.body.attachEvent("onmouseover",DwtIdleTimer.resetIdle);
document.body.attachEvent("onmouseout",DwtIdleTimer.resetIdle);
window.attachEvent("onfocus",DwtIdleTimer.resetIdle)
}}DwtIdleTimer._initialized=true
}};
DwtIdleTimer.getHandlers=function(){var b=DwtIdleTimer.HANDLERS;
if(!b){b=DwtIdleTimer.HANDLERS=new AjxVector()
}return b
};
DwtIdleTimer.resetIdle=function(){var b=DwtIdleTimer.getHandlers();
b.foreach("_startTimer");
if(DwtIdleTimer.idleHandlers>0){b.foreach("resume")
}}
}if(AjxPackage.define("ajax.dwt.xforms.XFormGlobal")){XFG=function(){};
XFG.prefixList={};
XFG.objectCache={};
XFG.getUniqueId=function(b){if(b==null){b="__id__"
}var a=XFG.prefixList;
if(a[b]==null){a[b]=1;
return b
}else{a[b]++;
return b+"_"+a[b]
}};
XFG.assignUniqueId=function(a,b){var c=XFG.getUniqueId(b);
a.__id=c;
XFG.objectCache[c]=a
};
XFG.cacheGet=function(a){return XFG.objectCache[a]
};
XFG.createEl=function(e,c,a,d){if(a==null){a="div"
}var b=window.document.createElement(a);
b.id=e;
if(d!=null){b.innerHTML=d
}if(c==null){c=document.body
}c.appendChild(b);
return b
};
XFG.getEl=function(d,c){if(typeof d!="string"){return d
}var b=(b==null?document:c.document);
var a=b.getElementById(d);
if(a==null){a=null
}return a
};
XFG.hideEl=function(c,a){var b=(typeof c=="string"?XFG.getEl(c):c);
if(b){if(!a){b.style.display="none"
}b.style.visibility="hidden"
}else{}};
XFG.showEl=function(b){var a=(typeof b=="string"?XFG.getEl(b):b);
if(a){if(a.tagName=="TD"){a.style.display="table-cell"
}else{a.style.display="block"
}a.style.visibility="visible"
}else{}};
XFG.getClassName=function(a){if(typeof a=="string"){a=XFG.getEl(a)
}if(a){return a.className
}return""
};
XFG.showSelected=function(a){XFG.setClassName(a,XFG.addSuffix(XFG.getClassName(a),"_selected"))
};
XFG.hideSelected=function(a){XFG.setClassName(a,XFG.removeSuffix(XFG.getClassName(a),"_selected"))
};
XFG.setClassName=function(a,b){if(typeof a=="string"){a=XFG.getEl(a)
}if(a){a.className=b
}};
XFG.addSuffix=function(b,a){if(b.indexOf(a)>-1){return b
}return b+a
};
XFG.removeSuffix=function(b,a){if(b.indexOf(a)<0){return b
}return b.substring(0,b.indexOf(a))
};
XFG.showOver=function(a){XFG.setClassName(a,XFG.addSuffix(XFG.getClassName(a),"_over"))
};
XFG.hideOver=function(a){XFG.setClassName(a,XFG.removeSuffix(XFG.getClassName(a),"_over"))
};
XFG.showDisabled=function(a){XFG.setClassName(a,XFG.addSuffix(XFG.getClassName(a),"_disabled"))
};
XFG.hideDisabled=function(a){XFG.setClassName(a,XFG.removeSuffix(XFG.getClassName(a),"_disabled"))
};
XFG.getCookie=function(a){var b=new RegExp(a+"=([^;]+)").exec(document.cookie);
return(b!=null)?unescape(b[1]):null
};
XFG.setCookie=function(a,b){document.cookie=a+"="+escape(b)
};
XFG.valueToString=function(e,f,c,b){if(e==null){return"null"
}if(typeof e=="string"){return'"'+e+'"'
}if(e instanceof Array){var a=new AjxBuffer();
for(var d=0;
d<e.length;
d++){a.append("        ",XFG.valueToString(e[d],"    ",f,c,b))
}return"[\n"+a.join(",\n")+"\n    ]"
}if(e instanceof Date){return" new Date("+[e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()].join(",")+")"
}if(typeof e=="function"){return"(function)"
}if(typeof e=="object"){return XFG.objectToString(e,"    ",f,c,b)
}return e
};
XFG.objectToString=function(c,g,l,b){var k="    ";
var e=[];
var d=false;
var j=0;
var f=c.constructor.prototype;
if(f==null){f={}
}for(var a in c){var h=c[a];
if(b&&(c[a]==f[a])){continue
}if(l&&h instanceof Function){continue
}if((a.indexOf("__")==0||a.indexOf("$")==0)&&h instanceof Object){e.push(AjxBuffer.concat(a,": ",h.toString()))
}else{d=d||(typeof h=="object");
e.push(AjxBuffer.concat(a,": ",XFG.valueToString(h,g,l,b)))
}j++
}e.sort(XFG.sortSpecialLast);
if(d||j>5){return"{\n"+k+e.join(",\n"+k)+"\n}"
}else{return"{"+k+e.join(", ")+k+"}"
}};
XFG.sortSpecialLast=function(e,c){var d=e.charAt(0);
var f=c.charAt(0);
var g=d=="_"||d=="$";
var h=f=="_"||f=="$";
if(!g&&!h){return(e>c?1:-1)
}else{if(g&&h){return(e>c?1:-1)
}else{if(g){return 1
}else{return -1
}}}};
StringBuffer=function(){this.clear();
if(arguments.length>0){arguments.join=this.buffer.join;
this.buffer[this.buffer.length]=arguments.join("")
}};
StringBuffer.prototype.toString=function(){return this.buffer.join("")
};
StringBuffer.prototype.join=function(a){if(a==null){a=""
}return this.buffer.join(a)
};
StringBuffer.prototype.append=function(){arguments.join=this.buffer.join;
this.buffer[this.buffer.length]=arguments.join("")
};
StringBuffer.prototype.join=function(a){return this.buffer.join(a)
};
StringBuffer.prototype.set=function(a){this.buffer=[a]
};
StringBuffer.prototype.clear=function(){this.buffer=[]
};
StringBuffer.concat=function(){arguments.join=Array.prototype.join;
return arguments.join("")
};
XFG.ARROW_DOWN=40;
XFG.ARROW_LEFT=37;
XFG.ARROW_RIGHT=39;
XFG.ARROW_UP=38
}if(AjxPackage.define("ajax.dwt.xforms.XModel")){var _MODEL_="model";
var _INSTANCE_="instance";
var _INHERIT_="inherit";
var _MODELITEM_="modelitem";
XModel=function(a){XFG.assignUniqueId(this,"_Model_");
if(a){for(var b in a){this[b]=a[b]
}}if(this.items==null){this.items=[]
}this._pathIndex={};
this._pathGetters={};
this._parentGetters={};
this._itemsAreInitialized=false;
this._errorMessages={};
if(this.getDeferInit()==false){this.initializeItems()
}};
XModel.toString=function(){return"[Class XModel]"
};
XModel.prototype.toString=function(){return"[XModel "+this.__id+"]"
};
XModel.prototype.pathDelimiter="/";
XModel.prototype.getterScope=_INSTANCE_;
XModel.prototype.setterScope=_INSTANCE_;
XModel.prototype.deferInit=true;
XModel.prototype.getDeferInit=function(){return this.deferInit
};
XModel.prototype.initializeItems=function(){if(this._itemsAreInitialized){return
}var b=new Date().getTime();
this.__nestedItemCount=0;
this.items=this.initItemList(this.items,null);
this._itemsAreInitialized=true;
var a=new Date().getTime()
};
XModel.prototype.initItemList=function(d,a){var b=[];
for(var c=0;
c<d.length;
c++){b[c]=this.initItem(d[c],a)
}this.__nestedItemCount+=d.length;
return b
};
XModel.prototype.initItem=function(b,a){if(b.__isXModelItem){return b
}var c=XModelItemFactory.createItem(b,a,this);
c.initializeItems();
return c
};
XModel.prototype.addItem=function(b,a){if(!b.__isXModelItem){b=this.initItem(b,a)
}if(a==null){this.items.push(b)
}else{a.addItem(b)
}};
XModel.prototype.indexItem=function(a,b){this._pathIndex[b]=a
};
XModel.prototype.getItem=function(h,d){var f=this._pathIndex[h];
if(f!=null){return this._pathIndex[h]
}var b=this.normalizePath(h);
for(var e=0;
e<b.length;
e++){if(b[e].charAt(0)=="#"){b[e]="#"
}}f=this._pathIndex[b.join(this.pathDelimiter)];
if(f!=null){this._pathIndex[h]=f;
return f
}if(d!=true){return null
}var a=null;
for(var g=0;
g<b.length;
g++){var c=b.slice(0,g+1).join(this.pathDelimiter);
var f=this.getItem(c,false);
if(f==null){f=XModelItemFactory.createItem({id:b[g]},a,this)
}a=f
}return f
};
XModel.prototype.normalizePath=function(d){if(d.indexOf("[")>-1){d=d.split("[").join("/#");
d=d.split("]").join("")
}if(d.indexOf(".")>-1){d=d.split(/[\/\.]+/);
var a=[];
for(var b=0;
b<d.length;
b++){var c=d[b];
if(c==".."){a.pop()
}else{if(c!="."){a.push(c)
}}}return a
}return d.split(this.pathDelimiter)
};
XModel.prototype.getParentPath=function(a){a=this.normalizePath(a);
return a.slice(0,a.length-1)
};
XModel.prototype.getLeafPath=function(a){a=this.normalizePath(a);
return a[a.length-1]
};
XModel.prototype.getInstanceValue=function(b,c){var a=this._getPathGetter(c);
return a.call(this,b)
};
XModel.prototype.getParentInstanceValue=function(b,c){var a=this._getParentPathGetter(c);
return a.call(this,b)
};
XModel.prototype.setInstanceValue=function(l,n,k){var j=this.getParentInstanceValue(l,n);
if(j==null){j=this.setParentInstanceValues(l,n)
}var g=this.getItem(n,true);
var h=this.getLeafPath(n);
var d=g.ref;
if(h.charAt(0)=="#"){d=parseInt(h.substr(1))
}if(g.setter){if(d.indexOf(this.pathDelimiter)>-1){d=d.split(this.pathDelimiter).join(".")
}var e=g.setter;
var m=g.setterScope;
if(m==_INHERIT_){m=this.setterScope
}if(m==_INSTANCE_){l[e](k,j,d)
}else{if(m==_MODEL_){this[e](k,l,j,d)
}else{g[e](k,l,j,d)
}}}else{if(typeof d=="string"&&d.indexOf(this.pathDelimiter)>-1){d=d.split(this.pathDelimiter);
for(var f=0;
f<d.length-1;
f++){j=j[d[f]]
}d=d.pop()
}j[d]=k;
var b=g.getParentItem();
if(b){var c=this.getParentPath(n).join(this.pathDelimiter);
if(b.setter){XModel.prototype.setInstanceValue.call(this,l,c,j)
}else{var a=new DwtXModelEvent(l,b,c,j);
b.notifyListeners(DwtEvent.XFORMS_VALUE_CHANGED,a)
}}}var a=new DwtXModelEvent(l,g,n,k);
g.notifyListeners(DwtEvent.XFORMS_VALUE_CHANGED,a);
return k
};
XModel.prototype.setParentInstanceValues=function(a,f){var h=this.getParentPath(f);
for(var e=0;
e<h.length;
e++){var c=h.slice(0,e+1).join(this.pathDelimiter);
var g=this.getInstanceValue(a,c);
if(g==null){var d=this.getItem(c,true);
var b=d.getDefaultValue();
g=this.setInstanceValue(a,c,b)
}}return g
};
XModel.prototype.getInstanceCount=function(a,c){var b=this.getParentInstanceValue(a,c);
if(b!=null&&b.length){return b.length
}return 0
};
XModel.prototype.addRowAfter=function(b,f,a){var d=null;
var c=this.getItem(f);
if(c){d=this.getNewListItemInstance(c)
}else{d=""
}var e=this.getInstanceValue(b,f);
if(e==null){e=[]
}e.splice(a+1,0,d);
this.setInstanceValue(b,f,e)
};
XModel.prototype.getNewListItemInstance=function(a){var b=a.listItem;
if(b==null){return""
}return this.getNewInstance(b)
};
XModel.prototype.getNewInstance=function(c){if(c.defaultValue!=null){return c.defaultValue
}var d=c.type;
switch(d){case _STRING_:return"";
case _NUMBER_:return 0;
case _OBJECT_:var a={};
if(c.items){for(var b=0;
b<c.items.length;
b++){var e=c.items[b];
if(e.ref){a[e.ref]=this.getNewInstance(e)
}else{if(e.id){a[e.id]=this.getNewInstance(e)
}}}}return a;
case _LIST_:return[];
case _DATE_:case _TIME_:case _DATETIME_:return new Date();
default:return""
}};
XModel.prototype.removeRow=function(h,j,g){var e=this.getInstanceValue(h,j);
if(e==null){return
}var a=false;
if(e instanceof String||typeof(e)=="string"){a=true
}var f=a?e.split(","):e;
var b=[];
var c=f.length;
for(var d=0;
d<c;
d++){if(d!=g){b.push(f[d])
}}this.setInstanceValue(h,j,b)
};
XModel.prototype._getPathGetter=function(b){var a=this._pathGetters[b];
if(a!=null){return a
}a=this._makePathGetter(b);
this._pathGetters[b]=a;
return a
};
XModel.prototype._getParentPathGetter=function(c){var a=this._parentGetters[c];
if(a!=null){return a
}var b=this.getParentPath(c).join(this.pathDelimiter);
a=this._getPathGetter(b);
this._parentGetters[c]=a;
this._pathGetters[b]=a;
return a
};
XModel.prototype._makePathGetter=function(m){if(m==null){return new Function("return null")
}var l=this.normalizePath(m);
if(l[0]==""){l=l.slice(1)
}var j=[];
var d="";
for(var e=0;
e<l.length;
e++){var g=l[0,e];
if(g.charAt(0)=="#"){g=g.substr(1);
d=d+"#"
}else{d=d+g
}var f=this.getItem(d,true);
var b=f.ref;
if(b.indexOf(this.pathDelimiter)>-1){b=b.split(this.pathDelimiter).join(".")
}if(f.getter){var h=f.getter;
var k=f.getterScope;
if(k==_INHERIT_){k=this.getterScope
}if(k==_INSTANCE_){j.push("if(instance) {");
j.push("	current = instance."+h+"(current, '"+b+"');");
j.push("}")
}else{if(k==_MODEL_){j.push("current = this."+h+"(instance, current, '"+b+"');")
}else{j.push('current = this.getItem("'+d+'").'+h+"(instance, current, '"+b+"');")
}}}else{if(b=="#"){j.push("if(current) {");
j.push("	current = current["+g+"];");
j.push("}")
}else{j.push("if(current) {");
j.push("	current = current."+b+";");
j.push("}")
}}d+=this.pathDelimiter
}var c=AjxBuffer.concat("try {\r","var current = instance;\r","\t",j.join("\r\t"),"\r","} catch (e) {\r ","	DBG.println('Error in getting path for \"",m,"\": ' + e);\r","	current = null;\r","}\r","return current;\r");
var a=new Function("instance",c);
return a
};
XModel._errorMessages={};
XModel.registerErrorMessage=XModel.prototype.registerErrorMessage=function(b,a){this._errorMessages[b]=a
};
XModel.registerErrorMessage("unknownError","Unknown error.");
XModel.prototype.defaultErrorMessage="unknownError";
XModel.prototype.getDefaultErrorMessage=function(a){if(a&&a.errorMessage){return a.getDefaultErrorMessage()
}return this.defaultErrorMessage
};
XModel.prototype.getErrorMessage=function(g,e,d,c,b,a){var f=this._errorMessages[g];
if(f==null){f=XModel._errorMessages[g]
}if(f==null){return g
}if(e!==null){f=f.split("{0}").join(e)
}if(d!==null){f=f.split("{1}").join(d)
}if(c!==null){f=f.split("{2}").join(c)
}if(b!==null){f=f.split("{3}").join(b)
}if(a!==null){f=f.split("{4}").join(a)
}return f
}
}if(AjxPackage.define("ajax.dwt.xforms.XModelItem")){XModelItemFactory=function(){};
XModelItemFactory.createItem=function(b,a,f){var d=b.type;
var c=this.getItemTypeConstructor(d||_UNTYPED_);
var e=new c();
e._setAttributes(b);
if(e.id!=null&&e.ref==null){e.ref=e.id
}var g=this.getIdPath(b,a);
e.__idPath=g;
e.__xmodel=f;
e.__parentItem=a;
e.initModelItem();
f.indexItem(e,g);
return e
};
XModelItemFactory.getIdPath=function(b,a){if(b.path){return b.path
}return this.getFullPath(b.id,(a?a.getIdPath():""))
};
XModelItemFactory.getFullPath=function(a,b){if(a==null){return null
}if(b==null){b=""
}var c=a;
if(a=="."){c=b
}else{if(a==".."){b=b.split("/");
c=b.slice(0,b.length-1).join("/")
}else{if(b==""){c=a
}else{c=b+"/"+a
}}}return c
};
XModelItemFactory.typeConstructorMap={};
XModelItemFactory.createItemType=function(d,a,c,b){if(c==null){c=new Function()
}if(typeof b=="string"){b=this.getItemTypeConstructor(b)
}if(b==null){b=XModelItem
}c.prototype=new b();
c.prototype.type=a;
c.prototype.constructor=c;
c.prototype.toString=new Function("return '[XModelItem:"+a+" path=\"' + this.getIdPath() + '\"]'");
c.toString=new Function("return '[Class XModelItem:"+a+"]'");
this.registerItemType(d,a,c);
return c
};
XModelItemFactory.registerItemType=function(c,a,b){window[c]=a;
this.typeConstructorMap[a]=b
};
XModelItemFactory.getItemTypeConstructor=function(a){var b=this.typeConstructorMap[a];
if(b==null){b=this.typeConstructorMap.string
}return b
};
XModelItem=function(){};
XModelItemFactory.createItemType("_UNTYPED_","untyped",XModelItem,Object);
XModelItemFactory.registerItemType("_OBJECT_","object",XModelItem);
XModelItem.prototype.__isXModelItem=true;
XModelItem.prototype.getterScope=_INHERIT_;
XModelItem.prototype.setterScope=_INHERIT_;
XModelItem.prototype._setAttributes=function(a){this._attributes=a;
for(var b in a){this[b]=a[b]
}};
XModelItem.prototype.initModelItem=function(){this._eventMgr=new AjxEventMgr()
};
XModelItem.prototype.initializeItems=function(){var a=this.getItems();
if(a!=null){this.items=this.getModel().initItemList(a,this)
}};
XModelItem.prototype.getModel=function(){return this.__xmodel
};
XModelItem.prototype.getParentItem=function(){return this.__parentItem
};
XModelItem.prototype.getIdPath=function(){return this.__idPath
};
XModelItem.prototype.getItems=function(){return this.items
};
XModelItem.prototype.addItem=function(a){if(!a.__isXModelItem){a=this.xmodel.initItem(a,this)
}if(this.items==null){this.items=[]
}this.items.push(a)
};
XModelItem.prototype.getConstraints=function(){return this.constraints
};
XModelItem.prototype.getRequired=function(){return this.required
};
XModelItem.prototype.getReadonly=function(){return this.readonly
};
XModelItem.prototype.getCustomRequiredMessage=function(){return this.customRequiredMessage
};
XModelItem.prototype.getCustomErrorMessage=function(){return this.customErrorMessage
};
XModelItem.prototype.getReadOnly=XModelItem.prototype.getReadonly;
XModelItem.prototype.getDefaultValue=function(){return new Object()
};
XModel.registerErrorMessage("valueIsRequired",AjxMsg.valueIsRequired);
XModelItem.prototype.validate=function(f,d,e,a){if(f==null||f===""){if(this.getRequired()){var b=this.getCustomRequiredMessage()||"valueIsRequired";
throw this.getModel().getErrorMessage(b,f)
}}else{f=this.validateType(f)
}var h=this.getConstraints();
if(h==null){return f
}if(!(AjxUtil.isInstance(h,Array))){h=[h]
}for(var c=0;
c<h.length;
c++){var g=h[c];
if(g.type=="method"){f=g.value.call(this,f,d,e,a)
}}return f
};
XModelItem.prototype.getDefaultErrorMessage=function(){return this.errorMessage
};
XModelItem.prototype.validateType=function(a){return a
};
XModelItem.prototype.length=null;
XModelItem.prototype.minLength=null;
XModelItem.prototype.maxLength=null;
XModelItem.prototype.pattern=null;
XModelItem.prototype.enumeration=null;
XModelItem.prototype.whiteSpace=null;
XModelItem.prototype.getLength=function(){return this.length
};
XModelItem.prototype.getMinLength=function(){return this.minLength
};
XModelItem.prototype.getMaxLength=function(){return this.maxLength
};
XModelItem.prototype.getPattern=function(){if(this.pattern!=null&&this.pattern.checked==null){if(AjxUtil.isString(this.pattern)){this.pattern=[new RegExp(this.pattern)]
}else{if(AjxUtil.isInstance(this.pattern,RegExp)){this.pattern=[this.pattern]
}else{if(AjxUtil.isArray(this.pattern)){for(var a=0;
a<this.pattern.length;
a++){var b=this.pattern[a];
if(AjxUtil.isString(b)){this.pattern[a]=new RegExp(this.pattern[a])
}}}else{}}}this.pattern.checked=true
}return this.pattern
};
XModelItem.prototype.getEnumeration=function(){return this.enumeration
};
XModelItem.prototype.getWhiteSpace=function(){return this.whiteSpace
};
XModel.registerErrorMessage("notAString",AjxMsg.notAString);
XModel.registerErrorMessage("stringLenWrong",AjxMsg.stringLenWrong);
XModel.registerErrorMessage("stringTooShort",AjxMsg.stringTooShort);
XModel.registerErrorMessage("stringTooLong",AjxMsg.stringTooLong);
XModel.registerErrorMessage("stringMismatch",AjxMsg.stringMismatch);
XModelItem.prototype.validateString=function(d){if(d==null){return
}if(!AjxUtil.isString(d)){throw this.getModel().getErrorMessage("notAString",d)
}d=this._normalizeAndValidate(d);
var c=this.getLength();
if(c!==null){if(d.length!==c){throw this.getModel().getErrorMessage("stringLenWrong",c)
}}else{var a=this.getMaxLength();
if(a!==null&&d.length>a){throw this.getModel().getErrorMessage("stringTooLong",a)
}var b=this.getMinLength();
if(b!==null&&d.length<b){throw this.getModel().getErrorMessage("stringTooShort",b)
}}return d
};
XModel.registerErrorMessage("invalidEmailAddr",AjxMsg.invalidEmailAddr);
XModelItem.prototype.validateEmailAddress=function(d){if(d==null){return
}if(!AjxUtil.isString(d)){throw this.getModel().getErrorMessage("notAString",d)
}d=this._normalizeAndValidate(d);
var c=this.getLength();
if(c!==null){if(d.length!==c){throw this.getModel().getErrorMessage("stringLenWrong",c)
}}else{var a=this.getMaxLength();
if(a!==null&&d.length>a){throw this.getModel().getErrorMessage("stringTooLong",a)
}var b=this.getMinLength();
if(b!==null&&d.length<b){throw this.getModel().getErrorMessage("stringTooShort",b)
}var e=d.split("@");
if(!e||e[0]==null||e[0]==""){throw this.getModel().getErrorMessage("invalidEmailAddr")
}else{if(!AjxUtil.isValidEmailNonReg(d)){throw this.getModel().getErrorMessage("invalidEmailAddr")
}}}return d
};
XModelItem.prototype._normalizeAndValidate=function(f){var g=this.getWhiteSpace();
var c;
if(g!==null){if(g==="replace"||g==="collapse"){f=f.replace(/[\t\r\n]/g," ")
}if(g==="collapse"){f=f.replace(/^\s+/,"").replace(/\s+$/,"").replace(/[ ]+/," ")
}}var e=this.getPattern();
if(e!=null){var a=false;
for(var b=0;
b<e.length;
b++){if(e[b].test(f)){a=true;
break
}}if(!a){c=this.getCustomErrorMessage()||"stringMismatch";
throw this.getModel().getErrorMessage(c,f)
}}var d=this.getEnumeration();
if(d!==null){var a=false;
for(var b=0;
b<d.length;
b++){if(d[b]===f){a=true;
break
}}if(!a){c=this.getCustomErrorMessage()||"stringMismatch";
throw this.getModel().getErrorMessage(c,f)
}}return f
};
XModelItem.prototype.totalDigits=null;
XModelItem.prototype.fractionDigits=null;
XModelItem.prototype.maxInclusive=null;
XModelItem.prototype.maxExclusive=null;
XModelItem.prototype.minInclusive=null;
XModelItem.prototype.minExclusive=null;
XModelItem.prototype.getTotalDigits=function(){return this.totalDigits
};
XModelItem.prototype.getFractionDigits=function(){return this.fractionDigits
};
XModelItem.prototype.getMinInclusive=function(){return this.minInclusive
};
XModelItem.prototype.getMinExclusive=function(){return this.minExclusive
};
XModelItem.prototype.getMaxInclusive=function(){return this.maxInclusive
};
XModelItem.prototype.getMaxExclusive=function(){return this.maxExclusive
};
XModelItem.prototype.addListener=function(b,c,a){return this._eventMgr.addListener(b,c,a)
};
XModelItem.prototype.removeListener=function(a,b){return this._eventMgr.removeListener(a,b)
};
XModelItem.prototype.removeAllListeners=function(a){return this._eventMgr.removeAll(a)
};
XModelItem.prototype.isListenerRegistered=function(a){return this._eventMgr.isListenerRegistered(a)
};
XModelItem.prototype.notifyListeners=function(a,b){return this._eventMgr.notifyListeners(a,b)
};
XModel.registerErrorMessage("notANumber",AjxMsg.notANumber);
XModel.registerErrorMessage("numberTotalExceeded",AjxMsg.numberTotalExceeded);
XModel.registerErrorMessage("numberFractionExceeded",AjxMsg.numberFractionExceeded);
XModel.registerErrorMessage("numberMoreThanMax",AjxMsg.numberMoreThanMax);
XModel.registerErrorMessage("numberMoreThanEqualMax",AjxMsg.numberMoreThanEqualMax);
XModel.registerErrorMessage("numberLessThanMin",AjxMsg.numberLessThanMin);
XModel.registerErrorMessage("numberLessThanEqualMin",AjxMsg.numberLessThanEqualMin);
XModelItem.prototype.validateNumber=function(e){e=this._normalizeAndValidate(e);
var c=parseFloat(e);
if(isNaN(c)||!AjxUtil.FLOAT_RE.test(e)){throw this.getModel().getErrorMessage("notANumber",e)
}var h=this.getTotalDigits();
if(this.totalDigits!==null){var f=Math.floor(c);
if(f.toString().length>h){throw this.getModel().getErrorMessage("numberTotalExceeded",e,h)
}}var k=this.getFractionDigits();
if(this.fractionDigits!==null){var a=String(c-Math.floor(c));
if(a.indexOf(".")!=-1&&a.replace(/^\d*\./,"").length>k){throw this.getModel().getErrorMessage("numberFractionExceeded",e,k)
}}var b=this.getMaxInclusive();
if(b!==null&&c>b){throw this.getModel().getErrorMessage("numberMoreThanMax",b)
}var g=this.getMaxExclusive();
if(g!==null&&c>=g){throw this.getModel().getErrorMessage("numberMoreThanEqualMax",g)
}var j=this.getMinInclusive();
if(j!==null&&c<j){throw this.getModel().getErrorMessage("numberLessThanMin",j)
}var d=this.getMinExclusive();
if(d!==null&&c<=d){throw this.getModel().getErrorMessage("numberLessThanEqualMin",d)
}return c
};
XModel.registerErrorMessage("notAnInteger",AjxMsg.notAnInteger);
XModelItem.prototype.validateInt=function(b){var a=this.validateNumber(b);
var c=parseInt(b);
if(c!=a){throw this.getModel().getErrorMessage("notAnInteger",b)
}return c
};
XModelItem.prototype.msecInOneDay=(1000*60*60*24);
XModel.registerErrorMessage("invalidDateString",AjxMsg.invalidDateString);
XModelItem.prototype.validateDate=function(e){if(AjxUtil.isInstance(e,Date)){return e
}if(AjxUtil.isString(e)){e=e.toLowerCase();
var b=new Date();
if(e.indexOf("/")>-1){var d=e.split("/");
if(d.length==3){var f=d[0];
var a=d[1];
var c=d[2];
if(f.length<=2&&a.length<=2&&c.length==4){f=parseInt(XModel.removePreceedingZero(f));
a=parseInt(XModel.removePreceedingZero(a));
c=parseInt(XModel.removePreceedingZero(c));
if(!isNaN(f)&&!isNaN(a)&&!isNaN(c)){f-=1;
b.setFullYear(c,f,a);
b.setHours(0,0,0,0);
return b
}}}}else{b.setHours(0,0,0,0);
if(e==AjxMsg.today){return b
}else{if(e==AjxMsg.yesterday){b.setTime(b.getTime()-this.msecInOneDay);
return b
}else{if(e==AjxMsg.tomorrow){b.setTime(b.getTime()+this.msecInOneDay);
return b
}}}}}throw this.getModel().getErrorMessage("invalidDateString",e);
return e
};
XModel.removePreceedingZero=function(b){var c=/^[0]*(.*)$/;
var a=b.match(c);
if(a!=null){return a[1]
}else{return b
}};
XModel.registerErrorMessage("invalidTimeString",AjxMsg.invalidTimeString);
XModelItem.prototype.validateTime=function(f){if(AjxUtil.isNumber(f)){return f
}if(AjxUtil.isInstance(f,Date)){return((f.getHours()*360)+(f.getMinutes()*60)+f.getSeconds())*1000
}if(AjxUtil.isString(f)){f=f.toLowerCase();
if(f.indexOf(":")>-1){f=f.split(":");
var a=false;
var c=f[f.length-1];
a=(c.indexOf(I18nMsg.periodPm.toLowerCase())>-1);
var b=parseInt(f[0]);
var d=parseInt(f[1]);
var e=(f.length==3?parseInt(f[2]):0);
if(!isNaN(b)&&!isNaN(d)&&!isNaN(e)){b-=1;
if(a&&b>11){b+=12
}return((b*360)+(d*60)+e)*1000
}}}throw this.getModel().getErrorMessage("invalidTimeString",f)
};
XModel.registerErrorMessage("invalidDatetimeString",AjxMsg.invalidDatetimeString);
XModelItem.prototype.validateDateTime=function(b){if(AjxUtil.isInstance(b,Date)){return b
}if(AjxUtil.isNumber(b)){return b
}if(AjxUtil.isString(b)){var a=this.validateDate(b);
if(b.indexOf(":")>-1){var c=b.split(" ")[1];
c=this.validateTimeString(c);
a.setTime(a.getTime()+c)
}return a
}throw this.getModel().getErrorMessage("invalidDatetimeString",b)
};
String_XModelItem=function(){};
XModelItemFactory.createItemType("_STRING_","string",String_XModelItem);
String_XModelItem.prototype.validateType=XModelItem.prototype.validateString;
String_XModelItem.prototype.getDefaultValue=function(){return""
};
Number_XModelItem=function(){};
XModelItemFactory.createItemType("_NUMBER_","number",Number_XModelItem);
Number_XModelItem.prototype.validateType=XModelItem.prototype.validateNumber;
Number_XModelItem.prototype.getDefaultValue=function(){return 0
};
Integer_XModelItem=function(){};
XModelItemFactory.createItemType("_INT_","int",Integer_XModelItem);
Integer_XModelItem.prototype.validateType=XModelItem.prototype.validateInt;
Integer_XModelItem.prototype.getDefaultValue=function(){return 0
};
Date_XModelItem=function(){};
XModelItemFactory.createItemType("_DATE_","date",Date_XModelItem);
Date_XModelItem.prototype.validateType=XModelItem.prototype.validateDate;
Date_XModelItem.prototype.getDefaultValue=function(){return new Date()
};
Time_XModelItem=function(){};
XModelItemFactory.createItemType("_TIME_","time",Time_XModelItem);
Time_XModelItem.prototype.validateType=XModelItem.prototype.validateTime;
Time_XModelItem.prototype.getDefaultValue=function(){return new Date()
};
Datetime_XModelItem=function(){};
XModelItemFactory.createItemType("_DATETIME_","datetime",Datetime_XModelItem);
Datetime_XModelItem.prototype.validateType=XModelItem.prototype.validateDateTime;
Datetime_XModelItem.prototype.getDefaultValue=function(){return new Date()
};
List_XModelItem=function(){};
XModelItemFactory.createItemType("_LIST_","list",List_XModelItem);
List_XModelItem.prototype.getDefaultValue=function(){return new Array()
};
List_XModelItem.prototype.outputType=_LIST_;
List_XModelItem.prototype.itemDelimiter=",";
List_XModelItem.prototype.inputDelimiter=/[\s,\r\n]+/;
List_XModelItem.prototype.listItem={type:_UNTYPED_};
List_XModelItem.prototype.getOutputType=function(){return this.outputType
};
List_XModelItem.prototype.getItemDelimiter=function(){return this.itemDelimiter
};
List_XModelItem.prototype.getInputDelimiter=function(){return this.inputDelimiter
};
List_XModelItem.prototype.getListItem=function(){return this.listItem
};
List_XModelItem.prototype.getterScope=_MODELITEM_;
List_XModelItem.prototype.setterScope=_MODELITEM_;
List_XModelItem.prototype.getter="getValue";
List_XModelItem.prototype.setter="setValue";
List_XModelItem.prototype.getValue=function(ins,current,ref){var value=eval("ins."+ref);
if(value&&this.getOutputType()==_STRING_&&value instanceof Array){return value.join(this.getItemDelimiter())
}else{return value
}};
List_XModelItem.prototype.setValue=function(val,ins,current,ref){if(val&&this.getOutputType()==_STRING_&&!(val instanceof Array)){var value=val.split(this.getInputDelimiter());
eval("ins."+ref+" = value");
return value
}else{var value=eval("ins."+ref+" = val");
return value
}};
List_XModelItem.prototype.initializeItems=function(){var a=this.listItem;
a.ref=a.id="#";
this.listItem=XModelItemFactory.createItem(a,this,this.getModel());
this.listItem.initializeItems()
};
List_XModelItem.prototype.validateType=function(a){return a
};
Enum_XModelItem=function(){XModel.registerErrorMessage("didNotMatchChoice",AjxMsg.didNotMatchChoice)
};
XModelItemFactory.createItemType("_ENUM_","enum",Enum_XModelItem);
Enum_XModelItem.prototype.getDefaultValue=function(){return this.getChoices()[0]
};
Enum_XModelItem.prototype.getChoices=function(){if(typeof this.choices=="function"){this.choices=this.choices.call(this)
}return this.choices
};
Enum_XModelItem.prototype.getSelection=function(){return this.selection
};
Enum_XModelItem.prototype.validateType=function(c){var d=this.getSelection()==_OPEN_;
if(d){return c
}var e=this.getChoices();
for(var b=0;
b<e.length;
b++){var a=e[b];
if(AjxUtil.isInstance(a,Object)){if(a.value==c){return c
}}else{if(a==c){return c
}}}throw this.getModel().getErrorMessage("didNotMatchChoice",c)
};
Bool_XModelItem=function(){};
XModelItemFactory.createItemType("_BOOL_","bool",Bool_XModelItem);
Bool_XModelItem.prototype=new Enum_XModelItem();
Bool_XModelItem.prototype.choices=["FALSE","TRUE",null];
FileSize_XModelItem=function(){};
XModelItemFactory.createItemType("_FILE_SIZE_","file_size",FileSize_XModelItem);
FileSize_XModelItem.prototype.validateType=XModelItem.prototype.validateNumber;
FileSize_XModelItem.prototype.getterScope=_MODELITEM_;
FileSize_XModelItem.prototype.setterScope=_MODELITEM_;
FileSize_XModelItem.prototype.getter="getValue";
FileSize_XModelItem.prototype.setter="setValue";
FileSize_XModelItem.prototype.units=AjxUtil.SIZE_MEGABYTES;
FileSize_XModelItem.prototype.minInclusive=0;
FileSize_XModelItem.prototype.maxInclusive=922337203685477;
FileSize_XModelItem.prototype.maxLength=15;
FileSize_XModelItem.prototype.getValue=function(ins,current,ref){var value=eval("ins."+ref);
return value?AjxUtil.formatSizeForUnits(value,AjxUtil.SIZE_KILOBYTES,false,2):1
};
FileSize_XModelItem.prototype.setValue=function(val,ins,current,ref){var value=eval("ins."+ref+" = AjxUtil.parseSize(val, this.units)");
return isNaN(value)?1:value
};
HostNameOrIp_XModelItem=function(){};
XModelItemFactory.createItemType("_HOSTNAME_OR_IP_","hostname_or_ip",HostNameOrIp_XModelItem);
HostNameOrIp_XModelItem.prototype.validateType=XModelItem.prototype.validateString;
HostNameOrIp_XModelItem.prototype.maxLength=256;
HostNameOrIp_XModelItem.prototype.pattern=[AjxUtil.HOST_NAME_RE,AjxUtil.IPv4_ADDRESS_RE,AjxUtil.IPv6_ADDRESS_RE,AjxUtil.HOST_NAME_WITH_PORT_RE,AjxUtil.IPv4_ADDRESS_WITH_PORT_RE,AjxUtil.IPv6_ADDRESS_WITH_PORT_RE];
ShortURL_XModelItem=function(){};
XModelItemFactory.createItemType("_SHORT_URL_","short_url",ShortURL_XModelItem);
ShortURL_XModelItem.prototype.validateType=XModelItem.prototype.validateString;
ShortURL_XModelItem.prototype.maxLength=256;
ShortURL_XModelItem.prototype.pattern=[AjxUtil.SHORT_URL_RE,AjxUtil.IP_SHORT_URL_RE];
Port_XModelItem=function(){};
XModelItemFactory.createItemType("_PORT_","port",Port_XModelItem);
Port_XModelItem.prototype.validateType=XModelItem.prototype.validateNumber;
Port_XModelItem.prototype.minInclusive=0;
Port_XModelItem.prototype.maxInclusive=65535;
Percent_XModelItem=function(){};
XModelItemFactory.createItemType("_PERCENT_","percent",Percent_XModelItem);
Percent_XModelItem.prototype.validateType=XModelItem.prototype.validateNumber;
Percent_XModelItem.prototype.minInclusive=0;
Percent_XModelItem.prototype.maxInclusive=100;
EmailAddress_XModelItem=function(){};
XModelItemFactory.createItemType("_EMAIL_ADDRESS_","email_address",EmailAddress_XModelItem);
EmailAddress_XModelItem.prototype.validateType=XModelItem.prototype.validateEmailAddress;
EmailAddress_XModelItem.prototype.maxLength=256;
FullUrl_XModelItem=function(){};
XModelItemFactory.createItemType("_FULL_URL_","full_url",FullUrl_XModelItem);
FullUrl_XModelItem.prototype.validateType=XModelItem.prototype.validateString;
FullUrl_XModelItem.prototype.maxLength=1024;
FullUrl_XModelItem.prototype.pattern=[AjxUtil.FULL_URL_RE,AjxUtil.IP_FULL_URL_RE]
}if(AjxPackage.define("ajax.dwt.xforms.XForm")){XForm=function(d,e,a,c,b){if(d){for(var f in d){this[f]=d[f]
}}this.assignGlobalId(this,this.id||b||"_XForm");
DwtComposite.call(this,c,"DWTXForm");
if(this.itemDefaults){XFormItemFactory.initItemDefaults(this,this.itemDefaults)
}if(e){this.setModel(e)
}else{this.xmodel=new XModel()
}if(a){this.setInstance(a)
}this.__idIndex={};
this.__externalIdIndex={};
this.__itemsAreInitialized=false;
this.tabIdOrder=[];
this.tabGroupIDs=[]
};
XForm.prototype=new DwtComposite;
XForm.prototype.constructor=XForm;
XForm.FONT_WIDTH1=7;
XForm.FONT_WIDTH2=8;
XForm.toString=function(){return"[Class XForm]"
};
XForm.prototype.toString=function(){return"[XForm "+this.__id+"]"
};
XForm.prototype.getId=function(){return this.__id
};
XForm.keyPressDelayHdlr=null;
XForm.prototype.numCols=2;
XForm.prototype.defaultItemType="output";
XForm.prototype._isDirty=false;
XForm._showBorder=false;
var _IGNORE_CACHE_="IGNORE_CACHE";
var _UNDEFINED_;
var _UNDEFINED_;
var _ALL_="all";
var _NONE_="none";
var _LEFT_="left";
var _TOP_="top";
var _RIGHT_="right";
var _BOTTOM_="bottom";
var _CENTER_="center";
var _MIDDLE_="middle";
var _INLINE_="inline";
var _HIDE_="hide";
var _BLOCK_HIDE_="block_hide";
var _DISABLE_="disable";
var _SHOW_DISABLED_="show_disabled";
var _PARENT_="parent";
var _SELF_="self";
var _OPEN_="open";
var _CLOSED_="closed";
var _HIDDEN_="hidden";
var _SCROLL_="scroll";
var _AUTO_="auto";
var _VISIBLE_="visible";
XForm.prototype.refresh=function(){if(this.__drawn){this.updateElementStates()
}};
XForm.prototype.getGlobalRefString=function(){return"XFG.cacheGet('"+this.__id+"')"
};
XForm.prototype.assignGlobalId=function(a,b){return XFG.assignUniqueId(a,b)
};
XForm.prototype.getUniqueId=function(a){return XFG.getUniqueId(a)
};
XForm.prototype.getElement=function(b){if(b==null){b=this.getId()
}var a=XFG.getEl(b);
if(a==null){}return a
};
XForm.prototype.showElement=function(a){if(a==null){a=this.getId()
}return XFG.showEl(a)
};
XForm.prototype.hideElement=function(b,a){if(b==null){b=this.getId()
}return XFG.hideEl(b,a)
};
XForm.prototype.createElement=function(d,b,a,c){if(d==null){d=this.getId()
}return XFG.createEl(d,b,a,c)
};
XForm.prototype.focusElement=function(c){var b=this.getElement(c);
if(b!=null){var a=b.tagName;
if(a!="DIV"&&a!="TD"&&a!="TABLE"){b.focus();
this.onFocus(c)
}}return b
};
XForm.prototype.focusFirst=function(d){var g=null;
if(d!=null){g=this.tabIdOrder[d]
}else{for(var c in this.tabIdOrder){if(this.getItemById(c).getIsVisible()&&this.getItemById(c).getIsEnabled()&&this.tabIdOrder[c]&&this.tabIdOrder[c].length>0){g=this.tabIdOrder[c];
break
}}}if(g){var f=g.length;
for(var e=0;
e<f;
e++){var b=this.getItemById(g[e]);
if(b&&b.focusable&&b.getIsVisible()&&b.getIsEnabled()){return this.focusElement(g[e])
}}}return null
};
XForm.prototype.addTabGroup=function(c,a){a=a?a:"tabGroupKey";
var b=c.getInheritedProperty(a)?c.getInheritedProperty(a):c.getId();
this.tabGroupIDs[b]=c.getId()
};
XForm.prototype.focusNext=function(h,b){var f=h?h:null;
var g=null;
if(b!=null){g=this.tabIdOrder[b]
}else{g=this.tabIdOrder
}if(g&&g.length>0){var e=g.length;
if(f!=null){for(var d=0;
d<e;
d++){if(g[d]==f){var c=((d+1)%e);
if(g[c]){var a=this.getItemById(g[c]);
if(a.focusable&&a.getIsVisible()&&a.getIsEnabled()){return this.focusElement(g[c])
}else{f=g[c]
}}}}}return this.focusFirst(b)
}return null
};
XForm.prototype.focusPrevious=function(h,b){var f=h?h:null;
var g=null;
if(b!=null){g=this.tabIdOrder[b]
}else{g=this.tabIdOrder
}if(g&&g.length>0){var e=g.length-1;
if(f!=null){for(var d=e;
d>=0;
d--){if(g[d]==f){var c=((d-1)%e);
if(g[c]){var a=this.getItemById(g[c]);
if(a.focusable&&a.getIsVisible()&&a.getIsEnabled()){return this.focusElement(g[c])
}else{f=g[c]
}}}}}return this.focusFirst(b)
}return null
};
XForm.prototype.getModel=function(){return this.xmodel
};
XForm.prototype.setModel=function(a){this.xmodel=a
};
XForm.prototype.getInstance=function(){return this.instance
};
XForm.prototype.updateElementStates=function(){if(!this.__drawn){return
}this.items[0].updateVisibility();
this.items[0].updateEnabledDisabled();
this.items[0].updateElement()
};
XForm.prototype.setInstance=function(a){this.setIsDirty(false);
this.clearErrors();
this.instance=a;
if(this.__drawn){this.updateElementStates()
}else{this.__updateStatesDelayed=true
}if(this.__drawn){this.notifyListeners(DwtEvent.XFORMS_INSTANCE_CHANGED,new DwtXFormsEvent(this))
}};
XForm.prototype.getInstance=function(){return this.instance
};
XForm.prototype.setInstanceValue=function(b,a){this.xmodel.setInstanceValue(this.instance,a,b)
};
XForm.prototype.getInstanceValue=function(a){return this.xmodel.getInstanceValue(this.instance,a)
};
XForm.checkInstanceValue=function(a,b){return(this.getInstanceValue(a)==b)
};
XForm.checkInstanceValueNot=function(a,b){return(this.getInstanceValue(a)!=b)
};
XForm.checkInstanceValueEmty=function(a){return AjxUtil.isEmpty(this.getInstanceValue(a))
};
XForm.checkInstanceValueNotEmty=function(a){return !AjxUtil.isEmpty(this.getInstanceValue(a))
};
XForm.prototype.getController=function(){return this.controller
};
XForm.prototype.setController=function(a){this.controller=a
};
XForm.prototype.getIsDirty=function(){return this._isDirty
};
XForm.prototype.setIsDirty=function(a,b){this._isDirty=(a==true);
if(typeof b=="undefined"){b=null
}this.notifyListeners(DwtEvent.XFORMS_FORM_DIRTY_CHANGE,new DwtXFormsEvent(this,b,this._isDirty))
};
XForm.prototype.initializeItems=function(){this.xmodel.initializeItems();
if(this.__itemsAreInitialized){return
}var a={id:"__outer_group__",type:_GROUP_,useParentTable:false,numCols:this.numCols,colSizes:this.colSizes,items:this.items,tableCssClass:this.tableCssClass,tableCssStyle:this.tableCssStyle};
this.items=this.initItemList([a]);
this.__itemsAreInitialized=true
};
XForm.prototype.initItemList=function(e,b){var c=[];
for(var d=0;
d<e.length;
d++){var a=e[d];
if(a!=null){c.push(this.initItem(a,b))
}}this.__nestedItemCount+=e.length;
return c
};
XForm.prototype.initItem=function(b,a){if(b._isXFormItem){return b
}var c=XFormItemFactory.createItem(b,a,this);
c.initializeItems();
return c
};
XForm.prototype.indexItem=function(b,d){this.__idIndex[d]=b;
var c=b.getExternalId();
if(c==null||c==""){return
}var a=this.__externalIdIndex[c];
if(a!=null){a.push(b)
}else{a=[b]
}this.__externalIdIndex[c]=a
};
XForm.prototype.getItemById=function(a){if(a._isXFormItem){return a
}return this.__idIndex[a]
};
XForm.prototype.getItemsById=function(a){return this.__externalIdIndex[a]
};
XForm.prototype.get=function(a){if(a==null){return null
}if(a._isXFormItem){a=a.getRefPath()
}return this.xmodel.getInstanceValue(this.instance,a)
};
XForm.prototype.isDrawn=function(){return(this.__drawn==true)
};
XForm.prototype._replaceDwtContainer=function(){var a=document.getElementById(this.__id);
var b=this.getHtmlElement();
if(b.parentNode){b.parentNode.replaceChild(a,b)
}this._htmlElId=this.__id
};
XForm.prototype.draw=function(a){this.initializeItems();
var b=this.outputForm();
if(a==null){a=this.getHtmlElement()
}if(a){a.innerHTML=b
}this.notifyListeners(DwtEvent.XFORMS_READY,new DwtXFormsEvent(this));
this.__drawn=true;
if(this.__updateStatesDelayed&&this.instance){this.updateElementStates();
this.__updateStatesDelayed=false
}};
XForm.prototype.getItems=function(){return this.items
};
XForm.prototype.outputForm=function(){var c=new Date().getTime();
var b=new AjxBuffer();
var a=this.getItems();
b.append('<div id="',this.__id,'"','style="height: 100%;"',(this.cssClass!=null&&this.cssClass!=""?' class="'+this.cssClass+'"':""),(this.cssStyle!=null&&this.cssStyle!=""?' style="'+this.cssStyle+';"':""),">");
this._itemsToInsert={};
this._itemsToCleanup=[];
this.outputItemList(a[0].items,a[0],b,this.numCols);
b.append('</div id="',this.__id,'">');
this.__HTMLOutput=b.toString();
return this.__HTMLOutput
};
XForm.prototype.getOutstandingRowSpanCols=function(b){if(b==null){return 0
}var d=0;
var a=b.__rowSpanItems;
if(a){for(var e=a.length-1;
e>=0;
e--){var c=a[e];
c.__numOutstandingRows-=1;
if(c.__numOutstandingRows==0){if(a.length==1){delete b.__rowSpanItems
}else{b.__rowSpanItems.pop()
}}else{d+=c.__numDrawnCols
}}}return d
};
XForm.prototype.outputItemList=function(t,r,o,g,z,l,q){if(r.outputHTMLStart){r.outputHTMLStart(o,z)
}var A=(r.getUseParentTable()==false&&l!=true);
var d=null;
if(!q){d=r.getCssString();
if(d!=null&&d!=""){r.outputElementDivStart(o)
}}if(A){var k=r.getColSizes();
var b=r.getInheritedProperty("cellspacing");
var x=r.getInheritedProperty("cellpadding");
var u=r.getInheritedProperty("border");
if(u==0&&XForm._showBorder){u=1
}o.append("<table cellspacing=",b," cellpadding=",x,"  border=",u,' id="',r.getId(),'_table" ',r.getTableCssString(),">");
if(k!=null){o.append(" <colgroup>");
for(var v=0;
v<k.length;
v++){var s=k[v];
if(!isNaN(s)){if(s<1){s=s*100+"%"
}}o.append("<col width='",s,"'>")
}o.append("</colgroup>")
}o.append("<tbody>")
}g=Math.max(1,g);
if(z==null){z=0
}for(var f=0;
f<t.length;
f++){var y=t[f];
var a=(y.getItems()!=null);
var B=(y.getUseParentTable()!=false);
y.__numDrawnCols=0;
var n=y.getLabel();
var c=y.getLabelLocation();
var w=(n!=null&&(c==_LEFT_||c==_RIGHT_));
var m=y.getColSpan();
if(m=="*"){m=Math.max(1,(g-z))
}var e=y.getRowSpan();
var h=y.__numDrawnCols=parseInt(m)+(w?1:0);
if(e>1&&r){if(r.__rowSpanItems==null){r.__rowSpanItems=[]
}r.__rowSpanItems.push(y);
y.__numOutstandingRows=e
}if(z==0){o.append("<tr>")
}if(n!=null&&c==_LEFT_){y.outputLabelCellHTML(o,e,c)
}var p=y.getWriteElementDiv();
var j=y.getOutputHTMLMethod();
if(a&&B){if(j){j.call(y,o,z)
}}else{y.outputContainerTDStartHTML(o,m,e);
if(p){y.outputElementDivStart(o)
}if(j){j.call(y,o,0)
}if(p){y.outputElementDivEnd(o)
}y.outputContainerTDEndHTML(o)
}z+=h;
if(n!=null&&c==_RIGHT_){y.outputLabelCellHTML(o,e)
}if(z>=g){o.append("</tr>");
z=this.getOutstandingRowSpanCols(r)
}while(z>=g){o.append("</tr id='numCols'>");
z=this.getOutstandingRowSpanCols(r)
}if(r){r.registerActiveChild(y)
}y.signUpForEvents()
}if(A){o.append("</tbody></table>")
}if(d!=null&&d!=""){r.outputElementDivEnd(o)
}if(r.outputHTMLEnd){r.outputHTMLEnd(o,z)
}};
XForm.prototype.onFocus=function(a){this.__focusObject=a
};
XForm.prototype.onBlur=function(a){this.__focusObject=null
};
XForm.prototype.subItemChanged=function(b,g,a,e){var h=this.getItemById(b);
if(h==null){return alert("Couldn't get item for "+b)
}h.dirtyDisplay();
var c=h.getSubModelItem();
var k=false;
if(c!=null){try{g=c.validate(g,this,h,this.getInstance());
if(h.hasError()){k=true
}h.clearError()
}catch(j){h.setError(j);
var a=new DwtXFormsEvent(this,h,g);
this.notifyListeners(DwtEvent.XFORMS_VALUE_ERROR,a);
return
}}var d=h.cacheInheritedMethod("onSubChange","$onSubChange","value,event,form");
if(typeof d=="function"){g=d.call(h,g,a,this)
}else{var f=h.getInstanceValue(h.getInheritedProperty("subRef"));
if(f==g){if(k&&!e){this.notifyListeners(DwtEvent.XFORMS_VALUE_CHANGED,a)
}return
}h.setInstanceValue(g,h.getSubRefPath())
}var a=new DwtXFormsEvent(this,h,g);
if(!e){this.notifyListeners(DwtEvent.XFORMS_VALUE_CHANGED,a)
}this.setIsDirty(true,h)
};
XForm.prototype.itemChanged=function(b,g,a,e){var h=this.getItemById(b);
if(h==null){return alert("Couldn't get item for "+b)
}h.dirtyDisplay();
var c=h.getModelItem();
var k=false;
if(c!=null){try{g=c.validate(g,this,h,this.getInstance());
if(h.hasError()){k=true
}h.clearError()
}catch(j){h.setError(j);
var a=new DwtXFormsEvent(this,h,g);
this.notifyListeners(DwtEvent.XFORMS_VALUE_ERROR,a);
return
}}var d=h.getOnChangeMethod();
if(typeof d=="function"){g=d.call(h,g,a,this)
}else{var f=h.getInstanceValue();
if(f==g){if(k&&!e){this.notifyListeners(DwtEvent.XFORMS_VALUE_CHANGED,a)
}return
}h.setInstanceValue(g)
}var a=new DwtXFormsEvent(this,h,g);
if(!e){this.notifyListeners(DwtEvent.XFORMS_VALUE_CHANGED,a)
}this.setIsDirty(true,h)
};
XForm.prototype.getItemsInErrorState=function(){if(this.__itemsInErrorState==null){this.__itemsInErrorState=new Object();
this.__itemsInErrorState.size=0
}return this.__itemsInErrorState
};
XForm.prototype.addErrorItem=function(b){var a=this.getItemsInErrorState();
var c=a[b.getId()];
a[b.getId()]=b;
if(c==null){a.size++
}};
XForm.prototype.removeErrorItem=function(b){if(b!=null){var a=this.getItemsInErrorState();
var d=b.getId();
var c=a[d];
if(c!=null){delete a[d];
a.size--
}}};
XForm.prototype.hasErrors=function(){var a=this.getItemsInErrorState();
return(a!=null&&a.size>0)
};
XForm.prototype.clearErrors=function(){var b=this.getItemsInErrorState();
if(b.size>0){var a;
for(a in b){if(a=="size"){continue
}b[a].clearError();
delete b[a]
}b.size=0
}};
XForm.prototype.onCloseForm=function(){if(this.__focusObject!=null){var b=this.getItemById(this.__focusObject);
var a=b.getElement();
if(a&&a.blur){a.blur()
}this.__focusObject=null
}};
XForm.prototype.releaseFocus=function(){if(this.__focusObject!=null){var b=this.getItemById(this.__focusObject);
var a=b.getElement();
if(a&&a.blur){a.blur()
}this.__focusObject=null
}};
XForm.prototype._reparentDwtObject=function(c,b){var a=c.getHtmlElement();
if(a.parentNode){a.parentNode.removeChild(a)
}b.appendChild(a)
};
XForm.prototype.shouldInsertItem=function(a){return(this._itemsToInsert[a.getId()]!=null)
};
XForm.prototype.insertExternalWidget=function(b){var a=b.getInsertMethod();
var c=b.getWidget();
if(c&&c.insertIntoXForm instanceof Function){c.insertIntoXForm(this,b,b.getElement())
}else{if(typeof this[a]=="function"){this[a](b,b.getElement())
}else{}}delete this._itemsToInsert[b.getId()]
}
}if(AjxPackage.define("ajax.dwt.xforms.XFormItem")){XFormItemFactory=function(){};
XFormItemFactory.createItem=function(g,d,k){var f=this.getRefPath(g,d);
var c=this.getSubRefPath(g,d);
var h,b;
if(f!=null){h=this.getModelItem(k.xmodel,g,f)
}if(c!=null){b=this.getModelItem(k.xmodel,g,c)
}var j=this.getItemType(g,h);
var e=this.getItemTypeConstructor(j,k);
var l=new e();
l._setAttributes(g);
var a=(g.id?k.getId()+"_"+g.id:f?k.getId()+"_"+f:l.__parentItem?l.__parentItem.getId():k.getId()+"_"+l.type);
l.id=k.getUniqueId(a);
l.refPath=f;
l.subRefPath=c;
l.__modelItem=h;
l.__subModelItem=b;
l.__xform=k;
l.__parentItem=d;
k.indexItem(l,l.id);
l.initFormItem();
return l
};
XFormItemFactory.getRefPath=function(c,a){if(c.refPath){return c.refPath
}var d=c.ref;
if(d==null){return null
}if(a){var b=a.getRefPath();
if(b==null){b=""
}}else{var b=""
}var e=d;
if(d=="."){e=b
}else{if(d==".."){b=b.split("/");
e=b.slice(0,b.length-1).join("/")
}else{if(b==""){e=d
}else{e=b+"/"+d
}}}return e
};
XFormItemFactory.getSubRefPath=function(c,a){if(c.subRefPath){return c.subRefPath
}var e=c.subRef;
if(e==null){return null
}if(a){var b=a.getSubRefPath();
if(b==null){b=""
}}else{var b=""
}var d=e;
if(e=="."){d=b
}else{if(e==".."){b=b.split("/");
d=b.slice(0,b.length-1).join("/")
}else{if(b==""){d=e
}else{d=b+"/"+e
}}}return d
};
XFormItemFactory.getModelItem=function(c,a,b){if(b==null||b==""){return null
}return c.getItem(b,true)
};
XFormItemFactory.getItemType=function(b,d){var e=b.type;
if(e==null){e=b.type=_OUTPUT_
}var c=(d&&d.type?d.type:_STRING_);
if(e==_INPUT_){if(b.value!==_UNDEFINED_){e=_CHECKBOX_
}else{switch(c){case _STRING_:case _NUMBER_:e=_INPUT_;
break;
case _DATE_:case _DATETIME_:case _TIME_:e=c;
break;
default:e=_INPUT_
}}}else{if(e==_SELECT_){var a=b.appearance;
if(a==_RADIO_){e=_RADIO_
}else{e=_SELECT_
}}}return e
};
XFormItemFactory.typeConstructorMap={};
XFormItemFactory.createItemType=function(d,a,c,b){if(c==null){c=new Function()
}if(typeof b=="string"){b=this.getItemTypeConstructor(b)
}if(b==null){b=XFormItem
}c.prototype=new b();
c.prototype.type=a;
c.prototype.constructor=c;
c.prototype.toString=new Function("return '[XFormItem:"+a+" ' + this.getId() + ']'");
c.toString=new Function("return '[Class XFormItem:"+a+"]'");
this.registerItemType(d,a,c);
return c
};
XFormItemFactory.registerItemType=function(c,a,b){window[c]=a;
this.typeConstructorMap[a]=b
};
XFormItemFactory.defaultItemType="output";
XFormItemFactory.getItemTypeConstructor=function(a,b){var c=(b&&b.typeConstructorMap?b.typeConstructorMap:this.typeConstructorMap);
var e=c[a];
if(e==null){var d=(b?b.defaultItemType:this.defaultItemType);
c[d]
}return e
};
XFormItemFactory.quickClone=function(a){this.cloner.prototype=a;
return new this.cloner()
};
XFormItemFactory.cloner=function(){};
XFormItemFactory.initItemDefaults=function(d,g){d.typeConstructorMap=this.quickClone(this.typeConstructorMap);
if(g==null){g=d.itemDefaults
}if(g!=null){for(var c in g){var b=this.typeConstructorMap[c];
var e=g[c];
if(b==null){c=window[c];
b=this.typeConstructorMap[c]
}if(b==null){continue
}var a=d.typeConstructorMap[c]=new Function();
a.prototype=new b();
a.prototype.constructor=a;
for(var f in e){a.prototype[f]=e[f]
}}}};
XFormItem=function(){};
XFormItem.prototype.constructor=XFormItem;
XFormItemFactory.registerItemType("_FORM_ITEM_","form_item",XFormItem);
XFormItem.ERROR_STATE_ERROR=0;
XFormItem.ERROR_STATE_VALID=1;
XFormItem.prototype._isXFormItem=true;
XFormItem.prototype.writeElementDiv=false;
XFormItem.prototype.labelLocation=_LEFT_;
XFormItem.prototype.tableCssClass="xform_table";
XFormItem.prototype.tableCssStyle=null;
XFormItem.prototype.containerCssClass="xform_container";
XFormItem.prototype.containerCssStyle=null;
XFormItem.prototype.cssClass=null;
XFormItem.prototype.labelCssClass="xform_label";
XFormItem.prototype.errorCssClass="xform_error";
XFormItem.prototype.nowrap=false;
XFormItem.prototype.labelWrap=false;
XFormItem.prototype.align=_UNDEFINED_;
XFormItem.prototype.valign=_UNDEFINED_;
XFormItem.prototype.focusable=false;
XFormItem.prototype.bmolsnr=false;
XFormItem.prototype.forceUpdate=false;
XFormItem.prototype.isBlockElement=false;
XFormItem.prototype.visibilityChecks=[];
XFormItem.prototype.enableDisableChecks=[];
XFormItem.prototype.visibilityChangeEventSources=[];
XFormItem.prototype.enableDisableChangeEventSources=[];
XFormItem.prototype.valueChangeEventSources=[];
XFormItem.prototype.visibilityUpdaters=[];
XFormItem.prototype.enabledDisabledUpdaters=[];
XFormItem.prototype.elementChangeHandler="onchange";
XFormItem.prototype.selection=_CLOSED_;
XFormItem.prototype.openSelectionLabel="";
XFormItem.prototype.errorLocation=_SELF_;
XFormItem.prototype.helpTooltip=false;
XFormItem.prototype._setAttributes=function(a){this.__attributes=a
};
XFormItem.prototype.initFormItem=function(){if(this.focusable){var a=XFormItem.getParentTabGroupId(this);
if(a){var b=this.getForm().getItemById(a);
b.tabIdOrder.push(this.getId())
}}};
XFormItem.prototype.initializeItems=function(){var a=this.getItems();
if(a!=null){this.items=this.getForm().initItemList(a,this)
}};
XFormItem.prototype.registerActiveChild=function(a){if(!this.activeChildren){this.activeChildren={}
}this.activeChildren[a.getId()]=true
};
XFormItem.prototype.signUpForEvents=function(){var f;
f=this.getModelItem();
var d=this.getInheritedProperty("visibilityChangeEventSources");
if(!AjxUtil.isEmpty(d)){var g=this.getModel();
var b=d.length;
if(g&&b>0){for(var e=0;
e<b;
e++){var a=g.getItem(d[e],false);
if(a){var h=new AjxListener(this,XFormItem.prototype.updateVisibilityLsnr);
a.addListener(DwtEvent.XFORMS_VALUE_CHANGED,h)
}}}}var c=this.getInheritedProperty("enableDisableChangeEventSources");
if(!AjxUtil.isEmpty(c)){var g=this.getModel();
var b=c.length;
if(g&&b>0){for(var e=0;
e<b;
e++){var a=g.getItem(c[e],false);
if(a){var h=new AjxListener(this,XFormItem.prototype.updateEnabledDisabledLsnr);
a.addListener(DwtEvent.XFORMS_VALUE_CHANGED,h)
}}}}var k=this.getInheritedProperty("valueChangeEventSources");
if(!AjxUtil.isEmpty(k)){var g=this.getModel();
var b=k.length;
if(g&&b>0){for(var e=0;
e<b;
e++){var a=g.getItem(k[e],false);
if(a){var h=new AjxListener(this,XFormItem.prototype.valueChangeLsnr);
a.addListener(DwtEvent.XFORMS_VALUE_CHANGED,h)
}}}}var j=this.getInheritedProperty("bmolsnr");
if(f&&j){var h=new AjxListener(this,XFormItem.prototype.valueChangeLsnr);
f.addListener(DwtEvent.XFORMS_VALUE_CHANGED,h)
}};
XFormItem.prototype.valueChangeLsnr=function(b){var d=this.getUpdateElementMethod();
if(!d){return
}var c=this.getInstanceValue();
var a=this.getDisplayValueMethod();
if(a){c=a.call(this,c)
}d.call(this,c)
};
XFormItem.prototype.updateElement=function(){if(!this.activeChildren){return
}for(var f in this.activeChildren){if(this.activeChildren[f]===true){var c=this.getForm().getItemById(f);
if(c&&this.getInstance()){var e=c.getUpdateElementMethod();
var b=c.getDisplayValueMethod();
if(e){var a=this.getModel();
var d=c.getRefPath()?a.getInstanceValue(this.getInstance(),c.getRefPath()):c.getValue();
if(b){d=b.call(c,d)
}e.call(c,d)
}}}}};
XFormItem.prototype.hasReadPermission=function(b){var a=this.getInstance();
if(!a.getAttrs){return false
}var c=null;
if(b){c=b
}else{if(!this.refPath){return true
}else{c=this.refPath
}}return((a.getAttrs.all===true)||(a.getAttrs[c]===true))
};
XFormItem.prototype.hasWritePermission=function(b){var a=this.getInstance();
if(!a.setAttrs){return false
}var c=null;
if(b){c=b
}else{if(!this.refPath){return true
}else{c=this.refPath
}}return((a.setAttrs.all===true)||(a.setAttrs[c]===true))
};
XFormItem.prototype.hasRight=function(b){var a=this.getInstance();
if(!a.rights){return false
}if(!b){return true
}return(a.rights[b]===true)
};
XFormItem.prototype.updateVisibilityLsnr=function(a){var b=this.getUpdateVisibilityMethod();
b.call(this)
};
XFormItem.prototype.updateVisibility=function(){var isVisible=true;
var parentItem=this.getParentItem();
if(parentItem){isVisible=this.getParentItem().getIsVisible()
}if(isVisible){var myVisibilityChecks=this.getInheritedProperty("visibilityChecks");
if(myVisibilityChecks&&myVisibilityChecks instanceof Array){var cnt=myVisibilityChecks.length;
for(var i=0;
i<cnt;
i++){if(myVisibilityChecks[i]!=null){if(typeof(myVisibilityChecks[i])=="function"){isVisible=myVisibilityChecks[i].call(this);
if(!isVisible){break
}}else{if(myVisibilityChecks[i] instanceof Array){var func=myVisibilityChecks[i].shift();
isVisible=func.apply(this,myVisibilityChecks[i]);
myVisibilityChecks[i].unshift(func);
if(!isVisible){break
}}else{if(typeof(myVisibilityChecks[i])=="string"){var instance=this.getInstance();
isVisible=eval(myVisibilityChecks[i]);
if(!isVisible){break
}}}}}}}}var reRunRefresh=false;
if(isVisible){if(this.deferred){reRunRefresh=true
}this.show()
}else{this.hide()
}for(var itemId in this.activeChildren){if(this.activeChildren[itemId]===true){var item=this.getForm().getItemById(itemId);
if(item&&this.getInstance()){var updateMethod=item.getUpdateVisibilityMethod();
if(updateMethod){updateMethod.call(item)
}}}}if(reRunRefresh){this.updateEnabledDisabled();
this.updateElement()
}};
XFormItem.prototype.updateEnabledDisabledLsnr=function(a){var b=this.getUpdateEnabledDisabledtMethod();
b.call(this)
};
XFormItem.prototype.updateEnabledDisabled=function(g){var j=true;
var a=this.getParentItem();
if(a){j=this.getParentItem().getIsEnabled()
}if(j){var d=this.getInheritedProperty("enableDisableChecks");
if(d&&d instanceof Array){var b=d.length;
for(var e=0;
e<b;
e++){if(d[e]!=null){if(typeof(d[e])=="function"){j=d[e].call(this);
if(!j){break
}}else{if(d[e] instanceof Array){var c=d[e].shift();
if(!c||!c.apply){continue
}j=c.apply(this,d[e]);
d[e].unshift(c);
if(!j){break
}}}}}}else{if(d==false){j=false
}}}if(j){this.enableElement()
}else{this.disableElement()
}for(var h in this.activeChildren){if(this.activeChildren[h]===true){var k=this.getForm().getItemById(h);
if(k&&this.getInstance()){var f=k.getUpdateEnabledDisabledtMethod();
if(f){f.call(k)
}}}}};
XFormItem.prototype.setError=function(c,d){var b=this.getErrorLocation();
if(b==_PARENT_||b==_INHERIT_){this.getParentItem().setError(c,true);
return
}this.getForm().addErrorItem(this);
this.__errorState=XFormItem.ERROR_STATE_ERROR;
var a=this.getErrorContainer(true);
if(a){a.innerHTML=AjxStringUtil.htmlEncode(c)
}};
XFormItem.prototype.clearError=function(){var a=this.getErrorLocation();
if(a==_PARENT_||a==_INHERIT_){this.getParentItem().clearError();
return
}this.getForm().removeErrorItem(this);
this.__errorState=XFormItem.ERROR_STATE_VALID;
this.removeErrorContainer()
};
XFormItem.prototype.hasError=function(){return(this.__errorState==XFormItem.ERROR_STATE_ERROR)
};
XFormItem.prototype.getErrorContainer=function(b){var a=this.getElement(this.getId()+"___error_container");
if(a!=null){return a
}if(b==true&&this.getContainer()){return this.createErrorContainer()
}return null
};
XFormItem.prototype.createErrorContainer=function(){var b=document.createElement("div");
b.id=this.getId()+"___error_container";
b.className=this.getErrorCssClass();
var a=this.getContainer();
if(a.hasChildNodes()){a.insertBefore(b,a.firstChild)
}else{a.appendChild(b)
}return b
};
XFormItem.prototype.removeErrorContainer=function(){var a=this.getErrorContainer();
if(a!=null){a.parentNode.removeChild(a)
}};
XFormItem.prototype.getType=function(){return this.type
};
XFormItem.prototype.getParentItem=function(){return this.__parentItem
};
XFormItem.prototype.getForm=function(){return this.__xform
};
XFormItem.prototype.getGlobalRef=function(){return this.getForm().getGlobalRefString()+".getItemById('"+this.getId()+"')"
};
XFormItem.prototype.getFormGlobalRef=function(){return this.getForm().getGlobalRefString()
};
XFormItem.prototype.getInstance=function(){return this.getForm().instance
};
XFormItem.prototype.getModel=function(){return this.getForm().getModel()
};
XFormItem.prototype.getController=function(){return this.getForm().getController()
};
XFormItem.prototype.getFormController=function(){return this.getForm().getController()
};
XFormItem.prototype.getModelItem=function(){return this.__modelItem
};
XFormItem.prototype.getSubModelItem=function(){return this.__subModelItem
};
XFormItem.prototype.getRef=function(){if(this.ref!==_UNDEFINED_){return this.ref
}return this.__attributes.ref
};
XFormItem.prototype.getRefPath=function(){return this.refPath
};
XFormItem.prototype.getSubRefPath=function(){return this.subRefPath
};
XFormItem.prototype.getId=function(){return this.id
};
XFormItem.prototype.getExternalId=function(){var a=null;
if(this.__attributes.id!==_UNDEFINED_){a=this.__attributes.id
}else{if((a=this.getRef())!==_UNDEFINED_){}else{a=null
}}return a
};
XFormItem.prototype.getOnChangeMethod=function(){return this.cacheInheritedMethod("onChange","$onChange","value,event,form")
};
XFormItem.prototype.getOnActivateMethod=function(){return this.cacheInheritedMethod("onActivate","$onActivate","event")
};
XFormItem.prototype.getOnClickMethod=function(){return this.cacheInheritedMethod("onClick","$onClick","event")
};
XFormItem.prototype.getExternalChangeHandler=function(){return"var item = "+this.getGlobalRef()+"; var elementChangedMethod = item.getElementChangedMethod(); elementChangedMethod.call(item, value, item.getInstanceValue(), event||window.event);"
};
XFormItem.prototype.getElementValueGetterHTML=function(){return"var value = this.value;"
};
XFormItem.prototype.getChangeHandlerHTML=function(){var a=this.getElementChangeHandler();
if(a!="onkeypress"){return AjxBuffer.concat(" ",a,'="',this.getChangehandlerJSCode()+'"',this.getKeyPressHandlerHTML())
}else{return this.getKeyPressHandlerHTML()
}};
XFormItem.prototype.getChangehandlerJSCode=function(){return AjxBuffer.concat(this.getElementValueGetterHTML(),this.getExternalChangeHandler())
};
XFormItem.prototype.getFocusHandlerHTML=function(){var d=this.getFormGlobalRef(),c=this.getId();
var b=this.getInheritedProperty("inputHelp");
var e="";
if(b!=null){e="if (this.value == '"+b+"') this.value=''; "
}var a=null;
if(this.getInheritedProperty("onFocus")!=null){a=AjxBuffer.concat(' onfocus="',d,".onFocus('",c,"'); ",e,this.getInheritedProperty("onFocus"),".call(",this.getGlobalRef(),', event )"')
}else{a=AjxBuffer.concat(' onfocus="',d,".onFocus('",c,"');",e,'"')
}return AjxBuffer.concat(a,' onblur="',d,".onBlur('",c,"')\"")
};
XFormItem.prototype.getOnActivateHandlerHTML=function(){var a=this.getOnActivateMethod();
if(a==null){return""
}return AjxBuffer.concat(" ",this.getElementChangeHandler(),'="',this.getGlobalRef(),'.$onActivate(event||window.event)"')
};
XFormItem.prototype.getClickHandlerHTML=function(){var a=this.getOnClickMethod();
if(a==null){return""
}return AjxBuffer.concat(' onclick="',this.getGlobalRef(),'.$onClick(event||window.event)"');
return AjxBuffer.concat(onClickAction)
};
XFormItem.prototype.handleKeyUp=function(e,c){var b=DwtKeyEvent.getCharCode(e);
if(!AjxUtil.isEmpty(this.keyPressDelayHdlr)&&b!=DwtKeyEvent.KEY_ENTER){AjxTimedAction.cancelAction(this.keyPressDelayHdlr);
this.keyPressDelayHdlr=null
}var d=this.getForm();
var a=new DwtKeyEvent();
a.setFromDhtmlEvent(e);
if(b==DwtKeyEvent.KEY_TAB){DwtUiEvent.setBehaviour(e,true,false);
return false
}else{var f=new AjxTimedAction(this,this.handleKeyPressDelay,[a,c]);
this.keyPressDelayHdlr=AjxTimedAction.scheduleAction(f,250)
}};
XFormItem.prototype.handleKeyDown=function(d,c){d=(d!=null)?d:window.event;
var b=DwtKeyEvent.getCharCode(d);
if(b==DwtKeyEvent.KEY_ENTER){DwtUiEvent.setBehaviour(d,true,true);
return false
}else{if(b==DwtKeyEvent.KEY_TAB){DwtUiEvent.setBehaviour(d,true,false);
var a=XFormItem.getParentTabGroupId(this);
if(d.shiftKey){this.getForm().focusPrevious(this.getId(),a)
}else{this.getForm().focusNext(this.getId(),a)
}return false
}}return true
};
XFormItem.prototype.handleKeyPressDelay=function(c,b){this.keyPressDelayHdlr=null;
if(this.$changeHandlerFunc==null){var a=this.getChangehandlerJSCode();
this.$changeHandlerFunc=new Function("event",a)
}if(this.$changeHandlerFunc){this.$changeHandlerFunc.call(b,c)
}};
XFormItem.prototype.getKeyPressHandlerHTML=function(){var a="onkeydown";
if(AjxEnv.isNav){a="onkeypress"
}return AjxBuffer.concat(" ",a,'="',this.getGlobalRef(),'.handleKeyDown(event, this)"',' onkeyup="',this.getGlobalRef(),'.handleKeyUp(event, this)"')
};
XFormItem.prototype.outputContainerTDStartHTML=function(a,d,c){var b=this.getAlign();
a.append('<td id="',this.getId(),'___container"',(d>1?" colspan="+d:""),(c>1?" rowspan="+c:""),this.getContainerCssString(),(b!=_UNDEFINED_?" align='"+b+"'":""),">")
};
XFormItem.prototype.outputContainerTDEndHTML=function(a){a.append('</td id="',this.getId(),'___container">')
};
XFormItem.prototype.outputElementDivStart=function(a){a.append("<div id=",this.getId(),this.getCssString()," xform_type='elementDiv'>")
};
XFormItem.prototype.outputElementDivEnd=function(a){a.append('</div id="',this.getId(),'">')
};
XFormItem.prototype.outputLabelCellHTML=function(d,f,a){var c=this.getLabel();
if(c==null){return
}if(c==""){c="&nbsp;"
}if(a==_INLINE_){var e=this.getLabelCssStyle();
if(e==null){e=""
}e="position:relative;left:10px;top:5px;text-align:left;background-color:#eeeeee;margin-left:5px;margin-right:5px;"+e;
d.append('<div id="',this.getId(),'___label"',this.getLabelCssString(null,e),">",c,"</div>")
}else{var b=this.getInheritedProperty("enableLabelFor");
if(b){d.append('<td id="',this.getId(),'___label"',this.getLabelCssString(),(f>1?" rowspan="+f:""),">","<label for='",this.getId(),"'>",c,"</label>")
}else{if(!this.getInheritedProperty("helpTooltip")||!this.getInheritedProperty("showHelpTooltip")||!this.getInheritedProperty("hideHelpTooltip")){d.append('<td id="',this.getId(),'___label"',this.getLabelCssString(),(f>1?" rowspan="+f:""),">",c)
}else{d.append('<td id="',this.getId(),'___label"',this.getLabelCssString(),' onclick="',"XFormItem.prototype.showHelpTooltip",".call(",this.getGlobalRef(),', event );" ',' onmouseout="',"XFormItem.prototype.hideHelpTooltip",".call(",this.getGlobalRef(),', event );" ',(f>1?" rowspan="+f:""),">",c)
}}if(this.getRequired()){d.append("<span class='redAsteric'>*</span>")
}d.append("</td>")
}};
XFormItem.getParentTabGroupId=function(a){while(a!=null){var b=a.getParentItem();
if(b==null||(!b instanceof XFormItem)){return null
}else{if(b instanceof Group_XFormItem&&b.getInheritedProperty("isTabGroup")==true){return b.getId()
}}a=b
}};
XFormItem.prototype.elementChanged=function(c,b,a){this.getForm().itemChanged(this.getId(),c,a)
};
XFormItem.prototype.getInstanceValue=function(a){if(a==null){a=this.getRefPath()
}if(a==null){return null
}return this.getModel().getInstanceValue(this.getInstance(),a)
};
XFormItem.prototype.getInstanceCount=function(){if(this.getRefPath()==null){return 0
}return this.getModel().getInstanceCount(this.getInstance(),this.getRefPath())
};
XFormItem.prototype.setInstanceValue=function(a,b){if(b==null){b=this.getRefPath()
}if(b==null){return null
}return this.getModel().setInstanceValue(this.getInstance(),b,a)
};
XFormItem.prototype.set=XFormItem.prototype.setInstancevalue;
XFormItem.getValueFromHTMLSelect=function(c){var a=[];
for(var b=0;
b<c.options.length;
b++){if(c.options[b].selected){a[a.length]=c.options[b].value
}}return a.join(",")
};
XFormItem.prototype.getValueFromHTMLSelect=function(a){if(a==null){a=this.getElement()
}return XFormItem.getValueFromHTMLSelect(a)
};
XFormItem.updateValueInHTMLSelect1=function(e,c,d){if(c==null){return null
}if(d==null){d=false
}var b=c.options;
for(i=0;
i<b.length;
i++){var a=b[i];
if(a.value==e){c.selectedIndex=i;
return c.value
}}if(b.length>0){c.selectedIndex=0;
return b[0].value
}return null
};
XFormItem.prototype.updateValueInHTMLSelect1=function(c,a,b){if(a==null){a=this.getElement()
}if(b==null){b=this.getSelectionIsOpen()
}return XFormItem.updateValueInHTMLSelect1(c,a,b)
};
XFormItem.updateValueInHTMLSelect=function(a,d,c){if(d==null){return null
}if(a==null){a=""
}if(c==null){c=false
}if(typeof a=="string"){a=a.split(",")
}var f="{|[",g="]|}";
a=f+a.join(g+f)+g;
var j=d.options;
var b=false;
for(var e=0;
e<j.length;
e++){var h=(a.indexOf(f+j[e].value+g)>-1);
j[e].selected=h;
b=b||h
}if(!b&&!c){j[0].selected=true
}};
XFormItem.prototype.updateValueInHTMLSelect=function(c,a,b){if(c==null){c=""
}if(a==null){a=this.getElement()
}if(b==null){b=this.getSelectionIsOpen()
}return XFormItem.updateValueInHTMLSelect(c,a,b)
};
XFormItem.prototype.getChoicesHTML=function(){var g=this.getNormalizedChoices();
if(g==null){return""
}var c=new AjxBuffer();
this.outputChoicesHTMLStart(c);
var a=g.values;
var f=g.labels;
var d=g.visible;
var e=this.getChoiceCssClass();
for(var b=0;
b<a.length;
b++){if(d&&(d[b]==false)){}else{c.append("",this.getChoiceHTML(b,a[b],f[b],e,""))
}}this.outputChoicesHTMLEnd(c);
return c.toString()
};
XFormItem.prototype.outputChoicesHTMLStart=function(a){return
};
XFormItem.prototype.outputChoicesHTMLEnd=function(a){return
};
XFormItem.prototype.getChoiceCssClass=function(){return""
};
XFormItem.prototype.getChoiceHTML=function(d,c,b,a){return AjxBuffer.concat('<option value="',c,'">',b,"</option>")
};
XFormItem.prototype.updateChoicesHTML=function(){this.cleanChoiceDisplay();
var a=new AjxBuffer();
this.outputHTML(a,new AjxBuffer());
if(this.getContainer()){this.getContainer().innerHTML=a.toString()
}return
};
XFormItem.prototype.getInheritedProperty=function(b){if(this.__attributes[b]!==_UNDEFINED_){return this.__attributes[b]
}if(this[b]!==_UNDEFINED_){return this[b]
}var a=this.__modelItem;
if(a&&a[b]!==_UNDEFINED_){return a[b]
}return null
};
XFormItem.prototype.cacheInheritedProperty=function(b,a){if(this[a]!==_UNDEFINED_){return this[a]
}return(this[a]=this.getInheritedProperty(b))
};
XFormItem.prototype.cacheInheritedMethod=function(a,b,d){if(this[b]!==_UNDEFINED_){return this[b]
}var c=this.getInheritedProperty(a);
if(c!=null){c=this.convertToFunction(c,d)
}this[b]=c;
return c
};
XFormItem.prototype.getElement=XForm.prototype.getElement;
XFormItem.prototype.showElement=function(a){XForm.prototype.showElement.call(this,a)
};
XFormItem.prototype.getIsVisible=function(){return this.__isVisible
};
XFormItem.prototype.getIsEnabled=function(){return this.__isEnabled
};
XFormItem.prototype.hideElement=function(b,a){XForm.prototype.hideElement.call(this,b,a)
};
XFormItem.prototype.createElement=XForm.prototype.createElement;
XFormItem.estimateMyWidth=function(a,c,e,d){var b=(String(a).length/2)*XForm.FONT_WIDTH1+(String(a).length/2)*XForm.FONT_WIDTH2+14;
if(c){b=b+24
}if(e>0){b=b+e
}b=(b>=d)?b:d;
return[b,"px"].join("")
};
XFormItem.prototype.getWidget=function(){return this.widget
};
XFormItem.prototype.setWidget=function(a){this.widget=a
};
XFormItem.prototype.getContainer=function(){return this.getElement(this.getId()+"___container")
};
XFormItem.prototype.getLabelContainer=function(){return this.getElement(this.getId()+"___label")
};
XFormItem.prototype.show=function(){if(this.deferred){this._outputHTML()
}var a=this.getLabelContainer();
if(a){this.showElement(a)
}a=this.getContainer();
if(a!=null){this.showElement(a)
}this.__isVisible=true
};
XFormItem.prototype.hide=function(a){a=this.getInheritedProperty("isBlockElement")||a;
var b=this.getLabelContainer();
if(b){this.hideElement(b,a)
}b=this.getContainer();
if(b!=null){this.hideElement(b,a)
}else{var c=this.getItems();
if(c!=null){for(var d=0;
d<c.length;
d++){c[d].hide(a)
}}}this.__isVisible=false
};
XFormItem.prototype.focus=function(){this.getForm().focusElement(this.getId())
};
XFormItem.prototype.getRequired=function(){return this.getInheritedProperty("required")
};
XFormItem.prototype.getValue=function(){return this.getInheritedProperty("value")
};
XFormItem.prototype.getItems=function(){if(this.items){return this.items
}return this.__attributes.items
};
XFormItem.prototype.getChoices=function(){return this.getInheritedProperty("choices")
};
XFormItem.prototype.getNormalizedChoices=function(){if(this.$normalizedChoices){return this.$normalizedChoices
}var b=this.getChoices();
if(b==null){return null
}if(typeof b=="function"){b=b.call(this)
}var a;
if(typeof b.getChoices=="function"){a=b.getChoices()
}else{if(AjxUtil.isArray(b)){if(typeof b[0]=="object"){a=XFormChoices.normalizeChoices(b,XFormChoices.OBJECT_LIST)
}else{a=XFormChoices.normalizeChoices(b,XFormChoices.SIMPLE_LIST)
}}else{a=XFormChoices.normalizeChoices(b,XFormChoices.HASH)
}}this.$normalizedChoices=a;
return this.$normalizedChoices
};
XFormItem.prototype.getNormalizedValues=function(){var a=this.getNormalizedChoices();
if(a){return a.values
}return null
};
XFormItem.prototype.getNormalizedLabels=function(){var a=this.getNormalizedChoices();
if(a){return a.labels
}return null
};
XFormItem.prototype.getAppearance=function(){return this.getInheritedProperty("appearance")
};
XFormItem.prototype.getCssClass=function(){return this.getInheritedProperty("cssClass")
};
XFormItem.prototype.getCssStyle=function(){return this.getInheritedProperty("cssStyle")
};
XFormItem.prototype.getLabel=function(a){return this.getInheritedProperty("label")
};
XFormItem.prototype.getErrorCssClass=function(){return this.getInheritedProperty("errorCssClass")
};
XFormItem.prototype.getLabelCssClass=function(a){if(a!=null){return a
}return this.getInheritedProperty("labelCssClass")
};
XFormItem.prototype.getLabelCssStyle=function(a){if(a!=null){return a
}return this.getInheritedProperty("labelCssStyle")
};
XFormItem.prototype.getLabelWrap=function(){return this.getInheritedProperty("labelWrap")
};
XFormItem.prototype.getLabelLocation=function(){return this.getInheritedProperty("labelLocation")
};
XFormItem.prototype.getContainerCssClass=function(){return this.getInheritedProperty("containerCssClass")
};
XFormItem.prototype.getContainerCssStyle=function(){return this.getInheritedProperty("containerCssStyle")
};
XFormItem.prototype.getTableCssClass=function(){return this.getInheritedProperty("tableCssClass")
};
XFormItem.prototype.getTableCssStyle=function(){return this.getInheritedProperty("tableCssStyle")
};
XFormItem.prototype.getNowrap=function(){return this.getInheritedProperty("nowrap")
};
XFormItem.prototype.getWidth=function(){return this.cacheInheritedProperty("width","_width")
};
XFormItem.prototype.getHeight=function(){return this.getInheritedProperty("height")
};
XFormItem.prototype.getOverflow=function(){return this.getInheritedProperty("overflow")
};
XFormItem.prototype.getNumCols=function(){return this.getInheritedProperty("numCols")
};
XFormItem.prototype.getAlign=function(){return this.getInheritedProperty("align")
};
XFormItem.prototype.getValign=function(){return this.getInheritedProperty("valign")
};
XFormItem.prototype.getName=function(){return this.getInheritedProperty("name")
};
XFormItem.prototype.useParentTable=true;
XFormItem.prototype.getUseParentTable=function(){return this.getInheritedProperty("useParentTable")
};
XFormItem.prototype.colSizes=_UNDEFINED_;
XFormItem.prototype.getColSizes=function(){return this.getInheritedProperty("colSizes")
};
XFormItem.prototype.colSpan=1;
XFormItem.prototype.getColSpan=function(){return this.getInheritedProperty("colSpan")
};
XFormItem.prototype.rowSpan=1;
XFormItem.prototype.getRowSpan=function(){return this.getInheritedProperty("rowSpan")
};
XFormItem.prototype.getErrorLocation=function(){return this.getInheritedProperty("errorLocation")
};
XFormItem.prototype.getChoiceLabel=function(c){var d=this.getNormalizedChoices();
if(d==null){return c
}if(c==null){c=""
}var a=d.values;
for(var b=0;
b<a.length;
b++){if(a[b]==c){return d.labels[b]
}}return c
};
XFormItem.prototype.getChoiceValue=function(b){function d(h,g){return String(h).toLowerCase()<String(g).toLowerCase()?-1:(String(h).toLowerCase()>String(g).toLowerCase()?1:0)
}var f=this.getNormalizedChoices();
if(f==null){return b
}var e=f.labels;
var a=-1;
for(var c=0;
c<e.length;
c++){if(d(b,e[c])==0){a=c;
break
}}if(a>=0){return f.values[a]
}else{return b
}};
XFormItem.prototype.getChoiceNum=function(c){var d=this.getNormalizedChoices();
if(d==null){return -1
}var a=d.values;
for(var b=0;
b<a.length;
b++){if(a[b]==c){return b
}}return -1
};
XFormItem.prototype.getCssString=function(){var c=(this.getCssClass()||"");
if(c!=""&&c!=null){c=' class="'+c+'"'
}var e=(this.getCssStyle()||"");
var d=this.getWidth();
if(d!=null&&d!="auto"){if(e.length){e+=";"
}if(!isNaN(Number(d))){d+="px"
}e+="width:"+d
}var a=this.getHeight();
if(a!=null){if(e.length){e+=";"
}if(!isNaN(Number(a))){a+="px"
}e+="height:"+a
}var f=this.getOverflow();
if(f!=null){if(e.length){e+=";"
}e+="overflow:"+f
}if(this.getNowrap()){if(e.length){e+=";"
}e+="white-space:nowrap"
}var b=this.getValign();
if(b){if(e.length){e+=";"
}e+="vertical-align:"+b
}if(e!=""){c+=' style="'+e+';"'
}return c
};
XFormItem.prototype.getLabelCssString=function(c,b){var a=(this.getLabelCssClass(c)||"");
if(a!=""&&a!=null){a=' class="'+a+'"'
}var b=(this.getLabelCssStyle(b)||"");
if(this.getLabelWrap()==false){if(b.length){b+=";"
}b+="white-space:nowrap"
}if(b!=""){a+=' style="'+b+';"'
}return a
};
XFormItem.prototype.getTableCssString=function(){var a=(this.getTableCssClass()||"");
if(a!=""&&a!=null){a=' class="'+a+'"'
}var c=this.getTableCssStyle();
if(c==null){c=""
}var d=this.getColSizes();
if(d!=null){if(c.length){c+=";"
}c+="table-layout:fixed"
}var b=this.getWidth();
if(b!=null){c+=";width:"+b
}var e=this.getOverflow();
if(e!=null){if(c.length){c+=";"
}c+="overflow:"+e
}return a+(c!=null?' style="'+c+';"':"")
};
XFormItem.prototype.getContainerCssString=function(){var b=(this.getContainerCssClass()||"");
if(b!=""&&b!=null){b=' class="'+b+'"'
}var c=this.getContainerCssStyle();
if(c==null){c=""
}var d=this.getAlign();
if(d!=_LEFT_){if(d==_CENTER_||d==_MIDDLE_){if(c.length){c+=";"
}c+="text-align:center"
}else{if(d==_RIGHT_){if(c.length){c+=";"
}c+="text-align:right"
}}}var a=this.getValign();
if(a==_TOP_){if(c.length){c+=";"
}c+="vertical-align:top"
}else{if(a==_BOTTOM_){if(c.length){c+=";"
}c+="vertical-align:bottom"
}else{if(a==_CENTER_||a==_MIDDLE_){if(c.length){c+=";"
}c+="vertical-align:middle"
}}}if(c!=""){b+=' style="'+c+';"'
}return b
};
XFormItem.prototype.getElementChangeHandler=function(){return this.getInheritedProperty("elementChangeHandler")
};
XFormItem.prototype.getForceUpdate=function(){return this.getInheritedProperty("forceUpdate")
};
XFormItem.prototype.getOutputHTMLMethod=function(){return this.convertToFunction(this.getInheritedProperty("outputHTML"),"html,currentCol")
};
XFormItem.prototype.getElementChangedMethod=function(){return this.cacheInheritedMethod("elementChanged","$elementChanged","elementValue, instanceValue, event")
};
XFormItem.prototype.getUpdateElementMethod=function(){return this.cacheInheritedMethod("updateElement","$updateElement","newValue")
};
XFormItem.prototype.getDisplayValueMethod=function(){return this.cacheInheritedMethod("getDisplayValue","$getDisplayValue","newValue")
};
XFormItem.prototype.getUpdateVisibilityMethod=function(){return this.cacheInheritedMethod("updateVisibility","$updateVisibility")
};
XFormItem.prototype.getUpdateEnabledDisabledtMethod=function(){return this.cacheInheritedMethod("updateEnabledDisabled","$updateEnabledDisabled")
};
XFormItem.prototype.convertToFunction=function(a,b){if((a==null)||(typeof(a)=="function")){return a
}if(typeof(this[a])=="function"){return this[a]
}return new Function(b,a)
};
XFormItem.prototype.dirtyDisplay=function(){delete this.$lastDisplayValue
};
XFormItem.prototype.setElementEnabled=function(a){};
XFormItem.prototype.disableElement=function(){this.setElementEnabled(false);
this.__isEnabled=false
};
XFormItem.prototype.enableElement=function(){this.setElementEnabled(true);
this.__isEnabled=true
};
XFormItem.prototype.setElementDisabledProperty=function(a){this.getElement().disabled=(a!=true)
};
XFormItem.prototype.setElementEnabledCssClass=function(a){var b=this.getElement();
if(!b){return
}if(a){b.className=this.getCssClass()
}else{b.className=(this.getCssClass()+"_disabled")
}};
XFormItem.prototype.getSelection=function(){return this.getInheritedProperty("selection")
};
XFormItem.prototype.getSelectionIsOpen=function(){return this.getInheritedProperty("selection")
};
XFormItem.prototype.getOpenSelectionLabel=function(){return this.getInheritedProperty("openSelectionLabel")
};
XFormItem.prototype.getNumberToShow=function(){return this.getInheritedProperty("number")
};
XFormItem.prototype.getShowAddButton=function(){return this.getInheritedProperty("showAddButton")
};
XFormItem.prototype.getShowRemoveButton=function(){return this.getInheritedProperty("showRemoveButton")
};
XFormItem.prototype.getShowMoveUpButton=function(){return this.getInheritedProperty("showMoveUpButton")
};
XFormItem.prototype.getShowMoveDownButton=function(){return this.getInheritedProperty("showMoveDownButton")
};
XFormItem.prototype.getAddButton=function(){return this.getInheritedProperty("addButton")
};
XFormItem.prototype.getRemoveButton=function(){return this.getInheritedProperty("removeButton")
};
XFormItem.prototype.getMoveUpButton=function(){return this.getInheritedProperty("moveUpButton")
};
XFormItem.prototype.getMoveDownButton=function(){return this.getInheritedProperty("moveDownButton")
};
XFormItem.prototype.getAlwaysShowAddButton=function(){return this.getInheritedProperty("alwaysShowAddButton")
};
XFormItem.prototype.getRepeatInstance=function(){return this.getInheritedProperty("repeatInstance")
};
XFormItem.prototype.getSrc=function(){return this.getInheritedProperty("src")
};
XFormItem.prototype.getSrcPath=function(){return this.getInheritedProperty("srcPath")
};
XFormItem.prototype.getShowInNewWindow=function(){return this.getInheritedProperty("showInNewWindow")
};
XFormItem.prototype.getWriteElementDiv=function(){return this.getInheritedProperty("writeElementDiv")
};
XFormItem.prototype.getMultiple=function(){return this.getInheritedProperty("multiple")
};
XFormItem.prototype.getAlwaysUpdateChoices=function(){return this.getInheritedProperty("alwaysUpdateChoices")
};
XFormItem.prototype.choicesAreDirty=function(){return(this._choiceDisplayIsDirty==true||this.getAlwaysUpdateChoices())
};
XFormItem.prototype.cleanChoiceDisplay=function(){this._choiceDisplayIsDirty=false
};
XFormItem.prototype.showInputTooltip=function(b){var d=new DwtUiEvent(true);
d.setFromDhtmlEvent(b);
var a=DwtShell.getShell(window);
var c=a.getToolTip();
c.setContent(this.getInheritedProperty("toolTipContent"));
c.popup(d.docX,d.docY)
};
XFormItem.prototype.hideInputTooltip=function(b){var a=DwtShell.getShell(window);
var c=a.getToolTip();
c.popdown()
};
Output_XFormItem=function(){};
XFormItemFactory.createItemType("_OUTPUT_","output",Output_XFormItem,XFormItem);
Output_XFormItem.prototype.writeElementDiv=true;
Output_XFormItem.prototype.labelWrap=true;
Output_XFormItem.prototype.cssClass="xform_output";
Output_XFormItem.prototype.containerCssClass="xform_output_container";
Output_XFormItem.prototype.outputHTML=function(b){var c=this.getValue();
var e=this.getDisplayValueMethod();
if(e){c=e.call(this,c)
}var a=this.getClickHandlerHTML();
var d=null;
if(a!=null&&a!=""){d="<div "+this.getClickHandlerHTML()+">"+c+"</div>"
}b.append(d||c)
};
Output_XFormItem.prototype.getDisplayValue=function(a){a=this.getChoiceLabel(a);
if(a==null){a=""
}else{a=""+a
}return a
};
Output_XFormItem.prototype.updateElement=function(d){var b=this.getElement();
if(b){var a=this.getClickHandlerHTML();
var c=null;
if(a!=null&&a!=""){c="<div "+this.getClickHandlerHTML()+">"+d+"</div>"
}d=c||d;
this.getElement().innerHTML=d
}};
Output_XFormItem.prototype.initFormItem=function(){XFormItem.prototype.initFormItem.call(this);
var b=this.getChoices();
if(b==null||b.constructor!=XFormChoices){return
}var a=new AjxListener(this,this.dirtyDisplay);
b.addListener(DwtEvent.XFORMS_CHOICES_CHANGED,a);
this.signUpForEvents()
};
Output_XFormItem.prototype.dirtyDisplay=function(){XFormItem.prototype.dirtyDisplay.call(this);
this._choiceDisplayIsDirty=true;
delete this.$normalizedChoices
};
Output_XFormItem.prototype.setElementEnabled=XFormItem.prototype.setElementEnabledCssClass;
Textfield_XFormItem=function(){};
XFormItemFactory.createItemType("_TEXTFIELD_","textfield",Textfield_XFormItem,XFormItem);
XFormItemFactory.registerItemType("_INPUT_","input",Textfield_XFormItem);
Textfield_XFormItem.prototype._inputType="text";
Textfield_XFormItem.prototype.cssClass="xform_field";
Textfield_XFormItem.prototype.elementChangeHandler="onchange";
Textfield_XFormItem.prototype.focusable=true;
Textfield_XFormItem.prototype.nowrap=false;
Textfield_XFormItem.prototype.labelWrap=true;
Textfield_XFormItem.prototype.containerCssClass="xform_field_container";
Textfield_XFormItem.prototype.visibilityChecks=[XFormItem.prototype.hasReadPermission];
Textfield_XFormItem.prototype.enableDisableChecks=[XFormItem.prototype.hasWritePermission];
Textfield_XFormItem.prototype.outputHTML=function(c,f){var d=this._inputType;
var e=this.getValue();
var b=this.getModelItem();
var a=this.getInheritedProperty("inputHelp");
c.append("<input autocomplete='off' id=\"",this.getId(),'" type="',d,'"',this.getCssString(),this.getChangeHandlerHTML(),this.getFocusHandlerHTML(),this.getClickHandlerHTML(),this.getMouseoutHandlerHTML(),(e!=null?' value="'+e+'"':""),">")
};
Textfield_XFormItem.prototype.getClickHandlerHTML=function(){var d=this.getFormGlobalRef(),c=this.getId();
var a="";
var b=this.getInheritedProperty("onClick");
a=AjxBuffer.concat(' onclick="',b||"XFormItem.prototype.showInputTooltip",".call(",this.getGlobalRef(),', event );" ');
return AjxBuffer.concat(a)
};
Textfield_XFormItem.prototype.getMouseoutHandlerHTML=function(){var d=this.getFormGlobalRef(),c=this.getId();
var a="";
var b=this.getInheritedProperty("onMouseout");
a=AjxBuffer.concat(' onmouseout="',b||"XFormItem.prototype.hideInputTooltip",".call(",this.getGlobalRef(),', event );" ');
return AjxBuffer.concat(a)
};
Textfield_XFormItem.prototype.updateElement=function(b){if(b==null){b=this.getValue()
}var a=this.getInheritedProperty("inputHelp");
if((b==null)&&(a!=null)){b=a
}else{if(b==null){b=""
}}if(this.getElement()&&this.getElement().value!=b){this.getElement().value=b
}};
Textfield_XFormItem.prototype.setElementEnabled=function(a){if(this.getElement()){this.setElementDisabledProperty(a);
this.setElementEnabledCssClass(a)
}};
Textfield_XFormItem.prototype.createDataList=function(g){if(!AjxEnv.supported.input.list){return
}g=g||[];
var d=this.getId()+"_datalist";
var h=Dwt.getElement(d);
if(h){h.parentNode.removeChild(h)
}var c=this.getElement();
c.setAttribute("list",d);
var b=document.createElement("datalist");
b.id=d;
for(var a=0;
a<g.length;
a++){var e=document.createElement("option");
e.value=g[a];
b.appendChild(e)
}c.parentNode.appendChild(b);
var f=this.getOnChangeMethod();
if(typeof f==="function"){Dwt.setHandler(c,DwtEvent.ONINPUT,function(){f.call(this,this.getElement().value,false,this.getForm())
}.bind(this))
}};
Secret_XFormItem=function(){};
XFormItemFactory.createItemType("_SECRET_","secret",Secret_XFormItem,Textfield_XFormItem);
XFormItemFactory.registerItemType("_PASSWORD_","password",Secret_XFormItem);
Secret_XFormItem.prototype._inputType="password";
Secret_XFormItem.prototype.focusable=true;
File_XFormItem=function(){};
XFormItemFactory.createItemType("_FILE_","file",File_XFormItem,Textfield_XFormItem);
File_XFormItem.prototype._inputType="file";
File_XFormItem.prototype.forceUpdate=false;
File_XFormItem.prototype.focusable=true;
Textarea_XFormItem=function(){};
XFormItemFactory.createItemType("_TEXTAREA_","textarea",Textarea_XFormItem,Textfield_XFormItem);
Textarea_XFormItem.prototype.width="100%";
Textarea_XFormItem.prototype.height=100;
Textarea_XFormItem.prototype.focusable=true;
Textarea_XFormItem.prototype.outputHTML=function(a,c){var b=this.getInheritedProperty("textWrapping");
if(!b){b="off"
}a.append('<textarea id="',this.getId(),'"',this.getCssString(),this.getChangeHandlerHTML(),this.getFocusHandlerHTML(),"wrap='",b,"'","></textarea>")
};
Textarea_XFormItem.prototype.setElementDisabledProperty=function(a){this.getElement().disabled=(a!=true);
this.getElement().readOnly=(a!=true)
};
Textarea_XFormItem.prototype.getKeyPressHandlerHTML=function(){var a="onkeydown";
if(AjxEnv.isNav||AjxEnv.isChrome||AjxEnv.isSafari){a="onkeypress"
}return AjxBuffer.concat(" ",a,'="',this.getGlobalRef(),'.handleKeyDown(event, this)"',' onkeyup="',this.getGlobalRef(),'.handleKeyUp(event, this)"')
};
Checkbox_XFormItem=function(){};
XFormItemFactory.createItemType("_CHECKBOX_","checkbox",Checkbox_XFormItem,XFormItem);
Wiz_Checkbox_XFormItem=function(){};
XFormItemFactory.createItemType("_WIZ_CHECKBOX_","wiz_checkbox",Wiz_Checkbox_XFormItem,Checkbox_XFormItem);
if(appNewUI){Wiz_Checkbox_XFormItem.prototype.labelLocation=_RIGHT_;
Wiz_Checkbox_XFormItem.prototype.align=_RIGHT_;
Wiz_Checkbox_XFormItem.prototype.subLabel=""
}Checkbox_XFormItem.prototype._inputType="checkbox";
Checkbox_XFormItem.prototype.elementChangeHandler="onclick";
Checkbox_XFormItem.prototype.labelLocation=(appNewUI?_LEFT_:_RIGHT_);
Checkbox_XFormItem.prototype.cssClass="xform_checkbox";
Checkbox_XFormItem.prototype.labelCssClass="xform_checkbox";
Checkbox_XFormItem.prototype.align=(appNewUI?_LEFT_:_RIGHT_);
Checkbox_XFormItem.prototype.trueValue=_UNDEFINED_;
Checkbox_XFormItem.prototype.falseValue=_UNDEFINED_;
Checkbox_XFormItem.prototype.focusable=true;
Checkbox_XFormItem.prototype.visibilityChecks=[XFormItem.prototype.hasReadPermission];
Checkbox_XFormItem.prototype.enableDisableChecks=[XFormItem.prototype.hasWritePermission];
Checkbox_XFormItem.prototype.nowrap=false;
Checkbox_XFormItem.prototype.labelWrap=true;
Checkbox_XFormItem.prototype.outputHTML=function(a,c){var b="";
if(this.getInstanceValue()==this.getTrueValue()){b=" CHECKED"
}a.append("<input autocomplete='off' id=\"",this.getId(),'" type="',this._inputType,'"',this.getChangeHandlerHTML(),this.getFocusHandlerHTML(),b,">")
};
Checkbox_XFormItem.prototype.getTrueValue=function(){var a=this.getInheritedProperty("trueValue");
if(a==null){a=true
}return a
};
Checkbox_XFormItem.prototype.getFalseValue=function(){var a=this.getInheritedProperty("falseValue");
if(a==null){a=false
}return a
};
Checkbox_XFormItem.prototype.updateElement=function(a){a=(a==this.getTrueValue());
this.getElement().checked=a
};
Checkbox_XFormItem.prototype.getElementValueGetterHTML=function(){var a=this.getTrueValue();
if(a!==_UNDEFINED_){if(typeof a=="string"){a="'"+a+"'"
}var b=this.getFalseValue();
if(typeof b=="string"){b="'"+b+"'"
}if(a==null){a=true
}if(b==null){b=false
}return AjxBuffer.concat("var value = (this.checked ? ",a," : ",b,");")
}else{return"var value = '"+this.getValue()+"';"
}};
if(appNewUI){Checkbox_XFormItem.prototype.outputContainerTDEndHTML=function(a){var b=this.getInheritedProperty("subLabel");
if(AjxUtil.isEmpty(b)){b=""
}else{b=" "+b
}a.append(b+'</td id="',this.getId(),'___container">')
}
}Checkbox_XFormItem.prototype.setElementEnabled=XFormItem.prototype.setElementDisabledProperty;
Radio_XFormItem=function(){};
XFormItemFactory.createItemType("_RADIO_","radio",Radio_XFormItem,Checkbox_XFormItem);
Radio_XFormItem.prototype._inputType="radio";
Radio_XFormItem.prototype.focusable=true;
Radio_XFormItem.prototype.groupname=null;
Radio_XFormItem.prototype.subLabel=(appNewUI?"":null);
Radio_XFormItem.prototype.align=_RIGHT_;
Radio_XFormItem.prototype.labelLocation=_RIGHT_;
Radio_XFormItem.prototype.updateElement=function(a){this.getElement().checked=(this.getValue()==a)
};
Radio_XFormItem.prototype.outputHTML=function(b,d){var c="";
if(this.getInstanceValue()==this.getTrueValue()){c=" CHECKED"
}b.append("<input autocomplete='off' id=\"",this.getId(),'" type="',this._inputType,'"',this.getChangeHandlerHTML(),this.getFocusHandlerHTML(),c);
var a=this.getInheritedProperty("groupname");
if(a){b.append(" name='",a,"'")
}b.append(">")
};
Radio_Label_XFormItem=function(){};
XFormItemFactory.createItemType("_RADIO_LABEL_","radio_label",Radio_Label_XFormItem,Radio_XFormItem);
Radio_Label_XFormItem.prototype._inputType="radio";
Radio_Label_XFormItem.prototype.focusable=true;
Radio_Label_XFormItem.prototype.groupname=null;
Radio_XFormItem.prototype.elementChanged=function(c,b,a){if(c==true){this.getForm().itemChanged(this.getId(),this.getValue(),a)
}};
Radio_XFormItem.prototype.updateElement=function(d){this.getElement().checked=(this.getValue()==d);
var b=XFG.getEl((this.getId()+"___labelValue"));
if(b){var c=this.getInheritedProperty("labelRef");
if(c==null){return
}var a=this.getInstanceValue(c);
b.innerHTML=a
}};
Radio_Label_XFormItem.prototype.outputHTML=function(b,d){var c="";
if(this.getInstanceValue()==this.getTrueValue()){c=" CHECKED"
}b.append("<input autocomplete='off' id=\"",this.getId(),'" type="',this._inputType,'"',this.getChangeHandlerHTML(),this.getFocusHandlerHTML(),c);
var a=this.getInheritedProperty("groupname");
if(a){b.append(" name='",a,"'")
}b.append(">")
};
Radio_Label_XFormItem.prototype.outputLabelCellHTML=function(d,g,a){var c=this.getInheritedProperty("labelRef");
if(c==null){return
}var b=this.getInstanceValue(c);
if(b==null){return
}if(b==""){b="&nbsp;"
}var f=this.getInheritedProperty("labelValue");
if(a==_INLINE_){var e=this.getLabelCssStyle();
if(e==null){e=""
}e="position:relative;left:10;top:5;text-align:left;background-color:#eeeeee;margin-left:5px;margin-right:5px;"+e;
d.append('<label id="',this.getId(),'___labelValue"',this.getLabelCssString(null,e),' FOR="',this.getId(),'">',b,"</label>")
}else{d.append("<td ",this.getLabelCssString(),(g>1?" rowspan="+g:""),">",'<label id="',this.getId(),'___labelValue"',' FOR="',this.getId(),'">',b,"</label>");
d.append("</td>")
}};
Button_XFormItem=function(){};
XFormItemFactory.createItemType("_BUTTON_","button",Button_XFormItem,XFormItem);
XFormItemFactory.registerItemType("_TRIGGER_","trigger",Button_XFormItem);
Button_XFormItem.prototype.forceUpdate=false;
Button_XFormItem.prototype.elementChangeHandler="onclick";
Button_XFormItem.prototype.labelLocation=_NONE_;
Button_XFormItem.prototype.relevantBehavior=_DISABLE_;
Button_XFormItem.prototype.cssClass="xform_button";
Button_XFormItem.prototype.focusable=true;
Button_XFormItem.prototype.outputHTML=function(a,b){a.append('<button id="',this.getId(),'"',this.getCssString(),"\r  ",this.getOnActivateHandlerHTML(),"\r  ",this.getFocusHandlerHTML(),"\r",">",this.getLabel(),"</button>")
};
Button_XFormItem.prototype.setElementEnabled=XFormItem.prototype.setElementDisabledProperty;
Submit_XFormItem=function(){};
XFormItemFactory.createItemType("_SUBMIT_","submit",Submit_XFormItem,Button_XFormItem);
Submit_XFormItem.prototype.outputHTML=function(a,b){a.append('<input id="',this.getId(),'" type="submit"',this.getCssString(),this.getChangeHandlerHTML(),this.getFocusHandlerHTML(),' value="',this.getLabel(),">")
};
Anchor_XFormItem=function(){};
XFormItemFactory.createItemType("_ANCHOR_","anchor",Anchor_XFormItem,XFormItem);
Anchor_XFormItem.prototype.writeElementDiv=true;
Anchor_XFormItem.prototype.forceUpdate=true;
Anchor_XFormItem.prototype.cssClass="xform_anchor";
Anchor_XFormItem.prototype.elementChangeHandler="onclick";
Anchor_XFormItem.prototype.href="javascript:;";
Anchor_XFormItem.prototype.showInNewWindow=true;
Anchor_XFormItem.prototype.focusable=true;
Anchor_XFormItem.prototype.getHref=function(){return this.getInheritedProperty("href")
};
Anchor_XFormItem.prototype.getAnchorTag=function(a,b){if(a==null){a=this.getHref()
}if(b==null){b=this.getLabel()
}var c=this.getShowInNewWindow();
return AjxBuffer.concat("<a href=",a,this.getOnActivateHandlerHTML(),(c?' target="_blank"':""),">",b,"</a>")
};
Anchor_XFormItem.prototype.outputHTML=function(a){a.append(this.getAnchorTag())
};
Anchor_XFormItem.prototype.updateElement=function(a){this.getElement().innerHTML=this.getAnchorTag(a)
};
Anchor_XFormItem.prototype.setElementEnabled=XFormItem.prototype.setElementEnabledCssClass;
Data_Anchor_XFormItem=function(){};
XFormItemFactory.createItemType("_DATA_ANCHOR_","data_anchor",Data_Anchor_XFormItem,Anchor_XFormItem);
Data_Anchor_XFormItem.prototype.updateElement=function(a){this.getElement().innerHTML=this.getAnchorTag(null,a)
};
Url_XFormItem=function(){};
XFormItemFactory.createItemType("_URL_","url",Url_XFormItem,Anchor_XFormItem);
Url_XFormItem.prototype.updateElement=function(a){this.getElement().innerHTML=this.getAnchorTag(a,a)
};
DataUrl_XFormItem=function(){};
XFormItemFactory.createItemType("_DATA_URL_","rata_url",DataUrl_XFormItem,Anchor_XFormItem);
Url_XFormItem.prototype.updateElement=function(a){this.getElement().innerHTML=this.getAnchorTag(a,null)
};
Mailto_XFormItem=function(){};
XFormItemFactory.createItemType("_MAILTO_","mailto",Mailto_XFormItem,Anchor_XFormItem);
Mailto_XFormItem.prototype.updateElement=function(a){this.getElement().innerHTML=this.getAnchorTag("mailto:"+a,a)
};
Image_XFormItem=function(){};
XFormItemFactory.createItemType("_IMAGE_","image",Image_XFormItem,XFormItem);
Image_XFormItem.prototype.forceUpdate=true;
Image_XFormItem.prototype.src=_UNDEFINED_;
Image_XFormItem.prototype.srcPath=_UNDEFINED_;
Image_XFormItem.prototype.writeElementDiv=true;
Image_XFormItem.prototype.updateElement=function(c){if(c==null){c=this.getSrc()
}c=this.getChoiceLabel(c);
if(c==null||c==""){var a=""
}else{var b=this.getSrcPath();
if(b!=null){c=b+c
}var a=AjxBuffer.concat('<img id="',this.getId(),'" border=0 ',this.getCssString(),' src="',c,'"',">")
}this.getElement().innerHTML=a
};
Image_XFormItem.prototype.setElementEnabled=XFormItem.prototype.setElementEnabledCssClass;
Ajx_Image_XFormItem=function(){};
XFormItemFactory.createItemType("_AJX_IMAGE_","ajx_image",Ajx_Image_XFormItem,XFormItem);
Ajx_Image_XFormItem.prototype.forceUpdate=true;
Ajx_Image_XFormItem.prototype.src=_UNDEFINED_;
Ajx_Image_XFormItem.prototype.srcPath=_UNDEFINED_;
Ajx_Image_XFormItem.prototype.writeElementDiv=false;
Ajx_Image_XFormItem.prototype.updateElement=function(d){if(d==null){d=this.getSrc()
}d=this.getChoiceLabel(d);
var a;
if(d==null||d==""){a=""
}else{var c=this.getSrcPath();
if(c!=null){d=c+d
}var b=this.getCssStyle();
a=AjxImg.getImageHtml(d,"position:relative;"+(b?b:""))
}if(this.getContainer()){this.getContainer().innerHTML=a
}};
Dwt_Image_XFormItem=function(){};
XFormItemFactory.createItemType("_DWT_IMAGE_","dwt_image",Dwt_Image_XFormItem,XFormItem);
Dwt_Image_XFormItem.prototype.forceUpdate=true;
Dwt_Image_XFormItem.prototype.src=_UNDEFINED_;
Dwt_Image_XFormItem.prototype.srcPath=_UNDEFINED_;
Dwt_Image_XFormItem.prototype.writeElementDiv=false;
Dwt_Image_XFormItem.prototype.updateElement=function(e){if(e==null){e=this.getSrc()
}e=this.getChoiceLabel(e);
var a;
if(e==null||e==""){a=""
}else{var c=this.getSrcPath();
if(c!=null){e=c+e
}var b=this.getCssStyle();
b=b||"";
var d="style='position:relative;"+b+"'";
if(e){a=["<div class='",e,"' ",d,this.getClickHandlerHTML()," ></div>"].join("")
}else{a=["<div ",d,this.getClickHandlerHTML()," ></div>"].join("")
}}this.getContainer().innerHTML=a
};
Select1_XFormItem=function(){};
XFormItemFactory.createItemType("_SELECT1_","select1",Select1_XFormItem,XFormItem);
Select1_XFormItem.prototype.multiple=false;
Select1_XFormItem.prototype.alwaysUpdateChoices=false;
Select1_XFormItem.prototype.focusable=true;
Select1_XFormItem.prototype.cssClass="xform_select1";
Select1_XFormItem.prototype.containerCssClass="xform_select_container";
Select1_XFormItem.prototype.visibilityChecks=[XFormItem.prototype.hasReadPermission];
Select1_XFormItem.prototype.enableDisableChecks=[XFormItem.prototype.hasWritePermission];
Select1_XFormItem.prototype.initFormItem=function(){var b=this.getChoices();
if(b==null||b.constructor!=XFormChoices){return
}var a=new AjxListener(this,this.dirtyDisplay);
b.addListener(DwtEvent.XFORMS_CHOICES_CHANGED,a)
};
Select1_XFormItem.prototype.outputHTML=function(a,b){a.append('<select id="',this.getId(),'" ',this.getCssString(),(this.getMultiple()?"multiple ":""),this.getChangeHandlerHTML(),this.getFocusHandlerHTML(),">",this.getChoicesHTML(),"</select>");
this.cleanChoiceDisplay()
};
Select1_XFormItem.prototype.getElementValueGetterHTML=function(){return"var value = XFormItem.getValueFromHTMLSelect(this);"
};
Select1_XFormItem.prototype.setChoices=function(a){this.choices=a;
this.dirtyDisplay();
this.updateChoicesHTML()
};
Select1_XFormItem.prototype.dirtyDisplay=function(){XFormItem.prototype.dirtyDisplay.call(this);
this._choiceDisplayIsDirty=true;
delete this.$normalizedChoices
};
Select1_XFormItem.prototype.updateElement=function(a){if(this.choicesAreDirty()){this.updateChoicesHTML()
}this.updateValueInHTMLSelect1(a,this.getElement(),this.getSelectionIsOpen())
};
Select1_XFormItem.prototype.cleanChoiceDisplay=function(){this._choiceDisplayIsDirty=false
};
Select1_XFormItem.prototype.setElementEnabled=XFormItem.prototype.setElementDisabledProperty;
Select_XFormItem=function(){};
XFormItemFactory.createItemType("_SELECT_","select",Select_XFormItem,Select1_XFormItem);
Select_XFormItem.prototype.multiple=true;
Select_XFormItem.prototype.selection=_OPEN_;
Select_XFormItem.prototype.focusable=true;
Select_XFormItem.prototype.containerCssClass="xform_select_container";
Select_XFormItem.prototype.updateElement=function(a){if(this.choicesAreDirty()){this.updateChoicesHTML()
}this.updateValueInHTMLSelect(a,this.getElement(),this.getSelectionIsOpen())
};
Spacer_XFormItem=function(){};
XFormItemFactory.createItemType("_SPACER_","spacer",Spacer_XFormItem,XFormItem);
Spacer_XFormItem.prototype.forceUpdate=false;
Spacer_XFormItem.prototype.labelLocation=_NONE_;
Spacer_XFormItem.prototype.width=1;
Spacer_XFormItem.prototype.height=10;
Spacer_XFormItem.prototype.cssStyle="font-size:1px;overflow:hidden;";
Spacer_XFormItem.prototype.colSpan="*";
Spacer_XFormItem.prototype.focusable=false;
Spacer_XFormItem.prototype.outputHTML=function(a,b){a.append("<div id=",this.getId(),this.getCssString(),"></div>")
};
Spacer_XFormItem.prototype.setElementEnabled=XFormItem.prototype.setElementEnabledCssClass;
Cell_Spacer_XFormItem=function(){};
XFormItemFactory.createItemType("_CELL_SPACER_","cell_spacer",Cell_Spacer_XFormItem,Spacer_XFormItem);
XFormItemFactory.registerItemType("_CELLSPACER_","cell_spacer",Cell_Spacer_XFormItem);
Cell_Spacer_XFormItem.prototype.width=10;
Cell_Spacer_XFormItem.prototype.height=10;
Cell_Spacer_XFormItem.prototype.colSpan=1;
Cell_Spacer_XFormItem.prototype.focusable=false;
Separator_XFormItem=function(){};
XFormItemFactory.createItemType("_SEPARATOR_","separator",Separator_XFormItem,XFormItem);
Separator_XFormItem.prototype.cssClass="xform_separator";
Separator_XFormItem.prototype.colSpan="*";
Separator_XFormItem.prototype.align=_CENTER_;
Separator_XFormItem.prototype.valign=_CENTER_;
Separator_XFormItem.prototype.height=10;
Separator_XFormItem.prototype.focusable=false;
Separator_XFormItem.prototype.outputHTML=function(b,c){var a=(this.getCssClass()||"");
if(a!=""&&a!=null){a=' class="'+a+'"'
}b.append("<table width=100% cellspacing=0 cellpadding=0>","<tr><td height=",this.getHeight(),">","<div ",a,"></div>","</td></tr></table>")
};
Separator_XFormItem.prototype.setElementEnabled=XFormItem.prototype.setElementEnabledCssClass;
Group_XFormItem=function(){this.tabIdOrder=[]
};
XFormItemFactory.createItemType("_GROUP_","group",Group_XFormItem,XFormItem);
Group_XFormItem.prototype.forceUpdate=false;
Group_XFormItem.prototype.numCols=2;
Group_XFormItem.prototype.useParentTable=false;
Group_XFormItem.prototype.focusable=false;
Group_XFormItem.prototype.cellspacing=0;
Group_XFormItem.prototype.border=0;
Group_XFormItem.prototype.cellpadding=0;
if(appNewUI){Group_XFormItem.prototype.tableCssClass="grid_xform_table"
}Group_XFormItem.prototype.initFormItem=function(){XFormItem.prototype.initFormItem.call(this);
if(this.getInheritedProperty("isTabGroup")){var a=this.getForm();
a.tabIdOrder[this.getId()]=this.tabIdOrder;
a.addTabGroup(this)
}};
Group_XFormItem.prototype.outputHTML=function(a,b){this.getForm().outputItemList(this.getItems(),this,a,this.getNumCols(),b)
};
Group_XFormItem.prototype.clearError=function(){var c=this.getErrorLocation();
if(c==_PARENT_||c==_INHERIT_){this.getParentItem().clearError();
return
}this.getForm().removeErrorItem(this);
if(this.items){var b=this.items.length;
for(var a=0;
a<b;
a++){if(this.items[a].getErrorLocation()!=_PARENT_&&this.items[a].getErrorLocation()!=_INHERIT_){this.items[a].clearError()
}}}this.__errorState=XFormItem.ERROR_STATE_VALID;
this.removeErrorContainer()
};
Group_XFormItem.prototype.setElementEnabled=function(a){};
Group_XFormItem.prototype.updateVisibility=function(){var isVisible=true;
var parentItem=this.getParentItem();
if(parentItem){isVisible=this.getParentItem().getIsVisible()
}if(isVisible){var myVisibilityChecks=this.getInheritedProperty("visibilityChecks");
if(myVisibilityChecks&&myVisibilityChecks instanceof Array){var cnt=myVisibilityChecks.length;
for(var i=0;
i<cnt;
i++){if(myVisibilityChecks[i]!=null){if(typeof(myVisibilityChecks[i])=="function"){isVisible=myVisibilityChecks[i].call(this);
if(!isVisible){break
}}else{if(myVisibilityChecks[i] instanceof Array){var func=myVisibilityChecks[i].shift();
isVisible=func.apply(this,myVisibilityChecks[i]);
myVisibilityChecks[i].unshift(func);
if(!isVisible){break
}}else{if(typeof(myVisibilityChecks[i])=="string"){var instance=this.getInstance();
isVisible=eval(myVisibilityChecks[i]);
if(!isVisible){break
}}}}}}}}var reRunRefresh=false;
if(isVisible){if(this.deferred){reRunRefresh=true
}this.show()
}else{this.hide()
}if(isVisible){for(var itemId in this.activeChildren){if(this.activeChildren[itemId]===true){var item=this.getForm().getItemById(itemId);
if(item&&this.getInstance()){var updateMethod=item.getUpdateVisibilityMethod();
if(updateMethod){updateMethod.call(item)
}}}}}if(reRunRefresh){this.updateEnabledDisabled();
this.updateElement()
}};
Step_Choices_XFormItem=function(){};
XFormItemFactory.createItemType("_STEPCHOICE_","stepchoices",Step_Choices_XFormItem,Group_XFormItem);
Step_Choices_XFormItem.prototype.numCols=1;
Step_Choices_XFormItem.prototype.labelVisibility=_UNDEFINED_;
Step_Choices_XFormItem.prototype.labelUpdateMethod=function(c){var b=this.getElement();
var a=this.getInheritedProperty("sourceValue");
if(a<c){b.className="AdminOutputTabClick"
}else{if(a==c){b.className="AdminOutputTabSelect"
}else{b.className="AdminOutputTab"
}}};
Step_Choices_XFormItem.prototype.getLabelUpdateMethod=function(){return this.cacheInheritedMethod("labelUpdateMethod","$labelUpdateMethod","newValue")
};
Step_Choices_XFormItem.prototype.labelClickMethod=function(b){var a=this.getInheritedProperty("sourceValue");
var c=this.getInstanceValue();
if(a<c){this.setInstanceValue(a)
}};
Step_Choices_XFormItem.prototype.getLabelClickMethod=function(){return this.cacheInheritedMethod("labelClickMethod","$labelClickMethod","event")
};
Step_Choices_XFormItem.prototype.initFormItem=function(){var h=this.getNormalizedChoices();
if(!h){return
}XFormItem.prototype.initFormItem.call(this);
this.signUpForEvents();
var g=h.labels;
var a=h.values;
this.items=[];
var d;
var c=this.getLabelUpdateMethod();
var f=this.getInheritedProperty("labelVisibility");
var e=this.getLabelClickMethod();
for(var b=0;
b<g.length;
b++){if(f&&f[a[b]]){d={ref:".",type:_OUTPUT_,value:g[b],sourceValue:a[b],updateElement:c,visibilityChecks:f[a[b]].checks,visibilityChangeEventSources:f[a[b]].sources}
}else{d={ref:".",type:_OUTPUT_,value:g[b],sourceValue:a[b],updateElement:c}
}if(e){d.onClick=e
}this.items.push(d)
}};
HomeGroup_XFormItem=function(){this.expanded=true
};
XFormItemFactory.createItemType("_HOMEGROUP_","homegroup",HomeGroup_XFormItem,Group_XFormItem);
HomeGroup_XFormItem.prototype.headCss="homeGroupHeader";
HomeGroup_XFormItem.prototype.bodyCss="homeGroupBody";
HomeGroup_XFormItem.prototype.numCols=1;
HomeGroup_XFormItem.prototype.width="90%";
HomeGroup_XFormItem.prototype.cssStyle="margin-left:5%; margin-top: 10px;";
HomeGroup_XFormItem.prototype.headerLabel="Home Group";
HomeGroup_XFormItem.prototype.expandedImg="ImgNodeExpanded";
HomeGroup_XFormItem.prototype.collapsedImg="ImgNodeCollapsed";
HomeGroup_XFormItem.prototype.initializeItems=function(){this.items=[];
this.items[0]=this.getHeaderItems();
this.items[1]=this.getContentItems();
var c=this.items[1].items;
var d=this.getInheritedProperty("contentChoices");
if(!d[0].label){this.items[1].numCols=1
}for(var b=0;
b<d.length;
b++){var a={type:_OUTPUT_,label:d[b].label,value:d[b].value,containerCssStyle:"color:blue;cursor:pointer"};
if(d[b].onClick){a.onClick=d[b].onClick
}c.push(a)
}Group_XFormItem.prototype.initializeItems.call(this)
};
HomeGroup_XFormItem.prototype.onClick=function(c){var b=this.getParentItem().getParentItem();
var a=b.items[1];
if(b.expanded){b.expanded=false;
this.updateElement(b.collapsedImg);
a.hide()
}else{b.expanded=true;
this.updateElement(b.expandedImg);
a.show()
}};
HomeGroup_XFormItem.prototype.getHeaderItems=function(){var c=this.getInheritedProperty("headerLabel");
var b=this.getInheritedProperty("headCss");
var a={type:_COMPOSITE_,numCols:3,width:"100%",colSizes:["20px","100%","20px"],items:[{type:_DWT_IMAGE_,value:this.expandedImg,cssStyle:"position:static;",onClick:this.onClick},{type:_OUTPUT_,value:c},{type:_AJX_IMAGE_,value:"BorderNone"}],cssClass:b};
return a
};
HomeGroup_XFormItem.prototype.getContentItems=function(){var b=this.getInheritedProperty("bodyCss");
var a={type:_GROUP_,items:[],cssClass:b};
a.items=[];
return a
};
CollapsedGroup_XFormItem=function(){this.expanded=true
};
XFormItemFactory.createItemType("_COLLAPSED_GROUP_","collapsedgroup",CollapsedGroup_XFormItem,Group_XFormItem);
CollapsedGroup_XFormItem.prototype.headCss="gridGroupHeader";
CollapsedGroup_XFormItem.prototype.contentCss="gridGroupContent";
CollapsedGroup_XFormItem.prototype.gridLabelCss="gridGroupBodyLabel";
CollapsedGroup_XFormItem.prototype.colSizes="100%";
CollapsedGroup_XFormItem.prototype.numCols=1;
CollapsedGroup_XFormItem.prototype.width="100%";
CollapsedGroup_XFormItem.prototype.defaultDisplay=true;
CollapsedGroup_XFormItem.prototype.displayLabelItem=false;
CollapsedGroup_XFormItem.prototype.cssClass="grid_group_container";
CollapsedGroup_XFormItem.prototype.cssStyle="margin-top: 10px;";
CollapsedGroup_XFormItem.prototype.headerLabel=AjxMsg.collapsedGroup;
CollapsedGroup_XFormItem.prototype.expandedImg="ImgNodeExpanded";
CollapsedGroup_XFormItem.prototype.collapsedImg="ImgNodeCollapsed";
CollapsedGroup_XFormItem.prototype.contentTableCssClass="grid_table";
CollapsedGroup_XFormItem.prototype.containerCssClass="grid_table_cell_sheet";
CollapsedGroup_XFormItem.prototype.initializeItems=function(){var e=this.getInheritedProperty("gridLabelCss");
var d=this.getItems();
this.items=[];
if(this.__attributes.label){this.headerLabel=this.__attributes.label
}this.items[0]=this.getHeaderItems();
this.items[1]=this.getContentItems();
if(!this.items[1]||this.items[1].items.length==0){if(d){for(var a=0;
a<d.length;
a++){if(d[a].type=="radio"){continue
}if(d[a].label||d[a].txtBoxLabel){if(d[a].type){var c=this.getForm();
var b=XFormItemFactory.getItemTypeConstructor(d[a].type,c);
if(b.prototype.labelCssClass){d[a].labelCssClass=b.prototype.labelCssClass+" "+e
}else{d[a].labelCssClass=e
}}else{d[a].labelCssClass=e
}}}this.items[1].items=d
}}Group_XFormItem.prototype.initializeItems.call(this)
};
CollapsedGroup_XFormItem.prototype.onClick=function(e){var a=this.getParentItem();
var b=a.getParentItem();
var d=a.items[2];
var c=b.items[1];
var f=b.getInheritedProperty("displayLabelItem");
if(b.expanded){b.expanded=false;
this.updateElement(b.collapsedImg);
c.hide();
if(f){d.show()
}}else{b.expanded=true;
this.updateElement(b.expandedImg);
c.show();
d.hide()
}};
CollapsedGroup_XFormItem.prototype.getHeaderItems=function(){var c=this.getInheritedProperty("headerLabel");
var e=this.getInheritedProperty("headerLabelWidth");
var b=this.getInheritedProperty("headCss");
var d=this.getInheritedProperty("headerItems")||[];
var a={type:_COMPOSITE_,numCols:3,width:"100%",colSizes:["20px",e||"100%","100%"],colSpan:"*",items:[{type:_DWT_IMAGE_,value:this.expandedImg,cssStyle:"position:static;",onClick:this.onClick},{type:_OUTPUT_,value:c},{type:_GROUP_,items:d}],cssClass:b};
return a
};
CollapsedGroup_XFormItem.prototype.getContentItems=function(){var f=this.getInheritedProperty("colSizes");
var a=this.getInheritedProperty("numCols");
var g=this.getInheritedProperty("contentCss");
var e=this.getInheritedProperty("contentTableCssClass");
var d={type:_GROUP_,items:[],colSpan:"*",colSizes:f,numCols:a,width:"100%",cssClass:g,tableCssClass:e};
var c=this.getInheritedProperty("ref");
if(c){d.ref=c
}var b=this.getInheritedProperty("contentItems");
if(b){d.items=b
}return d
};
CollapsedGroup_XFormItem.prototype.updateVisibility=function(){XFormItem.prototype.updateVisibility.call(this);
var a=this.getInheritedProperty("defaultDisplay");
var b=this.getInheritedProperty("displayLabelItem");
if(a){this.items[0].items[2].hide();
this.items[1].show();
this.items[0].items[0].value=this.expandedImg;
this.expanded=true
}else{if(b){this.items[0].items[2].show()
}else{this.items[0].items[2].hide()
}this.items[1].hide();
this.items[0].items[0].__attributes.value=this.collapsedImg;
this.expanded=false
}};
CollapsedGroup_XFormItem.prototype.getLabel=function(){return null
};
Grouper_XFormItem=function(){};
XFormItemFactory.createItemType("_GROUPER_","grouper",Grouper_XFormItem,Group_XFormItem);
Grouper_XFormItem.prototype.labelCssClass="GrouperLabel";
Grouper_XFormItem.prototype.labelLocation=_INLINE_;
Grouper_XFormItem.prototype.borderCssClass="GrouperBorder";
Grouper_XFormItem.prototype.insetCssClass="GrouperInset";
Grouper_XFormItem.prototype.getBorderCssClass=function(){return this.getInheritedProperty("borderCssClass")
};
Grouper_XFormItem.prototype.getInsetCssClass=function(){return this.getInheritedProperty("insetCssClass")
};
Grouper_XFormItem.prototype.outputHTMLStart=function(a,b){a.append("<div class=",this.getBorderCssClass(),">","<span ",this.getLabelCssString(),">",this.getLabel(),"</span>","<div class=",this.getInsetCssClass(),">")
};
Grouper_XFormItem.prototype.outputHTMLEnd=function(a,b){a.append("</div></div>")
};
RadioGrouper_XFormItem=function(){};
XFormItemFactory.createItemType("_RADIO_GROUPER_","radiogrouper",RadioGrouper_XFormItem,Grouper_XFormItem);
RadioGrouper_XFormItem.prototype.labelCssClass="xform_radio_grouper_label";
RadioGrouper_XFormItem.prototype.borderCssClass="xform_radio_grouper_border";
RadioGrouper_XFormItem.prototype.insetCssClass="xform_radio_grouper_inset";
RadioGrouper_XFormItem.prototype.width="100%";
CollapsableRadioGrouper_XFormItem=function(){};
XFormItemFactory.createItemType("_COLLAPSABLE_RADIO_GROUPER_","collapsableradiogrouper",CollapsableRadioGrouper_XFormItem,RadioGrouper_XFormItem);
CollapsableRadioGrouper_XFormItem.prototype.getLabel=function(){var a=XFormItem.prototype.getLabel.apply(this);
return"<nobr><span class=xform_button style='font-size:9px;color:black;'>&nbsp;&ndash;&nbsp;</span>&nbsp;"+a+"</nobr>"
};
Case_XFormItem=function(){Group_XFormItem.call(this)
};
XFormItemFactory.createItemType("_CASE_","case",Case_XFormItem,Group_XFormItem);
Case_XFormItem.prototype.labelLocation=_NONE_;
Case_XFormItem.prototype.useParentTable=false;
Case_XFormItem.prototype.width="100%";
Case_XFormItem.prototype.focusable=false;
Case_XFormItem.prototype.deferred=true;
Case_XFormItem.prototype.cellspacing=0;
Case_XFormItem.prototype.cellpadding=0;
Case_XFormItem.prototype.cssClass="XFormCase";
Case_XFormItem.prototype.isTabGroup=true;
Case_XFormItem.prototype.caseVarRef="currentStep";
Case_XFormItem.prototype.visibilityChangeEventSources=[Case_XFormItem.prototype.caseVarRef];
Case_XFormItem.prototype.initFormItem=function(){XFormItem.prototype.initFormItem.call(this);
if(this.getInheritedProperty("isTabGroup")){var a=this.getForm();
a.tabIdOrder[this.getId()]=this.tabIdOrder;
a.addTabGroup(this,"caseKey")
}};
Case_XFormItem.prototype.outputHTML=function(a,b){this.deferred=this.getInheritedProperty("deferred");
if(this.deferred){this.getForm().outputItemList([],this,a,this.getNumCols(),0,true,false)
}else{this.getForm().outputItemList(this.getItems(),this,a,this.getNumCols(),b)
}};
Case_XFormItem.prototype._outputHTML=function(){var c=this.getForm();
var j=this.getElement();
if(!j){return
}var a=this.getId();
if(this.cacheInheritedMethod("getCustomHeight","$getCustomHeight")){var o=this.cacheInheritedMethod("getCustomHeight","$getCustomHeight").call(this);
var d=this.cacheInheritedMethod("getCustomWidth","$getCustomWidth").call(this);
Dwt.setSize(j,d,o);
var b=(c.parent instanceof DwtControl)?c.parent:DwtControl.fromElementId(window._dwtShellId);
if(b){if(this.cacheInheritedMethod("resizeHdlr","$resizeHdlr")){b.addControlListener(new AjxListener(this,this.cacheInheritedMethod("resizeHdlr","$resizeHdlr")))
}}}if(this.cacheInheritedMethod("getCustomPaddingStyle","$getCustomPaddingStyle")){var k=this.cacheInheritedMethod("getCustomPaddingStyle","$getCustomPaddingStyle").call(this);
if(k){j.style.cssText+=";"+k
}}if(AjxEnv.isIE){var f=this.createElement("temp",null,"div","");
f.display="none"
}var l=new AjxBuffer();
if(this.outputHTMLStart){this.outputHTMLStart(l,0)
}var n=(this.getUseParentTable()==false);
if(n){var e=this.getColSizes();
var h=this.getInheritedProperty("cellspacing");
var m=this.getInheritedProperty("cellpadding");
l.append("<table cellspacing=",h," cellpadding=",m," ",(XForm._showBorder?"border=1":"border=0"),' id="',this.getId(),'_table" ',this.getTableCssString(),">");
if(e!=null){l.append(" <colgroup>");
for(var g=0;
g<e.length;
g++){var p=e[g];
if(p<1){p=p*100+"%"
}l.append("<col width=",p,">")
}l.append("</colgroup>")
}l.append("<tbody>")
}c.outputItemList(this.getItems(),this,l,this.getNumCols(),0,true,true);
l.append("</table>");
j.innerHTML=l.toString();
this.deferred=false
};
Case_XFormItem.prototype.hide=function(a){XFormItem.prototype.hide.call(this,a);
this.hideElement(this.getElement(),a)
};
Case_XFormItem.prototype.show=function(a){XFormItem.prototype.show.call(this,a);
this.showElement(this.getElement(),a)
};
Case_XFormItem.prototype.isCurrentTab=function(){var b=false;
var a=this.getInheritedProperty("caseKey");
if(!AjxUtil.isEmpty(a)){var c=this.getInheritedProperty("caseVarRef");
var d=this.getInstanceValue(c);
b=(d==a)
}return b
};
Case_XFormItem.prototype.visibilityChecks=[Case_XFormItem.prototype.isCurrentTab];
TopGrouper_XFormItem=function(){};
XFormItemFactory.createItemType("_TOP_GROUPER_","top_grouper",TopGrouper_XFormItem,RadioGrouper_XFormItem);
TopGrouper_XFormItem.prototype.borderCssClass="TopGrouperBorder";
TopGrouper_XFormItem.prototype.labelCssClass="GrouperLabel";
TopGrouper_XFormItem.prototype.labelLocation=_INLINE_;
TopGrouper_XFormItem.prototype.insetCssClass="GrouperInset";
TopGrouper_XFormItem.prototype.outputHTMLStart=function(a,b){a.append("<div class=",this.getBorderCssClass(),">","<div ",this.getLabelCssString(),">",this.getLabel(),"</div>","<div class=",this.getInsetCssClass(),">")
};
TopGrouper_XFormItem.prototype.outputHTMLEnd=function(a,b){a.append("</div></div>")
};
if(appNewUI){XFormItemFactory.createItemType("_TOP_GROUPER_","top_grouper",TopGrouper_XFormItem,CollapsedGroup_XFormItem)
}BaseTopGrouper_XFormItem=function(){};
XFormItemFactory.createItemType("_BASE_TOP_GROUPER_","base_top_grouper",BaseTopGrouper_XFormItem,RadioGrouper_XFormItem);
BaseTopGrouper_XFormItem.prototype.borderCssClass="TopGrouperBorder";
BaseTopGrouper_XFormItem.prototype.labelCssClass="GrouperLabel";
BaseTopGrouper_XFormItem.prototype.labelLocation=_INLINE_;
BaseTopGrouper_XFormItem.prototype.insetCssClass="GrouperInset";
BaseTopGrouper_XFormItem.prototype.outputHTMLStart=function(a,b){a.append("<div class=",this.getBorderCssClass(),">","<div ",this.getLabelCssString(),">",this.getLabel(),"</div>","<div class=",this.getInsetCssClass(),">")
};
BaseTopGrouper_XFormItem.prototype.outputHTMLEnd=function(a,b){a.append("</div></div>")
};
Switch_XFormItem=function(){};
XFormItemFactory.createItemType("_SWITCH_","switch",Switch_XFormItem,Group_XFormItem);
Switch_XFormItem.prototype.labelLocation=_NONE_;
Switch_XFormItem.prototype.colSpan="*";
Switch_XFormItem.prototype.width="100%";
Switch_XFormItem.prototype.numCols=1;
Switch_XFormItem.prototype.outputHTML=function(a){Switch_XFormItem.outputItemList.call(this.getForm(),this.getItems(),this,a)
};
Switch_XFormItem.prototype.setElementEnabled=function(a){};
Switch_XFormItem.outputItemList=function(j,b,e,c,a,f,g){if(b.outputHTMLStart){b.outputHTMLStart(e,a)
}var r=null;
if(!g){r=b.getCssString();
if(r!=null&&r!=""){b.outputElementDivStart(e)
}}for(var k=0;
k<j.length;
k++){var q=j[k];
var d=(q.getItems()!=null);
var h=(q.getUseParentTable()!=false);
var o=q.getWriteElementDiv();
var l=q.getOutputHTMLMethod();
if(d&&h){if(l){l.call(q,e,a)
}}else{if(o){q.outputElementDivStart(e)
}if(l){l.call(q,e,0)
}if(o){q.outputElementDivEnd(e)
}}if(b){b.registerActiveChild(q)
}q.signUpForEvents();
var n=q.getUpdateElementMethod();
if(n){var p=q.getRefPath();
if(p){var m=this.getInstance();
if(m){n.call(q,q.getInstanceValue())
}}}}if(r!=null&&r!=""){b.outputElementDivEnd(e)
}if(b.outputHTMLEnd){b.outputHTMLEnd(e,a)
}};
Repeat_XFormItem=function(){Group_XFormItem.call(this)
};
XFormItemFactory.createItemType("_REPEAT_","repeat",Repeat_XFormItem,Group_XFormItem);
Repeat_XFormItem.prototype.useParentTable=false;
Repeat_XFormItem.prototype.writeElementDiv=true;
Repeat_XFormItem.prototype.numCols=1;
Repeat_XFormItem.prototype.number=1;
Repeat_XFormItem.prototype.showRemoveButton=true;
Repeat_XFormItem.prototype.showAddButton=true;
Repeat_XFormItem.prototype.alwaysShowAddButton=false;
Repeat_XFormItem.prototype.showMoveUpButton=false;
Repeat_XFormItem.prototype.showMoveDownButton=false;
Repeat_XFormItem.prototype.bmolsnr=true;
Repeat_XFormItem.prototype.enableDisableChecks=[XFormItem.prototype.hasWritePermission];
Repeat_XFormItem.prototype.visibilityChecks=[XFormItem.prototype.hasReadPermission];
Repeat_XFormItem.haveAnyRows=function(){return(this.getParentItem().getInstanceCount()!=0)
};
Repeat_XFormItem.isLastRow=function(){return((this.getParentItem().getInstanceCount()-1)==this.getParentItem().instanceNum)
};
Repeat_XFormItem.isAddButtonVisible=function(){return(this.getParentItem().getParentItem().getAlwaysShowAddButton()||Repeat_XFormItem.isLastRow.call(this)||!(Repeat_XFormItem.haveAnyRows.call(this)))
};
Repeat_XFormItem.prototype.getRemoveButton=function(){if(!this.removeButton){this.removeButton={type:_BUTTON_,label:AjxMsg.xformRepeatRemove,cssStyle:"margin-left:20px;",onActivate:function(e){var d=this.getParentItem().getParentItem();
d.removeRowButtonClicked(this.getParentItem().instanceNum)
},visibilityChecks:[Repeat_XFormItem.haveAnyRows],visibilityChangeEventSources:[this.getRef()]};
var a=this.getInheritedProperty("removeButtonLabel");
if(a){this.removeButton.label=a
}var b=this.getInheritedProperty("removeButtonWidth");
if(b){this.removeButton.width=b
}var c=this.getInheritedProperty("removeButtonCSSStyle");
if(c){this.removeButton.cssStyle=c
}}return this.removeButton
};
Repeat_XFormItem.prototype.getAddButton=function(){if(!this.addButton){var a=this.getInheritedProperty("showAddOnNextRow");
this.addButton={ref:".",type:_BUTTON_,label:AjxMsg.xformRepeatAdd,onActivate:function(f){var e=this.getParentItem().getParentItem();
e.addRowButtonClicked(this.getParentItem().instanceNum)
},visibilityChecks:[Repeat_XFormItem.isAddButtonVisible],visibilityChangeEventSources:[this.getRefPath()],forceUpdate:true};
var b=this.getInheritedProperty("addButtonLabel");
if(b){this.addButton.label=b
}var c=this.getInheritedProperty("addButtonWidth");
if(c){this.addButton.width=c
}var d=this.getInheritedProperty("addButtonCSSStyle");
if(d){this.addButton.cssStyle=d
}if(a){this.addButton.colSpan="*"
}}return this.addButton
};
Repeat_XFormItem.prototype.moveUpButton={type:_BUTTON_,label:"^",width:20,cssStyle:"margin-left:20px;",onActivate:function(b){var a=this.getParentItem().getParentItem();
a.moveUpButtonClicked(this.getParentItem().instanceNum)
}};
Repeat_XFormItem.prototype.moveDownButton={ref:".",type:_BUTTON_,label:"v",width:20,onActivate:function(b){var a=this.getParentItem().getParentItem();
a.moveDownButtonClicked(this.getParentItem().instanceNum)
},forceUpdate:true};
Repeat_XFormItem.groupVisibilityCheck=function(){return((this.instanceNum<this.getNumberToShow())||(this.instanceNum<this.getInstanceCount())||(this.instanceNum==0))
};
Repeat_XFormItem.prototype.initializeItems=function(){var b=this.getItems();
if(b.length==1&&b[0].items){var d=b[0]
}else{var d={ref:this.getRef(),fromRepeat:true,type:_GROUP_,numCols:b.length,items:[].concat(b),visibilityChangeEventSources:[this.getRefPath()],visibilityChecks:[function(){return(this.instanceNum==0||(this.instanceNum<this.getNumberToShow())||(this.instanceNum<this.getInstanceCount()))
}]}
}d.colSpan=1;
if(this.getShowRemoveButton()){var c=this.getRemoveButton();
d.items[d.items.length]=c;
d.numCols++
}if(this.getShowAddButton()){var c=this.getAddButton();
var a=this.getInheritedProperty("showAddOnNextRow");
d.items[d.items.length]=c;
if(a){d.items[d.items.length]={type:_SPACER_,colSpan:(d.numCols-1),visibilityChecks:[Repeat_XFormItem.isLastRow],visibilityChangeEventSources:[this.getRefPath()]}
}else{d.numCols++
}}if(this.getShowMoveUpButton()){d.items[d.items.length]=this.getMoveUpButton();
d.numCols++
}if(this.getShowMoveDownButton()){d.items[d.items.length]=this.getMoveDownButton();
d.numCols++
}this.__originalItems=d;
this.items=[]
};
Repeat_XFormItem.prototype.makeRepeatInstance=function(){var a=this.__originalItems;
var e=this.getNumCols();
var b=[];
for(var d=0;
d<e;
d++){var c=this.items.length;
a.refPath=this.getRefPath()+"["+c+"]";
groupItem=this.getForm().initItem(a,this);
groupItem.instanceNum=c;
b.push(groupItem);
this.items.push(groupItem)
}return b
};
Repeat_XFormItem.prototype.outputHTML=function(a,b){this.makeRepeatInstance();
this.getForm().outputItemList(this.items,this,a,this.getNumCols(),0)
};
Repeat_XFormItem.prototype.updateElement=function(n){var b=this.getForm();
var c=this.getElement();
if(n==null||n===""){n=[]
}var k=Math.max(n.length,this.getNumberToShow());
var p=this.items.length;
var o=this.getId();
if(k>p){var e=(k-p);
var t=c.getElementsByTagName("table")[0];
var a=c.getElementsByTagName("tbody")[0];
var m;
if(AjxEnv.isIE){m=this.createElement("temp",null,"div","");
m.display="none"
}while(this.items.length<k){var f=this.makeRepeatInstance(this);
var h=new AjxBuffer();
b.outputItemList(f,this,h,this.getNumCols(),0,true);
if(AjxEnv.isIE){m.innerHTML="<table>"+h.toString()+"</table>";
var g=m.getElementsByTagName("table")[0].rows;
for(var l=0;
l<g.length;
l++){a.appendChild(g[l])
}}else{var d=t.insertRow(-1);
d.innerHTML=h
}var q=f.length;
for(var s=0;
s<q;
s++){var j=f[s].getUpdateVisibilityMethod();
if(j){j.call(f[s])
}j=f[s].getUpdateEnabledDisabledtMethod();
if(j){j.call(f[s])
}}}}XFormItem.prototype.updateElement.call(this,n)
};
Repeat_XFormItem.prototype.addRowButtonClicked=function(a){var b=this.getRefPath();
this.getModel().addRowAfter(this.getInstance(),b,a)
};
Repeat_XFormItem.prototype.removeRowButtonClicked=function(a){var c=this.getForm();
if(this.getOnRemoveMethod()){this.getOnRemoveMethod().call(this,a,c)
}else{var d=this.getRefPath();
this.getModel().removeRow(this.getInstance(),d,a)
}this.items[a].clearError();
var b=new DwtXFormsEvent(c,this,this.getInstanceValue());
c.notifyListeners(DwtEvent.XFORMS_VALUE_CHANGED,b)
};
Repeat_XFormItem.prototype.getOnRemoveMethod=function(){return this.cacheInheritedMethod("onRemove","$onRemove","index,form")
};
Repeat_Grid_XFormItem=function(){};
XFormItemFactory.createItemType("_REPEAT_GRID_","repeat_grid",Repeat_Grid_XFormItem,Repeat_XFormItem);
Repeat_Grid_XFormItem.prototype.showRemoveButton=false;
Repeat_Grid_XFormItem.prototype.showAddButton=false;
Repeat_Grid_XFormItem.numCols=2;
Composite_XFormItem=function(){Group_XFormItem.call(this)
};
XFormItemFactory.createItemType("_COMPOSITE_","composite",Composite_XFormItem,Group_XFormItem);
Composite_XFormItem.prototype.useParentTable=false;
Composite_XFormItem.prototype.tableCssClass="xform_composite_table";
Composite_XFormItem.prototype.focusable=false;
Composite_XFormItem.prototype.initializeItems=function(){var a=this.getItems();
if(a==null){return
}if(this.numCols==null){this.numCols=a.length
}this.items=this.getForm().initItemList(a,this)
};
Composite_XFormItem.onFieldChange=function(c,b,a){if(this.getParentItem()&&this.getParentItem().getOnChangeMethod()){return this.getParentItem().getOnChangeMethod().call(this,c,b,a)
}else{return this.setInstanceValue(c)
}};
SetupGroup_XFormItem=function(){};
SetupGroup_XFormItem.prototype.width="100%";
XFormItemFactory.createItemType("_SETUPGROUP_","setupgroup",SetupGroup_XFormItem,Composite_XFormItem);
SetupGroup_XFormItem.prototype.initializeItems=function(){var a=this.getInheritedProperty("headerLabels");
var g=this.getInheritedProperty("contentItems");
this.items=[];
this.width="100%";
if(a.length!=0&&a.length==g.length){var f=1;
var d;
for(var e=0;
e<a.length;
e++){if(e!=a.length-1){d=false
}else{d=true
}var j=this.constructSingleGroup(a[e],g[e],f,d);
if(j!=undefined){this.items.push(j);
f++
}}}this.numCols=this.items.length;
if(this.numCols>1){var h=Math.floor(100/(this.numCols));
var c=100-h*(this.numCols-1);
var b=[];
for(var e=0;
e<this.numCols-1;
e++){b.push(h+"%")
}b.push(c+"%");
this.colSizes=b
}Composite_XFormItem.prototype.initializeItems.call(this)
};
SetupGroup_XFormItem.prototype.constructSingleGroup=function(h,a,g,c){var m={type:_GROUP_,numCols:2,width:"100%",valign:_TOP_,items:[]};
var e=(g)+"  "+h;
var f;
if(c){f={type:_OUTPUT_,colSpan:"*",value:e,cssClass:"ZaHomeSetupHeader ZaHomeSetupTitle"}
}else{f={type:_GROUP_,colSpan:"*",numCols:3,cssClass:"ZaHomeSetupHeader",items:[{type:_OUTPUT_,value:e,cssClass:"ZaHomeSetupTitle"},{type:_SPACER_,width:"5px",colSpan:1},{type:_AJX_IMAGE_,src:"SetupArrow"}]}
}m.items.push(f);
var d;
var l=false;
var k=1;
var j;
for(var b=0;
b<a.length;
b++){if(a[b]&&a[b].value){l=true;
j=k+".";
k++;
d={type:_OUTPUT_,label:j,value:a[b].value,onClick:a[b].onClick,labelCssClass:"ZaHomeLinkItemLabel",containerCssClass:"ZaLinkedItem"};
m.items.push(d)
}}if(!l){return undefined
}else{return m
}};
Date_XFormItem=function(){};
XFormItemFactory.createItemType("_DATE_","date",Date_XFormItem,Composite_XFormItem);
Date_XFormItem.prototype.DATE_MONTH_CHOICES=[{value:1,label:I18nMsg.monthJanMedium},{value:2,label:I18nMsg.monthFebMedium},{value:3,label:I18nMsg.monthMarMedium},{value:4,label:I18nMsg.monthAprMedium},{value:5,label:I18nMsg.monthMayMedium},{value:6,label:I18nMsg.monthJunMedium},{value:7,label:I18nMsg.monthJulMedium},{value:8,label:I18nMsg.monthAugMedium},{value:9,label:I18nMsg.monthSepMedium},{value:10,label:I18nMsg.monthOctMedium},{value:11,label:I18nMsg.monthNovMedium},{value:12,label:I18nMsg.monthDecMedium}];
Date_XFormItem.prototype.DATE_DAY_CHOICES=["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31"];
Date_XFormItem.prototype.numCols=3;
Date_XFormItem.prototype.items=[{type:_SELECT1_,ref:".",width:50,valign:_MIDDLE_,relevantBehavior:_PARENT_,choices:Date_XFormItem.prototype.DATE_MONTH_CHOICES,labelLocation:_NONE_,getDisplayValue:function(a){if(!(a instanceof Date)){a=new Date()
}return""+(a.getMonth()+1)
},elementChanged:function(b,a,c){if(a==null){a=new Date()
}var d=parseInt(b);
if(!isNaN(d)){d-=1;
a.setMonth(d)
}this.getForm().itemChanged(this.getParentItem(),a,c)
}},{type:_SELECT1_,ref:".",width:50,valign:_MIDDLE_,relevantBehavior:_PARENT_,labelLocation:_NONE_,choices:Date_XFormItem.prototype.DATE_DAY_CHOICES,getDisplayValue:function(a){if(!(a instanceof Date)){a=new Date()
}return""+a.getDate()
},elementChanged:function(b,a,d){if(a==null){a=new Date()
}var c=parseInt(b);
if(!isNaN(c)){a.setDate(c)
}this.getForm().itemChanged(this.getParentItem(),a,d)
}},{type:_TEXTFIELD_,ref:".",relevantBehavior:_PARENT_,width:45,labelLocation:_NONE_,getDisplayValue:function(a){if(!(a instanceof Date)){a=new Date()
}return""+a.getFullYear()
},elementChanged:function(b,a,d){if(a==null){a=new Date()
}var c=parseInt(b);
if(!isNaN(c)){a.setYear(c)
}this.getForm().itemChanged(this.getParentItem(),a,d)
}}];
Time_XFormItem=function(){};
XFormItemFactory.createItemType("_TIME_","time",Time_XFormItem,Composite_XFormItem);
Time_XFormItem.prototype.numCols=3;
Time_XFormItem.prototype.TIME_HOUR_CHOICES=["1","2","3","4","5","6","7","8","9","10","11","12"];
Time_XFormItem.prototype.TIME_MINUTE_CHOICES=["00","05","10","15","20","25","30","35","40","45","50","55"];
Time_XFormItem.prototype.TIME_AMPM_CHOICES=[I18nMsg.periodAm,I18nMsg.periodPm];
Time_XFormItem.prototype.items=[{type:_SELECT1_,ref:".",width:50,valign:_MIDDLE_,choices:Time_XFormItem.prototype.TIME_HOUR_CHOICES,labelLocation:_NONE_,getDisplayValue:function(b){if(!(b instanceof Date)){b=new Date()
}var a=""+(b.getHours()%12);
if(a=="0"){a="12"
}return a
},elementChanged:function(g,e,f){if(e==null){e=new Date()
}if(this.__dummyDate==null){this.__dummyDate=new Date()
}this.__dummyDate.setTime(e.getTime());
var d=parseInt(g);
if(!isNaN(d)){if(d==12){d=0
}var c=(e.getHours()>11);
if(c){d+=12
}this.__dummyDate.setHours(d)
}var b=this.getParentItem();
var a=b.getElementChangedMethod();
if(a!=null){a.call(this.getParentItem(),this.__dummyDate,e,f)
}else{this.getForm().itemChanged(this.getParentItem(),this.__dummyDate,f)
}}},{type:_SELECT1_,ref:".",width:50,valign:_MIDDLE_,choices:Time_XFormItem.prototype.TIME_MINUTE_CHOICES,labelLocation:_NONE_,getDisplayValue:function(b){if(!(b instanceof Date)){b=new Date()
}var a=b.getMinutes();
a=Math.round(a/5)*5;
a=(a<10?"0"+a:""+a);
return a
},elementChanged:function(f,c,e){if(c==null){c=new Date()
}if(this.__dummyDate==null){this.__dummyDate=new Date()
}this.__dummyDate.setTime(c.getTime());
var d=parseInt(f);
if(!isNaN(d)){this.__dummyDate.setMinutes(d)
}var b=this.getParentItem();
var a=b.getElementChangedMethod();
if(a!=null){a.call(this.getParentItem(),this.__dummyDate,c,e)
}else{this.getForm().itemChanged(this.getParentItem(),this.__dummyDate,e)
}}},{type:_SELECT1_,ref:".",choices:Time_XFormItem.prototype.TIME_AMPM_CHOICES,width:50,valign:_MIDDLE_,labelLocation:_NONE_,getDisplayValue:function(b){if(!(b instanceof Date)){b=new Date()
}var a=b.getHours();
if(a>11){return I18nMsg.periodPm
}return I18nMsg.periodAm
},elementChanged:function(d,f,g){if(f==null){f=new Date()
}if(this.__dummyDate==null){this.__dummyDate=new Date()
}this.__dummyDate.setTime(f.getTime());
var c=(d==I18nMsg.periodPm);
var e=f.getHours()%12;
this.__dummyDate.setHours(e+(c?12:0));
var b=this.getParentItem();
var a=b.getElementChangedMethod();
if(a!=null){a.call(this.getParentItem(),this.__dummyDate,f,g)
}else{this.getForm().itemChanged(this.getParentItem(),this.__dummyDate,g)
}}}];
Datetime_XFormItem=function(){};
XFormItemFactory.createItemType("_DATETIME_","datetime",Datetime_XFormItem,Composite_XFormItem);
Datetime_XFormItem._datetimeFormatToItems=function(h,d,g){var b=[];
var f=/{(\d+),\s*(date|time)}/;
var c=0;
while((c=h.search(f))!=-1){if(c>0){var e={type:_OUTPUT_,value:h.substring(0,c),valign:_CENTER_};
b.push(e);
h=h.substring(c)
}var a=f.exec(h);
b.push(a[2]=="date"?d:g);
h=h.substring(a[0].length)
}if(h.length>0){var e={type:_OUTPUT_,value:h};
b.push(e)
}return b
};
Datetime_XFormItem.prototype.numCols=3;
Datetime_XFormItem.prototype.items=Datetime_XFormItem._datetimeFormatToItems(AjxMsg.xformDateTimeFormat,{type:_DATE_,ref:".",labelLocation:_NONE_},{type:_TIME_,ref:".",labelLocation:_NONE_});
WidgetAdaptor_XFormItem=function(){};
XFormItemFactory.createItemType("_WIDGET_ADAPTOR_","widget_adaptor",WidgetAdaptor_XFormItem,XFormItem);
WidgetAdaptor_XFormItem.prototype.writeElementDiv=true;
WidgetAdaptor_XFormItem.prototype.focusable=false;
WidgetAdaptor_XFormItem.prototype.constructWidget=function(){};
WidgetAdaptor_XFormItem.prototype.insertElement=function(){if(!this.__alreadyInserted){this.__alreadyInserted=true;
var a=this.constructWidget();
if(a==null){return
}this.widget=a;
this.insertWidget(this.getForm(),this.widget,this.getElement())
}};
WidgetAdaptor_XFormItem.prototype.showElement=function(a){this.insertElement();
XForm.prototype.showElement.call(this,a)
};
WidgetAdaptor_XFormItem.prototype.insertWidget=function(b,c,a){this.widget.insertIntoXForm(b,this,a)
};
WidgetAdaptor_XFormItem.prototype.updateElement=function(a){if(this.__alreadyInserted){this.updateWidget(a)
}};
WidgetAdaptor_XFormItem.prototype.updateWidget=function(a){this.widget.updateInXForm(this.getForm(),this,a,this.getElement())
};
Dwt_Adaptor_XFormItem=function(){};
XFormItemFactory.createItemType("_DWT_ADAPTOR_","dwt_adaptor",Dwt_Adaptor_XFormItem,WidgetAdaptor_XFormItem);
Dwt_Adaptor_XFormItem.prototype.focusable=false;
Dwt_Adaptor_XFormItem.prototype.setElementEnabled=function(a){WidgetAdaptor_XFormItem.prototype.setElementEnabled.call(this,a);
if(this.widget){this.widget.setEnabled(a)
}this._enabled=a
};
Dwt_Adaptor_XFormItem.prototype.constructWidget=function(){};
Dwt_Adaptor_XFormItem.prototype.insertWidget=function(b,c,a){this.getForm()._reparentDwtObject(c,a)
};
Dwt_Adaptor_XFormItem.prototype.updateWidget=function(a){};
Dwt_Adaptor_XFormItem.prototype.getDwtSelectItemChoices=function(){if(this.__selOption!=null){return this.__selOptions
}var b=null;
var f=this.getChoices();
if(f!=null){var b=new Array(f.length);
for(var d=0;
d<f.length;
d++){var a=f[d];
var e=(a instanceof Object?a.value:a);
var c=(a instanceof Object?a.label:a);
b[d]=new DwtSelectOptionData(e,c)
}}this.__selOptions=b;
return this.__selOptions
};
Dwt_Adaptor_XFormItem.prototype._addCssStylesToDwtWidget=function(){var f=this.getCssStyle();
if(f!=null){var a=f.split(";");
var e=this.widget.getHtmlElement();
var b;
for(var d=0;
d<a.length;
++d){b=a[d].split(":");
if(b.length>0){var c=b[0];
if(c!=null){c=c.replace(/^(\s)*/,"")
}if(c=="float"){c=(AjxEnv.isIE)?"styleFloat":"cssFloat"
}var g=b[1];
if(g!=null){e.style[c]=g.replace(/^(\s)*/,"")
}}}}};
Dwt_Button_XFormItem=function(){};
XFormItemFactory.createItemType("_DWT_BUTTON_","dwt_button",Dwt_Button_XFormItem,Dwt_Adaptor_XFormItem);
Dwt_Button_XFormItem.estimateMyWidth=function(a,c,d){var b;
if(ZaZimbraAdmin.LOCALE=="ja"||ZaZimbraAdmin.LOCALE=="ko"||ZaZimbraAdmin.LOCALE=="zh_CN"||ZaZimbraAdmin.LOCALE=="zh_HK"){b=(String(a).length)*XForm.FONT_WIDTH1+(String(a).length)*XForm.FONT_WIDTH2+14
}else{b=(String(a).length/2)*XForm.FONT_WIDTH1+(String(a).length/2)*XForm.FONT_WIDTH2+14
}if(c){b=b+24
}if(d>0){b=b+d
}return[b,"px"].join("")
};
Dwt_Button_XFormItem.prototype.labelLocation=DwtLabel.IMAGE_LEFT|DwtLabel.ALIGN_CENTER;
Dwt_Button_XFormItem.prototype.writeElementDiv=false;
Dwt_Button_XFormItem.prototype.autoPadding=true;
Dwt_Button_XFormItem.prototype.insertWidget=function(b,c,a){this.getForm()._reparentDwtObject(c,this.getContainer())
};
Dwt_Button_XFormItem.prototype.constructWidget=function(){var d=this.widget=new DwtButton(this.getForm(),this.getLabelLocation(),this.getCssClass());
var k=this.getHeight();
var m=this.getWidth();
var b=null;
if(m!=null||k!=null){b=d.getHtmlElement();
if(m!=null){b.style.width=m
}if(k!=null){b.style.height=k
}}this._addCssStylesToDwtWidget();
var p=this.getInheritedProperty("icon");
if(p!=null){d.setImage(p)
}var h=false;
var n=this.getInheritedProperty("toolTipContent");
if(n!=null){d.setToolTipContent(n);
h=true
}var c=this.getLabel();
try{var j=Dwt.getSize(this.getContainer());
if(c){var s=AjxStringUtil.getWidth(c);
var l;
if(p){l=j.x-42
}else{l=j.x-22
}if((l>0)&&(s>l)){if(!h){d.setToolTipContent(c)
}var f=c.length;
var l=l-AjxStringUtil.getWidth("...");
var g=Math.floor(l*f/s);
if(l>0){c=c.substring(0,g)+"..."
}}b=d.getHtmlElement();
var r=b.firstChild;
var q=this.getInheritedProperty("autoPadding");
if(!r.style.width&&q){r.style.width="100%"
}}}catch(o){}d.setText(c);
var a=this.getOnActivateMethod();
if(a!=null){var e=new AjxListener(this,a);
d.addSelectionListener(e)
}if(this._enabled!==void 0){this.setElementEnabled(this._enabled)
}return d
};
Dwt_Button_XFormItem.prototype.getWidget=function(){return this.widget
};
Dwt_Select_XFormItem=function(){};
XFormItemFactory.createItemType("_DWT_SELECT_","dwt_select",Dwt_Select_XFormItem,Dwt_Adaptor_XFormItem);
Dwt_Select_XFormItem.prototype.writeElementDiv=false;
Dwt_Select_XFormItem.prototype.insertWidget=function(b,c,a){this.getForm()._reparentDwtObject(c,this.getContainer())
};
Dwt_Select_XFormItem.prototype.constructWidget=function(){var g=this.getDwtSelectItemChoices(this.getChoices());
var f=this.widget=new DwtSelect(this.getForm(),g);
var a=this.getHeight();
var e=this.getWidth();
if(e!=null||a!=null){var d=f.getHtmlElement();
if(e!=null){d.style.width=e
}if(a!=null){d.style.height=a
}}this._addCssStylesToDwtWidget();
var c=new Function("event","var widget = event._args.selectObj;\rvalue = event._args.newValue; "+this.getExternalChangeHandler());
var b=new AjxListener(this.getForm(),c);
f.addChangeListener(b);
if(this._enabled!==void 0){this.setElementEnabled(this._enabled)
}return f
};
Dwt_Select_XFormItem.prototype.updateWidget=function(a){this.widget.setSelectedValue(a)
};
Dwt_Select_XFormItem.prototype.setElementEnabled=function(a){this._enabled=a;
if(this.widget==null){return
}if(a){this.widget.enable()
}else{this.widget.disable()
}};
Dwt_ColorPicker_XFormItem=function(){};
XFormItemFactory.createItemType("_DWT_COLORPICKER_","dwt_colorpicker",Dwt_ColorPicker_XFormItem,Dwt_Adaptor_XFormItem);
Dwt_ColorPicker_XFormItem.prototype.cssStyle="width:80px;";
Dwt_ColorPicker_XFormItem.prototype.nowrap=false;
Dwt_ColorPicker_XFormItem.prototype.labelWrap=true;
Dwt_ColorPicker_XFormItem.prototype.constructWidget=function(){var c={parent:this.getForm(),allowColorInput:true,noFillLabel:ZaMsg.bt_reset};
var b=new DwtButtonColorPicker(c);
b.setActionTiming(DwtButton.ACTION_MOUSEDOWN);
var a=this.getInheritedProperty("buttonImage")||"FontColor";
b.setImage(a);
b.showColorDisplay(true);
b.setToolTipContent(ZMsg.xformFontColor);
if(this.getInstanceValue()!=null){b.setColor(this.getInstanceValue())
}b.__colorPicker.addSelectionListener(new AjxListener(this,this._colorOnChange));
return b
};
Dwt_ColorPicker_XFormItem.prototype.updateWidget=function(a){if(!this.widget){return
}if(a!=null){this.widget.setColor(a)
}else{this.widget.setColor("")
}};
Dwt_ColorPicker_XFormItem.prototype._colorOnChange=function(b){var c=b.detail;
var d=this.getElementChangedMethod();
if(d){d.call(this,c,this.getInstanceValue(),b)
}var a=this.getOnChangeMethod();
if(a){a.call(this,c,b,this.getForm())
}};
Dwt_Date_XFormItem=function(){};
XFormItemFactory.createItemType("_DWT_DATE_","dwt_date",Dwt_Date_XFormItem,Dwt_Adaptor_XFormItem);
Dwt_Date_XFormItem.prototype.cssClass="xform_dwt_date";
Dwt_Date_XFormItem.prototype.constructWidget=function(){var a=this.getInheritedProperty("firstDayOfWeek");
var b=new DwtButton(this.getForm());
b.setActionTiming(DwtButton.ACTION_MOUSEDOWN);
var d=this.menu=new DwtMenu(b,DwtMenu.CALENDAR_PICKER_STYLE,null,null,this.getForm());
d.setSize("150");
d._table.width="100%";
b.setMenu(d,true);
d.setAssociatedObj(b);
var c=new DwtCalendar({parent:d,firstDayOfWeek:(!AjxUtil.isEmpty(a)?a:0)});
c._invokingForm=this.getForm();
c._invokingFormItemId=this.getId();
c.setDate(new Date(),true);
c.addSelectionListener(new AjxListener(this,this._calOnChange));
b.__cal=c;
return b
};
Dwt_Date_XFormItem.prototype.updateWidget=function(a){if(a==null){a=new Date()
}this.widget.setText(this.getButtonLabel(a));
this.widget._date=a;
this.widget.__cal.setDate(a,true)
};
Dwt_Date_XFormItem.prototype._calOnChange=function(b){var c=b.detail;
var d=b.item;
var a=this.getElementChangedMethod();
a.call(this,c,this.getInstanceValue(),b)
};
Dwt_Date_XFormItem.prototype.getButtonLabel=function(b){if(b==null||!(b instanceof Date)){return""
}var a=AjxDateFormat.getDateInstance(AjxDateFormat.NUMBER);
return a.format(b)
};
Dwt_Time_XFormItem=function(){};
XFormItemFactory.createItemType("_DWT_TIME_","dwt_time",Dwt_Time_XFormItem,Dwt_Adaptor_XFormItem);
Dwt_Time_XFormItem.prototype.cssClass="xform_dwt_time";
Dwt_Time_XFormItem.prototype.constructWidget=function(){var a=new DwtTimeSelect(this.getForm());
a.addChangeListener(this._onChange.bind(this));
return a
};
Dwt_Time_XFormItem.prototype.updateWidget=function(a){if(a==null){a=new Date();
a.setHours(0,0,0,0)
}this.widget.set(a)
};
Dwt_Time_XFormItem.prototype._onChange=function(b){var c=this.widget.getValue();
var a=this.getElementChangedMethod();
a.call(this,c,this.getInstanceValue(),b)
};
Dwt_Datetime_XFormItem=function(){};
XFormItemFactory.createItemType("_DWT_DATETIME_","dwt_datetime",Dwt_Datetime_XFormItem,Composite_XFormItem);
Dwt_Datetime_XFormItem.prototype.numCols=3;
Dwt_Datetime_XFormItem.prototype.useParentTable=false;
Dwt_Datetime_XFormItem.prototype.cssClass="xform_dwt_datetime";
Dwt_Datetime_XFormItem.initialize=function(){Dwt_Datetime_XFormItem.prototype.items=Datetime_XFormItem._datetimeFormatToItems(AjxMsg.xformDateTimeFormat,{type:_DWT_DATE_,ref:".",labelLocation:_NONE_,errorLocation:_PARENT_,elementChanged:function(c,b,d){b=b?b:new Date();
c.setHours(b.getHours(),b.getMinutes(),b.getSeconds(),0);
var a=this.getParentItem().getElementChangedMethod();
if(a){a.call(this.getParentItem(),c,b,d)
}}},{type:_DWT_TIME_,ref:".",labelLocation:_NONE_,errorLocation:_PARENT_,elementChanged:function(c,b,d){b=b?b:new Date();
c.setFullYear(b.getFullYear(),b.getMonth(),b.getDate());
var a=this.getParentItem().getElementChangedMethod();
if(a){a.call(this.getParentItem(),c,b,d)
}}})
};
Dwt_Datetime_XFormItem.initialize();
Dwt_List_XFormItem=function(){};
XFormItemFactory.createItemType("_DWT_LIST_","dwt_list",Dwt_List_XFormItem,Dwt_Adaptor_XFormItem);
Dwt_List_XFormItem.prototype.writeElementDiv=false;
Dwt_List_XFormItem.prototype.widgetClass=DwtListView;
Dwt_List_XFormItem.prototype.bmolsnr=true;
Dwt_List_XFormItem.prototype.getOnSelectionMethod=function(){return this.cacheInheritedMethod("onSelection","$onSelection","event")
};
Dwt_List_XFormItem.prototype.constructWidget=function(){var e=this.getInheritedProperty("headerList");
var n=this.getInheritedProperty("widgetClass");
var k=this.getInheritedProperty("hideHeader");
var j=new n(this.getForm(),this.getCssClass(),null,((k!=undefined&&k==true)?null:e));
var f=this.getInheritedProperty("emptyText");
if(f!=null||f===""){j.emptyText=f
}if(k!=undefined){j.hideHeader=k;
if(k&&e){j._headerList=e
}}var g=this.getInheritedProperty("multiselect");
if(g!=undefined){j.setMultiSelect(g)
}if(this.cacheInheritedMethod("getCustomHeight","$getCustomHeight")&&this.cacheInheritedMethod("getCustomWidth","$getCustomWidth")){var m=this.cacheInheritedMethod("getCustomHeight","$getCustomHeight").call(this);
var d=this.cacheInheritedMethod("getCustomWidth","$getCustomWidth").call(this);
if(d&&m){j.setSize(d,m)
}}else{var d=this.getWidth();
var m=this.getHeight();
if(d&&m){j.setSize(d,m)
}if(m&&m!=Dwt.DEFAULT){j.setListDivHeight(m)
}}var h=this.getOnSelectionMethod();
if(h){j.addSelectionListener(new AjxListener(this,h))
}else{var l=new AjxListener(this,this._handleSelection);
j.addSelectionListener(l)
}var c=this.cacheInheritedMethod("createPopupMenu","$createPopupMenu","parent");
if(c!=null){c.call(this,j)
}var b=this.getForm();
var a=(b.parent instanceof DwtControl)?b.parent:DwtControl.fromElementId(window._dwtShellId);
if(a){if(this.cacheInheritedMethod("resizeHdlr","$resizeHdlr")&&this.cacheInheritedMethod("getCustomHeight","$getCustomHeight")&&this.cacheInheritedMethod("getCustomWidth","$getCustomWidth")){a.addControlListener(new AjxListener(this,this.cacheInheritedMethod("resizeHdlr","$resizeHdlr")))
}}return j
};
Dwt_List_XFormItem.prototype.resizeHdlr=function(){try{var a=this.cacheInheritedMethod("getCustomHeight","$getCustomHeight").call(this);
var c=this.cacheInheritedMethod("getCustomWidth","$getCustomWidth").call(this);
this.widget.setSize(c,a)
}catch(b){alert(b)
}};
Dwt_List_XFormItem.prototype.getSelection=function(){return this.widget.getSelection()
};
Dwt_List_XFormItem.prototype._handleSelection=function(b){var a=this.getModelItem();
var b=new DwtXModelEvent(this.getInstance(),a,null,null);
a.notifyListeners(DwtEvent.XFORMS_VALUE_CHANGED,b)
};
Dwt_List_XFormItem.prototype.insertWidget=function(b,c,a){this.getForm()._reparentDwtObject(c,this.getContainer())
};
Dwt_List_XFormItem.prototype.updateWidget=function(a){if(typeof(a)!="undefined"){this.setItems(a)
}};
Dwt_List_XFormItem.isItemsChanged=function(a,h){var b=false;
if((a._version!=null&&h._version!=null&&(a._version!=h._version))||(a.length!=h.length)){b=true
}else{var e=[];
var d=[];
for(var c=0;
c<a.length;
c++){if(a[c] instanceof Object){for(var f in a[c]){e.push(a[c][f])
}}else{e.push(a[c])
}if(h[c] instanceof Object){for(var g in h[c]){d.push(h[c][g])
}}else{d.push(h[c])
}if(e.join()!=d.join()){b=true;
break
}else{e=[];
d=[]
}}}return b
};
Dwt_List_XFormItem.prototype.setItems=function(a){var f=this.widget.getList();
var g=new Array();
var c=new Array();
if(f){g=f.getArray()
}c=new Array();
var h=this.getInheritedProperty("defaultColumnSortable");
if(a&&a.length>0){if(this.getForceUpdate()||Dwt_List_XFormItem.isItemsChanged(a,g)){var e=this.getInheritedProperty("preserveSelection");
var j=null;
if(e){j=this.widget.getSelection()
}var b=a.length;
for(var d=0;
d<b;
d++){c.push(a[d])
}this.widget.set(AjxVector.fromArray(c),h);
if(a._version!=undefined&&a._version!=null){this.widget.getList().getArray()._version=a._version
}if(e&&j){this.widget.setSelectedItems(j)
}}}else{this.widget.set(AjxVector.fromArray([]),h)
}};
Dwt_List_XFormItem.prototype.appendItems=function(a){this.widget.addItems(a)
};
Button_Grid_XFormItem=function(){};
XFormItemFactory.createItemType("_BUTTON_GRID_","button_grid",Button_Grid_XFormItem,WidgetAdaptor_XFormItem);
Button_Grid_XFormItem.prototype.numCols=5;
Button_Grid_XFormItem.prototype.cssClass="xform_button_grid_medium";
Button_Grid_XFormItem.prototype.forceUpdate=true;
Button_Grid_XFormItem.prototype.constructWidget=function(){var c=this.getExternalChangeHandler();
var b={numCols:this.getNumCols(),choices:choices.getChoiceObject(),cssClass:this.getCssClass(),onChange:c,addBracketingCells:(this.getAlign()==_CENTER_)};
var a=this.getMultiple();
if(a!==null){b.multiple=a
}return new ButtonGrid(b)
};
Dwt_Chooser_XFormItem=function(){};
XFormItemFactory.createItemType("_DWT_CHOOSER_","chooser",Dwt_Chooser_XFormItem,Dwt_Adaptor_XFormItem);
Dwt_Chooser_XFormItem.prototype.widgetClass=DwtChooser;
Dwt_Chooser_XFormItem.prototype.listSize=100;
Dwt_Chooser_XFormItem.prototype.getSorted=function(){return this.getInheritedProperty("sorted")
};
Dwt_Chooser_XFormItem.prototype.getListCssClass=function(){return this.getInheritedProperty("listCssClass")
};
Dwt_Chooser_XFormItem.prototype.getTargetListCssClass=function(){return this.getInheritedProperty("targetListCssClass")
};
Dwt_Chooser_XFormItem.prototype.getSourceInstanceValue=function(){var a=this.getModel().getInstanceValue(this.getInstance(),this.getInheritedProperty("sourceRef"));
if(!a){a=new AjxVector()
}else{if(typeof a=="string"){a=new Array(a)
}}return a
};
Dwt_Chooser_XFormItem.prototype.getTargetInstanceValue=function(){var a=this.getInstanceValue();
if(!a){a=new AjxVector()
}else{if(typeof a=="string"){a=new Array(a)
}}return a
};
Dwt_Chooser_XFormItem.prototype._handleStateChange=function(b){var a=this.getForm();
var e=this.getId();
var d=this.getWidget();
var c=d.getItems();
this._skipUpdate=true;
a.itemChanged(e,c);
this._skipUpdate=false
};
Dwt_Chooser_XFormItem.prototype.constructWidget=function(){var d=this.getForm();
var a=this.getCssClass();
var g=this.getListCssClass();
var b=this.getTargetListCssClass();
var f=this.getInheritedProperty("widgetClass");
if(g&&!b){b=g
}var c=this.getInheritedProperty("listSize");
var e={parent:d,className:a,slvClassName:g,tlvClassName:b,layoutStyle:(this.getInheritedProperty("layoutStyle")?this.getInheritedProperty("layoutStyle"):DwtChooser.HORIZ_STYLE),listSize:c,sourceEmptyOk:true,allButtons:true,listWidth:(this.getInheritedProperty("listWidth")?this.getInheritedProperty("listWidth"):null),listHeight:(this.getInheritedProperty("listHeight")?this.getInheritedProperty("listHeight"):null),tableWidth:(this.getInheritedProperty("tableWidth")?this.getInheritedProperty("tableWidth"):null),labelWidth:(this.getInheritedProperty("labelWidth")?this.getInheritedProperty("labelWidth"):null),splitButtons:this.getInheritedProperty("splitButtons")};
return new f(e)
};
Dwt_Chooser_XFormItem.prototype.updateWidget=function(f,b,a){if(this._skipUpdate){return
}if(this._stateChangeListener){this.widget.removeStateChangeListener(this._stateChangeListener)
}else{this._stateChangeListener=new AjxListener(this,Dwt_Chooser_XFormItem.prototype._handleStateChange)
}var j=this.getSourceInstanceValue();
var k;
if(j instanceof Array){var l=[];
var c=j.length;
for(var g=0;
g<c;
g++){l.push(j[g])
}k=AjxVector.fromArray(l)
}else{k=j.clone()
}var e=this.getTargetInstanceValue();
if(e instanceof Array){e=AjxVector.fromArray(e)
}if(b){var c=e.size();
for(var g=0;
g<c;
g++){if(a){var d=k.indexOfLike(e.get(g),a);
if(d>-1){k.removeAt(d)
}}else{var d=k.indexOf(e.get(g));
if(d>-1){k.removeAt(d)
}}}}var h=this.getSorted();
if(h){k.sort();
e.sort()
}this.widget.setItems(k);
this.widget.setItems(e,DwtChooserListView.TARGET);
this.widget.addStateChangeListener(this._stateChangeListener)
};
Dwt_Alert_XFormItem=function(){};
XFormItemFactory.createItemType("_DWT_ALERT_","alert",Dwt_Alert_XFormItem,Dwt_Adaptor_XFormItem);
Dwt_Alert_XFormItem.prototype.colSpan="*";
Dwt_Alert_XFormItem.prototype.labelLocation=_NONE_;
Dwt_Alert_XFormItem.prototype.getStyle=function(){return this.getInheritedProperty("style")
};
Dwt_Alert_XFormItem.prototype.getIconVisible=function(){return this.getInheritedProperty("iconVisible")
};
Dwt_Alert_XFormItem.prototype.getTitle=function(){return this.getInheritedProperty("title")
};
Dwt_Alert_XFormItem.prototype.getContent=function(){return this.getInheritedProperty("content")
};
Dwt_Alert_XFormItem.prototype.getAlertCssClass=function(){return this.getInheritedProperty("alertCssClass")
};
Dwt_Alert_XFormItem.prototype.constructWidget=function(){var m=this.getStyle();
var l=this.getIconVisible();
var s=this.getTitle();
var k=this.getContent();
var e=this.getAlertCssClass();
var b=this.getForm();
var c=new DwtAlert(b,e);
c.setStyle(m);
c.setIconVisible(l);
c.setTitle(s);
c.setContent(k);
if(AjxEnv.isIE){try{var t=c.getHtmlElement();
var f=Dwt.getSize(t);
var d=this.getContainer();
var j=Dwt.getSize(d);
var m=DwtCssStyle.getComputedStyleObject(t);
var a=parseInt(m.borderLeftWidth)||1;
var r=parseInt(m.borderRightWidth)||1;
var p=parseInt(m.paddingLeft)||5;
var h=parseInt(m.paddingRight)||5;
var n=parseInt(m.marginLeft)||5;
var g=parseInt(m.marginRight)||5;
var q=a+r+p+h+n+g;
if(j.x>q){f.x=j.x-q;
Dwt.setSize(t,f.x,f.y)
}}catch(o){}}return c
};
Dwt_Alert_XFormItem.prototype.updateWidget=function(a){var b=this.getContent();
if(!b&&a){this.getWidget().setContent(a)
}};
Dwt_TabBar_XFormItem=function(){};
XFormItemFactory.createItemType("_TAB_BAR_","tab_bar",Dwt_TabBar_XFormItem,Dwt_Adaptor_XFormItem);
Dwt_TabBar_XFormItem.prototype.colSpan="*";
Dwt_TabBar_XFormItem.prototype.labelLocation=_NONE_;
Dwt_TabBar_XFormItem.prototype.cssStyle="margin-right: 5px";
Dwt_TabBar_XFormItem.prototype._value2tabkey;
Dwt_TabBar_XFormItem.prototype._tabkey2value;
Dwt_TabBar_XFormItem.prototype._stateChangeListener;
Dwt_TabBar_XFormItem.prototype.getChoices=function(){return this.getInheritedProperty("choices")
};
Dwt_TabBar_XFormItem.prototype._handleStateChange=function(c){var b=this.getForm();
var d=this.getWidget();
var e=d.getCurrentTab();
var a=this._tabkey2value[e];
var f=this.getId();
b.releaseFocus();
b.itemChanged(f,a,c,true)
};
Dwt_TabBar_XFormItem.prototype.constructWidget=function(){var a=this.getForm();
var l=this.getCssClass();
var e=this.getInheritedProperty("buttonCssClass");
var g=new DwtTabBarFloat(a,l,e);
this._value2tabkey={};
this._tabkey2value={};
var k=this.getChoices();
if(k.constructor==XFormChoices){this.choices=k;
var c=new AjxListener(this,this.dirtyDisplay);
k.addListener(DwtEvent.XFORMS_CHOICES_CHANGED,c);
var j=this.getNormalizedValues();
var h=this.getNormalizedLabels();
var b=j.length;
for(var f=0;
f<b;
f++){this._value2tabkey[j[f]]=f+1;
this._tabkey2value[f+1]=j[f];
g.addButton(f+1,h[f]);
g.getButton(f+1).getHtmlElement().style.paddingRight="2px"
}}else{var b=k.length;
for(var f=0;
f<b;
f++){var d=k[f];
this._value2tabkey[d.value]=f+1;
this._tabkey2value[f+1]=d.value;
g.addButton(f+1,d.label);
g.getButton(f+1).getHtmlElement().style.paddingRight="2px"
}}return g
};
Dwt_TabBar_XFormItem.prototype.updateWidget=function(a){if(this.widget.isUpdating){this.widget.isUpdating=false;
return
}if(this._stateChangeListener){this.widget.removeStateChangeListener(this._stateChangeListener)
}else{this._stateChangeListener=new AjxListener(this,Dwt_TabBar_XFormItem.prototype._handleStateChange)
}var b=this._value2tabkey[a];
if(b!=this.widget.getCurrentTab()){this.widget.openTab(b)
}this.widget.addStateChangeListener(this._stateChangeListener)
};
Dwt_TabBar_XFormItem.prototype.dirtyDisplay=function(){this.$normalizedChoices=null;
if(this.choices&&this.choices.constructor==XFormChoices){var f=this.getNormalizedLabels();
var a=this.getNormalizedValues();
var d=f.length;
for(var c=0;
c<d;
c++){var e=this._value2tabkey[a[c]];
if(e){var b=this.widget.getButton(e);
if(b){b.setText(f[c])
}}}}this._choiceDisplayIsDirty=true;
delete this.$normalizedChoices
};
Dwt_ProgressBar_XFormItem=function(){};
XFormItemFactory.createItemType("_DWT_PROGRESS_BAR_","dwt_progress_bar",Dwt_ProgressBar_XFormItem,Dwt_Adaptor_XFormItem);
Dwt_ProgressBar_XFormItem.prototype.constructWidget=function(){var c=this.getForm();
var d=new DwtProgressBar(c,null);
var b=this.getInheritedProperty("maxValue");
if(!b){this.maxValueRef=this.getInheritedProperty("maxValueRef");
b=this.getModel().getInstanceValue(this.getInstance(),this.maxValueRef)
}d.setMaxValue(b);
var e=this.getInheritedProperty("progressCssClass");
if(e){d.setProgressCssClass(e)
}var a=this.getInheritedProperty("wholeCssClass");
if(a){d.setWholeCssClass(a)
}return d
};
Dwt_ProgressBar_XFormItem.prototype.updateWidget=function(a){if(!a){a=0
}if(this.maxValueRef){maxvalue=this.getModel().getInstanceValue(this.getInstance(),this.maxValueRef);
this.getWidget().setMaxValue(maxvalue)
}this.getWidget().setValue(a)
}
}if(AjxPackage.define("ajax.dwt.xforms.XFormChoices")){XFormChoices=function(d,b,a,c){if(arguments.length==0){return
}if(d!=null){this._choiceObject=d
}if(b!=null){this._type=b
}if(a!=null){this._valueProperty=a
}if(c!=null){this._labelProperty=c
}this._choiceChangeTime=new Date().getTime();
this._lastNormalizeTime=0;
if(this._type==XFormChoices.AUTO){this.autoDetermineType()
}this._eventMgr=new AjxEventMgr()
};
XFormChoices.prototype=new Object();
XFormChoices.prototype.constructor=XFormChoices;
XFormChoices.normalizeChoices=function(l,g,d,j){var k;
var f;
var c;
var h=0;
switch(g){case XFormChoices.SIMPLE_LIST:k=[].concat(l);
f=[].concat(l);
break;
case XFormChoices.OBJECT_LIST:k=[];
f=[];
c=[];
if(d==null){d="value"
}if(j==null){j="label"
}var b=l.length;
for(var e=0;
e<b;
e++){if(l[e]){k.push(l[e][d]);
f.push(l[e][j]);
if(l[e]["visible"]==false){c.push(false);
h++
}else{c.push(true)
}}}break;
case XFormChoices.OBJECT_REFERENCE_LIST:k=[];
f=[];
if(j==null){j="label"
}var b=l.length;
for(var e=0;
e<b;
e++){if(l[e]){k.push(l[e]);
f.push(l[e][j])
}}break;
case XFormChoices.HASH:k=[];
f=[];
for(var a in l){k.push(a);
f.push(l[a])
}break
}return{values:k,labels:f,visible:c,totalInvisibleChoices:h}
};
XFormChoices.AUTO="auto";
XFormChoices.SIMPLE_LIST="list";
XFormChoices.HASH="hash";
XFormChoices.OBJECT_LIST="object";
XFormChoices.OBJECT_REFERENCE_LIST="object_reference_list";
XFormChoices.prototype._type=XFormChoices.AUTO;
XFormChoices.prototype._valueProperty="value";
XFormChoices.prototype._labelProperty="label";
XFormChoices.prototype._visibleProperty="visible";
XFormChoices.prototype.getChoiceObject=function(){return this._choiceObject
};
XFormChoices.prototype.autoDetermineType=function(){var b;
var c=this._choiceObject;
if(c){if(AjxUtil.isArray(c)){var a=c[0];
if(AjxUtil.isObject(a)){b=XFormChoices.OBJECT_LIST
}else{b=XFormChoices.SIMPLE_LIST
}}else{if(AjxUtil.isObject(c)){b=XFormChoices.HASH
}}}if(b==null){b=XFormChoices.SIMPLE_LIST
}this._type=b
};
XFormChoices.prototype.setChoices=function(a){this._choiceObject=a
};
XFormChoices.prototype.getChoices=function(){if(this._lastNormalizeTime==this._choiceChangeTime&&this.$normalizedChoices){return this.$normalizedChoices
}this._lastNormalizeTime=this._choiceChangeTime;
this.$normalizedChoices=XFormChoices.normalizeChoices(this._choiceObject,this._type,this._valueProperty,this._labelProperty);
return this.$normalizedChoices
};
XFormChoices.prototype.getChoiceByValue=function(c){switch(this._type){case XFormChoices.SIMPLE_LIST:return c;
break;
case XFormChoices.OBJECT_LIST:var b=this._valueProperty||"value";
for(var a=0;
a<this._choiceObject.length;
a++){if(this._choiceObject[a][b]==c){return this._choiceObject[a]
}}break;
case XFormChoices.OBJECT_REFERENCE_LIST:for(var a=0;
a<this._choiceObject.length;
a++){if(this._choiceObject[a]==c){return this._choiceObject[a]
}}break;
case XFormChoices.HASH:return this._choiceObject[c];
break
}return null
};
XFormChoices.prototype.dirtyChoices=function(){this._choiceChangeTime=new Date().getTime();
this.notifyListeners(DwtEvent.XFORMS_CHOICES_CHANGED,{})
};
XFormChoices.prototype.addListener=function(a,b){return this._eventMgr.addListener(a,b)
};
XFormChoices.prototype.notifyListeners=function(a,b){return this._eventMgr.notifyListeners(a,b)
};
XFormChoices.prototype.isListenerRegistered=function(a){return this._eventMgr.isListenerRegistered(a)
};
XFormChoices.prototype.removeListener=function(a,b){return this._eventMgr.removeListener(a,b)
}
}if(AjxPackage.define("ajax.dwt.xforms.OSelect_XFormItem")){OSelect1_XFormItem=function(){this._enabled=true
};
XFormItemFactory.createItemType("_OSELECT1_","oselect1",OSelect1_XFormItem,Select1_XFormItem);
OSelect1_XFormItem._mouseWheelEventAttached=false;
OSelect1_XFormItem._mouseWheelCurrentSelect;
OSelect1_XFormItem._mouseWheelHideMenu=function(){OSelect1_XFormItem._mouseWheelCurrentSelect.hideMenu()
};
OSelect1_XFormItem.prototype.focusable=false;
OSelect1_XFormItem.prototype.cssClass="oselect";
OSelect1_XFormItem.prototype.multiple=false;
OSelect1_XFormItem.prototype.writeElementDiv=false;
OSelect1_XFormItem.prototype.width="auto";
OSelect1_XFormItem.prototype.editable=false;
OSelect1_XFormItem.prototype.menuUp=false;
OSelect1_XFormItem.prototype.noteUp=false;
OSelect1_XFormItem.prototype.inputSize=25;
OSelect1_XFormItem.prototype.bmolsnr=true;
OSelect1_XFormItem.prototype.nowrap=false;
OSelect1_XFormItem.prototype.labelWrap=true;
OSelect1_XFormItem.prototype.setMenuWidth=true;
OSelect1_XFormItem.prototype.showCheck=false;
OSelect1_XFormItem.prototype.checkHTML="&radic;";
OSelect1_XFormItem.MENU_DIR_DOWN=1;
OSelect1_XFormItem.MENU_DIR_UP=2;
OSelect1_XFormItem.MENU_DIR_UNKNOWN=0;
OSelect1_XFormItem.NOTE_HEIGHT=22;
OSelect1_XFormItem.prototype.menuDirection=OSelect1_XFormItem.MENU_DIR_UNKNOWN;
OSelect1_XFormItem.prototype.visibilityChecks=[XFormItem.prototype.hasReadPermission];
OSelect1_XFormItem.prototype.enableDisableChecks=[XFormItem.prototype.hasWritePermission];
OSelect1_XFormItem.prototype.initFormItem=function(){var b=this.getChoices();
if(b==null||b.constructor!=XFormChoices){return
}var a=new AjxListener(this,this.choicesChangeLsnr);
b.addListener(DwtEvent.XFORMS_CHOICES_CHANGED,a)
};
OSelect1_XFormItem.prototype.updateElement=function(c){if(this.choicesAreDirty()){this.updateChoicesHTML()
}if(this.getMultiple()&&c!=null&&c.indexOf(",")>-1){c=c.split(",");
for(var a=0;
a<c.length;
a++){c[a]=this.getChoiceLabel(c[a])
}}else{c=this.getChoiceLabel(c)
}if(c==null){c=""
}var b=this.getDisplayElement();
if(b){if(this.getInheritedProperty("editable")){if((!c||c=="")&&b.value!=c){var a=0
}b.value=c;
if(this.getElement()&&b.offsetWidth&&this.getElement().style){this.getElement().style.width=b.offsetWidth+20+"px"
}}else{b.innerHTML=AjxStringUtil.htmlEncode(c)
}}};
OSelect1_XFormItem.prototype.getShowCheck=function(){return this.cacheInheritedProperty("showCheck","$showCheck")
};
OSelect1_XFormItem.prototype.getCheckHTML=function(){return this.cacheInheritedProperty("checkHTML","$checkHTML")
};
OSelect1_XFormItem.prototype.getMenuElementId=function(){return"___OSELECT_MENU___"
};
OSelect1_XFormItem.prototype.getMenuElement=function(){var b=this.getMenuElementId();
var a=this.getElement(b);
if(a==null){a=this.createElement(b,null,"div","MENU CONTENTS")
}return a
};
OSelect1_XFormItem.prototype.getNoteElementId=function(){return"___OSELECT_NOTE___"
};
OSelect1_XFormItem.prototype.getNoteElement=function(){var b=this.getNoteElementId();
var a=this.getElement(b);
if(a==null){a=this.createElement(b,null,"div","NOTE CONTENTS")
}return a
};
OSelect1_XFormItem.prototype.showMenu=function(){if(!this._enabled){return
}if(window.console&&window.console.log){console.log("Showing menu")
}this.hideInputTooltip();
if(AjxEnv.isIE&&!OSelect1_XFormItem._mouseWheelEventAttached){var d=this.getForm();
var k=d.getHtmlElement();
if(k.attachEvent){k.attachEvent("onmousewheel",OSelect1_XFormItem._mouseWheelHideMenu);
OSelect1_XFormItem._mouseWheelCurrentSelect=this;
OSelect1_XFormItem._mouseWheelEventAttached=true
}}var f=this.getMenuElement();
if(f==null){return
}f.className=this.getMenuCssClass();
f.innerHTML=this.getChoicesHTML();
var b;
if(this.getInheritedProperty("editable")){b=this.getBounds(this.getDisplayElement())
}else{b=this.getBounds(this.getElement())
}var n=DwtShell.getShell(window).getSize();
var c=n.y;
var o=8;
f.style.left=parseInt(b.left)+"px";
f.style.top=parseInt(b.top)+parseInt(b.height)-1+"px";
var p=this.getNormalizedChoices();
if(p&&p.values){f.style.overflow="auto";
var h=p.values.length-p.totalInvisibleChoices;
f.style.height="auto"
}var m=this.getInstanceValue();
var j=this.getDisplayValueMethod();
if(j){m=j.call(this,m)
}var a=this.getChoiceNum(m);
this.__currentHiliteItem=a;
this.hiliteChoice(a);
f.style.zIndex=Dwt.Z_HIDDEN;
f.style.display="block";
var e=this.getBounds(f);
var g=e.height;
var l=e.top;
if(this.getInheritedProperty("setMenuWidth")==true){if(AjxEnv.isIE){if(this.getInheritedProperty("editable")){f.style.width=parseInt(b.width)+4+"px";
f.getElementsByTagName("table")[0].style.width=parseInt(b.width)-1+"px"
}else{f.style.width=parseInt(b.width)+2+"px";
f.getElementsByTagName("table")[0].style.width=parseInt(b.width)-1+"px"
}}else{if(this.getInheritedProperty("editable")){f.style.width=parseInt(b.width)-5+"px";
f.getElementsByTagName("table")[0].style.width=parseInt(b.width)-6+"px"
}else{f.style.width=parseInt(b.width)-3+"px";
f.getElementsByTagName("table")[0].style.width=parseInt(b.width)-4+"px"
}}}if(g+l>c-o){if((b.top-g)>o){f.style.top=b.top-g+"px";
f.getElementsByTagName("table")[0].className=this.getChoiceTableCssClass()
}else{if(b.top>((c-o*2)/2)){f.style.height=parseInt(b.top)-o+"px";
f.style.top=o+"px";
this.menuDirection=OSelect1_XFormItem.MENU_DIR_UP
}else{f.style.top=parseInt(f.style.top)+2+"px";
f.style.height=c-o-parseInt(f.style.top)+"px";
this.menuDirection=OSelect1_XFormItem.MENU_DIR_DOWN
}if(!AjxEnv.isIE){f.style.height=parseInt(f.style.height)-11
}f.style.overflow="auto";
f.getElementsByTagName("table")[0].className=this.getChoiceScrollTableCssClass();
f.getElementsByTagName("table")[0].width="100%"
}}else{f.getElementsByTagName("table")[0].className=this.getChoiceTableCssClass()
}if(!AjxEnv.isIE&&f.clientWidth&&f.scrollWidth&&(f.scrollWidth>f.clientWidth)){f.style.overflow="auto"
}f.style.zIndex=1000000;
if(this.$hideListener==null){this.$hideListener=new AjxListener(this,this.oMouseUp)
}if(this.$outsideMouseDownListener==null){this.$outsideMouseDownListener=new AjxListener(this,this.onOutsideMouseDown)
}AjxCore.addListener(window,DwtEvent.ONMOUSEUP,this.$hideListener);
AjxCore.addListener(document.body,DwtEvent.ONMOUSEDOWN,this.$outsideMouseDownListener);
Dwt.setHandler(this.getForm().getHtmlElement(),DwtEvent.ONMOUSEWHEEL,this.$outsideMouseDownListener);
DwtEventManager.addListener(DwtEvent.ONMOUSEDOWN,this.$outsideMouseDownListener);
this.menuUp=true
};
OSelect1_XFormItem.prototype.choicesChangeLsnr=function(){this._choiceDisplayIsDirty=true;
delete this.$normalizedChoices;
if(this.menuUp){this.showMenu()
}};
OSelect1_XFormItem.prototype.redrawChoices=function(){var a=this.getMenuElement();
if(a==null){return
}a.innerHTML=this.getChoicesHTML()
};
OSelect1_XFormItem.prototype.hideMenu=function(){if(!this.menuUp){return
}if(window.console&&window.console.log){console.log("Hiding menu")
}setTimeout(this.getFormGlobalRef()+".getElement('"+this.getMenuElementId()+"').style.display = 'none'",10);
AjxCore.removeListener(window,DwtEvent.ONMOUSEUP,this.$hideListener);
AjxCore.removeListener(document.body,DwtEvent.ONMOUSEDOWN,this.$outsideMouseDownListener);
Dwt.clearHandler(this.getForm().getHtmlElement(),DwtEvent.ONMOUSEWHEEL);
DwtEventManager.removeListener(DwtEvent.ONMOUSEDOWN,this.$outsideMouseDownListener);
if(AjxEnv.isIE&&OSelect1_XFormItem._mouseWheelEventAttached){var b=this.getForm();
var a=b.getHtmlElement();
if(a.detachEvent){if(window.event!=null){window.event.cancelBubble=true
}a.detachEvent("onmousewheel",OSelect1_XFormItem._mouseWheelHideMenu);
OSelect1_XFormItem._mouseWheelEventAttached=false;
OSelect1_XFormItem._mouseWheelCurrentSelect=null
}}this.menuUp=false;
this.hideNote()
};
OSelect1_XFormItem.prototype.moveMenuY=function(h,a,f){var c=this.getMenuElement();
if(c==null){return
}var d=this.getBounds(c);
var e=d.height;
var j=d.top;
var g=parseInt(j)+parseInt(h);
var b=parseInt(g)+parseInt(e);
c.style.top=g+"px";
if(a){c.style.height=parseInt(c.style.height)-Math.abs(parseInt(h))+"px"
}else{if(f){c.style.height=parseInt(c.style.height)+Math.abs(parseInt(h))+"px"
}}};
OSelect1_XFormItem.prototype.showNote=function(a,b){var c=this.getNoteElement();
if(!c==null){return
}c.className=b?b:this.getNoteCssClass();
c.innerHTML=a;
c.style.display="block";
var d;
if(this.getInheritedProperty("editable")){d=this.getBounds(this.getDisplayElement())
}else{d=this.getBounds(this.getElement())
}c.style.left=d.left+"px";
if(this.menuDirection==OSelect1_XFormItem.MENU_DIR_UP){c.style.top=d.top+d.height+"px"
}else{c.style.top=d.top-OSelect1_XFormItem.NOTE_HEIGHT+"px"
}c.style.zIndex=1000000;
this.noteUp=true
};
OSelect1_XFormItem.prototype.hideNote=function(){if(!this.noteUp){return
}var a=this.getNoteElement();
if(!a==null){return
}a.innerHTML="";
a.style.display="none";
a.style.zIndex=Dwt.Z_HIDDEN;
this.noteUp=false
};
OSelect1_XFormItem.prototype.oMouseUp=function(c){c=c||window.event;
var e=false;
if(c){var d=DwtUiEvent.getTarget(c);
var a=this.getId()+"_display";
var b=this.getId()+"_arrow_button";
if(d.localName=="scrollbar"&&((d.parentNode&&d.parentNode.id=="___OSELECT_MENU___")||(d.id&&d.id=="___OSELECT_MENU___"))){e=true
}else{if(d.id&&d.id=="___OSELECT_MENU___"){e=true
}else{if(d.id&&d.id==a){e=true
}else{if(d.id&&d.id==b){e=true
}}}}}if(!e){this.hideMenu()
}return true
};
OSelect1_XFormItem.prototype.onOutsideMouseDown=function(e){e=e||window.event;
var g=false;
var f;
if(e){f=DwtUiEvent.getTarget(e);
var a=this.getId()+"_display";
var d=this.getId()+"_arrow_button";
if(f&&f.attributes&&f.attributes.length){var c=f.attributes.length;
for(var b=0;
b<c;
b++){if(f.attributes[b].name=="itemnum"){this.onChoiceClick(f.attributes[b].value,e);
g=true;
break
}}}if(!g){if(f.localName=="scrollbar"&&((f.parentNode&&f.parentNode.id=="___OSELECT_MENU___")||(f.id&&f.id=="___OSELECT_MENU___"))){g=true
}else{if(f.id&&f.id=="___OSELECT_MENU___"){g=true
}else{if(f.id&&f.id==a){g=true
}else{if(f.id&&f.id==d){g=true
}}}}}}if(!g){this.hideMenu()
}return true
};
OSelect1_XFormItem.prototype.getBounds=function(b,f){var e=new Object();
e.left=0;
e.top=0;
e.width=b.clientWidth?b.clientWidth:b.offsetWidth;
e.height=b.offsetHeight;
if(!f){f=AjxEnv.isIE?b.document.body:b.ownerDocument.body
}var c=(b.scrollLeft!==void 0);
var d=b;
while(d!=null&&d!=f){e.left+=d.offsetLeft;
e.top+=d.offsetTop;
var a=d.offsetParent;
while(c&&(d!=a)){e.left-=d.scrollLeft;
e.top-=d.scrollTop;
d=AjxEnv.isIE?a:d.parentNode
}d=a
}return e
};
OSelect1_XFormItem.prototype.onChoiceOver=function(b,a){if(this.__currentHiliteItem!=null){this.dehiliteChoice(this.__currentHiliteItem)
}this.hiliteChoice(b);
this.__currentHiliteItem=b
};
OSelect1_XFormItem.prototype.onChoiceOut=function(b,a){if(this.__currentHiliteItem!=null){this.dehiliteChoice(this.__currentHiliteItem)
}this.__currentHiliteItem=null
};
OSelect1_XFormItem.prototype.onChoiceClick=function(b,a){this.choiceSelected(b,false,a)
};
OSelect1_XFormItem.prototype.onChoiceDoubleClick=function(b,a){this.choiceSelected(b,true,a)
};
OSelect1_XFormItem.prototype.onValueTyped=function(a,b){var c=this.getChoiceValue(a);
if(window.console&&window.console.log){console.log("onValueTyped called value: "+c)
}this.setValue(c,false,b)
};
OSelect1_XFormItem.prototype.onKeyUp=function(b,a){if(a.keyCode==XFG.ARROW_UP){if(!this.menuUp){this.showMenu()
}this.hilitePreviousChoice(a);
this.isSelecting=true;
return
}if(a.keyCode==XFG.ARROW_DOWN){if(!this.menuUp){this.showMenu()
}this.hiliteNextChoice(a);
this.isSelecting=true;
return
}if(this.isSelecting&&this.menuUp&&a.keyCode==DwtKeyEvent.KEY_ENTER&&this.__currentHiliteItem!=null&&this.__currentHiliteItem!=undefined){var b=this.getNormalizedValues()[this.__currentHiliteItem];
if(b!=null&&b!=undefined){this.setValue(b,true,a);
this.hideMenu();
return
}}this.isSelecting=false;
var c=this.getKeyUpMethod();
if(c){c.call(this,b,a)
}};
OSelect1_XFormItem.prototype.getKeyUpMethod=function(){return this.cacheInheritedMethod("keyUp","$keyUp","elementValue, event")
};
OSelect1_XFormItem.prototype.choiceSelected=function(e,d,b){this.onChoiceOut();
this.hideMenu();
var c=this.getNormalizedValues()[e];
var a=this.getInheritedProperty("editable");
if(a){this.getDisplayElement().value=this.getNormalizedLabels()[e]
}this.setValue(c,d,b)
};
OSelect1_XFormItem.prototype.hiliteNextChoice=function(){var a=this.getNormalizedChoices();
if(!(a&&a.values&&a.values.length>0)){return
}if(this.__currentHiliteItem==null||this.__currentHiliteItem==undefined){this.hiliteChoice(0)
}else{this.dehiliteChoice(this.__currentHiliteItem);
if((this.__currentHiliteItem+1)<a.values.length){this.__currentHiliteItem++
}else{this.__currentHiliteItem=0
}this.hiliteChoice(this.__currentHiliteItem)
}};
OSelect1_XFormItem.prototype.hilitePreviousChoice=function(){var a=this.getNormalizedChoices();
if(!(a&&a.values&&a.values.length>0)){return
}if(this.__currentHiliteItem==null||this.__currentHiliteItem==undefined){this.hiliteChoice(0)
}else{this.dehiliteChoice(this.__currentHiliteItem);
if((this.__currentHiliteItem-1)>-1){this.__currentHiliteItem--
}else{this.__currentHiliteItem=a.values.length-1
}this.hiliteChoice(this.__currentHiliteItem)
}};
OSelect1_XFormItem.prototype.setValue=function(c,b,a){if(window.console&&window.console.log){console.log("setValue called + "+c)
}var d=this.getElementChangedMethod();
d.call(this,c,this.getInstanceValue(),a)
};
OSelect1_XFormItem.prototype.hiliteChoice=function(b){this.setChoiceCssClass(b,this.getChoiceSelectedCssClass());
if(this.getShowCheck()==true){var a=this.getChoiceElements(b);
if(a){a[0].innerHTML=this.getCheckHTML()
}}};
OSelect1_XFormItem.prototype.displayMouseOver=function(){if(!this._enabled){return
}};
OSelect1_XFormItem.prototype.displayMouseOut=function(){if(!this._enabled){return
}};
OSelect1_XFormItem.prototype.displayMouseDown=function(){if(!this._enabled){return
}};
OSelect1_XFormItem.prototype.dehiliteChoice=function(b){this.setChoiceCssClass(b,this.getChoiceCssClass());
if(this.getShowCheck()==true){var a=this.getChoiceElements(b);
if(a){a[0].innerHTML="&nbsp;"
}}};
OSelect1_XFormItem.prototype.clearAllHilites=function(){for(var a=0;
a<this._normalizedValues.length;
a++){this.dehiliteChoice(a)
}};
OSelect1_XFormItem.prototype.setChoiceCssClass=function(c,a){var b=this.getChoiceElements(c);
if(b){b.className=a
}};
OSelect1_XFormItem.prototype.getArrowElement=function(){return this.getForm().getElement(this.getId()+"_arrow_button")
};
OSelect1_XFormItem.prototype.getDisplayElement=function(){return this.getElement(this.getId()+"_display")
};
OSelect1_XFormItem.prototype.getItemNumFromEvent=function(a){var b=a.target||a.src;
while(b){if(b.id){var c=parseInt(b.id);
if(isNaN(c)){return -1
}return c
}b=b.parentNode
}return -1
};
OSelect1_XFormItem.prototype.getChoiceElements=function(b){if(b==null||b==-1){return null
}try{return this.getForm().getElement([this.getId(),"_choice_",b].join(""))
}catch(a){return null
}};
OSelect1_XFormItem.prototype.outputHTML=function(a){var g=this.getId();
var f=this.getFormGlobalRef()+".getItemById('"+g+"')";
var e;
var d=this.getInheritedProperty("editable");
if(d){var c=this.getInheritedProperty("inputSize");
e=["<input type=text id=",g,"_display class=",this.getDisplayCssClass()," value='VALUE' ",' onchange="',f,'.onValueTyped(this.value, event||window.event)"',' onmouseup="',f,'.showMenu(this)"',' onkeyup="',f,'.onKeyUp(this.value, event||window.event)"',"size=",c,">"].join("")
}if(this.getWidth()=="auto"&&!d){var b=this.getElement("tempDiv");
if(!b){b=this.createElement("tempDiv",null,"div","MENU CONTENTS")
}b.style.left="-1000px";
b.style.top="-1000px";
b.className=this.getMenuCssClass();
b.innerHTML=this.getChoicesHTML();
this._width=b.offsetWidth+20;
b.innerHTML=""
}if(d){a.append("<div id=",g,this.getCssString(),' onclick="',this.getFormGlobalRef(),".getItemById('",this.getId(),"').showMenu(this)\"",' onselectstart="return false"',">","<table ",this.getTableCssString(),">","<tr><td width=100%>",e,"</td>","<td>",this.getArrowButtonHTML(),"</td>","</tr>","</table>","</div>")
}else{a.append("<div id=",g,this.getCssString(),' onclick="',this.getFormGlobalRef(),".getItemById('",this.getId(),"').showMenu(this)\"",' onselectstart="return false"',"><table ",this.getTableCssString(),">","<tr><td width=100%><div id=",g,"_display class=",this.getDisplayCssClass(),">VALUE</div></td>","<td>",this.getArrowButtonHTML(),"</td>","</tr>","</table>","</div>")
}};
OSelect1_XFormItem.prototype.getArrowButtonHTML=function(){var a=this.getFormGlobalRef()+".getItemById('"+this.getId()+"')";
return AjxBuffer.concat("<div id=",this.getId(),"_arrow_button",' onmouseover="',a,'.displayMouseOver();"',' onmouseout="',a,'.displayMouseOut();"',' onmousedown="',a,'.displayMouseDown();"',">",AjxImg.getImageHtml("SelectPullDownArrow"),"</div>")
};
OSelect1_XFormItem.prototype.getTableCssClass=function(){return this.cssClass+"_table"
};
OSelect1_XFormItem.prototype.getDisplayCssClass=function(){return this.cssClass+"_display"
};
OSelect1_XFormItem.prototype.getMenuCssClass=function(){return this.cssClass+"_menu"
};
OSelect1_XFormItem.prototype.getChoiceTableCssClass=function(){return this.cssClass+"_choice_table"
};
OSelect1_XFormItem.prototype.getChoiceScrollTableCssClass=function(){return this.cssClass+"_choice_table_scrolled"
};
OSelect1_XFormItem.prototype.getChoiceCssClass=function(){return this.cssClass+"_choice"
};
OSelect1_XFormItem.prototype.getChoiceSelectedCssClass=function(){return this.cssClass+"_choice_selected"
};
OSelect1_XFormItem.prototype.getNoteCssClass=function(){return this.cssClass+"_note"
};
OSelect1_XFormItem.prototype.getErrorNoteCssClass=function(){return this.cssClass+"_error_note"
};
OSelect1_XFormItem.prototype.outputChoicesHTMLStart=function(a){a.append("<table cellspacing=0 cellpadding=0 id=",this.getId(),"_menu_table class=",this.getChoiceTableCssClass(),">")
};
OSelect1_XFormItem.prototype.outputChoicesHTMLEnd=function(a){a.append("</table>")
};
OSelect1_XFormItem.prototype.getChoiceHTML=function(e,d,b,a){var c=this.getFormGlobalRef()+".getItemById('"+this.getId()+"')";
return AjxBuffer.concat('<tr><td><div id="',this.getId(),"_choice_",e,'" ',"class=",a,' onmouseover="',c,".onChoiceOver(",e,', event||window.event)"',' onmouseout="',c,".onChoiceOut(",e,', event||window.event)"',' onclick="',c,".onChoiceClick(",e,', event||window.event)"'," itemnum = '",e,"'",">",AjxStringUtil.htmlEncode(b),"</div></td></tr>")
};
OSelect1_XFormItem.prototype.setElementEnabled=function(a){this._enabled=a;
var c=this.getForm().getElement(this.getId()).getElementsByTagName("table")[0];
if(a){this.getDisplayElement().className=this.getDisplayCssClass();
var b=this.getArrowElement();
if(b){AjxImg.setImage(b,"SelectPullDownArrow")
}this.getForm().getElement(this.getId()).className=this.cssClass;
c.className=this.getTableCssClass();
if(this.getInheritedProperty("editable")){this.getDisplayElement().disabled=false
}}else{this.getDisplayElement().className=this.getDisplayCssClass()+"_disabled";
var b=this.getArrowElement();
this.getForm().getElement(this.getId()).className=this.cssClass+"_disabled";
c.className=this.getTableCssClass()+"_disabled";
if(this.getInheritedProperty("editable")){this.getDisplayElement().disabled=true
}}};
OSelect_XFormItem=function(){};
XFormItemFactory.createItemType("_OSELECT_","oselect",OSelect_XFormItem,OSelect1_XFormItem);
OSelect_XFormItem.prototype.focusable=false;
OSelect_XFormItem.prototype.multiple=true;
OSelect_XFormItem.prototype.writeElementDiv=true;
OSelect_XFormItem.prototype.overflow="auto";
OSelect_XFormItem.prototype.cssStyle="border:2px inset gray;";
OSelect_XFormItem.prototype.showCheck=false;
OSelect_XFormItem.prototype.outputHTML=function(a){var b=this.getChoicesHTML();
a.append(b)
};
OSelect_XFormItem.prototype.choicesChangeLsnr=function(){this._choiceDisplayIsDirty=true;
delete this.$normalizedChoices;
var a=this.getElement();
if(a){a.innerHTML=this.getChoicesHTML()
}};
OSelect_XFormItem.prototype.outputChoicesHTMLStart=function(a){a.append("<table id=",this.getId(),"_menu_table width=100% cellspacing=2 cellpadding=0>")
};
OSelect_XFormItem.prototype.outputChoicesHTMLEnd=function(a){a.append("</table>")
};
OSelect_XFormItem.prototype.getMenuElementId=function(){return this.getId()
};
OSelect_XFormItem.prototype.updateElement=function(a){var c=this.getElement();
c.innerHTML=this.getChoicesHTML();
if(a==null){return
}if(this.getMultiple()){if(typeof a=="string"){a=a.split(",")
}for(var b=0;
b<a.length;
b++){var d=this.getChoiceNum(a[b]);
if(d!=-1){this.hiliteChoice(d)
}}}else{var d=this.getChoiceNum(a);
if(d!=-1){this.hiliteChoice(d)
}}this.updateEnabledDisabled()
};
OSelect_XFormItem.prototype.onChoiceOver=function(a){};
OSelect_XFormItem.prototype.onChoiceOut=function(a){};
OSelect_XFormItem.prototype.onChoiceClick=function(d,c){c=c||window.event;
var a=true;
var b=false;
if(this.getMultiple()){a=false;
if(c.shiftKey){b=true
}}this.choiceSelected(d,a,b,c)
};
OSelect_XFormItem.prototype.choiceSelected=function(e,d,a,b){if(a){this._selectionCursor=e;
if(this._selectionAnchor==null){this._selectionAnchor=e
}}else{this._selectionAnchor=e;
this._selectionCursor=e
}var c=this.getNormalizedValues()[e];
this.setValue(c,d,a,b)
};
OSelect_XFormItem.prototype.setValue=function(d,e,f,b){var o;
if(e){if(this.getMultiple()){if(d instanceof Array){o=d
}else{o=[d]
}}else{o=d
}}else{if(f){o=[];
var k=this.getNormalizedValues();
var c=this._selectionCursor;
var j=this._selectionAnchor-this._selectionCursor;
if(j<0){j=this._selectionCursor-this._selectionAnchor;
c=this._selectionAnchor
}for(var g=c;
g<=c+j;
++g){o.push(k[g])
}}else{var m=this.getInstanceValue();
if(typeof m=="string"){o=m
}else{if(typeof m=="object"||m instanceof Array){o=[];
for(var l in m){o[l]=m[l]
}}}if(o){if(typeof o=="string"){if(o==""){o=[]
}else{o=o.split(",")
}}}else{o=new Array()
}var n=false;
var g;
for(g=0;
g<o.length;
g++){if(o[g]==d){n=true;
break
}}if(n){o.splice(g,1)
}else{o.push(d)
}}if(!o||(o.length==1&&o[0]=="")){o=[]
}var h=this.getModelItem();
if(h&&h.getOutputType){if(h.getOutputType()==_STRING_){o=o.join(h.getItemDelimiter())
}}else{o=o.join(",")
}}this.getForm().itemChanged(this,o,b)
};
OSelect_XFormItem.prototype.setElementEnabled=function(b){var f=this.getNormalizedChoices();
if(!f){return
}var a=f.values;
if(!a){return
}var d=a.length;
for(var c=0;
c<d;
c++){var e=this.getElement(this.getId()+"_choiceitem_"+c);
if(e){if(b){e.className=this.getChoiceCssClass();
e.disabled=false
}else{e.className=this.getChoiceCssClass()+"_disabled";
e.disabled=true
}}}};
OSelect_Check_XFormItem=function(){};
XFormItemFactory.createItemType("_OSELECT_CHECK_","oselect_check",OSelect_Check_XFormItem,OSelect_XFormItem);
OSelect_Check_XFormItem.prototype.cssClass="oselect_check";
OSelect_Check_XFormItem.prototype.getChoiceHTML=function(e,d,b,a){var c=this.getFormGlobalRef()+".getItemById('"+this.getId()+"')";
var f=this.getId();
return AjxBuffer.concat("<tr><td class=",a,(this.getIsEnabled())?(' onmouseover="'+c+".onChoiceOver("+e+', event||window.event)"'):"",(this.getIsEnabled())?(' onmouseout="'+c+".onChoiceOut("+e+', event||window.event)"'):"",(this.getIsEnabled())?(' onclick="'+c+".onChoiceClick("+e+', event||window.event)"'):"",(this.getIsEnabled())?(' ondblclick="'+c+".onChoiceDoubleClick("+e+', event||window.event)"'):"",">","<table cellspacing=0 cellpadding=0><tr><td><input type=checkbox id='",f,"_choiceitem_",e,"'></td><td>",(!this.getIsEnabled())?('<font color="#808080">'):"",AjxStringUtil.htmlEncode(b),(!this.getIsEnabled())?("</font>"):"","</td></tr></table></td></tr>")
};
OSelect_Check_XFormItem.prototype.hiliteChoice=function(d){var c=this.getChoiceElements(d);
if(c){var b=c[0];
b.className=this.getChoiceSelectedCssClass();
var a=b.getElementsByTagName("input");
if(a){a[0].checked=true
}}};
OSelect_Check_XFormItem.prototype.dehiliteChoice=function(d){var c=this.getChoiceElements(d);
if(c){var b=c[0];
b.className=this.getChoiceCssClass();
var a=b.getElementsByTagName("input");
if(a){a[0].checked=false
}}};
OSelect_Check_XFormItem.prototype.getChoiceElements=function(b){if(b==null||b==-1){return null
}try{return this.getForm().getElement(this.getId()+"_menu_table").rows[b].getElementsByTagName("td")
}catch(a){return null
}};
OSelect_Check_XFormItem.prototype.selectAll=function(d){var a=[];
if(this.$normalizedChoices&&this.$normalizedChoices.values){var e=this.$normalizedChoices.values;
var c=e.length;
for(var b=0;
b<c;
b++){a.push(e[b])
}}this.setValue(a,true,false,d)
};
OSelect_Check_XFormItem.prototype.deselectAll=function(a){this.getForm().itemChanged(this,[],a)
};
OSelect_Check_XFormItem.prototype.updateElement=function(a){var c=this.getElement();
c.innerHTML=this.getChoicesHTML();
this.clearAllHilites();
if(a){if(this.getMultiple()){if(typeof a=="string"){a=a.split(",")
}for(var b=0;
b<a.length;
b++){var d=this.getChoiceNum(a[b]);
if(d!=-1){this.hiliteChoice(d)
}}}else{var d=this.getChoiceNum(a);
if(d!=-1){this.hiliteChoice(d)
}}}this.updateEnabledDisabled()
};
OSelect_Check_XFormItem.prototype.clearAllHilites=function(){var c=this.getNormalizedChoices();
var b;
if(c.values){b=c.values.length;
for(var a=0;
a<b;
a++){this.dehiliteChoice(a)
}}};
OSelect_DblCheck_XFormItem=function(){};
XFormItemFactory.createItemType("_OSELECT_DBL_CHECK_","oselect_dbl_check",OSelect_DblCheck_XFormItem,OSelect_Check_XFormItem);
OSelect_DblCheck_XFormItem.prototype.onSubChoiceOver=function(a){};
OSelect_DblCheck_XFormItem.prototype.onSubChoiceOut=function(a){};
OSelect_DblCheck_XFormItem.prototype.onSubChoiceClick=function(d,c){c=c||window.event;
var a=true;
var b=false;
if(this.getMultiple()){a=false;
if(c.shiftKey){b=true
}}this.subChoiceSelected(d,a,b,c)
};
OSelect_DblCheck_XFormItem.prototype.subChoiceSelected=function(e,d,a,b){if(a){this._subSelectionCursor=e;
if(this._subSelectionAnchor==null){this._subSselectionAnchor=e
}}else{this._subSelectionAnchor=e;
this._subSelectionCursor=e
}var c=this.getNormalizedValues()[e];
this.setSubValue(c,d,a,b)
};
OSelect_DblCheck_XFormItem.prototype.setSubValue=function(d,e,f,b){var o;
if(e){if(this.getMultiple()){if(d instanceof Array){o=d
}else{o=[d]
}}else{o=d
}}else{if(f){o=[];
var k=this.getNormalizedValues();
var c=this._subSelectionCursor;
var j=this._subSelectionAnchor-this._subSelectionCursor;
if(j<0){j=this._subSelectionCursor-this._subSelectionAnchor;
c=this._subSelectionAnchor
}for(var g=c;
g<=c+j;
++g){o.push(k[g])
}}else{var m=this.getInstanceValue(this.getInheritedProperty("subRef"));
if(typeof m=="string"){o=new String(m)
}else{if(typeof m=="object"||m instanceof Array){o=[];
for(var l in m){o[l]=m[l]
}}}if(o){if(typeof o=="string"){if(o==""){o=[]
}else{o=o.split(",")
}}}else{o=new Array()
}var n=false;
for(var g=0;
g<o.length;
g++){if(o[g]==d){n=true;
break
}}if(n){o.splice(g,1)
}else{o.push(d)
}}if(!o||(o.length==1&&o[0]=="")){o=[]
}var h=this.getSubModelItem();
if(h&&h.getOutputType){if(h.getOutputType()==_STRING_){o=o.join(h.getItemDelimiter())
}}else{o=o.join(",")
}}this.getForm().subItemChanged(this,o,b)
};
OSelect_DblCheck_XFormItem.prototype.getSubLabel=function(){return this.getInheritedProperty("subLabel")
};
OSelect_DblCheck_XFormItem.prototype.getChoiceHTML=function(e,d,b,a){var c=this.getFormGlobalRef()+".getItemById('"+this.getId()+"')";
var f=this.getId();
return AjxBuffer.concat("<tr><td class=",a,' onmouseover="',c,".onChoiceOver(",e,', event||window.event)"',' onmouseout="',c,".onChoiceOut(",e,', event||window.event)"',' onclick="',c,".onChoiceClick(",e,', event||window.event)"',' ondblclick="',c,".onChoiceDoubleClick(",e,', event||window.event)">',"<table cellspacing=0 cellpadding=0><tr><td><input type=checkbox id='",f,"_choiceitem_",e,"'></td><td>",AjxStringUtil.htmlEncode(b),"</td></tr></table>","</td><td class=",a,' onmouseover="',c,".onSubChoiceOver(",e,', event||window.event)"',' onmouseout="',c,".onSubChoiceOut(",e,', event||window.event)"',' onclick="',c,".onSubChoiceClick(",e,', event||window.event)"',' ondblclick="',c,".onSubChoiceDoubleClick(",e,'.event||window.event)">',"<table cellspacing=0 cellpadding=0><tr><td><input type=checkbox id='",f,"_subchoiceitem_",e,"'></td><td>",AjxStringUtil.htmlEncode(this.getSubLabel()),"</td></tr></table>","</td></tr>")
};
OSelect_DblCheck_XFormItem.prototype.hiliteChoice=function(d){var c=this.getChoiceElements(d);
if(c){var b=c[0];
b.className=this.getChoiceSelectedCssClass();
var a=b.getElementsByTagName("input");
if(a){a[0].checked=true;
this.enableSubChoice(d)
}}};
OSelect_DblCheck_XFormItem.prototype.dehiliteChoice=function(d){var c=this.getChoiceElements(d);
if(c){var b=c[0];
b.className=this.getChoiceCssClass();
var a=b.getElementsByTagName("input");
if(a){a[0].checked=false;
this.dehiliteSubChoice(d);
this.disableSubChoice(d)
}}};
OSelect_DblCheck_XFormItem.prototype.hiliteSubChoice=function(d){var c=this.getChoiceElements(d);
if(c){var b=c[3];
b.className=this.getChoiceSelectedCssClass();
var a=b.getElementsByTagName("input");
if(a){a[0].checked=true
}}};
OSelect_DblCheck_XFormItem.prototype.dehiliteSubChoice=function(d){var c=this.getChoiceElements(d);
if(c){var b=c[3];
b.className=this.getChoiceCssClass();
var a=b.getElementsByTagName("input");
if(a){a[0].checked=false
}}};
OSelect_DblCheck_XFormItem.prototype.disableSubChoice=function(d){var c=this.getChoiceElements(d);
if(c){var b=c[3];
b.className=this.getChoiceCssClass()+"_disabled";
var a=b.getElementsByTagName("input");
if(a){a[0].disabled=true
}}};
OSelect_DblCheck_XFormItem.prototype.enableSubChoice=function(d){var c=this.getChoiceElements(d);
if(c){var b=c[3];
b.className=this.getChoiceCssClass();
var a=b.getElementsByTagName("input");
if(a){a[0].disabled=false
}}};
OSelect_DblCheck_XFormItem.prototype.updateElement=function(){var d=this.getElement();
d.innerHTML=this.getChoicesHTML();
var b=this.getInstanceValue();
this.clearAllHilites();
if(b){if(this.getMultiple()){if(typeof b=="string"){b=b.split(",")
}for(var c=0;
c<b.length;
c++){var e=this.getChoiceNum(b[c]);
if(e!=-1){this.hiliteChoice(e)
}}}else{var e=this.getChoiceNum(b);
if(e!=-1){this.hiliteChoice(e)
}}}var a=this.getInstanceValue(this.getInheritedProperty("subRef"));
if(a){if(this.getMultiple()){if(typeof a=="string"){a=a.split(",")
}for(var c=0;
c<a.length;
c++){var e=this.getChoiceNum(a[c]);
if(e!=-1){this.hiliteSubChoice(e)
}}}else{var e=this.getChoiceNum(b);
if(e!=-1){this.hiliteSubChoice(e)
}}}this.updateEnabledDisabled()
};
OSelect_DblCheck_XFormItem.prototype.onSubChoiceDoubleClick=function(b,a){this.subChoiceSelected(b,true,a)
};
OSelect_DblCheck_XFormItem.prototype.setElementEnabled=function(b){var g=this.getNormalizedChoices();
if(!g){return
}var a=g.values;
if(!a){return
}var d=a.length;
for(var c=0;
c<d;
c++){var f=this.getElement(this.getId()+"_choiceitem_"+c);
var e=this.getElement(this.getId()+"_subchoiceitem_"+c);
if(f&&e){if(b){f.className=this.getChoiceCssClass();
f.disabled=false
}else{f.className=this.getChoiceCssClass()+"_disabled";
f.disabled=true;
e.className=this.getChoiceCssClass()+"_disabled";
e.disabled=true
}}}};
OSelect_DblCheck_XFormItem.prototype.deselectAll=function(a){this.getForm().subItemChanged(this,[],a);
this.getForm().itemChanged(this,[],a)
}
}if(AjxPackage.define("ajax.dwt.xforms.ButtonGrid")){ButtonGrid=function(a){XFG.assignUniqueId(this,"__BUTTON_GRID__");
for(var b in a){this[b]=a[b]
}if(this.onChange){this.setOnChange(this.onChange)
}this.value=[]
};
var BGP=ButtonGrid.prototype;
BGP.choices=null;
BGP.numCols=4;
BGP.cssClass="xform_button_grid_medium";
BGP.onChange=null;
BGP.multiple=true;
BGP.addBracketingCells=false;
BGP.setOnChange=function(a){if(a&&typeof a=="string"){a=new Function("value, event",a)
}this.onChange=a
};
BGP.getValue=function(){return this.value
};
BGP.setValue=function(a){if(a==null){a=[]
}if(typeof a=="string"){a=a.split(",")
}this.value=a;
this.showValue()
};
BGP.showValue=function(){var e=this.value;
if(e==null){e=""
}if(typeof e=="string"){e=e.split(",")
}var d="{|[",f="]|}";
e=d+e.join(f+d)+f;
var g=this.choices;
for(var c=0;
c<g.length;
c++){var b=XFG.getEl(this.getButtonId(c));
var a=(e.indexOf(d+g[c].value+f)>-1);
if(a){XFG.showSelected(b)
}else{XFG.hideSelected(b)
}}};
BGP.toggleValue=function(b,a){if(this.multiple){if(this.valueIsSelected(b)){this.deselectValue(b,a)
}else{this.selectValue(b,a)
}}else{this.value=b
}return this.value
};
BGP.valueIsSelected=function(b){for(var a=0;
a<this.value.length;
a++){if(this.value[a]==b){return true
}}};
BGP.selectValue=function(b,a){if(!this.valueIsSelected(b)){this.value.push(b)
}if(a){XFG.showSelected(a)
}};
BGP.deselectValue=function(c,b){if(this.valueIsSelected(c)){for(var a=0;
a<this.value.length;
a++){if(this.value[a]==c){this.value=this.value.slice(0,a).concat(this.value.slice(a+1,this.value.length))
}}}if(b){XFG.hideSelected(b)
}};
BGP.getButtonId=function(a){return this.__id+"_button_"+a
};
BGP.onButtonClick=function(d,a,b){var c=this.toggleValue(d,a);
if(this.onChange){this.onChange(c,b)
}};
BGP.getHTML=function(){if(this.choices==null){return(this.__HTMLOutput=null)
}var a=new AjxBuffer();
var e=this.cssClass+"_button";
a.append('<table class="',this.cssClass,'_table">');
var d=0;
var g=Math.ceil(this.choices.length/this.numCols);
for(var f=0;
f<g;
f++){a.append("<tr>\r");
if(this.addBracketingCells){a.append("\t<td width=50%><div class=",this.cssClass+"_start></div></td>")
}for(var h=0;
h<this.numCols;
h++){var b=this.choices[d];
if(typeof b=="string"){b=this.choices[d]={value:b,label:b}
}a.append("<td class=",this.cssClass+"_td ><div id=",this.getButtonId(d)," class=",e," onclick=\"XFG.cacheGet('",this.__id,"').onButtonClick('",b.value,"',this,event);\">",b.label,"</div></td>");
d++;
if(d>=this.choices.length){break
}}if(this.addBracketingCells){a.append("<td width=50%><div class=",this.cssClass+"_end></div></td>")
}a.append("</tr>")
}a.append("</table>");
this.__HTMLOutput=a.toString();
return this.__HTMLOutput
};
BGP.insertIntoXForm=function(c,b,a){a.innerHTML=this.getHTML()
};
BGP.updateChoicesHTML=function(f){var b=0;
for(var d=0;
d<numRows;
d++){for(var e=0;
e<this.numCols;
e++){var a=document.getElementById(this.getButtonId(b));
if(a){a.innerHTML=f[b].label
}b++;
if(b>=f.length){break
}}}};
BGP.updateInXForm=function(d,c,e,b){var a=(e instanceof Array?e.join(","):e);
if(!d.forceUpdate&&this.__lastDisplayValue==a){return
}this.setValue(e);
this.__lastDisplayValue=a
}
}if(AjxPackage.define("ajax.dwt.xforms.DwtXFormDialog")){DwtXFormDialog=function(k,b,j,e,h,a,g,f,c,d){if(arguments.length==0){return
}e=e||"DwtXFormDialog";
DwtDialog.call(this,j,e,h,a,g,f,c,d);
this._xform=new XForm(k,new XModel(b),null,this);
this._xform.addListener(DwtEvent.XFORMS_FORM_DIRTY_CHANGE,new AjxListener(this,this._handleXFormDirty));
this.setView(this._xform);
if(this._button[DwtDialog.OK_BUTTON]){this.setButtonListener(DwtDialog.OK_BUTTON,new AjxListener(this,this._handleOkButton))
}if(this._button[DwtDialog.CANCEL_BUTTON]){this.setButtonListener(DwtDialog.CANCEL_BUTTON,new AjxListener(this,this._handleCancelButton))
}if(this._button[DwtDialog.YES_BUTTON]){this.setButtonListener(DwtDialog.YES_BUTTON,new AjxListener(this,this._handleYesButton))
}if(this._button[DwtDialog.NO_BUTTON]){this.setButtonListener(DwtDialog.NO_BUTTON,new AjxListener(this,this._handleNoButton))
}};
DwtXFormDialog.prototype=new DwtDialog;
DwtXFormDialog.prototype.constructor=DwtXFormDialog;
DwtXFormDialog.prototype._xform;
DwtXFormDialog.prototype._xformInitialized=false;
DwtXFormDialog.prototype.setInstance=function(a){this._xform.setInstance(a)
};
DwtXFormDialog.prototype.getInstance=function(){return this._xform.getInstance()
};
DwtXFormDialog.prototype.popup=function(a){this._initDialog();
this._xform.setIsDirty(true);
this._xform.refresh();
if(this._button[DwtDialog.OK_BUTTON]){this.setButtonEnabled(DwtDialog.OK_BUTTON,false)
}if(this._button[DwtDialog.YES_BUTTON]){this.setButtonEnabled(DwtDialog.YES_BUTTON,false)
}DwtDialog.prototype.popup.call(this,a)
};
DwtXFormDialog.prototype._initDialog=function(){if(!this._xformInitialized){this._xform.draw();
this._xformInitialized=true
}};
DwtXFormDialog.prototype._handleXFormDirty=function(a){if(this._button[DwtDialog.OK_BUTTON]){this.setButtonEnabled(DwtDialog.OK_BUTTON,true)
}if(this._button[DwtDialog.YES_BUTTON]){this.setButtonEnabled(DwtDialog.YES_BUTTON,true)
}};
DwtXFormDialog.prototype._handleOkButton=function(a){this.popdown();
this.setInstance(null)
};
DwtXFormDialog.prototype._handleCancelButton=DwtXFormDialog.prototype._handleOkButton;
DwtXFormDialog.prototype._handleYesButton=DwtXFormDialog.prototype._handleOkButton;
DwtXFormDialog.prototype._handleNoButton=DwtXFormDialog.prototype._handleOkButton
}if(AjxPackage.define("ajax.dwt.xforms.DynSelect_XFormItem")){DynSelect_XFormItem=function(){};
XFormItemFactory.createItemType("_DYNSELECT_","dynselect",DynSelect_XFormItem,OSelect1_XFormItem);
DynSelect_XFormItem.prototype.autoCompleteEnabled=false;
DynSelect_XFormItem.prototype.dataFetcherClass=null;
DynSelect_XFormItem.prototype.dataFetcherMethod=null;
DynSelect_XFormItem.prototype.dataFetcherObject=null;
DynSelect_XFormItem.prototype.dataFetcherTypes=null;
DynSelect_XFormItem.prototype.dataFetcherAttrs=null;
DynSelect_XFormItem.prototype.dataFetcherDomain=null;
DynSelect_XFormItem.prototype.entryKeyMethod=null;
DynSelect_XFormItem.prototype.bmolsnr=true;
DynSelect_XFormItem.prototype.emptyText="";
DynSelect_XFormItem.prototype.cssClass="dynselect";
DynSelect_XFormItem.prototype.edited=false;
DynSelect_XFormItem.prototype.focusable=true;
DynSelect_XFormItem.LOAD_PAUSE=750;
DynSelect_XFormItem.prototype.initFormItem=function(){var d=this.getChoices();
if(d instanceof Array){d=new XFormChoices(d,XFormChoices.SIMPLE_LIST)
}if(!d){d=new XFormChoices([],XFormChoices.OBJECT_LIST,"name","name")
}this.setChoices(d);
var c=new AjxListener(this,this.choicesChangeLsnr);
this.choices.addListener(DwtEvent.XFORMS_CHOICES_CHANGED,c);
this.dataFetcherClass=this.getInheritedProperty("dataFetcherClass");
this.dataFetcherMethod=this.getInheritedProperty("dataFetcherMethod");
this.dataFetcherTypes=this.getInheritedProperty("dataFetcherTypes");
this.dataFetcherAttrs=this.getInheritedProperty("dataFetcherAttrs");
this.dataFetcherDomain=this.getInheritedProperty("dataFetcherDomain");
this.autoCompleteEnabled=this.getInheritedProperty("autoCompleteEnabled");
this.dataFetcherObject=null;
if(!this.dataFetcherMethod){this.dataFetcherMethod=DynSelect_XFormItem.fetchDataDefault;
this.dataFetcherObject=this
}var a=XFormItem.getParentTabGroupId(this);
this.getForm().indexItem(this,this.getId()+"_display");
if(a){var b=this.getForm().getItemById(a);
if(b){b.tabIdOrder.push(this.getId()+"_display")
}}};
DynSelect_XFormItem.prototype.changeChoicesCallback=function(c,a,b){var d=this.choices?this.choices:this.getChoices();
if(!d){return
}d.setChoices(c);
d.dirtyChoices();
if(AjxUtil.isEmpty(c)){this.hideMenu()
}else{if(!this.menuUp){this.showMenu()
}}};
DynSelect_XFormItem.fetchDataDefault=function(a){var b=a.callback;
b.run(this.choices.getChoiceObject(),false,null)
};
DynSelect_XFormItem.prototype.onKeyUp=function(f,d){var g=new Date().getTime();
this._lastTypeTime=g;
if(window.console&&window.console.log){window.console.log("onKeyUp "+f+" @ "+g)
}this.edited=true;
this.hideNote();
if(d.keyCode==XFG.ARROW_UP){if(!this.menuUp){this.showMenu()
}this.hilitePreviousChoice(d);
this.isSelecting=true;
return
}if(d.keyCode==XFG.ARROW_DOWN){if(!this.menuUp){this.showMenu()
}this.hiliteNextChoice(d);
this.isSelecting=true;
return
}if(this.isSelecting&&this.menuUp&&d.keyCode==DwtKeyEvent.KEY_ENTER&&this.__currentHiliteItem!=null&&this.__currentHiliteItem!=undefined){var f=this.getNormalizedValues()[this.__currentHiliteItem];
if(f!=null&&f!=undefined){this.setValue(f,true,d);
this.hideMenu();
this.processEntryKey();
return
}}else{if(this.menuUp&&d.keyCode==DwtKeyEvent.KEY_ENTER){this.hideMenu();
this.processEntryKey();
return
}}this.isSelecting=false;
var h=this.getKeyUpMethod();
if(h){h.call(this,f,d)
}else{var b=DwtKeyEvent.getCharCode(d);
if(!AjxUtil.isEmpty(this.keyPressDelayHdlr)){AjxTimedAction.cancelAction(this.keyPressDelayHdlr);
this.keyPressDelayHdlr=null
}var c=this.getForm();
var a=new DwtKeyEvent();
a.setFromDhtmlEvent(d);
if(b==DwtKeyEvent.KEY_TAB){DwtUiEvent.setBehaviour(d,true,false);
return false
}else{if(!(d.keyCode==XFG.ARROW_RIGHT||d.keyCode==XFG.ARROW_LEFT||d.keyCode==DwtKeyEvent.KEY_ESCAPE)){var e=new AjxTimedAction(this,this.handleKeyPressDelay,[a,f,g]);
this.keyPressDelayHdlr=AjxTimedAction.scheduleAction(e,DynSelect_XFormItem.LOAD_PAUSE)
}}}};
DynSelect_XFormItem.prototype.onKeyDown=function(d,c){var b=DwtKeyEvent.getCharCode(c);
if(b==DwtKeyEvent.KEY_ENTER){DwtUiEvent.setBehaviour(c,true,true);
return false
}else{if(b==DwtKeyEvent.KEY_TAB){DwtUiEvent.setBehaviour(c,true,false);
if(this.menuUp){this.hideMenu()
}var a=XFormItem.getParentTabGroupId(this);
if(c.shiftKey){this.getForm().focusPrevious(this.getId()+"_display",a)
}else{this.getForm().focusNext(this.getId()+"_display",a)
}return true
}}return true
};
DynSelect_XFormItem.prototype.resetChoices=function(){var a=this.getChoices();
a.setChoices([]);
a.dirtyChoices();
if(!this.dataFetcherObject&&this.dataFetcherClass!=null&&this.dataFetcherMethod!=null){this.dataFetcherObject=new this.dataFetcherClass(this.getForm().getController())
}else{if(this.getInheritedProperty("dataFetcherInstance")){this.dataFetcherObject=this.getInstance()
}}};
DynSelect_XFormItem.prototype.handleKeyPressDelay=function(c,d,g){if(c.keyCode==DwtKeyEvent.KEY_ENTER){this.processEntryKey();
return
}if(this.autoCompleteEnabled){var a=new Date().getTime();
if(window.console&&window.console.log){window.console.log("handleKeyPressDelay "+d+" @ "+a)
}this.keyPressDelayHdlr=null;
var f=this.preProcessInput(d);
if(g==this._lastTypeTime){this.getForm().itemChanged(this,f,c)
}else{if(window.console&&window.console.log){window.console.log("typing faster than retreiving data")
}return
}if(!this.dataFetcherObject&&this.dataFetcherClass!=null&&this.dataFetcherMethod!=null){this.dataFetcherObject=new this.dataFetcherClass(this.getForm().getController())
}else{if(this.getInheritedProperty("dataFetcherInstance")){this.dataFetcherObject=this.getInstance()
}}if(!this.dataFetcherObject){return
}var h=new AjxCallback(this,this.changeChoicesCallback);
var b=this.getInheritedProperty("searchByProcessedValue");
var e={event:c,callback:h,extraLdapQuery:null,form:this.getForm(),types:(this.dataFetcherTypes?this.dataFetcherTypes:null),attrs:(this.dataFetcherAttrs?this.dataFetcherAttrs:null),domain:(this.dataFetcherDomain?this.dataFetcherDomain:null)};
if(b&&!AjxUtil.isEmpty(f)){e.value=f;
this.dataFetcherMethod.call(this.dataFetcherObject,e)
}else{if(!AjxUtil.isEmpty(d)){e.value=d;
this.dataFetcherMethod.call(this.dataFetcherObject,e)
}}}};
DynSelect_XFormItem.prototype.outputHTML=function(a){var h=this.getId();
var d=this.getFormGlobalRef()+".getItemById('"+h+"')";
var c;
var b=this.getInheritedProperty("inputSize");
var f=this.getInheritedProperty("inputWidth");
var e=" onkeypress";
if(!AjxEnv.isFirefox){e=" onkeydown"
}var g=f?"style='width:"+f+"'":(b?"size="+b:"");
c=["<input type=text id=",h,"_display class=",this.getDisplayCssClass()," value='VALUE' ",' onchange="',d,'.onValueTyped(this.value, event||window.event)"',e+'="',d,'.onKeyDown(this.value, event||window.event)"',' onkeyup="',d,'.onKeyUp(this.value, event||window.event)"',g,this.getMouseoutHandlerHTML(),">"].join("");
a.append("<div id=",h,this.getCssString(),' onclick="',this.getFormGlobalRef(),".getItemById('",this.getId(),"').onClick(event)\"",' onselectstart="return false"',">","<table ",this.getTableCssString()," cellspacing='0'>","<tr><td width=100%>",c,"</td>","</tr>","</table>","</div>");
this.edited=false
};
DynSelect_XFormItem.prototype.getMouseoutHandlerHTML=function(){var d=this.getFormGlobalRef(),c=this.getId();
var a="";
var b=this.getInheritedProperty("onMouseout");
a=AjxBuffer.concat(' onmouseout="',b||"XFormItem.prototype.hideInputTooltip",".call(",this.getGlobalRef(),', event );" ');
return AjxBuffer.concat(a)
};
DynSelect_XFormItem.prototype.onClick=function(b){var c=this.getNormalizedChoices();
if(!this.edited&&this.getInheritedProperty("editable")){this.showInputTooltip(b)
}else{if(c&&c.values&&c.values.length&&!(c.values[0] instanceof XFormChoices)){this.showMenu()
}}if(AjxUtil.isEmpty(this.getInstanceValue())&&this._enabled){var a=this.getDisplayElement();
a.value="";
a.className=this.getDisplayCssClass()
}};
DynSelect_XFormItem.prototype.getArrowElement=function(){return null
};
DynSelect_XFormItem.prototype.preProcessInput=function(b){var a=this.getPreProcessMethod();
var c=b;
if(a){c=a.call(this,b,this.getForm())
}return c
};
DynSelect_XFormItem.prototype.getPreProcessMethod=function(){return this.cacheInheritedMethod("inputPreProcessor","inputPreProcessor","value, form")
};
DynSelect_XFormItem.prototype.updateElement=function(d){if(this.getMultiple()&&d!=null&&d.indexOf(",")>-1){d=d.split(",");
for(var b=0;
b<d.length;
b++){d[b]=this.getChoiceLabel(d[b])
}}else{d=this.getChoiceLabel(d)
}var c=this.getDisplayElement();
if(c){if(AjxUtil.isEmpty(d)&&this._enabled&&!this.edited){var a=this.getInheritedProperty("emptyText");
if(!AjxUtil.isEmpty(a)){d=a;
c.className=this.getDisplayCssClass()+"_empty"
}}else{if(this._enabled){c.className=this.getDisplayCssClass()
}}if(window.console&&window.console.log){console.log("updating element with value: "+d+" over "+c.value)
}c.value=d
}if(this.autoCompleteEnabled){if(AjxUtil.isEmpty(d)){if(!this.dataFetcherObject&&this.dataFetcherClass!=null&&this.dataFetcherMethod!=null){this.dataFetcherObject=new this.dataFetcherClass(this.getForm().getController())
}if(!this.dataFetcherObject){return
}}}};
DynSelect_XFormItem.prototype.setElementEnabled=function(a){this._enabled=a;
var b=this.getForm().getElement(this.getId());
if(!b||!b.getElementsByTagName||!b.getElementsByTagName("table")[0]){return
}var c=b.getElementsByTagName("table")[0];
if(a){if(AjxUtil.isEmpty(this.getInstanceValue())&&!AjxUtil.isEmpty(this.getInheritedProperty("emptyText"))){this.getDisplayElement().className=this.getDisplayCssClass()+"_empty";
this.getDisplayElement().value=this.getInheritedProperty("emptyText")
}else{this.getDisplayElement().className=this.getDisplayCssClass()
}this.getForm().getElement(this.getId()).className=this.cssClass;
c.className=this.getTableCssClass();
this.getDisplayElement().disabled=false
}else{this.getDisplayElement().className=this.getDisplayCssClass()+"_disabled";
var b=this.getArrowElement();
if(b){AjxImg.setImage(b,"SelectPullDownArrowDis")
}this.getForm().getElement(this.getId()).className=this.cssClass+"_disabled";
c.className=this.getTableCssClass()+"_disabled";
this.getDisplayElement().disabled=true
}};
DynSelect_XFormItem.prototype.processEntryKey=function(){var b=this.getInstanceValue();
var a=this.getInheritedProperty("entryKeyMethod");
if(a instanceof AjxCallback){a.run(this,b)
}}
}};
