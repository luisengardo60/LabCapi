
/*
* Zimbra Collaboration Suite Web Client
* Copyright (C) 2004-2017 Synacor, Inc.
* https://www.zimbra.com/license
*/
if(AjxPackage.define("Admin")){if(AjxPackage.define("zimbraAdmin.common.ZaUtil")){ZaUtil=function(){};
ZaUtil.HELP_URL="help/admin/html/";
ZaUtil.getLifeTimeInSeconds=function(c){if(AjxUtil.isLifeTime(c)){var b=c.length;
var f=c.substr(0,b-1);
var e=c.substr(b-1,b);
if(e=="s"){if(c[b-2]=="m"){f=c.substr(0,b-2);
return f/1000
}return f
}else{if(e=="m"){return f*60
}else{if(e=="h"){return f*3600
}else{if(e=="d"){return f*216000
}}}}}else{throw (new AjxException(AjxMessageFormat.format(ZaMsg.UTIL_INVALID_LIFETIME,[c])))
}};
ZaUtil.findValueInObjArrByPropertyName=function(b,e,d){if(!d){d="name"
}if(b!=null){for(var c=0;
c<b.length;
c++){if(b[c]&&b[c][d]==e){return c
}}}return -1
};
ZaUtil.getListItemLabel=function(b,d){if(b!=null){for(var c=0;
c<b.length;
c++){if(b[c]["value"]==d){return b[c]["label"]
}}}return null
};
ZaUtil.findValueInArray=function(b,d){if(b!=null){for(var c=0;
c<b.length;
c++){if(b[c]==d){return c
}}}return -1
};
ZaUtil.getUniqueArrayElements=function(b){var d=[];
for(var c=0;
c<b.length;
c++){if(ZaUtil.findValueInArray(d,b[c])<0){d.push(b[c])
}}return d
};
ZaUtil.getAdminServerDateTime=function(b,d){var c=AjxDateUtil.getServerDateTime(b,d);
return c.substring(0,8)+c.substring(9)
};
ZaUtil.compareObjects=function(c,b){if(c.id==b.id){return 0
}if(c.name>b.name){return 1
}if(c.name<b.name){return -1
}};
ZaUtil.deepCloneObject=function(f,e){var c={};
if(f){for(var d in f){if(e&&e.length>0){if(ZaUtil.findValueInArray(e,d)>=0){continue
}}var b=f[d];
if(b!=null&&(b instanceof Array||typeof(b)=="object")){c[d]=ZaUtil.deepCloneObject(b)
}else{c[d]=b
}}}else{return null
}return c
};
ZaUtil.cloneArray=function(d){var c=[];
for(var b=0;
b<d.length;
b++){c.push(d[b])
}return c
};
ZaUtil.join=function(e,d,b){if(e==null){return""
}var f=[];
for(var c=0;
c<e.length;
c++){f.push(e[c][d])
}return f.join(b)
};
ZaUtil.getItemUUid=function(){var b="ZaItem";
return Dwt.getNextId(b)
}
}if(AjxPackage.define("zimbraAdmin.common.ZaEvent")){ZaEvent=function(b){this.type=b;
this.event=null;
this.source=null;
this._details=null
};
ZaEvent.L_MODIFY=1;
ZaEvent.L_PICKER=2;
ZaEvent.EVENT_SOURCE_INDEX=1;
ZaEvent.S_FOLDER=ZaEvent.EVENT_SOURCE_INDEX++;
ZaEvent.S_TAG=ZaEvent.EVENT_SOURCE_INDEX++;
ZaEvent.S_CONV=ZaEvent.EVENT_SOURCE_INDEX++;
ZaEvent.S_MSG=ZaEvent.EVENT_SOURCE_INDEX++;
ZaEvent.S_ATT=ZaEvent.EVENT_SOURCE_INDEX++;
ZaEvent.S_CONTACT=ZaEvent.EVENT_SOURCE_INDEX++;
ZaEvent.S_APPT=ZaEvent.EVENT_SOURCE_INDEX++;
ZaEvent.S_NOTE=ZaEvent.EVENT_SOURCE_INDEX++;
ZaEvent.S_PICKER=ZaEvent.EVENT_SOURCE_INDEX++;
ZaEvent.S_SEARCH=ZaEvent.EVENT_SOURCE_INDEX++;
ZaEvent.S_SETTING=ZaEvent.EVENT_SOURCE_INDEX++;
ZaEvent.S_ACCOUNT=ZaEvent.EVENT_SOURCE_INDEX++;
ZaEvent.S_COS=ZaEvent.EVENT_SOURCE_INDEX++;
ZaEvent.S_DOMAIN=ZaEvent.EVENT_SOURCE_INDEX++;
ZaEvent.S_SERVER=ZaEvent.EVENT_SOURCE_INDEX++;
ZaEvent.S_GLOBALCONFIG=ZaEvent.EVENT_SOURCE_INDEX++;
ZaEvent.S_STATUS=ZaEvent.EVENT_SOURCE_INDEX++;
ZaEvent.S_CLUSTER_STATUS=ZaEvent.EVENT_SOURCE_INDEX++;
ZaEvent.S_DL=ZaEvent.EVENT_SOURCE_INDEX++;
ZaEvent.S_MTA=ZaEvent.EVENT_SOURCE_INDEX++;
ZaEvent.S_ZIMLET=ZaEvent.EVENT_SOURCE_INDEX++;
ZaEvent.S_HOME=ZaEvent.EVENT_SOURCE_INDEX++;
ZaEvent.EVENT_TYPES_INDEX=1;
ZaEvent.E_CREATE=ZaEvent.EVENT_TYPES_INDEX++;
ZaEvent.E_DELETE=ZaEvent.EVENT_TYPES_INDEX++;
ZaEvent.E_MODIFY=ZaEvent.EVENT_TYPES_INDEX++;
ZaEvent.E_LOAD=ZaEvent.EVENT_TYPES_INDEX++;
ZaEvent.E_REMOVE=ZaEvent.EVENT_TYPES_INDEX++;
ZaEvent.E_REMOVE_ALL=ZaEvent.EVENT_TYPES_INDEX++;
ZaEvent.E_RENAME=ZaEvent.EVENT_TYPES_INDEX++;
ZaEvent.E_MOVE=ZaEvent.EVENT_TYPES_INDEX++;
ZaEvent.E_FLAGS=ZaEvent.EVENT_TYPES_INDEX++;
ZaEvent.E_ADD_TAG=ZaEvent.EVENT_TYPES_INDEX++;
ZaEvent.E_REMOVE_TAG=ZaEvent.EVENT_TYPES_INDEX++;
ZaEvent.E_SEARCH=ZaEvent.EVENT_TYPES_INDEX++;
ZaEvent.prototype.toString=function(){return"ZaEvent"
};
ZaEvent.prototype.set=function(b,c){this.event=b;
this.source=c
};
ZaEvent.prototype.setDetail=function(c,b){if(!this._details){this._details=new Object()
}this._details[c]=b
};
ZaEvent.prototype.getDetail=function(b){if(!this._details){return null
}else{return this._details[b]
}};
ZaEvent.prototype.setDetails=function(b){this._details=b?b:new Object()
};
ZaEvent.prototype.getDetails=function(){return this._details
}
}if(AjxPackage.define("zimbraAdmin.common.ZaModel")){ZaModel=function(b){if(arguments.length==0){return
}this._evtMgr=new AjxEventMgr()
};
ZaModel.getBooleanChoices=function(){return[{value:"TRUE",label:ZaMsg.Yes},{value:"FALSE",label:ZaMsg.No},{value:null,label:ZaMsg.No}]
};
ZaModel.BOOLEAN_CHOICES=ZaModel.getBooleanChoices;
ZaModel.getBooleanChoices1=function(){return[{value:true,label:ZaMsg.Yes},{value:false,label:ZaMsg.No},{value:null,label:ZaMsg.No}]
};
ZaModel.BOOLEAN_CHOICES1=ZaModel.getBooleanChoices1;
ZaModel.getBooleanChoices2=function(){return[{value:"1",label:ZaMsg.Yes},{value:"0",label:ZaMsg.No},{value:null,label:ZaMsg.No}]
};
ZaModel.BOOLEAN_CHOICES2=ZaModel.getBooleanChoices2;
ZaModel.getAllowChoices=function(){return[{value:"1",label:ZaMsg.Yes},{value:"0",label:ZaMsg.No},{value:"-1",label:ZaMsg.Ignored},{value:null,label:ZaMsg.No}]
};
ZaModel.ALLOW_CHOICES=ZaModel.getAllowChoices;
ZaModel.FONT_SIZE_CHOICES=[{value:"8pt",label:"8pt"},{value:"10pt",label:"10pt"},{value:"12pt",label:"12pt"},{value:"14pt",label:"14pt"},{value:"18pt",label:"18pt"},{value:"24pt",label:"24pt"},{value:"36pt",label:"36pt"}];
ZaModel.getFontFamilyChoices=function(){return[{label:ZaMsg.LBL_fontFamilySansSerif,value:"arial, helvetica, sans-serif"},{label:ZaMsg.LBL_fontFamilySerif,value:"times new roman, new york, times, serif"},{label:ZaMsg.LBL_fontFamilyWideBlock,value:"arial black,avant garde"},{label:ZaMsg.LBL_fontFamilyMonospaced,value:"courier new, courier, monaco, monospace, sans-serif"},{label:ZaMsg.LBL_fontFamilyComic,value:"comic sans ms, comic sans, sans-serif"},{label:ZaMsg.LBL_fontFamilyConsole,value:"lucida console, sans-serif"},{label:ZaMsg.LBL_fontFamilyGaramond,value:"garamond, new york, times, serif"},{label:ZaMsg.LBL_fontFamilyElegant,value:"georgia,serif"},{label:ZaMsg.LBL_fontFamilyProfessional,value:"tahoma, new york, times, serif"},{label:ZaMsg.LBL_fontFamilyTerminal,value:"terminal,monaco"},{label:ZaMsg.LBL_fontFamilyModern,value:"trebuchet ms,sans-serif"},{label:ZaMsg.LBL_fontFamilyWide,value:"verdana, helvetica, sans-serif"}]
};
ZaModel.FONT_FAMILY_CHOICES=ZaModel.getFontFamilyChoices;
ZaModel.getComposeFormatChoices=function(){return[{value:"text",label:ZaMsg.Text},{value:"html",label:ZaMsg.HTML}]
};
ZaModel.COMPOSE_FORMAT_CHOICES=ZaModel.getComposeFormatChoices;
ZaModel.SEND_READ_RECEIPT_ALWAYS="always";
ZaModel.SEND_READ_RECEIPT_NEVER="never";
ZaModel.SEND_READ_RECEIPT_PROMPT="prompt";
ZaModel.getSendReadReceiptByChoices=function(){return[{value:ZaModel.SEND_READ_RECEIPT_ALWAYS,label:ZaMsg.SEND_READ_RECEIPT_ALWAYS},{value:ZaModel.SEND_READ_RECEIPT_NEVER,label:ZaMsg.SEND_READ_RECEIPT_NEVER},{value:ZaModel.SEND_READ_RECEIPT_PROMPT,label:ZaMsg.SEND_READ_RECEIPT_PROMPT}]
};
ZaModel.SEND_READ_RECEPIT_CHOICES=ZaModel.getSendReadReceiptByChoices;
ZaModel.getGroupMailByChoices=function(){return[{value:"conversation",label:ZaMsg.Conversation},{value:"message",label:ZaMsg.Message}]
};
ZaModel.GROUP_MAIL_BY_CHOICES=ZaModel.getGroupMailByChoices;
ZaModel.getSignatureStyleChoices=function(){return[{value:"outlook",label:ZaMsg.No},{value:"internet",label:ZaMsg.Yes}]
};
ZaModel.SIGNATURE_STYLE_CHOICES=ZaModel.getSignatureStyleChoices;
ZaModel.getReminderChoices=function(){return[{value:"0",label:ZaMsg.never},{value:1,label:"1"},{value:5,label:"5"},{value:10,label:"10"},{value:15,label:"15"},{value:20,label:"20"},{value:25,label:"25"},{value:30,label:"30"},{value:45,label:"45"},{value:50,label:"50"},{value:55,label:"55"},{value:60,label:"60"}]
};
ZaModel.REMINDER_CHOICES=ZaModel.getReminderChoices;
ZaModel.ErrorCode="code";
ZaModel.ErrorMessage="error_message";
ZaModel.currentStep="currentStep";
ZaModel.currentTab="currentTab";
ZaModel.getTimeChoices=function(){return[{value:"d",label:AjxMsg.days},{value:"h",label:AjxMsg.hours},{value:"m",label:AjxMsg.minutes},{value:"s",label:AjxMsg.seconds}]
};
ZaModel.getTimeChoices1=function(){return[{value:"d",label:AjxMsg.days},{value:"h",label:AjxMsg.hours}]
};
ZaModel.getLongTimeChoices=function(){return[{value:"d",label:AjxMsg.days},{value:"w",label:AjxMsg.weeks},{value:"m",label:AjxMsg.months},{value:"y",label:AjxMsg.years}]
};
ZaModel.getMailPollingIntervalChoices=function(){return[{value:"500ms",label:ZaMsg.LBL_asNewMailArrives},{value:"120s",label:"2 "+ZaMsg.LBL_minute},{value:"180s",label:"3 "+ZaMsg.LBL_minute},{value:"240s",label:"4 "+ZaMsg.LBL_minute},{value:"300s",label:"5 "+ZaMsg.LBL_minute},{value:"360s",label:"6 "+ZaMsg.LBL_minute},{value:"420s",label:"7 "+ZaMsg.LBL_minute},{value:"480s",label:"8 "+ZaMsg.LBL_minute},{value:"540s",label:"9 "+ZaMsg.LBL_minute},{value:"600s",label:"10 "+ZaMsg.LBL_minute},{value:"900s",label:"15 "+ZaMsg.LBL_minute},{value:"31536000s",label:ZaMsg.LBL_manual}]
};
ZaModel.MAIL_POLLING_INTERVAL_CHOICES=ZaModel.getMailPollingIntervalChoices;
ZaModel.prototype.toString=function(){return"ZaModel"
};
ZaModel.prototype.addChangeListener=function(b){return this._evtMgr.addListener(ZaEvent.L_MODIFY,b)
};
ZaModel.prototype.removeChangeListener=function(b){return this._evtMgr.removeListener(ZaEvent.L_MODIFY,b)
};
ZaModel.setUnrecoganizedChoiceValue=function(b,f){var d=ZaMsg.VALUE_UNRECOGNIZED;
var e=f;
if(typeof(f)=="function"){e=f.call(this)
}for(var c=0;
c<e.length;
c++){if(b==e[c].value){d=b;
break
}}return d
}
}if(AjxPackage.define("zimbraAdmin.common.ZaItem")){ZaItem=function(b){if(arguments.length==0){return
}this._iKeyName=b;
this._uuid=ZaUtil.getItemUUid();
this.rightsLoaded=false;
ZaModel.call(this,true)
};
ZaItem.prototype=new ZaModel;
ZaItem.prototype.constructor=ZaItem;
ZaItem.loadMethods=new Object();
ZaItem.initMethods=new Object();
ZaItem.modifyMethods=new Object();
ZaItem.modifyMethodsExt=new Object();
ZaItem.createMethods=new Object();
ZaItem.removeMethods=new Object();
ZaItem.modelExtensions=new Object();
ZaItem.getRelatedMethods=new Object();
ZaItem.ACCOUNT="account";
ZaItem.DATASOURCE="dataSource";
ZaItem.DL="dl";
ZaItem.GROUP="group";
ZaItem.ALIAS="alias";
ZaItem.RESOURCE="calresource";
ZaItem.DOMAIN="domain";
ZaItem.COS="cos";
ZaItem.GLOBAL_CONFIG="config";
ZaItem.GLOBAL_GRANT="global";
ZaItem.SERVER="server";
ZaItem.STATS="stats";
ZaItem.ZIMLET="zimlet";
ZaItem.MAILQ_ITEM="message";
ZaItem.MAILQ="mailque";
ZaItem.HOME="home";
ZaItem.A_objectClass="objectClass";
ZaItem.A_zimbraId="zimbraId";
ZaItem.A_cn="cn";
ZaItem.A_zimbraACE="zimbraACE";
ZaItem.A_zimbraCreateTimestamp="zimbraCreateTimestamp";
ZaItem._ATTR=new Object();
ZaItem._ATTR[ZaItem.A_zimbraId]=ZaMsg.attrDesc_zimbraId;
ZaItem.ID_PATTERN=/^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$/;
ZaItem.prototype.toString=function(){if(this.name){return this.name
}else{if(this.id){return this.id
}else{return"ZaItem "+this.type+": name="+this.name+" id="+this.id
}}};
ZaItem.compareNamesAsc=function(d,c){var e=d.name.toLowerCase();
var f=c.name.toLowerCase();
if(e<f){return -1
}if(e>f){return 1
}else{return 0
}};
ZaItem.compareNamesDesc=function(d,c){var e=d.name.toLowerCase();
var f=c.name.toLowerCase();
if(e<f){return 1
}if(e>f){return -1
}else{return 0
}};
ZaItem.compareDescription=function(d,c){return ZaItem.compareAttr(d,c,"description")
};
ZaItem.compareEmailAddress=function(b){return function(f,e){var d=f.emailAddress.toLowerCase();
var c=e.emailAddress.toLowerCase();
if(d<c){return b?-1:1
}if(d>c){return b?1:-1
}return 0
}
};
ZaItem.compareAttr=function(e,d,c){if(e.attrs[c]==null){return -1
}if(d.attrs[c]==null){return 1
}if(e.attrs[c]<d.attrs[c]){return -1
}if(e.attrs[c]>d.attrs[c]){return 1
}else{return 0
}};
ZaItem.compareAttrAsc=ZaItem.compareAttr;
ZaItem.compareAttrDesc=function(e,d,c){if(e.attrs[c]==null){return 1
}if(d.attrs[c]==null){return -1
}if(e.attrs[c]<d.attrs[c]){return 1
}if(e.attrs[c]>d.attrs[c]){return -1
}else{return 0
}};
ZaItem.getFromType=function(b){switch(b){case ZaItem.ACCOUNT:return new ZaAccount();
case ZaItem.ALIAS:return new ZaAlias();
case ZaItem.DL:return new ZaDistributionList();
case ZaItem.RESOURCE:return new ZaResource();
case ZaItem.DOMAIN:return new ZaDomain();
case ZaItem.COS:return new ZaCos();
case ZaItem.SERVER:return new ZaServer();
case ZaItem.MAILQ:return new ZaMTA();
case ZaItem.DATASOURCE:return new ZaDataSource()
}};
ZaItem.prototype.remove=function(){if(ZaItem.removeMethods[this._iKeyName]){var b=ZaItem.removeMethods[this._iKeyName];
var d=b.length;
for(var c=0;
c<d;
c++){if(typeof(b[c])=="function"){b[c].call(this)
}}}};
ZaItem.prototype.refresh=function(c,b){this.load(this.id?"id":null,this.id?this.id:null,c,b)
};
ZaItem.prototype.getRelatedList=function(c){var d=[];
if(ZaItem.getRelatedMethods[this._iKeyName]){var b=ZaItem.getRelatedMethods[this._iKeyName];
var f=b.length;
for(var e=0;
e<f;
e++){if(typeof(b[e])=="function"){d=d.concat(b[e].call(this,c))
}}}return d
};
ZaItem.prototype.copyTo=function(f,c,d,e){if(!e){e=1
}else{e++
}if(!d){d=4
}for(var b in this){if(this[b]==null||this[b]==undefined){f[b]=null
}else{if(c&&(e<=d)){if(this[b] instanceof Array){f[b]=[];
ZaItem.prototype.copyTo.call(this[b],f[b],c,d,e)
}else{if(typeof(this[b])=="object"){f[b]={};
ZaItem.prototype.copyTo.call(this[b],f[b],c,d,e)
}else{f[b]=this[b]
}}}else{f[b]=this[b]
}}}};
ZaItem.prototype.parseTargetsRightsFromJS=function(e){if(e){this.noAttrsAvailable=true;
this.rights={};
if(e.right&&e.right instanceof Array){var h=e.right;
for(var g in h){this.rights[h[g].n]=true
}}if(e.id){this.id=e.id
}if(e.name){this.name=e.name
}if(!this._defaultValues){this._defaultValues={attrs:{}}
}if(!this.getAttrs){this.getAttrs={}
}if(!this.setAttrs){this.setAttrs={}
}if(AjxUtil.isEmpty(e.getAttrs)&&AjxUtil.isEmpty(e.setAttrs)){this.getAttrs=null;
return
}this.attrsToGet=[];
if(e.getAttrs&&e.getAttrs instanceof Array&&e.getAttrs[0]){if(e.getAttrs[0].a&&e.getAttrs[0].a instanceof Array){var j=e.getAttrs[0].a;
this.noAttrsAvailable=false;
for(var b in j){this.getAttrs[j[b].n]=true;
this.attrsToGet.push(j[b].n);
if(j[b]["default"]&&j[b]["default"][0]&&j[b]["default"][0].v&&j[b]["default"][0].v instanceof Array){var d=j[b]["default"][0].v.length;
if(d==1){if((j[b].n==ZaDomain.A_zimbraFreebusyExchangeAuthPassword)&&(j[b]["default"][0].v[0]._content=="VALUE-BLOCKED")){this._defaultValues.attrs[j[b].n]=""
}else{this._defaultValues.attrs[j[b].n]=j[b]["default"][0].v[0]._content
}}else{if(d>1){this._defaultValues.attrs[j[b].n]=new Array();
for(var c=0;
c<d;
c++){this._defaultValues.attrs[j[b].n][c]=j[b]["default"][0].v[c]._content
}}}}}if(!j[ZaItem.A_zimbraId]){this.attrsToGet.push(ZaItem.A_zimbraId)
}}if(e.getAttrs[0].all){this.getAttrs.all=true;
this.noAttrsAvailable=false
}}if(e.setAttrs&&e.setAttrs instanceof Array&&e.setAttrs[0]){if(e.setAttrs[0].a&&e.setAttrs[0].a instanceof Array){var f=e.setAttrs[0].a;
if(!this.getAttrs){this.getAttrs={}
}this.noAttrsAvailable=false;
for(var b in f){this.setAttrs[f[b].n]=true;
this.getAttrs[f[b].n]=true;
if(f[b]["default"]&&f[b]["default"][0]&&f[b]["default"][0].v&&f[b]["default"][0].v instanceof Array){var d=f[b]["default"][0].v.length;
if(d==1){this._defaultValues.attrs[f[b].n]=f[b]["default"][0].v[0]._content
}else{if(d>1){this._defaultValues.attrs[f[b].n]=new Array();
for(var c=0;
c<d;
c++){this._defaultValues.attrs[f[b].n][c]=f[b]["default"][0].v[c]._content
}}}}}}if(e.setAttrs[0].all){this.noAttrsAvailable=false;
this.setAttrs.all=true;
this.getAttrs.all=true
}}}this.rightsLoaded=true
};
ZaItem.prototype.initEffectiveRightsFromJS=function(b){this._defaultValues={attrs:{}};
if(b&&b.target&&b.target instanceof Array){this.parseTargetsRightsFromJS(b.target[0])
}};
ZaItem.prototype.loadEffectiveRights=function(d,f,b,g){if(!this.type){return
}if(AjxUtil.isUndefined(f)||AjxUtil.isNull(f)){f=""
}try{if(g){this._getEffectiveRights(d,f,b,g)
}else{var e=this._getEffectiveRights(d,f,b,g);
this.initEffectiveRightsFromJS(e)
}}catch(c){throw (c)
}};
ZaItem.RightCache=[];
ZaItem.getCacheName=function(e,f,c,b){var d=e+f+" "+c;
if(b){d=d+"TRUE"
}else{d=d+"FALSE"
}return d
};
ZaItem.inCacheProcess=function(b){if(!b){return false
}return ZaSettings.initializing
};
ZaItem.prototype._getEffectiveRights=function(l,d,e,o){var j=ZaItem.getCacheName(l,d,this.type,e);
var n=ZaItem.inCacheProcess(d);
var h;
if(((!ZaItem.RightCache[j])&&n)||!n){var m=AjxSoapDoc.create("GetEffectiveRightsRequest",ZaZimbraAdmin.URN,null);
if(e){m.setMethodAttribute("expandAllAttrs","getAttrs")
}var b=m.set("target",d);
if(!AjxUtil.isEmpty(l)){b.setAttribute("by",l)
}b.setAttribute("type",this.type);
var g=m.set("grantee",ZaZimbraAdmin.currentUserId);
g.setAttribute("by","id");
var f=new Object();
f.soapDoc=m;
f.asyncMode=o?true:false;
f.callback=o?o:null;
var c={};
c.controller=(ZaApp.getInstance()&&ZaApp.getInstance().getCurrentController())?ZaApp.getInstance().getCurrentController():null;
c.busyMsg=ZaMsg.BUSY_REQUESTING_ACCESS_RIGHTS;
try{if(o){ZaRequestMgr.invoke(f,c)
}else{h=ZaRequestMgr.invoke(f,c).Body.GetEffectiveRightsResponse;
if(n){ZaItem.RightCache[j]=h
}}}catch(k){throw (k)
}}else{h=ZaItem.RightCache[j]
}return h
};
ZaItem.prototype.loadNewObjectDefaults=function(h,g,d,l){if(!this.type){return
}var k=AjxSoapDoc.create("GetCreateObjectAttrsRequest",ZaZimbraAdmin.URN,null);
var b=k.set("target","");
b.setAttribute("type",this.type);
if(!AjxUtil.isEmpty(g)&&!AjxUtil.isEmpty(h)){var m=k.set("domain",g);
m.setAttribute("by",h)
}if(!AjxUtil.isEmpty(l)&&!AjxUtil.isEmpty(d)){var n=k.set("cos",l);
n.setAttribute("by",d)
}var f=new Object();
f.soapDoc=k;
var c={};
c.controller=(ZaApp.getInstance()&&ZaApp.getInstance().getCurrentController())?ZaApp.getInstance().getCurrentController():null;
c.busyMsg=ZaMsg.BUSY_REQUESTING_ACCESS_RIGHTS;
try{var e=ZaRequestMgr.invoke(f,c).Body.GetCreateObjectAttrsResponse;
this.parseTargetsRightsFromJS(e)
}catch(j){}};
ZaItem.prototype.load=function(g,h,f,b){g=g?g:"id";
h=h?h:this.id;
if(!f){this.rights={};
this.getAttrs={};
this.setAttrs={};
this.loadEffectiveRights(g,h,b)
}if(this.noAttrsAvailable){return
}if(ZaItem.loadMethods[this._iKeyName]){var c=ZaItem.loadMethods[this._iKeyName];
var e=c.length;
for(var d=0;
d<e;
d++){if(typeof(c[d])=="function"){c[d].call(this,g,h)
}}}};
ZaItem.prototype.modify=function(e,f){if(ZaItem.modifyMethods[this._iKeyName]){var b=ZaItem.modifyMethods[this._iKeyName];
var d=b.length;
for(var c=0;
c<d;
c++){if(typeof(b[c])=="function"){b[c].call(this,e,f)
}}}};
ZaItem.create=function(h,b,f){var g=new b();
if(ZaItem.createMethods[f]){var c=ZaItem.createMethods[f];
var e=c.length;
for(var d=0;
d<e;
d++){if(typeof(c[d])=="function"){c[d].call(this,h,g)
}}}return g
};
ZaItem.prototype.initFromDom=function(f){this.name=f.getAttribute("name");
this.id=f.getAttribute("id");
this.attrs=new Object();
if(!AjxUtil.isEmpty(f.nodeName)){this.type=f.nodeName
}var d=f.childNodes;
var e=d.length;
for(var g=0;
g<e;
g++){var c=d[g];
if(c.nodeName!="a"){continue
}var b=c.getAttribute("n");
var j=c.getAttribute("pd");
if(j&&j==1){continue
}if(c.firstChild!=null){var k=c.firstChild.nodeValue;
if(b in this.attrs){var h=this.attrs[b];
if((typeof h)=="object"){h.push(k)
}else{this.attrs[b]=[h,k]
}}else{this.attrs[b]=k
}}}};
ZaItem.prototype.initFromJS=function(d){if(!d){return
}if(d.name){this.name=d.name
}if(d.id){this.id=d.id
}if(d.isgroup==false){this.isgroup=0
}else{if(d.isgroup==true){this.isgroup=1
}}this.attrs=new Object();
if(d.a){var b=d.a.length;
for(var c=0;
c<b;
c++){if(d.a[c].pd){continue
}if(!this.attrs[[d.a[c].n]]){this.attrs[[d.a[c].n]]=d.a[c]._content
}else{if(!(this.attrs[[d.a[c].n]] instanceof Array)){this.attrs[[d.a[c].n]]=[this.attrs[[d.a[c].n]]]
}this.attrs[[d.a[c].n]].push(d.a[c]._content)
}}}if(d._attrs){for(var c in d._attrs){if(d._attrs[c].pd){continue
}if(!this.attrs[c]){this.attrs[c]=d._attrs[c]
}else{if(!(this.attrs[c] instanceof Array)){this.attrs[c]=[this.attrs[c]]
}this.attrs[c].push(d._attrs[c])
}}}if(!this.attrs[ZaAccount.A_description]){this.attrs[ZaAccount.A_description]=[]
}if(!(this.attrs[ZaAccount.A_description] instanceof Array)){this.attrs[ZaAccount.A_description]=[this.attrs[ZaAccount.A_description]]
}if(!this.attrs[ZaItem.A_zimbraId]&&this.id){this.attrs[ZaItem.A_zimbraId]=this.id
}};
ZaItem.initAttrsFromJS=function(e){if(!e){return
}var d={};
if(e.a){var b=e.a.length;
for(var c=0;
c<b;
c++){if(e.a[c].pd){continue
}if(!d[[e.a[c].n]]){d[[e.a[c].n]]=e.a[c]._content
}else{if(!(d[[e.a[c].n]] instanceof Array)){d[[e.a[c].n]]=[d[[e.a[c].n]]]
}d[[e.a[c].n]].push(e.a[c]._content)
}}}if(e._attrs){for(var c in e._attrs){if(e._attrs[c].pd){continue
}if(!d[c]){d[c]=e._attrs[c]
}else{if(!(d[c] instanceof Array)){d[c]=[d[c]]
}d[c].push(e._attrs[c])
}}}return d
};
ZaItem.prototype._addRow=function(e,d,c,b){if(d!=null){c[b++]="<tr valign='top'><td align='right' style='padding-right: 5px;'><b>";
c[b++]=AjxStringUtil.htmlEncode(e);
c[b++]="</b></td><td align='left'><div style='white-space:nowrap; overflow:hidden;'>";
c[b++]=AjxStringUtil.htmlEncode(d);
c[b++]="</div></td></tr>"
}return b
};
ZaItem.prototype._addAttrRow=function(c,d,b){var e=this.attrs[c];
if(e!=null){var f=ZaItem._attrDesc(c);
d[b++]="<tr valign='top'><td align='left' style='padding-right: 5px;'><b>";
d[b++]=AjxStringUtil.htmlEncode(f)+":";
d[b++]="</b></td><td align='left'><div style='white-space:nowrap; overflow:hidden;'>";
d[b++]=AjxStringUtil.htmlEncode(e);
d[b++]="</div></td></tr>"
}return b
};
ZaItem._attrDesc=function(b){var c=ZaItem._ATTR[b];
return(c==null)?b:c
};
ZaItem.prototype._init=function(){if(ZaItem.initMethods[this._iKeyName]){var b=ZaItem.initMethods[this._iKeyName];
var d=b.length;
for(var c=0;
c<d;
c++){if(typeof(b[c])=="function"){b[c].call(this)
}}}};
ZaItem.prototype.addAlias=function(e){var c;
switch(this.type){case ZaItem.ACCOUNT:c="AddAccountAliasRequest";
break;
case ZaItem.RESOURCE:c="AddAccountAliasRequest";
break;
case ZaItem.DL:c="AddDistributionListAliasRequest";
break;
default:throw new Error("Can't add alias for account type: "+this.type)
}var d=AjxSoapDoc.create(c,ZaZimbraAdmin.URN,null);
d.set("id",this.id);
d.set("alias",e);
var f=new Object();
f.soapDoc=d;
var b={controller:ZaApp.getInstance().getCurrentController(),busyMsg:ZaMsg.BUSY_ADD_ALIAS};
ZaRequestMgr.invoke(f,b)
};
ZaItem.prototype.removeAlias=function(b){var d;
switch(this.type){case ZaItem.ACCOUNT:d="RemoveAccountAliasRequest";
break;
case ZaItem.DL:d="RemoveDistributionListAliasRequest";
break;
default:throw new Error("Can't add alias for account type: "+account.type)
}var e=AjxSoapDoc.create(d,ZaZimbraAdmin.URN,null);
e.set("id",this.id);
e.set("alias",b);
var f=new Object();
f.soapDoc=e;
var c={controller:ZaApp.getInstance().getCurrentController(),busyMsg:ZaMsg.BUSY_REMOVE_ALIAS};
ZaRequestMgr.invoke(f,c)
};
ZaItem.checkInteropSettings=function(){var m=ZaApp.getInstance().getCurrentController();
try{var s=this.getForm().getInstance();
var b=s._defaultValues;
var f="CheckExchangeAuthRequest";
var r=AjxSoapDoc.create(f,ZaZimbraAdmin.URN,null);
var g=r.set("auth","");
var k=[ZaDomain.A_zimbraFreebusyExchangeURL,ZaDomain.A_zimbraFreebusyExchangeAuthScheme,ZaDomain.A_zimbraFreebusyExchangeAuthUsername,ZaDomain.A_zimbraFreebusyExchangeAuthPassword];
for(var l=0;
l<k.length;
l++){var d=k[l];
var t=s.attrs[d]||b.attrs[d];
if(t==null){var o;
if(d==ZaDomain.A_zimbraFreebusyExchangeURL){o=ZaMsg.Error_missing_exchange_url
}else{if(d==ZaDomain.A_zimbraFreebusyExchangeAuthScheme){o=ZaMsg.Error_missing_scheme
}else{if(d==ZaDomain.A_zimbraFreebusyExchangeAuthUsername){o=ZaMsg.Error_missing_exchange_username
}else{if(d==ZaDomain.A_zimbraFreebusyExchangeAuthPassword){o=ZaMsg.Error_missing_exchange_password
}}}}m.popupErrorDialog(o);
return
}else{var q;
if(d==ZaDomain.A_zimbraFreebusyExchangeURL){q="url"
}else{if(d==ZaDomain.A_zimbraFreebusyExchangeAuthScheme){q="scheme"
}else{if(d==ZaDomain.A_zimbraFreebusyExchangeAuthUsername){q="user"
}else{if(d==ZaDomain.A_zimbraFreebusyExchangeAuthPassword){q="pass"
}}}}g.setAttribute(q,t)
}}var j=new Object();
j.soapDoc=r;
var c={controller:m,busyMsg:ZaMsg.BUSY_CHECKING_INTEROP_SETTINGS};
var h=ZaRequestMgr.invoke(j,c).Body.CheckExchangeAuthResponse;
m.popupMsgDialog(h.code[0]._content+"<br />"+h.message[0]._content)
}catch(p){m._handleException(p)
}};
ZaItem.clearInteropSettings=function(){var b=this.getForm().getInstance();
var e=[ZaDomain.A_zimbraFreebusyExchangeURL,ZaDomain.A_zimbraFreebusyExchangeAuthScheme,ZaDomain.A_zimbraFreebusyExchangeAuthUsername,ZaDomain.A_zimbraFreebusyExchangeAuthPassword,ZaDomain.A_zimbraFreebusyExchangeUserOrg];
for(var c=0;
c<e.length;
c++){var f=e[c];
this.setInstanceValue("",f)
}var d=this.getForm();
d.parent.setDirty(true);
d.refresh()
};
ZaItem.ObjectModifiers={};
ZaItem.prototype.modifyObject=function(){if(ZaItem.ObjectModifiers[this._iKeyName]){var b=ZaItem.ObjectModifiers[this._iKeyName];
var d=b.length;
for(var c=0;
c<d;
c++){if(typeof(b[c])=="function"){b[c].call(this)
}}}};
ZaItem.initDescriptionItem=function(){ZaItem.descriptionModelItem={id:"description",type:_LIST_,ref:"attrs/description",listItem:{type:_STRING_}};
ZaItem.descriptionXFormItem={ref:"description",msgName:ZaMsg.NAD_Description,label:ZaMsg.NAD_Description,labelLocation:_LEFT_,labelCssStyle:"vertical-align:top",type:_REPEAT_,align:_LEFT_,repeatInstance:"",showAddButton:false,showRemoveButton:false,showAddOnNextRow:false,items:[{ref:".",type:_TEXTFIELD_,enableDisableChecks:[],visibilityChecks:[],width:"30em"}]}
};
ZaItem.initDescriptionItem();
ZaItem.getDescriptionValue=function(b){if(!b){b=""
}if(b instanceof Array){b=b.toString()
}return b
};
ZaItem.deepCloneListItem=function(c){if(c==null){return[]
}else{if(!(c instanceof Array)){return[c]
}else{var d=[];
for(var b=0;
b<c.length;
b++){d.push(c[b])
}return d
}}};
ZaItem.hasReadPermission=function(c,b){if(ZaZimbraAdmin.currentAdminAccount.attrs[ZaAccount.A_zimbraIsAdminAccount]=="TRUE"){return true
}if(!b){b=this.getInstance()
}if(!b.getAttrs){return false
}var d=null;
if(c){d=c
}else{if(!this.refPath){return true
}else{d=this.refPath
}}return((b.getAttrs.all===true)||(b.getAttrs[d]===true))
};
XFormItem.prototype.hasReadPermission=ZaItem.hasReadPermission;
OSelect1_XFormItem.prototype.visibilityChecks=[ZaItem.hasReadPermission];
Checkbox_XFormItem.prototype.visibilityChecks=[ZaItem.hasReadPermission];
Textfield_XFormItem.prototype.visibilityChecks=[ZaItem.hasReadPermission];
Select1_XFormItem.prototype.visibilityChecks=[ZaItem.hasReadPermission];
Repeat_XFormItem.prototype.visibilityChecks=[ZaItem.hasReadPermission];
ZaItem.hasWritePermission=function(c,b){if(ZaZimbraAdmin.currentAdminAccount.attrs[ZaAccount.A_zimbraIsAdminAccount]=="TRUE"){return true
}if(!b){b=this.getInstance()
}if(!b.setAttrs){return false
}var d=null;
if(c){d=c
}else{if(!this.refPath){return true
}else{d=this.refPath
}}return((b.setAttrs.all===true)||(b.setAttrs[d]===true))
};
XFormItem.prototype.hasWritePermission=ZaItem.hasWritePermission;
Textfield_XFormItem.prototype.enableDisableChecks=[ZaItem.hasWritePermission];
OSelect1_XFormItem.prototype.enableDisableChecks=[ZaItem.hasWritePermission];
Checkbox_XFormItem.prototype.enableDisableChecks=[ZaItem.hasWritePermission];
Select1_XFormItem.prototype.enableDisableChecks=[ZaItem.hasWritePermission];
Repeat_XFormItem.prototype.enableDisableChecks=[ZaItem.hasWritePermission];
ZaItem.hasRight=function(c,b){if(ZaZimbraAdmin.currentAdminAccount.attrs[ZaAccount.A_zimbraIsAdminAccount]=="TRUE"){return true
}if(!b){b=this.getInstance()
}if(!c){return true
}if(!b.rightsLoaded&&b.id&&b.loadEffectiveRights){b.loadEffectiveRights("id",b.id,true)
}if(!b.rights){return false
}return(b.rights[c]===true)
};
XFormItem.prototype.hasRight=ZaItem.hasRight;
ZaItem.hasAnyRight=function(d,b){if(ZaZimbraAdmin.currentAdminAccount.attrs[ZaAccount.A_zimbraIsAdminAccount]=="TRUE"){return true
}if(!b){b=this.getInstance()
}if(!b.rights){return false
}if(!d){return true
}if(!d instanceof Array){d=[d]
}for(var c=0;
c<d.length;
c++){if(b.rights[d[c]]===true){return true
}}return false
};
XFormItem.prototype.hasAnyRight=ZaItem.hasAnyRight;
ZaItem.adminHasAnyRight=function(c){if(ZaZimbraAdmin.currentAdminAccount.attrs[ZaAccount.A_zimbraIsAdminAccount]=="TRUE"){return true
}if(!c){return true
}if(!c instanceof Array){c=[c]
}var d=new ZaAccount();
d.load(null,ZaZimbraAdmin.currentAdminId,false,true);
if(!d.rights){return false
}for(var b=0;
b<c.length;
b++){if(d.rights[c[b]]===true){return true
}}return false
};
ZaItem.formatServerTime=function(f){if(f){var e=/(\d{14})\.\d{3}Z/;
f=f.replace(e,"$1Z");
var c=f.substring(0,8)+"T"+f.substring(8);
var b=AjxDateUtil.parseServerDateTime(c);
var d=AjxDateFormat.getDateTimeInstance(AjxDateFormat.LONG);
return d.format(b)
}else{return""
}};
ZaItem.getZeroIsUnlimitedItem=function(){var b={type:_DWT_ALERT_,style:DwtAlert.INFORMATION,iconVisible:true,content:ZaMsg.NAD_ZERO_UNLIMETED};
return b
};
ZaItem.getAboutScreenCopyright=function(){var c=ZaServerVersionInfo.version||"N/A";
var b=ZaServerVersionInfo.release||"N/A";
return AjxMessageFormat.format(ZabMsg.aboutScreenCopyright,[c,b,AjxDateUtil.getYearStr()])
};
ZaItem.getSplashScreenCopyright=function(){return AjxMessageFormat.format(ZabMsg.splashScreenCopyright,[AjxDateUtil.getYearStr()])
}
}if(AjxPackage.define("zimbraAdmin.common.ZaId")){ZaId=function(){};
ZaId.WIDGET="z";
ZaId.WIDGET_VIEW="zv";
ZaId.WIDGET_TOOLBAR="ztb";
ZaId.WIDGET_BUTTON="zb";
ZaId.WIDGET_INPUT="zi";
ZaId.WIDGET_MENU="zm";
ZaId.WIDGET_MENU_ITEM="zmi";
ZaId.WIDGET_SELECT="zs";
ZaId.WIDGET_OVERVIEW_CNTR="zovc";
ZaId.WIDGET_OVERVIEW="zov";
ZaId.WIDGET_TREE="zt";
ZaId.WIDGET_TREE_ITEM_HDR="ztih";
ZaId.WIDGET_TREE_ITEM="zti";
ZaId.WIDGET_TAB="ztab";
ZaId.WIDGET_TAB_VIEW="ztabv";
ZaId.WIDGET_DLG="zdlg";
ZaId.WIDGET_DLG_VIEW="zdlgv";
ZaId.WIDGET_DLG_BUTTON="zdlgb";
ZaId.WIDGET_SEARCH_VIEW="zschv";
ZaId.SKIN_APP_BOTTOM_TOOLBAR="skin_container_app_bottom_toolbar";
ZaId.SKIN_APP_CHOOSER="skin_container_app_chooser";
ZaId.SKIN_APP_MAIN_FULL="skin_container_app_main_full";
ZaId.SKIN_APP_MAIN="skin_container_app_main";
ZaId.SKIN_APP_MAIN_ROW_FULL="skin_tr_main_full";
ZaId.SKIN_APP_MAIN_ROW="skin_tr_main";
ZaId.SKIN_APP_TOP_TOOLBAR="skin_container_app_top_toolbar";
ZaId.SKIN_LINKS="skin_container_links";
ZaId.SKIN_LOGO="skin_container_logo";
ZaId.SKIN_QUOTA_INFO="skin_container_quota";
ZaId.SKIN_SASH="skin_container_tree_app_sash";
ZaId.SKIN_SEARCH_BUILDER="skin_container_search_builder";
ZaId.SKIN_SEARCH_BUILDER_TOOLBAR="skin_container_search_builder_toolbar";
ZaId.SKIN_SEARCH_BUILDER_TR="skin_tr_search_builder";
ZaId.SKIN_SEARCH="skin_container_search";
ZaId.SKIN_PEOPLE_SEARCH="skin_container_people_search";
ZaId.SKIN_SHELL="skin_outer";
ZaId.SKIN_SPACING_SEARCH="skin_spacing_search";
ZaId.SKIN_SPLASH_SCREEN="skin_container_splash_screen";
ZaId.SKIN_STATUS="skin_container_status";
ZaId.SKIN_STATUS_ROW="skin_tr_status";
ZaId.SKIN_TREE_FOOTER="skin_container_tree_footer";
ZaId.SKIN_TREE="skin_container_tree";
ZaId.SKIN_USER_INFO="skin_container_username";
ZaId.SKIN_TASKBAR="skin_container_taskbar";
ZaId.SKIN_FOOTER="skin_footer";
ZaId.SKIN_AD="skin_adsrvc";
ZaId.SHELL="z_shell";
ZaId.LOADING_VIEW="z_loading";
ZaId.MAIN_SASH="z_sash";
ZaId.BANNER="z_banner";
ZaId.SEARCH_TOOLBAR="ztb_search";
ZaId.PEOPLE_SEARCH_TOOLBAR="ztb_people_search";
ZaId.USER_NAME="z_userName";
ZaId.USER_QUOTA="z_userQuota";
ZaId.PRESENCE="z_presence";
ZaId.TASKBAR="z_taskbar";
ZaId.NEW_FOLDER_BUTTON="zb_newFolder";
ZaId.STATUS_VIEW="z_status";
ZaId.TOAST="z_toast";
ZaId.APP_CHOOSER="ztb_appChooser";
ZaId.CURRENT_APP_BAR="zb_currentApp";
ZaId.getToolbarId=function(c,b){return DwtId._makeId(ZaId.WIDGET_TOOLBAR,c,b)
};
ZaId.getButtonId=function(c,d,b){return DwtId._makeId(ZaId.WIDGET_BUTTON,c,b,d)
};
ZaId.getMenuId=function(c,b){return DwtId._makeId(ZaId.WIDGET_MENU,c,b)
};
ZaId.getMenuItemId=function(c,d,b){return DwtId._makeId(ZaId.WIDGET_MENU_ITEM,c,b,d)
};
ZaId.getOverviewContainerId=function(b){return DwtId._makeId(ZaId.WIDGET_OVERVIEW_CNTR,b)
};
ZaId.getOverviewId=function(b){return DwtId._makeId(ZaId.WIDGET_OVERVIEW,b)
};
ZaId.getTreeId=function(c,b){return DwtId._makeId(ZaId.WIDGET_TREE,c,b)
};
ZaId.getTreeItemId=function(e,d,c,b){if(c){return DwtId._makeId(ZaId.WIDGET_TREE_ITEM_HDR,e,d,b)
}else{return DwtId._makeId(ZaId.WIDGET_TREE_ITEM,e,d,b)
}};
ZaId.getViewId=function(b,c,d){var e=DwtId._makeId(ZaId.WIDGET_VIEW,d,b);
return c?[e,c].join(""):e
};
ZaId.getDialogId=function(b,c){return DwtId._makeId(ZaId.WIDGET_DLG,b,c)
};
ZaId.getDialogViewId=function(b,c){return DwtId._makeId(ZaId.WIDGET_DLG_VIEW,b,c)
};
ZaId.getDialogButtonId=function(b,c){return DwtId._makeId(ZaId.WIDGET_DLG_BUTTON,b,c)
};
ZaId.getComposeViewId=function(b){var c=DwtId._makeId(ZaId.WIDGET,ZaId.COMPOSE_VIEW);
return b?[c,b].join(""):c
};
ZaId.getTabId=function(b,c){return DwtId._makeId(ZaId.WIDGET_TAB,b,c)
};
ZaId.getTabViewId=function(b,c){return DwtId._makeId(ZaId.WIDGET_TAB_VIEW,b,c)
};
ZaId.getPrefPageId=function(b){return"PREF_PAGE_"+b
};
ZaId.getSearchViewId=function(b,c){return DwtId._makeId(ZaId.WIDGET_SEARCH_VIEW,b,c)
};
ZaId.APP="App";
ZaId.TREEITEM_ACCOUNT="ACCOUNT";
ZaId.TREEITEM_ALIASES="ALIASES";
ZaId.TREEITEM_DL="DL";
ZaId.TREEITEM_RESOURCES="RESOURCES";
ZaId.TREEITEM_COS="COS";
ZaId.TREEITEM_DOMAINS="DOMAINS";
ZaId.TREEITEM_SERVERS="SERVERS";
ZaId.TREEITEM_ZIMLETS="ZIMLETS";
ZaId.TREEITEM_ADMINEXT="AEMINEXT";
ZaId.TREEITEM_GSET="GSET";
ZaId.TREEITEM_RIGHTS="RIGHTS";
ZaId.TREEITEM_GACL="GACL";
ZaId.TREEITEM_SSTATUS="SSTATUS";
ZaId.TREEITEM_SSTATIS="SSTATIS";
ZaId.TREEITEM_MQUEUE="MQUEUE";
ZaId.TREEITEM_BACKUPS="BACKUPS";
ZaId.TREEITEM_DATAINPUT="DATAINPUT";
ZaId.TREEITEM_CERT="CERT";
ZaId.TREEITEM_SEARCHMAIL="SEARCHMAIL";
ZaId.PANEL_APP="AppAdmin";
ZaId.PANEL_ADDRESS="ADDRESS";
ZaId.PANEL_CONFIGURATION="CONFIGURATION";
ZaId.PANEL_MONITORING="MONITORING";
ZaId.PANEL_TOOLS="TOOLS";
ZaId.PANEL_SEARCHS="SEARCHOPTS";
ZaId.PANEL_APPSEARCH="AppSearch";
ZaId.SEARCH_VIEW="SEARCHV";
ZaId.SEARCH_QUERY="SEARCH_QUERY";
ZaId.VIEW_ACCTLIST="ACLV";
ZaId.VIEW_ALASLIST="ALLV";
ZaId.VIEW_DLLIST="DLLV";
ZaId.VIEW_RESLIST="RESLV";
ZaId.VIEW_COSLIST="COSLV";
ZaId.VIEW_DMLIST="DMLV";
ZaId.VIEW_SERLIST="SERLV";
ZaId.VIEW_ZIMLIST="ZIMLV";
ZaId.VIEW_AELIST="AELV";
ZaId.VIEW_GSETLIST="GSLV";
ZaId.VIEW_RIGHTLIST="RLV";
ZaId.VIEW_GACLIST="ACLV";
ZaId.VIEW_STATUSLIST="STALV";
ZaId.VIEW_STATISLIST="STSLV";
ZaId.VIEW_MQLIST="MQLV";
ZaId.VIEW_BKLIST="BKLV";
ZaId.VIEW_DILIST="DILV";
ZaId.VIEW_CRTLIST="CRTLV";
ZaId.VIEW_SMLIST="SMLV";
ZaId.VIEW_SCHLIST="SCHLV";
ZaId.VIEW_MTALIST="MTALV";
ZaId.VIEW_MEMLIST="MEMLV";
ZaId.VIEW_ACCT="ACCTV";
ZaId.VIEW_ALAS="ALASV";
ZaId.VIEW_DL="DLV";
ZaId.VIEW_RES="RESV";
ZaId.VIEW_COS="COSV";
ZaId.VIEW_DOMAIN="DMV";
ZaId.VIEW_SERVER="SERV";
ZaId.VIEW_ZIMLET="ZIMV";
ZaId.VIEW_ADEXT="AEV";
ZaId.VIEW_GSET="GSV";
ZaId.VIEW_RIGHT="RTV";
ZaId.VIEW_GACL="GACV";
ZaId.VIEW_STATUS="STAV";
ZaId.VIEW_STATIS="STSV";
ZaId.VIEW_MQ="MQV";
ZaId.VIEW_BK="BKV";
ZaId.VIEW_DI="DIV";
ZaId.VIEW_CRT="CRTV";
ZaId.VIEW_SM="SMV";
ZaId.VIEW_SCH="SCHV";
ZaId.VIEW_MTA="MTAV";
ZaId.VIEW_HOME="HOMEV";
ZaId.OP_NEW_ACCT="NEW_ACCT";
ZaId.OP_EDIT_ACCT="EDIT_ACCT";
ZaId.OP_DEL_ACCT="DEL_ACCT";
ZaId.OP_CHD_ACCTPWD="CHD_ACTPWD";
ZaId.OP_CLICK_LEFT="LEFT_CLICK";
ZaId.OP_CLICK_RIGHT="RIGHT_CLICK";
ZaId.OP_CLICK_DBLEFT="DBLEFT_CLICK";
ZaId.MENU_DROP="MENU_DROP";
ZaId.MENU_POP="MENU_POP";
ZaId.TAB_GROUP="TAB_GROUP";
ZaId.TAB_MAIN="MAIN_TAB";
ZaId.TAB_ACCT_MANAGE="ACCT_MANAGE";
ZaId.TAB_ACCT_EDIT="ACCT_EDIT";
ZaId.TAB_ALIAS_MANAGE="ALIAS_MANAGE";
ZaId.TAB_ALIAS_EDIT="ALIAS_EDIT";
ZaId.TAB_DL_MANAGE="DL_MANAGE";
ZaId.TAB_DL_EDIT="DL_EDIT";
ZaId.TAB_RES_MANAGE="RES_MANAGE";
ZaId.TAB_RES_EDIT="RES_EDIT";
ZaId.TAB_COS_MANAGE="COS_MANAGE";
ZaId.TAB_COS_EDIT="COS_EDIT";
ZaId.TAB_DOMAIN_MANAGE="DOMAIN_MANAGE";
ZaId.TAB_DOMAIN_EDIT="DOAMIN_EDIT";
ZaId.TAB_SERVER_MANAGE="SERVER_MANAGE";
ZaId.TAB_SERVER_EDIT="SERVER_EDIT";
ZaId.TAB_ZIM_MANAGE="ZIMLET_MANAGE";
ZaId.TAB_ZIM_EDIT="ZIMLET_EDIT";
ZaId.TAB_AE_MANAGE="ADMEXT_MANAGE";
ZaId.TAB_AE_EDIT="ADMEXT_EDIT";
ZaId.TAB_STATUS_MANAGE="STATUS_MANAGE";
ZaId.TAB_STATUS_EDIT="STATUS_EDIT";
ZaId.TAB_MTX_MANAGE="MTX_MANAGE";
ZaId.TAB_MTX_EDIT="MTX_EDIT";
ZaId.TAB_SEARCH_MANAGE="SEARCH_MANAGE";
ZaId.TAB_SEARCH_EDIT="SEARCH_EDIT";
ZaId.TAB_GSET_EDIT="GSET_EDIT";
ZaId.TAB_DOWNLOADS="DOWNLOADS";
ZaId.TAB_VIEWRIGHTS="VIEW_RIGHTS";
ZaId.TAB_UNDEF="UNDEFINE";
ZaId.DLG_NEW_ACCT="NEW_ACCT";
ZaId.DLG_NEW_ALIAS="NEW_ALIAS";
ZaId.DLG_EDIT_ALIAS="EDIT_ALIAS";
ZaId.DLG_EDIT_SIGNATURE="EDIT_SIGNATURE";
ZaId.DLG_NEW_RES="NEW_RES";
ZaId.DLG_NEW_ADMIN="NEW_ADMIN";
ZaId.DLG_NEW_DOMAIN="NEW_DOMAIN";
ZaId.DLG_ZIM_DEPLOY="ZIM_DEPLOY";
ZaId.DLG_AUTH_CONFIG="AUTH_CONFIG";
ZaId.DLG_AUTPROV_CONFIG="AUTOPROV_CONFIG";
ZaId.DLG_AUTPROV_MANUAL="AUTOPROV_MANUAL";
ZaId.DLG_AUTPROV_MANUAL_PWD="AUTOPROV_MANUAL_PWD";
ZaId.DLG_AUTH_SPNEGO="AUTH_SPNEGO";
ZaId.DLG_AUTH_SPNEGO_UA="AUTH_SPNEGO_UA";
ZaId.DLG_NEW_DL="NEW_DL";
ZaId.DLG_NEW_COS="NEW_COS";
ZaId.FLUSH_SERVER_CACHE="FLUSH_SERVER_CACHE";
ZaId.DLG_MSG="MSG";
ZaId.DLG_ERR="ERR";
ZaId.DLG_UNDEF="UNDEFINE";
ZaId.CTR_GLOBAL="GLOBAL_";
ZaId.CTR_PREFIX="CTR_";
ZaId.CTR_UNDEF="CTR_UNDEFINE"
}if(AjxPackage.define("zimbraAdmin.common.ZaIPUtil")){ZaIPUtil=function(){};
ZaIPUtil.MASK_RE=/^\d{1,3}$/;
ZaIPUtil.IP4_CHUNK_RE=ZaIPUtil.MASK_RE;
ZaIPUtil.IP6_CHUNK_RE=/^([A-Fa-f0-9]{1,4})$/;
ZaIPUtil.IPMIX_PREFIX_RE=/^::(f|F){4}:$/;
ZaIPUtil.ERROR_CIDR_NULL="ERROR_CIDR_NULL";
ZaIPUtil.ERROR_MASK_NULL="ERROR_MASK_NULL";
ZaIPUtil.ERROR_MASK_FORMAT="ERROR_MASK_FORMAT";
ZaIPUtil.ERROR_IP_NULL="ERROR_IP_NULL";
ZaIPUtil.ERROR_IP_FORMAT="ERROR_IP_FORMAT";
ZaIPUtil.ERROR_IP_VER_DISMATCH="ERROR_IP_VER_DISMATCH";
ZaIPUtil.isValidCIDR=function(b){if(!b){throw ZaIPUtil.ERROR_CIDR_NULL
}var e=b.indexOf("/");
if(e==-1){throw ZaIPUtil.ERROR_MASK_NULL
}var g=b.substring(0,e);
var d=b.substring(e+1);
if(!ZaIPUtil.MASK_RE.test(d)){throw ZaIPUtil.ERROR_MASK_FORMAT
}var f=parseInt(d,10);
var c=ZaIPUtil.isValidIP(g);
if(!c){return""
}if(c.ver==ZaIPData.v4){if(f>32){throw ZaIPUtil.ERROR_MASK_FORMAT
}}else{if(f>128){throw ZaIPUtil.ERROR_MASK_FORMAT
}}return new ZaCIDRData(c,f,b)
};
ZaIPUtil.getNetworkAddr=function(d,l){var b;
var g;
if(d.ver==ZaIPData.v4){b=32;
g=8
}else{if(d.ver==ZaIPData.v6){b=128;
g=16
}}var h=Math.floor(l/g);
var c=l%g;
var k=ZaIPUtil.getNonZeroNum(c,g);
var j=[];
for(var f=0;
f<d.fmtArr.length;
f++){if(h>0){j.push(d.fmtArr[f]);
h--
}else{if(k!=0){var e=d.fmtArr[f]&k;
j.push(e);
k=0
}else{j.push(0)
}}}return new ZaCIDRData(new ZaIPData(j,d.ver,undefined,d.src),l)
};
ZaIPUtil.getNonZeroNum=function(b,f){if(b==0){return 0
}var c=0;
var e=Math.pow(2,f-b);
for(var d=0;
d<b;
d++){c=c+e;
e=e*2
}return c
};
ZaIPUtil.countOneBit=function(c){var b=0;
while(c){b++;
c=c&(c-1)
}return b
};
ZaIPUtil.getNetBit=function(e){var h=(e.indexOf(".")!=-1)?true:false;
var g=(e.indexOf(":")!=-1)?true:false;
if(!h&&!g){var b=parseInt(e,16);
return ZaIPUtil.countOneBit(b)
}var d=ZaIPUtil.isValidIP(e);
if(!d){return 0
}var c=0;
for(var f=0;
f<d.fmtArr.length;
f++){if(d.fmtArr[f]==0){break
}c=c+ZaIPUtil.countOneBit(d.fmtArr[f])
}return c
};
ZaIPUtil.isInSubNet=function(j,d){var c=j.ipData;
var l=j.mask;
if(c.ver!=d.ver){return false
}var k=l;
var h,g,b;
var e=(c.ver==ZaIPData.v4)?8:16;
for(var f=0;
f<c.fmtArr.length;
f++){if(k==0){break
}if(k>=e){h=e
}else{h=k
}k=k-e;
g=c.fmtArr[f]>>(e-h);
b=d.fmtArr[f]>>(e-h);
if(g!=b){return false
}}return true
};
ZaIPUtil.compareIP=function(d,b){if(!d||!b){throw ZaIPUtil.ERROR_IP_NULL
}if(d.ver!=b.ver){throw ZaIPUtil.ERROR_IP_VER_DISMATCH
}if(d.fmtArr.length!=b.fmtArr.length){throw ZaIPUtil.ERROR_IP_VER_DISMATCH
}for(var c=0;
c<d.fmtArr.length;
c++){if(d.fmtArr[c]>b.fmtArr[c]){return 1
}else{if(d.fmtArr[c]<b.fmtArr[c]){return -1
}}}return 0
};
ZaIPUtil.isValidIP=function(b){if(!b){throw ZaIPUtil.ERROR_IP_NULL
}var d=(b.indexOf(".")==-1)?false:true;
var c=(b.indexOf(":")==-1)?false:true;
if(!c&&d){return ZaIPUtil.isIPV4(b)
}else{if(c&&!d){return ZaIPUtil.isIPV6(b)
}else{if(c&&d){return ZaIPUtil.isIPVMix(b)
}else{throw ZaIPUtil.ERROR_IP_FORMAT
}}}};
ZaIPUtil.isIPV4=function(b){if(!b){throw ZaIPUtil.ERROR_IP_NULL
}var e=b.split(".");
if(e.length!=4){throw ZaIPUtil.ERROR_IP_FORMAT
}if(b[0]=="."){throw ZaIPUtil.ERROR_IP_FORMAT
}if(b[b.length-1]=="."){throw ZaIPUtil.ERROR_IP_FORMAT
}for(var c=0;
c<b.length-1;
c++){if(b[c]=="."&&b[c+1]=="."){throw ZaIPUtil.ERROR_IP_FORMAT
}}var d;
for(var c=0;
c<e.length;
c++){if(!e[c]){throw ZaIPUtil.ERROR_IP_FORMAT
}if(!ZaIPUtil.IP4_CHUNK_RE.test(e[c])){throw ZaIPUtil.ERROR_IP_FORMAT
}d=parseInt(e[c],10);
if(d>255){throw ZaIPUtil.ERROR_IP_FORMAT
}e[c]=d
}return new ZaIPData(e,ZaIPData.v4,undefined,b)
};
ZaIPUtil.isIPV6=function(e){if(!e){throw ZaIPUtil.ERROR_IP_NULL
}var c;
if((e[0]=="[")&&(e[e.length-1]=="]")){c=e.substring(1,e.length-1)
}else{c=e
}var l=c.indexOf("%");
var f;
if(l!=-1){f=c.substring(l+1);
c=c.substring(0,l)
}if(!c){throw ZaIPUtil.ERROR_IP_FORMAT
}var b=c.indexOf("::");
if(b!=-1){if(c.indexOf("::",b+2)!=-1){throw ZaIPUtil.ERROR_IP_FORMAT
}}if(b!=-1){if(c[b+2]==":"){throw ZaIPUtil.ERROR_IP_FORMAT
}}if(c[0]==":"&&c[1]!=":"){throw ZaIPUtil.ERROR_IP_FORMAT
}if(c[c.length-1]==":"&&c[c.length-2]!=":"){throw ZaIPUtil.ERROR_IP_FORMAT
}var h=c.split(":");
if(h.length>8){throw ZaIPUtil.ERROR_IP_FORMAT
}var m;
for(var g=0;
g<h.length;
g++){if(!h[g]){if(m===undefined){m=g
}h[g]=0;
continue
}if(!ZaIPUtil.IP6_CHUNK_RE.test(h[g])){throw ZaIPUtil.ERROR_IP_FORMAT
}h[g]=parseInt(h[g],16)
}if(m===undefined&&(h.length!=8)){throw ZaIPUtil.ERROR_IP_FORMAT
}if(h.length<8&&(m!==undefined)){var k=8-h.length;
for(var d=0;
d<k;
d++){h.splice(m,0,0)
}}return new ZaIPData(h,ZaIPData.v6,f,e)
};
ZaIPUtil.isIPVMix=function(f){if(!f||f.length<9){throw ZaIPUtil.ERROR_IP_FORMAT
}var b;
if((f[0]=="[")&&(f[f.length-1]=="]")){b=f.substring(1,f.length-1)
}else{b=f
}var e=b.substring(0,7);
if(!ZaIPUtil.IPMIX_PREFIX_RE.test(e)){throw ZaIPUtil.ERROR_IP_FORMAT
}var d=b.substring(7);
var c=ZaIPUtil.isIPV4(d);
if(!c){throw ZaIPUtil.ERROR_IP_FORMAT
}c.src=b;
return c
};
ZaCIDRData=function(c,b,d){this.ipData=c;
this.mask=b;
this.src=d
};
ZaIPData=function(d,b,c,e){this.fmtArr=d;
this.ver=b;
this.zoneSection=c;
this.src=e
};
ZaIPData.v4="4";
ZaIPData.v6="6";
ZaIPData.vMix="Mix"
}if(AjxPackage.define("zimbraAdmin.common.Lifetime_XFormItem")){MLifetime_XModelItem=function(){};
XModelItemFactory.createItemType("_MLIFETIME_","mlifetime",MLifetime_XModelItem);
MLifetime_XModelItem.prototype.minInclusive=0;
MLifetime_XModelItem.prototype.zeroValue=ZaMsg.Unlimited;
MLifetime_XModelItem.prototype.required=false;
MLifetime_XModelItem.prototype.validateType=function(b){var c="";
if(b==this.zeroValue){c="0"
}else{if(b!=null&&b.length>0){if(b.length>1){c=b.substr(0,b.length-1)
}else{c="0"
}}}if(c){c=XModelItem.prototype.validateNumber.call(this,c)
}if(c==0&&this.required){throw AjxMessageFormat.format(ZaMsg.exception_required_lifetime,b)
}return b
};
Lifetime_XFormItem=function(){};
XFormItemFactory.createItemType("_LIFETIME_","lifetime",Lifetime_XFormItem,Composite_XFormItem);
Lifetime_XFormItem.prototype.visibilityChecks=[ZaItem.hasReadPermission];
Lifetime_XFormItem.prototype.enableDisableChecks=[ZaItem.hasWritePermission];
Lifetime_XFormItem.prototype.nowrap=false;
Lifetime_XFormItem.prototype.labelWrap=true;
Lifetime_XFormItem.prototype.initializeItems=function(){this.items=[{type:_TEXTFIELD_,ref:".",labelLocation:_NONE_,cssClass:"admin_xform_number_input",visibilityChecks:[],enableDisableChecks:[],getDisplayValue:function(b){var c="";
if(b!=null&&b.length>0){if(b.length>1){c=parseInt(b)
}else{if(b=="0"){c="0"
}else{c=""
}}}this.getParentItem()._numericPart=c;
return((!c||c=="0")?this.getModelItem().zeroValue:c)
},elementChanged:function(d,c,b){if(d==this.getModelItem().zeroValue){d=0
}var e=null;
if(AjxUtil.isNumeric(d)){e=d+this.getParentItem()._stringPart
}this.getParentItem()._numericPart=d;
this.getForm().itemChanged(this.getParentItem(),e,b)
}},{type:_OSELECT1_,ref:".",labelLocation:_NONE_,choices:ZaModel.getTimeChoices(),visibilityChecks:[],enableDisableChecks:[],getDisplayValue:function(b){var c="d";
if(b!=null&&b.length>0){if(b.length>1){c=b.substr(b.length-1,1)
}else{if(b!="0"){c=(b=="d"||b=="h"||b=="m"||b=="s")?b:"d"
}}}this.getParentItem()._stringPart=c;
return c
},elementChanged:function(e,c,b){var d=this.getParentItem()._numericPart+e;
this.getParentItem()._stringPart=e;
this.getForm().itemChanged(this.getParentItem(),d,b)
}}];
Composite_XFormItem.prototype.initializeItems.call(this)
};
Lifetime_XFormItem.prototype.items=[];
Lifetime_XFormItem.prototype.getDisplayElement=function(){return this.getElement(this.getId()+"_display")
};
Lifetime1_XFormItem=function(){};
XFormItemFactory.createItemType("_LIFETIME1_","lifetime1",Lifetime1_XFormItem,Composite_XFormItem);
Lifetime1_XFormItem.prototype.nowrap=false;
Lifetime1_XFormItem.prototype.labelWrap=true;
Lifetime1_XFormItem.prototype.visibilityChecks=[ZaItem.hasReadPermission];
Lifetime1_XFormItem.prototype.enableDisableChecks=[ZaItem.hasWritePermission];
Lifetime1_XFormItem.prototype.initializeItems=function(){this.items=[{type:_TEXTFIELD_,ref:".",labelLocation:_NONE_,cssClass:"admin_xform_number_input",visibilityChecks:[],enableDisableChecks:[],getDisplayValue:function(b){var c="";
if(b!=null&&b.length>0){if(b.length>1){c=b.substr(0,b.length-1)
}else{if(b=="0"){c="0"
}else{c=""
}}}this.getParentItem()._numericPart=c;
return c
},elementChanged:function(d,c,b){var e=d+this.getParentItem()._stringPart;
this.getForm().itemChanged(this.getParentItem(),e,b)
}},{type:_OSELECT1_,ref:".",labelLocation:_NONE_,choices:ZaModel.getTimeChoices1(),visibilityChecks:[],enableDisableChecks:[],getDisplayValue:function(b){var c="d";
if(b!=null&&b.length>0){if(b.length>1){c=b.substr(b.length-1,1)
}else{if(b!="0"){c=(b=="d"||b=="h"||b=="m"||b=="s")?b:"d"
}}}this.getParentItem()._stringPart=c;
return c
},elementChanged:function(e,c,b){var d=this.getParentItem()._numericPart+e;
this.getForm().itemChanged(this.getParentItem(),d,b)
}}];
Composite_XFormItem.prototype.initializeItems.call(this)
};
Lifetime1_XFormItem.prototype.items=[];
Lifetime2_XFormItem=function(){};
Lifetime2_XFormItem.prototype.nowrap=false;
Lifetime2_XFormItem.prototype.labelWrap=true;
XFormItemFactory.createItemType("_LIFETIME2_","lifetime2",Lifetime2_XFormItem,Lifetime1_XFormItem);
Lifetime2_XFormItem.prototype.initializeItems=function(){this.items=[{type:_TEXTFIELD_,ref:".",labelLocation:_NONE_,cssClass:"admin_xform_number_input",visibilityChecks:[],enableDisableChecks:[],getDisplayValue:function(b){var c="";
if(b!=null&&b.length>0){if(b.length>1){c=b.substr(0,b.length-1)
}else{if(b=="0"){c="0"
}else{c=""
}}}this.getParentItem()._numericPart=c;
this.getParentItem()._stringPart="d";
return c
},elementChanged:function(d,c,b){var e=d+"d";
this.getForm().itemChanged(this.getParentItem(),e,b)
}},{type:_OUTPUT_,ref:null,labelLocation:_NONE_,value:"d",getDisplayValue:function(b){return AjxMsg.days
}}];
Composite_XFormItem.prototype.initializeItems.call(this)
};
Lifetime2_XFormItem.prototype.items=[];
LifetimeMinutes_XFormItem=function(){};
LifetimeMinutes_XFormItem.prototype.nowrap=false;
LifetimeMinutes_XFormItem.prototype.labelWrap=true;
XFormItemFactory.createItemType("_LIFETIME_MINUTES_","lifetime_minutes",LifetimeMinutes_XFormItem,Lifetime1_XFormItem);
LifetimeMinutes_XFormItem.prototype.initializeItems=function(){this.items=[{type:_TEXTFIELD_,ref:".",labelLocation:_NONE_,cssClass:"admin_xform_number_input",visibilityChecks:[],enableDisableChecks:[],getDisplayValue:function(b){var c="";
if(b!=null&&b.length>0){if(b.length>1){c=b.substr(0,b.length-1)
}else{if(b=="0"){c="0"
}else{c=""
}}}this.getParentItem()._numericPart=c;
this.getParentItem()._stringPart="m";
return c
},elementChanged:function(d,c,b){var e=d+"m";
this.getForm().itemChanged(this.getParentItem(),e,b)
}},{type:_OUTPUT_,ref:null,labelLocation:_NONE_,value:"m",getDisplayValue:function(b){return AjxMsg.minutes
}}];
Composite_XFormItem.prototype.initializeItems.call(this)
};
LifetimeMinutes_XFormItem.prototype.items=[];
Long_Lifetime_XFormItem=function(){};
XFormItemFactory.createItemType("_LONG_LIFETIME_","long_lifetime",Long_Lifetime_XFormItem,Composite_XFormItem);
Long_Lifetime_XFormItem.prototype.visibilityChecks=[ZaItem.hasReadPermission];
Long_Lifetime_XFormItem.prototype.enableDisableChecks=[ZaItem.hasWritePermission];
Long_Lifetime_XFormItem.prototype.nowrap=false;
Long_Lifetime_XFormItem.prototype.labelWrap=true;
Long_Lifetime_XFormItem.prototype.initializeItems=function(){this.items=[{type:_TEXTFIELD_,ref:".",labelLocation:_NONE_,cssClass:"admin_xform_number_input",visibilityChecks:[],enableDisableChecks:[],getDisplayValue:function(b){var c="";
if(b!=null&&b.length>0){if(b.length>1){c=parseInt(b)
}else{if(b=="0"){c="0"
}else{c=""
}}}this.getParentItem()._numericPart=c;
return((!c||c=="0")?"0":c)
},elementChanged:function(d,c,b){if(d==this.getModelItem().zeroValue){d=0
}var e=d+this.getParentItem()._stringPart;
this.getParentItem()._numericPart=d;
this.getForm().itemChanged(this.getParentItem(),e,b)
}},{type:_OSELECT1_,ref:".",labelLocation:_NONE_,choices:ZaModel.getLongTimeChoices,visibilityChecks:[],enableDisableChecks:[],getDisplayValue:function(b){var c="d";
if(b!=null&&b.length>0){if(b.length>1){c=b.substr(b.length-1,1)
}else{if(b!="0"){c=(b=="h"||b=="d"||b=="m"||b=="y")?b:"d"
}}}this.getParentItem()._stringPart=c;
return c
},elementChanged:function(e,c,b){var d=this.getParentItem()._numericPart+e;
this.getParentItem()._stringPart=e;
this.getForm().itemChanged(this.getParentItem(),d,b)
}}];
Composite_XFormItem.prototype.initializeItems.call(this)
};
Long_Lifetime_XFormItem.prototype.items=[];
Long_Lifetime_XFormItem.prototype.getDisplayElement=function(){return this.getElement(this.getId()+"_display")
};
MInterval_XModelItem=function(){};
XModelItemFactory.createItemType("_MINTERVAL_","minterval",MInterval_XModelItem,MLifetime_XModelItem);
MInterval_XModelItem.prototype.zeroValue=ZaMsg.never.toLowerCase()
}if(AjxPackage.define("zimbraAdmin.config.settings.ZaSettings")){ZaSettings=function(){};
ZaSettings.initialized=false;
ZaSettings.initializing=false;
ZaSettings.initMethods=new Array();
ZaSettings.RESULTSPERPAGE=50;
ZaSettings.MAXSEARCHRESULTS=100;
ZaSettings.HAVE_MORE_DOMAINS=false;
ZaSettings.postInit=function(){var e=DwtShell.getShell(window);
var g=ZaAppCtxt.getFromShell(e);
var f=g.getAppController();
f._createApp();
if(ZaSettings.initMethods){var d=ZaSettings.initMethods.length;
for(var c=0;
c<d;
c++){if(typeof(ZaSettings.initMethods[c])=="function"){try{ZaSettings.initMethods[c].call(this)
}catch(b){}}}}f._lauchNewApp();
if(ZaZimbraAdmin.isWarnOnExit){ZaZimbraAdmin.setOnbeforeunload(ZaZimbraAdmin._confirmExitMethod)
}ZaSettings.initialized=true;
ZaSettings.initializing=false
};
ZaSettings.initRights=function(){ZaSettings.ENABLED_UI_COMPONENTS=[];
ZaZimbraAdmin.currentAdminAccount=new ZaAccount();
try{if(ZaZimbraAdmin.currentAdminId){ZaZimbraAdmin.currentAdminAccount.load("id",ZaZimbraAdmin.currentAdminId,false,true)
}else{ZaZimbraAdmin.currentAdminAccount.load("name",ZaZimbraAdmin.currentUserLogin,false,true)
}}catch(j){}if(ZaZimbraAdmin.currentAdminAccount.attrs[ZaAccount.A_zimbraIsAdminAccount]=="TRUE"){ZaSettings.ENABLED_UI_COMPONENTS[ZaSettings.CARTE_BLANCHE_UI]=true
}if(AjxUtil.isEmpty(ZaZimbraAdmin.currentAdminAccount.attrs[ZaAccount.A_zimbraAdminConsoleUIComponents])){ZaZimbraAdmin.currentAdminAccount.attrs[ZaAccount.A_zimbraAdminConsoleUIComponents]=[]
}else{if(typeof(ZaZimbraAdmin.currentAdminAccount.attrs[ZaAccount.A_zimbraAdminConsoleUIComponents])=="string"){ZaZimbraAdmin.currentAdminAccount.attrs[ZaAccount.A_zimbraAdminConsoleUIComponents]=[ZaZimbraAdmin.currentAdminAccount.attrs[ZaAccount.A_zimbraAdminConsoleUIComponents]]
}var c=ZaZimbraAdmin.currentAdminAccount.attrs[ZaAccount.A_zimbraAdminConsoleUIComponents].length;
for(var h=0;
h<c;
h++){ZaSettings.ENABLED_UI_COMPONENTS[ZaZimbraAdmin.currentAdminAccount.attrs[ZaAccount.A_zimbraAdminConsoleUIComponents][h]]=true
}}var k=AjxSoapDoc.create("GetAllEffectiveRightsRequest",ZaZimbraAdmin.URN,null);
var e=k.set("grantee",ZaZimbraAdmin.currentUserId);
e.setAttribute("by","id");
var g=new Object();
g.soapDoc=k;
var d={};
d.controller=ZaApp.getInstance().getCurrentController();
d.busyMsg=ZaMsg.BUSY_REQUESTING_ACCESS_RIGHTS;
try{var f=ZaRequestMgr.invoke(g,d).Body.GetAllEffectiveRightsResponse;
ZaSettings.initGlobalRightsFromJS(f)
}catch(j){}var b=ZaSettings.getUIComponents();
var c=b.length;
for(var h=0;
h<c;
h++){ZaSettings.ENABLED_UI_COMPONENTS[b[h]._content]=true
}};
ZaSettings.initMethods.push(ZaSettings.initRights);
ZaSettings.initGlobalRightsFromJS=function(h){ZaSettings.targetRights={};
var b=[];
var g=[];
if(h&&h.target&&h.target instanceof Array){for(var e=0;
e<h.target.length;
e++){ZaSettings.parseTargetsRightsFromJS(h.target[e]);
if(h.target[e].type==ZaItem.COS){if(h.target[e].entries&&h.target[e].entries.length){for(var d=0;
d<h.target[e].entries.length;
d++){var f=h.target[e].entries[d].entry;
for(var c=0;
c<f.length;
c++){b.push(f[c].name)
}}}}else{if(h.target[e].type==ZaItem.DOMAIN){if(h.target[e].entries&&h.target[e].entries.length){for(var d=0;
d<h.target[e].entries.length;
d++){var f=h.target[e].entries[d].entry;
for(var c=0;
c<f.length;
c++){g.push(f[c].name)
}}}}}}}ZaApp.getInstance()._cosNameList=b;
ZaApp.getInstance()._domainNameList=g
};
ZaSettings.parseTargetsRightsFromJS=function(g){if(g){if(g.type&&AjxUtil.isEmpty(ZaSettings.targetRights[g.type])){ZaSettings.targetRights[g.type]={}
}if(g.all&&g.all.length&&g.all[0]&&g.all[0].right&&g.all[0].right.length){var c=g.all[0].right;
for(var b in c){if(!ZaSettings.targetRights[g.type][c[b].n]){ZaSettings.targetRights[g.type][c[b].n]={all:true,some:true}
}else{ZaSettings.targetRights[g.type][c[b].n].all=true;
ZaSettings.targetRights[g.type][c[b].n].some=true
}}}if(g.entries&&g.entries.length){for(var f=0;
f<g.entries.length;
f++){var m=g.entries[f];
if(m.rights&&m.rights.length&&m.rights[0]&&m.rights[0].right&&m.rights[0].right.length){var c=m.rights[0].right;
for(var b in c){if(!ZaSettings.targetRights[g.type][c[b].n]){ZaSettings.targetRights[g.type][c[b].n]={all:false}
}}}if(m.entry&&m.entry.length){for(var e=0;
e<m.entry.length;
e++){if(m.entry[e]&&m.entry[e].name){for(var h in ZaSettings.targetRights[g.type]){ZaSettings.targetRights[g.type][h][m.entry[e].name]=true;
ZaSettings.targetRights[g.type][h].some=true
}}}}}}if(g.inDomains&&g.inDomains.length){for(var f=0;
f<g.inDomains.length;
f++){var m=g.inDomains[f];
var l=[];
if(m.domain&&m.domain.length){for(var e=0;
e<m.domain.length;
e++){l.push(m.domain[e].name)
}}if(m.rights&&m.rights.length&&m.rights[0]&&m.rights[0].right&&m.rights[0].right.length){for(var e=0;
e<m.rights[0].right.length;
e++){if(!ZaSettings.targetRights[g.type][m.rights[0].right[e].n]){ZaSettings.targetRights[g.type][m.rights[0].right[e].n]={all:false,some:true}
}for(var d=0;
d<l.length;
d++){ZaSettings.targetRights[g.type][m.rights[0].right[e].n][l[d]]=true;
ZaSettings.targetRights[g.type][m.rights[0].right[e].n].some=true
}}}}}}};
ZaSettings.getUIComponents=function(d){soapDoc=AjxSoapDoc.create("GetAdminConsoleUICompRequest",ZaZimbraAdmin.URN,null);
if(d&&d.type&&d.id){var c=soapDoc.set(d.type,d.id);
c.setAttribute("by","id")
}csfeParams=new Object();
csfeParams.soapDoc=soapDoc;
reqMgrParams={};
reqMgrParams.controller=ZaApp.getInstance().getCurrentController();
reqMgrParams.busyMsg=ZaMsg.BUSY_REQUESTING_UI_COMP;
try{var e=ZaRequestMgr.invoke(csfeParams,reqMgrParams).Body.GetAdminConsoleUICompResponse;
var f=[];
if(!AjxUtil.isEmpty(e.a)){if(typeof(e.a)=="string"){f=[e.a]
}else{if(e.a instanceof Array){f=e.a
}}}return f
}catch(b){}return[]
};
ZaSettings.loadStyles=function(d){var c=document.getElementsByTagName("head")[0];
for(var b=0;
b<d.length;
b++){var e=document.createElement("link");
e.type="text/css";
e.rel="stylesheet";
e.href=d[b];
c.appendChild(e)
}};
ZaSettings.EnabledZimlet={};
ZaSettings.init=function(){if(ZaSettings.initialized||ZaSettings.initializing){return
}ZaSettings.initializing=true;
try{var q=AjxSoapDoc.create("GetAdminExtensionZimletsRequest",ZaZimbraAdmin.URN,null);
var g=new ZmCsfeCommand();
var h=new Object();
h.soapDoc=q;
h.noAuthToken=true;
var k=g.invoke(h);
var e=null;
try{if(k&&k.Body&&k.Body.GetAdminExtensionZimletsResponse&&k.Body.GetAdminExtensionZimletsResponse.zimlets&&k.Body.GetAdminExtensionZimletsResponse.zimlets.zimlet){e=k.Body.GetAdminExtensionZimletsResponse.zimlets.zimlet
}}catch(p){}if(appDevMode||(DBG.getDebugLevel()>AjxDebug.NONE)||(location.search&&(location.search.indexOf("mode=mjsf")!=-1))){if(e&&e.length>0){var s=new Array();
var o=new Array();
var c=e.length;
for(var d=0;
d<c;
d++){if(e[d]&&e[d].zimlet&&e[d].zimlet[0]&&e[d].zimletContext&&e[d].zimletContext[0]){var b=e[d].zimlet[0];
var f=e[d].zimletContext[0];
ZaSettings.EnabledZimlet[b.name]=true;
s.push([appContextPath,"/res/",b.name,".js?v=",appVers,ZaZimbraAdmin.LOCALE_QS].join(""));
if(b.include&&b.include.length>0){var n=b.include.length;
for(var l=0;
l<n;
l++){s.push(f.baseUrl+b.include[l]._content+"?v="+appVers)
}}if(b.includeCSS&&b.includeCSS.length>0){var m=b.includeCSS.length;
for(var l=0;
l<m;
l++){o.push(f.baseUrl+b.includeCSS[l]._content+"?v="+appVers)
}}}else{continue
}}try{if(o.length>0){ZaSettings.loadStyles(o)
}if(s.length>0){AjxInclude(s,null,new AjxCallback(ZaSettings.postInit))
}}catch(p){throw p
}}else{ZaSettings.postInit()
}}else{if(e&&e.length>0){var c=e.length;
for(var d=0;
d<c;
d++){if(e[d]&&e[d].zimlet&&e[d].zimlet[0]){var b=e[d].zimlet[0];
ZaSettings.EnabledZimlet[b.name]=true
}}}var r=["/service/zimlet/res/Zimlets-nodev_all.js.zgz",".js?v=",appVers,ZaZimbraAdmin.LOCALE_QS].join("");
AjxInclude([r],null,new AjxCallback(ZaSettings.postInit))
}}catch(p){ZaSettings.initializing=false;
throw p
}};
ZaSettings.get=function(c){var b=ZaSettings.INIT[c];
return b?b[3]:null
};
ZaSettings.T_CONFIG=1;
ZaSettings.D_STRING=1;
ZaSettings.D_INT=2;
ZaSettings.D_BOOLEAN=3;
ZaSettings.D_LDAP_TIME=4;
ZaSettings.D_HASH_TABLE=5;
ZaSettings.LOGO_URI="https://www.zimbra.com";
ZaSettings.CSFE_SERVER_URI=(location.port=="80")?"/service/admin/soap/":":"+location.port+"/service/admin/soap/";
ZaSettings.CSFE_MSG_FETCHER_URI=(location.port=="80")?"/service/content/get?":":"+location.port+"/service/content/get?";
ZaSettings.CONFIG_PATH=location.pathname+"js/zimbraAdmin/config";
ZaSettings.myDomainName=null;
ZaSettings.ZIMBRA_SUPPORT_URL="https://support.zimbra.com/help/index.php";
ZaSettings.ZIMBRA_SUPPORT_URL_QUERY=ZaSettings.ZIMBRA_SUPPORT_URL+"?query=";
ZaSettings.CARTE_BLANCHE_UI="cartBlancheUI";
ZaSettings.initConst=function(){ZaSettings.ALL_UI_COMPONENTS=[];
ZaSettings.ACCOUNT_LIST_VIEW="accountListView";
ZaSettings.ALL_UI_COMPONENTS.push({value:ZaSettings.ACCOUNT_LIST_VIEW,label:ZaMsg.UI_Comp_AccountListView});
ZaSettings.DL_LIST_VIEW="DLListView";
ZaSettings.ALL_UI_COMPONENTS.push({value:ZaSettings.DL_LIST_VIEW,label:ZaMsg.UI_Comp_DlListView});
ZaSettings.ALIAS_LIST_VIEW="aliasListView";
ZaSettings.ALL_UI_COMPONENTS.push({value:ZaSettings.ALIAS_LIST_VIEW,label:ZaMsg.UI_Comp_AliasListView});
ZaSettings.RESOURCE_LIST_VIEW="resourceListView";
ZaSettings.ALL_UI_COMPONENTS.push({value:ZaSettings.RESOURCE_LIST_VIEW,label:ZaMsg.UI_Comp_ResourceListView});
ZaSettings.COS_LIST_VIEW="COSListView";
ZaSettings.ALL_UI_COMPONENTS.push({value:ZaSettings.COS_LIST_VIEW,label:ZaMsg.UI_Comp_COSListView});
ZaSettings.DOMAIN_LIST_VIEW="domainListView";
ZaSettings.ALL_UI_COMPONENTS.push({value:ZaSettings.DOMAIN_LIST_VIEW,label:ZaMsg.UI_Comp_DomainListView});
ZaSettings.SERVER_LIST_VIEW="serverListView";
ZaSettings.ALL_UI_COMPONENTS.push({value:ZaSettings.SERVER_LIST_VIEW,label:ZaMsg.UI_Comp_ServerListView});
ZaSettings.ZIMLET_LIST_VIEW="zimletListView";
ZaSettings.ALL_UI_COMPONENTS.push({value:ZaSettings.ZIMLET_LIST_VIEW,label:ZaMsg.UI_Comp_ZimletListView});
ZaSettings.ADMIN_ZIMLET_LIST_VIEW="adminZimletListView";
ZaSettings.ALL_UI_COMPONENTS.push({value:ZaSettings.ADMIN_ZIMLET_LIST_VIEW,label:ZaMsg.UI_Comp_AdminZimletListView});
ZaSettings.GLOBAL_CONFIG_VIEW="globalConfigView";
ZaSettings.ALL_UI_COMPONENTS.push({value:ZaSettings.GLOBAL_CONFIG_VIEW,label:ZaMsg.UI_Comp_globalConfigView});
ZaSettings.GLOBAL_STATUS_VIEW="globalServerStatusView";
ZaSettings.ALL_UI_COMPONENTS.push({value:ZaSettings.GLOBAL_STATUS_VIEW,label:ZaMsg.UI_Comp_GlobalStatusView});
ZaSettings.SAVE_SEARCH="saveSearch";
ZaSettings.ALL_UI_COMPONENTS.push({value:ZaSettings.SAVE_SEARCH,label:ZaMsg.UI_Comp_SaveSearch});
ZaSettings.HELP_SEARCH="helpSearch";
ZaSettings.ALL_UI_COMPONENTS.push({value:ZaSettings.HELP_SEARCH,label:ZaMsg.UI_Comp_HelpSearch});
ZaSettings.MAILQ_VIEW="mailQueue";
ZaSettings.ALL_UI_COMPONENTS.push({value:ZaSettings.MAILQ_VIEW,label:ZaMsg.UI_Comp_mailQueueView});
ZaSettings.SERVER_STATS_VIEW="perServerStatisticsView";
ZaSettings.ALL_UI_COMPONENTS.push({value:ZaSettings.SERVER_STATS_VIEW,label:ZaMsg.UI_Comp_ServerStatsView});
ZaSettings.DOWNLOADS_VIEW="downloadsView";
ZaSettings.ALL_UI_COMPONENTS.push({value:ZaSettings.DOWNLOADS_VIEW,label:ZaMsg.UI_Comp_DownloadsView});
ZaSettings.HELP_CENTER_VIEW="helpCenterView";
ZaSettings.ALL_UI_COMPONENTS.push({value:ZaSettings.HELP_CENTER_VIEW,label:ZaMsg.UI_Comp_HelpCenterView});
ZaSettings.STATUS_PANE="statusPane";
ZaSettings.ALL_UI_COMPONENTS.push({value:ZaSettings.STATUS_PANE,label:ZaMsg.UI_Comp_StatusPane});
ZaSettings.CERTS_VIEW="certificatesView";
ZaSettings.ALL_UI_COMPONENTS.push({value:ZaSettings.CERTS_VIEW,label:ZaMsg.UI_Comp_CertificatesView})
};
ZaSettings.initConst();
ZaSettings.getCalendarViewChoinces=function(){return[{value:"day",label:ZaMsg.CalViewDay},{value:"week",label:ZaMsg.CalViewWeek},{value:"workWeek",label:ZaMsg.CalViewWorkWeek},{value:"month",label:ZaMsg.CalViewMonth},{value:"schedule",label:ZaMsg.CalViewSchedule},{value:"list",label:ZaMsg.CalViewList}]
};
ZaSettings.calendarViewChoinces=ZaSettings.getCalendarViewChoinces;
ZaSettings.getDayOfWeekChoices=function(){return[{value:0,label:ZaMsg.Sunday},{value:1,label:ZaMsg.Monday},{value:2,label:ZaMsg.Tuesday},{value:3,label:ZaMsg.Wednesday},{value:4,label:ZaMsg.Thursday},{value:5,label:ZaMsg.Friday},{value:6,label:ZaMsg.Saturday}]
};
ZaSettings.dayOfWeekChoices=ZaSettings.getDayOfWeekChoices;
ZaSettings.getApptVisibilityChoices=function(){return[{value:"public",label:ZaMsg.AptVisibilityPublic},{value:"private",label:ZaMsg.AptVisibilityPrivate}]
};
ZaSettings.apptVisibilityChoices=ZaSettings.getApptVisibilityChoices;
ZaSettings.getClientTypeChoices=function(){return[{value:"advanced",label:ZaMsg.clientClassic},{value:"modern",label:ZaMsg.clientModern}]
};
ZaSettings.clientTypeChoices=ZaSettings.getClientTypeChoices;
ZaSettings.getAuthorizationScheme=function(){return[{value:"basic",label:ZaMsg.choice_basic},{value:"form",label:ZaMsg.choice_form}]
};
ZaSettings.authorizationScheme=ZaSettings.getAuthorizationScheme;
ZaSettings.getExchangeServerType=function(){return[{value:"webdav",label:ZaMsg.choice_webdav},{value:"ews",label:ZaMsg.choice_ews}]
};
ZaSettings.exchangeServerType=ZaSettings.getExchangeServerType;
ZaSettings.OVERVIEW_CONFIG_ITEMS=[ZaSettings.COS_LIST_VIEW,ZaSettings.ZIMLET_LIST_VIEW,ZaSettings.SERVER_LIST_VIEW,ZaSettings.ADMIN_ZIMLET_LIST_VIEW,ZaSettings.DOMAIN_LIST_VIEW,ZaSettings.GLOBAL_CONFIG_VIEW];
ZaSettings.OVERVIEW_ADDRESSES_ITEMS=[ZaSettings.ACCOUNT_LIST_VIEW,ZaSettings.ALIAS_LIST_VIEW,ZaSettings.DL_LIST_VIEW,ZaSettings.RESOURCE_LIST_VIEW];
ZaSettings.OVERVIEW_TOOLS_ITEMS=[ZaSettings.MAILQ_VIEW,ZaSettings.DOWNLOADS_VIEW];
ZaSettings.OVERVIEW_MONITORING_ITEMS=[ZaSettings.GLOBAL_STATS_VIEW,ZaSettings.GLOBAL_STATUS_VIEW,ZaSettings.SERVER_STATS_VIEW];
ZaSettings.OVERVIEW_MANAGER_ACCOUNT_ITEMS=[ZaSettings.ACCOUNT_LIST_VIEW,ZaSettings.ALIAS_LIST_VIEW,ZaSettings.DL_LIST_VIEW,ZaSettings.RESOURCE_LIST_VIEW];
ZaSettings.OVERVIEW_ADMIN_ITEMS=[ZaSettings.COS_LIST_VIEW,ZaSettings.ZIMLET_LIST_VIEW,ZaSettings.SERVER_LIST_VIEW,ZaSettings.ADMIN_ZIMLET_LIST_VIEW,ZaSettings.DOMAIN_LIST_VIEW,ZaSettings.GLOBAL_CONFIG_VIEW];
ZaSettings.HELP_CENTER_ITEMS=[ZaSettings.HELP_CENTER_VIEW];
ZaSettings.STATUS_PANE_ITEMS=[ZaSettings.STATUS_PANE];
ZaSettings.OVERVIEW_MONITORING_ITEMS=[ZaSettings.MAILQ_VIEW,ZaSettings.GLOBAL_STATUS_VIEW,ZaSettings.SERVER_STATS_VIEW];
ZaSettings.DOMAIN_GAL_WIZ="domainGALWizard";
ZaSettings.DOMAIN_AUTH_WIZ="domainAuthWizard";
ZaSettings.DOMAIN_WIKI_WIZ="domainWikiWizard";
ZaSettings.DOMAIN_CHECK_MX_WIZ="domainCheckMXWiz";
ZaSettings.VIEW_RIGHTS={};
ZaSettings.VIEW_RIGHTS[ZaSettings.ACCOUNT_LIST_VIEW]="adminConsoleAccountRights";
ZaSettings.VIEW_RIGHTS[ZaSettings.DL_LIST_VIEW]="adminConsoleDLRights";
ZaSettings.VIEW_RIGHTS[ZaSettings.ALIAS_LIST_VIEW]="adminConsoleAliasRights";
ZaSettings.VIEW_RIGHTS[ZaSettings.RESOURCE_LIST_VIEW]="adminConsoleResourceRights";
ZaSettings.VIEW_RIGHTS[ZaSettings.COS_LIST_VIEW]="adminConsoleCOSRights";
ZaSettings.VIEW_RIGHTS[ZaSettings.DOMAIN_LIST_VIEW]="adminConsoleDomainRights";
ZaSettings.VIEW_RIGHTS[ZaSettings.SERVER_LIST_VIEW]="adminConsoleServerRights";
ZaSettings.VIEW_RIGHTS[ZaSettings.ZIMLET_LIST_VIEW]="adminConsoleZimletRights";
ZaSettings.VIEW_RIGHTS[ZaSettings.GLOBAL_STATUS_VIEW]="adminConsoleServerStatusRights";
ZaSettings.VIEW_RIGHTS[ZaSettings.ADMIN_ZIMLET_LIST_VIEW]="adminConsoleExtensionRights";
ZaSettings.VIEW_RIGHTS[ZaSettings.GLOBAL_CONFIG_VIEW]="adminConsoleGlobalRights";
ZaSettings.VIEW_RIGHTS[ZaSettings.MAILQ_VIEW]="adminConsoleMailQueueRights";
ZaSettings.VIEW_RIGHTS[ZaSettings.SAVE_SEARCH]="adminConsoleSavedSearchRights";
ZaSettings.VIEW_RIGHTS[ZaSettings.SERVER_STATS_VIEW]="adminConsoleServerStatisticRights";
ZaSettings.LICENSE_ENABLED=true;
ZaSettings.ADMIN_ZIMLETS_ENABLED=true;
ZaSettings.SAVE_SEARCH_ENABLED=true;
ZaSettings.TREE_ENABLED=true;
ZaSettings.CURRENT_APP_ENABLED=true;
ZaSettings.BANNER_ENABLED=true;
ZaSettings.STATUS_ENABLED=true;
ZaSettings.SEARCH_PANEL_ENABLED=true;
ZaSettings.SKIN_IDX=1;
ZaSettings.SKIN_APP_BOTTOM_TOOLBAR_ID=ZaSettings.SKIN_IDX++;
ZaSettings.SKIN_APP_MAIN_ID=ZaSettings.SKIN_IDX++;
ZaSettings.SKIN_APP_TOP_TOOLBAR_ID=ZaSettings.SKIN_IDX++;
ZaSettings.SKIN_CURRENT_APP_ID=ZaSettings.SKIN_IDX++;
ZaSettings.SKIN_LOGO_ID=ZaSettings.SKIN_IDX++;
ZaSettings.SKIN_SASH_ID=ZaSettings.SKIN_IDX++;
ZaSettings.SKIN_SEARCH_BUILDER_ID=ZaSettings.SKIN_IDX++;
ZaSettings.SKIN_SEARCH_BUILDER_TOOLBAR_ID=ZaSettings.SKIN_IDX++;
ZaSettings.SKIN_SEARCH_BUILDER_SASH_ID=ZaSettings.SKIN_IDX++;
ZaSettings.SKIN_SEARCH_ID=ZaSettings.SKIN_IDX++;
ZaSettings.SKIN_SHELL_ID=ZaSettings.SKIN_IDX++;
ZaSettings.SKIN_STATUS_ID=ZaSettings.SKIN_IDX++;
ZaSettings.SKIN_TREE_ID=ZaSettings.SKIN_IDX++;
ZaSettings.SKIN_USER_INFO_ID=ZaSettings.SKIN_IDX++;
ZaSettings.SKIN_APP_TABS_ID=ZaSettings.SKIN_IDX++;
ZaSettings.SKIN_HELP_ID=ZaSettings.SKIN_IDX++;
ZaSettings.SKIN_DW_ID=ZaSettings.SKIN_IDX++;
ZaSettings.SKIN_LOGIN_MSG_ID=ZaSettings.SKIN_IDX++;
ZaSettings.SKIN_LOGOFF_DOM_ID="skin_container_logoff";
ZaSettings.SKIN_HELP_DOM_ID="skin_container_help";
ZaSettings.SKIN_DW_DOM_ID="skin_container_dw";
ZaSettings.SKIN_USER_NAME_ID="skin_container_username";
ZaSettings.SKIN_LOGO_DOM_ID="skin_container_logo";
ZaSettings.SKIN_TREE_ID="skin_container_tree";
ZaSettings.SKIN_SEARCH_BUILDER_ID="skin_container_search_builder";
ZaSettings.SKIN_SEARCH_BUILDER_TB_ID="skin_container_search_builder_toolbar";
ZaSettings.SKIN_SEARCH_BUILDER_APP_SASH_ID="skin_container_sb_app_sash";
ZaSettings.SKIN_APP_SASH_ID="skin_container_tree_app_sash";
ZaSettings.SKIN_CURRENT_APP_ID="skin_container_current_app";
ZaSettings.SKIN_STATUS_ID="skin_container_status";
ZaSettings.SKIN_SEARCH_PANEL_ID="skin_container_search";
ZaSettings.INIT=new Object();
ZaSettings.INIT[ZaSettings.SKIN_APP_MAIN_ID]=[null,ZaSettings.T_CONFIG,ZaSettings.D_STRING,"skin_container_app_main"];
ZaSettings.INIT[ZaSettings.SKIN_APP_TOP_TOOLBAR_ID]=[null,ZaSettings.T_CONFIG,ZaSettings.D_STRING,"skin_container_top_toolbar"];
ZaSettings.INIT[ZaSettings.SKIN_CURRENT_APP_ID]=[null,ZaSettings.T_CONFIG,ZaSettings.D_STRING,ZaSettings.SKIN_CURRENT_APP_ID];
ZaSettings.INIT[ZaSettings.SKIN_LOGO_ID]=[null,ZaSettings.T_CONFIG,ZaSettings.D_STRING,ZaSettings.SKIN_LOGO_DOM_ID];
ZaSettings.INIT[ZaSettings.SKIN_SASH_ID]=[null,ZaSettings.T_CONFIG,ZaSettings.D_STRING,ZaSettings.SKIN_APP_SASH_ID];
ZaSettings.INIT[ZaSettings.SKIN_SEARCH_BUILDER_ID]=[null,ZaSettings.T_CONFIG,ZaSettings.D_STRING,ZaSettings.SKIN_SEARCH_BUILDER_ID];
ZaSettings.INIT[ZaSettings.SKIN_SEARCH_BUILDER_TOOLBAR_ID]=[null,ZaSettings.T_CONFIG,ZaSettings.D_STRING,ZaSettings.SKIN_SEARCH_BUILDER_TB_ID];
ZaSettings.INIT[ZaSettings.SKIN_SEARCH_BUILDER_SASH_ID]=[null,ZaSettings.T_CONFIG,ZaSettings.D_STRING,ZaSettings.SKIN_SEARCH_BUILDER_APP_SASH_ID];
ZaSettings.INIT[ZaSettings.SKIN_SEARCH_ID]=[null,ZaSettings.T_CONFIG,ZaSettings.D_STRING,ZaSettings.SKIN_SEARCH_PANEL_ID];
ZaSettings.INIT[ZaSettings.SKIN_SHELL_ID]=[null,ZaSettings.T_CONFIG,ZaSettings.D_STRING,"skin_outer"];
ZaSettings.INIT[ZaSettings.SKIN_STATUS_ID]=[null,ZaSettings.T_CONFIG,ZaSettings.D_STRING,ZaSettings.SKIN_STATUS_ID];
ZaSettings.INIT[ZaSettings.SKIN_TREE_ID]=[null,ZaSettings.T_CONFIG,ZaSettings.D_STRING,ZaSettings.SKIN_TREE_ID];
ZaSettings.INIT[ZaSettings.SKIN_LOGIN_MSG_ID]=[null,ZaSettings.T_CONFIG,ZaSettings.D_STRING,"skin_container_login_msg"];
ZaSettings.INIT[ZaSettings.SKIN_APP_TABS_ID]=[null,ZaSettings.T_CONFIG,ZaSettings.D_STRING,"skin_container_app_tabs"];
ZaSettings.LICENSE_ENABLED=true;
ZaSettings.ADMIN_ZIMLETS_ENABLED=true;
ZaSettings.SAVE_SEARCH_ENABLED=true;
ZaSettings.TREE_ENABLED=true;
ZaSettings.CURRENT_APP_ENABLED=false;
ZaSettings.BANNER_ENABLED=true;
ZaSettings.STATUS_ENABLED=false;
ZaSettings.SEARCH_PANEL_ENABLED=false;
ZaSettings.SKIN_IDX=1;
ZaSettings.SKIN_SHELL_ID=ZaSettings.SKIN_IDX++;
ZaSettings.SKIN_LOGO_ID=ZaSettings.SKIN_IDX++;
ZaSettings.SKIN_SEARCH_ID=ZaSettings.SKIN_IDX++;
ZaSettings.SKIN_REFRESH_ID=ZaSettings.SKIN_IDX++;
ZaSettings.SKIN_PREVIOUS_ID=ZaSettings.SKIN_IDX;
ZaSettings.SKIN_NEXT_ID=ZaSettings.SKIN_IDX++;
ZaSettings.SKIN_USERNAME_ID=ZaSettings.SKIN_IDX++;
ZaSettings.SKIN_HELP_ID=ZaSettings.SKIN_IDX++;
ZaSettings.SKIN_TREE_TOP_ID=ZaSettings.SKIN_IDX++;
ZaSettings.SKIN_TREE_ID=ZaSettings.SKIN_IDX++;
ZaSettings.SKIN_TREE_FOOTER_ID=ZaSettings.SKIN_IDX++;
ZaSettings.SKIN_APP_HEADER_ID=ZaSettings.SKIN_IDX++;
ZaSettings.SKIN_APP_MAIN_ID=ZaSettings.SKIN_IDX++;
ZaSettings.SKIN_APP_MAIN_FOOTER_ID=ZaSettings.SKIN_IDX++;
ZaSettings.SKIN_TOOL_HEADER_ID=ZaSettings.SKIN_IDX++;
ZaSettings.SKIN_TOOL_ID=ZaSettings.SKIN_IDX++;
ZaSettings.SKIN_TOOL_FOOTER_ID=ZaSettings.SKIN_IDX++;
ZaSettings.SKIN_SHELL_DOM_ID="skin_outer";
ZaSettings.SKIN_LOGO_DOM_ID="skin_container_logo";
ZaSettings.SKIN_TOASTER_DOM_ID="skin_container_toaster";
ZaSettings.SKIN_SEARCH_DOM_ID="skin_container_search";
ZaSettings.SKIN_REFRESH_DOM_ID="skin_container_refresh";
ZaSettings.SKIN_PREVIOUS_DOM_ID="skin_container_previous";
ZaSettings.SKIN_NEXT_DOM_ID="skin_container_next";
ZaSettings.SKIN_USERNAME_DOM_ID="skin_container_username";
ZaSettings.SKIN_HELP_DOM_ID="skin_container_help";
ZaSettings.SKIN_TREE_TOP_DOM_ID="skin_container_tree_top";
ZaSettings.SKIN_TREE_DOM_ID="skin_container_tree";
ZaSettings.SKIN_TREE_FOOTER_DOM_ID="skin_container_tree_footer";
ZaSettings.SKIN_APP_HEADER_DOM_ID="skin_container_app_tabs";
ZaSettings.SKIN_APP_MAIN_DOM_ID="skin_container_app_main";
ZaSettings.SKIN_APP_MAIN_FOOTER_DOM_ID="skin_container_main_footer";
ZaSettings.SKIN_TOOL_HEADER_DOM_ID="skin_container_tool_header";
ZaSettings.SKIN_TOOL_DOM_ID="skin_container_tool";
ZaSettings.SKIN_TOOL_FOOTER_DOM_ID="skin_container_tool_footer";
ZaSettings.INIT[ZaSettings.SKIN_SHELL_ID]=[null,ZaSettings.T_CONFIG,ZaSettings.D_STRING,ZaSettings.SKIN_SHELL_DOM_ID];
ZaSettings.INIT[ZaSettings.SKIN_LOGO_ID]=[null,ZaSettings.T_CONFIG,ZaSettings.D_STRING,ZaSettings.SKIN_LOGO_DOM_ID];
ZaSettings.INIT[ZaSettings.SKIN_SEARCH_ID]=[null,ZaSettings.T_CONFIG,ZaSettings.D_STRING,ZaSettings.SKIN_SEARCH_DOM_ID];
ZaSettings.INIT[ZaSettings.SKIN_REFRESH_ID]=[null,ZaSettings.T_CONFIG,ZaSettings.D_STRING,ZaSettings.SKIN_REFRESH_DOM_ID];
ZaSettings.INIT[ZaSettings.SKIN_PREVIOUS_ID]=[null,ZaSettings.T_CONFIG,ZaSettings.D_STRING,ZaSettings.SKIN_PREVIOUS_DOM_ID];
ZaSettings.INIT[ZaSettings.SKIN_NEXT_ID]=[null,ZaSettings.T_CONFIG,ZaSettings.D_STRING,ZaSettings.SKIN_NEXT_DOM_ID];
ZaSettings.INIT[ZaSettings.SKIN_USERNAME_ID]=[null,ZaSettings.T_CONFIG,ZaSettings.D_STRING,ZaSettings.SKIN_USERNAME_DOM_ID];
ZaSettings.INIT[ZaSettings.SKIN_HELP_ID]=[null,ZaSettings.T_CONFIG,ZaSettings.D_STRING,ZaSettings.SKIN_HELP_DOM_ID];
ZaSettings.INIT[ZaSettings.SKIN_TREE_TOP_ID]=[null,ZaSettings.T_CONFIG,ZaSettings.D_STRING,ZaSettings.SKIN_TREE_TOP_DOM_ID];
ZaSettings.INIT[ZaSettings.SKIN_TREE_ID]=[null,ZaSettings.T_CONFIG,ZaSettings.D_STRING,ZaSettings.SKIN_TREE_DOM_ID];
ZaSettings.INIT[ZaSettings.SKIN_TREE_FOOTER_ID]=[null,ZaSettings.T_CONFIG,ZaSettings.D_STRING,ZaSettings.SKIN_TREE_FOOTER_DOM_ID];
ZaSettings.INIT[ZaSettings.SKIN_APP_HEADER_ID]=[null,ZaSettings.T_CONFIG,ZaSettings.D_STRING,ZaSettings.SKIN_APP_HEADER_DOM_ID];
ZaSettings.INIT[ZaSettings.SKIN_APP_MAIN_ID]=[null,ZaSettings.T_CONFIG,ZaSettings.D_STRING,ZaSettings.SKIN_APP_MAIN_DOM_ID];
ZaSettings.INIT[ZaSettings.SKIN_APP_MAIN_FOOTER_ID]=[null,ZaSettings.T_CONFIG,ZaSettings.D_STRING,ZaSettings.SKIN_APP_MAIN_FOOTER_DOM_ID];
ZaSettings.INIT[ZaSettings.SKIN_TOOL_HEADER_ID]=[null,ZaSettings.T_CONFIG,ZaSettings.D_STRING,ZaSettings.SKIN_TOOL_HEADER_DOM_ID];
ZaSettings.INIT[ZaSettings.SKIN_TOOL_ID]=[null,ZaSettings.T_CONFIG,ZaSettings.D_STRING,ZaSettings.SKIN_TOOL_DOM_ID];
ZaSettings.INIT[ZaSettings.SKIN_TOOL_FOOTER_ID]=[null,ZaSettings.T_CONFIG,ZaSettings.D_STRING,ZaSettings.SKIN_TOOL_FOOTER_DOM_ID];
ZaSettings.getTimeZoneChoices=function(){if(!ZaSettings._timeZoneChoices){ZaSettings._timeZoneChoices=[{label:ZaMsg.VALUE_NOT_SET,value:""}];
var b=AjxTimezone.getZonePreferencesOptions();
var d=AjxTimezone.getZonePreferences();
for(var c=0;
c<b.length;
c++){ZaSettings._timeZoneChoices.push({label:d[c],value:b[c]})
}}return ZaSettings._timeZoneChoices
};
ZaSettings.timeZoneChoices=ZaSettings.getTimeZoneChoices;
ZaSettings.mailCharsetChoices=[{value:"Big5",label:"Big5"},{value:"Big5-HKSCS",label:"Big5-HKSCS"},{value:"EUC-JP",label:"EUC-JP"},{value:"EUC-KR",label:"EUC-KR"},{value:"GB18030",label:"GB18030"},{value:"GB2312",label:"GB2312"},{value:"GBK",label:"GBK"},{value:"IBM-Thai",label:"IBM-Thai"},{value:"IBM00858",label:"IBM00858"},{value:"IBM01140",label:"IBM01140"},{value:"IBM01141",label:"IBM01141"},{value:"IBM01142",label:"IBM01142"},{value:"IBM01143",label:"IBM01143"},{value:"IBM01144",label:"IBM01144"},{value:"IBM01145",label:"IBM01145"},{value:"IBM01146",label:"IBM01146"},{value:"IBM01147",label:"IBM01147"},{value:"IBM01148",label:"IBM01148"},{value:"IBM01149",label:"IBM01149"},{value:"IBM037",label:"IBM037"},{value:"IBM1026",label:"IBM1026"},{value:"IBM1047",label:"IBM1047"},{value:"IBM273",label:"IBM273"},{value:"IBM277",label:"IBM277"},{value:"IBM278",label:"IBM278"},{value:"IBM280",label:"IBM280"},{value:"IBM284",label:"IBM284"},{value:"IBM285",label:"IBM285"},{value:"IBM297",label:"IBM297"},{value:"IBM420",label:"IBM420"},{value:"IBM424",label:"IBM424"},{value:"IBM437",label:"IBM437"},{value:"IBM500",label:"IBM500"},{value:"IBM775",label:"IBM775"},{value:"IBM850",label:"IBM850"},{value:"IBM852",label:"IBM852"},{value:"IBM855",label:"IBM855"},{value:"IBM857",label:"IBM857"},{value:"IBM860",label:"IBM860"},{value:"IBM861",label:"IBM861"},{value:"IBM862",label:"IBM862"},{value:"IBM863",label:"IBM863"},{value:"IBM864",label:"IBM864"},{value:"IBM865",label:"IBM865"},{value:"IBM866",label:"IBM866"},{value:"IBM868",label:"IBM868"},{value:"IBM869",label:"IBM869"},{value:"IBM870",label:"IBM870"},{value:"IBM871",label:"IBM871"},{value:"IBM918",label:"IBM918"},{value:"imap-utf-7",label:"imap-utf-7"},{value:"ISO-2022-CN",label:"ISO-2022-CN"},{value:"ISO-2022-JP",label:"ISO-2022-JP"},{value:"ISO-2022-KR",label:"ISO-2022-KR"},{value:"ISO-8859-1",label:"ISO-8859-1"},{value:"ISO-8859-13",label:"ISO-8859-13"},{value:"ISO-8859-15",label:"ISO-8859-15"},{value:"ISO-8859-2",label:"ISO-8859-2"},{value:"ISO-8859-3",label:"ISO-8859-3"},{value:"ISO-8859-4",label:"ISO-8859-4"},{value:"ISO-8859-5",label:"ISO-8859-5"},{value:"ISO-8859-6",label:"ISO-8859-6"},{value:"ISO-8859-7",label:"ISO-8859-7"},{value:"ISO-8859-8",label:"ISO-8859-8"},{value:"ISO-8859-9",label:"ISO-8859-9"},{value:"JIS_X0201",label:"JIS_X0201"},{value:"JIS_X0212-1990",label:"JIS_X0212-1990"},{value:"KOI8-R",label:"KOI8-R"},{value:"macintosh",label:"macintosh"},{value:"macintosh_ce",label:"macintosh_ce"},{value:"Shift_JIS",label:"Shift_JIS"},{value:"TIS-620",label:"TIS-620"},{value:"US-ASCII",label:"US-ASCII"},{value:"UTF-16",label:"UTF-16"},{value:"UTF-16BE",label:"UTF-16BE"},{value:"UTF-16LE",label:"UTF-16LE"},{value:"utf-7",label:"utf-7"},{value:"UTF-8",label:"UTF-8"},{value:"windows-1250",label:"windows-1250"},{value:"windows-1251",label:"windows-1251"},{value:"windows-1252",label:"windows-1252"},{value:"windows-1253",label:"windows-1253"},{value:"windows-1254",label:"windows-1254"},{value:"windows-1255",label:"windows-1255"},{value:"windows-1256",label:"windows-1256"},{value:"windows-1257",label:"windows-1257"},{value:"windows-1258",label:"windows-1258"},{value:"windows-31j",label:"windows-31j"},{value:"x-Big5-Solaris",label:"x-Big5-Solaris"}];
ZaSettings.getLocaleChoices=function(){if(!ZaSettings.localeChoices){var f=AjxSoapDoc.create("GetAvailableLocalesRequest","urn:zimbraAccount",null);
var j={};
j.soapDoc=f;
var e={controller:(ZaApp.getInstance()?ZaApp.getInstance().getCurrentController():null),busyMsg:ZaMsg.BUSY_GET_LOCALE};
var h=ZaRequestMgr.invoke(j,e).Body.GetAvailableLocalesResponse;
var c=h.locale;
ZaSettings.localeChoices=[];
for(var d=0;
d<c.length;
d++){var b=c[d].localName;
if(c[d].name!=c[d].localName){b+=" - "+c[d].name
}var g=c[d].id.replace(/^in/,"id");
ZaSettings.localeChoices.push({value:g,label:b})
}}return ZaSettings.localeChoices
};
ZaSettings.isNetworkVersion=function(){return(ZaSettings.IS_ZCS_NETWORK_VERSION||false)
};
ZaSettings.isOctopus=function(){return(ZaSettings.IS_OCTOPUS||false)
};
ZaSettings.getSmtpDnsSupportLevel=function(){return[{value:"enabled",label:ZaMsg.NAD_MTA_SMTP_Dns_Enabled},{value:"disabled",label:ZaMsg.NAD_MTA_SMTP_Dns_Disabled},{value:"dnssec",label:ZaMsg.NAD_MTA_SMTP_Dns_Dnssec}]
};
ZaSettings.smtpDnsSupportLevel=ZaSettings.getSmtpDnsSupportLevel
}if(AjxPackage.define("zimbraAdmin.common.ZaAppCtxt")){ZaAppCtxt=function(){};
ZaAppCtxt.LABEL="appCtxt";
ZaAppCtxt.prototype.toString=function(){return"ZaAppCtxt"
};
ZaAppCtxt.getFromShell=function(b){return b.getData(ZaAppCtxt.LABEL)
};
ZaAppCtxt.prototype.setAppController=function(b){this._appController=b
};
ZaAppCtxt.prototype.getAppController=function(){return this._appController
};
ZaAppCtxt.prototype.getApp=function(){return this._appController.getApp()
};
ZaAppCtxt.prototype.getAppViewMgr=function(){return this._appController.getAppViewMgr()
};
ZaAppCtxt.prototype.setClientCmdHdlr=function(b){this._clientCmdHdlr=b
};
ZaAppCtxt.prototype.getClientCmdHdlr=function(){return this._clientCmdHdlr
};
ZaAppCtxt.prototype.getSearchController=function(){return this._appController.getSearchController()
};
ZaAppCtxt.prototype.getLoginDialog=function(){if(!this._loginDialog){this._loginDialog=new ZaLoginDialog(this.getShell(),null,null,this)
}return this._loginDialog
};
ZaAppCtxt.prototype.getMsgDialog=function(b){if(!this._msgDialog||b){this._msgDialog=new ZaMsgDialog(this.getShell())
}return this._msgDialog
};
ZaAppCtxt.prototype.getConfirmMsgDialog=function(b){if(!this._confirmMsgDialog||b){this._confirmMsgDialog=new ZaMsgDialog(this.getShell(),null,[DwtDialog.YES_BUTTON,DwtDialog.NO_BUTTON,DwtDialog.CANCEL_BUTTON],null,ZaId.CTR_GLOBAL+"_confirm3btn")
}return this._confirmMsgDialog
};
ZaAppCtxt.prototype.getConfirmMsgDialog2=function(b){if(!this._confirmMessageDialog2||b){this._confirmMessageDialog2=new ZaMsgDialog(this.getShell(),null,[DwtDialog.YES_BUTTON,DwtDialog.NO_BUTTON],null,ZaId.CTR_GLOBAL+"_confirm2btn")
}return this._confirmMessageDialog2
};
ZaAppCtxt.prototype.getErrorDialog=function(b){if(!this._errorDialog||b){this._errorDialog=new ZaErrorDialog(this.getShell())
}return this._errorDialog
};
ZaAppCtxt.prototype.getShell=function(){return this._shell
};
ZaAppCtxt.prototype.setShell=function(b){this._shell=b;
b.setData(ZaAppCtxt.LABEL,this)
};
ZaAppCtxt.prototype.getFolderTree=function(){return this._folderTree
};
ZaAppCtxt.prototype.setFolderTree=function(b){this._folderTree=b
};
ZaAppCtxt.prototype.getUsername=function(){return this._username
};
ZaAppCtxt.prototype.setUsername=function(b){this._username=b
};
ZaAppCtxt.prototype.getCurrentSearch=function(){return this._currentSearch
};
ZaAppCtxt.prototype.setCurrentSearch=function(b){this._currentSearch=b
};
ZaAppCtxt.prototype.getSettings=function(){if(!this._settings){this._settings=new ZaSettings(this)
}return this._settings
};
ZaAppCtxt.prototype.setSettings=function(b){this._settings=b
};
ZaAppCtxt.prototype.getRootTabGroup=function(){if(!this._rootTabGrp){this._rootTabGrp=new DwtTabGroup("ROOT")
}return this._rootTabGrp
};
ZaAppCtxt.getLogoURI=function(){if(skin&&skin.hints&&skin.hints.banner){return skin.hints.banner.url
}else{return ZaSettings.LOGO_URI
}}
}if(AjxPackage.define("zimbraAdmin.common.ZaAuthenticate")){ZaAuthenticate=function(b){if(arguments.length==0){return
}this._appCtxt=b;
this.uname=""
};
ZaAuthenticate.processResponseMethods=new Array();
ZaAuthenticate.prototype.toString=function(){return"ZaAuthenticate"
};
ZaAuthenticate.prototype.changePassword=function(b,f,c,j){var e=AjxSoapDoc.create("ChangePasswordRequest","urn:zimbraAccount");
var d=e.set("account",b);
d.setAttribute("by","name");
e.set("oldPassword",f);
e.set("password",c);
var h=new ZmCsfeCommand();
var g=new Object();
g.soapDoc=e;
g.asyncMode=true;
g.noAuthToken=true;
g.callback=j;
h.invoke(g)
};
ZaAuthenticate.prototype.execute=function(c,h,j,d,b){var e=AjxSoapDoc.create("AuthRequest",ZaZimbraAdmin.URN,null);
this.uname=c;
var g=new Object();
g.noAuthToken=true;
g.ignoreAuthToken=true;
if(c&&h){e.set("name",c);
e.set("password",h)
}else{e.getMethod().setAttribute("refresh","1")
}if(d){e.set("twoFactorCode",d)
}if(b){e.set("trustedDevice",b)
}e.set("virtualHost",location.hostname);
e.set("csrfTokenSecured",1);
var f=new ZmCsfeCommand();
g.soapDoc=e;
g.asyncMode=true;
g.skipExpiredToken=true;
g.callback=j;
f.invoke(g)
}
}if(AjxPackage.define("zimbraAdmin.common.ZaPopupMenu")){ZaPopupMenu=function(j,f,g,c,e,h,k){if(arguments.length==0){return
}f=f||"ActionMenu";
this._contextId=e;
this._menuType=h;
DwtMenu.call(this,j,DwtMenu.POPUP_STYLE,f,null,g,ZaId.getMenuId(this._contextId,this._menuType));
this._menuItems=new Object();
if(c){var d=0;
for(d=0;
k&&d<k.length;
d++){if(c[k[d]] instanceof ZaOperation){if(c[k[d]].id==ZaOperation.NONE||c[k[d]].id==ZaOperation.HELP){continue
}var b=(c[k[d]].id==ZaOperation.SEP)?DwtMenuItem.SEPARATOR_STYLE:DwtMenuItem.NO_STYLE;
this.createMenuItem(c[k[d]].id,c[k[d]].imageId,c[k[d]].caption,null,c[k[d]].enabled,b,null);
this.addSelectionListener(c[k[d]].id,c[k[d]].listener)
}}for(d in c){if(!k||AjxUtil.indexOf(k,d)<0){if(c[d] instanceof ZaOperation){if(c[d].id==ZaOperation.NONE||c[d].id==ZaOperation.HELP){continue
}var b=(c[d].id==ZaOperation.SEP)?DwtMenuItem.SEPARATOR_STYLE:DwtMenuItem.NO_STYLE;
this.createMenuItem(c[d].id,c[d].imageId,c[d].caption,null,c[d].enabled,b,null);
this.addSelectionListener(c[d].id,c[d].listener)
}}}}};
ZaPopupMenu.prototype=new DwtMenu;
ZaPopupMenu.prototype.constructor=ZaPopupMenu;
ZaPopupMenu.prototype.toString=function(){return"ZaPopupMenu"
};
ZaPopupMenu.prototype.addSelectionListener=function(c,b){this._menuItems[c].addSelectionListener(b)
};
ZaPopupMenu.prototype.removeSelectionListener=function(c,b){this._menuItems[c].removeSelectionListener(b)
};
ZaPopupMenu.prototype.popup=function(c,b,e,d){if(c==null){c=0
}if(b==null){b=Dwt.DEFAULT
}if(e==null){e=Dwt.DEFAULT
}DwtMenu.prototype.popup.call(this,c,b,e,d)
};
ZaPopupMenu.prototype.getMenuItem=function(b){return this._menuItems[b]
};
ZaPopupMenu.prototype.enable=function(d,b){if(!(d instanceof Array)){d=[d]
}for(var c=0;
c<d.length;
c++){if(this._menuItems[d[c]]){this._menuItems[d[c]].setEnabled(b)
}}};
ZaPopupMenu.prototype.enableAll=function(b){for(var c in this._menuItems){this._menuItems[c].setEnabled(b)
}};
ZaPopupMenu.prototype.addMenuItem=function(c,b){this._menuItems[c]=b
};
ZaPopupMenu.prototype.createMenuItem=function(h,f,j,c,e,g,d){var b=this._menuItems[h]=new DwtMenuItem({parent:this,style:g,radioGroupId:d,id:ZaId.getMenuItemId(this._contextId,ZaOperation.getStringName(h))});
if(f){b.setImage(f)
}if(j){b.setText(j)
}b.setEnabled(e!==false);
return b
};
ZaPopupMenu.prototype.createSeparator=function(){new DwtMenuItem(this,DwtMenuItem.SEPARATOR_STYLE)
}
}if(AjxPackage.define("zimbraAdmin.common.ZaAppViewMgr")){ZaAppViewMgr=function(d,b,c){this._shell=d;
this._controller=b;
this._appCtxt=b._appCtxt;
this._shellSz=this._shell.getSize();
this._shell.addControlListener(new AjxListener(this,this._shellControlListener));
this._needBannerLayout=false;
this._sashSupported=(window.skin&&typeof window.skin.setTreeWidth=="function");
this._sbSashSupported=(window.skin&&typeof window.skin.setSBHeight=="function");
this._currentView=null;
this._views=new Object();
this._hidden=new Array();
this._layoutStyle=new Object();
this._staleCallback=new Object();
this._compList=new Array();
this._components=new Object();
this._htmlEl=new Object();
this._containers=new Object();
this._contBounds=new Object();
this._pushCallback=new AjxCallback(this,this.pushView)
};
ZaAppViewMgr.DEFAULT=-1;
ZaAppViewMgr.RESIZE=1;
ZaAppViewMgr.BROWSE=2;
ZaAppViewMgr.OVERVIEW=3;
ZaAppViewMgr.TOOLBAR_SEPARATION=0;
ZaAppViewMgr.COMPONENT_SEPARATION=2;
ZaAppViewMgr.LAYOUT_VERTICAL=1;
ZaAppViewMgr.PENDING_VIEW="ZaAppViewMgr.PENDgING_VIEW";
ZaAppViewMgr.C_BANNER="BANNER";
ZaAppViewMgr.C_SEARCH="SEARCH";
ZaAppViewMgr.C_SEARCH_BUILDER="SEARCH BUILDER";
ZaAppViewMgr.C_SEARCH_BUILDER_TOOLBAR="SEARCH BUILDER TOOLBAR";
ZaAppViewMgr.C_SEARCH_BUILDER_SASH="SEARCH BUILDER SASH";
ZaAppViewMgr.C_CURRENT_APP="CURRENT APP";
ZaAppViewMgr.C_APP_TABS="APP TABS";
ZaAppViewMgr.C_TREE="TREE";
ZaAppViewMgr.C_TOOLBAR_TOP="TOP TOOLBAR";
ZaAppViewMgr.C_APP_CONTENT="APP CONTENT";
ZaAppViewMgr.C_STATUS="STATUS";
ZaAppViewMgr.C_SASH="SASH";
ZaAppViewMgr.C_LOGIN_MESSAGE="LOGIN_MESSAGE";
ZaAppViewMgr.CONT_ID_KEY=new Object();
ZaAppViewMgr.CONT_ID_KEY[ZaAppViewMgr.C_BANNER]=ZaSettings.SKIN_LOGO_ID;
ZaAppViewMgr.CONT_ID_KEY[ZaAppViewMgr.C_SEARCH]=ZaSettings.SKIN_SEARCH_ID;
ZaAppViewMgr.CONT_ID_KEY[ZaAppViewMgr.C_SEARCH_BUILDER]=ZaSettings.SKIN_SEARCH_BUILDER_ID;
ZaAppViewMgr.CONT_ID_KEY[ZaAppViewMgr.C_SEARCH_BUILDER_TOOLBAR]=ZaSettings.SKIN_SEARCH_BUILDER_TOOLBAR_ID;
ZaAppViewMgr.CONT_ID_KEY[ZaAppViewMgr.C_SEARCH_BUILDER_SASH]=ZaSettings.SKIN_SEARCH_BUILDER_SASH_ID;
ZaAppViewMgr.CONT_ID_KEY[ZaAppViewMgr.C_CURRENT_APP]=ZaSettings.SKIN_CURRENT_APP_ID;
ZaAppViewMgr.CONT_ID_KEY[ZaAppViewMgr.C_TREE]=ZaSettings.SKIN_TREE_ID;
ZaAppViewMgr.CONT_ID_KEY[ZaAppViewMgr.C_TOOLBAR_TOP]=ZaSettings.SKIN_APP_TOP_TOOLBAR_ID;
ZaAppViewMgr.CONT_ID_KEY[ZaAppViewMgr.C_APP_CONTENT]=ZaSettings.SKIN_APP_MAIN_ID;
ZaAppViewMgr.CONT_ID_KEY[ZaAppViewMgr.C_STATUS]=ZaSettings.SKIN_STATUS_ID;
ZaAppViewMgr.CONT_ID_KEY[ZaAppViewMgr.C_SASH]=ZaSettings.SKIN_SASH_ID;
ZaAppViewMgr.CONT_ID_KEY[ZaAppViewMgr.C_APP_TABS]=ZaSettings.SKIN_APP_TABS_ID;
ZaAppViewMgr.CONT_ID_KEY[ZaAppViewMgr.C_LOGIN_MESSAGE]=ZaSettings.SKIN_LOGIN_MSG_ID;
ZaAppViewMgr.C_BANNER="BANNER";
ZaAppViewMgr.C_SEARCH="SEARCH";
ZaAppViewMgr.C_TREE_TOP="TREE TOP";
ZaAppViewMgr.C_TREE="TREE";
ZaAppViewMgr.C_TREE_FOOTER="TREE FOOTER";
ZaAppViewMgr.C_APP_HEADER="APP HEADER";
ZaAppViewMgr.C_APP_CONTENT="APP CONTENT";
ZaAppViewMgr.C_APP_FOOTER="APP FOOTER";
ZaAppViewMgr.C_TOOL_HEADER="TOOL HEADER";
ZaAppViewMgr.C_TOOL="TOOL";
ZaAppViewMgr.C_TOOL_FOOTER="TOOL FOOTER";
ZaAppViewMgr.CONT_ID_KEY=new Object();
ZaAppViewMgr.CONT_ID_KEY[ZaAppViewMgr.C_BANNER]=ZaSettings.SKIN_LOGO_ID;
ZaAppViewMgr.CONT_ID_KEY[ZaAppViewMgr.C_SEARCH]=ZaSettings.SKIN_SEARCH_ID;
ZaAppViewMgr.CONT_ID_KEY[ZaAppViewMgr.C_TREE_TOP]=ZaSettings.SKIN_TREE_TOP_ID;
ZaAppViewMgr.CONT_ID_KEY[ZaAppViewMgr.C_TREE]=ZaSettings.SKIN_TREE_ID;
ZaAppViewMgr.CONT_ID_KEY[ZaAppViewMgr.C_TREE_FOOTER]=ZaSettings.SKIN_TREE_FOOTER_ID;
ZaAppViewMgr.CONT_ID_KEY[ZaAppViewMgr.C_APP_HEADER]=ZaSettings.SKIN_APP_HEADER_ID;
ZaAppViewMgr.CONT_ID_KEY[ZaAppViewMgr.C_APP_CONTENT]=ZaSettings.SKIN_APP_MAIN_ID;
ZaAppViewMgr.CONT_ID_KEY[ZaAppViewMgr.C_APP_FOOTER]=ZaSettings.SKIN_APP_MAIN_FOOTER_ID;
ZaAppViewMgr.CONT_ID_KEY[ZaAppViewMgr.C_TOOL_HEADER]=ZaSettings.SKIN_TOOL_HEADER_ID;
ZaAppViewMgr.CONT_ID_KEY[ZaAppViewMgr.C_TOOL]=ZaSettings.SKIN_TOOL_ID;
ZaAppViewMgr.CONT_ID_KEY[ZaAppViewMgr.C_TOOL_FOOTER]=ZaSettings.SKIN_TOOL_FOOTER_ID;
ZaAppViewMgr.prototype.toString=function(){return"ZaAppViewMgr"
};
ZaAppViewMgr.prototype.getShell=function(){return this._shell
};
ZaAppViewMgr.prototype.getCurrentView=function(){return this._currentView
};
ZaAppViewMgr.prototype.getCurrentViewContent=function(){var c=this._views[this._currentView];
var b=c[ZaAppViewMgr.C_APP_CONTENT];
return b
};
ZaAppViewMgr.prototype.getViewContentById=function(d){var c=this._views[d];
if(!c){return""
}var b=c[ZaAppViewMgr.C_APP_CONTENT];
return b
};
ZaAppViewMgr.prototype.createView=function(b,c){this._views[b]=c;
this.addComponents(c,false,true)
};
ZaAppViewMgr.prototype.pushView=function(b){if(b==this._currentView){this._setTitle(b);
return b
}this._setViewVisible(this._currentView,false);
if(this._currentView&&(this._currentView!=b)){this._hidden.push(this._currentView)
}this._removeFromHidden(b);
var c=this._lastView;
this._lastView=this._currentView;
this._currentView=b;
this._setViewVisible(b,true);
return b
};
ZaAppViewMgr.prototype.popView=function(){if(!this._currentView){throw new AjxException("no view to pop")
}this._setViewVisible(this._currentView,false);
this._lastView=this._currentView;
this._currentView=this._hidden.pop();
if(!this._currentView){throw new AjxException("no view to show")
}this._removeFromHidden(this._currentView);
this._setViewVisible(this._currentView,true);
return this._currentView
};
ZaAppViewMgr.prototype.removeHiddenView=function(b){var d=this._hidden.length;
for(var c=0;
c<d;
c++){if(this._hidden[c]==b){this._hidden.splice(c,1)
}}};
ZaAppViewMgr.prototype.setView=function(c){var b=this.pushView(c);
if(b){this._hidden=new Array()
}return b
};
ZaAppViewMgr.prototype.addComponents=function(e,k,b){var h=new Array();
for(var j in e){this._compList.push(j);
var f=e[j];
this._components[j]=f;
var c=f.getHtmlElement();
this._htmlEl[j]=c;
var d=ZaSettings.get(ZaAppViewMgr.CONT_ID_KEY[j]);
var g=document.getElementById(d);
if(!g){continue
}this._containers[j]=g;
if(Dwt.contains(g,c)){throw new AjxException("element already added to container: "+j)
}Dwt.removeChildren(g);
h.push(j);
if(!b){f.zShow(true)
}if(j==ZaAppViewMgr.C_SEARCH_BUILDER||j==ZaAppViewMgr.C_SEARCH_BUILDER_TOOLBAR){DBG.println(AjxDebug.DBG1,"Enforce Z-index to hidden "+j);
f.zShow(false)
}if(j==ZaAppViewMgr.C_SEARCH_BUILDER_SASH){f.zShow(false);
if(this._sbSashSupported){f.registerCallback(this._sbAppSashCallback,this)
}f.setCursor("default")
}if(j==ZaAppViewMgr.C_SASH){if(this._sashSupported){f.registerCallback(this._appTreeSashCallback,this)
}f.setCursor("default")
}}if(k){this._stickToGrid(h)
}};
ZaAppViewMgr.prototype.showSearchBuilder=function(b){skin.showSearchBuilder(b);
this._components[ZaAppViewMgr.C_SEARCH_BUILDER_TOOLBAR].zShow(b);
this._components[ZaAppViewMgr.C_SEARCH_BUILDER].zShow(b);
this._components[ZaAppViewMgr.C_SEARCH_BUILDER_SASH].zShow(b);
if(b){this._isAdvancedSearchBuilderDisplayed=true
}this.fitAll();
if(!b){this._components[ZaAppViewMgr.C_SEARCH_BUILDER].setLocation(Dwt.LOC_NOWHERE,Dwt.LOC_NOWHERE)
}};
ZaAppViewMgr.prototype.fitAll=function(){var b=[ZaAppViewMgr.C_SEARCH_BUILDER,ZaAppViewMgr.C_SEARCH_BUILDER_TOOLBAR,ZaAppViewMgr.C_SEARCH_BUILDER_SASH,ZaAppViewMgr.C_LOGIN_MESSAGE,ZaAppViewMgr.C_CURRENT_APP,ZaAppViewMgr.C_APP_TABS,ZaAppViewMgr.C_BANNER,ZaAppViewMgr.C_TREE,ZaAppViewMgr.C_SASH,ZaAppViewMgr.C_TOOLBAR_TOP,ZaAppViewMgr.C_APP_CONTENT];
b=[ZaAppViewMgr.C_BANNER,ZaAppViewMgr.C_SEARCH,ZaAppViewMgr.C_TREE_TOP,ZaAppViewMgr.C_TREE,ZaAppViewMgr.C_TREE_FOOTER,ZaAppViewMgr.C_APP_HEADER,ZaAppViewMgr.C_APP_CONTENT,ZaAppViewMgr.C_APP_FOOTER,ZaAppViewMgr.C_TOOL_HEADER,ZaAppViewMgr.C_TOOL,ZaAppViewMgr.C_TOOL_FOOTER];
this._stickToGrid(b)
};
ZaAppViewMgr.prototype._stickToGrid=function(g){this._shell.relayout();
for(var e=0;
e<g.length;
e++){var j=g[e];
var b=this._containers[j];
if(b){var f=ZaAppViewMgr._getBounds(b,j);
var c=this._components[j];
if(j==ZaAppViewMgr.C_APP_CONTENT||j==ZaAppViewMgr.C_TOOLBAR_TOP){var h=this._views[this._currentView];
c=h[j]
}if(c&&(c.getZIndex()!=Dwt.Z_HIDDEN)){try{c.setBounds(f.x,f.y,f.width,f.height)
}catch(d){ZaApp.getInstance().getCurrentController()._handleException(d,"ZaAppViewMgr.prototype._stickToGrid",nul,false)
}this._contBounds[j]=f;
if(c._resizeListener){c._resizeListener()
}}}}};
ZaAppViewMgr._getBounds=function(b,d){var c=Dwt.getBounds(b);
if(d==ZaAppViewMgr.C_TREE||d==ZaAppViewMgr.C_APP_CONTENT||d==ZaAppViewMgr.C_TOOL){c.x=c.x+1;
c.width=c.width>2?(c.width-2):c.width
}return c
};
ZaAppViewMgr.prototype._removeFromHidden=function(b){var d=new Array();
for(var c=0;
c<this._hidden.length;
c++){if(this._hidden[c]!=b){d.push(this._hidden[c])
}}this._hidden=d
};
ZaAppViewMgr.prototype._shellControlListener=function(e){if(e.oldWidth!=e.newWidth||e.oldHeight!=e.newHeight){this._shellSz.x=e.newWidth;
this._shellSz.y=e.newHeight;
var d=e.newWidth-e.oldWidth;
var h=e.newHeight-e.oldHeight;
if(this._isNewWindow){var c=this._views[this._currentView][ZaAppViewMgr.C_APP_TABS];
if(c){c.setSize(e.newWidth,Dwt.DEFAULT)
}var b=this._views[this._currentView][ZaAppViewMgr.C_TOOLBAR_TOP];
if(b){b.setSize(e.newWidth,Dwt.DEFAULT)
}var g=this._views[this._currentView][ZaAppViewMgr.C_APP_CONTENT];
if(g){g.setSize(e.newWidth,e.newHeight-b.getH())
}}else{if(h){var f=[ZaAppViewMgr.C_APP_CHOOSER,ZaAppViewMgr.C_SASH,ZaAppViewMgr.C_APP_CONTENT,ZaAppViewMgr.C_TREE];
f=[ZaAppViewMgr.C_TREE_TOP,ZaAppViewMgr.C_TREE,ZaAppViewMgr.C_TREE_FOOTER,ZaAppViewMgr.C_APP_HEADER,ZaAppViewMgr.C_APP_CONTENT,ZaAppViewMgr.C_APP_FOOTER,ZaAppViewMgr.C_TOOL_HEADER,ZaAppViewMgr.C_TOOL,ZaAppViewMgr.C_TOOL_FOOTER];
this._stickToGrid(f)
}if(d){var f=[ZaAppViewMgr.C_BANNER,ZaAppViewMgr.C_APP_TABS,ZaAppViewMgr.C_LOGIN_MESSAGE,ZaAppViewMgr.C_TOOLBAR_TOP,ZaAppViewMgr.C_APP_CONTENT,ZaAppViewMgr.C_SEARCH,ZaAppViewMgr.C_SEARCH_BUILDER,ZaAppViewMgr.C_SEARCH_BUILDER_TOOLBAR,ZaAppViewMgr.C_SEARCH_BUILDER_SASH];
f=[ZaAppViewMgr.C_BANNER,ZaAppViewMgr.C_SEARCH,ZaAppViewMgr.C_APP_HEADER,ZaAppViewMgr.C_APP_CONTENT,ZaAppViewMgr.C_APP_FOOTER,ZaAppViewMgr.C_TOOL_HEADER,ZaAppViewMgr.C_TOOL,ZaAppViewMgr.C_TOOL_FOOTER];
this._stickToGrid(f)
}}}};
ZaAppViewMgr.prototype._setViewVisible=function(b,c){var e=this._views[b];
if(c){var d=new Array();
for(var f in e){d.push(f);
e[f].zShow(true)
}this._stickToGrid(d);
this._setCurrentBar(b)
}else{for(var f in e){e[f].setLocation(Dwt.LOC_NOWHERE,Dwt.LOC_NOWHERE);
e[f].zShow(false)
}}};
ZaAppViewMgr.prototype._setTitle=function(b){var d=this._views[b];
var c=d[ZaAppViewMgr.C_APP_CONTENT];
var e="";
if(c&&c.getTitle){e=c.getTitle();
if(this._components[ZaAppViewMgr.C_CURRENT_APP]&&this._components[ZaAppViewMgr.C_CURRENT_APP].setCurrentAppLabel){this._components[ZaAppViewMgr.C_CURRENT_APP].setCurrentAppLabel(e)
}Dwt.setTitle(e?ZabMsg.zimbraTitle+": "+e:ZabMsg.zimbraTitle)
}};
ZaAppViewMgr.prototype._setCurrentBar=function(b){var c=this.getViewContentById(b);
var g=ZaApp.getInstance().getControllerById(b);
var f="";
var d="";
if(g&&g.getPopUpOperation){f=g.getPopUpOperation()
}if(c&&c.getBarImage){d=c.getBarImage()
}if(this._components[ZaAppViewMgr.C_APP_HEADER]){if(this._components[ZaAppViewMgr.C_APP_HEADER].updateMenu){this._components[ZaAppViewMgr.C_APP_HEADER].updateMenu(f,g._popupOrder)
}if(this._components[ZaAppViewMgr.C_APP_HEADER].setTypeImg&&d){this._components[ZaAppViewMgr.C_APP_HEADER].setTypeImg(d)
}var e=[];
if(g&&g.getAppBarAction){e=g.getAppBarAction()
}var h=[];
if(g&&g.getAppBarOrder){h=g.getAppBarOrder()
}if(this._components[ZaAppViewMgr.C_APP_HEADER].setActionButton){this._components[ZaAppViewMgr.C_APP_HEADER].setActionButton(e,h)
}}};
ZaAppViewMgr.prototype._appTreeSashCallback=function(e){if(!window.skin){return
}var b=skin.getTreeWidth();
if(!b){return 0
}if(!this.treeMinSize){this.treeMinSize=window.skin.hints.tree.minWidth||150;
this.treeMaxSize=window.skin.hints.tree.maxWidth||300
}if(b+e>this.treeMaxSize){e=Math.max(0,this.treeMaxSize-b)
}if(b+e<this.treeMinSize){e=Math.min(0,this.treeMinSize-b)
}var c=b+e;
skin.setTreeWidth(c);
var d=this;
setTimeout(function(){d.fitAll(true)
},0);
return e
};
ZaAppViewMgr.prototype._sbAppSashCallback=function(e){if(!window.skin){return
}var d=skin.getSBHeight();
if(!d){return 0
}if(!this.sbMinSize){this.sbMinSize=window.skin.hints.searchBuilder.minHeight||50;
this.sbMoveSize=d
}if(d+e>this.sbMoveSize){return 0
}if(d+e<this.sbMinSize){e=Math.min(0,this.sbMinSize-d)
}var b=d+e;
skin.setSBHeight(b);
var c=this;
setTimeout(function(){c.fitAll(true)
},0);
return e
}
}if(AjxPackage.define("zimbraAdmin.common.ZaLoginDialog")){ZaLoginDialog=function(d,h,c,f){c=c||"LoginScreen";
DwtComposite.call(this,{parent:d,className:c,posStyle:DwtControl.ABSOLUTE_STYLE});
this._zimbraAdminLoginURL=ZaZimbraAdmin.zimbraAdminLoginURL;
this._origClassName=c;
this._xparentClassName=c+"-Transparent";
this.setBounds(0,0,"100%","100%");
var e=this.getHtmlElement();
e.style.zIndex=Dwt.Z_DIALOG+1;
e.className=c;
this.setVisible(false);
var g=ZLoginFactory.copyDefaultParams(ZaMsg);
g.showPanelBorder=true;
g.showForm=true;
g.showUserField=true;
g.showPasswordField=true;
g.showRememberMeCheckbox=false;
g.showLogOff=true;
g.logOffAction="ZaLoginDialog._loginDiffListener()";
g.loginAction="ZaLoginDialog._loginListener(this)";
g.showButton=true;
g.companyURL=ZaAppCtxt.getLogoURI();
g.copyrightText=ZaItem.getSplashScreenCopyright();
g.clientLevelNotice=ZabMsg.clientLevelNotice?ZabMsg.clientLevelNotice:"";
var b=ZLoginFactory.getLoginDialogHTML(g);
this.setContent(b)
};
ZaLoginDialog.prototype=new DwtComposite;
ZaLoginDialog.prototype.constructor=ZaLoginDialog;
ZaLoginDialog.prototype.toString=function(){return"ZaLoginDialog"
};
ZaLoginDialog.prototype.getLoginURL=function(){var d=AjxSoapDoc.create("GetDomainInfoRequest",ZaZimbraAdmin.URN,null);
var b=d.set("domain",location.hostname);
b.setAttribute("by","virtualHostname");
var g=new Object();
g.soapDoc=d;
g.noAuthToken=true;
var c={};
var f=ZaRequestMgr.invoke(g,c).Body.GetDomainInfoResponse;
var e={};
ZaItem.prototype.initFromJS.call(e,f.domain[0]);
return e.attrs.zimbraAdminConsoleLoginURL
};
ZaLoginDialog.prototype.registerCallback=function(b,c){this._callback=new AjxCallback(c,b)
};
ZaLoginDialog.prototype.clearPassword=function(){ZLoginFactory.get(ZLoginFactory.PASSWORD_ID).value=""
};
ZaLoginDialog.prototype.showNewPasswordFields=function(){ZLoginFactory.showNewPasswordFields()
};
ZaLoginDialog.prototype.hideNewPasswordFields=function(){ZLoginFactory.hideNewPasswordFields()
};
ZaLoginDialog.prototype.enableUnameField=function(){ZLoginFactory.get(ZLoginFactory.USER_ID).disabled=false
};
ZaLoginDialog.prototype.disableUnameField=function(){ZLoginFactory.get(ZLoginFactory.USER_ID).disabled=true
};
ZaLoginDialog.prototype.enablePasswordField=function(){ZLoginFactory.get(ZLoginFactory.PASSWORD_ID).disabled=false
};
ZaLoginDialog.prototype.disablePasswordField=function(){ZLoginFactory.get(ZLoginFactory.PASSWORD_ID).disabled=true
};
ZaLoginDialog.prototype.setError=function(b){if(b){ZLoginFactory.showErrorMsg(b)
}};
ZaLoginDialog.prototype.clearError=function(){ZLoginFactory.hideErrorMsg()
};
ZaLoginDialog.prototype.setFocus=function(b){ZLoginFactory.showUserField(b)
};
ZaLoginDialog.prototype.setVisible=function(h,f){DwtComposite.prototype.setVisible.call(this,h);
if(h&&this._zimbraAdminLoginURL!=null&&this._zimbraAdminLoginURL.length>0){if(window.onbeforeunload!=null){ZaZimbraAdmin.setOnbeforeunload(ZaZimbraAdmin._confirmAuthInvalidExitMethod)
}location.replace(this._zimbraAdminLoginURL);
return
}for(var e=0;
e<ZLoginFactory.TAB_ORDER.length;
e++){var d=document.getElementById(ZLoginFactory.TAB_ORDER[e]);
if(h&&d){Dwt.associateElementWithObject(d,this)
}else{if(d){Dwt.disassociateElementFromObject(null,this)
}}}if(h){if(AjxEnv.isIE){var g=ZLoginFactory.getLoginPanel();
var c=this.getHtmlElement();
for(var e=0;
e<g.length;
e++){if(Dwt.contains(c,g[e])){g[e]["onkeydown"]=ZLoginFactory.handleKeyPress
}}}else{window.onkeypress=ZLoginFactory.handleKeyPress
}var b=ZLoginFactory.get(ZLoginFactory.USER_ID);
if(!b.disabled){b.focus()
}}else{if(window.onkeypress){window.onkeypress=null
}}};
ZaLoginDialog.prototype.addChild=function(c,b){this._children.add(c)
};
ZaLoginDialog.prototype._loginSelListener=function(){var g=AjxStringUtil.htmlEncode(ZLoginFactory.get(ZLoginFactory.USER_ID).value);
if(!(g&&g.length)){this.setError(ZaMsg.enterUsername);
return
}if(this._callback){var d=ZLoginFactory.get(ZLoginFactory.PASSWORD_ID).value;
var f="";
var e="";
var c="";
var b=false;
if(ZLoginFactory.isShown(ZLoginFactory.NEW_PASSWORD_ID)&&ZLoginFactory.isShown(ZLoginFactory.PASSWORD_CONFIRM_ID)){f=ZLoginFactory.get(ZLoginFactory.NEW_PASSWORD_ID).value;
e=ZLoginFactory.get(ZLoginFactory.PASSWORD_CONFIRM_ID).value
}if(ZLoginFactory.isShown(ZLoginFactory.TWO_FACTOR_CODE_FORM)){c=ZLoginFactory.get(ZLoginFactory.TWO_FACTOR_CODE).value
}if(ZLoginFactory.isShown(ZLoginFactory.TRUST_DEVICE)){b=ZLoginFactory.get(ZLoginFactory.TRUST_DEVICE).value
}this._callback.run(g,d,f,e,c,b)
}};
ZaLoginDialog._loginListener=function(d){var c=d;
while(c){var b=Dwt.getObjectFromElement(c);
if(b instanceof ZaLoginDialog){b._loginSelListener();
break
}c=c.parentNode
}};
ZaLoginDialog._loginDiffListener=function(b){ZmZimbraMail.logOff()
};
ZaLoginDialog.prototype.showTwoFactorCode=function(){ZLoginFactory.showTwoFactorCode()
}
}if(AjxPackage.define("zimbraAdmin.common.ZaController")){ZaController=function(d,b,c){if(arguments.length==0){return
}this._evtMgr=new AjxEventMgr();
this._iKeyName=c;
this._appCtxt=d;
this._container=b;
this._shell=d.getShell();
this._appViews=new Object();
this._currentView=null;
this._contentView=null;
this._authenticating=false;
this.initDialogs();
this.objType=ZaEvent.S_ACCOUNT;
this._helpURL=ZaController.helpURL;
this._helpButtonText=ZabMsg.zimbraHomePage;
this._popupOperations=new Array();
this._popupOrder=new Array();
this._appbarOperation=new Array();
this._appbarOrder=new Array()
};
ZaController.CLICK_DELAY=150;
ZaController.prototype.initDialogs=function(b){if(ZaApp.getInstance()){this._msgDialog=ZaApp.getInstance().dialogs.msgDialog;
this._errorDialog=ZaApp.getInstance().dialogs.errorDialog;
this._errorDialog.registerCallback(DwtDialog.OK_BUTTON,this._errorDialogCallback,this);
this._msgDialog.registerCallback(DwtDialog.OK_BUTTON,this._msgDialogCallback,this)
}this._loginDialog=this._appCtxt.getLoginDialog();
this._loginDialog.registerCallback(this.loginCallback,this)
};
ZaController.initToolbarMethods=new Object();
ZaController.initPopupMenuMethods=new Object();
ZaController.setViewMethods=new Object();
ZaController.changeActionsStateMethods=new Object();
ZaController.saveChangeCheckMethods=new Object();
ZaController.postChangeMethods=new Object();
ZaController.helpURL=location.pathname+ZaUtil.HELP_URL+"administration_console_help.htm?locid="+AjxEnv.DEFAULT_LOCALE;
ZaController.prototype.toString=function(){return"ZaController"
};
ZaController.prototype.getProgressDialog=function(){if(!ZaApp.getInstance().dialogs.progressDialog){ZaApp.getInstance().dialogs.progressDialog=new ZaXProgressDialog(this._appCtxt.getShell(),"300px","300px")
}return ZaApp.getInstance().dialogs.progressDialog
};
ZaController.prototype.setDirty=function(b){};
ZaController.prototype.setCurrentView=function(b){this._currentView=b
};
ZaController.prototype.getContentViewId=function(){return this._contentView.__internalId
};
ZaController.prototype.setEnabled=function(b){};
ZaController.prototype.popupErrorDialog=function(f,c,d){d=d?d:DwtMessageDialog.CRITICAL_STYLE;
this._execFrame={func:null,args:null,restartOnError:false};
var e="";
if(c!=null){if(c.msg){e+=ZaMsg.ERROR_MESSAGE+"  ";
e+=AjxStringUtil.htmlEncode(c.msg);
e+="\n"
}if(c.code){e+=ZaMsg.ERROR_CODE+"  ";
e+=c.code;
e+="\n"
}if(c.method){e+="Method:  ";
e+=c.method;
e+="\n"
}if(c.detail){e+=ZaMsg.ERROR_DETAILS;
e+=c.detail;
e+="\n"
}if(!e||e==""){for(var b in c){e+=b;
e+=": ";
try{e+=c[b].toString()
}catch(c){}e+="\n"
}}}if(!this._errorDialog){this._errorDialog=ZaApp.getInstance().dialogs.errorDialog
}if(this._errorDialog){this._errorDialog.setMessage(f,e,d,ZabMsg.zimbraAdminTitle);
if(!this._errorDialog.isPoppedUp()){this._errorDialog.popup()
}}};
ZaController.prototype.popupMsgDialog=function(c,b){if(!b){this._execFrame={func:null,args:null,restartOnError:false}
}this._msgDialog.setMessage(c,DwtMessageDialog.INFO_STYLE,ZabMsg.zimbraAdminTitle);
if(!this._msgDialog.isPoppedUp()){this._msgDialog.popup()
}};
ZaController.prototype.popupWarningDialog=function(c,b){if(!b){this._execFrame={func:null,args:null,restartOnError:false}
}this._msgDialog.setMessage(c,DwtMessageDialog.WARNING_STYLE,ZabMsg.zimbraAdminTitle);
if(!this._msgDialog.isPoppedUp()){this._msgDialog.popup()
}};
ZaController.prototype.getControllerForView=function(b){return this._appCtxt.getAppController()
};
ZaController.prototype.switchToNextView=function(b,c,d){var e=new AjxCallback(b,c,d);
e.run()
};
ZaController.prototype._setView=function(j,h,g){if(h){var b=ZaAppTabGroup._TABS.size();
if(b>=ZaAppTabGroup.TAB_LIMIT){this.popupMsgDialog(ZaMsg.too_many_tabs);
return
}}if(ZaController.setViewMethods[this._iKeyName]){var c=ZaController.setViewMethods[this._iKeyName];
var f=c.length;
for(var e=0;
e<f;
e++){if(typeof(c[e])=="function"){try{c[e].call(this,j,h,g)
}catch(d){this._handleException(d,"ZaController.prototype._setView");
break
}}}}this.changeActionsState()
};
ZaController.prototype.getMainTab=function(){return ZaApp.getInstance().getTabGroup().getMainTab()
};
ZaController.prototype.getSearchTab=function(){return ZaApp.getInstance().getTabGroup().getSearchTab()
};
ZaController.prototype.closeButtonListener=function(d,b,c,e,f){if(b){c.call(e,f)
}else{ZaApp.getInstance().popView()
}};
ZaController.prototype._helpButtonListener=function(){window.open(this._helpURL)
};
ZaController.prototype._showLoginDialog=function(){ZaZimbraAdmin._killSplash();
this._authenticating=true;
this._loginDialog.setVisible(true,false);
try{var b=null;
this._loginDialog.setFocus(b)
}catch(c){ZaZimbraAdmin.logOff()
}};
ZaController.prototype._handleException=function(h,b,e,l,f){if(h.code&&(h.code==ZmCsfeException.SVC_AUTH_EXPIRED||h.code==ZmCsfeException.SVC_AUTH_REQUIRED||h.code==ZmCsfeException.NO_AUTH_TOKEN||h.code==ZmCsfeException.AUTH_TOKEN_CHANGED)){try{ZmCsfeCommand.noAuth=true;
if(ZaApp.getInstance()!=null){var g=ZaApp.getInstance().dialogs;
for(var j in g){g[j].popdown()
}}this._execFrame={obj:f,func:b,args:e,restartOnError:l};
this._loginDialog.registerCallback(this.loginCallback,this);
if((!ZaZimbraAdmin.isFirstRequest&&(h.code==ZmCsfeException.NO_AUTH_TOKEN||h.code==ZmCsfeException.SVC_AUTH_REQUIRED||h.code==ZmCsfeException.SVC_AUTH_EXPIRED))){this._loginDialog.setError(ZaMsg.ERROR_SESSION_EXPIRED)
}this._loginDialog.clearPassword();
this._showLoginDialog()
}catch(c){if(window.console&&window.console.log){window.console.log(c.code)
}}}else{this._execFrame={obj:f,func:b,args:e,restartOnError:l};
if(!this._errorDialog){this._errorDialog=ZaApp.getInstance().dialogs.errorDialog
}if(this._errorDialog){this._errorDialog.registerCallback(DwtDialog.OK_BUTTON,this._errorDialogCallback,this)
}if(!h.code){this.popupErrorDialog(ZaMsg.JAVASCRIPT_ERROR+" in method "+b,h)
}else{if(h.code==ZmCsfeException.EMPTY_RESPONSE){this.popupErrorDialog(ZabMsg.ERROR_ZCS_NOT_RUNNING,h)
}else{if(h.code==ZmCsfeException.SOAP_ERROR){this.popupErrorDialog(ZaMsg.SOAP_ERROR,h)
}else{if(h.code==ZmCsfeException.NETWORK_ERROR||h.code==AjxException.NETWORK_ERROR){this.popupErrorDialog(ZaMsg.NETWORK_ERROR,h)
}else{if(h.code==ZmCsfeException.SVC_PARSE_ERROR){this.popupErrorDialog(ZaMsg.PARSE_ERROR,h)
}else{if(h.code==ZmCsfeException.SVC_PERM_DENIED){this.popupErrorDialog(ZaMsg.PERMISSION_DENIED,h)
}else{if(h.code==ZmCsfeException.ACCT_NO_SUCH_ACCOUNT){this.popupErrorDialog(ZaMsg.ERROR_NO_SUCH_ACCOUNT,h)
}else{if(h.code==ZmCsfeException.NO_SUCH_DISTRIBUTION_LIST){this.popupErrorDialog(ZaMsg.NO_SUCH_DISTRIBUTION_LIST,h)
}else{if(h.code==ZmCsfeException.ACCT_EXISTS){this.popupErrorDialog(ZaMsg.ERROR_ACCOUNT_EXISTS,h)
}else{if(h.code==ZmCsfeException.ACCT_TOO_MANY_ACCOUNTS){this.popupErrorDialog(ZaMsg.ERROR_TOO_MANY_ACCOUNTS,h,true)
}else{if(h.code==ZmCsfeException.VOLUME_NO_SUCH_PATH){this.popupErrorDialog(ZaMsg.ERROR_INVALID_VOLUME_PATH,h)
}else{if(h.code==ZmCsfeException.NO_SUCH_VOLUME){this.popupErrorDialog(ZaMsg.ERROR_NO_SUCH_VOLUME,h)
}else{if(h.code==ZmCsfeException.CANNOT_CHANGE_VOLUME){this.popupErrorDialog(ZaMsg.ERROR_CANNOT_CHANGE_VOLUME,h)
}else{if(h.code==ZmCsfeException.CANNOT_DELETE_VOLUME_IN_USE){this.popupErrorDialog(ZaMsg.CANNOT_DELETE_VOLUME_IN_USE,h)
}else{if(h.code==ZmCsfeException.ALREADY_EXISTS){this.popupErrorDialog(ZaMsg.ERROR_VOLUME_ALREADY_EXISTS,h)
}else{if(h.code==ZmCsfeException.LICENSE_ERROR){this.popupErrorDialog(ZaMsg.ERROR_LICENSE,h)
}else{if(h.code==ZmCsfeException.SVC_INVALID_REQUEST){this.popupErrorDialog(ZaMsg.ERROR_INVALID_REQUEST,h)
}else{if(h.code==ZmCsfeException.TOO_MANY_SEARCH_RESULTS){this.popupErrorDialog(ZaMsg.ERROR_TOO_MANY_SEARCH_RESULTS,h)
}else{if(h.code==ZmCsfeException.NO_SUCH_DOMAIN){this.popupErrorDialog(ZaMsg.ERROR_NO_SUCH_DOMAIN,h)
}else{if(h.code==ZmCsfeException.CSFE_SVC_ERROR||h.code==ZmCsfeException.SVC_FAILURE||(typeof(h.code)=="string"&&h.code&&h.code.match(/^(service|account|mail)\./))){this.popupErrorDialog(ZaMsg.SERVER_ERROR,h)
}else{if(h.code==AjxException.INVALID_PARAM){this.popupErrorDialog(ZaMsg.ERROR_INVALID_VALUE,h);
this._errorDialog._showDetail()
}else{var k=false;
for(var d in ZmCsfeException){if(ZmCsfeException[d]==h.code){this.popupErrorDialog(ZaMsg.SERVER_ERROR,h);
k=true;
break
}}if(!k){this.popupErrorDialog(ZaMsg.ERROR_UNKNOWN,h)
}}}}}}}}}}}}}}}}}}}}}}}};
ZaController.prototype._doAuth=function(g,d,c,b){ZmCsfeCommand.noAuth=true;
try{this._hideLoginDialog();
ZaZimbraAdmin.showSplash(this._shell);
var f=new AjxCallback(this,this.authCallback);
this.auth=new ZaAuthenticate(this._appCtxt);
this.auth.execute(g,d,f,c,b)
}catch(e){if(e.code==ZmCsfeException.NO_AUTH_TOKEN){throw (e)
}else{if(e.code==ZmCsfeException.ACCT_AUTH_FAILED||e.code==ZmCsfeException.SVC_PERM_DENIED||e.code==ZmCsfeException.SVC_FAILURE){this._showLoginDialog(false);
this._loginDialog.setError(ZaMsg.ERROR_AUTH_FAILED);
return
}else{if(e.code==ZmCsfeException.ACCT_CHANGE_PASSWORD){this._showLoginDialog(true);
this._loginDialog.disablePasswordField(true);
this._loginDialog.disableUnameField(true);
this._loginDialog.showNewPasswordFields();
this._loginDialog.registerCallback(this.changePwdCallback,this)
}else{this._showLoginDialog(false);
this.popupMsgDialog(ZaMsg.SERVER_ERROR,e)
}}}}};
ZaController.prototype._hideLoginDialog=function(b){this._loginDialog.setVisible(false);
if(b){this._loginDialog.setError(null);
this._loginDialog.clearPassword()
}};
ZaController.prototype.authCallback=function(e){ZaController.changePwdCommand=null;
if(e.isException&&e.isException()){var l=e.getException();
if(l.code==ZmCsfeException.ACCT_AUTH_FAILED||l.code==ZmCsfeException.SVC_PERM_DENIED||l.code==ZmCsfeException.SVC_FAILURE){this._showLoginDialog(false);
this._loginDialog.setError(ZaMsg.ERROR_AUTH_FAILED);
this._loginDialog.clearPassword();
return
}else{if(l.code==ZmCsfeException.ACCT_CHANGE_PASSWORD){this._showLoginDialog(true);
this._loginDialog.setError(ZaMsg.errorPassChange);
this._loginDialog.disablePasswordField(true);
this._loginDialog.disableUnameField(true);
this._loginDialog.showNewPasswordFields();
this._loginDialog.registerCallback(this.changePwdCallback,this)
}else{if(l.code==ZmCsfeException.PASSWORD_RECENTLY_USED||l.code==ZmCsfeException.PASSWORD_CHANGE_TOO_SOON){this._showLoginDialog(true);
var c=l.code==ZmCsfeException.ACCT_PASS_RECENTLY_USED?ZaMsg.errorPassRecentlyUsed:(ZaMsg.errorPassChangeTooSoon);
this._loginDialog.setError(c);
this._loginDialog.clearPassword();
this._loginDialog.setFocus(null)
}else{if(l.code==ZmCsfeException.PASSWORD_LOCKED){this._showLoginDialog(true);
this._loginDialog.disablePasswordField(false);
this._loginDialog.disableUnameField(false);
this._loginDialog.setError(ZaMsg.errorPassLocked)
}else{if(l.code==ZmCsfeException.MAINTENANCE_MODE){this._showLoginDialog(false);
this._loginDialog.setError(ZaMsg.ERROR_ACC_IN_MAINTENANCE_MODE);
this._loginDialog.clearPassword()
}else{if(l.code==ZmCsfeException.SVC_AUTH_EXPIRED){this._showLoginDialog(true);
this._loginDialog.setError(ZaMsg.ERROR_SESSION_EXPIRED);
this._loginDialog.clearPassword()
}else{if(this._msgDialog){this.popupMsgDialog(ZaMsg.SERVER_ERROR,l)
}else{this._showLoginDialog(true);
if(l&&this._refreshing&&l.code==ZmCsfeException.SVC_AUTH_REQUIRED){}else{if(l&&l.msg){this._loginDialog.setError(ZaMsg.SERVER_ERROR+" ("+l.msg+")")
}else{this._loginDialog.setError(ZaMsg.SERVER_ERROR)
}}}}}}}}}}else{try{var g=e.getResponse();
var j=g.Body;
if(j.AuthResponse&&j.AuthResponse.twoFactorAuthRequired&&j.AuthResponse.twoFactorAuthRequired._content){this._showLoginDialog(true);
this._loginDialog.registerCallback(this.loginCallback,this);
this._loginDialog.clearError();
this._loginDialog.showTwoFactorCode()
}else{if(j.AuthResponse&&j.AuthResponse.csrfToken&&j.AuthResponse.csrfToken._content){window.csrfToken=j.AuthResponse.csrfToken._content
}var n=true;
ZmCsfeCommand.noAuth=false;
var m=AjxSoapDoc.create("GetInfoRequest","urn:zimbraAccount",null);
var f=new ZmCsfeCommand();
var d=new Object();
d.soapDoc=m;
d.noSession=true;
d.noAuthToken=true;
ZaZimbraAdmin.isFirstRequest=true;
var e=f.invoke(d);
ZaZimbraAdmin.isFirstRequest=false;
ZaZimbraAdmin.initInfo(e);
ZaServerVersionInfo.load();
ZaZimbraAdmin.LOCALE_QS="";
if(ZaZimbraAdmin.LOCALE&&(ZaZimbraAdmin.LOCALE!=AjxEnv.DEFAULT_LOCALE)){if(ZaZimbraAdmin.LOCALE!=null){var k=ZaZimbraAdmin.LOCALE.indexOf("_");
if(k==-1){ZaZimbraAdmin.LOCALE_QS="&language="+ZaZimbraAdmin.LOCALE
}else{ZaZimbraAdmin.LOCALE_QS="&language="+ZaZimbraAdmin.LOCALE.substring(0,k)+"&country="+ZaZimbraAdmin.LOCALE.substring(ZaZimbraAdmin.LOCALE.length-2)
}}ZaZimbraAdmin.reload_msg();
this.initDialogs(true)
}if(ZaZimbraAdmin.isLanguage("ja")){if(ZaAccountXFormView.CONTACT_TAB_ATTRS){ZaAccountXFormView.CONTACT_TAB_ATTRS.push(ZaAccount.A_zimbraPhoneticCompany)
}if(ZaAccountXFormView.ACCOUNT_NAME_GROUP_ATTRS){ZaAccountXFormView.ACCOUNT_NAME_GROUP_ATTRS.push(ZaAccount.A_zimbraPhoneticFirstName,ZaAccount.A_zimbraPhoneticLastName)
}}if(!ZaSettings.initialized){ZaSettings.init()
}else{ZaZimbraAdmin._killSplash()
}if(ZaAuthenticate.processResponseMethods){var b=ZaAuthenticate.processResponseMethods.length;
for(var h=0;
h<b;
h++){if(typeof(ZaAuthenticate.processResponseMethods[h])=="function"){ZaAuthenticate.processResponseMethods[h].call(this,e)
}}}this._hideLoginDialog(true);
this._appCtxt.getAppController().startup(n)
}}catch(l){this._handleException(l,"ZaController.prototype.authCallback")
}}this._refreshing=false
};
ZaController.prototype.loginCallback=function(c,e,g,f,d,b){this._doAuth(c,e,d,b)
};
ZaController.prototype.changePwdCallback=function(l,k,f,e){if(f==null||f==""||e==null||e==""){this._loginDialog.setError(ZaMsg.enterNewPassword);
return
}if(f!=e){this._loginDialog.setError(ZaMsg.bothNewPasswordsMustMatch);
return
}var h=AjxSoapDoc.create("ChangePasswordRequest","urn:zimbraAccount");
var b=h.set("account",l);
b.setAttribute("by","name");
h.set("oldPassword",k);
h.set("password",f);
var d=null;
try{if(ZaController.changePwdCommand){return
}ZaController.changePwdCommand=new ZmCsfeCommand();
d=ZaController.changePwdCommand.invoke({soapDoc:h,noAuthToken:true,ignoreAuthToken:true,noSession:true}).Body.ChangePasswordResponse;
if(d){this._loginDialog.clearError();
this._loginDialog.enableUnameField();
this._loginDialog.enablePasswordField();
this._loginDialog.hideNewPasswordFields();
ZaZimbraAdmin.showSplash(this._shell);
var j=new AjxCallback(this,this.authCallback);
this.auth=new ZaAuthenticate(this._appCtxt);
this.auth.execute(l,f,j)
}}catch(g){ZaController.changePwdCommand=null;
if(g.code==ZmCsfeException.ACCT_PASS_RECENTLY_USED||g.code==ZmCsfeException.ACCT_PASS_CHANGE_TOO_SOON){var c=g.code==ZmCsfeException.ACCT_PASS_RECENTLY_USED?ZaMsg.errorPassRecentlyUsed:(ZaMsg.errorPassChangeTooSoon);
this._loginDialog.setError(c);
this._loginDialog.setFocus(null)
}else{if(g.code==ZmCsfeException.ACCT_PASS_LOCKED){this._loginDialog.disablePasswordField(false);
this._loginDialog.disableUnameField(false);
this._loginDialog.setError(ZaMsg.errorPassLocked)
}else{this._handleException(g,"ZaController.prototype.changePwdCallback")
}}}};
ZaController.prototype._errorDialogCallback=function(){ZaApp.getInstance().dialogs.errorDialog.popdown();
if(this._execFrame){if(this._execFrame.restartOnError&&!this._authenticating&&this._execFrame.method){this._execFrame.method.apply(this,this._execFrame.args)
}this._execFrame=null
}};
ZaController.prototype._msgDialogCallback=function(){this._msgDialog.popdown();
if(this._execFrame){if(this._execFrame.restartOnError&&!this._authenticating){this._execFrame.method.apply(this,this._execFrame.args)
}this._execFrame=null
}};
ZaController.prototype._initToolbar=function(){};
ZaController.prototype._initPopupMenu=function(){if(ZaController.initPopupMenuMethods[this._iKeyName]){var b=ZaController.initPopupMenuMethods[this._iKeyName];
var e=b.length;
for(var d=0;
d<e;
d++){if(typeof(b[d])=="function"){try{b[d].call(this)
}catch(c){this._handleException(c,"ZaController.prototype._initPopupMenu")
}}}}};
ZaController.prototype.closeCnfrmDlg=function(){if(ZaApp.getInstance().dialogs.confirmMessageDialog){ZaApp.getInstance().dialogs.confirmMessageDialog.popdown()
}};
ZaController.prototype.closeCnfrmDelDlg=function(){if(ZaApp.getInstance().dialogs.confirmMessageDialog2){ZaApp.getInstance().dialogs.confirmMessageDialog2.popdown()
}};
ZaController.prototype.getToolBar=function(){return null
};
ZaController.prototype.addCreationListener=function(b){this._evtMgr.addListener(ZaEvent.E_CREATE,b)
};
ZaController.prototype.removeCreationListener=function(b){this._evtMgr.removeListener(ZaEvent.E_CREATE,b)
};
ZaController.prototype.addRemovalListener=function(b){this._evtMgr.addListener(ZaEvent.E_REMOVE,b)
};
ZaController.prototype.removeRemovalListener=function(b){this._evtMgr.removeListener(ZaEvent.E_REMOVE,b)
};
ZaController.prototype.addChangeListener=function(b){this._evtMgr.addListener(ZaEvent.E_MODIFY,b)
};
ZaController.prototype.removeChangeListener=function(b){this._evtMgr.removeListener(ZaEvent.E_MODIFY,b)
};
ZaController.prototype.addSearchListener=function(b){this._evtMgr.addListener(ZaEvent.E_SEARCH,b)
};
ZaController.prototype.removeSearchListener=function(b){this._evtMgr.removeListener(ZaEvent.E_SEARCH,b)
};
ZaController.prototype.fireCreationEvent=function(d){try{if(this._evtMgr.isListenerRegistered(ZaEvent.E_CREATE)){var b=new ZaEvent(this.objType);
b.set(ZaEvent.E_CREATE,this);
if(d){b.setDetails(d)
}this._evtMgr.notifyListeners(ZaEvent.E_CREATE,b)
}}catch(c){this._handleException(c,"ZaXFormViewController.prototype.fireCreationEvent",d,false)
}};
ZaController.prototype.fireRemovalEvent=function(d){try{if(this._evtMgr.isListenerRegistered(ZaEvent.E_REMOVE)){var b=new ZaEvent(this.objType);
b.set(ZaEvent.E_REMOVE,this);
b.setDetails(d);
this._evtMgr.notifyListeners(ZaEvent.E_REMOVE,b)
}}catch(c){this._handleException(c,"ZaController.prototype.fireRemovalEvent",d,false)
}};
ZaController.prototype.fireChangeEvent=function(d){try{if(this._evtMgr.isListenerRegistered(ZaEvent.E_MODIFY)){var b=new ZaEvent(this.objType);
b.set(ZaEvent.E_MODIFY,this);
if(d){b.setDetails(d)
}this._evtMgr.notifyListeners(ZaEvent.E_MODIFY,b)
}}catch(c){this._handleException(c,"ZaXFormViewController.prototype.fireChangeEvent",null,false)
}};
ZaController.prototype.fireSearchEvent=function(d){try{if(this._evtMgr.isListenerRegistered(ZaEvent.E_SEARCH)){var b=new ZaEvent(this.objType);
b.set(ZaEvent.E_SEARCH,this);
b.setDetails(d);
this._evtMgr.notifyListeners(ZaEvent.E_SEARCH,b)
}}catch(c){this._handleException(c,"ZaController.prototype.fireSearchEvent",d,false)
}};
ZaController.showTooltip=function(d,c){var f=new DwtUiEvent(true);
f.setFromDhtmlEvent(d);
var b=DwtShell.getShell(window);
var e=b.getToolTip();
e.setContent(c.getInheritedProperty("toolTipContent"));
e.popup(f.docX,f.docY)
};
ZaController.hideTooltip=function(c){var b=DwtShell.getShell(window);
var d=b.getToolTip();
d.popdown()
};
ZaController.prototype.selectExistingTabByItemId=function(c,b){return false
};
ZaController.prototype.changeActionsState=function(){if(this.changeAcStateAcId){this.changeAcStateAcId=null
}if(this._popupOperations){for(var f in this._popupOperations){if(this._popupOperations[f] instanceof ZaOperation){this._popupOperations[f].enabled=true
}}}if(ZaController.changeActionsStateMethods[this._iKeyName]){var c=ZaController.changeActionsStateMethods[this._iKeyName];
var e=c.length;
for(var f=0;
f<e;
f++){if(typeof(c[f])=="function"){try{c[f].call(this)
}catch(d){this._handleException(d,"ZaController.prototype.changeActionsState")
}}}}if(this._actionMenu&&this._popupOperations){for(var f in this._popupOperations){if(this._popupOperations[f] instanceof ZaOperation&&!AjxUtil.isEmpty(this._actionMenu.getMenuItem(this._popupOperations[f].id))){this._actionMenu.getMenuItem(this._popupOperations[f].id).setEnabled(this._popupOperations[f].enabled)
}}}var g;
var b=ZaApp.getInstance().getCurrentController();
if(b&&this!=b){g=false
}else{g=true
}var h=ZaZimbraAdmin.getInstance().getSettingMenu();
if(g&&this._popupOperations&&h){for(var f in this._popupOperations){if(this._popupOperations[f] instanceof ZaOperation&&!AjxUtil.isEmpty(h.getMenuItem(this._popupOperations[f].id))){h.getMenuItem(this._popupOperations[f].id).setEnabled(this._popupOperations[f].enabled)
}}}};
ZaController.prototype.closeTabsInRemoveList=function(){var c=ZaApp.getInstance().getTabGroup();
for(var b=0;
b<this._itemsInTabList.length;
b++){var d=this._itemsInTabList[b];
c.removeTab(c.getTabByItemId(d.id));
this._removeList.push(d)
}c.resetTabSizes(true)
};
ZaController.prototype._showAccountsView=function(f,j,g){var l=null;
if(f==ZaItem.DL){l=ZaZimbraAdmin._DISTRIBUTION_LISTS_LIST_VIEW
}else{if(f==ZaItem.RESOURCE){l=ZaZimbraAdmin._RESOURCE_LIST_VIEW
}else{if(f==ZaItem.ALIAS){l=ZaZimbraAdmin._ALIASES_LIST_VIEW
}else{l=ZaZimbraAdmin._ACCOUNTS_LIST_VIEW
}}}var m=ZaApp.getInstance().getAccountListController(l);
var h="";
if(f!=ZaItem.ALIAS){if(!ZaSettings.HAVE_MORE_DOMAINS&&ZaZimbraAdmin.currentAdminAccount.attrs[ZaAccount.A_zimbraIsAdminAccount]!="TRUE"){var b=[];
var d={asyncMode:true,callback:this._showAccountsView.bind(this,f,j,g)};
var k=ZaApp.getInstance().getDomainList(false,d);
if(!k){return
}k=k.getArray();
var c=k.length;
if(c>0){b.push("(|")
}for(var e=0;
e<c;
e++){b.push("(zimbraMailDeliveryAddress=*@");
b.push(k[e].name);
b.push(")");
b.push("(zimbraMailAlias=*@");
b.push(k[e].name);
b.push(")")
}if(c>0){b.push(")");
h=b.join("")
}}}if(g){h=h+g
}m.setPageNum(1);
m.setQuery(h);
m.setSortOrder("1");
m.setSortField(ZaAccount.A_name);
m.setSearchTypes([ZaSearch.TYPES[f]]);
m.setDefaultType(f);
if(f==ZaItem.DL){m.setFetchAttrs(ZaDistributionList.searchAttributes)
}else{if(f==ZaItem.RESOURCE){m.setFetchAttrs(ZaResource.searchAttributes)
}else{if(f==ZaItem.ALIAS){m.setFetchAttrs(ZaAlias.searchAttributes)
}else{m.setFetchAttrs(ZaSearch.standardAttributes)
}}}if(ZaApp.getInstance().getCurrentController()){ZaApp.getInstance().getCurrentController().switchToNextView(m,ZaAccountListController.prototype.show,[true,j.refresh])
}else{m.show(true)
}};
ZaController.prototype.cancelBusyOverlay=function(b){if(this._currentRequest){this._currentRequest.cancel()
}ZaApp.getInstance().getAppCtxt().getShell().setBusy(false,b.busyId)
};
ZaController.prototype.getPopUpOperation=function(){if(this._popupOperations&&this._popupOperations.length>0){return this._popupOperations
}else{return""
}};
ZaController.prototype.getPopUpMenu=function(){if(this._actionMenu!=null){return this._actionMenu
}else{return null
}}
}if(AjxPackage.define("zimbraAdmin.common.ZaXFormViewController")){ZaXFormViewController=function(d,b,c){if(arguments.length==0){return
}this._currentObject=null;
ZaController.call(this,d,b,c);
this.deleteMsg=ZaMsg.Q_DELETE_ACCOUNT;
this._toolbarOrder=new Array()
};
ZaXFormViewController.prototype=new ZaController();
ZaXFormViewController.prototype.constructor=ZaXFormViewController;
ZaXFormViewController.preSaveValidationMethods=new Object();
ZaXFormViewController.prototype.show=function(b){if(!this.selectExistingTabByItemId(b.id)){this._setView(b,true)
}};
ZaXFormViewController.prototype.handleXFormChange=function(b){if(b&&b.form.hasErrors()&&this._toolbar){ZaZimbraAdmin.getInstance().getCurrentAppBar().enableButton(ZaOperation.SAVE,false)
}};
ZaXFormViewController.prototype.fireRemovalEvent=function(d){try{if(this._evtMgr.isListenerRegistered(ZaEvent.E_REMOVE)){var b=new ZaEvent(this.objType);
b.set(ZaEvent.E_REMOVE,this);
b.setDetails(d);
this._evtMgr.notifyListeners(ZaEvent.E_REMOVE,b)
}}catch(c){this._handleException(c,"ZaXFormViewController.prototype.fireRemovalEvent",d,false)
}};
ZaXFormViewController.prototype.closeButtonListener=function(f,b,e,g,h,d){if(this._view&&this._view.isDirty&&this._view.isDirty()){var c=new Object();
if(b){c.obj=g;
c.params=[h,this];
c.func=function(j){var k=j[0];
e.call(this,k);
var l=j[1]
}
}else{c.obj=ZaApp.getInstance();
c.params=[null,this];
c.func=function(j){var k=j[0];
var l=j[1];
l._setSelectionAfterCloseView(d)
}
}ZaApp.getInstance().dialogs.confirmMessageDialog.setMessage(ZaMsg.Q_SAVE_CHANGES,DwtMessageDialog.INFO_STYLE);
ZaApp.getInstance().dialogs.confirmMessageDialog.registerCallback(DwtDialog.YES_BUTTON,this.saveAndGoAway,this,c);
ZaApp.getInstance().dialogs.confirmMessageDialog.registerCallback(DwtDialog.NO_BUTTON,this.discardAndGoAway,this,c);
ZaApp.getInstance().dialogs.confirmMessageDialog.popup()
}else{if(b){e.call(g,h)
}else{if(this._view&&this._view._localXForm&&this._view.formDirtyLsnr){this._view._localXForm.removeListener(DwtEvent.XFORMS_FORM_DIRTY_CHANGE,this._view.formDirtyLsnr);
this._view._localXForm.removeListener(DwtEvent.XFORMS_VALUE_ERROR,this._view.formDirtyLsnr)
}this._setSelectionAfterCloseView(d)
}}};
ZaXFormViewController.prototype._setSelectionAfterCloseView=function(g){var b=ZaZimbraAdmin.getInstance().getOverviewPanelController().getOverviewPanel().getFolderTree();
if(!g){var c=b.getCurrentRootItem();
var d=b.getABPath(c.getData("dataItem"));
var e="";
var f=d.lastIndexOf(ZaTree.SEPERATOR);
if(f>0){e=d.substring(0,f)
}g=e
}b.setSelectionByPath(g,undefined,undefined,undefined,undefined,undefined,true)
};
ZaXFormViewController.prototype.deleteButtonListener=function(b){if(this._currentObject.id){ZaApp.getInstance().dialogs.confirmMessageDialog.setMessage(this.deleteMsg,DwtMessageDialog.INFO_STYLE);
ZaApp.getInstance().dialogs.confirmMessageDialog.registerCallback(DwtDialog.YES_BUTTON,this.deleteAndGoAway,this,null);
ZaApp.getInstance().dialogs.confirmMessageDialog.registerCallback(DwtDialog.NO_BUTTON,this.closeCnfrmDlg,this,null);
ZaApp.getInstance().dialogs.confirmMessageDialog.popup()
}else{ZaApp.getInstance().popView()
}};
ZaXFormViewController.prototype.saveButtonListener=function(c){try{this.validateChanges()
}catch(b){this._handleException(b,"ZaXFormViewController.prototype.saveButtonListener",null,false)
}return
};
ZaXFormViewController.prototype._saveChanges=function(){return true
};
ZaXFormViewController.prototype.saveAndGoAway=function(c){try{this.closeCnfrmDlg();
if(this._saveChanges()){this.fireChangeEvent(this._currentObject);
c.func.call(c.obj,c.params)
}}catch(b){this._handleException(b,ZaXFormViewController.prototype.saveAndGoAway,null,false)
}};
ZaXFormViewController.prototype.deleteAndGoAway=function(){try{if(this._currentObject.id){this._currentObject.remove();
this.fireRemovalEvent(this._currentObject);
var h="";
switch(this._currentObject.type){case ZaItem.ACCOUNT:h=ZaMsg.AccountDeleted;
break;
case ZaItem.DOMAIN:h=ZaMsg.DomainDeleted;
break;
case ZaItem.RESOURCE:h=ZaMsg.ResourceDeleted;
break;
case ZaItem.DL:h=ZaMsg.DLDeleted;
break;
case ZaItem.COS:h=ZaMsg.CosDeleted;
break;
default:h="";
break
}if(h){ZaApp.getInstance().getAppCtxt().getAppController().setActionStatusMsg(AjxMessageFormat.format(h,[this._currentObject.name]))
}}this.closeCnfrmDlg();
ZaApp.getInstance().popView();
var b=ZaZimbraAdmin.getInstance().getOverviewPanelController().getOverviewPanel().getFolderTree();
var c=b.getCurrentRootItem();
var e=b.getABPath(c.getData("dataItem"));
var f="";
var g=e.lastIndexOf(ZaTree.SEPERATOR);
if(g>0){f=e.substring(0,g)
}b.setSelectionByPath(f)
}catch(d){this.closeCnfrmDlg();
this._handleException(d,"ZaXFormViewController.prototype.deleteAndGoAway",null,false)
}};
ZaXFormViewController.prototype.discardAndGoAway=function(b){this.closeCnfrmDlg();
b.func.call(b.obj,b.params)
};
ZaXFormViewController.prototype.runValidationStack=function(d){try{var c=this.validationStack.length;
if(c>0){var e=this.validationStack[c-1];
this.validationStack.pop();
e.call(this,d)
}else{this._saveChangesCallback(d)
}}catch(b){this._handleException(b,"ZaXFormViewController.prototype.runValidationStack",null,false)
}};
ZaXFormViewController.prototype.validateChanges=function(d){this.validationStack=[];
if(ZaXFormViewController.preSaveValidationMethods[this._iKeyName]){var c=ZaXFormViewController.preSaveValidationMethods[this._iKeyName].length;
if(c>0){for(var b=0;
b<c;
b++){this.validationStack.push(ZaXFormViewController.preSaveValidationMethods[this._iKeyName][b])
}}}this.runValidationStack(d)
};
ZaXFormViewController.prototype._saveChangesCallback=function(c){try{if(this._saveChanges()){this._view.setDirty(false);
ZaZimbraAdmin.getInstance().getCurrentAppBar().enableButton(ZaOperation.SAVE,false);
this.closeCnfrmDlg();
if(typeof(this.changeActionsState)=="function"){this.changeActionsState()
}this._currentObject.refresh(false,true);
this.fireChangeEvent(this._currentObject);
if(c){c.func.call(c.obj,c.params)
}else{this._view.setObject(this._currentObject)
}}}catch(b){this._handleException(b,"ZaXFormViewController.prototype._saveChangesCallback",null,false)
}};
ZaXFormViewController.prototype.setDirty=function(b){var d=ZaZimbraAdmin.getInstance().getSettingMenu();
if(!d||!this._popupOperations||!this._popupOperations[ZaOperation.SAVE]||!this._popupOperations[ZaOperation.SAVE].id){return
}if(!this._popupOperations){return
}if(!this._popupOperations[ZaOperation.SAVE]){return
}var c=d.getMenuItem(this._popupOperations[ZaOperation.SAVE].id);
if(AjxUtil.isEmpty(c)){return
}if(b){c.setEnabled(true)
}else{c.setEnabled(false)
}if(b){ZaZimbraAdmin.getInstance().getCurrentAppBar().enableButton(ZaOperation.SAVE,true)
}else{ZaZimbraAdmin.getInstance().getCurrentAppBar().enableButton(ZaOperation.SAVE,false)
}};
ZaXFormViewController.setViewMethod=function(b){if(b.load){b.load()
}if(!this._UICreated){this._createUI()
}ZaApp.getInstance().pushView(this.getContentViewId());
this._view.setObject(b);
this._currentObject=b
};
ZaXFormViewController.prototype._createUI=function(){this._contentView=this._view=new this.tabConstructor(this._container);
var b=new Object();
b[ZaAppViewMgr.C_APP_CONTENT]=this._view;
ZaApp.getInstance().getAppViewMgr().createView(this.getContentViewId(),b);
this._UICreated=true;
ZaApp.getInstance()._controllers[this.getContentViewId()]=this
};
ZaXFormViewController.prototype._findAlias=function(d){var c=[ZaSearch.ALIASES,ZaSearch.DLS,ZaSearch.ACCOUNTS,ZaSearch.RESOURCES];
var e=new ZaSearchQuery(ZaSearch.searchAliasByNameQuery(d,c),c,null,false);
var b=ZaSearch.searchByQueryHolder(e,1,null,null);
return b.list.getArray()[0]
};
ZaXFormViewController.prototype.getAppBarAction=function(){if(AjxUtil.isEmpty(this._appbarOperation)){this._appbarOperation[ZaOperation.HELP]=new ZaOperation(ZaOperation.HELP,ZaMsg.TBB_Help,ZaMsg.TBB_Help_tt,"Help","Help",new AjxListener(this,this._helpButtonListener));
this._appbarOperation[ZaOperation.SAVE]=new ZaOperation(ZaOperation.SAVE,ZaMsg.TBB_Save,ZaMsg.ALTBB_Save_tt,"","",new AjxListener(this,this.saveButtonListener));
this._appbarOperation[ZaOperation.CLOSE]=new ZaOperation(ZaOperation.CLOSE,ZaMsg.TBB_Close,ZaMsg.ALTBB_Close_tt,"","",new AjxListener(this,this.closeButtonListener))
}return this._appbarOperation
};
ZaXFormViewController.prototype.getAppBarOrder=function(){if(AjxUtil.isEmpty(this._appbarOrder)){this._appbarOrder.push(ZaOperation.HELP);
this._appbarOrder.push(ZaOperation.SAVE);
this._appbarOrder.push(ZaOperation.CLOSE)
}return this._appbarOrder
};
ZaXFormViewController.prototype._helpButtonListener=function(){var b=this._helpURL;
if(this._contentView&&this._contentView.helpMap&&this._contentView.getCurrentTab()&&this._contentView.helpMap[this._contentView.getCurrentTab()]){b=this._contentView.helpMap[this._contentView.getCurrentTab()]
}window.open(b)
}
}if(AjxPackage.define("zimbraAdmin.common.ZaListViewController")){ZaListViewController=function(d,b,c){if(arguments.length==0){return
}this._currentPageNum=1;
this._currentSortOrder="1";
ZaController.call(this,d,b,c);
this.RESULTSPERPAGE=ZaSettings.RESULTSPERPAGE;
this.MAXSEARCHRESULTS=ZaSettings.MAXSEARCHRESULTS
};
ZaListViewController.prototype=new ZaController();
ZaListViewController.prototype.constructor=ZaListViewController;
ZaListViewController.prototype._nextPageListener=function(b){if(this._currentPageNum<this.numPages){this._currentPageNum++;
this.show()
}};
ZaListViewController.prototype._prevPageListener=function(b){if(this._currentPageNum>1){this._currentPageNum--;
this.show()
}};
ZaListViewController.prototype.getList=function(){return this._list
};
ZaListViewController.prototype._updateUI=function(f,e,h,g){if(!this._UICreated){this._createUI(e,h)
}if(f){var c=new Array();
var d=f.getArray().length;
for(var b=0;
b<d;
b++){c.push(f.getArray()[b])
}if(d<1){}this._contentView._bSortAsc=(this._currentSortOrder=="1");
this._contentView.set(AjxVector.fromArray(c),this._contentView._defaultColumnSortable);
this._contentView.setScrollSearchParams(this.scrollSearchParams);
this._contentView.setScrollHasMore(g)
}this._removeList=new Array();
this.changeActionsState()
};
ZaListViewController.prototype.closeButtonListener=function(d,b,c,e,f){if(b){c.call(e,f)
}else{ZaApp.getInstance().popView()
}this._UICreated=false;
if(this._contentView){this._contentView.dispose();
this._contentView=null
}if(this._actionMenu){this._actionMenu.dispose();
this._actionMenu=null
}this._popupOperations=[]
};
ZaListViewController.prototype.multipleSearchCallback=function(e,p){var q,w,h,c,B,t;
var f=null;
if(!p){return
}if(p instanceof Array&&p.length>0){f=p
}else{f=new Array();
f.push(p)
}t=f.length;
B=AjxSoapDoc.create("BatchRequest","urn:zimbra");
B.setMethodAttribute("onerror","continue");
for(var u=0;
u<t;
u++){var d=B.set("SearchDirectoryRequest",null,null,ZaZimbraAdmin.URN);
var k=B.set("query",f[u].query,d);
q=(f[u].sortBy!=undefined)?f[u].sortBy:ZaAccount.A_name;
w=(f[u].limit!=undefined)?f[u].limit:ZaAccount.RESULTSPERPAGE;
h=(f[u].offset!=undefined)?f[u].offset:"0";
c=(f[u].sortAscending!=null)?f[u].sortAscending:"1";
d.setAttribute("offset",h);
d.setAttribute("limit",w);
d.setAttribute("sortBy",q);
d.setAttribute("sortAscending",c);
if(f[u].applyCos){d.setAttribute("applyCos",f[u].applyCos)
}else{d.setAttribute("applyCos",false)
}if(f[u].applyConfig){d.setAttribute("applyConfig",f[u].applyConfig)
}else{d.setAttribute("applyConfig","false")
}if(f[u].domain){d.setAttribute("domain",f[u].domain)
}if(f[u].attrs&&f[u].attrs.length>0){d.setAttribute("attrs",f[u].attrs.toString())
}if(f[u].types&&f[u].types.length>0){d.setAttribute("types",f[u].types.toString())
}if(f[u].maxResults){d.setAttribute("maxResults",f[u].maxResults.toString())
}}var z=new Object();
z.soapDoc=B;
var g={controller:this,busyMsg:ZaMsg.BUSY_REQUESTING_ACCESS_RIGHTS};
var A=ZaRequestMgr.invoke(z,g);
var l;
if(A.isException&&A.isException()){ZaApp.getInstance().getCurrentController()._handleException(A.getException(),"ZaListViewController.prototype.multipleSearchCallback",null,false)
}else{if(A.Body.BatchResponse.Fault){var m=A.Body.BatchResponse.Fault;
if(m instanceof Array){m=m[0]
}if(m){var v=ZmCsfeCommand.faultToEx(m);
ZaApp.getInstance().getCurrentController()._handleException(v,"ZaListViewController.prototype.multipleSearchCallback",null,false)
}}else{var r=A.Body.BatchResponse;
if(r.SearchDirectoryResponse&&r.SearchDirectoryResponse instanceof Array){var b=r.SearchDirectoryResponse.length;
ZaSearch.TOO_MANY_RESULTS_FLAG=false;
this._searchTotal=0;
this._list=null;
var y=false;
for(var u=0;
u<b;
u++){resp=r.SearchDirectoryResponse[u];
var o=new ZaItemList(e.CONS);
o.loadFromJS(resp);
if(!this._list){this._list=o
}else{if(this._list instanceof ZaItemList&&o.size()>0){var n=o.getVector();
for(var s=0;
s<n.size();
s++){var x=n.get(s);
if(!this._list.getVector().contains(x)){this._list.add(x)
}}}}y=resp.more|y;
this._searchTotal+=resp.searchTotal;
l=this.getSearchResultStats(resp,l)
}var w=e.limit?e.limit:this.RESULTSPERPAGE;
this.numPages=Math.ceil(this._searchTotal/e.limit);
if(e.show){this._show(this._list,e.openInNewTab,e.openInSearchTab,y,e.isShowBubble)
}else{this._updateUI(this._list,e.openInNewTab,e.openInSearchTab,y)
}}}}ZaZimbraAdmin.getInstance().getOverviewPanelController().fireSearchEvent(l)
};
ZaListViewController.prototype.getAppBarAction=function(){if(AjxUtil.isEmpty(this._appbarOperation)){this._appbarOperation[ZaOperation.HELP]=new ZaOperation(ZaOperation.HELP,ZaMsg.TBB_Help,ZaMsg.TBB_Help_tt,"Help","Help",new AjxListener(this,this._helpButtonListener))
}return this._appbarOperation
};
ZaListViewController.prototype.getAppBarOrder=function(){if(AjxUtil.isEmpty(this._appbarOrder)){this._appbarOrder.push(ZaOperation.HELP)
}return this._appbarOrder
};
ZaListViewController.prototype.searchCallback=function(c,d){try{if(c.busyId){ZaApp.getInstance().getAppCtxt().getShell().setBusy(false,c.busyId)
}if(!d&&!this._currentRequest.cancelled){throw (new AjxException(ZaMsg.ERROR_EMPTY_RESPONSE_ARG,AjxException.UNKNOWN,"ZaListViewController.prototype.searchCallback"))
}var m;
if(d&&d.isException()&&!this._currentRequest.cancelled){ZaSearch.handleTooManyResultsException(d.getException(),"ZaListViewController.prototype.searchCallback");
this._list=new ZaItemList(c.CONS);
this._searchTotal=0;
this.numPages=0;
if(c.show){this._show(this._list)
}else{this._updateUI(this._list)
}}else{ZaSearch.TOO_MANY_RESULTS_FLAG=false;
this._list=null;
var l=new ZaItemList(c.CONS);
this._searchTotal=0;
if(d&&!d.isException()){var e=d.getResponse().Body.SearchDirectoryResponse;
this._list=new ZaItemList(c.CONS);
l.loadFromJS(e);
if(c.resultFilter&&l.size()>0){var n=l.getVector();
for(var g=0;
g<n.size();
g++){var o=n.get(g);
var j=null;
if(o.type==ZaItem.ALIAS){j=o.getAliasTargetObj()
}else{j=o
}for(var h in c.resultFilter){if(j.attrs[h].indexOf(c.resultFilter[h])>=0){this._list.add(o);
break
}}}}else{this._list=l
}this._searchTotal=e.searchTotal;
var b=c.limit?c.limit:this.RESULTSPERPAGE;
this.numPages=Math.ceil(this._searchTotal/c.limit);
m=this.getSearchResultStats(e)
}if(c.show){this._show(this._list,c.openInNewTab,c.openInSearchTab,e.more,c.isShowBubble)
}else{this._updateUI(this._list,c.openInNewTab,c.openInSearchTab,e.more)
}}ZaZimbraAdmin.getInstance().getOverviewPanelController().fireSearchEvent(m)
}catch(k){if(k.code!=ZmCsfeException.MAIL_QUERY_PARSE_ERROR){this._handleException(k,"ZaListViewController.prototype.searchCallback")
}else{this.popupErrorDialog(ZaMsg.queryParseError,k);
if(this._searchField){this._searchField.setEnabled(true)
}}}};
ZaListViewController.prototype.getSearchResultStats=function(c,d){var b={};
if(d){b=d
}if(!c||!c.searchTotal){return b
}if(b.searchTotal){b.searchTotal+=c.searchTotal
}else{b.searchTotal=c.searchTotal
}return b
};
ZaListViewController.prototype.handleChange=function(b){if(b&&this.objType&&b.type==this.objType){if(b.getDetails()&&this._UICreated){this.show(false)
}}ZaZimbraAdmin.getInstance().getOverviewPanelController().refreshRelatedTreeByEdit(b.getDetails())
};
ZaListViewController.prototype.handleCreation=function(b){if(b&&this.objType&&b.type==this.objType){if(b.getDetails()&&this._UICreated){this.show(false)
}}ZaZimbraAdmin.getInstance().getOverviewPanelController().refreshRelatedTree(b.getDetails())
};
ZaListViewController.prototype.handleRemoval=function(b){if(b&&this.objType&&b.type==this.objType){if(b.getDetails()&&this._UICreated){this._currentPageNum=1;
this.show(false)
}ZaZimbraAdmin.getInstance().refreshHistoryTreeByDelete(b.getDetails())
}};
ZaListViewController.prototype.setPageNum=function(b){this._currentPageNum=Number(b)
};
ZaListViewController.prototype.getPageNum=function(){return this._currentPageNum
}
}if(AjxPackage.define("zimbraAdmin.common.ZaItemVector")){ZaItemVector=function(){AjxVector.call(this,null)
};
ZaItemVector.prototype=new AjxVector;
ZaItemVector.prototype.constructor=ZaItemVector;
ZaItemVector.prototype.contains=function(c){if(!(c instanceof ZaItem)){throw new DwtException("Invalid parameter",DwtException.INTERNAL_ERROR,"ZaItemVector.prototype.add","ZaItemVector can contain only objects of ZaItem class and classes that extend ZaItem.")
}for(var b=0;
b<this._array.length;
b++){if(this._array[b].id==c.id){return true
}}return false
};
ZaItemVector.prototype.remove=function(c){if(!(c instanceof ZaItem)){throw new DwtException("Invalid parameter",DwtException.INTERNAL_ERROR,"ZaItemVector.prototype.add","ZaItemVector can contain only objects of ZaItem class and classes that extend ZaItem.")
}for(var b=0;
b<this._array.length;
b++){if(this._array[b].id==c.id){this._array.splice(b,1);
return true
}}return false
};
ZaItemVector.prototype.replace=function(d,b){if(!(d instanceof ZaItem)){throw new DwtException("Invalid parameter",DwtException.INTERNAL_ERROR,"ZaItemVector.prototype.replace","ZaItemVector can contain only objects of ZaItem class and classes that extend ZaItem.")
}if(b==null||b<0||b>=this._array.length){for(var c=0;
c<this._array.length;
c++){if(this._array[c].id==d.id){this._array.splice(c,1,d);
return true
}}}else{this._array.splice(b,1,d)
}return this.add(d)
};
ZaItemVector.prototype.add=function(c,b){if(!(c instanceof ZaItem)){throw new DwtException("Invalid parameter",DwtException.INTERNAL_ERROR,"ZaItemVector.prototype.add","ZaItemVector can contain only objects of ZaItem class and classes that extend ZaItem.")
}if(b==null||b<0||b>=this._array.length){this._array.push(c)
}else{this._array.splice(b,0,c)
}}
}if(AjxPackage.define("zimbraAdmin.common.ZaItemList")){ZaItemList=function(b){ZaModel.call(this,true);
if(b){this._constructor=b
}this.loadedRights=false;
this._vector=new ZaItemVector();
this._idHash=new Object();
this._targetIdHash=new Object()
};
ZaItemList.prototype=new ZaModel;
ZaItemList.prototype.constructor=ZaItemList;
ZaItemList.prototype.toString=function(){return"ZaItemList"
};
ZaItemList.prototype.replace=function(c,b){this._vector.replace(c,b);
if(c.id){this._idHash[c.id]=c
}if(c.attrs&&c.attrs[ZaAlias.A_AliasTargetId]){this._targetIdHash[c.attrs[ZaAlias.A_AliasTargetId]]=c
}};
ZaItemList.prototype.replaceItem=function(b){if(b.id){this._idHash[b.id]=b
}if(b.attrs&&b.attrs[ZaAlias.A_AliasTargetId]){this._targetIdHash[b.attrs[ZaAlias.A_AliasTargetId]]=b
}};
ZaItemList.prototype.add=function(c,b){this._vector.add(c,b);
if(c.id){this._idHash[c.id]=c
}if(c.attrs&&c.attrs[ZaAlias.A_AliasTargetId]){this._targetIdHash[c.attrs[ZaAlias.A_AliasTargetId]]=c
}};
ZaItemList.prototype.remove=function(b){this._vector.remove(b);
if(b.id){delete this._idHash[b.id]
}if(b.attrs&&b.attrs[ZaAlias.A_AliasTargetId]&&this._targetIdHash[b.attrs[ZaAlias.A_AliasTargetId]]){delete this._targetIdHash[b.attrs[ZaAlias.A_AliasTargetId]]
}};
ZaItemList.prototype.size=function(){return this._vector.size()
};
ZaItemList.prototype.getArray=function(){return this._vector.getArray()
};
ZaItemList.prototype.getVector=function(){return this._vector
};
ZaItemList.prototype.getIdHash=function(){return this._idHash
};
ZaItemList.prototype.getItemById=function(b){return this._idHash[b]?this._idHash[b]:this._targetIdHash[b]?this._targetIdHash[b]:null
};
ZaItemList.prototype.clear=function(){this._vector.removeAll();
for(var b in this._idHash){this._idHash[b]=null
}this._idHash=new Object();
for(var b in this._targetIdHash){this._targetIdHash[b]=null
}this._targetIdHash=null
};
ZaItemList.prototype.loadFromDom=function(b){this.clear();
var c=b.childNodes;
for(var d=0;
d<c.length;
d++){var e;
if(this._constructor){e=new this._constructor()
}else{e=ZaItem.getFromType(c[d].nodeName)
}e.type=c[d].nodeName;
e.initFromDom(c[d]);
this.add(e)
}};
ZaItemList.prototype.loadFromJS=function(g){if(!g){return
}for(var d in g){if(g[d] instanceof Array){var c=g[d];
var b=c.length;
for(var e=0;
e<b;
e++){var f;
if(this._constructor){f=new this._constructor()
}else{f=ZaItem.getFromType(d)
}f.type=d;
f.initFromJS(c[e]);
if(f instanceof ZaAlias){f.attrs[ZaAlias.A_targetType]=c[e][ZaAlias.A_targetType];
f.attrs[ZaAlias.A_targetAccount]=c[e][ZaAlias.A_targetAccount]
}if(this._idHash[f.id]){this._idHash[f.id].initFromJS(c[e])
}else{this.add(f)
}}}}};
ZaItemList.prototype._getIds=function(e){var d=new Object();
if(!(e&&e.length)){return d
}var c=new Array();
for(var b=0;
b<e.length;
b++){var f=e[b].id;
if(f){c.push(f);
d[f]=e[b]
}}d.string=c.join(",");
return d
}
}if(AjxPackage.define("zimbraAdmin.common.ZaListView")){ZaListView=function(b){if(arguments.length==0){return
}b=Dwt.getParams(arguments,ZaListView.PARAMS);
var c=(b.view)?DwtId.getListViewId(b.view,b.id):DwtId.getListViewId(b.id);
b.id=c;
DwtListView.call(this,b);
if(b.scrollLoading){Dwt.setHandler(this._getScrollDiv(),DwtEvent.ONSCROLL,ZaListView.handleScroll)
}this.setScrollStyle(DwtControl.SCROLL);
if(this._listDiv){this._listDiv.style.overflow="visible"
}this.scrollSearchParams=null;
this.scrollHasMore=false
};
ZaListView.PARAMS=["parent","className","posStyle","headerList","view","id","scrollLoading"];
ZaListView.prototype=new DwtListView;
ZaListView.prototype.constructor=ZaListView;
ZaListView.prototype.toString=function(){return"ZaListView"
};
ZaListView.ITEM_FLAG_CLICKED=DwtListView._LAST_REASON+1;
ZaListView.prototype._createItemHtml=function(b){DwtListView.prototype._createItemHtml.call(this,b)
};
ZaListView.prototype.createHeaderHtml=function(b){DwtListView.prototype.createHeaderHtml.call(this,b,true)
};
ZaListView.prototype.getTitle=function(){return""
};
ZaListView.prototype.getTabToolTip=function(){return this.getTitle()
};
ZaListView.prototype.getTabIcon=function(){return""
};
ZaListView.prototype.getTabTitle=function(){return this.getTitle()
};
ZaListView.prototype._mouseOverAction=function(d,h){var b=this._getItemData(h,"type");
if(b==DwtListView.TYPE_HEADER_ITEM){if(this._headerList[this._getItemData(h,"index")]._sortable){h.className="DwtListView-Column DwtListView-ColumnHover";
this.setToolTipContent(AjxMessageFormat.format(ZaMsg.LST_ClickToSort_tt,[this._headerList[this._getItemData(h,"index")].getLabel()]))
}else{this.setToolTipContent(null)
}}else{if(b==DwtListView.TYPE_HEADER_SASH){h.style.cursor=AjxEnv.isIE?"col-resize":"e-resize"
}else{if(b==DwtListView.TYPE_LIST_ITEM){var c=this.getItemFromElement(h);
if(c&&c.getToolTip){var g="";
try{g=c.getToolTip()
}catch(f){g=f.msg
}this.setToolTipContent(g)
}}}}return true
};
ZaListView.prototype._mouseOutAction=function(c,d){var b=this._getItemData(d,"type");
if(b==DwtListView.TYPE_HEADER_ITEM){if(this._headerList[this._getItemData(d,"index")]._sortable){d.className=(d.id!=this._currentColId)?"DwtListView-Column":"DwtListView-Column DwtListView-ColumnActive"
}}else{if(b==DwtListView.TYPE_HEADER_SASH){d.style.cursor="auto"
}}return true
};
ZaListView.prototype.getTooltipBase=function(b){return null
};
ZaListView.prototype._setListEvent=function(c,e,b){DwtListView.prototype._setListEvent.call(this,c,e,b);
var d=c.target.id.split(DwtId.SEP);
e.field=d&&d[2];
return true
};
ZaListView.prototype._sortColumn=function(b,c){if(c){this._list.sort(ZaItem.compareNamesAsc)
}else{this._list.sort(ZaItem.compareNamesDesc)
}this.setUI()
};
ZaListView.prototype._setNoResultsHtml=function(){if(ZaSearch.TOO_MANY_RESULTS_FLAG){var c=new Array(3);
var b=0;
c[b++]="<table width='100%' cellspacing='0' cellpadding='1'><tr><td class='NoResults'><br>";
c[b++]=ZaMsg.TooManyResults;
c[b++]="</td></tr></table>";
var d=document.createElement("div");
d.innerHTML=c.join("");
this._addRow(d)
}else{DwtListView.prototype._setNoResultsHtml.call(this)
}};
ZaListView.prototype._getScrollDiv=function(){return this.getHtmlElement()
};
ZaListView.prototype.setScrollSearchParams=function(b){this.scrollSearchParams=b
};
ZaListView.prototype.setScrollHasMore=function(b){this.scrollHasMore=b
};
ZaListView._getSearchKeyWord=function(g){var d="";
var b="zimbraDomainName=*";
var e="@";
var f="*";
if(!g){return d
}var h=g.indexOf(b);
if(h<0||h>g.length-1){return[]
}var c=g.indexOf(f,h+b.length);
if(c>g.length-1){return[]
}d=g.substr(h+b.length,c-h-b.length);
h=d.indexOf(e);
if(h<0||h>g.length-1){return[d]
}return[d.substr(h+1,d.length),d.substr(0,h)]
};
ZaListView.prototype.searchAliasDomain=function(h,l,j,c,b){var d=Dwt.getNextId();
var e=l;
var f="("+ZaDomain.A_domainName;
if(h.length>0){f+="="+h[0]+"*)"
}else{f=""
}var k=new AjxCallback(this,this.searchAliasDomainCallback,{busyId:d,searchQueryList:j,childQueries:h,offset:c,limit:b});
var g={query:f,types:[ZaSearch.DOMAINS],sortBy:ZaDomain.A_domainName,attrs:[ZaDomain.A_domainName],callback:k,controller:e,showBusy:true,busyId:d,busyMsg:ZaMsg.BUSY_SEARCHING_DOMAINS,skipCallbackIfCancelled:false};
ZaSearch.searchDirectory(g)
};
ZaListView.prototype.searchAliasDomainCallback=function(h,g){if(h.busyId){ZaApp.getInstance().getAppCtxt().getShell().setBusy(false,h.busyId)
}try{if(!g){throw (new AjxException(ZaMsg.ERROR_EMPTY_RESPONSE_ARG,AjxException.UNKNOWN,"ZaListView.searchAliasDomainCallback"))
}if(g.isException()){throw (g.getException())
}else{var b=g.getResponse().Body.SearchDirectoryResponse;
var c=new Array();
if(b.domain&&b.domain.length>0){for(var e=0;
e<b.domain.length;
e++){var f=b.domain[e].name;
c.push(f)
}}this._batchSearchforDomain(c,h.searchQueryList,h.childQueries,h.offset,h.limit)
}}catch(d){this._handleException(d,"ZaListView.searchAliasDomainCallback",null,false)
}};
ZaListView.prototype._batchSearchforDomain=function(p,m,c,e,d){var j;
var k=ZaSearch.ALIASES;
var o="(uid=*";
if(!c){o+=")"
}else{if(c&&!(c instanceof Array)){o+=c+"*)"
}else{if(c instanceof Array&&c.length==1){o+=c[0]+"*)"
}else{if(c instanceof Array&&c.length>1){o+=c[1]+")"
}}}}var h=ZaApp.getInstance().getSearchListController();
if(m&&m instanceof Array){j=m
}else{j=new Array()
}var g=Dwt.getNextId();
var b={limit:h.RESULTSPERPAGE,show:true,openInSearchTab:true,busyId:g};
var n=new AjxCallback(this,this.searchCallback,b);
for(var f=0;
f<p.length;
f++){var l={offset:e,limit:d,query:o,types:k,showBusy:true,busyId:g,busyMsg:ZaMsg.BUSY_SEARCHING,skipCallbackIfCancelled:false,sortBy:h._currentSortField,attrs:ZaSearch.standardAttributes,callback:n,controller:h,domain:p[f]};
j.push(l)
}this.multipleSearchCallback(b,j)
};
ZaListView.prototype.multipleSearchCallback=function(e,s){var u,B,l,c,G,x;
var f=null;
if(!s){return
}if(s instanceof Array&&s.length>0){f=s
}else{f=new Array();
f.push(s)
}x=f.length;
G=AjxSoapDoc.create("BatchRequest","urn:zimbra");
G.setMethodAttribute("onerror","continue");
for(var z=0;
z<x;
z++){var d=G.set("SearchDirectoryRequest",null,null,ZaZimbraAdmin.URN);
var m=G.set("query",f[z].query,d);
u=(f[z].sortBy!=undefined)?f[z].sortBy:ZaAccount.A_name;
B=(f[z].limit!=undefined)?f[z].limit:ZaAccount.RESULTSPERPAGE;
l=(f[z].offset!=undefined)?f[z].offset:"0";
c=(f[z].sortAscending!=null)?f[z].sortAscending:"1";
d.setAttribute("offset",l);
d.setAttribute("limit",B);
d.setAttribute("sortBy",u);
d.setAttribute("sortAscending",c);
if(f[z].applyCos){d.setAttribute("applyCos",f[z].applyCos)
}else{d.setAttribute("applyCos",false)
}if(f[z].applyConfig){d.setAttribute("applyConfig",f[z].applyConfig)
}else{d.setAttribute("applyConfig","false")
}if(f[z].domain){d.setAttribute("domain",f[z].domain)
}if(f[z].attrs&&f[z].attrs.length>0){d.setAttribute("attrs",f[z].attrs.toString())
}if(f[z].types&&f[z].types.length>0){d.setAttribute("types",f[z].types.toString())
}if(f[z].maxResults){d.setAttribute("maxResults",f[z].maxResults.toString())
}}var E=new Object();
E.soapDoc=G;
var g={busyMsg:ZaMsg.BUSY_REQUESTING_ACCESS_RIGHTS};
var F=ZaRequestMgr.invoke(E,g);
if(F.isException&&F.isException()){ZaApp.getInstance().getCurrentController()._handleException(F.getException(),"ZaListViewController.prototype.multipleSearchCallback",null,false)
}else{if(F.Body.BatchResponse.Fault){var n=F.Body.BatchResponse.Fault;
if(n instanceof Array){n=n[0]
}if(n){var A=ZmCsfeCommand.faultToEx(n);
ZaApp.getInstance().getCurrentController()._handleException(A,"ZaListViewController.prototype.multipleSearchCallback",null,false)
}}else{var v=F.Body.BatchResponse;
if(v.SearchDirectoryResponse&&v.SearchDirectoryResponse instanceof Array){var b=v.SearchDirectoryResponse.length;
ZaSearch.TOO_MANY_RESULTS_FLAG=false;
var k=null;
var D=false;
var r=0;
for(var z=0;
z<b;
z++){var t=v.SearchDirectoryResponse[z];
var p=new ZaItemList(e.CONS);
p.loadFromJS(t);
if(!k){k=p
}else{if(k instanceof ZaItemList&&p.size()>0){var o=p.getVector();
for(var w=0;
w<o.size();
w++){var C=o.get(w);
if(!k.getVector().contains(C)){k.add(C)
}}}}r+=(t.searchTotal?t.searchTotal:0);
D=t.more|D
}if(k){var q=new Array();
var x=k.getArray().length;
for(var h=0;
h<x;
h++){var y=false;
for(var z=0;
z<this._list.size();
z++){if(this._list.get(z).id==k.getArray()[h].id){y=true;
break
}}if(!y){q.push(k.getArray()[h])
}}}this.replenish(AjxVector.fromArray(q));
this.setScrollHasMore(D);
if(this.scrollSearchParams&&this.scrollSearchParams.postCallback){this.scrollSearchParams.postCallback.run(r,D,this.getList())
}}}}};
ZaListView.prototype._loadMsg=function(e){var d=Dwt.getNextId();
var g=new AjxCallback(this,this.searchCallback,{CONS:null,busyId:d});
var c=this.scrollSearchParams;
c.offset=e.offset;
c.limit=e.limit;
c.callback=g;
c.busyId=d;
if(c&&c.scrollType=="isAliasSearch"){var f=new Array();
f.push(c);
var b=ZaListView._getSearchKeyWord(c.query);
this.searchAliasDomain(b,c.controller,f,e.offset,e.limit)
}else{ZaSearch.searchDirectory(c)
}};
ZaListView.prototype.searchCallback=function(d,e){try{if(d.busyId){ZaApp.getInstance().getAppCtxt().getShell().setBusy(false,d.busyId)
}if(!e&&!this._currentRequest.cancelled){throw (new AjxException(ZaMsg.ERROR_EMPTY_RESPONSE_ARG,AjxException.UNKNOWN,"ZaListView.prototype.searchCallback"))
}if(e&&e.isException()&&!this._currentRequest.cancelled){ZaSearch.handleTooManyResultsException(e.getException(),"ZaListView.prototype.searchCallback")
}else{ZaSearch.TOO_MANY_RESULTS_FLAG=false;
var n=new ZaItemList(d.CONS);
var o=new ZaItemList(d.CONS);
var p=false;
if(e&&!e.isException()){var g=e.getResponse().Body.SearchDirectoryResponse;
n.loadFromJS(g);
if(d.resultFilter&&n.size()>0){var q=n.getVector();
for(var j=0;
j<q.size();
j++){var r=q.get(j);
var l=null;
if(r.type==ZaItem.ALIAS){l=r.getAliasTargetObj()
}else{l=r
}for(var k in d.resultFilter){if(l.attrs[k].indexOf(d.resultFilter[k])>=0){o.add(r);
break
}}}}else{o=n
}p=g.more
}if(o){var h=new Array();
var b=o.getArray().length;
for(var c=0;
c<b;
c++){h.push(o.getArray()[c])
}this.replenish(AjxVector.fromArray(h));
this.setScrollHasMore(p);
if(this.scrollSearchParams&&this.scrollSearchParams.postCallback){this.scrollSearchParams.postCallback.run(g.searchTotal,g.more,this.getList())
}}}}catch(m){if(m.code!=ZmCsfeException.MAIL_QUERY_PARSE_ERROR){this._handleException(m,"ZaListView.prototype.searchCallback")
}else{this.popupErrorDialog(ZaMsg.queryParseError,m);
if(this._searchField){this._searchField.setEnabled(true)
}}}};
ZaListView.handleScroll=function(b){var c=DwtUiEvent.getTarget(b);
var d=DwtControl.findControl(c);
if(d){d._checkItemCount()
}};
ZaListView.prototype._checkItemCount=function(){var b=this._getItemsNeeded();
if(b){this.setScrollHasMore(false);
var c={offset:this._list.size(),limit:b};
this._loadMsg(c)
}};
ZaListView.prototype._getItemsNeeded=function(d){if(!d){if(!this.scrollHasMore||!this._list){return 0
}}this._setRowHeight();
if(!this._rowHeight){return 0
}var b=new AjxCallback(null,AjxTimedAction.scheduleAction,[new AjxTimedAction(this,this._resetColWidth),10]);
var c={scrollDiv:this._getScrollDiv(),rowHeight:this._rowHeight,threshold:this.getPagelessThreshold(),limit:this.getLimit(1),listSize:this._list.size(),sbCallback:b};
return ZaListView.getRowsNeeded(c)
};
ZaListView.getRowsNeeded=function(d){var c=d.scrollDiv;
var f=c.scrollHeight,l=c.scrollTop,j=d.rowHeight;
var e=c.clientHeight||Dwt.getSize(c).y;
var g=e+(d.threshold*j);
var b=f-l;
if(b==e){b=(d.listSize*j)-l;
if(l==0&&d.sbCallback){d.sbCallback.run()
}}var k=0;
if(b<g){k=Math.max(Math.floor((g-b)/j),d.limit)
}return k
};
ZaListView.prototype.getLimit=function(c){var b=ZaSettings.RESULTSPERPAGE;
return c?b:2*b
};
ZaListView.prototype.getPagelessThreshold=function(){return Math.ceil(this.getLimit()/5)
};
ZaListView.prototype.setHeaderList=function(b){this._headerList=b;
this.headerColCreated=false
};
ZaListHeaderItem=function(e,h,c,d,j,b,f,g){DwtListHeaderItem.call(this,{field:e,text:h,icon:c,width:d,sortable:j,resizeable:f,visible:g});
this._sortField=b;
this._initialized=false
};
ZaListHeaderItem.prototype=new DwtListHeaderItem;
ZaListHeaderItem.prototype.constructor=ZaListHeaderItem;
ZaListHeaderItem.prototype.getSortField=function(){return this._sortField
};
ZaListHeaderItem.prototype.getLabel=function(){return this._label
};
ZaListView._handleColHeaderResize=function(g){if(!this._headerSash){this._headerSash=document.createElement("div");
var b=Dwt.getSize(this._listColDiv).y;
var h=this.getSize().y;
var e=h-4;
Dwt.setSize(this._headerSash,Dwt.DEFAULT,e);
Dwt.setPosition(this._headerSash,Dwt.ABSOLUTE_STYLE);
Dwt.setZIndex(this._headerSash,Dwt.Z_DND);
Dwt.setPosition(this._listDiv,Dwt.RELATIVE_STYLE);
Dwt.setLocation(this._listDiv,0,0);
this._headerSash.className="DwtListView-ColumnSash";
this._listDiv.appendChild(this._headerSash);
var d=-b;
Dwt.setLocation(this._headerSash,Dwt.DEFAULT,d);
this._headerSashX=g.docX
}var c=Dwt.getLocation(this._listDiv).x;
var f=g.docX-c;
Dwt.setLocation(this._headerSash,f)
}
}if(AjxPackage.define("zimbraAdmin.common.ZaToolBar")){ZaToolBar=function(f,g,b,e,d,c){if(arguments.length==0){return
}d=d||"ZaToolBar";
e=e||DwtControl.ABSOLUTE_STYLE;
this._barViewId=c;
DwtToolBar.call(this,{parent:f,className:d,posStyle:e,id:ZaId.getToolbarId(this._barViewId)});
this._opList=g;
this._btnOrder=b;
this._buttons=new Object();
this.addMoreActions();
this._btnList=new Array();
this.init()
};
ZaToolBar.VIEW_DATA="ZaToolBar.VIEW";
ZaToolBar.prototype=new DwtToolBar;
ZaToolBar.prototype.constructor=ZaToolBar;
ZaToolBar.prototype.toString=function(){return"ZaToolBar"
};
ZaToolBar.prototype.init=function(){var e=this._opList;
var c=this._btnOrder;
if(!AjxUtil.isEmpty(c)&&e){var d=c.length;
for(var b=0;
b<d;
b++){if(e[c[b]]&&e[c[b]] instanceof ZaOperation){if(e[c[b]].id==ZaOperation.SEP){this._createSeparator()
}else{if(e[c[b]].id==ZaOperation.LEFT_BRACKET){this._createLeftBracket()
}else{if(e[c[b]].id==ZaOperation.RIGHT_BRACKET){this._createRightBracket()
}else{if(e[c[b]].id==ZaOperation.NONE){this.addFiller()
}else{if(e[c[b]].id==ZaOperation.LABEL){this._createLabel(e[c[b]].labelId,e[c[b]].imageId,e[c[b]].caption,e[c[b]].disImageId,e[c[b]].tt,true,e[c[b]].className)
}else{this._createButton(e[c[b]].id,e[c[b]].imageId,e[c[b]].caption,e[c[b]].disImageId,e[c[b]].tt,true,e[c[b]].className,e[c[b]].type,e[c[b]].menuOpList);
if(e[c[b]].listener){this.addSelectionListener(e[c[b]].id,e[c[b]].listener)
}}}}}}}}}else{if(e){for(var b in e){if(e[b] instanceof ZaOperation){if(e[b].id==ZaOperation.SEP){this._createSeparator()
}else{if(e[b].id==ZaOperation.LEFT_BRACKET){this._createLeftBracket()
}else{if(e[b].id==ZaOperation.RIGHT_BRACKET){this._createRightBracket()
}else{if(e[b].id==ZaOperation.NONE){this.addFiller()
}else{if(e[b].id==ZaOperation.LABEL){this._createLabel(e[b].labelId,e[b].imageId,e[b].caption,e[b].disImageId,e[b].tt,true,e[b].className)
}else{this._createButton(e[b].id,e[b].imageId,e[b].caption,e[b].disImageId,e[b].tt,true,e[b].className,e[b].type,e[b].menuOpList);
this.addSelectionListener(e[b].id,e[b].listener)
}}}}}}}}}};
ZaToolBar.prototype.addSelectionListener=function(b,c){this._buttons[b].addSelectionListener(c)
};
ZaToolBar.prototype.removeSelectionListener=function(b,c){this._buttons[b].removeSelectionListener(c)
};
ZaToolBar.prototype.getButton=function(b){return this._buttons[b]
};
ZaToolBar.prototype.setData=function(c,b,d){this._buttons[c].setData(b,d)
};
ZaToolBar.prototype.enable=function(d,b){if(!(d instanceof Array)){d=[d]
}for(var c=0;
c<d.length;
c++){if(this._buttons[d[c]]){this._buttons[d[c]].setEnabled(b)
}}};
ZaToolBar.prototype.enableAll=function(b){for(var c in this._buttons){this._buttons[c].setEnabled(b)
}};
ZaToolBar.prototype.computeHeight=function(b){var d=0;
for(var c in this._buttons){d=Math.max(d,this._buttons[c].getSize().y)
}return d
};
ZaToolBar.prototype.setSize=function(c,b){var d=this.getSize();
if(c!=d.x||b!=d.y){DwtToolBar.prototype.setSize.apply(this,arguments);
this._checkSize(c,b)
}};
ZaToolBar.prototype._checkSize=function(d,q,l,c){var l=l||false;
var c=c||true;
var o=this._buttons[ZaOperation.MORE_ACTIONS];
var e=this.getHtmlElement();
if(!e){return
}for(var k in this._buttons){var m=this._buttons[k];
if(!m){continue
}if(m._toggleText){m.setText(m._toggleText);
m._toggleText=null
}if(m==o){m.setVisible(false)
}else{m.setVisible(true)
}}var j=e.firstChild.offsetWidth;
if(j>d){var r=this.getAlwaysVisibleButtonWidths();
if(c){o.setVisible(true);
r+=o.getW()
}var h=null;
if(!AjxUtil.isEmpty(this._btnOrder)){h=this._btnOrder
}else{h=this._btnList
}var f=h.length;
for(var g=0;
g<f;
g++){var m=this._buttons[h[g]];
if(!m||!m.getVisible()){continue
}var p=m.getText();
if(p&&l){m._toggleText=p;
m.setText("")
}if(c){var n=m.getW();
r+=n;
if(r>=d){if(m!=o){m.setVisible(false)
}else{break
}}}j=e.firstChild.offsetWidth;
if(j<=d){break
}}}this.enableMoreActionsMenuItems()
};
ZaToolBar.prototype._createButton=function(g,e,n,m,c,h,j,k,f){if(!j){j="DwtToolbarButton"
}var l=this._buttons[g]=new ZaToolBarButton({parent:this,className:j,id:ZaId.getButtonId(this._barViewId,ZaOperation.getStringName(g))});
if(e){l.setImage(e)
}if(n){l.setText(n)
}if(c){l.setToolTipContent(c)
}l.setEnabled((h)?true:false);
l.setData("_buttonId",g);
if(k==ZaOperation.TYPE_MENU){var d=new ZaPopupMenu(l,null,null,f,this._barViewId,ZaId.MENU_DROP);
l.setMenu(d,true)
}this._btnList.push(g);
return l
};
ZaToolBar.prototype._createLabel=function(f,e,l,k,c,g,h,d){var j=this._buttons[f]=new ZaToolBarLabel(this,null,h);
if(e){j.setImage(e)
}if(l){j.setText(l)
}if(c){j.setToolTipContent(c)
}j.setEnabled((g)?true:false);
j.setData("_buttonId",f);
return j
};
ZaToolBar.prototype._createSeparator=function(){var c=new DwtControl(this);
var b=ZaToolBar.getSeparatorHtml();
c.setContent(b)
};
ZaToolBar.getSeparatorHtml=function(){return'<div class="vertSep"/>'
};
ZaToolBar.prototype._createLeftBracket=function(){var c=new DwtControl(this);
var b=ZaToolBar.getLeftBracketHtml();
c.setContent(b)
};
ZaToolBar.getLeftBracketHtml=function(){return'<div class="ZaLeftBracket"/>'
};
ZaToolBar.prototype._createRightBracket=function(){var c=new DwtControl(this);
var b=ZaToolBar.getRightBracketHtml();
c.setContent(b)
};
ZaToolBar.getRightBracketHtml=function(){return'<div class="ZaRightBracket"/>'
};
ZaToolBar.prototype._buttonId=function(b){return b.getData("_buttonId")
};
ZaToolBar.prototype.addMoreActions=function(){if(AjxUtil.isEmpty(this._btnOrder)||AjxUtil.isEmpty(this._opList)){return
}this._moreActionsMenuList=[];
var b=-1;
for(var c=0;
c<this._btnOrder.length;
c++){if(this._btnOrder[c]==ZaOperation.NONE){b=c;
break
}else{if(this._btnOrder[c]==ZaOperation.SEP||this._btnOrder[c]==ZaOperation.LEFT_BRACKET||this._btnOrder[c]==ZaOperation.RIGHT_BRACKET){continue
}else{var d=this._opList[this._btnOrder[c]];
if(d!=null){this._moreActionsMenuList.push(ZaOperation.duplicate(d))
}}}}this._opList[ZaOperation.MORE_ACTIONS]=new ZaOperation(ZaOperation.MORE_ACTIONS,ZaMsg.TBB_MoreActions,ZaMsg.TBB_MoreActions_tt,"","",new AjxListener(this,this._moreActionsButtonListener),ZaOperation.TYPE_MENU,this._moreActionsMenuList);
this._opList[ZaOperation.MORE_ACTIONS].enabled=false;
this._opList[ZaOperation.MORE_ACTIONS].visible=false;
if(b==-1){b=this._btnOrder.length
}this._btnOrder.splice(b,0,ZaOperation.MORE_ACTIONS)
};
ZaToolBar.prototype.getAlwaysVisibleButtonWidths=function(){var e=0;
var d=false;
for(var f=0;
f<this._btnOrder.length;
f++){var c=this._buttons[this._btnOrder[f]];
if(this._btnOrder[f]==ZaOperation.NONE){d=true
}if(this._btnOrder[f]==ZaOperation.LABEL){c=this._buttons[ZaOperation.SEARCH_RESULT_COUNT]
}if(d){if(this._btnOrder[f]==ZaOperation.SEP){e+=5
}if(this._btnOrder[f]==ZaOperation.LEFT_BRACKET){e+=7
}if(this._btnOrder[f]==ZaOperation.RIGHT_BRACKET){e+=7
}if(c&&c.getVisible()){e+=c.getW()
}}}return e
};
ZaToolBar.prototype.enableMoreActionsMenuItems=function(){var d=this._buttons[ZaOperation.MORE_ACTIONS];
var h;
if(d){h=d.getMenu();
h.popdown()
}if(d&&d.getVisible()){for(var f=0;
f<this._btnOrder.length;
f++){var c=this._btnOrder[f];
if(this._btnOrder[f]==ZaOperation.MORE_ACTIONS){break
}var e=this._buttons[c];
if(!e){continue
}var b=e.getVisible();
var g=h.getMenuItem(c);
if(g!=null&&g!=undefined){g.setVisible(!b);
g.setEnabled(e.getEnabled())
}}}};
ZaToolBar.prototype._moreActionsButtonListener=function(c){var b=this._buttons[ZaOperation.MORE_ACTIONS];
var d;
if(b){d=b.getMenu();
if(d.isPoppedUp()){d.popdown()
}else{b.popup()
}}}
}if(AjxPackage.define("zimbraAdmin.common.ZaToolBarLabel")){ZaToolBarLabel=function(f,e,d,c,g,b){if(arguments.length==0){return
}DwtLabel.call(this,f,e,d,c,g,b)
};
ZaToolBarLabel.prototype=new DwtLabel;
ZaToolBarLabel.prototype.constructor=ZaToolBarLabel;
ZaToolBarLabel.prototype._createHtmlFromTemplate=function(b,c){DwtLabel.prototype._createHtmlFromTemplate.call(this,"admin.Widgets#ZaToolBarLabel",c)
}
}if(AjxPackage.define("zimbraAdmin.common.ZaToolBarButton")){ZaToolBarButton=function(b){if(arguments.length==0){return
}b=Dwt.getParams(arguments,ZaToolBarButton.PARAMS);
b.className=b.className||"ZaToolBarButton";
DwtButton.call(this,b)
};
ZaToolBarButton.PARAMS=["parent","style","className","posStyle","actionTiming","id","index"];
ZaToolBarButton.prototype=new DwtButton;
ZaToolBarButton.prototype.constructor=DwtButton;
ZaToolBarButton.prototype._createHtml=function(){var b="dwt.Widgets#ZToolbarButton";
var c={id:this._htmlElId};
this._createHtmlFromTemplate(b,c)
}
}if(AjxPackage.define("zimbraAdmin.common.ZaOverviewPanel")){ZaOverviewPanel=function(b){if(arguments.length==0){return
}this.overviewId=b.id;
b.id=ZaId.getOverviewId(ZaId.PANEL_APP);
b=Dwt.getParams(arguments,ZaOverviewPanel.PARAMS);
b.className=b.className||"ZaOverviewPanel";
DwtComposite.call(this,b);
this.addControlListener(new AjxListener(this,this._panelControlListener));
this._createFolderTree();
this._layout()
};
ZaOverviewPanel.PARAMS=["parent","className","posStyle","id"];
ZaOverviewPanel.prototype=new DwtComposite();
ZaOverviewPanel.constructor=ZaOverviewPanel;
ZaOverviewPanel._MIN_FOLDERTREE_SIZE=100;
ZaOverviewPanel.prototype.toString=function(){return"ZaOverviewPanel"
};
ZaOverviewPanel.prototype.getFolderTree=function(){return this._tree
};
ZaOverviewPanel.prototype._createFolderTree=function(){this._treePanel=new DwtComposite({parent:this,className:"OverviewTreePanel",posStyle:DwtControl.RELATIVE_STYLE,id:ZaId.getTreeId(this.overviewId,this.type)});
this._treePanel.setScrollStyle(Dwt.SCROLL_Y);
this._tree=new ZaTree({parent:this._treePanel,style:DwtTree.SINGLE_STYLE,className:"OverviewTree",posStyle:DwtControl.ABSOLUTE_STYLE,id:ZaId.getTreeId(this.overviewId,DwtTree.SINGLE_STYLE)})
};
ZaOverviewPanel.prototype._layout=function(){var d=this.getSize();
var c=d.y;
var b=d.x;
this._treePanel.setBounds(0,0,b,c)
};
ZaOverviewPanel.prototype._panelControlListener=function(b){this._layout()
}
}if(AjxPackage.define("zimbraAdmin.common.ZaClientCmdHandler")){ZaClientCmdHandler=function(){this._settings=new Object()
};
ZaClientCmdHandler.prototype.execute=function(b){if(b[0]&&b[0].toLowerCase()=="debug"){if(!b[1]){return
}if(b[1]=="t"){var c=DBG._showTiming;
var d=c?"off":"on";
alert("Turning debug timing info "+d)
}else{var e=b[1];
if(e){alert("Setting Debug to level:"+e)
}else{alert("Invalid debug level")
}}}else{if(b[0]&&b[0].toLowerCase()=="domainsrch"){ZaDomain.MAXSEARCHRESULTS=b[1];
alert("Setting domain search limit to:"+b[1]);
ZaApp.getInstance().searchDomains()
}else{if(b[0]&&b[0].toLowerCase()=="pagesize"){ZaSettings.RESULTSPERPAGE=b[1];
alert("Setting page size to:"+b[1])
}}}}
}if(AjxPackage.define("zimbraAdmin.common.ZaApp")){ZaApp=function(c,b){if(arguments.length==0){return
}this._name=ZaZimbraAdmin.ADMIN_APP;
this._appCtxt=c;
this._appViewMgr=c.getAppViewMgr();
this._container=b;
this._currentController=null;
this._currentViewId=null;
this._cosListChoices=null;
this._domainListChoices=null;
this._serverChoices=null;
this._serverIdChoices=null;
this._serverMap=null;
this._controllers=new Object();
this.dialogs={};
this._tabGroup=null
};
ZaApp.instance=null;
ZaApp.getInstance=function(c,b){if(!ZaApp.instance){if(!AjxUtil.isEmpty(c)&&!AjxUtil.isEmpty(b)){ZaApp.instance=new ZaApp(c,b)
}}return ZaApp.instance
};
ZaApp.prototype.constructor=ZaApp;
ZaApp.prototype.toString=function(){return"ZaApp"
};
ZaApp.checkMyRight=function(b,k,j,r,s){var q=AjxSoapDoc.create("CheckRightRequest",ZaZimbraAdmin.URN,null);
var h=q.set("grantee",ZaZimbraAdmin.currentUserId);
h.setAttribute("by","id");
var c=q.set("target",j);
c.setAttribute("type",b);
c.setAttribute("by",k);
var p=q.set("right",r);
var e=s.length;
if(e>0){var o=q.set("attrs","");
for(var l=0;
l<e;
l++){var m=q.set("a",s[l].val,o);
m.setAttribute("n",s[l].n)
}}var g=new Object();
g.soapDoc=q;
var d={};
d.controller=ZaApp.getInstance().getCurrentController();
d.busyMsg=ZaMsg.BUSY_REQUESTING_ACCESS_RIGHTS;
try{var f=ZaRequestMgr.invoke(g,d).Body.CheckRightResponse;
return f
}catch(n){}};
ZaApp.prototype.initDialogs=function(){this.dialogs.errorDialog=this._appCtxt.getErrorDialog(true);
this.dialogs.msgDialog=this._appCtxt.getMsgDialog(true);
this.dialogs.confirmMessageDialog=this._appCtxt.getConfirmMsgDialog(true);
this.dialogs.confirmMessageDialog2=this._appCtxt.getConfirmMsgDialog2(true)
};
ZaApp.prototype.getDomainAliasWizard=function(c){var b;
if(c){b=this.dialogs.editDomainAliasWizard=new ZaDomainAliasEditWizard(this._container,"400px","80px",ZaMsg.Title_Edit_domain_alias)
}else{b=this.dialogs.newDomainAliasWizard=new ZaDomainAliasWizard(this._container,"400px","80px",ZaMsg.Title_Create_domain_alias)
}return b
};
ZaApp.prototype.launch=function(e){if(ZaSettings.DASHBOARD_VIEW&&ZaApp.prototype.getDashBoardController){var f=ZaApp.getInstance().getDashBoardController(ZaSettings.DASHBOARD_VIEW);
if(ZaApp.getInstance().getCurrentController()){ZaApp.getInstance().getCurrentController().switchToNextView(f,ZaDashBoardController.prototype.show,true)
}else{f.show(true)
}}else{var b=this._appCtxt.getAppController().getOverviewPanelController();
var d=ZaTree.getPathByArray([ZaMsg.OVP_home]);
b.getOverviewPanel().getFolderTree().setSelectionByPath(d);
var c=new ZaHistory(d,ZaMsg.OVP_home);
ZaZimbraAdmin.getInstance().updateHistory(c,true)
}if(ZaZimbraAdmin.currentAdminAccount.attrs[ZaAccount.A_zimbraIsDelegatedAdminAccount]==="TRUE"){this.getDomainList(false,{limit:25,asyncMode:true})
}};
ZaApp.prototype.getAppCtxt=function(){return this._appCtxt
};
ZaApp.prototype.getCurrentController=function(){var b=this._appViewMgr.getCurrentView();
return this._controllers[b]
};
ZaApp.prototype.getControllerById=function(b){return this._controllers[b]
};
ZaApp.prototype.getStatusViewController=function(b){if(!b){b=ZaZimbraAdmin._STATUS
}if(b&&this._controllers[b]!=null){return this._controllers[b]
}else{var d=this._controllers[b]=new ZaStatusViewController(this._appCtxt,this._container,this);
return d
}};
ZaApp.prototype.getServerStatsController=function(b){if(b&&this._controllers[b]!=null){return this._controllers[b]
}else{var d=this._controllers[b]=new ZaServerStatsController(this._appCtxt,this._container,this);
return d
}};
ZaApp.prototype.getGlobalStatsController=function(b){if(!b){b=ZaZimbraAdmin._STATISTICS
}if(b&&this._controllers[b]!=null){return this._controllers[b]
}else{var d=this._controllers[b]=new ZaGlobalStatsController(this._appCtxt,this._container,this);
return d
}};
ZaApp.prototype.getServerStatsListController=function(b){if(!b){b=ZaZimbraAdmin._SERVER_LIST_FOR_STATISTICS_VIEW
}if(b&&this._controllers[b]!=null){return this._controllers[b]
}else{var d=this._controllers[b]=new ZaServerStatsListController(this._appCtxt,this._container,this);
return d
}};
ZaApp.prototype.getGlobalConfigViewController=function(b){if(!b){b=ZaZimbraAdmin._GLOBAL_SETTINGS
}if(b&&this._controllers[b]!=null){return this._controllers[b]
}else{var d=this._controllers[b]=new ZaGlobalConfigViewController(this._appCtxt,this._container,this);
return d
}};
ZaApp.prototype.getSearchListController=function(){if(this._controllers[ZaZimbraAdmin._SEARCH_LIST_VIEW]==null){this._controllers[ZaZimbraAdmin._SEARCH_LIST_VIEW]=new ZaSearchListController(this._appCtxt,this._container);
this._controllers[ZaZimbraAdmin._SEARCH_LIST_VIEW].addRemovalListener(new AjxListener(this.getSearchListController(),this.getSearchListController().handleRemoval))
}return this._controllers[ZaZimbraAdmin._SEARCH_LIST_VIEW]
};
ZaApp.prototype.getSearchBuilderController=function(){if(this._controllers[ZaZimbraAdmin._SEARCH_BUILDER_VIEW]==null){this._controllers[ZaZimbraAdmin._SEARCH_BUILDER_VIEW]=new ZaSearchBuilderController(this._appCtxt,this._container);
this._controllers[ZaZimbraAdmin._SEARCH_BUILDER_VIEW].addRemovalListener(new AjxListener(this.getSearchBuilderController(),this.getSearchBuilderController().handleRemoval))
}return this._controllers[ZaZimbraAdmin._SEARCH_BUILDER_VIEW]
};
ZaApp.prototype.getSearchBuilderToolbarController=ZaApp.prototype.getSearchBuilderController;
ZaApp.prototype.getAccountListController=function(b,d){if(!b){b=ZaZimbraAdmin._ACCOUNTS_LIST_VIEW
}if(b&&this._controllers[b]!=null){return this._controllers[b]
}else{if(b||d){var e=this._controllers[b]=new ZaAccountListController(this._appCtxt,this._container,this);
e.addRemovalListener(new AjxListener(e,e.handleRemoval));
e.addCreationListener(new AjxListener(e,e.handleCreation));
return e
}}};
ZaApp.prototype.getAccountViewController=function(d){var e=new ZaAccountViewController(this._appCtxt,this._container,this);
var b=ZaZimbraAdmin._ACCOUNTS_LIST_VIEW;
if(d){b=ZaZimbraAdmin._ALIASES_LIST_VIEW
}e.addChangeListener(new AjxListener(this.getAccountListController(b),ZaAccountListController.prototype.handleChange));
e.addCreationListener(new AjxListener(this.getAccountListController(b),ZaAccountListController.prototype.handleCreation));
e.addRemovalListener(new AjxListener(this.getAccountListController(b),ZaAccountListController.prototype.handleRemoval));
return e
};
ZaApp.prototype.getAdminExtListController=function(){if(this._controllers[ZaZimbraAdmin._ADMIN_ZIMLET_LIST_VIEW]==null){this._controllers[ZaZimbraAdmin._ADMIN_ZIMLET_LIST_VIEW]=new ZaAdminExtListController(this._appCtxt,this._container,this);
this._controllers[ZaZimbraAdmin._ADMIN_ZIMLET_LIST_VIEW].addRemovalListener(new AjxListener(this._controllers[ZaZimbraAdmin._ADMIN_ZIMLET_LIST_VIEW],this._controllers[ZaZimbraAdmin._ADMIN_ZIMLET_LIST_VIEW].handleRemoval));
this._controllers[ZaZimbraAdmin._ADMIN_ZIMLET_LIST_VIEW].addCreationListener(new AjxListener(this._controllers[ZaZimbraAdmin._ADMIN_ZIMLET_LIST_VIEW],this._controllers[ZaZimbraAdmin._ADMIN_ZIMLET_LIST_VIEW].handleCreation));
this._controllers[ZaZimbraAdmin._ADMIN_ZIMLET_LIST_VIEW].addChangeListener(new AjxListener(this._controllers[ZaZimbraAdmin._ADMIN_ZIMLET_LIST_VIEW],this._controllers[ZaZimbraAdmin._ADMIN_ZIMLET_LIST_VIEW].handleChange))
}return this._controllers[ZaZimbraAdmin._ADMIN_ZIMLET_LIST_VIEW]
};
ZaApp.prototype.getZimletListController=function(){if(this._controllers[ZaZimbraAdmin._ZIMLET_LIST_VIEW]==null){this._controllers[ZaZimbraAdmin._ZIMLET_LIST_VIEW]=new ZaZimletListController(this._appCtxt,this._container,this);
this._controllers[ZaZimbraAdmin._ZIMLET_LIST_VIEW].addRemovalListener(new AjxListener(this._controllers[ZaZimbraAdmin._ZIMLET_LIST_VIEW],this._controllers[ZaZimbraAdmin._ZIMLET_LIST_VIEW].handleRemoval));
this._controllers[ZaZimbraAdmin._ZIMLET_LIST_VIEW].addCreationListener(new AjxListener(this._controllers[ZaZimbraAdmin._ZIMLET_LIST_VIEW],this._controllers[ZaZimbraAdmin._ZIMLET_LIST_VIEW].handleCreation));
this._controllers[ZaZimbraAdmin._ZIMLET_LIST_VIEW].addChangeListener(new AjxListener(this._controllers[ZaZimbraAdmin._ZIMLET_LIST_VIEW],this._controllers[ZaZimbraAdmin._ZIMLET_LIST_VIEW].handleChange))
}return this._controllers[ZaZimbraAdmin._ZIMLET_LIST_VIEW]
};
ZaApp.prototype.getZimletController=function(b){if(b&&this._controllers[b]!=null){return this._controllers[b]
}else{var d=new ZaZimletViewController(this._appCtxt,this._container,this);
return d
}};
ZaApp.prototype.getDistributionListController=function(b){if(b&&this._controllers[b]!=null){return this._controllers[b]
}else{var d=new ZaDLController(this._appCtxt,this._container,this);
d.addCreationListener(new AjxListener(this.getAccountListController(ZaZimbraAdmin._DISTRIBUTION_LISTS_LIST_VIEW),ZaAccountListController.prototype.handleCreation));
d.addRemovalListener(new AjxListener(this.getAccountListController(ZaZimbraAdmin._DISTRIBUTION_LISTS_LIST_VIEW),ZaAccountListController.prototype.handleRemoval));
d.addChangeListener(new AjxListener(this.getAccountListController(ZaZimbraAdmin._DISTRIBUTION_LISTS_LIST_VIEW),ZaAccountListController.prototype.handleChange));
return d
}};
ZaApp.prototype.getResourceController=function(b){if(b&&this._controllers[b]!=null){return this._controllers[b]
}else{var d=new ZaResourceController(this._appCtxt,this._container,this);
d.addCreationListener(new AjxListener(this.getAccountListController(ZaZimbraAdmin._RESOURCE_LIST_VIEW),ZaAccountListController.prototype.handleCreation));
d.addRemovalListener(new AjxListener(this.getAccountListController(ZaZimbraAdmin._RESOURCE_LIST_VIEW),ZaAccountListController.prototype.handleRemoval));
d.addChangeListener(new AjxListener(this.getAccountListController(ZaZimbraAdmin._RESOURCE_LIST_VIEW),ZaAccountListController.prototype.handleChange));
return d
}};
ZaApp.prototype.getDomainListController=function(b,d){if(!b){b=ZaZimbraAdmin._DOMAINS_LIST_VIEW
}if(b&&this._controllers[b]!=null){return this._controllers[b]
}else{if(b||d){var e=this._controllers[b]=new ZaDomainListController(this._appCtxt,this._container,this);
e.addCreationListener(new AjxListener(this,ZaApp.prototype.handleDomainCreation));
e.addRemovalListener(new AjxListener(this,ZaApp.prototype.handleDomainRemoval));
e.addChangeListener(new AjxListener(this.getDomainListController(),ZaDomainListController.prototype.handleDomainChange));
e.addRemovalListener(new AjxListener(this.getDomainListController(),e.handleRemoval));
return e
}}};
ZaApp.prototype.getDomainController=function(b){if(b&&this._controllers[b]!=null){return this._controllers[b]
}else{var d=this._controllers[b]=new ZaDomainController(this._appCtxt,this._container,this);
d.addChangeListener(new AjxListener(this.getDomainListController(),ZaDomainListController.prototype.handleDomainChange));
d.addChangeListener(new AjxListener(d,ZaDomainController.prototype.handleDomainChange));
d.addCreationListener(new AjxListener(this,ZaApp.prototype.handleDomainCreation));
d.addCreationListener(new AjxListener(this.getDomainListController(),ZaDomainListController.prototype.handleCreation));
d.addRemovalListener(new AjxListener(this.getDomainListController(),this.getDomainListController().handleRemoval));
d.addRemovalListener(new AjxListener(this,ZaApp.prototype.handleDomainRemoval));
return d
}};
ZaApp.prototype.getMTAListController=function(){if(this._controllers[ZaZimbraAdmin._POSTQ_VIEW]==null){this._controllers[ZaZimbraAdmin._POSTQ_VIEW]=new ZaMTAListController(this._appCtxt,this._container,this)
}return this._controllers[ZaZimbraAdmin._POSTQ_VIEW]
};
ZaApp.prototype.getMTAController=function(b){if(b&&this._controllers[b]!=null){return this._controllers[b]
}else{var d=this._controllers[b]=new ZaMTAController(this._appCtxt,this._container,this);
d.addChangeListener(new AjxListener(this.getMTAListController(),ZaMTAListController.prototype.handleMTAChange));
d.addChangeListener(new AjxListener(d,ZaMTAController.prototype.handleMTAChange));
return d
}};
ZaApp.prototype.getServerListController=function(){if(this._controllers[ZaZimbraAdmin._SERVERS_LIST_VIEW]==null){this._controllers[ZaZimbraAdmin._SERVERS_LIST_VIEW]=new ZaServerListController(this._appCtxt,this._container,this)
}return this._controllers[ZaZimbraAdmin._SERVERS_LIST_VIEW]
};
ZaApp.prototype.getServerController=function(b){if(b&&this._controllers[b]!=null){return this._controllers[b]
}else{var d=this._controllers[b]=new ZaServerController(this._appCtxt,this._container,this);
d.addServerChangeListener(new AjxListener(this,ZaApp.prototype.handleServerChange));
d.addServerChangeListener(new AjxListener(this.getServerListController(),ZaServerListController.prototype.handleServerChange));
if(ZaSettings.TREE_ENABLED){d.addServerChangeListener(new AjxListener(this._appCtxt.getAppController().getOverviewPanelController(),ZaOverviewPanelController.prototype.handleServerChange))
}return d
}};
ZaApp.prototype.getCosListController=function(){if(this._controllers[ZaZimbraAdmin._COS_LIST_VIEW]==null){this._controllers[ZaZimbraAdmin._COS_LIST_VIEW]=new ZaCosListController(this._appCtxt,this._container,this);
this._controllers[ZaZimbraAdmin._COS_LIST_VIEW].addRemovalListener(new AjxListener(this,ZaApp.prototype.handleCosRemoval));
if(ZaSettings.TREE_ENABLED){this._controllers[ZaZimbraAdmin._COS_LIST_VIEW].addRemovalListener(new AjxListener(this._appCtxt.getAppController().getOverviewPanelController(),ZaOverviewPanelController.prototype.handleCosRemoval))
}}return this._controllers[ZaZimbraAdmin._COS_LIST_VIEW]
};
ZaApp.prototype.getCosController=function(){var b=new ZaCosController(this._appCtxt,this._container,this);
b.addChangeListener(new AjxListener(this.getCosListController(),ZaCosListController.prototype.handleChange));
if(ZaSettings.TREE_ENABLED){b.addChangeListener(new AjxListener(this._appCtxt.getAppController().getOverviewPanelController(),ZaOverviewPanelController.prototype.handleCosChange))
}b.addCreationListener(new AjxListener(this.getCosListController(),ZaCosListController.prototype.handleCreation));
if(ZaSettings.TREE_ENABLED){b.addCreationListener(new AjxListener(this._appCtxt.getAppController().getOverviewPanelController(),ZaOverviewPanelController.prototype.handleCosCreation))
}b.addRemovalListener(new AjxListener(this,ZaApp.prototype.handleCosRemoval));
b.addRemovalListener(new AjxListener(this.getCosListController(),ZaCosListController.prototype.handleRemoval));
if(ZaSettings.TREE_ENABLED){b.addRemovalListener(new AjxListener(this._appCtxt.getAppController().getOverviewPanelController(),ZaOverviewPanelController.prototype.handleCosRemoval))
}return b
};
ZaApp.prototype.getHelpViewController=function(b){if(b&&this._controllers[b]!=null){return this._controllers[b]
}else{var d=this._controllers[b]=new ZaHelpViewController(this._appCtxt,this._container,this);
return d
}};
ZaApp.prototype.getMigrationWizController=function(b){if(b&&this._controllers[b]!=null){return this._controllers[b]
}else{var d=this._controllers[b]=new ZaMigrationWizController(this._appCtxt,this._container,this);
return d
}};
ZaApp.prototype.searchDomains=function(b){var d=Dwt.getNextId();
var e=new AjxCallback(this,this.domainSearchCallback,{busyId:d});
var c={query:b,types:[ZaSearch.DOMAINS],sortBy:ZaDomain.A_domainName,offset:"0",sortAscending:"1",limit:ZaDomain.MAXSEARCHRESULTS,callback:e,controller:this.getCurrentController(),showBusy:true,busyId:d,busyMsg:ZaMsg.BUSY_SEARCHING_DOMAINS,skipCallbackIfCancelled:false,attrs:[ZaDomain.A_description,ZaDomain.A_domainName,ZaDomain.A_zimbraDomainStatus,ZaItem.A_zimbraId,ZaDomain.A_domainType]};
ZaSearch.searchDirectory(c)
};
ZaApp.prototype.scheduledSearchDomains=function(b){var d=Dwt.getNextId();
var e=new AjxCallback(this,this.domainSearchCallback,{domainItem:b,busyId:d});
var c={query:this._domainQuery,types:[ZaSearch.DOMAINS],sortBy:ZaDomain.A_domainName,offset:"0",sortAscending:"1",limit:ZaDomain.MAXSEARCHRESULTS,callback:e,controller:this.getCurrentController(),showBusy:true,busyId:d,busyMsg:ZaMsg.BUSY_SEARCHING_DOMAINS,skipCallbackIfCancelled:false,attrs:[ZaDomain.A_domainName,ZaItem.A_zimbraId]};
ZaSearch.searchDirectory(c)
};
ZaApp.prototype.domainSearchCallback=function(h,g){var e=h.domainItem?h.domainItem:null;
try{if(h.busyId){this._appCtxt.getShell().setBusy(false,h.busyId)
}if(!g){throw (new AjxException(ZaMsg.ERROR_EMPTY_RESPONSE_ARG,AjxException.UNKNOWN,"ZaListViewController.prototype.searchCallback"))
}if(g.isException()){ZaSearch.handleTooManyResultsException(g.getException(),"ZaApp.prototype.domainSearchCallback")
}else{ZaSearch.TOO_MANY_RESULTS_FLAG=false;
var b=g.getResponse().Body.SearchDirectoryResponse;
var f=new ZaItemList(ZaDomain);
f.loadFromJS(b);
if(ZaSettings.TREE_ENABLED){this._appCtxt.getAppController().getOverviewPanelController().updateDomainList(f)
}if(e!=null&&e instanceof XFormItem&&this._domainList.size()<=0){e.setError(ZaMsg.ERROR_NO_SUCH_DOMAIN);
var d=new DwtXFormsEvent(this,e,e.getInstanceValue());
e.getForm().notifyListeners(DwtEvent.XFORMS_VALUE_ERROR,d)
}}}catch(c){if(c.code!=ZmCsfeException.MAIL_QUERY_PARSE_ERROR){this.getCurrentController()._handleException(c,"ZaApp.prototype.domainSearchCallback")
}else{this.getCurrentController().popupErrorDialog(ZaMsg.queryParseError,c)
}}};
ZaApp.prototype.getDomainList=function(c,d){if(c||this._domainList==null){if(d&&d.asyncMode){var b=this._getDomainListCallbackArray;
if(!b){b=this._getDomainListCallbackArray=[]
}b.push(d.callback);
if(b.length===1){d.callback=this._getDomainListCallback.bind(this);
ZaDomain.getAll(false,d)
}}else{this._domainList=ZaDomain.getAll()
}}return this._domainList
};
ZaApp.prototype._getDomainListCallback=function(c){this._domainList=c;
for(var b=0;
b<this._getDomainListCallbackArray.length;
b++){if(this._getDomainListCallbackArray[b]){this._getDomainListCallbackArray[b](c)
}}this._getDomainListCallbackArray=[]
};
ZaApp.prototype.getSavedSearchList=function(b){if(b||ZaSearch.SAVED_SEARCHES.length<=0){if(ZaSearchField.canViewSavedSearch){ZaSearch.updateSavedSearch(ZaSearch.getSavedSearches())
}}return ZaSearch.SAVED_SEARCHES
};
ZaApp.prototype.getServerByName=function(e){if(this._serverList==null){this._serverList=ZaServer.getAll()
}var c=this._serverList.getArray().length;
var d=new ZaServer(this);
for(var b=0;
b<c;
b++){if(this._serverList.getArray()[b].attrs[ZaServer.A_ServiceHostname]==e){return this._serverList.getArray()[b]
}}if(b==c){d.load("name",e)
}return d
};
ZaApp.prototype.getServerList=function(f){if(f||this._serverList==null){this._serverList=ZaServer.getAll();
if(this._serverList){var e=this._serverList.getArray();
this._mbsList=ZaItemList(ZaServer);
if(e){var b=new Array();
var d=e.length;
for(var c=0;
c>d;
c++){if(e[c].attrs[ZaServer.A_zimbraMailboxServiceInstalled]){this._mbsList.add(e[c])
}}}}}return this._serverList
};
ZaApp.prototype.getMbsList=function(b){if(b||this._mbsList==null){this._mbsList=ZaServer.getAllMBSs()
}return this._mbsList
};
ZaApp.prototype.getPostQList=function(b,c){if(b||this._postqList==null||c){this._postqList=ZaMTA.getAll(c)
}return this._postqList
};
ZaApp.prototype.getMailServers=function(f,g){if(f||this._mbsList==null||g){this._mbsList=ZaServer.getAllMBSs([ZaServer.A_ServiceHostname,ZaServer.A_description,ZaServer.A_zimbraServiceEnabled,ZaServer.A_zimbraServiceInstalled,ZaItem.A_zimbraId],g)
}if(!g){var b=new Array();
var e=this._mbsList.getArray();
var d=e.length;
for(var c=0;
c<d;
c++){if(e[c].attrs[ZaServer.A_zimbraMailClientServiceEnabled]){b.push(e[c])
}}return b
}};
ZaApp.prototype.getServerListChoices=function(c){if(c||this._serverList==null){this._serverList=ZaServer.getAll()
}if(c||this._serverChoices==null){var e=this._serverList.getIdHash();
var d=[];
for(var b in e){if(e[b].attrs[ZaServer.A_zimbraMailClientServiceEnabled]){d.push(e[b])
}}if(this._serverChoices==null){this._serverChoices=new XFormChoices(d,XFormChoices.OBJECT_LIST,ZaServer.A_ServiceHostname,ZaServer.A_ServiceHostname)
}else{this._serverChoices.setChoices(d);
this._serverChoices.dirtyChoices()
}}return this._serverChoices
};
ZaApp.prototype.getServerIdListChoices=function(c){if(c||this._serverList==null){this._serverList=ZaServer.getAll()
}if(c||this._serverIdChoices==null){var f=this._serverList.getIdHash();
var d=[];
for(var b in f){if(f[b].attrs[ZaServer.A_zimbraMailClientServiceEnabled]){var e=new Object();
e[ZaServer.A_ServiceHostname]=f[b].attrs[ZaServer.A_ServiceHostname];
e.id=f[b].id;
d.push(e)
}}if(this._serverIdChoices==null){this._serverIdChoices=new XFormChoices(d,XFormChoices.OBJECT_LIST,"id",ZaServer.A_ServiceHostname)
}else{this._serverIdChoices.setChoices(d);
this._serverIdChoices.dirtyChoices()
}}return this._serverIdChoices
};
ZaApp.prototype.getServerMap=function(d){if(d||this._serverList==null){this._serverList=ZaServer.getAll()
}if(d||this._serverMap==null){this._serverMap=new Object();
var c=this._serverList.getArray().length;
for(var b=0;
b<c;
b++){this._serverMap[this._serverList.getArray()[b].id]=this._serverList.getArray()[b]
}}return this._serverMap
};
ZaApp.prototype.getCosList=function(e,h){if(e||!this._cosList){var f="";
if(!ZaZimbraAdmin.hasGlobalCOSSListAccess()){var b=ZaApp.getInstance()._cosNameList;
if(AjxUtil.isEmpty(b)){ZaApp.getInstance()._cosNameList=b=ZaCos.getEffectiveCosList(ZaZimbraAdmin.currentAdminAccount.id)
}if(b.length==0){this._cosList=new ZaItemList(ZaCos);
return this._cosList
}for(var d=0;
d<b.length;
d++){f+="("+ZaCos.A_name+"="+b[d]+")"
}if(b.length>1){f="(|"+f+")"
}}var g={query:f,types:[ZaSearch.COSES],sortBy:"id",offset:0,sortAscending:"1",limit:ZaDomain.RESULTSPERPAGE,attrs:[ZaCos.A_name,ZaCos.A_description].join(),controller:this.getCurrentController()};
this._cosList=new ZaItemList(ZaCos);
if(h){g.callback=this._getCosListCallback.bind(this,h);
ZaSearch.searchDirectory(g)
}else{var c=ZaSearch.searchDirectory(g).Body.SearchDirectoryResponse;
this._cosList.loadFromJS(c)
}}return this._cosList
};
ZaApp.prototype._getCosListCallback=function(e,b){var c=b.getResponse().Body;
if(!c){return
}var d=c.SearchDirectoryResponse;
if(!d){return
}this._cosList.loadFromJS(d);
if(e){e(this._cosList)
}};
ZaApp.prototype.getCosListChoices=function(b){if(b||this._cosList==null){}if(b||this._cosListChoices==null){if(this._cosListChoices==null){this._cosListChoices=new XFormChoices([],XFormChoices.OBJECT_LIST,"id","name")
}this._cosListChoices.setChoices(this._cosList.getArray());
this._cosListChoices.dirtyChoices()
}return this._cosListChoices
};
ZaApp.prototype.getCosListName=function(){if(!this._cosListName){var b=this.getCosList();
this._cosListName=AjxUtil.map(b?b.getArray():[],function(c){return c.name
})
}return this._cosListName
};
ZaApp.prototype.getDomainNameListByType=function(c){this._domainNameList=this._domainNameList||{};
if(!this._domainNameList[c]){this._domainNameList[c]=[];
var e=this.getDomainList();
if(e){var f=e.getArray();
for(var b=0;
b<f.length;
b++){var d=f[b];
if(d&&d.attrs[ZaDomain.A_domainType]===c){this._domainNameList[c].push(d.name)
}}}}return this._domainNameList[c]
};
ZaApp.prototype.getGlobalConfig=function(b){if(b||this._globalConfig==null){this._globalConfig=new ZaGlobalConfig()
}return this._globalConfig
};
ZaApp.prototype.getInstalledSkins=function(h){try{if(h||this._installedSkins==null){var g=AjxSoapDoc.create("GetAllSkinsRequest",ZaZimbraAdmin.URN,null);
var b=new Object();
b.soapDoc=g;
var f={};
f.controller=ZaApp.getInstance().getCurrentController();
try{this._installedSkins=[];
var k=ZaRequestMgr.invoke(b,f).Body.GetAllSkinsResponse;
if(k&&k.skin){for(var d=0;
d<k.skin.length;
d++){this._installedSkins.push(k.skin[d].name)
}}}catch(c){}}return this._installedSkins
}catch(j){return null
}};
ZaApp.prototype.getSkinChoices=function(e){var b=[];
for(var c=0;
c<e.length;
c++){var d=e[c];
b.push({label:AjxStringUtil.htmlEncode(ZaMsg["theme-"+d]||d.substr(0,1).toUpperCase()+d.substr(1)),value:d})
}return b
};
ZaApp.prototype.handleDomainCreation=function(b){if(b){if(!ZaZimbraAdmin.hasGlobalDomainListAccess()){ZaApp.getInstance()._domainNameList=ZaDomain.getEffectiveDomainList(ZaZimbraAdmin.currentAdminAccount.id)
}this.searchDomains();
this.getDomainListController().show();
ZaZimbraAdmin.getInstance().getOverviewPanelController().refreshRelatedTree(b.getDetails())
}};
ZaApp.prototype.handleCosRemoval=function(c){if(c){if(!this._cosList){this._cosList=ZaCos.getAll()
}else{var d=c.getDetails();
if(d&&(d instanceof Array)){for(var b in d){this._cosList.remove(d[b])
}}else{if(d&&(d instanceof ZaCos)){this._cosList.remove(c.getDetails())
}}ZaZimbraAdmin.getInstance().refreshHistoryTreeByDelete(c.getDetails())
}if(this._cosListChoices==null){this._cosListChoices=new XFormChoices(this._cosList.getArray(),XFormChoices.OBJECT_LIST,"id","name")
}else{this._cosListChoices.setChoices(this._cosList.getArray());
this._cosListChoices.dirtyChoices()
}}};
ZaApp.prototype.handleServerChange=function(d){if(d){if(this._serverList){this._serverList=ZaServer.getAll();
if(this._serverChoices==null){this._serverChoices=new XFormChoices(this._serverList.getArray(),XFormChoices.OBJECT_LIST,ZaServer.A_ServiceHostname,ZaServer.A_ServiceHostname)
}else{this._serverChoices.setChoices(this._serverList.getArray());
this._serverChoices.dirtyChoices()
}this._serverMap=new Object();
var c=this._serverList.getArray().length;
for(var b=0;
b<c;
b++){this._serverMap[this._serverList.getArray()[b].id]=this._serverList.getArray()[b]
}}}};
ZaApp.prototype.handleDomainRemoval=function(b){if(b){this.searchDomains()
}};
ZaApp.prototype.handleDomainChange=function(b){if(b){this.searchDomains()
}};
ZaApp.prototype.handleSettingsChange=function(b){if(b){this._globalConfig=new ZaGlobalConfig(this)
}};
ZaApp.prototype.getName=function(){return this._name
};
ZaApp.prototype.getAppViewMgr=function(){return this._appViewMgr
};
ZaApp.prototype.createView=function(d,c,b){this._appViewMgr.createView(d,c);
if(b.openInNewTab){this.createTab(b)
}else{this.updateTab(b.tab,b.tabId)
}};
ZaApp.prototype.createTab=function(){if(arguments.length==0){return
}var c;
var g=true;
var f=true;
var b=null;
if(typeof arguments[0]=="object"){c=arguments[0]["tabId"];
g=AjxUtil.isEmpty(arguments[0]["closable"])?true:false;
f=AjxUtil.isEmpty(arguments[0]["selected"])?true:false;
b=AjxUtil.isEmpty(arguments[0]["onOpen"])?null:arguments[0]["onOpen"]
}else{c=arguments[0]
}var e=this.getTabGroup();
var j=this.getViewById(c)[ZaAppViewMgr.C_APP_CONTENT];
var h={id:c,icon:j.getTabIcon(),label:j.getTabTitle(),toolTip:j.getTabToolTip()||j.getTabTitle(),closable:g,selected:f,onOpen:b};
var d=new ZaAppTab(e,h)
};
ZaApp.prototype.updateTab=function(e,b){var d=this.getTabGroup();
if(d._searchTab&&d._searchTab==e){this.updateSearchTab()
}else{var g=this.getViewById(b)[ZaAppViewMgr.C_APP_CONTENT];
var c=g.getTabIcon();
var f=g.getTabTitle();
e.setToolTipContent(g.getTabToolTip()||g.getTabTitle());
e.resetLabel(f);
e.setImage(c)
}e.setTabId(b);
if(!e.isSelected()){d.selectTab(e)
}};
ZaApp.prototype.updateSearchTab=function(){var b=this.getTabGroup().getSearchTab();
b.setImage(ZaSearchListView.prototype.getTabIcon());
b.resetLabel(ZaSearchListView.prototype.getTabTitle());
b.setToolTipContent(ZaSearchListView.prototype.getTabToolTip.call(this._controllers[b.getTabId()]))
};
ZaApp.prototype.pushView=function(b,c,d){this._currentViewId=this._appViewMgr.pushView(b)
};
ZaApp.prototype.popView=function(){var b=this._currentViewId;
this._currentViewId=this._appViewMgr.popView();
this.disposeView(b)
};
ZaApp.prototype.disposeView=function(b,d){var c=this.getViewById(b);
if(d){this._appViewMgr.removeHiddenView(b)
}for(var e in c){if(c[e] instanceof DwtComposite){c[e].dispose()
}else{c[e]=null
}}if(this._controllers[b]!=null){this._controllers[b]=null
}};
ZaApp.prototype.setView=function(b,c){return this._appViewMgr.setView(b,c)
};
ZaApp.prototype.getViewById=function(b){return this.getAppViewMgr()._views[b]
};
ZaApp.prototype.reset=function(b){};
ZaApp.prototype.setTabGroup=function(b){this._tabGroup=b
};
ZaApp.prototype.getTabGroup=function(){return this._tabGroup
}
}if(AjxPackage.define("zimbraAdmin.common.ZaAboutDialog")){ZaAboutDialog=function(e,d,b,c){if(arguments.length==0){return
}var f=d||"DwtBaseDialog AboutScreen";
DwtBaseDialog.call(this,e,f,"");
b=b||"579px";
c=c||"264px";
this.setSize(b,c);
this.addCloseListener();
this.addFocusBlurListener()
};
ZaAboutDialog.prototype=new DwtBaseDialog;
ZaAboutDialog.prototype.constructor=ZaAboutDialog;
ZaAboutDialog.prototype.TEMPLATE="admin.Widgets#ZaAboutDialog";
ZaAboutDialog.prototype.closeIcon="ImgAboutClose";
ZaAboutDialog.prototype.closeHoverIcon="ImgAboutCloseHover";
ZaAboutDialog.prototype._createHtmlFromTemplate=function(c,d){d.dragId=this._dragHandleId;
d.closeIcon=this.closeIcon?this.closeIcon:"ImgAboutClose";
var b=AjxDateFormat.getDateInstance().format(ZaServerVersionInfo.buildDate);
d.version=AjxBuffer.concat(ZaMsg.splashScreenVersion," ",ZaServerVersionInfo.version," ",b);
d.copyright=ZaItem.getAboutScreenCopyright();
d.aboutBanner="ImgAboutBanner";
d.logoURL=ZaAppCtxt.getLogoURI();
DwtComposite.prototype._createHtmlFromTemplate.call(this,c,d);
this._contentEl=document.getElementById(d.id+"_content");
this._closeIconEl=document.getElementById(d.id+"_close")
};
ZaAboutDialog.prototype.addCloseListener=function(){if(this._closeIconEl){Dwt.setHandler(this._closeIconEl,DwtEvent.ONCLICK,AjxCallback.simpleClosure(this.popdown,this))
}};
ZaAboutDialog.prototype.addFocusBlurListener=function(){if(this._closeIconEl&&this._closeIconEl.firstChild){var b=AjxEnv.isIE?DwtEvent.ONMOUSEENTER:DwtEvent.ONMOUSEOVER;
var c=AjxEnv.isIE?DwtEvent.ONMOUSELEAVE:DwtEvent.ONMOUSEOUT;
Dwt.setHandler(this._closeIconEl.firstChild,b,AjxCallback.simpleClosure(this.changeCloseIcon,this,true));
Dwt.setHandler(this._closeIconEl.firstChild,c,AjxCallback.simpleClosure(this.changeCloseIcon,this,false))
}};
ZaAboutDialog.prototype.changeCloseIcon=function(b){if(this._closeIconEl&&this._closeIconEl.firstChild){if(b){Dwt.delClass(this._closeIconEl.firstChild,this.closeIcon,this.closeHoverIcon)
}else{Dwt.delClass(this._closeIconEl.firstChild,this.closeHoverIcon,this.closeIcon)
}}}
}if(AjxPackage.define("zimbraAdmin.common.ZaMsgDialog")){ZaMsgDialog=function(d,c,f,e,b){this._app=ZaApp.getInstance();
var g=b?ZaId.getDialogId(ZaId.DLG_MSG,b):ZaId.getDialogId(ZaId.DLG_MSG);
DwtMessageDialog.call(this,d,c,f,e,g)
};
ZaMsgDialog.prototype=new DwtMessageDialog;
ZaMsgDialog.prototype.constructor=ZaMsgDialog;
ZaMsgDialog.CLOSE_TAB_DELETE_BUTTON="close tab and delete";
ZaMsgDialog.CLOSE_TAB_DELETE_BUTTON_DESC=new DwtDialog_ButtonDescriptor(ZaMsgDialog.CLOSE_TAB_DELETE_BUTTON,ZaMsg.bt_close_tab_delete,DwtDialog.ALIGN_RIGHT);
ZaMsgDialog.NO_DELETE_BUTTON="no delete";
ZaMsgDialog.NO_DELETE_BUTTON_DESC=new DwtDialog_ButtonDescriptor(ZaMsgDialog.NO_DELETE_BUTTON,ZaMsg.bt_no_delete,DwtDialog.ALIGN_RIGHT)
}if(AjxPackage.define("zimbraAdmin.common.ZaErrorDialog")){ZaErrorDialog=function(e,c){if(!e){return
}var b=new DwtDialog_ButtonDescriptor(ZaErrorDialog.DETAIL_BUTTON,AjxMsg.detail,DwtDialog.ALIGN_LEFT);
var f=c?ZaId.getDialogId(ZaId.DLG_ERR,c):ZaId.getDialogId(ZaId.DLG_ERR);
DwtMessageDialog.call(this,e,null,null,[b],f);
this._detailCell=document.getElementById(this._detailCellId);
var d=this._button[ZaErrorDialog.DETAIL_BUTTON];
d.setImage("SelectPullDownArrow");
this.registerCallback(ZaErrorDialog.DETAIL_BUTTON,this._showDetail,this);
this._setAllowSelection()
};
ZaErrorDialog.prototype=new DwtMessageDialog;
ZaErrorDialog.prototype.constructor=ZaErrorDialog;
ZaErrorDialog.prototype.toString=function(){return"ZaErrorDialog"
};
ZaErrorDialog.DETAIL_BUTTON=++DwtDialog.LAST_BUTTON;
ZaErrorDialog.prototype._detailsVisible=false;
ZaErrorDialog.prototype.CONTROLS_TEMPLATE="zimbra.Widgets#ZmErrorDialogControls";
ZaErrorDialog.prototype.reset=function(){this.setDetailString();
DwtMessageDialog.prototype.reset.call(this)
};
ZaErrorDialog.prototype.setMessage=function(b,e,c,d){b=AjxStringUtil.htmlEncode(b);
b=b.replace(/&lt;br\s?(\/)?&gt;/gi,"<br />");
this._msgStr=b;
this._msgStyle=c;
this._msgTitle=d;
this._detailsVisible=false;
this._button[ZaErrorDialog.DETAIL_BUTTON].setImage("SelectPullDownArrow");
DwtMessageDialog.prototype.setMessage.call(this,b,c,d);
this.setDetailString(e)
};
ZaErrorDialog.prototype.setDetailString=function(b){if(!(this._buttonElementId[ZaErrorDialog.DETAIL_BUTTON])){return
}this._detailStr=b;
this._button[ZaErrorDialog.DETAIL_BUTTON].setVisible(b!=null);
if(this._detailsEl){this._detailsEl.value=b||""
}};
ZaErrorDialog.prototype._createHtmlFromTemplate=function(b,c){DwtMessageDialog.prototype._createHtmlFromTemplate.call(this,b,c);
this._detailsContainerEl=document.getElementById(c.id+"_details_container");
this._detailsEl=document.getElementById(c.id+"_details")
};
ZaErrorDialog.prototype._getContentHtml=function(){this._detailCellId=Dwt.getNextId();
var c=new Array();
var b=0;
c[b++]=DwtMessageDialog.prototype._getContentHtml.call(this);
c[b++]="<div id='"+this._detailCellId+"'></div>";
return c.join("")
};
ZaErrorDialog.prototype._showDetail=function(){this._detailsVisible=!this._detailsVisible;
var b=this._msgStr;
if(this._detailsVisible){b+="<div style='overflow:auto;height:100px'>";
b+="<hr> "+this._detailStr;
b+="</div>"
}DwtMessageDialog.prototype.setMessage.call(this,b,this._msgStyle,this._msgTitle);
this._button[ZaErrorDialog.DETAIL_BUTTON].setImage(this._detailsVisible?"SelectPullUpArrow":"SelectPullDownArrow")
}
}if(AjxPackage.define("zimbraAdmin.common.ZaTabView")){ZaTabView=function(c){if(arguments.length==0){return
}c=Dwt.getParams(arguments,ZaTabView.PARAMS);
var b=c.cssClassName?c.cssClassName:"DwtTabView";
this._contextId=c.contextId?c.contextId:ZaId.TAB_UNDEF;
DwtComposite.call(this,{parent:c.parent,className:b,posStyle:Dwt.ABSOLUTE_STYLE,id:ZaId.getTabId(this._contextId)});
this._iKeyName=c.iKeyName;
this._drawn=false;
this._appCtxt=this.shell.getData(ZaAppCtxt.LABEL);
this._containedObject=null;
this.setScrollStyle(Dwt.SCROLL_Y);
this._currentSubTab=[]
};
ZaTabView.PARAMS=["parent","iKeyName","cssClassName","contextId"];
ZaTabView.prototype=new DwtComposite();
ZaTabView.prototype.constructor=ZaTabView;
ZaTabView.XFormModifiers=new Object();
ZaTabView.XFormSetObjectMethods=new Object();
ZaTabView.DEFAULT_TAB=1;
ZaTabView.prototype.initForm=function(d,b,c){if(d==null||b==null){throw new AjxException(ZaMsg.ERROR_METADATA_NOT_DEFINED,AjxException.INVALID_PARAM,"ZaTabView.prototype._initForm")
}this._localXModel=new XModel(d);
this._localXForm=new XForm(b,this._localXModel,c,this,ZaId.getTabViewId(this._contextId));
this._localXForm.setController(ZaApp.getInstance());
this._localXForm.draw();
this.formChangeListener=new AjxListener(this,ZaTabView.prototype.setDirty,[true]);
this._localXForm.addListener(DwtEvent.XFORMS_VALUE_CHANGED,this.formChangeListener);
this._drawn=true
};
ZaTabView.prototype.setBounds=function(c,f,e,b){DwtControl.prototype.setBounds.call(this,c,f,e,b);
if(this.isListenerRegistered(DwtEvent.CONTROL)){var d=DwtShell.controlEvent;
d.reset();
this.notifyListeners(DwtEvent.CONTROL,d)
}};
ZaTabView.prototype.getMyXForm=function(e){var f=new Object();
if(ZaTabView.XFormModifiers[this._iKeyName]){var b=ZaTabView.XFormModifiers[this._iKeyName];
var d=b.length;
for(var c=0;
c<d;
c++){if(typeof(b[c])=="function"){b[c].call(this,f,e)
}}}return f
};
ZaTabView.prototype.getMyForm=function(){return this._localXForm
};
ZaTabView.prototype.getMyModel=function(){return this._localXModel
};
ZaTabView.prototype.getObject=function(){return this._containedObject
};
ZaTabView.prototype.setObject=function(c){this._containedObject=new Object();
this._containedObject.attrs=new Object();
this._containedObject.type=c.type;
this._containedObject.name=c.name;
if(c.id){this._containedObject.id=c.id
}if(c.rights){this._containedObject.rights=c.rights
}if(c.setAttrs){this._containedObject.setAttrs=c.setAttrs
}if(c.getAttrs){this._containedObject.getAttrs=c.getAttrs
}if(c._defaultValues){this._containedObject._defaultValues=c._defaultValues
}for(var b in c.attrs){if(c.attrs[b] instanceof Array){this._containedObject.attrs[b]=[].concat(c.attrs[b])
}else{this._containedObject.attrs[b]=c.attrs[b]
}}if(!c[ZaModel.currentTab]){this._containedObject[ZaModel.currentTab]="1"
}else{this._containedObject[ZaModel.currentTab]=c[ZaModel.currentTab]
}this._localXForm.setInstance(this._containedObject);
this.formDirtyLsnr=new AjxListener(ZaApp.getInstance().getCurrentController(),ZaXFormViewController.prototype.handleXFormChange);
this._localXForm.addListener(DwtEvent.XFORMS_FORM_DIRTY_CHANGE,this.formDirtyLsnr);
this._localXForm.addListener(DwtEvent.XFORMS_VALUE_ERROR,this.formDirtyLsnr)
};
ZaTabView.ObjectModifiers={};
ZaTabView.prototype.modifyContainedObject=function(){if(ZaTabView.ObjectModifiers[this._iKeyName]){var b=ZaTabView.ObjectModifiers[this._iKeyName];
var d=b.length;
for(var c=0;
c<d;
c++){if(typeof(b[c])=="function"){b[c].call(this)
}}}};
ZaTabView.prototype.setEnabled=function(b){};
ZaTabView.prototype.setDirty=function(b){ZaApp.getInstance().getCurrentController().setDirty(b);
this._isDirty=b;
EmailAddr_XFormItem.resetDomainLists.call(this)
};
ZaTabView.prototype.getCurrentTab=function(){return this._containedObject[ZaModel.currentTab]
};
ZaTabView.prototype.getCurrentSubTab=function(){var b=this._currentSubTab[this._containedObject[ZaModel.currentTab]];
if(b==null){b=this._currentSubTab[this._containedObject[ZaModel.currentTab]]=ZaTabView.DEFAULT_TAB
}return b
};
ZaTabView.prototype.swithTab=function(b){this._containedObject[ZaModel.currentTab]=b;
this._localXForm.refresh()
};
ZaTabView.prototype.switchSubTab=function(b){this._currentSubTab[this._containedObject[ZaModel.currentTab]]=b
};
ZaTabView.prototype.isDirty=function(){return this._isDirty
};
ZaTabView.prototype.getTabToolTip=function(){if(this._containedObject&&this._containedObject.name&&this._containedObject.type){return ZaMsg.TBB_Edit+" "+this._containedObject.type+" "+this._containedObject.name
}else{return""
}};
ZaTabView.prototype.getTabIcon=function(){if(this._containedObject&&this._containedObject.type){return this._containedObject.type
}else{return""
}};
ZaTabView.prototype.getTabTitle=function(){if(this._containedObject&&this._containedObject.name){return this._containedObject.name
}else{return ZaMsg.TBB_New
}};
ZaTabView.prototype.updateTab=function(){var b=this.getAppTab();
if(b){b.resetLabel(this.getTabTitle());
b.setImage(this.getTabIcon());
b.setToolTipContent(this.getTabToolTip())
}};
ZaTabView.prototype.getAppTab=function(){return ZaApp.getInstance().getTabGroup().getTabById(this.__internalId)
};
ZaTabView.isTAB_ENABLED=function(g,f,d){if(!g){return true
}if(AjxUtil.isEmpty(f)&&AjxUtil.isEmpty(d)){return true
}if(!AjxUtil.isEmpty(f)){var c=f.length;
for(var b=0;
b<c;
b++){if(ZaItem.hasReadPermission(f[b],g)){return true
}}}if(!AjxUtil.isEmpty(d)){var e=d.length;
for(var b=0;
b<e;
b++){if(ZaItem.hasRight(d[b],g)){return true
}}}return false
}
}if(AjxPackage.define("zimbraAdmin.common.ZaXDialog")){ZaXDialog=function(k,f,j,l,d,g,e){if(arguments.length==0){return
}this._iKeyName=g;
var b=f||"DwtDialog";
if(!this._standardButtons){this._standardButtons=[DwtDialog.OK_BUTTON]
}if(!this._extraButtons){var c=new DwtDialog_ButtonDescriptor(ZaXDialog.HELP_BUTTON,ZaMsg.TBB_Help,DwtDialog.ALIGN_LEFT,new AjxCallback(this,this._helpButtonListener));
this._extraButtons=[c]
}this._contextId=e||Dwt.getNextId(ZaId.DLG_UNDEF);
if(this.supportMinimize){this._supportMinimize=true
}DwtDialog.call(this,{parent:k,className:b,title:j,standardButtons:this._standardButtons,extraButtons:this._extraButtons,id:ZaId.getDialogId(this._contextId)});
if(this._supportMinimize){this.addMiniIcon();
this.addPopdownListener(new AjxListener(this,this.popdownHookListner))
}this._app=ZaApp.getInstance();
this._localXForm=null;
this._localXModel=null;
this._drawn=false;
this._containedObject=null;
if(!l){this._contentW="500px"
}else{this._contentW=l
}if(!d){this._contentH="350px"
}else{this._contentH=d
}this._pageDiv=document.createElement("div");
this._pageDiv.className="ZaXWizardDialogPageDiv";
this._pageDiv.style.width=this._contentW;
this._pageDiv.style.height=this._contentH;
this._pageDiv.style.overflow="auto";
this._pageDiv.style["overflow-y"]="auto";
this._pageDiv.style["overflow-x"]="auto";
this._createContentHtml();
this._helpURL=ZaXDialog.helpURL
};
ZaXDialog.helpURL=location.pathname+ZaUtil.HELP_URL+"administration_console_help.htm?locid="+AjxEnv.DEFAULT_LOCALE;
ZaXDialog.prototype=new DwtDialog;
ZaXDialog.prototype.constructor=ZaXDialog;
ZaXDialog.TEMPLATE="admin.Widgets#ZaBaseDialog";
ZaXDialog.prototype.supportMinimize=false;
ZaXDialog.prototype.registerFinishMethod=false;
ZaXDialog.prototype.miniType=1;
ZaXDialog.prototype.cacheDialog=true;
ZaXDialog.prototype._createHtmlFromTemplate=function(b,c){if(this._supportMinimize){b=ZaXDialog.TEMPLATE
}DwtDialog.prototype._createHtmlFromTemplate.call(this,b,c);
this._minEl=document.getElementById(c.id+"_minimize")
};
ZaXDialog.prototype.addMiniIcon=function(){if(this._minEl){this._minEl.innerHTML=AjxImg.getImageHtml("CollapseRight");
this._minEl.onclick=AjxCallback.simpleClosure(ZaXDialog.prototype.__handleMinClick,this)
}};
ZaXDialog.prototype.setTitleWidthForIE=function(){var d=(this._contentW||"500px").replace("px","");
d-=(24+5*2);
if(d>0){d=Dwt.__checkPxVal(d);
var b=this._htmlElId+"_title";
var c=document.getElementById(b);
if(c){c.style.width=d
}}};
ZaXDialog.prototype.getTaskItem=function(){var d=this.getCacheName?this.getCacheName():"";
if(!d){d=this._iKeyName?this._iKeyName:this.toString()
}var e=this.getTitle();
if(!e){e=this.toString()
}var c;
if(this.miniType==1){c=this.constructor
}else{c=this
}var b=new ZaTaskItem(c,d,e,this.getObject(),this.getBounds(),this.miniType,undefined,this.getFinishBtnCallback(),this.cacheDialog);
return b
};
ZaXDialog.prototype.getFinishBtnCallback=function(c){if(!this.registerFinishMethod){return
}if(!c){c=DwtWizardDialog.FINISH_BUTTON
}var b;
b=this._buttonDesc[c];
if(!b){c=DwtDialog.OK_BUTTON;
b=this._buttonDesc[c]
}if(!b){return
}if(!b.callback){return
}return{id:c,callback:b.callback}
};
ZaXDialog.prototype.popdownHookListner=function(){if(!this._inMin){var b=this.getTaskItem();
ZaZimbraAdmin.getInstance().getTaskController().removeTask(b)
}};
ZaXDialog.prototype.__handleMinClick=function(){var b=this.getTaskItem();
ZaZimbraAdmin.getInstance().getTaskController().addTask(b);
this._inMin=true;
this.popdown();
this._inMin=false
};
ZaXDialog.prototype.getTitle=function(){return this._title
};
ZaXDialog.XFormModifiers=new Object();
ZaXDialog.HELP_BUTTON=++DwtDialog.LAST_BUTTON;
ZaXDialog.prototype.popup=function(c){DwtDialog.prototype.popup.call(this,c);
if(AjxEnv.isIE&&this._supportMinimize){this.setTitleWidthForIE()
}if(this._localXForm){var b=this._localXForm.focusFirst();
var d=this._shell.getKeyboardMgr();
if(d&&d.isEnabled()){d.grabFocus(b)
}}};
ZaXDialog.prototype.initForm=function(d,c,b){if(d==null||c==null){throw new AjxException("Metadata for XForm and/or XModel are not defined",AjxException.INVALID_PARAM,"ZaXWizardDialog.prototype.initForm")
}this._localXModel=new XModel(d);
this._localXForm=new XForm(c,this._localXModel,b,this,ZaId.getDialogViewId(this._contextId));
this._localXForm.setController(ZaApp.getInstance());
this._localXForm.draw(this._pageDiv);
this._drawn=true
};
ZaXDialog.prototype.getObject=function(){return this._containedObject
};
ZaXDialog.prototype.setObject=function(b){this._containedObject=b;
this._localXForm.setInstance(this._containedObject)
};
ZaXDialog.prototype.getMyXForm=function(e){var f=new Object();
if(ZaXDialog.XFormModifiers[this._iKeyName]){var b=ZaXDialog.XFormModifiers[this._iKeyName];
var d=b.length;
for(var c=0;
c<d;
c++){if(typeof(b[c])=="function"){b[c].call(this,f,e)
}}}return f
};
ZaXDialog.prototype.setDirty=function(){};
ZaXDialog.prototype._createContentHtml=function(){this._table=document.createElement("table");
this._table.border=0;
if(this._contentW){this._table.width=this._contentW
}this._table.cellPadding=0;
this._table.cellSpacing=0;
Dwt.associateElementWithObject(this._table,this);
this._table.backgroundColor=DwtCssStyle.getProperty(this.parent.getHtmlElement(),"background-color");
var b;
var c;
b=this._table.insertRow(0);
b.align="left";
b.vAlign="middle";
c=b.insertCell(b.cells.length);
c.align="left";
c.vAlign="middle";
if(this._contentW){c.width=this._contentW
}c.appendChild(this._pageDiv);
this._getContentDiv().appendChild(this._table)
};
ZaXDialog.prototype._helpButtonListener=function(){window.open(this._helpURL)
}
}if(AjxPackage.define("zimbraAdmin.common.ZaXWizardDialog")){ZaXWizardDialog=function(l,e,j,m,c,f,g,d){if(arguments.length==0){return
}this._standardButtons=[DwtDialog.CANCEL_BUTTON];
if(g){this._extraButtons=g
}else{var b=new DwtDialog_ButtonDescriptor(ZaXWizardDialog.HELP_BUTTON,ZaMsg.TBB_Help,DwtDialog.ALIGN_LEFT,new AjxCallback(this,this._helpButtonListener));
var o=new DwtDialog_ButtonDescriptor(ZaXWizardDialog.NEXT_BUTTON,AjxMsg._next,DwtDialog.ALIGN_RIGHT,new AjxCallback(this,this.goNext));
var k=new DwtDialog_ButtonDescriptor(ZaXWizardDialog.PREV_BUTTON,AjxMsg._prev,DwtDialog.ALIGN_RIGHT,new AjxCallback(this,this.goPrev));
var n=new DwtDialog_ButtonDescriptor(ZaXWizardDialog.FINISH_BUTTON,AjxMsg._finish,DwtDialog.ALIGN_RIGHT,new AjxCallback(this,this.finishWizard));
this._extraButtons=[b,k,o,n]
}this._contextId=d?d:ZaId.DLG_UNDEF;
if(m){m=this._correntWidth(m)
}ZaXDialog.call(this,l,e,j,m,c,f,this._contextId);
this._pageIx=1;
this._currentPage=1
};
ZaXWizardDialog.prototype=new ZaXDialog;
ZaXWizardDialog.prototype.constructor=ZaXWizardDialog;
ZaXWizardDialog.Z_ACTIVE_PAGE=Dwt.Z_VIEW+10;
ZaXWizardDialog.Z_HIDDEN_PAGE=Dwt.Z_HIDDEN;
ZaXWizardDialog.Z_TAB_PANEL=Dwt.Z_VIEW+20;
ZaXWizardDialog.Z_CURTAIN=Dwt.Z_CURTAIN;
ZaXWizardDialog.NEXT_BUTTON=DwtWizardDialog.NEXT_BUTTON;
ZaXWizardDialog.PREV_BUTTON=DwtWizardDialog.PREV_BUTTON;
ZaXWizardDialog.FINISH_BUTTON=DwtWizardDialog.FINISH_BUTTON;
ZaXWizardDialog.HELP_BUTTON=++DwtDialog.LAST_BUTTON;
ZaXWizardDialog.prototype.toString=function(){return"ZaXWizardDialog"
};
ZaXWizardDialog.prototype.popdown=function(){DwtDialog.prototype.popdown.call(this);
if(this._domains){this._domains={}
}};
ZaXWizardDialog.prototype._correntWidth=function(b){if(this.supportMinimize){if(typeof(b)=="number"){return b+100
}else{if(typeof(b)=="string"){var c=parseInt(b);
if(!isNaN(c)){c=c+155;
b=c+"px";
return b
}return b
}else{return b
}}}else{return b
}};
ZaXWizardDialog.prototype.goPage=function(b){EmailAddr_XFormItem.resetDomainLists.call(this);
this._localXForm.releaseFocus();
this._localXModel.setInstanceValue(this._containedObject,ZaModel.currentStep,b);
if(this._localXForm.tabGroupIDs[b]){this._localXForm.focusFirst(this._localXForm.tabGroupIDs[b])
}else{this._localXForm.focusFirst()
}this._localXForm.refresh()
};
ZaXWizardDialog.prototype.goNext=function(){this.goPage(this._containedObject[ZaModel.currentStep]+1)
};
ZaXWizardDialog.prototype.goPrev=function(){this.goPage(this._containedObject[ZaModel.currentStep]-1)
};
ZaXWizardDialog.prototype.finishWizard=function(){this.popdown()
};
ZaXWizardDialog.prototype.getCurrentStep=function(){return this._containedObject[ZaModel.currentStep]
};
ZaXWizardDialog.prototype.addPage=function(b){var c=this._pageIx++;
return c
};
ZaXWizardDialog.prototype.initForm=function(d,b,c){if(d==null||b==null){throw new AjxException(ZaMsg.ERROR_METADATA_NOT_DEFINED,AjxException.INVALID_PARAM,"ZaXWizardDialog.prototype.initForm")
}this._localXModel=new XModel(d);
this._localXForm=new XForm(b,this._localXModel,c,this,ZaId.getDialogViewId(this._contextId));
this._localXForm.setController(ZaApp.getInstance());
this._localXForm.draw(this._pageDiv);
this._drawn=true
};
ZaXWizardDialog.prototype.initForm=function(g,c,e){if(g==null||c==null){throw new AjxException(ZaMsg.ERROR_METADATA_NOT_DEFINED,AjxException.INVALID_PARAM,"ZaXWizardDialog.prototype.initForm")
}var f={items:[]};
var b=c.items[0];
b.type=_STEPCHOICE_;
b.containerCssClass="step_container";
b.colSpan=1;
var d=c.items[3];
var h=d.containerCssClass;
if(h){h+=" step_body_container"
}else{h="step_body_container"
}d.containerCssClass=h;
f.tableCssStyle="width:100%;height:100%";
f.numCols=2;
f.colSizes=["150px","*"];
f.items=[b,d];
this._localXModel=new XModel(g);
this._localXForm=new XForm(f,this._localXModel,e,this,ZaId.getDialogViewId(this._contextId));
this._localXForm.setController(ZaApp.getInstance());
this._localXForm.draw(this._pageDiv);
this._drawn=true
};
ZaXWizardDialog.prototype.supportMinimize=true;
ZaXWizardDialog.prototype.getObject=function(){return this._containedObject
};
ZaXWizardDialog.prototype.setObject=function(c){this._containedObject=new Object();
this._containedObject.attrs=new Object();
for(var b in c.attrs){this._containedObject.attrs[b]=c.attrs[b]
}this._localXForm.setInstance(this._containedObject.attrs)
}
}if(AjxPackage.define("zimbraAdmin.common.LDAPURL_XFormItem")){LDAPURL_XFormItem=function(){};
XFormItemFactory.createItemType("_LDAPURL_","ldapurl",LDAPURL_XFormItem,Composite_XFormItem);
LDAPURL_XFormItem.prototype.numCols=5;
LDAPURL_XFormItem.prototype.nowrap=true;
LDAPURL_XFormItem.prototype._protocolPart="ldap://";
LDAPURL_XFormItem.prototype._serverPart="";
LDAPURL_XFormItem.prototype._portPart="389";
LDAPURL_XFormItem.prototype.defSSLPort="636";
LDAPURL_XFormItem.prototype.defPort="389";
LDAPURL_XFormItem.prototype.visibilityChecks=[ZaItem.hasReadPermission];
LDAPURL_XFormItem.prototype.enableDisableChecks=[ZaItem.hasWritePermission];
LDAPURL_XFormItem.prototype.initializeItems=function(){var c=this.getInheritedProperty("ldapPort");
var d=this.getInheritedProperty("ldapSSLPort");
this.defSSLPort=d?d:"636";
this.defPort=c?c:"389";
var b=this.getForm().getInstance();
if(b&&b[ZaDomain.A2_allowClearTextLDAPAuth]=="FALSE"){this._protocolPart="ldaps://";
this._portPart=this.defSSLPort
}else{this._protocolPart="ldap://";
this._portPart=this.defPort
}Composite_XFormItem.prototype.initializeItems.call(this);
this.items[0].valueChangeEventSources=[this.getRefPath()];
this.items[1].valueChangeEventSources=[this.getRefPath()];
this.items[3].valueChangeEventSources=[this.getRefPath()]
};
LDAPURL_XFormItem.prototype.items=[{type:_OUTPUT_,width:"40px",ref:".",labelLocation:_NONE_,label:null,getDisplayValue:function(c){var d;
if(c!=null&&c.length>0){var b=c.split(/(:\/\/)/);
if(AjxEnv.isIE){if(b[0]=="ldap"||b[0]=="ldaps"){d=b[0]+"://"
}}else{if(b.length==3){d=b[0]+b[1]
}}this.getParentItem()._protocolPart=d
}else{if(this.getParentItem()._protocolPart!=null){d=this.getParentItem()._protocolPart
}else{d="ldap://"
}}return d
}},{type:_TEXTFIELD_,width:"200px",forceUpdate:true,ref:".",labelLocation:_NONE_,label:null,required:true,visibilityChecks:[],enableDisableChecks:[],getDisplayValue:function(c){var e="";
if(c){var b=c.split(/[:\/]/);
if(AjxEnv.isIE){var d=c.substring(7);
var f=d.split(":");
e=f[0]
}else{if(b.length>=4){e=b[3]
}}this.getParentItem()._serverPart=e
}return e
},elementChanged:function(e,c,b){this.getParentItem()._serverPart=e;
var d=this.getParentItem()._protocolPart+e+":"+this.getParentItem()._portPart;
this.getForm().itemChanged(this.getParentItem(),d,b)
}},{type:_OUTPUT_,width:"5px",labelLocation:_NONE_,label:null,value:":",ref:null},{type:_TEXTFIELD_,width:"40px",forceUpdate:true,ref:".",labelLocation:_NONE_,label:null,visibilityChecks:[],enableDisableChecks:[],getDisplayValue:function(c){var e;
if(c){var b=c.split(/[:\/]/);
if(AjxEnv.isIE){var d=c.substring(7);
var f=d.split(":");
e=f[1]
}else{if(b.length>=5){e=b[4]
}}this.getParentItem()._portPart=e
}else{if(this.getParentItem()._portPart){e=this.getParentItem()._portPart
}else{e=this.getParentItem().defPort
}}return e
},elementChanged:function(e,c,b){this.getParentItem()._portPart=e;
var d=this.getParentItem()._protocolPart+this.getParentItem()._serverPart+":"+e;
this.getForm().itemChanged(this.getParentItem(),d,b)
}},{type:_CHECKBOX_,width:"40px",containerCssStyle:"width:40px",forceUpdate:true,ref:".",labelLocation:_NONE_,label:null,visibilityChecks:[],subLabel:"",align:_RIGHT_,enableDisableChecks:[],getDisplayValue:function(d){var b=this.getForm().getInstance();
if((d==null||d.length<=0)&&(b[ZaDomain.A2_allowClearTextLDAPAuth]&&b[ZaDomain.A2_allowClearTextLDAPAuth]=="FALSE")){this.getParentItem()._protocolPart="ldaps://";
this.getParentItem()._portPart=this.getParentItem().defSSLPort;
return true
}var f=false;
var e="ldap://";
if(d!=null&&d.length>0){var c=d.split(/[:\/]/);
e=c[0]+"://"
}this.getParentItem()._protocolPart=e;
if(e.length==8){f=true
}return f
},elementChanged:function(e,c,b){if(e){this.getParentItem()._protocolPart="ldaps://";
this.getParentItem()._portPart=this.getParentItem().defSSLPort
}else{this.getParentItem()._protocolPart="ldap://";
this.getParentItem()._portPart=this.getParentItem().defPort
}var d=this.getParentItem()._protocolPart+this.getParentItem()._serverPart+":"+this.getParentItem()._portPart;
this.getForm().itemChanged(this.getParentItem(),d,b)
}}]
}if(AjxPackage.define("zimbraAdmin.common.HostPort_XFormItem")){HostPort_XFormItem=function(){};
XFormItemFactory.createItemType("_HOSTPORT_","hostport",HostPort_XFormItem,Composite_XFormItem);
HostPort_XFormItem.prototype.numCols=3;
HostPort_XFormItem.prototype.nowrap=true;
HostPort_XFormItem.prototype._serverPart="";
HostPort_XFormItem.prototype._portPart="";
HostPort_XFormItem.prototype.items=[{type:_TEXTFIELD_,width:"200px",forceUpdate:true,ref:".",labelLocation:_NONE_,label:null,visibilityChecks:[],enableDisableChecks:[],required:true,getDisplayValue:function(c){var d="";
if(c){var b=c.split(":");
if(b.length>=2){d=b[0]
}else{d=c
}this.getParentItem()._serverPart=d
}return d
},elementChanged:function(e,c,b){this.getParentItem()._serverPart=e;
var d="";
if(e){d=e
}if(this.getParentItem()._portPart){d+=":";
d+=this.getParentItem()._portPart
}this.getForm().itemChanged(this.getParentItem(),d,b)
},onClick:"Super_HostPort_XFormItem.handleClick",onMouseout:"Super_HostPort_XFormItem.handleMouseout"},{type:_OUTPUT_,width:"5px",labelLocation:_NONE_,label:null,value:":"},{type:_TEXTFIELD_,width:"40px",forceUpdate:true,ref:".",labelLocation:_NONE_,label:null,visibilityChecks:[],enableDisableChecks:[],getDisplayValue:function(c){var d="";
if(c){var b=c.split(":");
if(b.length==2){d=b[1]
}else{d=""
}this.getParentItem()._portPart=d
}return d
},elementChanged:function(e,c,b){this.getParentItem()._portPart=e;
var d="";
if(this.getParentItem()._serverPart){d=this.getParentItem()._serverPart
}if(e){d+=":";
d+=e
}this.getForm().itemChanged(this.getParentItem(),d,b)
}}]
}if(AjxPackage.define("zimbraAdmin.common.MailQuota_XModelItem")){MailQuota_XModelItem=function(){};
XModelItemFactory.createItemType("_MAILQUOTA_","mailquota",MailQuota_XModelItem);
MailQuota_XModelItem.prototype.validateType=XModelItem.prototype.validateNumber;
MailQuota_XModelItem.prototype.getterScope=_MODELITEM_;
MailQuota_XModelItem.prototype.setterScope=_MODELITEM_;
MailQuota_XModelItem.prototype.getter="getValue";
MailQuota_XModelItem.prototype.setter="setValue";
MailQuota_XModelItem.prototype.maxInclusive=8796093022207;
MailQuota_XModelItem.prototype.minInclusive=0;
MailQuota_XModelItem.prototype.getValue=function(ins,current,ref){var value=null;
if(eval("ins."+ref)!=null){value=eval("ins."+ref)/1048576;
if(value!=Math.round(value)){value=Number(value).toFixed(2)
}}if(typeof value=="number"&&value==0){value="0"
}return value
};
MailQuota_XModelItem.prototype.setValue=function(h,j,g,c){var k=new Array();
var b=Math.round(h*1048576);
if(c.indexOf(".")>=0){k=c.split(".")
}else{if(c.indexOf("/")>=0){k=c.split("/")
}else{j[c]=b;
return b
}}var d=k.length-1;
var f=j[k[0]];
for(var e=1;
e<d;
e++){f=f[k[e]]
}f[k[d]]=b;
return b
};
MailQuota2_XModelItem=function(){};
XModelItemFactory.createItemType("_MAILQUOTA_2_","mailquota_2",MailQuota2_XModelItem);
MailQuota2_XModelItem.prototype.getterScope=_MODELITEM_;
MailQuota2_XModelItem.prototype.getter="getValue";
MailQuota2_XModelItem.prototype.getValue=function(b,e,c){var d=this.getLocalValue(b,e,c);
if(d==null){d=this.getSuperValue(b,e,c)
}if(d<=0){d=ZaMsg.Unlimited
}return d
};
MailQuota2_XModelItem.prototype.getSuperValue=function(ins,current,ref){if(!ins){return null
}var _ref=ref?ref.replace("/","."):this.ref.replace("/",".");
var value=(eval("ins._defaultValues."+_ref)!=null)?Number(eval("ins._defaultValues."+_ref)/1048576).toFixed(0):0;
return value
};
MailQuota2_XModelItem.prototype.getLocalValue=function(ins,current,ref){if(!ins){return null
}var _ref=ref?ref.replace("/","."):this.ref.replace("/",".");
var value=(eval("ins."+_ref)!=null)?Number(eval("ins."+_ref)/1048576).toFixed(0):null;
return value
}
}if(AjxPackage.define("zimbraAdmin.common.ZaSelectRadioXFormItem")){ZaSelectRadio_XFormItem=function(){};
XFormItemFactory.createItemType("_ZASELECT_RADIO_","zaselect_radio",ZaSelectRadio_XFormItem,Composite_XFormItem);
ZaSelectRadio_XFormItem.prototype.numCols=2;
ZaSelectRadio_XFormItem.prototype.colSizes=["275px","275px"];
ZaSelectRadio_XFormItem.prototype.nowrap=false;
ZaSelectRadio_XFormItem.prototype.labelWrap=true;
ZaSelectRadio_XFormItem.prototype.items=[];
ZaSelectRadio_XFormItem.prototype.labelWidth="275px";
ZaSelectRadio_XFormItem.prototype.initializeItems=function(){var h=this.getInheritedProperty("selectRef");
var g=this.getInheritedProperty("radioBoxLabel1");
var f=this.getInheritedProperty("radioBoxLabel2");
var j=this.getInheritedProperty("choices");
var d={type:_RADIO_,groupname:this.id+"zimlet_select_check_grp"+h,ref:".",label:g,labelLocation:_RIGHT_,elementChanged:function(m,l,k){if(m==true){this.getForm().itemChanged(this.getParentItem(),null,k)
}},updateElement:function(k){this.getElement().checked=!k
}};
var c={type:_RADIO_,groupname:this.id+"zimlet_select_check_grp"+h,ref:".",label:f,labelLocation:_RIGHT_,updateElement:function(k){this.getElement().checked=k
},elementChanged:function(m,l,k){}};
var b={type:_OSELECT_CHECK_,choices:j,colSpan:3,ref:h,width:"275px",onChange:function(m,l,k){if(this.getParentItem()&&this.getParentItem().getParentItem()&&this.getParentItem().getParentItem().getOnChangeMethod()){return this.getParentItem().getParentItem().getOnChangeMethod().call(this,m,l,k)
}else{return this.setInstanceValue(m)
}},forceUpdate:true,updateElement:function(k){OSelect_XFormItem.prototype.updateElement.call(this,k)
},cssStyle:"margin-bottom:5px;margin-top:5px;border:2px inset gray;"};
var e={type:_GROUP_,numCols:3,colSizes:["130px","15px","130px"],items:[b,{type:_DWT_BUTTON_,label:ZaMsg.SelectAll,width:"120px",onActivate:function(l){var k=this.getParentItem().items[0];
if(k){k.selectAll(l)
}}},{type:_CELLSPACER_,width:"15px"},{type:_DWT_BUTTON_,label:ZaMsg.DeselectAll,width:"120px",onActivate:function(l){var k=this.getParentItem().items[0];
if(k){k.deselectAll(l)
}}}]};
this.items=[d,c,{type:_CELLSPACER_,width:this.labelWidth},e];
Composite_XFormItem.prototype.initializeItems.call(this)
}
}if(AjxPackage.define("zimbraAdmin.common.ZaZimletSelectXFormItem")){ZaZimletSelect_XFormItem=function(){};
XFormItemFactory.createItemType("_ZA_ZIMLET_SELECT_","za_zimlet_select",ZaZimletSelect_XFormItem,OSelect_Check_XFormItem);
ZaZimletSelect_XFormItem.prototype.initializeItems=function(){ZaZimletSelect_XFormItem.prototype.choicePrefixes=[{value:"!",label:ZaMsg.mandatory},{value:"-",label:ZaMsg.disabled},{value:"+",label:ZaMsg.enabled}];
OSelect_Check_XFormItem.prototype.initializeItems.call(this)
};
ZaZimletSelect_XFormItem.prototype.onSubChoiceClick=function(d,b,c){b=b||window.event;
this.subChoiceSelected(d,b,c)
};
ZaZimletSelect_XFormItem.prototype.onSubChoiceDoubleClick=function(d,b,c){this.subChoiceSelected(d,true,b,c)
};
ZaZimletSelect_XFormItem.prototype.subChoiceSelected=function(e,b,d){var c=this.getNormalizedValues()[e];
this.setPrefix(c,b,d)
};
ZaZimletSelect_XFormItem.prototype.getPrefixIndex=function(b){if(!this._prefixIndexes){this._prefixIndexes={};
var e=this.getInheritedProperty("choicePrefixes");
var d=e.length;
for(var c=0;
c<d;
c++){this._prefixIndexes[e[c].value]=c
}}return this._prefixIndexes[b]
};
ZaZimletSelect_XFormItem.prototype.getNormalizedInstanceValue=function(){var l=this.getInstanceValue();
var h=new Array();
if(typeof l=="string"){h=new String(l)
}else{if(typeof l=="object"||l instanceof Array){for(var k in l){h[k]=l[k]
}}}if(h){if(h instanceof String){if(h==""){h=[]
}else{h=h.split(",")
}}}var c=this.getInheritedProperty("choicePrefixes");
var e=c.length;
var g=h.length;
for(var d=0;
d<g;
d++){var f=false;
for(var b=0;
b<e;
b++){if(h[d].substr(0,1)==c[b].value){h[d]={value:h[d].substr(1),prefix:h[d].substr(0,1)};
f=true;
break
}}if(!f){h[d]={value:h[d],prefix:""}
}}return h
};
ZaZimletSelect_XFormItem.prototype.setPrefix=function(j,f,h){var b=this.getNormalizedInstanceValue();
var c=[];
var g=false;
for(var e=0;
e<b.length;
e++){if(b[e].value==j){b[e].prefix=h
}c.push([b[e].prefix,b[e].value].join(""))
}if(!c||(c.length==1&&c[0]=="")){c=[]
}var d=this.getModelItem();
if(d&&d.getOutputType){if(d.getOutputType()==_STRING_){c=c.join(d.getItemDelimiter())
}}else{c=c.join(",")
}this.getForm().itemChanged(this,c,f)
};
ZaZimletSelect_XFormItem.prototype.setValue=function(c,d,f,b){var e=this.getNormalizedInstanceValue();
var l=[];
var k=false;
var g;
if(c instanceof Array||typeof c=="object"){for(a in c){if(typeof c[a]=="string"&&c[a].substr(0,1)!="+"&&c[a].substr(0,1)!="-"){var j="+";
for(g=0;
g<e.length;
g++){if(e[g].value==c[a]&&e[g].prefix){j=e[g].prefix;
e.splice(g,1);
break
}}c[a]=j+c[a]
}l.push(c[a])
}}else{for(g=0;
g<e.length;
g++){if(e[g].value==c){k=true;
break
}}if(k){e.splice(g,1)
}else{e.push({value:c,prefix:"+"})
}for(g=0;
g<e.length;
g++){l.push(e[g].prefix+e[g].value)
}}if(!l||(l.length==1&&l[0]=="")){l=[]
}var h=this.getModelItem();
if(h&&h.getOutputType){if(h.getOutputType()==_STRING_){l=l.join(h.getItemDelimiter())
}}else{l=l.join(",")
}this.getForm().itemChanged(this,l,b)
};
ZaZimletSelect_XFormItem.prototype.getChoiceHTML=function(g,j,h,k){var f=this.getInheritedProperty("choicePrefixes");
var d=this.getFormGlobalRef()+".getItemById('"+this.getId()+"')";
var b=this.getId();
var c=["<tr><td class=",k,' onmouseover="',d,".showToolTip('",j,"',event||window.event)\",",' onmouseout="',d,'.hideToolTip(event||window.event)">',h,"</td><td class=",k,' onclick="',d,".onChoiceClick(",g,', event||window.event)"',' ondblclick="',d,".onChoiceDoubleClick(",g,", event||window.event)\" id='",b,"_choice_",g,"'>","<table cellspacing=0 cellpadding=0><tr><td><input type=checkbox id='",b,"_choiceitem_",g,"'></td><td>",ZaMsg.Available,"</td></tr></table></td>"];
for(var e=0;
e<f.length;
e++){c.push("<td class=",k,' onclick="',d,".onSubChoiceClick(",g,", event||window.event, '",f[e].value,"')\"",' ondblclick="',d,".onSubChoiceDoubleClick(",g,", event||window.event, '",f[e].value,"')\" id='",b,"_choice_",g,"_prefix_",e,"'>","<table cellspacing=0 cellpadding=0><tr><td><input type=radio autocomplete='off' id='",b,"_radiochoiceitem_",g,"_prefix_",e,"' name='zazimletselect_",b,"_radiogrp_",g,"'></td><td>",f[e].label,"</td></tr></table></td>")
}c.push("</tr>");
return c.join("")
};
ZaZimletSelect_XFormItem.prototype.showToolTip=function(h,b){var c=ZaZimlet.zimlets[h];
var f;
if(!c){f="Unknown Zimlet"
}else{f=ZaZimletListView.__processMessage(h,c.attrs[ZaZimlet.A_zimbraZimletDescription]);
if(f.slice(0,2)=="${"){f=ZaMsg.Zimlet_Description_Loading
}}var d=new DwtUiEvent(true);
d.setFromDhtmlEvent(b);
var g=DwtShell.getShell(window);
var k=g.getToolTip();
var e=new Array(20);
var j=0;
e[j++]="<table cellpadding='0' cellspacing='0' border='0'>";
e[j++]="<tr valign='center'><td colspan='2' align='left'>";
e[j++]="<div style='white-space:nowrap; overflow:hidden;width:350'>";
e[j++]="<table cellpadding='0' cellspacing='0' border='0' style='width:100%;'>";
e[j++]="<tr valign='center' >";
e[j++]="<td><b>"+AjxStringUtil.htmlEncode(h)+"</b></td>";
e[j++]="<td align='right'></td></tr>";
e[j++]="<tr><td><hr style='border:none;border-top:1px solid black;height:0'></td><tr>";
e[j++]="<tr><td>"+AjxStringUtil.htmlEncode(f)+"</td></tr>";
e[j++]="</table>";
e[j++]="</div></td></tr>";
e[j++]="</table>";
k.setContent(e.join(""));
k.popup(d.docX,d.docY,null,true)
};
ZaZimletSelect_XFormItem.prototype.hideToolTip=function(c){var b=DwtShell.getShell(window);
var d=b.getToolTip();
d.popdown()
};
ZaZimletSelect_XFormItem.prototype.hiliteChoice=function(e){var d=this.getChoiceElements(e);
if(d){var c=d[1];
c.className=this.getChoiceSelectedCssClass();
var b=c.getElementsByTagName("input");
if(b){b[0].checked=true;
this.enableSubChoice(e)
}}};
ZaZimletSelect_XFormItem.prototype.dehiliteChoice=function(e){var d=this.getChoiceElements(e);
if(d){var c=d[1];
c.className=this.getChoiceCssClass();
var b=c.getElementsByTagName("input");
if(b){b[0].checked=false;
this.disableSubChoice(e)
}}};
ZaZimletSelect_XFormItem.prototype.hiliteSubChoice=function(e,c){var f=[this.getId(),"_choice_",e,"_prefix_",c].join("");
var d=this.getElement(f);
if(d){d.className=this.getChoiceSelectedCssClass();
var b=d.getElementsByTagName("input");
if(b){b[0].checked=true
}}};
ZaZimletSelect_XFormItem.prototype.dehiliteSubChoice=function(e,c){var f=[this.getId(),"_choice_",e,"_prefix_",c].join("");
var d=this.getElement(f);
if(d){d.className=this.getChoiceCssClass();
var b=d.getElementsByTagName("input");
if(b){b[0].checked=false
}}};
ZaZimletSelect_XFormItem.prototype.disableSubChoice=function(e){var c=this.getInheritedProperty("choicePrefixes");
for(var b=0;
b<c.length;
b++){var g=[this.getId(),"_choice_",e,"_prefix_",b].join("");
var d=this.getElement(g);
if(d){d.className=this.getChoiceCssClass()+"_disabled";
var f=d.getElementsByTagName("input");
if(f){f[0].disabled=true
}}}};
ZaZimletSelect_XFormItem.prototype.enableSubChoice=function(e){var c=this.getInheritedProperty("choicePrefixes");
for(var b=0;
b<c.length;
b++){var g=[this.getId(),"_choice_",e,"_prefix_",b].join("");
var d=this.getElement(g);
if(d){d.className=this.getChoiceCssClass();
var f=d.getElementsByTagName("input");
if(f){f[0].disabled=false
}}}};
ZaZimletSelect_XFormItem.prototype.updateElement=function(){var d=this.getElement();
d.innerHTML=this.getChoicesHTML();
var b=this.getNormalizedInstanceValue();
this.clearAllHilites();
if(b){for(var c=0;
c<b.length;
c++){var e=this.getChoiceNum(b[c].value);
if(e!=-1){this.hiliteChoice(e);
if(b[c].prefix!=""){this.hiliteSubChoice(e,this.getPrefixIndex(b[c].prefix))
}}}}this.updateEnabledDisabled()
};
ZaZimletSelect_XFormItem.prototype.setElementEnabled=function(m){var q=this.getNormalizedChoices();
if(!q){return
}var o=q.values;
if(!o){return
}var e=o.length;
var g=this.getInheritedProperty("choicePrefixes");
var k=g.length;
for(var h=0;
h<e;
h++){var d=this.getElement([this.getId(),"_choiceitem_",h].join(""));
var l=this.getElement([this.getId(),"_choice_",h].join(""));
if(d){if(m){l.className=this.getChoiceCssClass();
d.className=this.getChoiceCssClass();
d.disabled=false
}else{l.className=this.getChoiceCssClass()+"_disabled";
d.className=this.getChoiceCssClass()+"_disabled";
d.disabled=true;
for(var f=0;
f<k;
f++){var b=[this.getId(),"_radiochoiceitem_",h,"_prefix_",f].join("");
var p=[this.getId(),"_choice_",h,"_prefix_",f].join("");
var c=this.getElement(b);
var n=this.getElement(p);
n.className=this.getChoiceCssClass()+"_disabled";
d.className=this.getChoiceCssClass()+"_disabled";
d.disabled=true
}}}}};
ZaZimletSelectCombo_XFormItem=function(){};
XFormItemFactory.createItemType("_ZA_ZIMLET_SELECT_COMBO_","za_zimlet_select_combo",ZaZimletSelectCombo_XFormItem,Composite_XFormItem);
ZaZimletSelectCombo_XFormItem.prototype.numCols=1;
ZaZimletSelectCombo_XFormItem.prototype.colSizes=["*"];
ZaZimletSelectCombo_XFormItem.prototype.nowrap=false;
ZaZimletSelectCombo_XFormItem.prototype.labelWrap=true;
ZaZimletSelectCombo_XFormItem.prototype.items=[];
ZaZimletSelectCombo_XFormItem.prototype.initializeItems=function(){var g=this.getInheritedProperty("selectRef");
var h=this.getInheritedProperty("choices");
var c=this.getInheritedProperty("selectLabel");
var f=this.getInheritedProperty("selectLabelLocation");
var e=this.getInheritedProperty("choicesWidth")||"500px";
var b={type:_ZA_ZIMLET_SELECT_,choices:h,colSpan:4,ref:g,label:c,labelLocation:f,width:e,bmolsnr:true,cssStyle:"margin-bottom:5px;margin-top:5px;border:2px inset gray;"};
var d={type:_GROUP_,numCols:4,colSizes:["130px","5px","130px","*"],items:[b,{type:_DWT_BUTTON_,label:ZaMsg.SelectAll,width:"120px",onActivate:function(k){var j=this.getParentItem().items[0];
if(j){j.selectAll(k)
}}},{type:_CELLSPACER_,width:"5px"},{type:_DWT_BUTTON_,label:ZaMsg.DeselectAll,width:"120px",onActivate:function(k){var j=this.getParentItem().items[0];
if(j){j.deselectAll(k)
}}},{type:_CELLSPACER_,width:"235px"}]};
this.items=[d];
Composite_XFormItem.prototype.initializeItems.call(this)
}
}if(AjxPackage.define("zimbraAdmin.common.ZaCheckBoxListXFormItem")){ZaCheckBox_List_XFormItem=function(){};
XFormItemFactory.createItemType("_ZA_CHECKBOX_LIST_","za_checkbox_list",ZaCheckBox_List_XFormItem,Composite_XFormItem);
ZaCheckBox_List_XFormItem.prototype.numCols=2;
ZaCheckBox_List_XFormItem.prototype.colSizes=["275px","275px"];
ZaCheckBox_List_XFormItem.prototype.nowrap=false;
ZaCheckBox_List_XFormItem.prototype.labelWrap=true;
ZaCheckBox_List_XFormItem.prototype.items=[];
ZaCheckBox_List_XFormItem.prototype.labelWidth="275px";
ZaCheckBox_List_XFormItem.prototype.choicesWidth="275px";
ZaCheckBox_List_XFormItem.prototype.initializeItems=function(){var f=this.getInheritedProperty("selectRef");
var g=this.getInheritedProperty("choices");
var c=this.getInheritedProperty("selectLabel");
var e=AjxEnv.isIE?"275px":(this.getInheritedProperty("choicesWidth")||"275px");
var b={type:_OSELECT_CHECK_,choices:g,colSpan:3,ref:f,label:c,labelLocation:_TOP_,width:e,bmolsnr:true,cssStyle:"margin-bottom:5px;margin-top:5px;border:2px inset gray;"};
var d={type:_GROUP_,numCols:3,colSizes:["130px","15px","130px"],items:[b,{type:_DWT_BUTTON_,label:ZaMsg.SelectAll,width:"120px",onActivate:function(j){var h=this.getParentItem().items[0];
if(h){h.selectAll(j)
}}},{type:_CELLSPACER_,width:"15px"},{type:_DWT_BUTTON_,label:ZaMsg.DeselectAll,width:"120px",onActivate:function(j){var h=this.getParentItem().items[0];
if(h){h.deselectAll(j)
}}}]};
this.items=[{type:_CELLSPACER_,width:this.labelWidth},d];
Composite_XFormItem.prototype.initializeItems.call(this)
}
}if(AjxPackage.define("zimbraAdmin.common.Signature_XFormItem")){Signature_XFormItem=function(){};
XFormItemFactory.createItemType("_SIGNATURE_","signature",Signature_XFormItem,Composite_XFormItem);
Signature_XFormItem.prototype.numCols=1;
Signature_XFormItem.prototype.nowrap=true;
Signature_XFormItem.A_zimbraSigatureName="name";
Signature_XFormItem.A_zimbraSigatureContent="content";
Signature_XFormItem.A_zimbraSigatureType="type";
Signature_XFormItem.prototype.visibilityChecks=[ZaItem.hasReadPermission];
Signature_XFormItem.prototype.enableDisableChecks=[ZaItem.hasWritePermission];
Signature_XFormItem.prototype.initializeItems=function(){Composite_XFormItem.prototype.initializeItems.call(this)
};
Signature_XFormItem.typeChoice=[{value:"",label:ZaMsg.VALUE_NOT_SET},{value:"text/plain",label:ZaMsg.resSignaturePlainType},{value:"text/html",label:ZaMsg.resSignatureHTMLType}];
Signature_XFormItem.prototype.items=[{type:_TEXTFIELD_,ref:".",width:"300px",labelLocation:_LEFT_,forceUpdate:true,label:ZaMsg.Dlg_SignatureName,visibilityChecks:[],enableDisableChecks:[],labelCssStyle:"width:194px",getDisplayValue:function(b){if(b&&b.name){val=b.name
}else{val=""
}return val
},elementChanged:function(e,c,d){var b={};
if(c==""||!c){c={}
}b=ZaUtil.deepCloneObject(c);
b.name=e;
this.getForm().itemChanged(this.getParentItem(),b,d)
}},{type:_TEXTAREA_,width:"300px",forceUpdate:true,ref:".",labelLocation:_LEFT_,label:ZaMsg.Dlg_SignatureContent,visibilityChecks:[],enableDisableChecks:[],labelCssStyle:"width:194px",getDisplayValue:function(b){var c;
if(b&&b.content){c=b.content
}else{c=""
}return c
},elementChanged:function(d,c,e){var b={};
if(c==""||!c){c={}
}b=ZaUtil.deepCloneObject(c);
b.content=d;
this.getForm().itemChanged(this.getParentItem(),b,e)
}}]
}if(AjxPackage.define("zimbraAdmin.common.Super_XFormItems")){Cos_String_XModelItem=function(){};
XModelItemFactory.createItemType("_COS_STRING_","cos_string",Cos_String_XModelItem);
Cos_String_XModelItem.prototype.dataType=_STRING_;
Cos_String_XModelItem.prototype.getter="getValue";
Cos_String_XModelItem.prototype.getterScope=_MODELITEM_;
Cos_String_XModelItem.prototype.setter="setLocalValue";
Cos_String_XModelItem.prototype.setterScope=_MODELITEM_;
Cos_String_XModelItem.prototype.setValueAt=function(b,h,f){var e=new Array();
if(f.indexOf(".")>=0){e=f.split(".")
}else{if(f.indexOf("/")>=0){e=f.split("/")
}else{b[f]=h;
return h
}}var d=e.length-1;
var g=b[e[0]];
for(var c=1;
c<d;
c++){g=g[e[c]]
}g[e[d]]=h
};
Cos_String_XModelItem.prototype.getValue=function(b,e,c){var d=this.getLocalValue(b);
if(d==null){d=this.getSuperValue(b)
}return d
};
Cos_String_XModelItem.prototype.getSuperValue=function(ins){if(!ins||!ins._defaultValues){return null
}var _ref=this.ref.replace("/",".");
return eval("ins._defaultValues."+_ref)
};
Cos_String_XModelItem.prototype.getLocalValue=function(ins,refPath){if(!ins){return null
}var _ref=this.ref.replace("/",".");
return eval("ins."+_ref)
};
Cos_String_XModelItem.prototype.setLocalValue=function(d,b,e,c){this.setValueAt(b,d,c)
};
Cos_String_XModelItem.prototype.validateType=XModelItem.prototype.validateString;
Cos_Number_XModelItem=function(){};
XModelItemFactory.createItemType("_COS_NUMBER_","cos_number",Cos_Number_XModelItem,Cos_String_XModelItem);
Cos_Number_XModelItem.prototype.validateType=XModelItem.prototype.validateNumber;
Cos_Int_XModelItem=function(){};
XModelItemFactory.createItemType("_COS_INT_","cos_int",Cos_Int_XModelItem,Cos_String_XModelItem);
Cos_Int_XModelItem.prototype.validateType=XModelItem.prototype.validateInt;
Cos_Enum_XModelItem=function(){};
XModelItemFactory.createItemType("_COS_ENUM_","cos_enum",Cos_Enum_XModelItem,Cos_String_XModelItem);
Cos_Enum_XModelItem.prototype.getDefaultValue=function(){return this.getChoices()[0]
};
Cos_Enum_XModelItem.prototype.getChoices=function(){if(typeof this.choices=="function"){this.choices=this.choices.call(this)
}return this.choices
};
Cos_Enum_XModelItem.prototype.getSelection=function(){return this.selection
};
Cos_Enum_XModelItem.prototype.validateType=function(d){var e=this.getSelection()==_OPEN_;
if(e){return d
}var f=this.getChoices();
for(var c=0;
c<f.length;
c++){var b=f[c];
if(AjxUtil.isInstance(b,Object)){if(b.value==d){return d
}}else{if(b==d){return d
}}}throw this.getModel().getErrorMessage("didNotMatchChoice",d)
};
Cos_Enum_Polling_XModelItem=function(){};
XModelItemFactory.createItemType("_COS_ENUM_POLLING_","cos_enum_polling",Cos_Enum_Polling_XModelItem,Cos_Enum_XModelItem);
Cos_Enum_Polling_XModelItem.prototype.getValue=function(b,f,d){var e=this.getLocalValue(b);
if(e==null){e=this.getSuperValue(b)
}var c=/^([0-9])+([dhms]|ms)$/;
if(!c.test(e)){e+="s"
}return e
};
Cos_List_XModelItem=function(){};
XModelItemFactory.createItemType("_COS_LIST_","list_enum",Cos_List_XModelItem,Cos_String_XModelItem);
Cos_List_XModelItem.prototype.outputType=_LIST_;
Cos_List_XModelItem.prototype.itemDelimiter=List_XModelItem.prototype.itemDelimiter;
Cos_List_XModelItem.prototype.inputDelimiter=List_XModelItem.prototype.inputDelimiter;
Cos_List_XModelItem.prototype.listItem=List_XModelItem.prototype.listItem;
Cos_List_XModelItem.prototype.getOutputType=List_XModelItem.prototype.getOutputType;
Cos_List_XModelItem.prototype.getItemDelimiter=List_XModelItem.prototype.getItemDelimiter;
Cos_List_XModelItem.prototype.getInputDelimiter=List_XModelItem.prototype.getInputDelimiter;
Cos_List_XModelItem.prototype.getListItem=List_XModelItem.prototype.getListItem;
Cos_List_XModelItem.prototype.initializeItems=List_XModelItem.prototype.initializeItems;
Cos_List_XModelItem.prototype.validateType=List_XModelItem.prototype.validateType;
Cos_List_XModelItem.prototype.getDefaultValue=List_XModelItem.prototype.getDefaultValue;
Cos_List_XModelItem.prototype.getSuperValue=function(ins){if(!ins||!ins._defaultValues){return null
}var _ref=this.ref.replace("/",".");
var lst=eval("ins._defaultValues."+_ref);
if(lst){if(this.getOutputType()==_STRING_){if(lst instanceof Array){return lst.join(this.getItemDelimiter())
}}else{var retval=[];
if(!(lst instanceof Array)){lst=[lst]
}var cnt=lst.length;
for(var i=0;
i<cnt;
i++){retval.push(lst[i])
}return retval
}}};
Cos_List_XModelItem.prototype.setLocalValue=function(val,ins,current,ref){if(val&&this.getOutputType()==_STRING_&&!(val instanceof Array)){var value=val.split(this.getInputDelimiter());
eval("ins."+ref+" = value");
this.setValueAt(ins,value,ref)
}else{var value=eval("ins."+ref+" = val");
this.setValueAt(ins,value,ref)
}};
Cos_List_XModelItem.prototype.getLocalValue=function(ins,refPath){if(!ins){return null
}var _ref=this.ref.replace("/",".");
var value=eval("ins."+_ref);
if(value&&this.getOutputType()==_STRING_&&value instanceof Array){return value.join(this.getItemDelimiter())
}else{return value
}};
Cos_List_XModelItem.prototype.initializeItems=function(){var b=this.listItem;
b.ref=b.id="#";
this.listItem=XModelItemFactory.createItem(b,this,this.getModel());
this.listItem.initializeItems()
};
Cos_List_XModelItem.prototype.validateType=function(b){return b
};
Cos_MailQuota_XModelItem=function(){};
XModelItemFactory.createItemType("_COS_MAILQUOTA_","cos_mailquota",Cos_MailQuota_XModelItem,Cos_Number_XModelItem);
Cos_MailQuota_XModelItem.prototype.getterScope=_MODELITEM_;
Cos_MailQuota_XModelItem.prototype.setterScope=_MODELITEM_;
Cos_MailQuota_XModelItem.prototype.getter="getValue";
Cos_MailQuota_XModelItem.prototype.setter="setLocalValue";
Cos_MailQuota_XModelItem.prototype.maxInclusive=8796093022207;
Cos_MailQuota_XModelItem.prototype.minInclusive=0;
Cos_MailQuota_XModelItem.prototype.getValue=function(b,e,c){var d=this.getLocalValue(b,e,c);
if(d==null){d=this.getSuperValue(b,e,c)
}if(typeof d=="number"&&d==0){d="0"
}return d
};
Cos_MailQuota_XModelItem.prototype.getSuperValue=function(ins){if(!ins){return null
}var _ref=this.ref.replace("/",".");
var value=null;
if((eval("ins._defaultValues."+_ref)!=null)&&(eval("ins._defaultValues."+_ref)!="")){value=(eval("ins._defaultValues."+_ref)/1048576);
if(value!=Math.round(value)){value=Number(value).toFixed(2)
}}return value
};
Cos_MailQuota_XModelItem.prototype.getLocalValue=function(ins,refPath){if(!ins){return null
}var _ref=this.ref.replace("/",".");
var value=null;
if(eval("ins."+_ref)!=null&&eval("ins."+_ref)!=""){value=(eval("ins."+_ref)/1048576);
if(value!=Math.round(value)){value=Number(value).toFixed(2)
}}return value||eval("ins."+_ref)
};
Cos_MailQuota_XModelItem.prototype.setLocalValue=function(d,b,e,c){if(d!=null&&d!=""){d=Math.round(d*1048576)
}this.setValueAt(b,d,c)
};
Cos_MLifetime_XModelItem=function(){};
XModelItemFactory.createItemType("_COS_MLIFETIME_","cos_mlifetime",Cos_MLifetime_XModelItem,Cos_String_XModelItem);
Cos_MLifetime_XModelItem.prototype.validateType=function(c){var d="0";
var b="d";
if(c==this.zeroValue){d="0"
}else{if(c!=null&&c.length>0){var b=(c.toLowerCase()).charAt(c.length-1);
b=(b=="d"||b=="h"||b=="m"||b=="s")?b:"s";
d=parseInt(c)
}}d=[XModelItem.prototype.validateNumber.call(this,d),b].join("");
return d
};
Cos_MInterval_XModelItem=function(){};
XModelItemFactory.createItemType("_COS_MINTERVAL_","cos_minterval",Cos_MInterval_XModelItem,Cos_MLifetime_XModelItem);
Cos_MInterval_XModelItem.prototype.zeroValue=ZaMsg.never.toLowerCase();
Cos_HostNameOrIp_XModelItem=function(){};
XModelItemFactory.createItemType("_COS_HOSTNAME_OR_IP_","cos_hostname_or_ip",Cos_HostNameOrIp_XModelItem,Cos_String_XModelItem);
Cos_HostNameOrIp_XModelItem.prototype.validateType=XModelItem.prototype.validateString;
Cos_HostNameOrIp_XModelItem.prototype.maxLength=256;
Cos_HostNameOrIp_XModelItem.prototype.pattern=[AjxUtil.HOST_NAME_RE,AjxUtil.IPv4_ADDRESS_RE,AjxUtil.HOST_NAME_WITH_PORT_RE];
Cos_Port_XModelItem=function(){};
XModelItemFactory.createItemType("_COS_PORT_","cos_port",Cos_Port_XModelItem,Cos_Number_XModelItem);
Cos_Port_XModelItem.prototype.validateType=XModelItem.prototype.validateNumber;
Cos_Port_XModelItem.prototype.minInclusive=0;
Cos_Port_XModelItem.prototype.maxInclusive=65535;
Cos_Subnet_XModelItem=function(){};
XModelItemFactory.createItemType("_COS_SUBNET_","cos_subnet",Cos_Subnet_XModelItem,Cos_String_XModelItem);
Cos_Subnet_XModelItem.prototype.validateType=XModelItem.prototype.validateString;
Cos_Subnet_XModelItem.prototype.maxLength=256;
Cos_Subnet_XModelItem.prototype.pattern=[AjxUtil.IPv4_ADDRESS_RE,AjxUtil.SUBNET_RE];
Super_XFormItem=function(){};
XFormItemFactory.createItemType("_SUPER_FIELD_","cos_field",Super_XFormItem,Composite_XFormItem);
Super_XFormItem.prototype.bmolsnr=true;
Super_XFormItem.prototype.visibilityChecks=[ZaItem.hasReadPermission];
Super_XFormItem.prototype.enableDisableChecks=[ZaItem.hasWritePermission];
Super_XFormItem.checkIfOverWriten=function(){if(!ZaItem.hasWritePermission.call(this)){return false
}if(this.getModelItem()&&this.getModelItem().getLocalValue(this.getInstance(),this.refPath)==null){return false
}else{if(this.getModelItem()&&(this.getModelItem().getLocalValue(this.getInstance(),this.refPath) instanceof AjxVector)&&(this.getModelItem().getLocalValue(this.getInstance(),this.refPath).size==0)){return false
}else{return true
}}};
Super_XFormItem.updateCss=function(d){var c=this.getContainer();
if(this.getParentItem().getInheritedProperty("useParentTable")){d=d-4
}for(var b=0;
b<d;
b++){c=c.parentNode
}if(Super_XFormItem.checkIfOverWriten.call(this)){if(c.className!=null&&c.className!="ZaOverride"){this._originalClassName=c.className
}else{this._originalClassName="xform_field_container"
}c.className="ZaOverride"
}else{if(this._originalClassName!=null){c.className=this._originalClassName
}else{c.className="xform_field_container"
}}};
Super_AnchorHelper_XFormItem=function(){};
XFormItemFactory.createItemType("_SUPER_ANCHOR_HELPER_","super_anchor_helper",Super_AnchorHelper_XFormItem,Dwt_Button_XFormItem);
Super_AnchorHelper_XFormItem.prototype.containerCssClass="xform_container xform_override_btn_contaier";
Super_AnchorHelper_XFormItem.prototype.constructWidget=function(){var g=this.widget=new DwtButton(this.getForm(),this.getCssClass());
var b=this.getHeight();
var f=this.getWidth();
var e=null;
if(f!=null||b!=null){e=g.getHtmlElement();
if(f!=null){e.style.width=f
}if(b!=null){e.style.height=b
}}var d=this.getLabel();
if(!d){d=this.getParentItem().getInheritedProperty("resetToSuperLabel")
}g.setText(d);
var c=new AjxListener(this,Super_AnchorHelper_XFormItem.prototype.resetToSuperValue);
g.addSelectionListener(c);
return g
};
Super_AnchorHelper_XFormItem.prototype.resetToSuperValue=function(b){this.getForm().itemChanged(this.getParentItem(),null,b)
};
Super_AnchorHelper_XFormItem.prototype.isBlockElement=true;
Super_Textfield_XFormItem=function(){};
XFormItemFactory.createItemType("_SUPER_TEXTFIELD_","super_textfield",Super_Textfield_XFormItem,Super_XFormItem);
Super_Textfield_XFormItem.prototype.useParentTable=false;
Super_Textfield_XFormItem.prototype.txtBoxLabel=null;
Super_Textfield_XFormItem.prototype.numCols=3;
Super_Textfield_XFormItem.prototype.colSizes=["275px","275px","150px"];
Super_Textfield_XFormItem.prototype.colSpan=3;
Super_Textfield_XFormItem.prototype.nowrap=false;
Super_Textfield_XFormItem.prototype.labelWrap=true;
Super_Textfield_XFormItem.prototype.colSizes=["275px","225px","150px"];
Super_Textfield_XFormItem.prototype.labelCssStyle="border-right: 1px solid black;";
Super_Textfield_XFormItem.prototype.tableCssClass="grid_composite_table";
SuperWiz_Textfield_XFormItem=function(){};
XFormItemFactory.createItemType("_SUPERWIZ_TEXTFIELD_","superwiz_textfield",SuperWiz_Textfield_XFormItem,Super_Textfield_XFormItem);
SuperWiz_Textfield_XFormItem.prototype.colSizes=["200px","250px","150px"];
SuperWiz_Textfield_XFormItem.prototype.visibilityChecks=[ZaItem.hasWritePermission];
SuperWiz_Textfield_XFormItem.prototype.enableDisableChecks=[ZaItem.hasWritePermission];
SuperWiz_Textfield_XFormItem.prototype.labelCssStyle="";
Super_Textfield_XFormItem.prototype.initializeItems=function(){var l=this.getInheritedProperty("txtBoxLabel");
var k=this.getInheritedProperty("labelCssStyle");
var m=this.getInheritedProperty("labelCssClass");
var e=this.getInheritedProperty("textFieldCssClass");
var c=this.getInheritedProperty("textFieldCssStyle");
var j=this.getInheritedProperty("textFieldWidth");
var d=this.getInheritedProperty("toolTipContent");
var f=this.getInheritedProperty("getDisplayValue");
var g={type:_TEXTFIELD_,ref:".",align:_LEFT_,elementChanged:function(p,o,n){this.getForm().itemChanged(this,p,n)
},onChange:Composite_XFormItem.onFieldChange,toolTipContent:d,updateElement:function(n){Super_XFormItem.updateCss.call(this,5);
Textfield_XFormItem.prototype.updateElement.call(this,n)
},label:l,labelCssStyle:k,labelCssClass:m,labelLocation:(l?_LEFT_:_NONE_),cssClass:e,cssStyle:c,width:j,forceUpdate:true,nowrap:this.getInheritedProperty("nowrap"),labelWrap:this.getInheritedProperty("labelWrap")};
if(f){g.getDisplayValue=f
}var h=this.getInheritedProperty("anchorCssStyle");
var b={type:_SUPER_ANCHOR_HELPER_,ref:".",visibilityChecks:[Super_XFormItem.checkIfOverWriten],visibilityChangeEventSources:[this.getRefPath()],onChange:Composite_XFormItem.onFieldChange,cssStyle:(h?h:"width:150px")};
this.items=[g,b];
Composite_XFormItem.prototype.initializeItems.call(this)
};
Super_Textfield_XFormItem.prototype.items=[];
Super_Textarea_XFormItem=function(){};
XFormItemFactory.createItemType("_SUPER_TEXTAREA_","super_textarea",Super_Textarea_XFormItem,Super_XFormItem);
Super_Textarea_XFormItem.prototype.useParentTable=false;
Super_Textarea_XFormItem.prototype.txtBoxLabel=null;
Super_Textarea_XFormItem.prototype.numCols=3;
Super_Textarea_XFormItem.prototype.colSizes=["275px","275px","150px"];
Super_Textarea_XFormItem.prototype.colSpan=3;
Super_Textarea_XFormItem.prototype.nowrap=false;
Super_Textarea_XFormItem.prototype.labelWrap=true;
Super_Textarea_XFormItem.prototype.colSizes=["275px","225px","150px"];
Super_Textarea_XFormItem.prototype.tableCssClass="grid_composite_table";
SuperWiz_Textarea_XFormItem=function(){};
XFormItemFactory.createItemType("_SUPERWIZ_TEXTAREA_","superwiz_textarea",SuperWiz_Textarea_XFormItem,Super_Textarea_XFormItem);
SuperWiz_Textarea_XFormItem.prototype.colSizes=["200px","250px","150px"];
SuperWiz_Textarea_XFormItem.prototype.visibilityChecks=[ZaItem.hasWritePermission];
SuperWiz_Textarea_XFormItem.prototype.enableDisableChecks=[ZaItem.hasWritePermission];
Super_Textarea_XFormItem.prototype.initializeItems=function(){var l=this.getInheritedProperty("txtBoxLabel");
var g=this.getInheritedProperty("txtBoxLabelCssStyle");
var k=this.getInheritedProperty("textAreaCssClass");
var h=this.getInheritedProperty("textAreaCssStyle");
var e=this.getInheritedProperty("textAreaWidth");
var c=this.getInheritedProperty("toolTipContent");
var j=this.getInheritedProperty("labelCssStyle");
var m=this.getInheritedProperty("labelCssClass");
var d={type:_TEXTAREA_,ref:".",align:_LEFT_,elementChanged:function(p,o,n){this.getForm().itemChanged(this,p,n)
},onChange:Composite_XFormItem.onFieldChange,toolTipContent:c,updateElement:function(n){Super_XFormItem.updateCss.call(this,5);
Textarea_XFormItem.prototype.updateElement.call(this,n)
},label:l,labelLocation:(l?_LEFT_:_NONE_),labelCssStyle:j,labelCssClass:m,cssClass:k,cssStyle:h,width:e,forceUpdate:true,nowrap:this.getInheritedProperty("nowrap"),labelWrap:this.getInheritedProperty("labelWrap")};
var f=this.getInheritedProperty("anchorCssStyle");
var b={type:_SUPER_ANCHOR_HELPER_,ref:".",visibilityChecks:[Super_XFormItem.checkIfOverWriten],visibilityChangeEventSources:[this.getRefPath()],onChange:Composite_XFormItem.onFieldChange,cssStyle:(f?f:"width:150px")};
this.items=[d,b];
Composite_XFormItem.prototype.initializeItems.call(this)
};
Super_Textarea_XFormItem.prototype.items=[];
Super_Checkbox_XFormItem=function(){};
XFormItemFactory.createItemType("_SUPER_CHECKBOX_","super_checkbox",Super_Checkbox_XFormItem,Super_XFormItem);
SuperWiz_Checkbox_XFormItem=function(){};
XFormItemFactory.createItemType("_SUPER_WIZ_CHECKBOX_","super_wiz_checkbox",SuperWiz_Checkbox_XFormItem,Super_Checkbox_XFormItem);
SuperWiz_Checkbox_XFormItem.prototype.colSizes=["200px","300px","150px"];
SuperWiz_Checkbox_XFormItem.prototype.visibilityChecks=[ZaItem.hasWritePermission];
SuperWiz_Checkbox_XFormItem.prototype.enableDisableChecks=[ZaItem.hasWritePermission];
SuperWiz_Checkbox_XFormItem.prototype.labelCssStyle="";
SuperWiz_Checkbox_XFormItem.prototype.labelCssClass="";
SuperWiz_Checkbox_XFormItem.prototype.checkBoxLabelLocation=_RIGHT_;
SuperWiz_Checkbox_XFormItem.prototype.checkboxSubLabel="";
SuperWiz_Checkbox_XFormItem.prototype.checkboxAlign=_RIGHT_;
Super_Checkbox_XFormItem.prototype.useParentTable=false;
Super_Checkbox_XFormItem.prototype.numCols=3;
Super_Checkbox_XFormItem.prototype.colSizes=["275px","275px","*"];
Super_Checkbox_XFormItem.prototype.nowrap=false;
Super_Checkbox_XFormItem.prototype.labelWrap=true;
Super_Checkbox_XFormItem.prototype.checkboxSubLabel=null;
Super_Checkbox_XFormItem.prototype.labelCssStyle="border-right: 1px solid black;";
Super_Checkbox_XFormItem.prototype.labelCssClass="gridGroupBodyLabel";
Super_Checkbox_XFormItem.prototype.tableCssClass="grid_composite_table";
Super_Checkbox_XFormItem.prototype.colSizes=["275px","225px","*"];
Super_Checkbox_XFormItem.prototype.initializeItems=function(){var h=this.getInheritedProperty("anchorCssStyle");
var e=this.getInheritedProperty("checkboxSubLabel");
var l=this.getInheritedProperty("labelCssClass");
var j=this.getInheritedProperty("clearChildComponentChecks");
var m={type:_CHECKBOX_,ref:".",labelCssClass:l,subLabel:e,onChange:Composite_XFormItem.onFieldChange,updateElement:function(n){Super_XFormItem.updateCss.call(this,5);
Checkbox_XFormItem.prototype.updateElement.call(this,n)
},trueValue:this.getInheritedProperty("trueValue"),falseValue:this.getInheritedProperty("falseValue"),forceUpdate:true};
var g=this.getInheritedProperty("checkBoxElementChanged");
if(g){m.elementChanged=g
}var b={type:_SUPER_ANCHOR_HELPER_,ref:".",visibilityChecks:[Super_XFormItem.checkIfOverWriten],visibilityChangeEventSources:[this.getRefPath()],onChange:Composite_XFormItem.onFieldChange,cssStyle:"width:150px"};
var f=this.getInheritedProperty("customOvewriteChecks");
if(f){b.visibilityChecks=f
}if(h){b.cssStyle=h
}var d=this.getInheritedProperty("checkBoxLabel");
if(d){m.label=d;
m.labelWrap=this.getInheritedProperty("labelWrap");
m.labelCssStyle=this.getInheritedProperty("labelCssStyle");
this.numCols=3;
this.colSpan=this.getInheritedProperty("conSpan")||3
}var k=this.getInheritedProperty("checkBoxLabelLocation");
if(k){m.labelLocation=k
}var c=this.getInheritedProperty("checkboxAlign");
if(k){m.align=c
}this.items=[m,b];
Composite_XFormItem.prototype.initializeItems.call(this);
if(j){this.items.forEach(function(n){n.visibilityChecks=[];
n.enableDisableChecks=[]
})
}};
Super_Checkbox_XFormItem.prototype.items=[];
Super_HostPort_XFormItem=function(){};
XFormItemFactory.createItemType("_SUPER_HOSTPORT_","super_hostport",Super_HostPort_XFormItem,Super_XFormItem);
Super_HostPort_XFormItem.prototype.colSizes=["275px","275px","150px"];
Super_HostPort_XFormItem.prototype.useParentTable=false;
Super_HostPort_XFormItem.prototype.numCols=3;
Super_HostPort_XFormItem.prototype.colSpan=3;
Super_HostPort_XFormItem.prototype.initializeItems=function(){var e={type:_HOSTPORT_,ref:".",onChange:Composite_XFormItem.onFieldChange,onClick:"Super_HostPort_XFormItem.handleClick",onMouseout:"Super_HostPort_XFormItem.handleMouseout",updateElement:function(f){Super_XFormItem.updateCss.call(this,5);
XFormItem.prototype.updateElement.call(this,f)
}};
var c={type:_SUPER_ANCHOR_HELPER_,ref:".",visibilityChecks:[Super_XFormItem.checkIfOverWriten],visibilityChangeEventSources:[this.getRefPath()],onChange:Composite_XFormItem.onFieldChange,cssStyle:"width:150px"};
var d=this.getInheritedProperty("anchorCssStyle");
if(d){c.cssStyle=d
}var b=this.getInheritedProperty("textBoxLabel");
if(b){e.label=b
}this.items=[e,c];
Composite_XFormItem.prototype.initializeItems.call(this)
};
Super_HostPort_XFormItem.prototype.items=[];
Super_HostPort_XFormItem.handleClick=function(c,f){var d=f||this;
d=d.getParentItem();
var e=d.getInheritedProperty("onClick");
if(e!=null&&e!=""){var b=new Function("event","item","return "+e+"( event, item);");
b(c,d)
}};
Super_HostPort_XFormItem.handleMouseout=function(c,f){var d=f||this;
d=d.getParentItem();
var e=d.getInheritedProperty("onMouseout");
if(e!=null&&e!=""){var b=new Function("event","item","return "+e+"(event, item);");
b(c,d)
}};
Super_DwtChooser_XFormItem=function(){};
XFormItemFactory.createItemType("_SUPER_DWT_CHOOSER_","super_dwt_chooser",Super_DwtChooser_XFormItem,Super_XFormItem);
Super_DwtChooser_XFormItem.prototype.numCols=1;
Super_DwtChooser_XFormItem.prototype.sorted=true;
Super_DwtChooser_XFormItem.prototype.layoutStyle=DwtChooser.HORIZ_STYLE;
Super_DwtChooser_XFormItem.prototype.sourceRef=".";
Super_DwtChooser_XFormItem.prototype.widgetClass=DwtChooser;
Super_DwtChooser_XFormItem.prototype.align=_CENTER_;
Super_DwtChooser_XFormItem.prototype.initializeItems=function(){var e=this.getInheritedProperty("anchorCssStyle");
var j=this.getInheritedProperty("sorted");
var o=this.getInheritedProperty("layoutStyle");
var k=this.getInheritedProperty("sourceRef");
var b=this.getInheritedProperty("widgetClass");
var h=this.getInheritedProperty("tableWidth");
var l=this.getInheritedProperty("labelWidth");
var g=this.getInheritedProperty("splitButtons");
var d=this.getInheritedProperty("resetToSuperLabel");
var n=this.getInheritedProperty("listWidth");
var c=this.getInheritedProperty("listHeight");
var f={type:_SUPER_ANCHOR_HELPER_,ref:".",visibilityChecks:[Super_XFormItem.checkIfOverWriten],visibilityChangeEventSources:[this.getRefPath()],cssSyle:(e?e:"width:150px;"),onChange:Composite_XFormItem.onFieldChange,label:d,align:_CENTER_,containerCssStyle:"width:90%;float:center;align:center;text-align:center;"};
var m={type:_DWT_CHOOSER_,ref:".",onChange:Composite_XFormItem.onFieldChange,updateElement:function(p){Super_XFormItem.updateCss.call(this,5);
this.updateWidget(p,true,Super_DwtChooser_XFormItem.getElemValue)
},listSize:"90%",sorted:j,layoutStyle:o,sourceRef:k,widgetClass:b,tableWidth:(h?h:null),labelWidth:(l?l:null),listWidth:(n?n:null),listHeight:(c?c:null),splitButtons:(g?g:null)};
this.items=[{type:_GROUP_,align:_CENTER_,ref:".",width:"100%",numCols:3,colSizes:["*","200px","*"],items:[{type:_CELLSPACER_},f,{type:_CELLSPACER_}],onChange:this.getInheritedProperty("onChange")},m];
Composite_XFormItem.prototype.initializeItems.call(this)
};
Super_DwtChooser_XFormItem.getElemValue=function(){return this.toString()
};
Super_DwtChooser_XFormItem.prototype.items=[];
Zimlet_SelectCheck_XFormItem=function(){};
XFormItemFactory.createItemType("_ZIMLET_SELECT_CHECK_","zimlet_select_check",Zimlet_SelectCheck_XFormItem,Super_XFormItem);
Zimlet_SelectCheck_XFormItem.prototype.numCols=2;
Zimlet_SelectCheck_XFormItem.prototype.colSizes=["275px","275px"];
Zimlet_SelectCheck_XFormItem.prototype.nowrap=false;
Zimlet_SelectCheck_XFormItem.prototype.labelWrap=true;
Zimlet_SelectCheck_XFormItem.prototype.items=[];
Zimlet_SelectCheck_XFormItem.prototype.labelWidth="275px";
Zimlet_SelectCheck_XFormItem.prototype.initializeItems=function(){var f=this.getInheritedProperty("selectRef");
var c=this.getInheritedProperty("checkBoxLabel");
var g=this.getInheritedProperty("choices");
var d={type:_CHECKBOX_,ref:".",label:c,labelLocation:_RIGHT_,elementChanged:function(k,j,h){if(!k){this.getForm().itemChanged(this.getParentItem(),null,h)
}},updateElement:function(h){this.getElement().checked=h
}};
var b={type:_OSELECT_CHECK_,choices:g,colSpan:3,ref:f,width:"275px",onChange:function(k,j,h){if(this.getParentItem()&&this.getParentItem().getParentItem()&&this.getParentItem().getParentItem().getOnChangeMethod()){return this.getParentItem().getParentItem().getOnChangeMethod().call(this,k,j,h)
}else{return this.setInstanceValue(k)
}},forceUpdate:true,updateElement:function(h){OSelect_XFormItem.prototype.updateElement.call(this,h)
},cssStyle:"margin-bottom:5px;margin-top:5px;border:2px inset gray;"};
var e={type:_GROUP_,numCols:3,colSizes:["130px","15px","130px"],items:[b,{type:_DWT_BUTTON_,label:ZaMsg.SelectAll,width:"120px",onActivate:function(j){var h=this.getParentItem().items[0];
if(h){h.selectAll(j)
}}},{type:_CELLSPACER_,width:"15px"},{type:_DWT_BUTTON_,label:ZaMsg.DeselectAll,width:"120px",onActivate:function(j){var h=this.getParentItem().items[0];
if(h){h.deselectAll(j)
}}}]};
this.items=[d,{type:_CELLSPACER_,width:this.labelWidth},e];
Composite_XFormItem.prototype.initializeItems.call(this)
};
SuperSelect_Check_XFormItem=function(){};
XFormItemFactory.createItemType("_SUPER_SELECT_CHECK_","super_select_check",SuperSelect_Check_XFormItem,Super_XFormItem);
SuperSelect_Check_XFormItem.prototype.numCols=2;
SuperSelect_Check_XFormItem.prototype.colSizes=["275px","275px"];
SuperSelect_Check_XFormItem.prototype.nowrap=false;
SuperSelect_Check_XFormItem.prototype.labelWrap=true;
SuperSelect_Check_XFormItem.prototype.items=[];
SuperSelect_Check_XFormItem.prototype.labelWidth="275px";
SuperSelect_Check_XFormItem.prototype.initializeItems=function(){var g=this.getInheritedProperty("selectRef");
var d=this.getInheritedProperty("limitLabel");
var h=this.getInheritedProperty("choices");
var e={type:_RADIO_,groupname:this.id+"zimlet_select_check_grp"+g,ref:".",label:ZaMsg.NAD_UseCosSettings,labelLocation:_RIGHT_,elementChanged:function(l,k,j){if(l==true){this.getForm().itemChanged(this.getParentItem(),null,j)
}},updateElement:function(){this.getElement().checked=!this.getModelItem().getLocalValue(this.getInstance(),this.refPath)
}};
var c={type:_RADIO_,groupname:this.id+"zimlet_select_check_grp"+g,ref:".",label:d,labelLocation:_RIGHT_,updateElement:function(){this.getElement().checked=this.getModelItem().getLocalValue(this.getInstance(),this.refPath)
},elementChanged:function(p,o,n){var j=this.getModelItem().getSuperValue(this.getInstance());
var k=[];
if(j){var m=j.length;
for(var l=0;
l<m;
l++){k.push(j[l])
}}this.getForm().itemChanged(this.getParentItem(),k,n)
}};
var b={type:_OSELECT_CHECK_,choices:h,colSpan:3,ref:g,width:"275px",onChange:function(l,k,j){if(this.getParentItem()&&this.getParentItem().getParentItem()&&this.getParentItem().getParentItem().getOnChangeMethod()){return this.getParentItem().getParentItem().getOnChangeMethod().call(this,l,k,j)
}else{return this.setInstanceValue(l)
}},forceUpdate:true,updateElement:function(l){if(!(l instanceof Array)){l=[l]
}var k=l.length;
for(var j=k-1;
j>=0;
j--){if(l[j]==ZaZimlet.NULL_ZIMLET){l.splice(j,1);
break
}}OSelect_XFormItem.prototype.updateElement.call(this,l)
},cssStyle:"margin-bottom:5px;margin-top:5px;border:2px inset gray;"};
var f={type:_GROUP_,numCols:3,colSizes:["130px","15px","130px"],items:[b,{type:_DWT_BUTTON_,label:ZaMsg.SelectAll,width:"120px",onActivate:function(k){var j=this.getParentItem().items[0];
if(j){j.selectAll(k)
}}},{type:_CELLSPACER_,width:"15px"},{type:_DWT_BUTTON_,label:ZaMsg.DeselectAll,width:"120px",onActivate:function(k){var j=this.getParentItem().items[0];
if(j){j.deselectAll(k)
}}}]};
this.items=[e,c,{type:_CELLSPACER_,width:this.labelWidth},f];
Composite_XFormItem.prototype.initializeItems.call(this)
};
SuperWiz_Select_XFormItem=function(){};
XFormItemFactory.createItemType("_SUPER_WIZ_SELECT_CHECK_","super_wiz_select_check",SuperWiz_Select_XFormItem,SuperSelect_Check_XFormItem);
SuperWiz_Select_XFormItem.prototype.numCols=2;
SuperWiz_Select_XFormItem.prototype.colSizes=["200px","275px"];
SuperWiz_Select_XFormItem.prototype.labelWidth="200px";
SuperZimlet_Select_XFormItem=function(){};
XFormItemFactory.createItemType("_SUPER_ZIMLET_SELECT_","super_zimlet_select",SuperZimlet_Select_XFormItem,Super_XFormItem);
SuperZimlet_Select_XFormItem.prototype.numCols=2;
SuperZimlet_Select_XFormItem.prototype.colSizes=["275px","*"];
SuperZimlet_Select_XFormItem.prototype.nowrap=false;
SuperZimlet_Select_XFormItem.prototype.labelWrap=true;
SuperZimlet_Select_XFormItem.prototype.items=[];
SuperZimlet_Select_XFormItem.prototype.labelWidth="275px";
SuperZimlet_Select_XFormItem.prototype.colSizes=["100px","*"];
SuperZimlet_Select_XFormItem.prototype.labelWidth="100px";
SuperZimlet_Select_XFormItem.prototype.initializeItems=function(){var g=this.getInheritedProperty("selectRef");
var d=this.getInheritedProperty("limitLabel");
var h=this.getInheritedProperty("choices");
var e={type:_RADIO_,groupname:this.id+"zimlet_select_check_grp"+g,ref:".",label:ZaMsg.NAD_UseCosSettings,labelLocation:_RIGHT_,elementChanged:function(l,k,j){if(l==true){this.getForm().itemChanged(this.getParentItem(),null,j)
}},updateElement:function(){this.getElement().checked=!this.getModelItem().getLocalValue(this.getInstance(),this.refPath)
}};
var c={type:_RADIO_,groupname:this.id+"zimlet_select_check_grp"+g,ref:".",label:d,labelLocation:_RIGHT_,updateElement:function(){this.getElement().checked=this.getModelItem().getLocalValue(this.getInstance(),this.refPath)
},elementChanged:function(p,o,n){var j=this.getModelItem().getSuperValue(this.getInstance());
var k=[];
if(j){var m=j.length;
for(var l=0;
l<m;
l++){k.push(j[l])
}}this.getForm().itemChanged(this.getParentItem(),k,n)
}};
var b={type:_ZA_ZIMLET_SELECT_,choices:h,colSpan:4,ref:g,label:"",labelLocation:_NONE_,width:"500px",cssStyle:"margin-bottom:5px;margin-top:5px;border:2px inset gray;"};
var f={type:_GROUP_,numCols:4,colSizes:["130px","15px","130px"],items:[b,{type:_DWT_BUTTON_,label:ZaMsg.SelectAll,width:"120px",onActivate:function(k){var j=this.getParentItem().items[0];
if(j){j.selectAll(k)
}}},{type:_CELLSPACER_,width:"5px"},{type:_DWT_BUTTON_,label:ZaMsg.DeselectAll,width:"120px",onActivate:function(k){var j=this.getParentItem().items[0];
if(j){j.deselectAll(k)
}}},{type:_CELLSPACER_,width:"235px"}]};
this.items=[e,c,{type:_CELLSPACER_,width:this.labelWidth},f];
Composite_XFormItem.prototype.initializeItems.call(this)
};
SuperWiz_Zimlet_Select_XFormItem=function(){};
XFormItemFactory.createItemType("_SUPER_WIZ_ZIMLET_SELECT_","super_wiz_zimlet_select",SuperWiz_Zimlet_Select_XFormItem,SuperZimlet_Select_XFormItem);
SuperWiz_Zimlet_Select_XFormItem.prototype.numCols=2;
SuperWiz_Zimlet_Select_XFormItem.prototype.colSizes=["50px","*"];
SuperWiz_Zimlet_Select_XFormItem.prototype.labelWidth="50px";
Super_Select1_XFormItem=function(){};
XFormItemFactory.createItemType("_SUPER_SELECT1_","super_select1",Super_Select1_XFormItem,Super_XFormItem);
Super_Select1_XFormItem.prototype.labelCssClass="xform_label_left";
Super_Select1_XFormItem.prototype.labelCssStyle="width:269px";
Super_Select1_XFormItem.prototype.colSizes=["275px","150px"];
Super_Select1_XFormItem.prototype.nowrap=false;
Super_Select1_XFormItem.prototype.labelWrap=true;
Super_Select1_XFormItem.prototype.trueValue="TRUE";
Super_Select1_XFormItem.prototype.falseValue="FALSE";
Super_Select1_XFormItem.prototype.colSizes=["225px","150px"];
Super_Select1_XFormItem.prototype.initializeItems=function(){var f={type:_OSELECT1_,ref:".",onChange:Composite_XFormItem.onFieldChange,forceUpdate:true,updateElement:function(j){Super_XFormItem.updateCss.call(this,5);
OSelect1_XFormItem.prototype.updateElement.call(this,j)
}};
var c={type:_SUPER_ANCHOR_HELPER_,ref:".",visibilityChecks:[Super_XFormItem.checkIfOverWriten],visibilityChangeEventSources:[this.getRefPath()],onChange:Composite_XFormItem.onFieldChange};
var g=this.getInheritedProperty("anchorCssStyle");
if(g){c.cssStyle=g
}else{c.cssStyle="width:150px"
}var h=this.getInheritedProperty("choices");
if(h){f.choices=h
}var e=this.getInheritedProperty("editable");
if(e){f.editable=e
}var d=this.getInheritedProperty("inputSize");
if(d){f.inputSize=d
}var b=this.getInheritedProperty("valueWidth");
if(b){f.width=b
}this.items=[f,c];
Composite_XFormItem.prototype.initializeItems.call(this)
};
Super_Select1_XFormItem.prototype.useParentTable=false;
Super_Select1_XFormItem.prototype.numCols=2;
Super_Select1_XFormItem.prototype.items=[];
SuperWiz_Select1_XFormItem=function(){};
XFormItemFactory.createItemType("_SUPERWIZ_SELECT1_","superwiz_select1",SuperWiz_Select1_XFormItem,Super_Select1_XFormItem);
SuperWiz_Select1_XFormItem.prototype.labelCssClass="xform_label_left ZaWizLabel";
SuperWiz_Select1_XFormItem.prototype.labelCssStyle="width:194px";
SuperWiz_Select1_XFormItem.prototype.colSizes=["250px","*"];
SuperWiz_Select1_XFormItem.prototype.valueWidth="auto";
SuperWiz_Select1_XFormItem.prototype.nowrap=false;
SuperWiz_Select1_XFormItem.prototype.labelWrap=true;
SuperWiz_Select1_XFormItem.prototype.visibilityChecks=[ZaItem.hasWritePermission];
SuperWiz_Select1_XFormItem.prototype.enableDisableChecks=[ZaItem.hasWritePermission];
Super_Dwt_ColorPicker_XFormItem=function(){};
XFormItemFactory.createItemType("_SUPER_DWT_COLORPICKER_","super_dwt_colorpicker",Super_Dwt_ColorPicker_XFormItem,Super_XFormItem);
Super_Dwt_ColorPicker_XFormItem.prototype.labelCssClass="xform_label_left";
Super_Dwt_ColorPicker_XFormItem.prototype.labelCssStyle="width:275px";
Super_Dwt_ColorPicker_XFormItem.prototype.colSizes=["275px","150px"];
Super_Dwt_ColorPicker_XFormItem.prototype.nowrap=false;
Super_Dwt_ColorPicker_XFormItem.prototype.labelWrap=true;
Super_Dwt_ColorPicker_XFormItem.prototype.useParentTable=false;
Super_Dwt_ColorPicker_XFormItem.prototype.numCols=2;
Super_Dwt_ColorPicker_XFormItem.prototype.colSizes=["225px","150px"];
Super_Dwt_ColorPicker_XFormItem.prototype.initializeItems=function(){var b=this.getInheritedProperty("buttonImage");
var c=this.getInheritedProperty("width");
this.items=[{type:_DWT_COLORPICKER_,ref:".",onChange:Composite_XFormItem.onFieldChange,forceUpdate:true,buttonImage:b,width:c,elementChanged:function(g,f,e){this.getForm().itemChanged(this,g,e)
},updateElement:function(e){Super_XFormItem.updateCss.call(this,5);
Dwt_ColorPicker_XFormItem.prototype.updateWidget.call(this,e)
}},{type:_SUPER_ANCHOR_HELPER_,ref:".",visibilityChecks:[Super_XFormItem.checkIfOverWriten],visibilityChangeEventSources:[this.getRefPath()],onChange:Composite_XFormItem.onFieldChange}];
var d=this.getInheritedProperty("anchorCssStyle");
if(d){this.getItems()[1].cssStyle=d
}else{this.getItems()[1].cssStyle="width:150px"
}Composite_XFormItem.prototype.initializeItems.call(this)
};
SuperWiz_Dwt_ColorPicker_XFormItem=function(){};
XFormItemFactory.createItemType("_SUPERWIZ_DWT_COLORPICKER_","superwiz_dwt_colorpicker",SuperWiz_Dwt_ColorPicker_XFormItem,Super_Dwt_ColorPicker_XFormItem);
SuperWiz_Dwt_ColorPicker_XFormItem.prototype.labelCssClass="xform_label_left ZaWizLabel";
SuperWiz_Dwt_ColorPicker_XFormItem.prototype.labelCssStyle="width:200px";
SuperWiz_Dwt_ColorPicker_XFormItem.prototype.colSizes=["250px","150px"];
SuperWiz_Dwt_ColorPicker_XFormItem.prototype.nowrap=false;
SuperWiz_Dwt_ColorPicker_XFormItem.prototype.labelWrap=true;
Super_Lifetime_XFormItem=function(){};
XFormItemFactory.createItemType("_SUPER_LIFETIME_","super_lifetime",Super_Lifetime_XFormItem,Super_XFormItem);
Super_Lifetime_XFormItem.prototype.nowrap=false;
Super_Lifetime_XFormItem.prototype.labelWrap=true;
Super_Lifetime_XFormItem.prototype.numCols=4;
Super_Lifetime_XFormItem.prototype.colSpan=4;
Super_Lifetime_XFormItem.prototype.colSizes=["275px","70px","205px","*"];
Super_Lifetime_XFormItem.prototype.useParenttable=false;
Super_Lifetime_XFormItem.prototype.visibilityChecks=[ZaItem.hasReadPermission];
Super_Lifetime_XFormItem.prototype.enableDisableChecks=[ZaItem.hasWritePermission];
Super_Lifetime_XFormItem.prototype.colSizes=["275px","70px","155px","*"];
Super_Lifetime_XFormItem.prototype.labelCssStyle="border-right: 1px solid black;";
Super_Lifetime_XFormItem.prototype.tableCssClass="grid_composite_table";
Super_Lifetime_XFormItem.prototype.initializeItems=function(){var d=this.getInheritedProperty("txtBoxLabel");
var c=this.getInheritedProperty("labelCssClass");
var e=this.getInheritedProperty("toolTipContent");
var h={type:_TEXTFIELD_,ref:".",label:d,toolTipContent:e,nowrap:this.getInheritedProperty("nowrap"),labelWrap:this.getInheritedProperty("labelWrap"),labelCssStyle:this.getLabelCssStyle(),labelCssClass:c,labelLocation:(d?_LEFT_:_NONE_),cssClass:"admin_xform_number_input",getDisplayValue:function(j){var k="";
if(j!=null&&j.length>0){if(j.length>1){k=parseInt(j)
}else{if(j=="0"){k="0"
}else{k=""
}}}this.getParentItem()._numericPart=k;
return((typeof j==="undefined"||k=="0")?this.getModelItem().zeroValue:k)
},elementChanged:function(l,k,j){if(l==this.getModelItem().zeroValue){l=0
}var m=l;
if(AjxUtil.isNumeric(l)){m=l+this.getParentItem()._stringPart
}this.getForm().itemChanged(this,m,j)
},onChange:Composite_XFormItem.onFieldChange,updateElement:function(j){Super_XFormItem.updateCss.call(this,5);
Textfield_XFormItem.prototype.updateElement.call(this,j)
}};
var f={type:_OSELECT1_,ref:".",choices:ZaModel.getTimeChoices(),getDisplayValue:function(k){var l="d";
if(k!=null&&k.length>0){if(k.length>1){var j=(k.toLowerCase()).charAt(k.length-1);
l=(j=="d"||j=="h"||j=="m"||j=="s")?j:"s"
}else{if(k=="0"){l="d"
}else{l="s"
}}}this.getParentItem()._stringPart=l;
return l
},elementChanged:function(m,k,j){var l=this.getParentItem()._numericPart+m;
this.getForm().itemChanged(this.getParentItem(),l,j)
},updateElement:function(j){Super_XFormItem.updateCss.call(this,5);
OSelect1_XFormItem.prototype.updateElement.call(this,j)
},label:null,labelLocation:_NONE_,forceUpdate:true};
var g=this.getInheritedProperty("anchorCssStyle");
var b={type:_SUPER_ANCHOR_HELPER_,ref:".",visibilityChecks:[Super_XFormItem.checkIfOverWriten],visibilityChangeEventSources:[this.getRefPath()],onChange:Composite_XFormItem.onFieldChange,cssStyle:(g?g:"width:150px")};
this.items=[h,f,b];
Composite_XFormItem.prototype.initializeItems.call(this)
};
Super_Lifetime_XFormItem.prototype.items=[];
SuperWiz_Lifetime_XFormItem=function(){};
XFormItemFactory.createItemType("_SUPERWIZ_LIFETIME_","superwiz_lifetime",SuperWiz_Lifetime_XFormItem,Super_Lifetime_XFormItem);
SuperWiz_Lifetime_XFormItem.prototype.colSizes=["200px","80px","120px","150px"];
SuperWiz_Lifetime_XFormItem.prototype.visibilityChecks=[ZaItem.hasWritePermission];
SuperWiz_Lifetime_XFormItem.prototype.enableDisableChecks=[ZaItem.hasWritePermission];
SuperWiz_Lifetime_XFormItem.prototype.labelCssStyle="";
Super_Lifetime1_XFormItem=function(){};
XFormItemFactory.createItemType("_SUPER_LIFETIME1_","super_lifetime1",Super_Lifetime1_XFormItem,Super_XFormItem);
Super_Lifetime1_XFormItem.prototype.nowrap=false;
Super_Lifetime1_XFormItem.prototype.labelWrap=true;
Super_Lifetime1_XFormItem.prototype.numCols=4;
Super_Lifetime1_XFormItem.prototype.colSpan=4;
Super_Lifetime1_XFormItem.prototype.colSizes=["275px","65px'","210px","*"];
Super_Lifetime1_XFormItem.prototype.useParenttable=false;
Super_Lifetime1_XFormItem.prototype.visibilityChecks=[ZaItem.hasReadPermission];
Super_Lifetime1_XFormItem.prototype.enableDisableChecks=[ZaItem.hasWritePermission];
Super_Lifetime1_XFormItem.prototype.colSizes=["275px","65px'","160px","*"];
SuperWiz_Lifetime1_XFormItem=function(){};
SuperWiz_Lifetime1_XFormItem.prototype.visibilityChecks=[ZaItem.hasReadPermission];
SuperWiz_Lifetime1_XFormItem.prototype.enableDisableChecks=[ZaItem.hasWritePermission];
XFormItemFactory.createItemType("_SUPERWIZ_LIFETIME1_","superwiz_lifetime1",SuperWiz_Lifetime1_XFormItem,Super_Lifetime1_XFormItem);
SuperWiz_Lifetime1_XFormItem.prototype.colSizes=["200px","80px","120px","150px"];
Super_Lifetime1_XFormItem.prototype.initializeItems=function(){var c=this.getInheritedProperty("txtBoxLabel");
var h=this.getInheritedProperty("labelCssStyle");
var d=this.getInheritedProperty("toolTipContent");
var g={type:_TEXTFIELD_,ref:".",label:c,toolTipContent:d,nowrap:this.getInheritedProperty("nowrap"),labelWrap:this.getInheritedProperty("labelWrap"),labelCssStyle:h||this.getLabelCssStyle(),labelLocation:(c?_LEFT_:_NONE_),cssClass:"admin_xform_number_input",getDisplayValue:function(j){var k="1";
if(j!=null&&j.length>0){if(j.length>1){k=j.substr(0,j.length-1)
}else{if(j=="0"){k="0"
}else{k="1"
}}}this.getParentItem()._numericPart=k;
return k
},elementChanged:function(l,k,j){var m=l+this.getParentItem()._stringPart;
this.getForm().itemChanged(this,m,j)
},onChange:Composite_XFormItem.onFieldChange,updateElement:function(j){Super_XFormItem.updateCss.call(this,5);
Textfield_XFormItem.prototype.updateElement.call(this,j)
}};
var e={type:_OSELECT1_,ref:".",choices:ZaModel.getTimeChoices1(),getDisplayValue:function(j){var k="d";
if(j!=null&&j.length>0){if(j.length>1){k=j.substr(j.length-1,1)
}else{if(j!="0"){k=(j=="d"||j=="h"||j=="m"||j=="s")?j:"d"
}}}this.getParentItem()._stringPart=k;
return k
},elementChanged:function(m,k,j){var l=this.getParentItem()._numericPart+m;
this.getForm().itemChanged(this.getParentItem(),l,j)
},updateElement:function(j){Super_XFormItem.updateCss.call(this,5);
OSelect1_XFormItem.prototype.updateElement.call(this,j)
},label:null,labelLocation:_NONE_,forceUpdate:true};
var f=this.getInheritedProperty("anchorCssStyle");
var b={type:_SUPER_ANCHOR_HELPER_,ref:".",visibilityChecks:[Super_XFormItem.checkIfOverWriten],visibilityChangeEventSources:[this.getRefPath()],onChange:Composite_XFormItem.onFieldChange,cssStyle:(f?f:"width:150px")};
this.items=[g,e,b];
Composite_XFormItem.prototype.initializeItems.call(this)
};
Super_Lifetime1_XFormItem.prototype.items=[];
Super_Lifetime2_XFormItem=function(){};
XFormItemFactory.createItemType("_SUPER_LIFETIME2_","super_lifetime2",Super_Lifetime2_XFormItem,Super_Lifetime1_XFormItem);
Super_Lifetime2_XFormItem.prototype.nowrap=false;
Super_Lifetime2_XFormItem.prototype.labelWrap=true;
Super_Lifetime2_XFormItem.prototype.numCols=4;
Super_Lifetime2_XFormItem.prototype.colSpan=4;
Super_Lifetime2_XFormItem.prototype.colSizes=["275px","65px'","210px","*"];
Super_Lifetime2_XFormItem.prototype.useParenttable=false;
Super_Lifetime2_XFormItem.prototype._stringPart="d";
Super_Lifetime2_XFormItem.prototype.visibilityChecks=[ZaItem.hasReadPermission];
Super_Lifetime2_XFormItem.prototype.enableDisableChecks=[ZaItem.hasWritePermission];
Super_Lifetime2_XFormItem.prototype.colSizes=["275px","65px'","160px","*"];
SuperWiz_Lifetime2_XFormItem=function(){};
XFormItemFactory.createItemType("_SUPERWIZ_LIFETIME2_","superwiz_lifetime2",SuperWiz_Lifetime2_XFormItem,Super_Lifetime2_XFormItem);
SuperWiz_Lifetime2_XFormItem.prototype.colSizes=["200px","80px","120px","150px"];
SuperWiz_Lifetime2_XFormItem.prototype.visibilityChecks=[ZaItem.hasWritePermission];
SuperWiz_Lifetime2_XFormItem.prototype.enableDisableChecks=[ZaItem.hasWritePermission];
Super_Lifetime2_XFormItem.prototype.initializeItems=function(){var d=this.getInheritedProperty("txtBoxLabel");
var c=this.getInheritedProperty("labelCssClass");
var e=this.getInheritedProperty("toolTipContent");
var h={type:_TEXTFIELD_,ref:".",label:d,toolTipContent:e,nowrap:this.getInheritedProperty("nowrap"),labelWrap:this.getInheritedProperty("labelWrap"),labelCssStyle:this.getLabelCssStyle(),labelCssClass:c,labelLocation:(d?_LEFT_:_NONE_),cssClass:"admin_xform_number_input",getDisplayValue:function(j){var k="1";
if(j!=null&&j.length>0){if(j.length>1){k=j.substr(0,j.length-1)
}else{if(j=="0"){k="0"
}else{k="1"
}}}this.getParentItem()._numericPart=k;
this.getParentItem()._stringPart="d";
return k
},elementChanged:function(l,k,j){var m=l+"d";
this.getForm().itemChanged(this,m,j)
},onChange:Composite_XFormItem.onFieldChange,updateElement:function(j){Super_XFormItem.updateCss.call(this,5);
Textfield_XFormItem.prototype.updateElement.call(this,j)
}};
var f={type:_OUTPUT_,ref:null,label:null,labelLocation:_NONE_,value:"d",getDisplayValue:function(j){return AjxMsg.days
}};
var g=this.getInheritedProperty("anchorCssStyle");
var b={type:_SUPER_ANCHOR_HELPER_,ref:".",visibilityChecks:[Super_XFormItem.checkIfOverWriten],visibilityChangeEventSources:[this.getRefPath()],onChange:Composite_XFormItem.onFieldChange,cssStyle:(g?g:"width:150px")};
this.items=[h,f,b];
Composite_XFormItem.prototype.initializeItems.call(this)
};
Super_Lifetime2_XFormItem.prototype.items=[];
Super_LifetimeMinutes_XFormItem=function(){};
XFormItemFactory.createItemType("_SUPER_LIFETIME_MINUTES_","super_lifetime_minutes",Super_LifetimeMinutes_XFormItem,Super_Lifetime1_XFormItem);
Super_LifetimeMinutes_XFormItem.prototype.nowrap=false;
Super_LifetimeMinutes_XFormItem.prototype.labelWrap=true;
Super_LifetimeMinutes_XFormItem.prototype.numCols=4;
Super_LifetimeMinutes_XFormItem.prototype.colSpan=4;
Super_LifetimeMinutes_XFormItem.prototype.colSizes=["275px","80px","120px","150px"];
Super_LifetimeMinutes_XFormItem.prototype.useParenttable=false;
Super_LifetimeMinutes_XFormItem.prototype._stringPart="d";
Super_LifetimeMinutes_XFormItem.prototype.visibilityChecks=[ZaItem.hasReadPermission];
Super_LifetimeMinutes_XFormItem.prototype.enableDisableChecks=[ZaItem.hasWritePermission];
SuperWiz_LifetimeMinutes_XFormItem=function(){};
XFormItemFactory.createItemType("_SUPERWIZ_LIFETIME_MINUTES_","superwiz_lifetime2",SuperWiz_LifetimeMinutes_XFormItem,Super_LifetimeMinutes_XFormItem);
SuperWiz_LifetimeMinutes_XFormItem.prototype.colSizes=["200px","80px","120px","150px"];
SuperWiz_LifetimeMinutes_XFormItem.prototype.visibilityChecks=[ZaItem.hasWritePermission];
SuperWiz_LifetimeMinutes_XFormItem.prototype.enableDisableChecks=[ZaItem.hasWritePermission];
Super_LifetimeMinutes_XFormItem.prototype.initializeItems=function(){var d=this.getInheritedProperty("txtBoxLabel");
var c=this.getInheritedProperty("labelCssClass");
var e=this.getInheritedProperty("toolTipContent");
var h={type:_TEXTFIELD_,ref:".",label:d,toolTipContent:e,nowrap:this.getInheritedProperty("nowrap"),labelWrap:this.getInheritedProperty("labelWrap"),labelCssStyle:this.getLabelCssStyle(),labelCssClass:c,labelLocation:(d?_LEFT_:_NONE_),cssClass:"admin_xform_number_input",getDisplayValue:function(j){var k="1";
if(j!=null&&j.length>0){if(j.length>1){k=j.substr(0,j.length-1)
}else{if(j=="0"){k="0"
}else{k="1"
}}}this.getParentItem()._numericPart=k;
this.getParentItem()._stringPart="m";
return k
},elementChanged:function(l,k,j){var m=l+"m";
this.getForm().itemChanged(this,m,j)
},onChange:Composite_XFormItem.onFieldChange,updateElement:function(j){Super_XFormItem.updateCss.call(this,5);
Textfield_XFormItem.prototype.updateElement.call(this,j)
}};
var f={type:_OUTPUT_,ref:null,label:null,labelLocation:_NONE_,value:"m",getDisplayValue:function(j){return AjxMsg.minutes
}};
var g=this.getInheritedProperty("anchorCssStyle");
var b={type:_SUPER_ANCHOR_HELPER_,ref:".",visibilityChecks:[Super_XFormItem.checkIfOverWriten],visibilityChangeEventSources:[this.getRefPath()],onChange:Composite_XFormItem.onFieldChange,cssStyle:(g?g:"width:150px")};
this.items=[h,f,b];
Composite_XFormItem.prototype.initializeItems.call(this)
};
Super_LifetimeMinutes_XFormItem.prototype.items=[];
TopGrouper_XFormItem.prototype.colSizes=["275px","275px"];
TopGrouper_XFormItem.prototype.numCols=2;
ZACheckbox_XFormItem=function(){};
XFormItemFactory.createItemType("_ZA_CHECKBOX_","za_checkbox",ZACheckbox_XFormItem,Checkbox_XFormItem);
ZATopGrouper_XFormItem=function(){};
XFormItemFactory.createItemType("_ZA_TOP_GROUPER_","za_top_grouper",ZATopGrouper_XFormItem,TopGrouper_XFormItem);
ZATopGrouper_XFormItem.prototype.numCols=2;
ZATopGrouper_XFormItem.prototype.colSizes=["275px","auto"];
ZATopGrouper_XFormItem.isGroupVisible=function(g,d,f){if(ZaZimbraAdmin.currentAdminAccount.attrs[ZaAccount.A_zimbraIsAdminAccount]=="TRUE"){return true
}if(!f){f=this.getInstance()
}if(!f){return false
}if(!f.getAttrs){return false
}if(!g&&!d){return true
}if(g){var c=g.length;
for(var b=0;
b<c;
b++){if(ZaItem.hasReadPermission(g[b],f)){return true
}}}if(d){var e=d.length;
for(var b=0;
b<e;
b++){if(ZaItem.hasRight(d[b],f)){return true
}}}return false
};
ZAPlainGrouper_XFormItem=function(){};
XFormItemFactory.createItemType("_ZA_PLAIN_GROUPER_","za_plain_grouper",ZAPlainGrouper_XFormItem,Group_XFormItem);
ZAPlainGrouper_XFormItem.prototype.colSizes=["100%"];
ZAPlainGrouper_XFormItem.prototype.numCols=1;
ZAPlainGrouper_XFormItem.prototype.width="100%";
ZAPlainGrouper_XFormItem.prototype.gridLabelCss="gridGroupBodyLabel";
ZAPlainGrouper_XFormItem.prototype.initializeItems=function(){var e=this.getInheritedProperty("gridLabelCss");
var d=this.getItems();
var c;
if(d.length==1&&d[0].type=="group"){d[0].border=1;
if(d[0].colSizes.length>1){d[0].colSizes[d[0].colSizes.length-1]="100%"
}c=d[0].items
}else{c=d
}for(var b=0;
b<c.length;
b++){if(c[b].label||c[b].txtBoxLabel){c[b].labelCssClass=e
}}Group_XFormItem.prototype.initializeItems.call(this)
};
ZAWizTopGrouper_XFormItem=function(){};
XFormItemFactory.createItemType("_ZAWIZ_TOP_GROUPER_","zawiz_top_grouper",ZAWizTopGrouper_XFormItem,BaseTopGrouper_XFormItem);
ZAWizTopGrouper_XFormItem.prototype.numCols=2;
ZAWizTopGrouper_XFormItem.prototype.colSizes=["200px","auto"];
ZAWizTopGrouper_XFormItem.isGroupVisible=function(g,f,d){if(!g){return true
}if(!f&&!d){return true
}if(f){var c=f.length;
for(var b=0;
b<c;
b++){if(ZaItem.hasWritePermission(f[b],g)){return true
}}}if(d){var e=d.length;
for(var b=0;
b<e;
b++){if(ZaItem.hasRight(d[b],g)){return true
}}}return false
};
ZAGroup_XFormItem=function(){};
XFormItemFactory.createItemType("_ZAGROUP_","zagroup",ZAGroup_XFormItem,Group_XFormItem);
ZAGroup_XFormItem.prototype.numCols=2;
ZAGroup_XFormItem.prototype.colSizes=["275px","275px"];
ZAGroup_XFormItem.prototype.border=1;
ZAGroup_XFormItem.prototype.width="100%";
ZAGroup_XFormItem.prototype.cssStyle="margin-top:20px;margin-bottom:0px;padding-bottom:0px;";
ZAGroup_XFormItem.isGroupVisible=function(g,f,d){if(!g){g=this.getInstance()
}if(!g){return true
}if(!f&&!d){return true
}if(f){var c=f.length;
for(var b=0;
b<c;
b++){if(ZaItem.hasReadPermission(f[b],g)||ZaItem.hasWritePermission(f[b],g)){return true
}}}if(d){var e=d.length;
for(var b=0;
b<e;
b++){if(ZaItem.hasRight(d[b],g)){return true
}}}return false
};
ZAGroup_XFormItem.prototype.initializeItems=function(){var d=this.getInheritedProperty("gridLabelCss")||"gridGroupBodyLabel";
var c=this.getItems();
if(c){for(var b=0;
b<c.length;
b++){if(c[b].type=="radio"){continue
}if(c[b].label||c[b].txtBoxLabel){c[b].labelCssClass=d
}}}Group_XFormItem.prototype.initializeItems.call(this)
};
ZAWizGroup_XFormItem=function(){};
XFormItemFactory.createItemType("_ZAWIZGROUP_","zawizgroup",ZAWizGroup_XFormItem,Group_XFormItem);
ZAWizGroup_XFormItem.prototype.numCols=2;
ZAWizGroup_XFormItem.prototype.colSizes=["125px","450px"];
ZAWizGroup_XFormItem.prototype.cssStyle="margin-top:20px;margin-bottom:0px;padding-bottom:0px;";
ZARightGrouper_XFormItem=function(){};
XFormItemFactory.createItemType("_ZARIGHT_GROUPER_","zaright_grouper",ZARightGrouper_XFormItem,Grouper_XFormItem);
ZARightGrouper_XFormItem.prototype.borderCssClass="RightGrouperBorder";
ZALeftGrouper_XFormItem=function(){};
XFormItemFactory.createItemType("_ZALEFT_GROUPER_","zaleft_grouper",ZALeftGrouper_XFormItem,Grouper_XFormItem);
ZALeftGrouper_XFormItem.prototype.borderCssClass="LeftGrouperBorder";
ZACenterGrouper_XFormItem=function(){};
XFormItemFactory.createItemType("_ZACENTER_GROUPER_","zacenter_grouper",ZACenterGrouper_XFormItem,Grouper_XFormItem);
ZACenterGrouper_XFormItem.prototype.borderCssClass="CenterGrouperBorder";
ZAAllScreenGrouper_XFormItem=function(){};
XFormItemFactory.createItemType("_ZAALLSCREEN_GROUPER_","zaallscreen_grouper",ZAAllScreenGrouper_XFormItem,Grouper_XFormItem);
ZAAllScreenGrouper_XFormItem.prototype.borderCssClass="AllScreenGrouperBorder";
ZASmallCenterGrouper_XFormItem=function(){};
XFormItemFactory.createItemType("_ZASMALL_CENTER_GROUPER_","zasmall_center_grouper",ZASmallCenterGrouper_XFormItem,Grouper_XFormItem);
ZASmallCenterGrouper_XFormItem.prototype.borderCssClass="CenterGrouperBorder";
ZASmallCenterGrouper_XFormItem.prototype.labelCssClass="SmallRadioGrouperLabel";
ZATabCase_XFormItem=function(){Case_XFormItem.call(this)
};
XFormItemFactory.createItemType("_ZATABCASE_","zatabcase",ZATabCase_XFormItem,Case_XFormItem);
ZATabCase_XFormItem.prototype.caseVarRef=ZaModel.currentTab;
ZATabCase_XFormItem.prototype.visibilityChangeEventSources=[ZaModel.currentTab];
ZATabCase_XFormItem.prototype.align=_LEFT_;
ZATabCase_XFormItem.prototype.valign=_TOP_;
ZATabCase_XFormItem.prototype.paddingStyle="padding-left:15px;";
ZATabCase_XFormItem.prototype.width="98%";
ZATabCase_XFormItem.prototype.getTabLevel=function(){return this.getInheritedProperty("tabLevel")||1
};
ZATabCase_XFormItem.prototype.getHeaderLevel=function(){return this.getInheritedProperty("headerLevel")||1
};
ZATabCase_XFormItem.prototype.getHMargin=function(){return this.getInheritedProperty("hMargin")||0
};
ZATabCase_XFormItem.prototype.getCustomPaddingStyle=function(){return this.getInheritedProperty("paddingStyle")
};
ZATabCase_XFormItem.prototype.getCustomHeight=function(){try{var c=this.getForm();
var k=this.getTabLevel();
var n=this.getHeaderLevel();
var b=this.getForm().parent.getHtmlElement();
var h=parseInt(b.style.height);
if(isNaN(h)){h=b.clientHeight?b.clientHeight:b.offsetHeight
}var f=c.getItemsById("xform_header");
var e=0;
if(f){var d=f[0];
if(d){if(d.getContainer()){d=d.getContainer()
}else{d=d.getElement()
}e=d.clientHeight?d.clientHeight:d.offsetHeight
}}var l=c.getItemsById("xform_tabbar");
var j=0;
if(l){var m=l[0];
if(m){if(m.getContainer()){m=m.getContainer()
}else{m=m.getElement()
}j=m.clientHeight?m.clientHeight:m.offsetHeight
}}var p=e*n;
var o=j*k;
if(h<=0||h<(p+o+2)){return"100%"
}else{return h-p-o-2
}}catch(g){}return"100%"
};
ZATabCase_XFormItem.prototype.getCustomWidth=function(){try{var f=this.getForm();
var g=this.getForm().parent.getHtmlElement();
var c=parseInt(g.style.width);
if(isNaN(c)){c=g.clientWidth?g.clientWidth:g.offsetWidth
}if(c<=0){return"100%"
}else{var e=c-this.getHMargin();
if(this.cacheInheritedMethod("getCustomPaddingStyle","$getCustomPaddingStyle")){var b=this.cacheInheritedMethod("getCustomPaddingStyle","$getCustomPaddingStyle").call(this);
if(b&&!AjxEnv.isIE){e=e-15
}}return e
}}catch(d){}return"100%"
};
ZATabCase_XFormItem.prototype.resizeHdlr=function(){try{var d=this.getElement();
var b=this.cacheInheritedMethod("getCustomHeight","$getCustomHeight").call(this);
var e=this.cacheInheritedMethod("getCustomWidth","$getCustomWidth").call(this);
Dwt.setSize(d,e,b)
}catch(c){alert(c)
}};
SuperTabCase_XFormItem=function(){};
XFormItemFactory.createItemType("_SUPER_TABCASE_","super_tabcase",SuperTabCase_XFormItem,ZATabCase_XFormItem);
SuperTabCase_XFormItem.prototype.loadDataMethods=[];
SuperTabCase_XFormItem.prototype.show=function(b){var e=this.getInheritedProperty("loadDataMethods");
if(e&&e instanceof Array){var d=e.length;
for(var c=0;
c<d;
c++){if(e[c]==null){continue
}if(typeof(e[c])=="function"){e[c].call(this)
}else{if(e[c] instanceof Array){var f=e[c].shift();
if(!f||!f.apply){continue
}f.apply(this,e[c]);
e[c].unshift(f)
}}}}Case_XFormItem.prototype.show.call(this,b)
};
SuperRepeat_XFormItem=function(){};
XFormItemFactory.createItemType("_SUPER_REPEAT_","super_repeat",SuperRepeat_XFormItem,Super_XFormItem);
SuperRepeat_XFormItem.prototype.numCols=2;
SuperRepeat_XFormItem.prototype.colSizes=["275px","275px"];
SuperRepeat_XFormItem.prototype.nowrap=false;
SuperRepeat_XFormItem.prototype.labelWrap=true;
SuperRepeat_XFormItem.prototype.items=[];
SuperRepeat_XFormItem.prototype.labelWidth="275px";
SuperRepeat_XFormItem.prototype.initializeItems=function(){var d=this.getInheritedProperty("repeatItems");
var c={type:_REPEAT_,items:d,ref:".",label:null,labelLocation:_NONE_,repeatInstance:this.getRepeatInstance(),showAddButton:this.getShowAddButton(),showRemoveButton:this.getShowRemoveButton(),addButtonLabel:this.getInheritedProperty("addButtonLabel"),removeButtonLabel:this.getInheritedProperty("removeButtonLabel"),removeButtonCSSStyle:this.getInheritedProperty("removeButtonCSSStyle"),addButtonWidth:this.getInheritedProperty("addButtonWidth"),removeButtonWidth:this.getInheritedProperty("removeButtonWidth"),showAddOnNextRow:AjxUtil.isEmpty(this.getInheritedProperty("showAddOnNextRow"))?true:this.getInheritedProperty("showAddOnNextRow"),alwaysShowAddButton:false,updateElement:function(f){Super_XFormItem.updateCss.call(this,5);
Repeat_XFormItem.prototype.updateElement.call(this,f)
},bmolsnr:true};
var e=this.getInheritedProperty("anchorCssStyle");
var b={type:_SUPER_ANCHOR_HELPER_,ref:".",visibilityChecks:[Super_XFormItem.checkIfOverWriten],visibilityChangeEventSources:[this.getRefPath()],onChange:Composite_XFormItem.onFieldChange,cssStyle:(e?e:"width:150px")};
this.items=[c,b];
Composite_XFormItem.prototype.initializeItems.call(this)
};
Super_DynSelect_XFormItem=function(){};
XFormItemFactory.createItemType("_SUPER_DYNSELECT_","super_dynselect",Super_DynSelect_XFormItem,Super_XFormItem);
Super_DynSelect_XFormItem.prototype.labelCssClass="xform_label_left";
Super_DynSelect_XFormItem.prototype.labelCssStyle="width:275px";
Super_DynSelect_XFormItem.prototype.colSizes=["275px","150px"];
Super_DynSelect_XFormItem.prototype.nowrap=false;
Super_DynSelect_XFormItem.prototype.labelWrap=true;
Super_DynSelect_XFormItem.prototype.trueValue="TRUE";
Super_DynSelect_XFormItem.prototype.falseValue="FALSE";
Super_DynSelect_XFormItem.prototype.initializeItems=function(){var e={type:_DYNSELECT_,ref:".",onChange:Composite_XFormItem.onFieldChange,forceUpdate:true,errorLocation:_PARENT_,updateElement:function(j){Super_XFormItem.updateCss.call(this,5);
DynSelect_XFormItem.prototype.updateElement.call(this,j)
}};
var b={type:_SUPER_ANCHOR_HELPER_,ref:".",visibilityChecks:[Super_XFormItem.checkIfOverWriten],visibilityChangeEventSources:[this.getRefPath()],onChange:Composite_XFormItem.onFieldChange};
var f=this.getInheritedProperty("anchorCssStyle");
if(f){b.cssStyle=f
}else{b.cssStyle="width:150px"
}var h=this.getInheritedProperty("choices");
if(h){e.choices=h
}var d=this.getInheritedProperty("slctToolTipContent");
if(d){e.toolTipContent=d
}var g=this.getInheritedProperty("dataFetcherClass");
if(g){e.dataFetcherClass=g
}var c=this.getInheritedProperty("dataFetcherMethod");
if(c){e.dataFetcherMethod=c
}this.items=[e,b];
Composite_XFormItem.prototype.initializeItems.call(this)
};
Super_DynSelect_XFormItem.prototype.useParentTable=false;
Super_DynSelect_XFormItem.prototype.numCols=2;
Super_DynSelect_XFormItem.prototype.items=[];
SuperWiz_DynSelect_XFormItem=function(){};
XFormItemFactory.createItemType("_SUPERWIZ_DYNSELECT_","superwiz_dynselect",SuperWiz_DynSelect_XFormItem,Super_DynSelect_XFormItem);
SuperWiz_DynSelect_XFormItem.prototype.labelCssClass="xform_label_left ZaWizLabel";
SuperWiz_DynSelect_XFormItem.prototype.labelCssStyle="width:200px";
SuperWiz_DynSelect_XFormItem.prototype.colSizes=["250px","150px"];
SuperWiz_DynSelect_XFormItem.prototype.nowrap=false;
SuperWiz_DynSelect_XFormItem.prototype.labelWrap=true;
SuperWiz_DynSelect_XFormItem.prototype.visibilityChecks=[ZaItem.hasWritePermission];
SuperWiz_DynSelect_XFormItem.prototype.enableDisableChecks=[ZaItem.hasWritePermission];
Categorized_DynSelect_XFormItem=function(){};
XFormItemFactory.createItemType("_CATEGORIZED_DYNSELECT_","categorized_dynselect",Categorized_DynSelect_XFormItem,DynSelect_XFormItem);
Categorized_DynSelect_XFormItem.prototype.itemCSS="ZaCategorizedSearchItem "+DynSelect_XFormItem.prototype.cssClass;
Categorized_DynSelect_XFormItem.TYPE_LABEL="label";
Categorized_DynSelect_XFormItem.TYPE_SEARCH="search";
Categorized_DynSelect_XFormItem.prototype.changeChoicesCallback=function(d,b,c){DynSelect_XFormItem.prototype.changeChoicesCallback.call(this,this._enrichChoices(d),b,c)
};
Categorized_DynSelect_XFormItem.prototype.getChoicesHTML=function(){var e=this.choices.getChoiceObject();
if(!e){return""
}var c=new AjxBuffer();
this.outputChoicesHTMLStart(c);
var d=this.getChoiceCssClass();
for(var b=0;
b<e.length;
b++){c.append("",this.getChoiceHTML(b,d))
}this.outputChoicesHTMLEnd(c);
return c.toString()
};
Categorized_DynSelect_XFormItem.prototype.getChoiceHTML=function(g,b){var f=this.choices.getChoiceObject()[g];
if(f.type==Categorized_DynSelect_XFormItem.TYPE_LABEL){return this._getLabelHTML(f.name)
}var d="onSearchClick";
var c=f.name;
if(f.type!=Categorized_DynSelect_XFormItem.TYPE_SEARCH){d="onChoiceClick";
if(f.attrs.displayName){c=f.attrs.displayName+" "+c
}}var e=this.getFormGlobalRef()+".getItemById('"+this.getId()+"')";
return AjxBuffer.concat('<tr><td><div id="',this.getId(),"_choice_",g,'" ','class="',b,'"',' onmouseover="',e,".onChoiceOver(",g,', event||window.event)"',' onmouseout="',e,".onChoiceOut(",g,', event||window.event)"',' onclick="',e,".",d,"(",g,')"'," itemnum = '",g,"'",">",this._tailorLabel(c),"</div></td></tr>")
};
Categorized_DynSelect_XFormItem.prototype.onChoiceClick=function(b,d){var c=this.choices.getChoiceObject()[b];
if(!c){return
}if(c.type==ZaItem.ACCOUNT||c.type==ZaItem.DL||c.type==ZaItem.RESOURCE||c.type==ZaItem.ALIAS){ZaApp.getInstance().getAccountListController()._editItem(c);
this.hideMenu();
return
}if(c.type==ZaItem.DOMAIN){ZaApp.getInstance().getDomainListController()._editItem(c);
this.hideMenu();
return
}if(c.type==ZaItem.COS){ZaApp.getInstance().getCosListController()._editItem(c);
this.hideMenu();
return
}};
Categorized_DynSelect_XFormItem.prototype.onSearchClick=function(f,b){var d=this.choices.getChoiceObject()[f];
if(d.target||d.target==""){var c=ZaApp.getInstance().getSearchListController();
var e=c._searchField;
e.searchSelectedType=d.target;
e.restoreSearchFilter();
ZaSearchField.srchButtonHndlr.call(this,d.target);
return
}};
Categorized_DynSelect_XFormItem.prototype.getChoiceCssClass=function(){return this.itemCSS+"_choice"
};
Categorized_DynSelect_XFormItem.prototype.getChoiceSelectedCssClass=function(){return this.itemCSS+"_choice_selected"
};
Categorized_DynSelect_XFormItem.prototype.processEntryKey=function(){if(this.isSelecting||this.menuUp){if(this.__currentHiliteItem>0){var c=this.choices.getChoiceObject()[this.__currentHiliteItem];
if(c.type==Categorized_DynSelect_XFormItem.TYPE_SEARCH){this.onSearchClick(this.__currentHiliteItem);
return
}else{if(c.type!=Categorized_DynSelect_XFormItem.TYPE_LABEL){this.onChoiceClick(this.__currentHiliteItem);
this._searchFieldValue("");
return
}}}}var d=this.getInstanceValue();
var b=this.getInheritedProperty("entryKeyMethod");
if(b instanceof AjxCallback){b.run(this,d)
}};
Categorized_DynSelect_XFormItem.prototype.hiliteNextChoice=function(){do{DynSelect_XFormItem.prototype.hiliteNextChoice.call(this);
var b=this.choices.getChoiceObject()[this.__currentHiliteItem]
}while(b.type==Categorized_DynSelect_XFormItem.TYPE_LABEL)
};
Categorized_DynSelect_XFormItem.prototype.hilitePreviousChoice=function(){do{DynSelect_XFormItem.prototype.hilitePreviousChoice.call(this);
var b=this.choices.getChoiceObject()[this.__currentHiliteItem]
}while(b.type==Categorized_DynSelect_XFormItem.TYPE_LABEL)
};
Categorized_DynSelect_XFormItem.prototype._enrichChoices=function(e){if(e.length<=0){return e
}var d={};
for(var c=0;
c<e.length;
c++){d[e[c].type]=1;
e[c].value=""
}var h=this._searchFieldValue();
var b='"'+h+'"';
e.splice(0,0,{type:Categorized_DynSelect_XFormItem.TYPE_LABEL,name:ZaMsg.SearchBestMatches,value:h});
e.push({type:Categorized_DynSelect_XFormItem.TYPE_LABEL,name:"&nbsp;",value:h});
e.push({type:Categorized_DynSelect_XFormItem.TYPE_LABEL,name:ZaMsg.SearchFullResultsFor,value:h});
e.push({type:Categorized_DynSelect_XFormItem.TYPE_SEARCH,name:b,value:h,target:""});
for(var g in d){if(d.hasOwnProperty(g)){var f=ZaSearch.TYPES[g];
e.push({type:Categorized_DynSelect_XFormItem.TYPE_SEARCH,name:AjxMessageFormat.format(ZaMsg["SearchAll_"+f],[b]),value:h,target:f})
}}return e
};
Categorized_DynSelect_XFormItem.prototype._getLabelHTML=function(b){return AjxBuffer.concat("<tr><td><div class='ZaCategorizedSearchLabel'>",b,"</div></td></tr>")
};
Categorized_DynSelect_XFormItem.prototype._tailorLabel=function(c){var d=Dwt.getBounds(this.getContainer()).width-20;
var b=Math.floor((d-30)/5.5);
if(b<c.length){c=c.substring(0,(b-3))+"..."
}return c
};
Categorized_DynSelect_XFormItem.prototype._searchFieldValue=function(d){var b=ZaApp.getInstance().getSearchListController();
var c=b._searchField;
if(arguments.length==0){return c.getSearchFieldElement().value
}c.getSearchFieldElement().value=d
};
Ip_XModelItem=function(){};
XModelItemFactory.createItemType("_IP_","ip",Ip_XModelItem,String_XModelItem);
Ip_XModelItem.EXACT_IP_ADDRESS_RE=/^((25[0-5]|2[0-4]\d|(1\d|[1-9])?\d)\.){3}(25[0-5]|2[0-4]\d|(1\d|[1-9])\d|[1-9])$/;
Ip_XModelItem.prototype.validateType=function(b){if(b){if(!AjxUtil.isString(b)){throw this.getModel().getErrorMessage("notAString",b)
}if(Ip_XModelItem.EXACT_IP_ADDRESS_RE.test(b)){return b
}else{throw ZaMsg.ERROR_INVALID_IP_ADDR
}}};
Ip_XModelItem.prototype.maxLength=64;
Collaborated_Select_XFormItem=function(){};
XFormItemFactory.createItemType("_COLLAB_SELECT_","collaborated_select",Collaborated_Select_XFormItem,Repeat_XFormItem);
Collaborated_Select_XFormItem.prototype.initializeItems=function(){this.colSelect=this._findColSelect(this.getItems());
if(!this.colSelect){return
}this.colSelect.ancestorId=this.id;
this.colSelect.onChange=Collaborated_Select_XFormItem.selectChanged;
var c=this.colSelect.choices;
var b=new XFormChoices(c.getChoiceObject(),c._type,c._valueProperty,c._labelProperty);
this.colSelect.choices=b;
this.choiceItems=c.getChoiceObject();
this.__ownChoices=b;
this.__valueProperty=c._valueProperty;
this.__availNum=this.choiceItems.length;
this.__selected=[];
this.__excluded=[];
if(this.colSelect.required==true){this.getAddButton().visibilityChecks.push(Collaborated_Select_XFormItem.isAddButtonVisible)
}Repeat_XFormItem.prototype.initializeItems.call(this)
};
Collaborated_Select_XFormItem.prototype.getFilterMethod=function(){return this.cacheInheritedMethod("filterMethod","$filterMethod")
};
Collaborated_Select_XFormItem.prototype.updateElement=function(c){if(this.__origInstance!=this.getForm().getInstance()){this.__origInstance=this.getForm().getInstance();
if(this.getFilterMethod()&&AjxUtil.isFunction(this.getFilterMethod())){var b=this.getFilterMethod().call(this,this.getForm().getInstance());
this.filterOrigItems(b);
this.resetChoices()
}else{this.resetChoices(true)
}}Repeat_XFormItem.prototype.updateElement.call(this,c)
};
Collaborated_Select_XFormItem.prototype.resetChoices=function(b){if(!this.colSelect){return
}this.__selected=[];
if(b){this.__excluded=[];
this.__availNum=this.choiceItems.length
}this._updateChoices()
};
Collaborated_Select_XFormItem.selectChanged=function(c,f,e){var d=e.getItemById(this.__attributes.ancestorId);
var g=this.getInstanceValue();
this.setInstanceValue(c);
d._markSelected(c,g);
var b=new AjxTimedAction(d,Collaborated_Select_XFormItem.prototype._updateChoices,[]);
AjxTimedAction.scheduleAction(b,ZaController.CLICK_DELAY)
};
Collaborated_Select_XFormItem.isAddButtonVisible=function(){if(!this.getParentItem().getParentItem().colSelect){return true
}return(this.getParentItem().getInstanceCount()<this.getParentItem().getParentItem().__availNum)
};
Collaborated_Select_XFormItem.prototype.filterOrigItems=function(e){if(!this.choiceItems||!(this.choiceItems instanceof Array)||!e){return
}if(!(e instanceof Array)){e=[e]
}var c=0;
for(var b=0;
b<this.choiceItems.length;
b++){this.__excluded[b]=false;
for(var d=0;
d<e.length;
d++){if(this.choiceItems[b][this.__valueProperty]==e[d]){this.__excluded[b]=true;
c++;
break
}}}this.__availNum-=c
};
Collaborated_Select_XFormItem.prototype.addRowButtonClicked=function(b){Repeat_XFormItem.prototype.addRowButtonClicked.call(this,b);
this._updateChoices()
};
Collaborated_Select_XFormItem.prototype.removeRowButtonClicked=function(b){var c=this.getInstanceValue()[b];
var d=c[this.colSelect.ref];
this._markSelected(null,d);
this._updateChoices();
Repeat_XFormItem.prototype.removeRowButtonClicked.call(this,b)
};
Collaborated_Select_XFormItem.prototype._updateChoices=function(){this.__ownChoices.setChoices(this._getSelectable());
this.__ownChoices.dirtyChoices()
};
Collaborated_Select_XFormItem.prototype._findColSelect=function(e){if(!e){return
}if(e.type=="oselect1"){if(e.colSelect){return e
}return
}var c;
if(e.items&&e.items instanceof Array){c=e.items
}else{if(e instanceof Array){c=e
}}if(c){for(var d=0;
d<c.length;
d++){var b=this._findColSelect(c[d]);
if(b){return b
}}}};
Collaborated_Select_XFormItem.prototype._markSelected=function(c,b){for(var d=0;
d<this.choiceItems.length;
d++){if(this.choiceItems[d][this.__valueProperty]==b){this.__selected[d]=false
}}for(var d=0;
d<this.choiceItems.length;
d++){if(this.choiceItems[d][this.__valueProperty]==c){this.__selected[d]=true
}}};
Collaborated_Select_XFormItem.prototype._getSelectable=function(){var b=[];
for(var c=0;
c<this.choiceItems.length;
c++){if(this.__excluded[c]){continue
}if(this.__selected[c]){continue
}b.push(this.choiceItems[c])
}return b
}
}if(AjxPackage.define("zimbraAdmin.common.ZaSplashScreen")){ZaSplashScreen=function(d){var c="LoginScreen";
DwtComposite.call(this,{parent:d,className:c,posStyle:DwtControl.ABSOLUTE_STYLE});
this._origClassName=c;
this._xparentClassName=c+"-Transparent";
this.setBounds(0,0,"100%","100%");
var e=this.getHtmlElement();
e.style.zIndex=Dwt.Z_SPLASH;
e.className=c;
this.setVisible(false);
var f=ZLoginFactory.copyDefaultParams(ZaMsg);
f.showPanelBorder=true;
f.showForm=true;
f.showUserField=false;
f.showPasswordField=false;
f.showRememberMeCheckbox=false;
f.showLogOff=false;
f.showButton=false;
f.showLoading=true;
f.companyURL=ZaAppCtxt.getLogoURI();
f.copyrightText=ZaItem.getSplashScreenCopyright();
f.clientLevelNotice=ZabMsg.clientLevelNotice?ZabMsg.clientLevelNotice:"";
var b=ZLoginFactory.getLoginDialogHTML(f);
this.setContent(b)
};
ZaSplashScreen.prototype=new DwtComposite;
ZaSplashScreen.prototype.constructor=ZaSplashScreen;
ZaSplashScreen.prototype.toString=function(){return"ZaSplashScreen"
}
}if(AjxPackage.define("zimbraAdmin.common.ZaCurrentAppToolBar")){ZaCurrentAppToolBar=function(c,b,d){DwtToolBar.call(this,c,b,Dwt.ABSOLUTE_STYLE);
this._currentAppLabel=new ZaToolBarLabel(this,DwtLabel.IMAGE_LEFT|DwtLabel.ALIGN_LEFT,"currentAppLabel");
this._currentTitle=null;
this._lastWidth=null;
this._currentWidth=null;
this.addFiller()
};
ZaCurrentAppToolBar.prototype=new DwtToolBar;
ZaCurrentAppToolBar.prototype.constructor=ZaCurrentAppToolBar;
ZaCurrentAppToolBar.prototype.toString=function(){return"ZaCurrentAppToolBar"
};
ZaCurrentAppToolBar.prototype._resizeListener=function(){if(!this._currentTitle){return
}if(!this._currentWidth&&!this._lastWidth){this._lastWidth=this._currentWidth=this.getBounds().width;
this.setCurrentAppLabel(this._currentTitle)
}else{this._currentWidth=this.getBounds().width;
if(this._lastWidth!=this._currentWidth){this._lastWidth=this._currentWidth;
this.setCurrentAppLabel(this._currentTitle)
}}};
ZaCurrentAppToolBar.prototype.setCurrentAppLabel=function(e){this._currentTitle=e;
if(!this._currentWidth&&!this._lastWidth){this._lastWidth=this._currentWidth=this.getBounds().width
}var d=ZaCurrentAppToolBar.getWidth(e);
if(d>(this._currentWidth-10)){var c=this._currentWidth-ZaCurrentAppToolBar.getWidth("...")-10;
var b=Math.floor(c*(e.length)/d);
e=e.substring(0,(b-3))+"..."
}this._currentAppLabel.setText(e)
};
ZaCurrentAppToolBar.WIDTH={};
ZaCurrentAppToolBar._cacheSize=0;
ZaCurrentAppToolBar.MAX_CACHE_SIZE=10;
ZaCurrentAppToolBar.getWidth=function(f){if(!ZaCurrentAppToolBar._testSpan){var e=ZaCurrentAppToolBar._testSpan=document.createElement("SPAN");
e.style.position=Dwt.ABSOLUTE_STYLE;
var d=DwtShell.getShell(window).getHtmlElement();
d.appendChild(e);
Dwt.setLocation(e,Dwt.LOC_NOWHERE,Dwt.LOC_NOWHERE);
e.style.fontWeight="bold";
e.style.fontSize="13px"
}var c=ZaCurrentAppToolBar.WIDTH;
if(c[f]){return c[f]
}if(ZaCurrentAppToolBar._cacheSize>=ZaCurrentAppToolBar.MAX_CACHE_SIZE){ZaCurrentAppToolBar.WIDTH={};
ZaCurrentAppToolBar._cacheSize=0
}var e=ZaCurrentAppToolBar._testSpan;
e.innerHTML=f;
var b=c[f]=Dwt.getSize(e).x;
ZaCurrentAppToolBar._cacheSize++;
return b
}
}if(AjxPackage.define("zimbraAdmin.common.ZaCrtAppTreeHeader")){ZaCrtAppTreeHeader=function(d,c,e){var b=c||"ZaCtrAppTreeHeader";
DwtButton.call(this,d,"",b,Dwt.ABSOLUTE_STYLE);
this.preObj=null;
this._historyMgr=ZaZimbraAdmin.getInstance().getHistoryMgr();
this._historyMgr.addChangeListener(new AjxListener(this,this.updateMenu));
this.menu=new ZaPopupMenu(this);
this.menu.setWidth(150);
this.setMenu(this.menu)
};
ZaCrtAppTreeHeader.prototype=new DwtButton;
ZaCrtAppTreeHeader.prototype.constructor=ZaCrtAppTreeHeader;
ZaCrtAppTreeHeader.prototype._dropDownImg="";
ZaCrtAppTreeHeader.prototype._dropDownDepImg="";
ZaCrtAppTreeHeader.prototype._dropDownHovImg="";
ZaCrtAppTreeHeader.defaultImg="CollapseLeft";
ZaCrtAppTreeHeader.normalBgImg="ImgArrowShapeNormal";
ZaCrtAppTreeHeader.hoverBgImg="ImgArrowShapeHover";
ZaCrtAppTreeHeader.prototype.toString=function(){return"ZaCrtAppTreeHeader"
};
ZaCrtAppTreeHeader.prototype.TEMPLATE="admin.Widgets#ZaTreeHeaderButton";
ZaCrtAppTreeHeader.prototype._createHtmlFromTemplate=function(b,c){c.bgImg=ZaCrtAppTreeHeader.normalBgImg;
DwtButton.prototype._createHtmlFromTemplate.call(this,b,c);
this._tabelEl=document.getElementById(c.id+"_table");
this._arrowEl=document.getElementById(c.id+"_doubleArrow");
this._imgEl=document.getElementById(c.id+"_img")
};
ZaCrtAppTreeHeader.prototype.setRightImg=function(c){if(!this._imgEl){return
}var b=c||ZaCrtAppTreeHeader.defaultImg;
this._imgEl.innerHTML=AjxImg.getImageHtml(b)
};
ZaCrtAppTreeHeader.prototype._handleClick=function(c){if(this._isArrowEvent(c)){var b=ZaZimbraAdmin.getInstance().getOverviewPanelController().getOverviewPanel().getFolderTree();
b.setSelectionByPath(this.preObj.path,false)
}};
ZaCrtAppTreeHeader.prototype._getPreviousObject=function(f){var b=ZaZimbraAdmin.getInstance().getOverviewPanelController().getOverviewPanel().getFolderTree();
var h=b.getCurrentRootItem();
var d=h.getData("dataItem");
var f=b.getABPath(d);
var g=ZaTree.getPathItems(f);
if(g.length>1){if(g[1]==ZaMsg.OVP_search){g=[g[0]]
}else{g.pop()
}}var c=g[g.length-1];
var e=ZaTree.getPathByArray(g);
return new ZaHistory(e,c)
};
ZaCrtAppTreeHeader.prototype._showHoverImage=function(b){if(this._tabelEl){if(b){Dwt.delClass(this._tabelEl,ZaCrtAppTreeHeader.normalBgImg,ZaCrtAppTreeHeader.hoverBgImg)
}else{Dwt.delClass(this._tabelEl,ZaCrtAppTreeHeader.hoverBgImg,ZaCrtAppTreeHeader.normalBgImg)
}}};
ZaCrtAppTreeHeader.prototype._isDropDownEvent=function(f){if(this._dropDownEventsEnabled&&this._dropDownEl){var e=f.docX;
var g=Dwt.toWindow(this._dropDownEl,0,0,window).x;
var b=true;
if(e<g){b=false
}var c=true;
if(this._imgEl){var d=Dwt.toWindow(this._imgEl,0,0,window).x;
if(e>=d){c=false
}}return b&&c
}return false
};
ZaCrtAppTreeHeader.prototype._isArrowEvent=function(e){if(this._arrowEl&&this._textEl){var f=Dwt.getBounds(this._arrowEl);
var d=Dwt.getBounds(this._textEl);
var g=f.x;
var b=d.x+d.width;
var c=e.docX;
if(c<g){return false
}if(c>=b){return false
}return true
}return false
};
ZaCrtAppTreeHeader.prototype.setText=function(c){this.preObj=this._getPreviousObject();
var b=this.getDisplayContent(this.preObj.displayName);
DwtLabel.prototype.setText.call(this,b)
};
ZaCrtAppTreeHeader.prototype.getDisplayContent=function(f){var e=f;
if(f){var h=Dwt.getSize(this._textEl);
var d=AjxStringUtil.getWidth(f);
if(d>h.x){var g=f.length;
var c=h.x-AjxStringUtil.getWidth("...");
var b=Math.floor(c*g/d);
e=f.substring(0,b)+"..."
}}return e
};
ZaCrtAppTreeHeader.prototype.popup=function(e){e=e||this.getMenu();
if(!e){return
}var n=e.parent;
var j=n.getBounds();
var m=e.shell.getSize();
var b=e.getSize();
var o=n.getHtmlElement();
var d=Dwt.toWindow(o,0,0);
var c=(o.style.borderLeftWidth=="")?0:parseInt(o.style.borderLeftWidth);
var l;
var h=n._dropDownEl;
if(!h){l=d.x+c
}else{var f=Dwt.toWindow(h,0,0);
l=f.x
}l=((l+b.x)>=m.x)?m.x-b.x:l;
var k;
var g=(o.style.borderTopWidth=="")?0:parseInt(o.style.borderTopWidth);
g+=(o.style.borderBottomWidth=="")?0:parseInt(o.style.borderBottomWidth);
k=d.y+j.height+g;
e.popup(0,l,k)
};
ZaCrtAppTreeHeader.searchHistoryCache={};
ZaCrtAppTreeHeader.isFound=function(b){if(!ZaCrtAppTreeHeader.searchHistoryCache[b]){ZaCrtAppTreeHeader.searchHistoryCache[b]=true;
return false
}return true
};
ZaCrtAppTreeHeader.prototype.createMenu=function(){var f=0;
var b;
var k=new AjxListener(this,this.goToTreeItemListener);
var e=this._historyMgr.getAllHistory();
ZaCrtAppTreeHeader.searchHistoryCache={};
if(e.size()>20){var d=e.size()-1;
var g=0;
for(d=e.size()-1;
d>=0;
d--){var h=e.get(d);
if(!h.isShowInHistory){continue
}if(ZaCrtAppTreeHeader.isFound(h.path)){continue
}g++;
if(g==20){break
}}if(d>0){f=d
}}var h;
if(f>0){h=e.get(0);
b=new DwtMenuItem({parent:this.menu,style:DwtMenuItem.NO_STYLE,id:ZaId.getMenuItemId(this._contextId,f+h.path)});
b.setText(h.displayName);
b.setData("history",h);
b.addSelectionListener(k);
f=f+1
}ZaCrtAppTreeHeader.searchHistoryCache={};
var c=f;
for(f=e.size()-1;
f>=c;
f--){h=e.get(f);
if(!h.isShowInHistory){continue
}if(ZaCrtAppTreeHeader.isFound(h.path)){continue
}b=new DwtMenuItem({parent:this.menu,style:DwtMenuItem.NO_STYLE,id:ZaId.getMenuItemId(this._contextId,f+h.path)});
b.setText(h.displayName);
b.setEnabled(h.enabled);
b.setData("history",h);
b.addSelectionListener(k)
}this.menu.createSeparator();
b=new DwtMenuItem({parent:this.menu,style:DwtMenuItem.NO_STYLE,id:ZaId.getMenuItemId(this._contextId,"clearHistory")});
b.setText(ZaMsg.LBL_Treeheader_clearHistory);
b.setData("history",h);
b.addSelectionListener(new AjxListener(this,this.clearHistory))
};
ZaCrtAppTreeHeader.prototype.updateMenu=function(){this.menu.removeChildren();
this.createMenu()
};
ZaCrtAppTreeHeader.prototype.goToTreeItemListener=function(b){var c=b.item.getData("history");
c.goToView()
};
ZaCrtAppTreeHeader.prototype.clearHistory=function(b){this._historyMgr.removeHistory()
}
}if(AjxPackage.define("zimbraAdmin.common.ZaServerVersionInfo")){ZaServerVersionInfo=function(){};
ZaServerVersionInfo.load=function(){if(!ZaServerVersionInfo._loaded){var c=AjxSoapDoc.create("BatchRequest","urn:zimbra");
c.setMethodAttribute("onerror","continue");
var d=c.set("GetVersionInfoRequest",null,null,ZaZimbraAdmin.URN);
var g=new ZmCsfeCommand();
var f=new Object();
f.soapDoc=c;
f.noAuthToken=true;
var e=g.invoke(f).Body.BatchResponse;
var b=e.GetVersionInfoResponse[0];
ZaServerVersionInfo.buildDate=this._parseDateTime(b.info[0].buildDate);
ZaServerVersionInfo.host=b.info[0].host;
ZaServerVersionInfo.release=b.info[0].release;
ZaServerVersionInfo.version=b.info[0].version
}};
ZaServerVersionInfo._parseDate=function(c){var e=new Date();
e.setHours(0,0,0,0);
var g=parseInt(c.substr(0,4),10);
var f=parseInt(c.substr(4,2),10);
var b=parseInt(c.substr(6,2),10);
e.setFullYear(g);
e.setMonth(f-1);
e.setMonth(f-1);
e.setDate(b);
return e
};
ZaServerVersionInfo._parseDateTime=function(b){var f=ZaServerVersionInfo._parseDate(b);
var c=parseInt(b.substr(9,2),10);
var e=parseInt(b.substr(11,2),10);
f.setHours(c,e,0,0);
return f
}
}if(AjxPackage.define("zimbraAdmin.common.MenuButton_XFormItem")){MenuButton_XFormItem=function(){};
XFormItemFactory.createItemType("_MENU_BUTTON_","menu_button",MenuButton_XFormItem,Dwt_Button_XFormItem);
MenuButton_XFormItem.prototype.constructWidget=function(){var c=Dwt_Button_XFormItem.prototype.constructWidget.call(this);
var b=this.getNormalizedValues();
if(b&&b.length){var d=new ZaPopupMenu(c,null,null,b);
c.setMenu(d)
}return c
}
}if(AjxPackage.define("zimbraAdmin.common.ZaAutoCompleteListView")){var i=1;
ZaAutoCompleteListView=function(g){var c=g.className?g.className:"autoCompleteList";
DwtComposite.call(this,g.parent,c,DwtControl.ABSOLUTE_STYLE);
var f=null;
try{this.shell.getData(ZaAppCtxt.LABEL).getApp()
}catch(d){}var b=g.dataLoaderClass;
this._dataLoaderObject=new b();
this._dataLoaderMethod=g.dataLoaderMethod;
this._dataLoading=false;
this._data=null;
this._matchValue=g.matchValue?g.matchValue:"inputFieldCompleteValue";
this._matchText=g.matchText?g.matchText:"matchListFieldText";
this._inputFieldXFormItem=g.inputFieldXFormItem;
this._inputFieldXForm=this._inputFieldXFormItem.getForm();
this._inputFieldElement=this._inputFieldXFormItem.getElement();
this._locCallback=g.locCallback;
this._compCallback=g.compCallback;
this._separator=(g.separator!=null)?g.separator:";";
this._setMouseEventHdlrs();
this.addListener(DwtEvent.ONMOUSEDOWN,new AjxListener(this,this._mouseDownListener));
this.addListener(DwtEvent.ONMOUSEOVER,new AjxListener(this,this._mouseOverListener));
this._addSelectionListener(new AjxListener(this,this._listSelectionListener));
this._outsideListener=new AjxListener(this,this._outsideMouseDownListener);
this._acInterval=300;
this._acAction=new AjxTimedAction(null,this._autocompleteAction);
this._acActionId=-1;
if(AjxEnv.isFirefox){this._focusAction=new AjxTimedAction(null,this._focus)
}this._internalId=AjxCore.assignId(this);
this._numChars=0;
this._matches=new AjxVector();
this._done=new Object();
this.setVisible(false);
this.handle(this._inputFieldElement)
};
ZaAutoCompleteListView.prototype=new DwtComposite;
ZaAutoCompleteListView.DELIMS=[",",";","\n","\r","\t"];
ZaAutoCompleteListView.IS_DELIM=new Object();
for(var i=0;
i<ZaAutoCompleteListView.DELIMS.length;
i++){ZaAutoCompleteListView.IS_DELIM[ZaAutoCompleteListView.DELIMS[i]]=true
}ZaAutoCompleteListView.onKeyDown=function(e){var d=DwtUiEvent.getTargetWithProp(e,"id");
var c=d&&AjxCore.objectWithId(d._acListViewId);
if(c){c._inputLength=d.value.length
}var b=DwtKeyEvent.getCharCode(e);
return(b==DwtKeyEvent.KEY_TAB||b==DwtKeyEvent.KEY_ESCAPE)?ZaAutoCompleteListView.onKeyUp(e):true
};
ZaAutoCompleteListView.onKeyUp=function(g){g=DwtUiEvent.getEvent(g);
if(g.type=="keyup"){var d=DwtUiEvent.getTargetWithProp(g,"id")
}var e=AjxCore.objectWithId(d._acListViewId);
var c=d.id;
var k=DwtKeyEvent.getCharCode(g);
if(AjxEnv.isIE&&g.type=="keyup"&&(k==9||k==27)){return true
}var j=d.value;
g.inputLengthChanged=(j.length!=e._inputLength);
var l;
if(e._inputFieldXFormItem){DBG.println(AjxDebug.DBG1,"Set the inputField "+e._inputFieldXFormItem.refPath+" value: "+j);
l=e._inputFieldXFormItem.getInstanceValue();
var f=e._inputFieldXFormItem.getOnChangeMethod();
if(f!=null&&typeof(f)=="function"){f.call(e._inputFieldXFormItem,j,g,e._inputFieldXForm)
}else{e._inputFieldXFormItem.setInstanceValue(j)
}}if(e._acActionId!=-1){AjxTimedAction.cancelAction(e._acActionId);
e._acActionId=-1
}if(k==16||k==17||k==18){return true
}if(g.altKey||g.ctrlKey){return true
}if(!j){e.reset();
return true
}if(k==37||k==39){return true
}if((k==9)&&!e.size()){return true
}if(g.inputLengthChanged||(k==3||k==9||k==13)){e._numChars++
}var b=(e.getVisible()&&(e._numChars==1)&&((k==3||k==9||k==13)||(!g.shiftKey&&(k==59||k==186||k==188))));
if(b||(k==27||k==38||k==40)){e.handleAction(k,b);
if(AjxEnv.isFirefox&&k==9){e._focusAction.args=[d];
AjxTimedAction.scheduleAction(e._focusAction,0)
}DwtUiEvent.setBehaviour(g,true,false);
return false
}if(!g.inputLengthChanged&&(k!=3&&k!=13&&k!=9&&k!=8&&k!=46)){return true
}var h=new DwtKeyEvent();
DwtKeyEvent.copy(h,g);
h.aclv=e;
h.element=d;
e._acAction.obj=e;
e._acAction.args=[h];
e._acActionId=AjxTimedAction.scheduleAction(e._acAction,e._acInterval);
var m=l;
if(e._inputFieldXFormItem){m=e._inputFieldXFormItem.getInstanceValue()
}if(e._inputFieldXForm){e._inputFieldXForm.setIsDirty(true,e._inputFieldXFormItem);
e._inputFieldXForm.notifyListeners(DwtEvent.XFORMS_FORM_DIRTY_CHANGE,new DwtXFormsEvent(e._inputFieldXForm,e._inputFieldXFormItem,true));
if(m!=l){e._inputFieldXForm.notifyListeners(DwtEvent.XFORMS_VALUE_CHANGED,new DwtXFormsEvent(e._inputFieldXForm,e._inputFieldXFormItem,true))
}}return true
};
ZaAutoCompleteListView.prototype.toString=function(){return"ZaAutoCompleteListView"
};
ZaAutoCompleteListView.prototype.handle=function(b){b._acListViewId=this._internalId;
Dwt.setHandler(b,DwtEvent.ONKEYDOWN,ZaAutoCompleteListView.onKeyDown);
Dwt.setHandler(b,DwtEvent.ONKEYUP,ZaAutoCompleteListView.onKeyUp)
};
ZaAutoCompleteListView.prototype.autocomplete=function(b,d){this.reset();
this._element=b;
this._loc=d;
var c=b.value;
this._autocomplete(c)
};
ZaAutoCompleteListView.prototype.reset=function(){this._matches.removeAll();
this.show(false)
};
ZaAutoCompleteListView.prototype.handleAction=function(e,c){if(c){this._update()
}else{if(e==38||e==40){var b=this._getSelectedIndex();
var d=this.size();
if(d<=1){return
}var f;
if(e==40&&(b<d-1)){f=b+1;
this._setSelected(f)
}else{if(e==38&&(b>0)){f=b-1;
this._setSelected(f)
}}}else{if(e==27){this.reset()
}}}};
ZaAutoCompleteListView.prototype._autocompleteAction=function(e){try{var d=e.element;
var c=e.aclv;
c._acActionId=-1;
c._numChars=0;
if(this._locCallback){var f=this._locCallback.run(e);
c.autocomplete(d,f)
}}catch(b){}};
ZaAutoCompleteListView.prototype.show=function(b,c){if(b){this._popup(c)
}else{this._popdown()
}};
ZaAutoCompleteListView.prototype._nextChunk=function(d,f){while(d.charAt(f)==" "){f++
}for(var b=f;
b<d.length;
b++){var e=d.charAt(b);
if(ZaAutoCompleteListView.IS_DELIM[e]){return{text:d,str:d.substring(f,b),start:f,end:b,delim:true}
}}return{text:d,str:d.substring(f,b),start:f,end:b,delim:false}
};
ZaAutoCompleteListView.prototype._autocomplete=function(b){if(!(b&&b.length)||(this._done[b])){return
}this._removeAll();
if(!this._dataLoading){var c=new AjxCallback(this,this.dataLoadedCallback);
this._dataLoading=true;
this._dataLoaderMethod.call(this._dataLoaderObject,b,c)
}};
ZaAutoCompleteListView.prototype._complete=function(e){var c=this._getSelected();
if(!c){return
}var f=this._start;
var b=hasDelim?this._end+1:this._end;
var d=c[this._matchValue];
this._done[d]=true;
return{text:newText,start:f+d.length+this._separator.length,match:c}
};
ZaAutoCompleteListView.prototype._updateField=function(b){var c=this._element;
c.value=b[this._matchValue];
c.focus();
this.reset();
this._inputFieldXFormItem.setInstanceValue(b[this._matchValue]);
if(this._inputFieldXForm){this._inputFieldXForm.setIsDirty(true,this._inputFieldXFormItem);
this._inputFieldXForm.notifyListeners(DwtEvent.XFORMS_FORM_DIRTY_CHANGE,new DwtXFormsEvent(this._inputFieldXForm,this._inputFieldXFormItem,true));
this._inputFieldXForm.notifyListeners(DwtEvent.XFORMS_VALUE_CHANGED,new DwtXFormsEvent(this._inputFieldXForm,this._inputFieldXFormItem,true))
}if(this._compCallback){this._compCallback.run(b,this._inputFieldXFormItem)
}};
ZaAutoCompleteListView.prototype._update=function(){var b=this._getSelected();
if(!b){return
}this._updateField(b)
};
ZaAutoCompleteListView.prototype._mouseDownListener=function(b){b=DwtUiEvent.getEvent(b);
var d=DwtUiEvent.getTarget(b);
if(!d||d._pos==null){return
}if(b.button==DwtMouseEvent.LEFT){this._setSelected(d._pos);
if(this.isListenerRegistered(DwtEvent.SELECTION)){var c=DwtShell.selectionEvent;
DwtUiEvent.copy(c,b);
c.match=d._match;
c.detail=0;
this.notifyListeners(DwtEvent.SELECTION,c);
return true
}}};
ZaAutoCompleteListView.prototype._mouseOverListener=function(b){b=DwtUiEvent.getEvent(b);
var c=DwtUiEvent.getTarget(b);
if(!c||c._pos==null){return
}this._setSelected(c._pos)
};
ZaAutoCompleteListView.prototype._addSelectionListener=function(b){this._eventMgr.addListener(DwtEvent.SELECTION,b)
};
ZaAutoCompleteListView.prototype._listSelectionListener=function(b){this._update()
};
ZaAutoCompleteListView.prototype._set=function(e){var g=this.getHtmlElement();
g.innerHTML="";
var b=this._matches.size();
for(var d=0;
d<b;
d++){var c=this._matches.get(d);
if(c){var f=document.createElement("div");
f._pos=d;
f[DwtListView._STYLE_CLASS]="Row";
f[DwtListView._SELECTED_STYLE_CLASS]=f[DwtListView._STYLE_CLASS]+"-"+DwtCssStyle.SELECTED;
f[DwtListView._STYLE_CLASS]="ZaAutoCompleteListRow";
f.className=f[DwtListView._STYLE_CLASS];
f.innerHTML=AjxStringUtil.htmlEncode(c[this._matchText]);
g.appendChild(f)
}}this._selected=e||0;
this._setSelected(this._selected)
};
ZaAutoCompleteListView.prototype._popup=function(b){this.setLocation(b.x,b.y);
this.setSize(Dwt.getSize(this._inputFieldElement).x-2);
this.setVisible(true);
this.setZIndex(Dwt.Z_DIALOG_MENU);
ZaAutoCompleteListView._activeAcList=this;
DwtEventManager.addListener(DwtEvent.ONMOUSEDOWN,ZaAutoCompleteListView._outsideMouseDownListener);
this.shell._setEventHdlrs([DwtEvent.ONMOUSEDOWN]);
this.shell.addListener(DwtEvent.ONMOUSEDOWN,this._outsideListener)
};
ZaAutoCompleteListView.prototype._popdown=function(){this.setZIndex(Dwt.Z_HIDDEN);
this.setVisible(false);
ZaAutoCompleteListView._activeAcList=null;
DwtEventManager.removeListener(DwtEvent.ONMOUSEDOWN,ZaAutoCompleteListView._outsideMouseDownListener);
this.shell._setEventHdlrs([DwtEvent.ONMOUSEDOWN],true);
this.shell.removeListener(DwtEvent.ONMOUSEDOWN,this._outsideListener)
};
ZaAutoCompleteListView.prototype._setSelected=function(f){var d=this.getHtmlElement().childNodes;
if(!d){return
}var b=d.length;
for(var c=0;
c<b;
c++){var g=d[c];
var e=g.className;
if(c==f&&e!=g[DwtListView._SELECTED_STYLE_CLASS]){g.className=g[DwtListView._SELECTED_STYLE_CLASS]
}else{if(e!=g[DwtListView._STYLE_CLASS]){g.className=g[DwtListView._STYLE_CLASS]
}}}this._selected=f
};
ZaAutoCompleteListView.prototype._append=function(b){this._matches.add(b)
};
ZaAutoCompleteListView.prototype._removeAll=function(){this._matches.removeAll();
var b=this.getHtmlElement();
while(b.hasChildNodes()){b.removeChild(b.firstChild)
}};
ZaAutoCompleteListView.prototype.size=function(){return this._matches.size()
};
ZaAutoCompleteListView.prototype._getSelectedIndex=function(){return this._selected
};
ZaAutoCompleteListView.prototype._getSelected=function(){return this._matches.get(this._selected)
};
ZaAutoCompleteListView.prototype.dataLoadedCallback=function(e){if(e&&e.length>0){var b=e.length;
for(var d=0;
d<b;
d++){var c=e[d];
this._append(c)
}}else{this._dataLoading=false;
return
}this._set();
this.show(true,this._loc);
this._dataLoading=false
};
ZaAutoCompleteListView.prototype._focus=function(b){b.focus()
};
ZaAutoCompleteListView._outsideMouseDownListener=function(c){var b=ZaAutoCompleteListView._activeAcList;
if(b.getVisible()){var d=DwtControl.getTargetControl(c);
if(d!=b){b.show(false);
c._stopPropagation=false;
c._returnValue=true
}}}
}if(AjxPackage.define("zimbraAdmin.common.AutoComplete_XFormItem")){AutoCompleteList_XFormItem=function(){};
XFormItemFactory.createItemType("_AUTO_COMPLETE_LIST_","auto_complete_list",AutoCompleteList_XFormItem,WidgetAdaptor_XFormItem);
AutoCompleteList_XFormItem.prototype.widgetClass=ZaAutoCompleteListView;
AutoCompleteList_XFormItem.prototype.constructWidget=function(){var b=this.getInheritedProperty("widgetClass");
var f=new AjxCallback(this,this._getAcListLoc);
var e=new AjxCallback(this,this.getInheritedProperty("compCallback"));
var d={parent:this.getForm().shell,className:this.getCssClass(),dataLoaderClass:this.getInheritedProperty("dataLoaderClass"),dataLoaderMethod:this.getInheritedProperty("dataLoaderMethod"),matchValue:this.getInheritedProperty("matchValue"),matchText:this.getInheritedProperty("matchText"),inputFieldXFormItem:this.getForm().getItemsById(this.getInheritedProperty("inputFieldElementId"))[0],locCallback:f,compCallback:e,separator:""};
var c=new b(d);
return c
};
AutoCompleteList_XFormItem.prototype.insertWidget=function(c,d,b){return
};
AutoCompleteList_XFormItem.prototype.updateWidget=function(b){};
AutoCompleteList_XFormItem.prototype._getAcListLoc=function(d){var c=d.element;
var e=Dwt.getLocation(c);
var b=Dwt.getSize(c).y;
return(new DwtPoint(e.x,e.y+b))
}
}if(AjxPackage.define("zimbraAdmin.common.ZaKeyMap")){ZaKeyMap=function(){DwtKeyMap.call(this);
this._map.ZaGlobal={"Alt+Shift+D,0":ZaKeyMap.DBG_NONE,"Ctrl+Shift+D,0":ZaKeyMap.DBG_NONE,"Alt+Shift+D,1":ZaKeyMap.DBG_1,"Ctrl+Shift+D,1":ZaKeyMap.DBG_1,"Alt+Shift+D,2":ZaKeyMap.DBG_2,"Ctrl+Shift+D,2":ZaKeyMap.DBG_2,"Alt+Shift+D,3":ZaKeyMap.DBG_3,"Ctrl+Shift+D,3":ZaKeyMap.DBG_3,"Alt+S":ZaKeyMap.SAVE,"Ctrl+S":ZaKeyMap.SAVE,Del:ZaKeyMap.DEL,Backspace:ZaKeyMap.DEL,Esc:ZaKeyMap.CANCEL,ArrowRight:ZaKeyMap.NEXT_PAGE,ArrowLeft:ZaKeyMap.PREV_PAGE}
};
ZaKeyMap.prototype=new DwtKeyMap(true);
ZaKeyMap.prototype.constructor=ZaKeyMap;
var i=0;
ZaKeyMap.CANCEL=i++;
ZaKeyMap.DBG_NONE=i++;
ZaKeyMap.DBG_1=i++;
ZaKeyMap.DBG_2=i++;
ZaKeyMap.DBG_3=i++;
ZaKeyMap.DEL=i++;
ZaKeyMap.NEXT_CONV=i++;
ZaKeyMap.NEXT_PAGE=i++;
ZaKeyMap.PREV_CONV=i++;
ZaKeyMap.PREV_PAGE=i++;
ZaKeyMap.SAVE=i++;
delete i
}if(AjxPackage.define("zimbraAdmin.common.ACLXFormItem")){ACLXFormItem=function(){};
XFormItemFactory.createItemType("_ACL_","acl",ACLXFormItem,Composite_XFormItem);
ACLXFormItem.prototype.numCols=6;
ACLXFormItem.prototype.nowrap=true;
ACLXFormItem.prototype.visibleBoxes={r:true,w:true,a:true,i:true,d:true,x:true};
ACLXFormItem.prototype.initializeItems=function(){var b=this.getInheritedProperty("visibleBoxes");
this.items=[];
if(b.r){this.items.push({type:_CHECKBOX_,width:"40px",containerCssStyle:"width:40px",forceUpdate:true,ref:".",labelLocation:_RIGHT_,label:ZaMsg.ACL_R,subLabel:"",align:_RIGHT_,visibilityChecks:[],enableDisableChecks:[],getDisplayValue:function(c){return(c&&c.r==1)
},elementChanged:function(f,e,d){var c=Object();
if(e){c.w=e.w;
c.a=e.a;
c.i=e.i;
c.d=e.d;
c.x=e.x
}else{c={r:0,w:0,i:0,d:0,a:0,x:0}
}c.r=f?1:0;
this.getForm().itemChanged(this.getParentItem(),c,d)
}})
}if(b.w){this.items.push({type:_CHECKBOX_,width:"40px",containerCssStyle:"width:40px",forceUpdate:true,ref:".",labelLocation:_RIGHT_,label:ZaMsg.ACL_W,subLabel:"",align:_RIGHT_,visibilityChecks:[],enableDisableChecks:[],getDisplayValue:function(c){return(c&&c.w==1)
},elementChanged:function(f,e,d){var c=Object();
if(e){c.r=e.r;
c.a=e.a;
c.i=e.i;
c.d=e.d;
c.x=e.x
}else{c={r:0,w:0,i:0,d:0,a:0,x:0}
}c.w=f?1:0;
this.getForm().itemChanged(this.getParentItem(),c,d)
}})
}if(b.d){this.items.push({type:_CHECKBOX_,width:"40px",containerCssStyle:"width:40px",forceUpdate:true,ref:".",labelLocation:_RIGHT_,label:ZaMsg.ACL_D,subLabel:"",align:_RIGHT_,visibilityChecks:[],enableDisableChecks:[],getDisplayValue:function(c){return(c&&c.d==1)
},elementChanged:function(f,e,d){var c=Object();
if(e){c.w=e.w;
c.a=e.a;
c.i=e.i;
c.r=e.r;
c.x=e.x
}else{c={r:0,w:0,i:0,d:0,a:0,x:0}
}c.d=f?1:0;
this.getForm().itemChanged(this.getParentItem(),c,d)
}})
}if(b.i){this.items.push({type:_CHECKBOX_,width:"40px",containerCssStyle:"width:40px",forceUpdate:true,ref:".",labelLocation:_RIGHT_,label:ZaMsg.ACL_I,subLabel:"",align:_RIGHT_,visibilityChecks:[],enableDisableChecks:[],getDisplayValue:function(c){return(c&&c.i==1)
},elementChanged:function(f,e,d){var c=Object();
if(e){c.w=e.w;
c.a=e.a;
c.r=e.r;
c.d=e.d;
c.x=e.x
}else{c={r:0,w:0,i:0,d:0,a:0,x:0}
}c.i=f?1:0;
this.getForm().itemChanged(this.getParentItem(),c,d)
}})
}if(b.x){this.items.push({type:_CHECKBOX_,width:"40px",containerCssStyle:"width:40px",forceUpdate:true,ref:".",labelLocation:_RIGHT_,label:ZaMsg.ACL_X,subLabel:"",align:_RIGHT_,visibilityChecks:[],enableDisableChecks:[],getDisplayValue:function(c){return(c&&c.x==1)
},elementChanged:function(f,e,d){var c=Object();
if(e){c.w=e.w;
c.a=e.a;
c.i=e.i;
c.d=e.d;
c.r=e.r
}else{c={r:0,w:0,i:0,d:0,a:0,x:0}
}c.x=f?1:0;
this.getForm().itemChanged(this.getParentItem(),c,d)
}})
}if(b.a){this.items.push({type:_CHECKBOX_,width:"40px",containerCssStyle:"width:40px",forceUpdate:true,ref:".",labelLocation:_RIGHT_,label:ZaMsg.ACL_A,subLabel:"",align:_RIGHT_,visibilityChecks:[],enableDisableChecks:[],getDisplayValue:function(c){return(c&&c.a==1)
},elementChanged:function(f,e,d){var c=Object();
if(e){c.w=e.w;
c.r=e.r;
c.i=e.i;
c.d=e.d;
c.x=e.x
}else{c={r:0,w:0,i:0,d:0,a:0,x:0}
}c.a=f?1:0;
this.getForm().itemChanged(this.getParentItem(),c,d)
}})
}Composite_XFormItem.prototype.initializeItems.call(this)
};
ACLXFormItem.prototype.items=[]
}if(AjxPackage.define("zimbraAdmin.common.ZaSkinPoolChooser")){ZaSkinPoolChooser=function(b){if(arguments.length==0){return
}DwtChooser.call(this,b)
};
ZaSkinPoolChooser.prototype=new DwtChooser;
ZaSkinPoolChooser.prototype.constructor=ZaSkinPoolChooser;
ZaSkinPoolChooser.prototype._createHtml=function(){this._sourceListViewDivId=Dwt.getNextId();
this._targetListViewDivId=Dwt.getNextId();
this._buttonsDivId=Dwt.getNextId();
this._removeButtonDivId=Dwt.getNextId();
if(this._allButtons){this._addAllButtonDivId=Dwt.getNextId();
this._removeAllButtonDivId=Dwt.getNextId()
}var d=[];
var b=0;
d[b++]="<table cellspacing=0 cellpadding=0 border=0 width=100%>";
d[b++]="<colgroup><col width='40%'/><col width='20%'/><col width='40%'/> </colgroup>";
d[b++]="<tbody>";
d[b++]="<tr><td style='text-align:center' class='xform_label'>"+ZaMsg.NAD_zimbraInstalledSkin+"</td><td>&nbsp;</td><td style='text-align:center'  class='xform_label'>"+ZaMsg.NAD_zimbraAvailableSkin+"</td</tr>";
d[b++]="<tr>";
d[b++]="<td align='center' style='text-align:center' id='";
d[b++]=this._sourceListViewDivId;
d[b++]="'></td>";
d[b++]="<td valign='middle' style='text-align:center' id='";
d[b++]=this._buttonsDivId;
d[b++]="'>";
if(this._allButtons){d[b++]="<div id='";
d[b++]=this._addAllButtonDivId;
d[b++]="'></div><br>"
}for(var c=0;
c<this._buttonInfo.length;
c++){var e=this._buttonInfo[c].id;
d[b++]="<div id='";
d[b++]=this._buttonDivId[e];
d[b++]="'></div><br>"
}d[b++]="<br><div id='";
d[b++]=this._removeButtonDivId;
d[b++]="'></div>";
if(this._allButtons){d[b++]="<br><div id='";
d[b++]=this._removeAllButtonDivId;
d[b++]="'></div><br>"
}d[b++]="</td>";
d[b++]="<td align='center' style='text-align:center' id='";
d[b++]=this._targetListViewDivId;
d[b++]="'></td>";
d[b++]="</tr></tbody></table>";
this.getHtmlElement().innerHTML=d.join("")
}
}if(AjxPackage.define("zimbraAdmin.common.ZaZimletPoolChooser")){ZaZimletPoolChooser=function(b){if(arguments.length==0){return
}DwtChooser.call(this,b)
};
ZaZimletPoolChooser.prototype=new DwtChooser;
ZaZimletPoolChooser.prototype.constructor=ZaZimletPoolChooser;
ZaZimletPoolChooser.prototype._createHtml=function(){this._sourceListViewDivId=Dwt.getNextId();
this._targetListViewDivId=Dwt.getNextId();
this._buttonsDivId=Dwt.getNextId();
this._removeButtonDivId=Dwt.getNextId();
if(this._allButtons){this._addAllButtonDivId=Dwt.getNextId();
this._removeAllButtonDivId=Dwt.getNextId()
}var d=[];
var b=0;
d[b++]="<table cellspacing=0 cellpadding=0 border=0 width=100%>";
d[b++]="<colgroup><col width='40%'/><col width='20%'/><col width='40%'/> </colgroup>";
d[b++]="<tbody>";
d[b++]="<tr><td style='text-align:center' class='xform_label'>"+ZaMsg.NAD_zimbraInstalledZimlets+"</td><td>&nbsp;</td><td style='text-align:center'  class='xform_label'>"+ZaMsg.NAD_zimbraAvailableZimlets+"</td</tr>";
d[b++]="<tr>";
d[b++]="<td align='center' style='text-align:center' id='";
d[b++]=this._sourceListViewDivId;
d[b++]="'></td>";
d[b++]="<td valign='middle' style='text-align:center' id='";
d[b++]=this._buttonsDivId;
d[b++]="'>";
if(this._allButtons){d[b++]="<div id='";
d[b++]=this._addAllButtonDivId;
d[b++]="'></div><br>"
}for(var c=0;
c<this._buttonInfo.length;
c++){var e=this._buttonInfo[c].id;
d[b++]="<div id='";
d[b++]=this._buttonDivId[e];
d[b++]="'></div><br>"
}d[b++]="<br><div id='";
d[b++]=this._removeButtonDivId;
d[b++]="'></div>";
if(this._allButtons){d[b++]="<br><div id='";
d[b++]=this._removeAllButtonDivId;
d[b++]="'></div><br>"
}d[b++]="</td>";
d[b++]="<td align='center' style='text-align:center' id='";
d[b++]=this._targetListViewDivId;
d[b++]="'></td>";
d[b++]="</tr></tbody></table>";
this.getHtmlElement().innerHTML=d.join("")
}
}if(AjxPackage.define("zimbraAdmin.common.ZaXProgressDialog")){ZaXProgressDialog=function(d,b,c){if(arguments.length==0){return
}ZaXDialog.call(this,d,null,ZaMsg.Progress_Title,b,c,"ZaXProgressDialog");
this.initForm(ZaXProgressDialog.myXModel,this.getMyXForm());
this._containedObject={numTotal:100,numDone:0,progressMsg:""}
};
ZaXProgressDialog.prototype=new ZaXDialog;
ZaXProgressDialog.prototype.constructor=ZaXProgressDialog;
ZaXProgressDialog.prototype.popup=function(){DwtDialog.prototype.popup.call(this)
};
ZaXProgressDialog.prototype.popdown=function(){DwtDialog.prototype.popdown.call(this)
};
ZaXProgressDialog.prototype.enableOk=function(b){this._button[DwtDialog.OK_BUTTON].setEnabled(b)
};
ZaXProgressDialog.prototype.setProgress=function(b){this._localXForm.setInstance(b);
this._localXForm.refresh()
};
ZaXProgressDialog.prototype.getMyXForm=function(){var b={numCols:2,align:_CENTER_,cssStyle:"text-align:center",items:[{type:_DWT_ALERT_,ref:"progressMsg",content:null,colSpan:"*",iconVisible:true,align:_CENTER_,style:DwtAlert.INFORMATION},{type:_DWT_PROGRESS_BAR_,label:ZaMsg.NAD_Progress,maxValue:null,maxValueRef:"numTotal",ref:"numDone",valign:_CENTER_,align:_CENTER_,wholeCssClass:"progressbar",progressCssClass:"progressused"}]};
return b
};
ZaXProgressDialog.myXModel={items:[{id:"numTotal",ref:"numTotal",type:_NUMBER_},{id:"numDone",ref:"numDone",type:_NUMBER_},{id:"progressMsg",ref:"progressMsg",type:_STRING_}]}
}if(AjxPackage.define("zimbraAdmin.common.ZaAppTabGroup")){ZaAppTabGroup=function(b,c){if(arguments.length==0){return
}DwtComposite.call(this,{parent:b,className:"ZaAppTabGroup",posStyle:Dwt.ABSOLUTE_STYLE,id:ZaId.getTabId(ZaId.TAB_GROUP,c)});
this._created=false;
this._mainTab=null;
this._currentTab=null;
this._currentTabWidth=0;
this._createUI(c);
this._visibleStartTab=0;
this._numberOfVisibleTabs=0
};
ZaAppTabGroup.prototype=new DwtComposite();
ZaAppTabGroup.prototype.constructor=ZaAppTabGroup;
ZaAppTabGroup._TABS=new AjxVector();
ZaAppTabGroup.TAB_LIMIT=10;
ZaAppTabGroup.prototype.getTabs=function(){return ZaAppTabGroup._TABS
};
ZaAppTabGroup.prototype._createUI=function(c){if(this._created){return
}else{if(c){this.reparentHtmlElement(c)
}this._leftArrow=new DwtComposite(this,null,DwtControl.ABSOLUTE_STYLE);
AjxImg.setImage(this._leftArrow.getHtmlElement(),"LeftArrow");
this._leftArrow.setDisplay("none");
this._rightArrow=new DwtComposite(this,null,DwtControl.ABSOLUTE_STYLE);
AjxImg.setImage(this._rightArrow.getHtmlElement(),"RightArrow");
this._rightArrow.setDisplay("none");
this.setArrowHandler();
var b={closable:false,mainId:ZaId.TAB_MAIN,selected:true};
this._mainTab=new ZaAppTab(this,b);
this._currentTab=this._mainTab;
this._created=true;
ZaApp.getInstance().setTabGroup(this)
}};
ZaAppTabGroup.prototype.setCurrentTabWidth=function(b){this._currentTabWidth=b
};
ZaAppTabGroup.prototype.getCurrentTabWidth=function(){return this._currentTabWidth
};
ZaAppTabGroup.prototype.getArrowY=function(){return -4
};
ZaAppTabGroup.prototype._resizeListener=function(){this.resetTabSizes(true)
};
ZaAppTabGroup.prototype.resetTabSizes=function(k){var o=0;
var m=this.getTabWidth();
var l=m-7;
this.setCurrentTabWidth(l);
var h=this.getTabHeight();
var e=this.getW();
if(this._leftArrow.getVisible()){e-=16;
o+=16
}if(this._rightArrow.getVisible()){e-=16
}var f=false;
var g;
var j;
for(var d=0;
d<ZaAppTabGroup._TABS.size();
d++){var c=ZaAppTabGroup._TABS.get(d);
c.setBounds(o,j,l,h);
c.resetLabel(c.getTitle());
if(o&&e&&((o+l)>e)){c.setVisible(false);
if(c.isSelected()&&k){f=true;
g=d
}}else{c.setVisible(true)
}o=o+l+7
}if(this._leftArrow.getVisible()){this._leftArrow.setLocation(0,this.getArrowY())
}else{this._leftArrow.setLocation(Dwt.LOC_NOWHERE,Dwt.LOC_NOWHERE)
}if(this._rightArrow.getVisible()){this._rightArrow.setLocation(this.getW()-16,this.getArrowY())
}else{this._rightArrow.setLocation(Dwt.LOC_NOWHERE,Dwt.LOC_NOWHERE)
}if(f&&k){var b;
if(g<this._visibleStartTab){b=g-this._visibleStartTab
}else{b=g-(this._visibleStartTab+this._numberOfVisibleTabs-1)
}this.shift(b)
}};
ZaAppTabGroup.prototype.shift=function(g){if(!this._numberOfVisibleTabs){return
}var c=ZaAppTabGroup._TABS.size();
if(this._numberOfVisibleTabs+this._visibleStartTab+g>c){g=c-this._numberOfVisibleTabs-this._visibleStartTab
}if(!g){return
}else{if(g>0){this._leftArrow.setEnabled(true);
AjxImg.setImage(this._leftArrow.getHtmlElement(),"LeftArrow")
}else{if(g<0){this._rightArrow.setEnabled(true);
AjxImg.setImage(this._rightArrow.getHtmlElement(),"RightArrow")
}}}var f=0;
var e=this.getW();
this._leftArrow.setLocation(f,this.getArrowY());
this._rightArrow.setLocation(e-20,this.getArrowY());
f+=20;
this._visibleStartTab+=g;
for(var d=0;
d<c;
d++){var b=ZaAppTabGroup._TABS.get(d);
if((d>=this._visibleStartTab)&&(d<=(this._visibleStartTab+this._numberOfVisibleTabs-1))){b.setVisible(true);
b.setLocation(f);
if(d+1==c){this._rightArrow.setEnabled(false);
AjxImg.setImage(this._rightArrow.getHtmlElement(),"rightArrowDis")
}if(d==0){this._leftArrow.setEnabled(false);
AjxImg.setImage(this._leftArrow.getHtmlElement(),"LeftArrowDis")
}f+=this.getCurrentTabWidth()+7
}else{b.setVisible(false)
}}};
ZaAppTabGroup.prototype.setArrowHandler=function(){Dwt.setHandler(this._leftArrow.getHtmlElement(),DwtEvent.ONMOUSEDOWN,ZaAppTabGroup._leftArrowMouseDownHdlr);
Dwt.setHandler(this._leftArrow.getHtmlElement(),DwtEvent.ONMOUSEUP,ZaAppTabGroup._leftArrowMouseUpHdlr);
Dwt.setHandler(this._leftArrow.getHtmlElement(),DwtEvent.ONMOUSEOVER,ZaAppTabGroup._arrowMouseOverHdlr);
Dwt.setHandler(this._leftArrow.getHtmlElement(),DwtEvent.ONMOUSEOUT,ZaAppTabGroup._arrowMouseOutHdlr);
Dwt.setHandler(this._rightArrow.getHtmlElement(),DwtEvent.ONMOUSEDOWN,ZaAppTabGroup._rightArrowMouseDownHdlr);
Dwt.setHandler(this._rightArrow.getHtmlElement(),DwtEvent.ONMOUSEUP,ZaAppTabGroup._rightArrowMouseUpHdlr);
Dwt.setHandler(this._rightArrow.getHtmlElement(),DwtEvent.ONMOUSEOVER,ZaAppTabGroup._arrowMouseOverHdlr);
Dwt.setHandler(this._rightArrow.getHtmlElement(),DwtEvent.ONMOUSEOUT,ZaAppTabGroup._arrowMouseOutHdlr)
};
ZaAppTabGroup._arrowMouseOverHdlr=function(b){var c=DwtControl.getTargetControl(b);
if(c.getEnabled()){c.setCursor("pointer")
}};
ZaAppTabGroup._arrowMouseOutHdlr=function(b){var c=DwtControl.getTargetControl(b);
c.setCursor("default")
};
ZaAppTabGroup._leftArrowMouseDownHdlr=function(b){var c=DwtControl.getTargetControl(b);
AjxImg.setImage(this,"LeftArrowDis");
if(c.getEnabled()){c.parent.shift(-1)
}};
ZaAppTabGroup._rightArrowMouseDownHdlr=function(b){var c=DwtControl.getTargetControl(b);
AjxImg.setImage(this,"rightArrowDis");
if(c.getEnabled()){c.parent.shift(1)
}};
ZaAppTabGroup._leftArrowMouseUpHdlr=function(b){var c=DwtControl.getTargetControl(b);
if(c.getEnabled()){c.setCursor("pointer");
AjxImg.setImage(this,"LeftArrow")
}};
ZaAppTabGroup._rightArrowMouseUpHdlr=function(b){var c=DwtControl.getTargetControl(b);
if(c.getEnabled()){c.setCursor("pointer");
AjxImg.setImage(this,"RightArrow")
}};
ZaAppTabGroup.prototype.getTabWidth=function(){var b;
var c=ZaAppTab.DEFAULT_MIN_WIDTH;
var d=ZaAppTab.DEFAULT_MAX_WIDTH;
var g=this.getW();
if(this._leftArrow.getVisible()){g-=23
}if(this._rightArrow.getVisible()){g-=19
}if(g>0){if(g>c){var f=ZaAppTabGroup._TABS.size();
this._numberOfVisibleTabs=f;
var h=Math.floor(g/(f<=0?1:f));
if(h>=c&&h<=d){b=h
}else{if(h>d){b=d
}else{if(h<c){var e=this._numberOfVisibleTabs=Math.floor(g/c);
b=Math.floor(g/e);
if((!this._leftArrow.getVisible())||(!this._rightArrow.getVisible())){this._leftArrow.setVisible(true);
this._rightArrow.setVisible(true);
b=this.getTabWidth()
}return b
}}}}else{b=g
}}else{b=ZaAppTab.DEFAULT_MAX_WIDTH
}if(this._leftArrow.getVisible()||this._rightArrow.getVisible()){this._leftArrow.setVisible(false);
this._rightArrow.setVisible(false);
b=this.getTabWidth()
}return b
};
ZaAppTabGroup.prototype.addTab=function(c,b){ZaAppTabGroup._TABS.add(c);
if(b){this.resetTabSizes()
}return true
};
ZaAppTabGroup.prototype.removeTab=function(c,b){if(c==this._searchTab){this._searchTab=null;
var d=ZaApp.getInstance().getSearchListController();
if(d){d.reset()
}}ZaAppTabGroup._TABS.remove(c);
c.dispose();
if(b){this.resetTabSizes()
}};
ZaAppTabGroup.prototype.removeCurrentTab=function(c){var b=this.getCurrentTab();
this.removeTab(b,c);
this.selectTab(this.getTabById(ZaApp.getInstance()._currentViewId))
};
ZaAppTabGroup.prototype.selectTab=function(d){if(this.getCurrentTab()==d){return
}for(var c=0;
c<ZaAppTabGroup._TABS.size();
c++){var b=ZaAppTabGroup._TABS.get(c);
if(b==d){b.setSelectState();
this._currentTab=b;
if(c<this._visibleStartTab){this.shift(c-this._visibleStartTab)
}else{if(c>(this._numberOfVisibleTabs+this._visibleStartTab-1)){this.shift(c-(this._numberOfVisibleTabs+this._visibleStartTab-1))
}}}else{if(b.isSelected()){b.setUnselectState()
}}}};
ZaAppTabGroup.prototype.getTabById=function(d){for(var c=0;
c<ZaAppTabGroup._TABS.size();
c++){var b=ZaAppTabGroup._TABS.get(c);
if(b.getTabId()==d){return b
}}};
ZaAppTabGroup.prototype.getTabHeight=function(){var b=this.getH();
if(b>0){return b
}else{return ZaAppTab.DEFAULT_HEIGHT
}};
ZaAppTabGroup.prototype.getCurrentTab=function(){return this._currentTab
};
ZaAppTabGroup.prototype.getMainTab=function(){return this._mainTab
};
ZaAppTabGroup.prototype.getSearchTab=function(){if(this._searchTab){return this._searchTab
}else{var b={closable:true,selected:true};
this._searchTab=new ZaAppTab(this,b);
return this._searchTab
}};
ZaAppTabGroup.prototype.size=function(){return ZaAppTabGroup._TABS.size()
};
ZaAppTabGroup.prototype.getTabByItemId=function(f,e){for(var c=0;
c<ZaAppTabGroup._TABS.size();
c++){var d=ZaAppTabGroup._TABS.get(c);
var b=d.getAppView();
if(b&&b._containedObject&&b._containedObject.id&&b.constructor){if(f==b._containedObject.id&&(b.constructor==e||!e)){return d
}}}};
ZaAppTabGroup.getDirtyTabTitles=function(){var b=[];
for(var d=0;
d<ZaAppTabGroup._TABS.size();
d++){var e=ZaAppTabGroup._TABS.get(d);
var c=e.getAppView();
if(c&&c.isDirty&&c.isDirty()){b.push(e.getTitle())
}}return b
}
}if(AjxPackage.define("zimbraAdmin.common.ZaAppTab")){ZaAppTab=function(f,g){if(arguments.length==0){return
}DwtButton.call(this,{parent:f,className:"ZaAppTabButton",posStyle:Dwt.ABSOLUTE_STYLE,id:g.mainId?ZaId.getTabId(g.mainId,g.id):g.id});
this.removeListener(DwtEvent.ONMOUSEOVER,this._mouseOverListenerObj);
this._tabId=g.id||ZaApp.getInstance()._currentViewId;
var c=g.width||f.getTabWidth();
var e=g.height||f.getTabHeight();
this.setSize(c,e);
if(g.label){this.setText(g.label);
this._title=g.label
}if(g.icon){this.setImage(g.icon)
}if(g.toolTip&&g.toolTip.length>0){this.setToolTipContent(g.toolTip)
}this._closable=false;
if(g.closable==true){this.addCloseCell()
}var d=new AjxListener(this,ZaAppTab.prototype._selListener);
this.addSelectionListener(d);
if(g.onOpen&&g.onOpen instanceof AjxListener){this.addSelectionListener(g.onOpen)
}var b=new AjxListener(this,ZaAppTab.prototype._mouseoutListener);
this.addListener(DwtEvent.ONMOUSEOUT,b);
if(f.addTab(this,true)){this._selected=g.selected;
if(this._selected){f.selectTab(this)
}}this._addPopupMenu()
};
ZaAppTab.prototype=new DwtButton;
ZaAppTab.prototype.constructor=ZaAppTab;
ZaAppTab.DEFAULT_HEIGHT=22;
ZaAppTab.DEFAULT_MAX_WIDTH=200;
ZaAppTab.DEFAULT_MIN_WIDTH=100;
ZaAppTab.prototype.getTitle=function(){return this._title
};
ZaAppTab.prototype._addPopupMenu=function(){this._popupOperations=[];
this._actionOpClose=new ZaOperation(ZaOperation.CLOSE_TAB,ZaMsg.tab_close,null,null,null,new AjxListener(this,ZaAppTab.prototype.closeTab));
this._popupOperations.push(this._actionOpClose);
this._actionOpCloseOthers=new ZaOperation(ZaOperation.CLOSE_OTHER_TAB,ZaMsg.tab_close_others,null,null,null,new AjxListener(this,ZaAppTab.prototype.closeOtherTabs));
this._popupOperations.push(this._actionOpCloseOthers);
this._actionOpCloseAll=new ZaOperation(ZaOperation.CLOSE_ALL_TAB,ZaMsg.tab_close_all,null,null,null,new AjxListener(this,ZaAppTab.prototype.closeAllTabs));
this._popupOperations.push(this._actionOpCloseAll);
this._actionMenu=new ZaPopupMenu(this,"ActionMenu",null,this._popupOperations);
var b=new AjxListener(this,ZaAppTab.prototype._mouseRightClickListener);
this.addListener(DwtEvent.ACTION,b);
this._tabMouseUpListener=new AjxListener(this,ZaAppTab.prototype._tabMouseupListener);
this.addListener(DwtEvent.ONMOUSEUP,this._tabMouseUpListener)
};
ZaAppTab.prototype.getAppView=function(){var b=ZaApp.getInstance().getViewById(this._tabId);
if(b){return b[ZaAppViewMgr.C_APP_CONTENT]
}else{return null
}};
ZaAppTab.prototype._selListener=function(b){DBG.println(AjxDebug.DBG1,"ZaAppTab.prototype._selListenr");
this.parent.selectTab(this)
};
ZaAppTab.prototype._mouseoutListener=function(b){this.restoreOrginState()
};
ZaAppTab.prototype._tabMouseupListener=function(b){if(b.button==DwtMouseEvent.RIGHT){if(this.isListenerRegistered(DwtEvent.ACTION)){this.notifyListeners(DwtEvent.ACTION,b)
}}};
ZaAppTab.prototype._mouseRightClickListener=function(d){var c=this.parent;
var b=c.getTabs();
var e=b.size();
if(e<=1){this._actionMenu.enableAll(false)
}else{if(e<=2&&this!=c.getMainTab()){this._actionMenu.enable(ZaOperation.CLOSE_TAB,true);
this._actionMenu.enable(ZaOperation.CLOSE_ALL_TAB,true);
this._actionMenu.enable(ZaOperation.CLOSE_OTHER_TAB,false)
}else{this._actionMenu.enableAll(true)
}}this._actionMenu.popup(0,d.docX,d.docY)
};
ZaAppTab.prototype.setSelectState=function(){this._selected=true;
this.setDisplayState(DwtControl.SELECTED);
this.removeListener(DwtEvent.ONMOUSEUP,this._mouseUpListenerObj);
var b=this.getTabId();
if(b!=ZaApp.getInstance()._currentViewId){ZaApp.getInstance().pushView(b)
}if(this._closeCell){AjxImg.setImage(this._closeCell,"Close")
}};
ZaAppTab.prototype.setUnselectState=function(){this._selected=false;
this.setDisplayState(DwtControl.NORMAL);
this.addListener(DwtEvent.ONMOUSEUP,this._mouseUpListenerObj);
if(this._closeCell){AjxImg.setDisabledImage(this._closeCell,"Close")
}};
ZaAppTab.prototype.restoreOrginState=function(){if(this._selected){this.setDisplayState(DwtControl.SELECTED)
}else{this.setDisplayState(DwtControl.NORMAL)
}};
ZaAppTab.prototype.setTabId=function(b){this._tabId=b
};
ZaAppTab.prototype.getTabId=function(){return this._tabId
};
ZaAppTab.prototype.isSelected=function(){return this._selected
};
ZaAppTab.prototype.resetLabel=function(b){b=b||this.getText();
if(!b){return
}else{this._title=b
}var d=this.parent.getCurrentTabWidth();
if(this._closable){d-=20
}var c=Math.floor((d-30)/5.5);
if(c<b.length){this.setText(b.substring(0,(c-3))+"...")
}else{this.setText(b)
}};
ZaAppTab.prototype.addCloseCell=function(){this._closable=true;
this._closeCell=this._row.insertCell(this._row.cells.length);
this._closeCell.className="Icon";
AjxImg.setImage(this._closeCell,"Close");
Dwt.setHandler(this._closeCell,DwtEvent.ONMOUSEDOWN,ZaAppTab._closeCellMouseDownHdlr);
Dwt.setHandler(this._closeCell,DwtEvent.ONMOUSEUP,ZaAppTab._closeCellMouseUpHdlr);
Dwt.setHandler(this._closeCell,DwtEvent.ONMOUSEOVER,ZaAppTab._closeCellMouseOverHdlr);
Dwt.setHandler(this._closeCell,DwtEvent.ONMOUSEOUT,ZaAppTab._closeCellMouseOutHdlr)
};
ZaAppTab._closeCellMouseDownHdlr=function(b){var c=DwtControl.getTargetControl(b)
};
ZaAppTab._closeCellMouseUpHdlr=function(b){var c=DwtControl.getTargetControl(b);
c.closeTab()
};
ZaAppTab.prototype.closeTab=function(){if(this._actionMenu&&this._actionMenu.isPoppedUp()){this._actionMenu.popdown()
}if(this._closable){var b=this.getTabId();
var c=ZaApp.getInstance().getControllerById(b);
if(b==ZaApp.getInstance()._currentViewId){c.closeButtonListener()
}else{c.closeButtonListener(null,true,ZaAppTab.prototype.closeHiddenTab,this)
}}};
ZaAppTab.prototype.closeOtherTabs=function(){if(this._actionMenu&&this._actionMenu.isPoppedUp()){this._actionMenu.popdown()
}var d=ZaAppTabGroup.getDirtyTabTitles();
if(d.length>0){ZaApp.getInstance().getCurrentController().popupMsgDialog(AjxMessageFormat.format(ZaMsg.tab_close_warning,[d.join("<br />")]));
return
}else{if(ZaAppTabGroup.getDirtyTabTitles){var g=this.parent
}var f=g.getTabs();
var h=[];
for(var e=0;
e<f.size();
e++){var b=f.get(e);
if((b!=this)&&(b._closable)){h.push(b)
}}for(var c=0;
c<h.length;
c++){h[c].closeTab()
}if(h.length>0){g.selectTab(this)
}}};
ZaAppTab.prototype.closeAllTabs=function(){if(this._actionMenu&&this._actionMenu.isPoppedUp()){this._actionMenu.popdown()
}var d=ZaAppTabGroup.getDirtyTabTitles();
if(d.length>0){ZaApp.getInstance().getCurrentController().popupMsgDialog(AjxMessageFormat.format(ZaMsg.tab_close_warning,[d.join("<br />")]));
return
}else{var g=this.parent;
var f=g.getTabs();
var h=[];
for(var e=0;
e<f.size();
e++){var b=f.get(e);
if(b._closable){h.push(b)
}}for(var c=0;
c<h.length;
c++){h[c].closeTab()
}if(h.length>0&&f.size()>0){g.selectTab(f.get(0))
}}};
ZaAppTab.prototype.closeHiddenTab=function(){var b=this.getTabId();
if(b==ZaApp.getInstance()._currentViewId){ZaApp.getInstance().popView()
}else{this.parent.removeTab(this,true);
ZaApp.getInstance().disposeView(b,true)
}};
ZaAppTab._closeCellMouseOverHdlr=function(b){var c=DwtControl.getTargetControl(b);
AjxImg.setImage(c._closeCell,"Close");
c._mainToolTip=c.getToolTipContent();
c.setToolTipContent(ZaMsg.ALTBB_Close_tt)
};
ZaAppTab._closeCellMouseOutHdlr=function(b){var c=DwtControl.getTargetControl(b);
if(c.isSelected()){AjxImg.setImage(c._closeCell,"Close")
}else{AjxImg.setDisabledImage(c._closeCell,"Close")
}c.setToolTipContent(c._mainToolTip)
};
ZaAppTab.prototype._createHtmlFromTemplate=function(b,c){DwtButton.prototype._createHtmlFromTemplate.call(this,"admin.Widgets#ZaAppTab",c);
this._row=document.getElementById(c.id+"_row")
}
}if(AjxPackage.define("zimbraAdmin.common.ZaRequestMgr")){ZaRequestMgr=function(){};
ZaRequestMgr.invoke=function(e,c){var d=new ZmCsfeCommand();
var h=(c!=null?c.controller:null);
var g=!(c.delay===null||c.delay===undefined)?c.delay:500;
var b=c.busyId?c.busyId:Dwt.getNextId();
if(!e.asyncMode&&h||(c.showBusy&&h)){h._shell.setBusyDialogText(c.busyMsg!=null?c.busyMsg:ZaMsg.splashScreenLoading);
h._currentRequest=d;
var k=new AjxCallback(h,h.cancelBusyOverlay,c);
h._shell.setBusy(true,b,true,g,k)
}try{ZaZimbraAdmin.getInstance().cancelNoOp();
e.noAuthToken=true;
var f=d.invoke(e);
if(!e.asyncMode&&h){h._shell.setBusy(false,b,false)
}if(!e.asyncMode){ZaZimbraAdmin.getInstance().scheduleNoOp();
return f
}}catch(j){if(j&&j.code&&!(j.code==ZmCsfeException.SVC_AUTH_EXPIRED||j.code==ZmCsfeException.SVC_AUTH_REQUIRED||j.code==ZmCsfeException.NO_AUTH_TOKEN||j.code==ZmCsfeException.AUTH_TOKEN_CHANGED)){ZaZimbraAdmin.getInstance().scheduleNoOp()
}if(!e.asyncMode&&h||(c.showBusy&&h)){h._shell.setBusy(false,b)
}throw j
}}
}if(AjxPackage.define("zimbraAdmin.common.ZaActionStatusView")){ZaActionStatusView=function(d,c,b,e){DwtControl.call(this,{parent:d,className:(c||"ZaActionStatus"),posStyle:b,id:e});
this._toast=this._standardToast=new ZaToast(this,ZaId.TOAST);
this._statusQueue=[]
};
ZaActionStatusView.prototype=new DwtControl;
ZaActionStatusView.prototype.constructor=ZaActionStatusView;
ZaActionStatusView.LEVEL_INFO=1;
ZaActionStatusView.LEVEL_WARNING=2;
ZaActionStatusView.LEVEL_CRITICAL=3;
ZaActionStatusView.MSG_PARAMS=["msg","level","detail","transitions","toast","force","dismissCallback","finishCallback"];
ZaActionStatusView.prototype.toString=function(){return"ZaActionStatusView"
};
ZaActionStatusView.prototype.setStatusMsg=function(d){d=Dwt.getParams(arguments,ZaActionStatusView.MSG_PARAMS);
if(typeof d=="string"){d={msg:d}
}var b={msg:d.msg,level:d.level||ZaActionStatusView.LEVEL_INFO,detail:d.detail,date:new Date(),transitions:d.transitions,toast:d.toast||this._standardToast,dismissCallback:(d.dismissCallback instanceof AjxCallback)?d.dismissCallback:null,finishCallback:(d.finishCallback instanceof AjxCallback)?d.finishCallback:null,dismissed:false};
if(d.force){for(var c=0;
c<this._statusQueue.length;
c++){this._statusQueue[c].dismissed=true
}}this._statusQueue.push(b);
if(!this._toast.isPoppedUp()){this._updateStatusMsg()
}else{if(d.force){this.dismissStatusMsg()
}}};
ZaActionStatusView.prototype.nextStatus=function(){if(this._statusQueue.length>0){this._updateStatusMsg();
return true
}return false
};
ZaActionStatusView.prototype.dismissStatusMsg=function(c){if(c){for(var b=0;
b<this._statusQueue.length;
b++){this._statusQueue[b].dismissed=true
}}this._toast.dismiss()
};
ZaActionStatusView.getClass=function(b){switch(b.level){case ZaActionStatusView.LEVEL_CRITICAL:return"ZaToastCrit";
case ZaActionStatusView.LEVEL_WARNING:return"ZaToastWarn";
default:return"ZaToastInfo"
}};
ZaActionStatusView.getImageHtml=function(b){switch(b.level){case ZaActionStatusView.LEVEL_CRITICAL:return"Critical";
case ZaActionStatusView.LEVEL_WARNING:return"Warning";
default:return"Success"
}};
ZaActionStatusView.prototype._updateStatusMsg=function(){var b=this._statusQueue.shift();
if(!b){return
}if(b.dismissed){if(b.dismissCallback){b.dismissCallback.run()
}this.nextStatus()
}else{var d=ZaActionStatusView.getClass(b);
var c=ZaActionStatusView.getImageHtml(b);
this._toast=b.toast;
this._toast.popup(d,AjxStringUtil.htmlEncode(b.msg),c,null,b.transitions,b.dismissCallback,b.finishCallback)
}};
ZaToast=function(b,c){if(arguments.length==0){return
}DwtComposite.call(this,{parent:b.shell,className:"ZaToast",posStyle:Dwt.ABSOLUTE_STYLE,id:c});
this._statusView=b;
this._createHtml();
this._funcs={};
this.popdown();
this._funcs.position=AjxCallback.simpleClosure(this.__position,this);
this._funcs.show=AjxCallback.simpleClosure(this.__show,this);
this._funcs.hide=AjxCallback.simpleClosure(this.__hide,this);
this._funcs.pause=AjxCallback.simpleClosure(this.__pause,this);
this._funcs.hold=AjxCallback.simpleClosure(this.__hold,this);
this._funcs.idle=AjxCallback.simpleClosure(this.__idle,this);
this._funcs.fade=AjxCallback.simpleClosure(this.__fade,this);
this._funcs["fade-in"]=this._funcs.fade;
this._funcs["fade-out"]=this._funcs.fade;
this._funcs.slide=AjxCallback.simpleClosure(this.__slide,this);
this._funcs["slide-in"]=this._funcs.slide;
this._funcs["slide-out"]=this._funcs.slide;
this._funcs.next=AjxCallback.simpleClosure(this.transition,this)
};
ZaToast.prototype=new DwtComposite;
ZaToast.prototype.constructor=ZaToast;
ZaToast.prototype.toString=function(){return"ZaToast"
};
ZaToast.FADE={type:"fade"};
ZaToast.FADE_IN={type:"fade-in"};
ZaToast.FADE_OUT={type:"fade-out"};
ZaToast.SLIDE={type:"slide"};
ZaToast.SLIDE_IN={type:"slide-in"};
ZaToast.SLIDE_OUT={type:"slide-out"};
ZaToast.PAUSE={type:"pause"};
ZaToast.HOLD={type:"hold"};
ZaToast.IDLE={type:"idle"};
ZaToast.SHOW={type:"show"};
ZaToast.DEFAULT_TRANSITIONS=[ZaToast.FADE_IN,ZaToast.PAUSE,ZaToast.FADE_OUT];
ZaToast.DEFAULT_STATE={};
ZaToast.DEFAULT_STATE.position={location:"C"};
ZaToast.DEFAULT_STATE.pause={duration:3200};
ZaToast.DEFAULT_STATE.hold={};
ZaToast.DEFAULT_STATE.fade={duration:100,multiplier:1};
ZaToast.DEFAULT_STATE["fade-in"]={start:0,end:99,step:10,duration:200,multiplier:1};
ZaToast.DEFAULT_STATE["fade-out"]={start:99,end:0,step:-10,duration:200,multiplier:1};
ZaToast.DEFAULT_STATE.slide={duration:100,multiplier:1};
ZaToast.DEFAULT_STATE["slide-in"]={start:-40,end:0,step:1,duration:100,multiplier:1};
ZaToast.DEFAULT_STATE["slide-out"]={start:0,end:-40,step:-1,duration:100,multiplier:1};
ZaToast.LEVEL_RE=/\b(ZaToastCrit|ZaToastWarn|ZaToastInfo)\b/g;
ZaToast.DISMISSABLE_STATES=[ZaToast.HOLD];
ZaToast.prototype.TEMPLATE="admin.Widgets#ZaToast";
ZaToast.prototype.dispose=function(){this._textEl=null;
this._iconEl=null;
this._detailEl=null;
DwtComposite.prototype.dispose.call(this)
};
ZaToast.prototype.popup=function(b,k,g,f,e,d,l){this.__clear();
this._poppedUp=true;
this._dismissed=false;
this._dismissCallback=d;
this._finishCallback=l;
var c=this.getHtmlElement();
Dwt.delClass(c,ZaToast.LEVEL_RE,b||"ZaToastInfo");
if(this._textEl){this._textEl.innerHTML=k||""
}if(this._iconEl){AjxImg.setImage(this._iconEl,g,false)
}var j=f||"C";
var h=e||ZaToast.DEFAULT_TRANSITIONS;
h=[].concat({type:"position",location:j},h,{type:"hide"});
this._transitions=h;
this.transition()
};
ZaToast.prototype.popdown=function(){this.__clear();
Dwt.setLocation(this.getHtmlElement(),Dwt.LOC_NOWHERE,Dwt.LOC_NOWHERE);
this._poppedUp=false;
if(!this._dismissed){if(this._finishCallback){this._finishCallback.run()
}}this._dismissed=false
};
ZaToast.prototype.isPoppedUp=function(){return this._poppedUp
};
ZaToast.prototype.transition=function(){if(this._pauseTimer){clearTimeout(this._pauseTimer);
this._pauseTimer=null
}if(this._held){this._held=false
}var d=this._transitions&&this._transitions.shift();
if(!d){this._poppedUp=false;
if(!this._statusView.nextStatus()){this.popdown()
}return
}var c=this._state=this._createState(d);
var b=this.getHtmlElement();
Dwt.setLocation(b,c.x,c.y);
this._funcs[d.type||"next"]()
};
ZaToast.prototype._createHtml=function(b){var c={id:this._htmlElId};
this._createHtmlFromTemplate(b||this.TEMPLATE,c);
Dwt.setZIndex(this.getHtmlElement(),Dwt.Z_TOAST)
};
ZaToast.prototype._createHtmlFromTemplate=function(b,c){DwtComposite.prototype._createHtmlFromTemplate.call(this,b,c);
this._textEl=document.getElementById(c.id+"_text");
this._iconEl=document.getElementById(c.id+"_icon");
this._detailEl=document.getElementById(c.id+"_detail")
};
ZaToast.prototype._createState=function(f){var d=AjxUtil.createProxy(f);
var e=ZaToast.DEFAULT_STATE[d.type];
for(var b in e){if(!d[b]){d[b]=e[b]
}}var c=this.getHtmlElement();
switch(d.type){case"fade-in":Dwt.setOpacity(c,0);
Dwt.setLocation(c,null,null);
d.value=d.start;
break;
case"fade-out":case"fade":Dwt.setLocation(c,null,null);
d.value=d.start;
break;
case"slide-in":case"slide-out":case"slide":Dwt.setLocation(c,null,-36);
Dwt.setOpacity(c,100);
d.value=d.start;
break
}return d
};
ZaToast.prototype.__clear=function(){clearTimeout(this._actionId);
clearInterval(this._actionId);
this._actionId=-1
};
ZaToast.prototype.__position=function(){var j=this._state.location||"C";
var f;
f="skin_container_toaster";
var c=this.getHtmlElement();
var b=Dwt.byId(f)||this.shell.getHtmlElement();
var e=Dwt.getSize(b);
var k=Dwt.getSize(c);
var h=(e.x-k.x)/2;
var g=(e.y-k.y)/2;
switch(j.toUpperCase()){case"N":g=0-k.y;
break;
case"S":g=e.y-k.y;
break;
case"E":h=e.x-k.x;
break;
case"W":h=0;
break;
case"NE":h=e.x-k.x;
g=0;
break;
case"NW":h=0;
g=0;
break;
case"SE":h=e.x-k.x;
g=e.y-k.y;
break;
case"SW":h=0;
g=e.y-k.y;
break;
case"C":default:break
}var d=Dwt.toWindow(b);
h+=d.x;
g+=d.y;
h=(h>0)?h:0;
g=(g>0)?g:0;
Dwt.setLocation(c,h,g);
this._funcs.next()
};
ZaToast.prototype.__show=function(){var b=this.getHtmlElement();
Dwt.setVisible(b,true);
Dwt.setVisibility(b,true);
this._funcs.next()
};
ZaToast.prototype.__hide=function(){var b=this.getHtmlElement();
Dwt.setLocation(b,Dwt.LOC_NOWHERE,Dwt.LOC_NOWHERE);
this._funcs.next()
};
ZaToast.prototype.__pause=function(){if(this._dismissed&&ZaToast.__mayDismiss(ZaToast.PAUSE)){this._funcs.next()
}else{this._pauseTimer=setTimeout(this._funcs.next,this._state.duration)
}};
ZaToast.prototype.__hold=function(){if(this._dismissed&&ZaToast.__mayDismiss(ZaToast.HOLD)!=-1){this._funcs.next()
}else{this._held=true
}};
ZaToast.__mayDismiss=function(b){return AjxUtil.indexOf(ZaToast.DISMISSABLE_STATES,b)!=-1
};
ZaToast.prototype.dismiss=function(){if(!this._dismissed&&this._poppedUp){var b=(this._pauseTimer&&ZaToast.__mayDismiss(ZaToast.PAUSE))||(this._held&&ZaToast.__mayDismiss(ZaToast.HOLD));
if(b){this._funcs.next()
}this._dismissed=true;
if(this._dismissCallback instanceof AjxCallback){this._dismissCallback.run()
}}};
ZaToast.prototype.__idle=function(){if(!this._idleTimer){this._idleTimer=new DwtIdleTimer(0,new AjxCallback(this,this.__idleCallback))
}else{this._idleTimer.resurrect(0)
}};
ZaToast.prototype.__idleCallback=function(b){if(!b){this.transition();
this._idleTimer.kill()
}};
ZaToast.prototype.__move=function(){this._funcs.next()
};
ZaToast.prototype.__fade=function(){var b=this._state.value;
var d=this._state.step;
var f=d>0?b>=this._state.end:b<=this._state.end;
if(f){b=this._state.end
}var c=this.getHtmlElement();
Dwt.setOpacity(c,b);
if(f){this.__clear();
setTimeout(this._funcs.next,0);
return
}if(this._actionId==-1){var e=this._state.duration;
var g=e/Math.abs(d);
this._actionId=setInterval(this._funcs.fade,g)
}this._state.value+=d;
this._state.step*=this._state.multiplier
};
ZaToast.prototype.__slide=function(){var e=this._state.value;
var c=this._state.step;
var f=c>0?e>=this._state.end:e<=this._state.end;
if(f){e=this._state.end
}var b=this.getHtmlElement();
Dwt.setLocation(b,null,e);
if(f){this.__clear();
setTimeout(this._funcs.next,0);
return
}if(this._actionId==-1){var d=this._state.duration;
var g=d/Math.abs(c);
this._actionId=setInterval(this._funcs.slide,g)
}this._state.value+=c;
this._state.step*=this._state.multiplier
}
}if(AjxPackage.define("zimbraAdmin.common.ZaTreeItem")){ZaTreeItem=function(b){if(arguments.length==0){return
}b.expandNodeImage=b.expandNodeImage||"Blank_16";
b.collapseNodeImage=b.collapseNodeImage||"AdminCollapse";
b.arrowDisabled=true;
b=Dwt.getParams(arguments,ZaTreeItem.PARAMS);
this._parentInTree=b.parent;
this._countParam=b.count;
this.forceNode=(b.forceNode===undefined?false:b.forceNode);
DwtTreeItem.call(this,b)
};
ZaTreeItem.PARAMS=["parent","index","text","imageInfo","deferred","className","posStyle","forceNotifySelection","forceNotifyAction","count","forceNode"];
ZaTreeItem.prototype=new DwtTreeItem;
ZaTreeItem.prototype.constructor=ZaTreeItem;
ZaTreeItem.prototype.TEMPLATE="admin.Widgets#ZaTreeItem";
ZaTreeItem.prototype.dispose=function(){this._countCell=null;
DwtTreeItem.prototype.dispose.call(this)
};
ZaTreeItem.prototype.toString=function(){return"ZaTreeItem"
};
ZaTreeItem.prototype._initialize=function(b,f,d){d=d||this.forceNode;
DwtTreeItem.prototype._initialize.call(this,b,f,d);
this._countCell=document.getElementById(this._htmlElId+"_countCell");
if(this._countCell&&(this._countInfoParam!==undefined)){this._countCell.innerHTML=this._countInfoParam;
this._countCell.className="AdminTreeItem-Count";
this._countInfo=this._countInfoParam
}if(this._nodeCell){var e=AjxImg.getImageElement(this._nodeCell);
if(e){Dwt.clearHandler(e,DwtEvent.ONMOUSEDOWN);
Dwt.clearHandler(e,DwtEvent.ONMOUSEUP)
}}if(this._arrowDisabled){var c=document.getElementById(this._htmlElId+"_table");
c.style.tableLayout="fixed";
c.style.width="100%";
this._textCell.style.width="100%"
}this._adjustText()
};
ZaTreeItem.prototype._adjustText=function(){this.setToolTipContent(this._text)
};
ZaTreeItem.prototype.setText=function(b){if(this._initialized){if(!b){b=""
}this._text=this._textCell.innerHTML=AjxStringUtil.htmlEncode(b);
this._adjustText()
}else{this._textParam=AjxStringUtil.htmlEncode(b)
}};
ZaTreeItem.prototype.getCount=function(){return this._countInfo
};
ZaTreeItem.prototype.setCount=function(b){if(this._initialized){if(this._countCell){this._countCell.innerHTML=b;
this._countCell.className="AdminTreeItem-Count"
}this._countInfo=b
}else{this._countInfoParam=b
}};
ZaTreeItem.prototype.setExpanded=function(b,d,c){if(b){this._realizeDeferredChildren()
}if(this.getNumChildren()){if(this._expanded!=b){this._expand(b,null,true)
}}};
ZaTreeItem.prototype.isClickOnItem=function(e){var b=e.docX;
var f=e.docY;
var c=Dwt.getBounds(this._itemDiv);
var d=(c.x<=e.docX)&&(e.docX<=c.x+c.width)&&(location.y<=e.docY)&&(e.docY<=c.y+c.height);
return d
};
ZaTreeEvent=function(d,c,b){if(arguments.length==0){return
}this.oldPath=d;
this.newPath=c;
this.details=b
};
ZaTreeEvent.prototype=new DwtEvent();
ZaTreeEvent.prototype.consturctor=ZaTreeEvent;
ZaTreeEvent.prototype.toString=function(){return"ZaTreeEvent"
};
ZaTreeEvent.ONDRAW="ondraw";
ZaTreeEvent.ONDESTROY="ondestroy";
ZaTreeItemData=function(b){if(arguments.length==0){return
}b=Dwt.getParams(arguments,ZaTreeItemData.PARAMS);
this.parent=b.parent;
this.parentObject=b.parentObject||"";
this.relatedObject=b.relatedObject||[];
this.recentObject=b.recentObject||[];
this.type=b.type||0;
if(this.type==1){this.path=b.path
}this.id=b.id;
this.className=b.className||"AdminTreeItem";
this.text=b.text;
this.image=b.image;
this.siblings=new AjxVector();
this.forceNode=b.forceNode;
this.isShowHistory=(b.isShowHistory===undefined?true:b.isShowHistory);
this.index=b.index;
this.defaultSelectedItem=b.defaultSelectedItem;
this.count=b.count;
this.canShowOnRoot=(b.canShowOnRoot===undefined?true:b.canShowOnRoot);
this.mappingId=b.mappingId;
this.callback=b.callback;
this.buildPath=(b.buildPath?b.buildPath:undefined);
this._data={};
this.childrenData=new AjxVector();
this._eventMgr=new AjxEventMgr()
};
ZaTreeItemData.PARAMS=["parent","id","text","image","index","count","mappingId","callback","relatedObject","recentObject","type","path","canShowOnRoot","forceNode","isShowHistory","buildPath","className","defaultSelectedItem"];
ZaTreeItemData.prototype.addChild=function(c,b){this.childrenData.add(c,b);
c.parentObject=this
};
ZaTreeItemData.prototype.addSilbings=function(c,b){this.siblings.add(c,b)
};
ZaTreeItemData.prototype.setData=function(b,c){this._data[b]=c
};
ZaTreeItemData.prototype.getData=function(b){return this._data[b]
};
ZaTreeItemData.prototype.removeChild=function(c,b){this.childrenData.remove(c)
};
ZaTreeItemData.prototype.isLeaf=function(){var c=this.childrenData.size()==0;
var b=!this.canShowOnRoot;
return(c||b)
};
ZaTreeItemData.prototype.getChildrenNum=function(){return this.childrenData.size()
};
ZaTreeItemData.prototype.isAlias=function(c,b){if(this.type==1){return true
}else{return false
}};
ZaTreeItemData.prototype.getRealPath=function(c,b){return this.path
};
ZaTreeItemData.prototype.addRelatedObject=function(b){this.relatedObject=b
};
ZaTreeItemData.prototype.addRecentObject=function(b){this.recentObject=b
};
ZaTreeItemData.prototype.addListener=function(b,c){this._eventMgr.addListener(b,c)
};
ZaTreeItemData.prototype.notifyListeners=function(b,c){return this._eventMgr.notifyListeners(b,c)
}
}if(AjxPackage.define("zimbraAdmin.common.ZaTree")){ZaTree=function(b){if(arguments.length==0){return
}b=Dwt.getParams(arguments,ZaTree.PARAMS);
b.style=DwtTree.SINGLE_STYLE;
DwtTree.call(this,b);
this._rootData=new ZaTreeItemData();
this.currentShowItem=null
};
ZaTree.PARAMS=["parent","style","className","posStyle"];
ZaTree.prototype=new DwtTree;
ZaTree.prototype.constructor=ZaTree;
ZaTree.prototype.toString=function(){return"ZaTree"
};
ZaTree.prototype._expandUp=function(b){return
};
ZaTree.prototype.getContainer=function(){return this._container
};
ZaTree.prototype.setRootData=function(b){this._rootData=b
};
ZaTree.prototype.getRootData=function(b){return this._rootData
};
ZaTree.prototype.addTreeItemData=function(d){var e=this.getPathItems(d.parent);
var c;
var b=this.getTreeItemData(this._rootData,e,0);
if(b){b.addChild(d);
c=true
}else{c=false
}return c
};
ZaTree.prototype.getTreeItemData=function(c,h,g){if(h.length==g){return""
}var e=h[g];
if(c.text!=e){return""
}var f=g+1;
if(h.length==f){return c
}if(c.childrenData.size()==0){return""
}var b="";
var d;
for(d=0;
d<c.childrenData.size();
d++){b=this.getTreeItemData(c.childrenData.get(d),h,f);
if(b){break
}}return b
};
ZaTree.prototype.getTreeItemDataByPath=function(c){var d=this.getPathItems(c);
var b=this.getTreeItemData(this._rootData,d,0);
return b
};
ZaTree.SEPERATOR="%";
ZaTree.prototype.getPathItems=function(e){var b=e.split(ZaTree.SEPERATOR);
var c=[];
for(var d=0;
d<b.length;
d++){if(b[d]){c.push(b[d])
}}return c
};
ZaTree.getPathItems=ZaTree.prototype.getPathItems;
ZaTree.prototype.setSelection=function(e,g,l,b){if(!e){return
}var k=this._selectedItems.getArray();
var h=this._selectedItems.size();
var m;
var c=0;
var f=false;
for(var d=0;
d<h;
d++){if(k[d]==e){f=true
}else{k[d]._setSelected(false);
this._selectedItems.remove(k[d]);
if(m==null){m=new Array()
}if(!AjxUtil.isEmpty(k[d])){m[c++]=k[d]
}}}if(m&&!g){this._notifyListeners(DwtEvent.SELECTION,m,DwtTree.ITEM_DESELECTED,null,this._selEv,l)
}if(f){return
}this._selectedItems.add(e);
if(e._setSelected(true,b)&&!g){this._notifyListeners(DwtEvent.SELECTION,[e],DwtTree.ITEM_SELECTED,null,this._selEv,l)
}};
ZaTree.prototype.setSelectionByPath=function(r,c,m,s,f,l,k){var b=this.getTreeItemDataByPath(r);
if(b.isAlias()){r=b.getRealPath();
c=false
}var q=this._getBuildNode(b);
if(q.isNeed){if(this.currentRoot&&!k){var j=new ZaTreeEvent(q.oldPath,q.newPath);
var o=this.currentRoot.getData("dataItem").notifyListeners(ZaTreeEvent.ONDESTROY,j);
if(o===false){return
}}this.buildTree(q.resultItem)
}else{var n=this._selectedItems.getArray();
var d=this._selectedItems.size();
if(d>0){for(var g=0;
g<d;
g++){n[g]._setSelected(false)
}}}this._selectedItems.removeAll();
var h=this.getTreeItemByPath(r);
var e=this._getSelectedItem(h);
this._selectedItems.add(e);
if(e._setSelected(true,f)&&!m){this._notifyListeners(DwtEvent.SELECTION,[e],DwtTree.ITEM_SELECTED,null,this._selEv,s,l)
}this._updateHistory(h,c);
var p=q.isNeed?q.resultItem:b;
if(p.callback&&p.callback instanceof AjxCallback){p.callback.run()
}};
ZaTree.prototype._getBuildNode=function(f){var b={isNeed:true,resultItem:f};
if(!this.currentRoot){return b
}var d=this.currentRoot.getData("dataItem");
var e=this.getABPath(d);
if(f.buildPath){b.resultItem=this.getTreeItemDataByPath(f.buildPath)
}else{if(f.isLeaf()&&f.parentObject){b.resultItem=f.parentObject
}else{b.resultItem=f
}}var c=this.getABPath(b.resultItem);
b.newPath=c;
if(e==c){b.isNeed=false
}else{b.oldPath=e
}return b
};
ZaTree.prototype._getSelectedItem=function(d){var c=d.getData("dataItem").defaultSelectedItem;
if(!c){return d
}var b=d.getItems();
if(b.length>0){return b[c-1]
}return d
};
ZaTree.prototype.getSelectedItem=function(b){return this._getSelectedItem(b)
};
ZaTree.prototype.getTreeItemByPath=function(n){if(!n){return null
}if(!this.currentRoot){return null
}var k=this.getChildren();
for(var e=0;
e<k.length;
e++){var c=k[e];
var g=c.getData("dataItem");
var m=this.getABPath(g);
if(m==n){return c
}var b=c.getChildren();
for(var f=0;
f<b.length;
f++){var d=b[f];
var l=d.getText();
var h=m+ZaTree.SEPERATOR+l;
if(n==h){return d
}}}return null
};
ZaTree.prototype.buildTree=function(e){this.clearItems();
this.curentRoot=null;
this.currentRelated=null;
this.currentRoot=this._buildNodeItem(e,true);
this.currentRoot.setExpanded(true);
if(e.relatedObject.length!=0){this.currentRelated=this._buildNodeItem(this._getDefaultRelated(e));
this.currentRelated.setExpanded(true)
}if(e.recentObject.length!=0){this.currentRecented=this._buildNodeItem(this._getDefaultRecentObjects(e),false,true);
this.currentRecented.setExpanded(true)
}for(var b=0;
b<e.siblings.size();
b++){var d=e.siblings.get(b);
var c=this._buildNodeItem(d);
c.setExpanded(true)
}return this.currentRoot
};
ZaTree.prototype.renameTreeItem=function(j,b){var d=this.getTreeItemDataByPath(j);
if(!d){return
}var h=this.getTreeItemByPath(j);
if(h){h.setText(b)
}d.text=b;
var c=this.getPathItems(d.parent);
c.push(b);
var g=this.getPathByArray(c);
for(var f=0;
f<d.childrenData.size();
f++){var e=d.childrenData.get(f);
e.parent=g
}return g
};
ZaTree.prototype.removeTreeItem=function(d){var b=this.getTreeItemDataByPath(d);
if(!b){return
}var c=this.getTreeItemByPath(d);
if(c){c.parent.removeChildren(c)
}b.parentObject.removeChildren(b)
};
ZaTree.prototype.removeAllChild=function(f){var b=this.getTreeItemDataByPath(f);
if(!b){return
}var e=this.getTreeItemByPath(f);
if(e){var d=[];
d=e.getChildren();
for(var c=0;
c<d.length;
c++){e.removeChild(d[c]);
d[c]=null
}d=[]
}b.childrenData.removeAll()
};
ZaTree.prototype._getDefaultRelated=function(d){var e=new ZaTreeItemData({parent:d.parent,id:d.id+"_related",text:ZaMsg.OVP_related});
d.addChild(e);
for(var c=0;
c<d.relatedObject.length;
c++){var b=d.relatedObject[c];
b.parent=d.parent+ZaTree.SEPERATOR+ZaMsg.OVP_related;
e.addChild(b)
}return e
};
ZaTree.prototype._getDefaultRecentObjects=function(e){var d=new ZaTreeItemData({parent:e.parent,id:e.id+"_recent",text:ZaMsg.OVP_recent});
e.addChild(d);
for(var c=0;
c<e.recentObject.length;
c++){var b=e.recentObject[c];
b.parent=e.parent+ZaTree.SEPERATOR+ZaMsg.OVP_recent;
d.addChild(b)
}return d
};
ZaTree.prototype._buildNodeItem=function(m,g,n){var b,c,p,l;
var f;
if(m.text==ZaMsg.OVP_home){f="homeRootOverviewHeader"
}else{if(g){f="rootOverviewHeader"
}else{f="overviewHeader"
}}l=new ZaTreeItem({parent:this,className:f,id:m.id,forceNotifySelection:true});
l.enableSelection(false);
l.setText(m.text);
l.setImage(m.image);
l.setData(ZaOverviewPanelController._TID,m.mappingId);
l.setData("dataItem",m);
for(p in m._data){l.setData(p,m._data[p])
}var k,h,d;
for(k=0;
k<m.childrenData.size();
k++){var e=m.childrenData.get(k);
if(g){if(e.text==ZaMsg.OVP_related){continue
}if(e.text==ZaMsg.OVP_recent){continue
}}if(e.forceNode!==undefined){d=e.forceNode
}else{d=e.childrenData.size()>0?true:false
}b=new ZaTreeItem({parent:l,className:e.className,id:e.id,forceNode:d});
b.setCount(e.count);
b.setText(e.text);
b.setImage(e.image);
b.setData(ZaOverviewPanelController._TID,e.mappingId);
b.setData("dataItem",e);
if(n){var o=(AjxEnv.isIE)?DwtEvent.ONMOUSELEAVE:DwtEvent.ONMOUSEOUT;
b.addListener(DwtEvent.ONMOUSEDOWN,new AjxListener(b,ZaTree._highlightItemOn));
b.addListener(DwtEvent.ONMOUSEUP,new AjxListener(b,ZaTree._highlightItemOff));
b.addListener(o,new AjxListener(b,ZaTree._highlightItemOff))
}for(p in e._data){b.setData(p,e._data[p])
}}return l
};
ZaTree._highlightItemOff=function(c){var b=this;
b._setSelected(false)
};
ZaTree._highlightItemOn=function(c){var b=this;
b._setSelected(true)
};
ZaTree.prototype._itemClicked=function(m,g){var f;
var h=this._selectedItems.getArray();
var c=this._selectedItems.size();
var k=m.getData("dataItem");
var b=k.isShowHistory;
var e=k.isAlias();
if(e){var j=k.image;
k=this.getTreeItemDataByPath(k.getRealPath());
if(!k.image){k.image=j
}this._updateHistoryObj(k)
}if(k.isLeaf()&&!e){if(c>0){for(f=0;
f<c;
f++){h[f]._setSelected(false)
}this._notifyListeners(DwtEvent.SELECTION,this._selectedItems.getArray(),DwtTree.ITEM_DESELECTED,g,this._selEv);
this._selectedItems.removeAll()
}this._selectedItems.add(m);
if(m._setSelected(true)){this._updateHistory(m,true,b);
this._notifyListeners(DwtEvent.SELECTION,[m],DwtTree.ITEM_SELECTED,g,this._selEv)
}}else{var l;
if(!k.isLeaf()){l=k
}else{l=k.parentObject
}this.buildTree(l);
this._selectedItems.removeAll();
var d;
if(k.isLeaf()){d=this.getTreeItemByPath(this.getABPath(k))
}else{d=this._getSelectedItem(this.getCurrentRootItem())
}this._selectedItems.add(d);
if(d._setSelected(true)){if(!e){if(k.isLeaf()){this._updateHistory(d,true,b)
}else{this._updateHistory(this.getCurrentRootItem(),true,b)
}}else{this._updateHistory(m,true,b)
}this._notifyListeners(DwtEvent.SELECTION,[d],DwtTree.ITEM_SELECTED,g,this._selEv)
}if(l.callback&&l.callback instanceof AjxCallback){l.callback.run()
}}};
ZaTree.prototype._notifyListeners=function(h,b,f,d,c,g,e){if(this.isListenerRegistered(h)){if(d){DwtUiEvent.copy(c,d)
}c.items=b;
if(b.length==1){c.item=b[0]
}c.detail=f;
c.kbNavEvent=g;
c.refresh=e;
this.notifyListeners(h,c);
if(h==DwtEvent.SELECTION){this.shell.notifyGlobalSelection(c)
}}};
ZaTree.prototype._updateHistory=function(d,h,b){var g=d.getText();
var c=d.getData("dataItem");
var f=this.getABPath(c);
var e=new ZaHistory(f,g,undefined,b);
ZaZimbraAdmin.getInstance().updateHistory(e,h)
};
ZaTree.prototype._updateHistoryObj=function(b){var l=b.text;
var h=ZaItem.ACCOUNT;
var m=this.getABPath(b);
switch(b.image){case"Account":h=ZaItem.ACCOUNT;
break;
case"COS":h=ZaItem.COS;
break;
case"Domain":h=ZaItem.DOMAIN;
break;
case"Resource":h=ZaItem.RESOURCE;
break;
case"DistributionList":h=ZaItem.DL;
break;
case"AccountAlias":h=ZaItem.ALIAS;
break;
case"Server":h=ZaItem.SERVER;
break;
case"RightObject":h=ZaItem.RIGHT;
break;
default:h=null
}var e=new ZaHistory(m,l,h);
var k=ZaZimbraAdmin.getInstance().getHistoryMgr();
k.addHistoryObj(e);
var d=k.getAllHistoryObj().getArray();
var c=null;
var f=null;
var j=[];
for(var g=d.length-1;
g>-1;
g--){if(d[g].type==ZaItem.ACCOUNT){f="Account"
}else{if(d[g].type==ZaItem.COS){f="COS"
}else{if(d[g].type==ZaItem.DOMAIN){f="Domain"
}else{if(d[g].type==ZaItem.RESOURCE){f="Resource"
}else{if(d[g].type==ZaItem.DL){f="DistributionList"
}else{if(d[g].type==ZaItem.ALIAS){f="AccountAlias"
}else{if(d[g].type==ZaItem.SERVER){f="Server"
}else{if(d[g].type==ZaItem.RIGHT){f="RightObject"
}}}}}}}}c=new ZaTreeItemData({text:d[g].displayName,type:1,image:f,forceNode:(g+1!=d.length),path:d[g].path});
j.push(c)
}b.recentObject=j
};
ZaTree.prototype.getABPath=function(e){var d=[];
var b=e;
while(b){d.unshift(b.text);
b=b.parentObject
}var c=this.getPathByArray(d);
return c
};
ZaTree.prototype.getPathByArray=function(b){if(b.length==0){return""
}return b.join(ZaTree.SEPERATOR)
};
ZaTree.prototype.getCurrentRootItem=function(){return this.currentRoot
};
ZaTree.prototype.getCurrentSelectedItems=function(){return this._selectedItems
};
ZaTree.prototype.clearItems=function(){var c=this.getItems();
var b=c.length;
for(var d=0;
d<b;
d++){this.removeChild(c[0])
}this._getContainerElement().innerHTML=""
};
ZaTree.getPathByArray=ZaTree.prototype.getPathByArray
}if(AjxPackage.define("zimbraAdmin.common.ZaCurrentAppBar")){ZaCurrentAppBar=function(c,b,d){DwtButton.call(this,c,"",b,Dwt.ABSOLUTE_STYLE);
this._removeUnwantedEvent();
this._currentPathItems=new Array();
this.menu=new ZaPopupMenu(this,"ActionMenu",null,[],ZaId.CURRENT_APP_BAR,ZaId.MENU_POP,[]);
this.menu.setWidth(Dwt.__checkPxVal(150,true));
this.actionButtons={};
this.itemElArray=[];
this.setMenu(this.menu);
this.setSettingImg();
this.clearTypeImg()
};
ZaCurrentAppBar.prototype=new DwtButton;
ZaCurrentAppBar.prototype.constructor=ZaCurrentAppBar;
ZaCurrentAppBar.defaultImg="Configure";
ZaCurrentAppBar.prototype.toString=function(){return"ZaCurrentAppBar"
};
ZaCurrentAppBar.prototype.TEMPLATE="admin.Widgets#ZaCurrentAppBar";
ZaCurrentAppBar.prototype.ACTION_ITEM_TEMPLATE="dwt.Widgets#ZToolbarItem";
ZaCurrentAppBar.prototype._createHtmlFromTemplate=function(b,c){DwtButton.prototype._createHtmlFromTemplate.call(this,b,c);
this._typeImgEl=document.getElementById(c.id+"_typeimg");
this._settingImgEl=document.getElementById(c.id+"_settingimg");
this._actionEl=document.getElementById(c.id+"_action");
this._actionItemsEl=document.getElementById(c.id+"_actionitems")
};
ZaCurrentAppBar.prototype.setSettingImg=function(c){if(!this._settingImgEl){return
}var b=c||ZaCurrentAppBar.defaultImg;
this._settingImgEl.innerHTML=AjxImg.getImageHtml(b)
};
ZaCurrentAppBar.prototype.clearSettingImg=function(){if(!this._settingImgEl){return
}this._settingImgEl.innerHTML=""
};
ZaCurrentAppBar.prototype.setTypeImg=function(b){if(!this._typeImgEl){return
}if(!b){return
}this._typeImgEl.innerHTML=AjxImg.getImageHtml(b);
if(!Dwt.getVisible(this._typeImgEl)){Dwt.setVisible(this._typeImgEl,true)
}};
ZaCurrentAppBar.prototype.clearTypeImg=function(){if(!this._typeImgEl){return
}this._typeImgEl.innerHTML="";
if(Dwt.getVisible(this._typeImgEl)){Dwt.setVisible(this._typeImgEl,false)
}};
ZaCurrentAppBar.prototype.setText=function(d){d=AjxStringUtil.htmlEncode(d);
var e="";
var b=d.split(ZaTree.SEPERATOR);
this._currentPathItems=b;
for(var c=0;
c<b.length;
c++){e+=this._getSinglePathItem(b[c]);
if(c!=b.length-1){e+="-"
}}DwtButton.prototype.setText.call(this,e)
};
ZaCurrentAppBar.prototype.setActionButton=function(b,c){if(AjxUtil.isEmpty(b)){this._clearActionButton()
}else{this._addActionButton(b,c)
}};
ZaCurrentAppBar.prototype._addActionButton=function(g,h){this._clearActionButton();
var c;
if(AjxUtil.isEmpty(h)){for(var d in g){c=this._createActionButton(g[d].id,g[d].imageId,g[d].caption,g[d].disImageId,g[d].tt,true,g[d].className,g[d].type,g[d].menuOpList);
c.addSelectionListener(g[d].listener)
}}else{var d;
for(var e in h){d=h[e];
if(g[d]){c=this._createActionButton(g[d].id,g[d].imageId,g[d].caption,g[d].disImageId,g[d].tt,true,g[d].className,g[d].type,g[d].menuOpList);
c.addSelectionListener(g[d].listener)
}}}var f=Dwt.getBounds(this._actionItemsEl).width;
this.setActionItemWidth(f)
};
ZaCurrentAppBar.prototype._createActionButton=function(g,d,n,m,c,h,j,k,f){if(!j){j="DwtToolbarButton"
}var l=this.actionButtons[g]=new ZaToolBarButton({parent:this,className:j,id:ZaId.getButtonId("ZaCurrentAppBar",ZaOperation.getStringName(g))});
if(d){l.setImage(d)
}if(n){l.setText(n)
}if(c){l.setToolTipContent(c)
}l.setEnabled((h)?true:false);
l.setData("_buttonId",g);
var e=this._createActionItemContainer();
e.appendChild(l.getHtmlElement());
this._addActionItem(e);
return l
};
ZaCurrentAppBar.prototype._createActionItemContainer=function(){var e=this.itemElArray.length+1;
var f=[this._htmlElId,"item",e].join("_");
var d={id:this._htmlElId,itemId:f};
var c=AjxTemplate.expand(this.ACTION_ITEM_TEMPLATE,d);
var b=AjxStringUtil.calcDIV();
b.innerHTML=c;
return b.firstChild.rows[0].cells[0]
};
ZaCurrentAppBar.prototype._addActionItem=function(c){var b=this.itemElArray.length;
this.itemElArray.splice(b,0,c);
this._actionItemsEl.appendChild(c)
};
ZaCurrentAppBar.prototype._clearActionButton=function(){for(var c=0;
c<this.itemElArray.length;
c++){this.itemElArray[c]=undefined
}this.itemElArray=[];
while(this._actionItemsEl.firstChild){var d=this._actionItemsEl.removeChild(this._actionItemsEl.firstChild);
d=null
}for(var b in this.actionButtons){this.actionButtons[b]=undefined
}this.actionButtons={};
this.setActionItemWidth(0)
};
ZaCurrentAppBar.prototype.setActionItemWidth=function(b){this._actionEl.style.width=Dwt.__checkPxVal(b)
};
ZaCurrentAppBar.prototype.enableButton=function(c,b){if(!this.actionButtons[c]){return
}this.actionButtons[c].setEnabled(b)
};
ZaCurrentAppBar.spanItemClass="";
ZaCurrentAppBar.prototype._getSinglePathItem=function(c){var d=new Array(10);
var b=0;
d[b++]="<span class=";
d[b++]=ZaCurrentAppBar.spanItemClass;
d[b++]=">";
d[b++]=c;
d[b++]="</span>";
return d.join("")
};
ZaCurrentAppBar.prototype.popup=function(e){e=e||this.getMenu();
if(!e){return
}var n=e.parent;
var j=n.getBounds();
var m=e.shell.getSize();
var b=e.getSize();
var o=n.getHtmlElement();
var d=Dwt.toWindow(o,0,0);
var c=(o.style.borderLeftWidth=="")?0:parseInt(o.style.borderLeftWidth);
var l;
var h=n._dropDownEl;
if(!h){l=d.x+c
}else{var f=Dwt.toWindow(h,0,0);
l=f.x+20
}l=((l-b.x)>=0)?l-b.x:l;
if(l>13){l=l-13
}var k;
var g=(o.style.borderTopWidth=="")?0:parseInt(o.style.borderTopWidth);
g+=(o.style.borderBottomWidth=="")?0:parseInt(o.style.borderBottomWidth);
k=d.y+j.height+g;
e.popup(0,l,k)
};
ZaCurrentAppBar.prototype.setDisplayState=function(c,b){if(c==DwtControl.HOVER||c==DwtControl.ACTIVE||c==DwtControl.FOCUSED){c=DwtControl.NORMAL
}if(this._selected&&c!=DwtControl.SELECTED&&!b){c=[DwtControl.SELECTED,c].join(" ")
}DwtLabel.prototype.setDisplayState.call(this,c)
};
ZaCurrentAppBar.prototype._isDropDownEvent=function(d){if(this._dropDownEventsEnabled&&this._dropDownEl){var c=d.docX;
if(this._settingImgEl){var b=Dwt.toWindow(this._settingImgEl,0,0,window).x;
if(c>=b){return true
}}}return false
};
ZaCurrentAppBar.prototype._handleClick=function(c){var b=DwtShell.mouseEvent;
b.setFromDhtmlEvent(c);
b._stopPropagation=true;
b._returnValue=true;
b.setToDhtmlEvent(c);
return false
};
ZaCurrentAppBar.prototype._removeUnwantedEvent=function(){var c=[].concat(AjxEnv.isIE?[DwtEvent.ONMOUSEENTER,DwtEvent.ONMOUSELEAVE]:[DwtEvent.ONMOUSEOVER,DwtEvent.ONMOUSEOUT]);
for(var b=0;
b<c.length;
b++){this.removeListener(c[b],this._listeners[c[b]])
}};
ZaCurrentAppBar.prototype.updateMenu=function(f,d){var b=this.getMenu();
var c=false;
if(b){c=b.isPoppedUp();
this.setMenu();
this.menu=null;
try{b.dispose();
delete b
}catch(e){}}if(f){this.menu=new ZaPopupMenu(this,"ActionMenu",null,f,ZaId.CURRENT_APP_BAR,ZaId.MENU_POP,d);
this.menu.setWidth(Dwt.__checkPxVal(150,true));
this.setSettingImg();
this.setMenu(this.menu)
}else{this.clearSettingImg()
}if(c){this.popup()
}};
ZaCurrentAppBar.prototype.getMenu=function(){return this.menu
}
}if(AjxPackage.define("zimbraAdmin.common.ZaHistoryMgr")){ZaHistoryMgr=function(){this._history=new AjxVector();
this._historyObj=new AjxVector();
this._evtMgr=new AjxEventMgr();
this._currentLocation=0
};
ZaHistoryMgr.MAX_HISTROY_OBJ=5;
ZaHistoryMgr.prototype.toString=function(){return"ZaHistoryMgr"
};
ZaHistoryMgr.prototype.constructor=ZaHistoryMgr;
ZaHistoryMgr.prototype.addHistory=function(c){var b=this._history.getLast();
if(b&&b.equal(c)){return
}if(window.console&&window.console.log){window.console.log("Add History "+c.path)
}this._history.add(c);
this._currentLocation=this._history.size()-1;
this._evtMgr.notifyListeners(ZaEvent.L_MODIFY,this._history)
};
ZaHistoryMgr.prototype.findHistoryByName=function(b){var e=new AjxVector();
var c=0;
for(var d=this._history.size()-1;
d>=0&&c<20;
d--){if(!this._history.get(d).isShowInHistory){continue
}if(this._history.get(d).displayName==b){e.add(this._history.get(d))
}c++
}return e
};
ZaHistoryMgr.prototype.deleteHistoryObjByName=function(b){for(var c=0;
c<this._historyObj.size();
c++){if(this._historyObj.get(c).displayName==b){return this._historyObj.removeAt(c)
}}};
ZaHistoryMgr.prototype.refreshHistory=function(){this._evtMgr.notifyListeners(ZaEvent.L_MODIFY,this._history)
};
ZaHistoryMgr.prototype.addHistoryObj=function(c){if(AjxUtil.isEmpty(c.type)){return
}if(!ZaHistoryMgr.isAllowedRecentedObject(c.path)){return
}var b=this._historyObj.get(this._historyObj.size()-1);
if(b&&b.path==c.path){return
}var d=this.findHistoryObj(c);
if(d>-1){this._historyObj.removeAt(d)
}if(this._historyObj.size()+1>ZaHistoryMgr.MAX_HISTROY_OBJ){this._historyObj.removeAt(0)
}this._historyObj.add(c)
};
ZaHistoryMgr.prototype.findHistoryObj=function(c){if(!c){return -1
}for(var b=0;
b<this._historyObj._array.length;
b++){if(this._historyObj._array[b].displayName==c.displayName){return b
}}return -1
};
ZaHistoryMgr.isAllowedRecentedObject=function(h){var d=false;
var g=ZaTree.getPathItems(h);
var b;
var f=ZaHistoryMgr.getAllowedRecenctObject();
for(var e=0;
e<f.length;
e++){b=ZaTree.getPathItems(f[e]);
for(var c=0;
c<b.length;
c++){if(g[c]!=b[c]){break
}}if(c==b.length){d=true;
break
}}return d
};
ZaHistoryMgr.getAllowedRecenctObject=function(){if(!ZaHistoryMgr._allowedRecentObject){ZaHistoryMgr._allowedRecentObject=[[ZaMsg.OVP_home,ZaMsg.OVP_manageAccounts].join(ZaTree.SEPERATOR),[ZaMsg.OVP_home,ZaMsg.OVP_configure].join(ZaTree.SEPERATOR)]
}return ZaHistoryMgr._allowedRecentObject
};
ZaHistoryMgr.prototype.removeHistory=function(){var b=this._history.size();
if(b==1){return false
}for(var c=1;
c<b;
c++){this._history._array[c]=null
}this._history._array.length=1;
this._currentLocation=0;
this._evtMgr.notifyListeners(ZaEvent.L_MODIFY,this._history);
return true
};
ZaHistoryMgr.prototype.getAllHistory=function(){return this._history
};
ZaHistoryMgr.prototype.getAllHistoryObj=function(){return this._historyObj
};
ZaHistoryMgr.prototype.getPrevious=function(){if(!this.isPrevious()){return""
}return this._history.get(--this._currentLocation)
};
ZaHistoryMgr.prototype.getNext=function(){if(!this.isNext()){return""
}return this._history.get(++this._currentLocation)
};
ZaHistoryMgr.prototype.isPrevious=function(){if(this._currentLocation==0){return false
}else{return true
}};
ZaHistoryMgr.prototype.isNext=function(){if(this._currentLocation==this._history.size()-1){return false
}else{return true
}};
ZaHistoryMgr.prototype.getLatestHistory=function(){return this._history.getLast()
};
ZaHistoryMgr.prototype.getCurrentyHistory=function(){return this._history.get(this._currentLocation)
};
ZaHistoryMgr.prototype.addChangeListener=function(b){return this._evtMgr.addListener(ZaEvent.L_MODIFY,b)
};
ZaHistoryMgr.prototype.removeChangeListener=function(b){return this._evtMgr.removeListener(ZaEvent.L_MODIFY,b)
};
ZaHistory=function(f,c,e,b,d){this.path=f;
this.displayName=c;
this.type=e;
this.isShowInHistory=(b===undefined)?true:b;
this.viewMethod=(d instanceof AjxCallback)?d:new AjxCallback(this,this.defaultGoToView);
this.enabled=true
};
ZaHistory.prototype.goToView=function(b){if(this.viewMethod){this.viewMethod.run(b)
}};
ZaHistory.prototype.defaultGoToView=function(c){var b=ZaZimbraAdmin.getInstance().getOverviewPanelController().getOverviewPanel().getFolderTree();
b.setSelectionByPath(this.path,false,undefined,undefined,undefined,c)
};
ZaHistory.prototype.equal=function(b){return this.path==b.path
};
ZaHistory.prototype.setEnabled=function(b){this.enabled=b
};
ZaHistory.prototype.getEnabled=function(){return this.enabled
}
}if(AjxPackage.define("zimbraAdmin.common.ZaUploader")){ZaUploader=function(){};
ZaUploader.prototype.constructor=ZaUploader;
ZaUploader.prototype.toString=function(){return"ZaUploader"
};
ZaUploader.prototype._upload=function(fileElementIds,url,callback){var cnt=fileElementIds.length;
for(var i=0;
i<cnt;
i++){var element=document.getElementById(fileElementIds[i]);
if(element&&element.files&&element.files.length>0){var file=element.files[0];
if(file){var fileName=file.name||file.fileName;
var req=new XMLHttpRequest();
req.open("POST",url,true);
req.setRequestHeader("Cache-Control","no-cache");
req.setRequestHeader("X-Requested-With","XMLHttpRequest");
req.setRequestHeader("Content-Type",(file.type||"application/octet-stream")+";");
req.setRequestHeader("Content-Disposition",'attachment; filename="'+AjxUtil.convertToEntities(fileName)+'"');
if(window.csrfToken){req.setRequestHeader("X-Zimbra-Csrf-Token",window.csrfToken)
}var uploadResults=[];
req.onreadystatechange=function(req,fileName,callback){if(req.readyState===4){var response=null;
var aid=null;
var status=req.status;
if(status===200){var resp=eval("["+req.responseText+"]");
response=resp.length&&resp[2];
if(response){response=response[0];
if(response){uploadResults.push({aid:response.aid,filename:fileName});
if(i==cnt){callback.run(status,uploadResults)
}}}}else{callback.run(status,uploadResults)
}}}.bind(this,req,fileName,callback);
req.send(file);
delete req
}else{throw (new AjxException(ZaMsg.ERROR_INVALID_FILE_NAME,AjxException.UNKNOWN,"ZaUploader.prototype.upload"))
}}}};
ZaUploader.upload=function(f,b,e){if(!AjxUtil.isArrayLike(b)){b=[b]
}if(AjxEnv.supportsHTML5File){var d=new ZaUploader();
d._upload(b,appContextPath+"/../service/upload?fmt=extended,raw",f)
}else{this.setUploadManager(new AjxPost(this.getUploadFrameId()));
var c=this.getUploadManager();
window._uploadManager=c;
c.execute(new AjxCallback(this,function(h,g){var j=[];
if(AjxUtil.isArrayLike(g)){j=g
}else{var m="";
if(b[0]){var l=document.getElementById(b[0]);
var k=l.files[0];
if(k){m=k.name||k.fileName
}}j.push({aid:g,filename:m})
}f.run(h,j)
}),document.getElementById(e));
return
}}
}if(AjxPackage.define("zimbraAdmin.common.ZaOverviewPanelController")){ZaOverviewPanelController=function(c,b){ZaController.call(this,c,b,"ZaOverviewPanelController");
this._init(c,b);
this._setView()
};
ZaOverviewPanelController.prototype=new ZaController;
ZaOverviewPanelController.prototype.constructor=ZaOverviewPanelController;
ZaOverviewPanelController.overviewTreeListeners=new Object();
ZaOverviewPanelController.treeModifiers=new Array();
ZaOverviewPanelController._TID="TID";
ZaOverviewPanelController._OBJ_ID="OBJ_ID";
ZaOverviewPanelController.prototype.toString=function(){return"ZaOverviewPanelController"
};
ZaOverviewPanelController.prototype.getOverviewPanel=function(){if(!this._overviewPanel){this._setView()
}return this._overviewPanel
};
ZaOverviewPanelController.prototype.handleCosCreation=function(b){return
};
ZaOverviewPanelController.prototype.handleCosChange=function(b){return
};
ZaOverviewPanelController.prototype.handleCosRemoval=function(b){return
};
ZaOverviewPanelController.prototype.handleSearchFinished=function(b){this.refreshSearchTree(b)
};
ZaOverviewPanelController.prototype.removeCosTreeItems=function(b){return
};
ZaOverviewPanelController.prototype.searchDomains=function(){var g=Dwt.getNextId();
var b=ZaApp.getInstance().getDomainListController();
b._currentQuery="";
if(!ZaZimbraAdmin.hasGlobalDomainListAccess()){var d=ZaApp.getInstance()._domainNameList;
if(!d||!(d instanceof Array)||d.length==0){ZaApp.getInstance()._domainList=new ZaItemList(ZaDomain);
return
}if(d&&d instanceof Array){for(var c=0;
c<d.length;
c++){b._currentQuery+="("+ZaDomain.A_domainName+"="+d[c]+")"
}if(d.length>1){b._currentQuery="(|"+b._currentQuery+")"
}}}var f={query:b._currentQuery,types:[ZaSearch.DOMAINS],sortBy:ZaDomain.A_domainName,offset:"0",sortAscending:"1",limit:ZaDomain.MAXSEARCHRESULTS,attrs:[ZaDomain.A_description,ZaDomain.A_domainName,ZaDomain.A_zimbraDomainStatus,ZaItem.A_zimbraId,ZaDomain.A_domainType]};
var e=ZaSearch.searchDirectory(f);
this.domainSearchCallback(f,e)
};
ZaOverviewPanelController.prototype.domainSearchCallback=function(f,e){try{if(!e){throw (new AjxException(ZaMsg.ERROR_EMPTY_RESPONSE_ARG,AjxException.UNKNOWN,"ZaOverviewPanelController.prototype.domainSearchCallback"))
}ZaSearch.TOO_MANY_RESULTS_FLAG=false;
var b=e.Body.SearchDirectoryResponse;
var d=new ZaItemList(ZaDomain);
d.loadFromJS(b);
if(b.more){ZaSettings.HAVE_MORE_DOMAINS=true
}this.updateDomainList(d)
}catch(c){if(c.code!=ZmCsfeException.MAIL_QUERY_PARSE_ERROR){ZaApp.getInstance().getCurrentController()._handleException(c,"ZaOverviewPanelController.prototype.searchCallback")
}else{ZaApp.getInstance().getCurrentController().popupErrorDialog(ZaMsg.queryParseError,c)
}}};
ZaOverviewPanelController.prototype.updateSavedSearchTreeList=function(){var p=this._overviewPanel.getFolderTree();
var h=ZaTree.getPathByArray([ZaMsg.OVP_home,ZaMsg.OVP_search,ZaMsg.OVP_savedSearch]);
p.removeAllChild(h);
try{var o=ZaApp.getInstance().getSavedSearchList();
if(o&&o.length){var d=o.length;
for(var e=0;
e<d;
e++){var k=new ZaTreeItemData({parent:h,id:ZaId.getTreeItemId(ZaId.PANEL_APP,"currentSearch",null,e+1),text:o[e].name,buildPath:this.getSearchItemPath(),mappingId:ZaZimbraAdmin._SEARCH_HOME_VIEW});
k.setData("name",o[e].name);
k.setData("query",o[e].query);
p.addTreeItemData(k)
}var g=p.getTreeItemByPath(h);
if(g){var m=p.getTreeItemDataByPath(h);
var b,f,c,n;
for(var j=0;
j<m.childrenData.size();
j++){f=m.childrenData.get(j);
if(f.forceNode!==undefined){c=f.forceNode
}else{c=f.childrenData.size()>0?true:false
}b=new ZaTreeItem({parent:g,className:"AdminTreeItem",id:f.id,forceNode:c});
b.setCount(f.count);
b.setText(f.text);
b.setImage(f.image);
b.setData(ZaOverviewPanelController._TID,f.mappingId);
b.setData("dataItem",f);
for(n in f._data){b.setData(n,f._data[n])
}}g.setExpanded(true)
}}}catch(l){this._handleException(l,"ZaOverviewPanelController.prototype._buildNewFolderTree",null,false)
}return
};
ZaOverviewPanelController.prototype.updateDomainList=function(b){return
};
ZaOverviewPanelController.prototype.setCurrentDomain=function(b){this._currentDomain=b
};
ZaOverviewPanelController.prototype.getCurrentDomain=function(){return this._currentDomain
};
ZaOverviewPanelController.prototype._init=function(c,b){this._overviewPanel=null;
this._addressesTi=null;
this._configTi=null;
this._monitoringTi=null;
this._cosTi=null;
this._domainsTi=null;
this._serversTi=null;
this.statusTi=null;
this._savedSearchTi=null;
this._currentDomain="";
this._app=ZaApp.getInstance();
if(ZaSettings.ENABLED_UI_COMPONENTS[ZaSettings.DOMAIN_LIST_VIEW]||ZaSettings.ENABLED_UI_COMPONENTS[ZaSettings.CARTE_BLANCHE_UI]){this._domainsMap=new Object()
}if(ZaSettings.ENABLED_UI_COMPONENTS[ZaSettings.SERVER_LIST_VIEW]||ZaSettings.ENABLED_UI_COMPONENTS[ZaSettings.CARTE_BLANCHE_UI]){this._serversMap=new Object()
}if(ZaSettings.ENABLED_UI_COMPONENTS[ZaSettings.SERVER_STATS_VIEW]||ZaSettings.ENABLED_UI_COMPONENTS[ZaSettings.CARTE_BLANCHE_UI]){this._serversStatsMap=new Object()
}if(ZaSettings.ENABLED_UI_COMPONENTS[ZaSettings.COS_LIST_VIEW]||ZaSettings.ENABLED_UI_COMPONENTS[ZaSettings.CARTE_BLANCHE_UI]){this._cosMap=new Object()
}this._mailqMap=new Object();
if(ZaSettings.ENABLED_UI_COMPONENTS[ZaSettings.SAVE_SEARCH]||ZaSettings.ENABLED_UI_COMPONENTS[ZaSettings.CARTE_BLANCHE_UI]){this._savedSearchMapArr=[]
}};
ZaOverviewPanelController.prototype._setView=function(){this._overviewPanel=new ZaOverviewPanel({parent:this._container,className:"OverviewPanel",posStyle:DwtControl.ABSOLUTE_STYLE,id:ZaId.PANEL_APP});
this._overviewPanel.setScrollStyle(DwtControl.SCROLL);
ZaSearch.loadPredefinedSearch();
this._buildNewFolderTree();
this._overviewPanel.zShow(true)
};
ZaId.PANEL_HOME="Home";
ZaOverviewPanelController.prototype._buildNewFolderTree=function(){var v=this._overviewPanel.getFolderTree();
var q;
var z=new AjxListener(this,this._overviewTreeListener);
v.addSelectionListener(z);
var w=ZaApp.getInstance().getPostQList().getArray();
var f=ZaSettings.ENABLED_UI_COMPONENTS[ZaSettings.CARTE_BLANCHE_UI];
var G=ZaSettings.ENABLED_UI_COMPONENTS[ZaSettings.CARTE_BLANCHE_UI];
var p=ZaSettings.ENABLED_UI_COMPONENTS[ZaSettings.CARTE_BLANCHE_UI];
var x=ZaSettings.ENABLED_UI_COMPONENTS[ZaSettings.CARTE_BLANCHE_UI];
var c=ZaSettings.ENABLED_UI_COMPONENTS[ZaSettings.CARTE_BLANCHE_UI];
if(!f){for(var C=0;
C<ZaSettings.OVERVIEW_MONITORING_ITEMS.length;
C++){if(ZaSettings.ENABLED_UI_COMPONENTS[ZaSettings.OVERVIEW_MONITORING_ITEMS[C]]){f=true;
break
}}}if(!G){for(var C=0;
C<ZaSettings.OVERVIEW_MANAGER_ACCOUNT_ITEMS.length;
C++){if(ZaSettings.ENABLED_UI_COMPONENTS[ZaSettings.OVERVIEW_MANAGER_ACCOUNT_ITEMS[C]]){G=true;
break
}}}if(!p){for(var C=0;
C<ZaSettings.OVERVIEW_ADMIN_ITEMS.length;
C++){if(ZaSettings.ENABLED_UI_COMPONENTS[ZaSettings.OVERVIEW_ADMIN_ITEMS[C]]){p=true;
break
}}}if(!x){for(var C=0;
C<ZaSettings.OVERVIEW_TOOLS_ITEMS.length;
C++){if(ZaSettings.ENABLED_UI_COMPONENTS[ZaSettings.OVERVIEW_TOOLS_ITEMS[C]]){x=true;
break
}}}if(!c){for(var C=0;
C<ZaSettings.HELP_CENTER_ITEMS.length;
C++){if(ZaSettings.ENABLED_UI_COMPONENTS[ZaSettings.HELP_CENTER_ITEMS[C]]){c=true;
break
}}}var F=new ZaTreeItemData({parent:"",id:ZaId.getTreeItemId(ZaId.PANEL_APP,ZaId.PANEL_HOME,true),text:ZaMsg.OVP_home,mappingId:ZaZimbraAdmin._HOME_VIEW,image:"Home"});
ZaOverviewPanelController.overviewTreeListeners[ZaZimbraAdmin._HOME_VIEW]=ZaOverviewPanelController.homeTreeListener;
v.setRootData(F);
if(f){var K=new ZaTreeItemData({parent:ZaMsg.OVP_home,id:ZaId.getTreeItemId(ZaId.PANEL_APP,ZaId.PANEL_HOME,null,"monHV"),text:ZaMsg.OVP_monitor,defaultSelectedItem:1,className:"AdminHomeTreeItem",mappingId:ZaZimbraAdmin._MONITOR_HOME_VIEW,image:"Monitor"});
v.addTreeItemData(K);
if(ZaSettings.ENABLED_UI_COMPONENTS[ZaSettings.GLOBAL_STATUS_VIEW]||ZaSettings.ENABLED_UI_COMPONENTS[ZaSettings.CARTE_BLANCHE_UI]){var n=new ZaTreeItemData({parent:ZaTree.getPathByArray([ZaMsg.OVP_home,ZaMsg.OVP_monitor]),id:ZaId.getTreeItemId(ZaId.PANEL_APP,"monHV",null,"overviewStatusHV"),text:ZaMsg.OVP_status,mappingId:ZaZimbraAdmin._SERVER_STATUS_VIEW});
v.addTreeItemData(n);
ZaOverviewPanelController.overviewTreeListeners[ZaZimbraAdmin._SERVER_STATUS_VIEW]=ZaOverviewPanelController.statusTreeListener
}if(ZaSettings.ENABLED_UI_COMPONENTS[ZaSettings.SERVER_STATS_VIEW]||ZaSettings.ENABLED_UI_COMPONENTS[ZaSettings.CARTE_BLANCHE_UI]){this.addSubTabsToParentTreeItem(K,ZaGlobalStatsView.prototype.getTabChoices(),ZaZimbraAdmin._SERVER_STATISTICS_VIEW,true);
ZaOverviewPanelController.overviewTreeListeners[ZaZimbraAdmin._SERVER_STATISTICS_VIEW]=ZaOverviewPanelController.statsTreeListener;
n=new ZaTreeItemData({parent:ZaTree.getPathByArray([ZaMsg.OVP_home,ZaMsg.OVP_monitor]),id:ZaId.getTreeItemId(ZaId.PANEL_APP,"monHV",null,"serverListForStatisticsHV"),text:ZaMsg.OVP_statistics,canShowOnRoot:false,forceNode:false,mappingId:ZaZimbraAdmin._SERVER_LIST_FOR_STATISTICS_VIEW});
v.addTreeItemData(n);
ZaOverviewPanelController.overviewTreeListeners[ZaZimbraAdmin._SERVER_LIST_FOR_STATISTICS_VIEW]=ZaOverviewPanelController.serverListForStatisticsTreeListener
}if(ZaSettings.ENABLED_UI_COMPONENTS[ZaSettings.MAILQ_VIEW]||ZaSettings.ENABLED_UI_COMPONENTS[ZaSettings.CARTE_BLANCHE_UI]){try{if(w&&w.length){var B=w.length;
var L;
if(B>1){L=new ZaTreeItemData({parent:ZaTree.getPathByArray([ZaMsg.OVP_home,ZaMsg.OVP_monitor]),id:ZaId.getTreeItemId(ZaId.PANEL_APP,"monHV",null,"postQueueHV"),text:ZaMsg.OVP_postq,mappingId:ZaZimbraAdmin._POSTQ_VIEW});
v.addTreeItemData(L);
for(var j=0;
j<B;
j++){var J=new ZaTreeItemData({parent:ZaTree.getPathByArray([ZaMsg.OVP_home,ZaMsg.OVP_monitor,ZaMsg.OVP_postq]),id:DwtId._makeId(L.id,j+1),text:w[j].name,mappingId:ZaZimbraAdmin._POSTQ_BY_SERVER_VIEW});
J.setData(ZaOverviewPanelController._OBJ_ID,w[j].id);
this._mailqMap[w[j].id]=J;
v.addTreeItemData(J)
}ZaOverviewPanelController.overviewTreeListeners[ZaZimbraAdmin._POSTQ_VIEW]=ZaOverviewPanelController.postqTreeListener
}else{L=new ZaTreeItemData({parent:ZaTree.getPathByArray([ZaMsg.OVP_home,ZaMsg.OVP_monitor]),id:ZaId.getTreeItemId(ZaId.PANEL_APP,"monHV",null,"postQueueHV"),text:ZaMsg.OVP_postq,mappingId:ZaZimbraAdmin._POSTQ_BY_SERVER_VIEW});
L.setData(ZaOverviewPanelController._OBJ_ID,w[0].id);
v.addTreeItemData(L)
}ZaOverviewPanelController.overviewTreeListeners[ZaZimbraAdmin._POSTQ_BY_SERVER_VIEW]=ZaOverviewPanelController.postqByServerTreeListener
}}catch(E){this._handleException(E,"ZaOverviewPanelController.prototype._buildFolderTree",null,false)
}}}if(G){var I=new AjxCallback(this,ZaOverviewPanelController.manageAccountTreeListener);
var s=new ZaTreeItemData({parent:ZaMsg.OVP_home,id:ZaId.getTreeItemId(ZaId.PANEL_APP,ZaId.PANEL_HOME,null,"manActHV"),text:ZaMsg.OVP_manageAccounts,className:"AdminHomeTreeItem",callback:I,defaultSelectedItem:1,image:"ManageAccounts"});
v.addTreeItemData(s);
if(s){var b=ZaTree.getPathByArray([ZaMsg.OVP_home,ZaMsg.OVP_manageAccounts]);
if(ZaSettings.ENABLED_UI_COMPONENTS[ZaSettings.ACCOUNT_LIST_VIEW]||ZaSettings.ENABLED_UI_COMPONENTS[ZaSettings.CARTE_BLANCHE_UI]){var e=new ZaTreeItemData({parent:b,id:ZaId.getTreeItemId(ZaId.PANEL_APP,ZaId.PANEL_HOME,null,"actLstHV"),text:ZaMsg.OVP_accounts,count:0,canShowOnRoot:false,forceNode:false,mappingId:ZaZimbraAdmin._ACCOUNTS_LIST_VIEW});
e.setData("TreeItemType",ZaItem.ACCOUNT);
ZaOverviewPanelController.overviewTreeListeners[ZaZimbraAdmin._ACCOUNTS_LIST_VIEW]=ZaOverviewPanelController.accountListTreeListener;
v.addTreeItemData(e)
}if(ZaSettings.ENABLED_UI_COMPONENTS[ZaSettings.ALIAS_LIST_VIEW]||ZaSettings.ENABLED_UI_COMPONENTS[ZaSettings.CARTE_BLANCHE_UI]){var d=new ZaTreeItemData({parent:b,id:ZaId.getTreeItemId(ZaId.PANEL_APP,ZaId.PANEL_HOME,null,"aliaLstHV"),text:ZaMsg.OVP_aliases,count:0,canShowOnRoot:false,forceNode:false,mappingId:ZaZimbraAdmin._ALIASES_LIST_VIEW});
d.setData("TreeItemType",ZaItem.ALIAS);
v.addTreeItemData(d);
ZaOverviewPanelController.overviewTreeListeners[ZaZimbraAdmin._ALIASES_LIST_VIEW]=ZaOverviewPanelController.aliasListTreeListener
}if(ZaSettings.ENABLED_UI_COMPONENTS[ZaSettings.DL_LIST_VIEW]||ZaSettings.ENABLED_UI_COMPONENTS[ZaSettings.CARTE_BLANCHE_UI]){var A=new ZaTreeItemData({parent:b,id:ZaId.getTreeItemId(ZaId.PANEL_APP,ZaId.PANEL_HOME,null,"dlLstHV"),text:ZaMsg.OVP_distributionLists,count:0,canShowOnRoot:false,forceNode:false,mappingId:ZaZimbraAdmin._DISTRIBUTION_LISTS_LIST_VIEW});
A.setData("TreeItemType",ZaItem.DL);
v.addTreeItemData(A);
ZaOverviewPanelController.overviewTreeListeners[ZaZimbraAdmin._DISTRIBUTION_LISTS_LIST_VIEW]=ZaOverviewPanelController.dlListTreeListener
}if(ZaSettings.ENABLED_UI_COMPONENTS[ZaSettings.RESOURCE_LIST_VIEW]||ZaSettings.ENABLED_UI_COMPONENTS[ZaSettings.CARTE_BLANCHE_UI]){var D=new ZaTreeItemData({parent:b,id:ZaId.getTreeItemId(ZaId.PANEL_APP,ZaId.PANEL_HOME,null,"resLstHV"),text:ZaMsg.OVP_resources,count:0,canShowOnRoot:false,forceNode:false,mappingId:ZaZimbraAdmin._RESOURCE_VIEW});
D.setData("TreeItemType",ZaItem.RESOURCE);
v.addTreeItemData(D);
ZaOverviewPanelController.overviewTreeListeners[ZaZimbraAdmin._RESOURCE_VIEW]=ZaOverviewPanelController.resourceListTreeListener
}}}if(p){n=this._configure=new ZaTreeItemData({parent:ZaMsg.OVP_home,id:ZaId.getTreeItemId(ZaId.PANEL_APP,ZaId.PANEL_HOME,null,"adminHV"),text:ZaMsg.OVP_configure,defaultSelectedItem:1,className:"AdminHomeTreeItem",mappingId:ZaZimbraAdmin._ADMINISTRATION_HOME_VIEW,image:"Administration"});
v.addTreeItemData(n);
if(this._configure){q=ZaTree.getPathByArray([ZaMsg.OVP_home,ZaMsg.OVP_configure]);
if(!ZaZimbraAdmin.hasGlobalCOSSListAccess()){if(!ZaApp.getInstance()._domainNameList){ZaApp.getInstance()._domainNameList=ZaDomain.getEffectiveDomainList(ZaZimbraAdmin.currentAdminAccount.id)
}}if(!ZaZimbraAdmin.hasGlobalDomainListAccess()){if(!ZaApp.getInstance()._cosNameList){ZaApp.getInstance()._cosNameList=ZaCos.getEffectiveCosList(ZaZimbraAdmin.currentAdminAccount.id)
}}if(ZaSettings.ENABLED_UI_COMPONENTS[ZaSettings.COS_LIST_VIEW]||ZaSettings.ENABLED_UI_COMPONENTS[ZaSettings.CARTE_BLANCHE_UI]){n=new ZaTreeItemData({parent:q,id:ZaId.getTreeItemId(ZaId.PANEL_APP,ZaId.PANEL_CONFIGURATION,null,ZaId.TREEITEM_COS),text:ZaMsg.OVP_cos,canShowOnRoot:false,forceNode:false,mappingId:ZaZimbraAdmin._COS_LIST_VIEW});
v.addTreeItemData(n);
ZaOverviewPanelController.overviewTreeListeners[ZaZimbraAdmin._COS_LIST_VIEW]=ZaOverviewPanelController.cosListTreeListener
}if(ZaSettings.ENABLED_UI_COMPONENTS[ZaSettings.DOMAIN_LIST_VIEW]||ZaSettings.ENABLED_UI_COMPONENTS[ZaSettings.CARTE_BLANCHE_UI]){n=new ZaTreeItemData({parent:q,id:ZaId.getTreeItemId(ZaId.PANEL_APP,ZaId.PANEL_CONFIGURATION,null,ZaId.TREEITEM_DOMAINS),text:ZaMsg.OVP_domains,canShowOnRoot:false,forceNode:false,mappingId:ZaZimbraAdmin._DOMAINS_LIST_VIEW});
v.addTreeItemData(n);
ZaOverviewPanelController.overviewTreeListeners[ZaZimbraAdmin._DOMAINS_LIST_VIEW]=ZaOverviewPanelController.domainListTreeListener
}if(ZaSettings.ENABLED_UI_COMPONENTS[ZaSettings.SERVER_LIST_VIEW]||ZaSettings.ENABLED_UI_COMPONENTS[ZaSettings.CARTE_BLANCHE_UI]){try{var h=ZaApp.getInstance().getServerList().getArray();
if(h&&h.length){var B=h.length;
var g;
if(B>0){g=new ZaTreeItemData({parent:ZaTree.getPathByArray([ZaMsg.OVP_home,ZaMsg.OVP_configure]),id:ZaId.getTreeItemId(ZaId.PANEL_APP,ZaId.PANEL_CONFIGURATION,null,"serverHV"),text:ZaMsg.OVP_servers,canShowOnRoot:false,forceNode:false,mappingId:ZaZimbraAdmin._SERVERS_LIST_VIEW});
v.addTreeItemData(g);
ZaOverviewPanelController.overviewTreeListeners[ZaZimbraAdmin._SERVERS_LIST_VIEW]=ZaOverviewPanelController.serverListTreeListener
}else{g=new ZaTreeItemData({parent:ZaTree.getPathByArray([ZaMsg.OVP_home,ZaMsg.OVP_configure]),id:ZaId.getTreeItemId(ZaId.PANEL_APP,ZaId.PANEL_CONFIGURATION,null,"serverHV"),text:ZaMsg.OVP_serverSettings,image:"Server",mappingId:ZaZimbraAdmin._SERVER_VIEW});
g.setData(ZaOverviewPanelController._OBJ_ID,h[0].id);
v.addTreeItemData(g);
ZaOverviewPanelController.overviewTreeListeners[ZaZimbraAdmin._SERVER_VIEW]=ZaOverviewPanelController.serverTreeListener
}}}catch(E){this._handleException(E,"ZaOverviewPanelController.prototype._buildNewFolderTree",null,false)
}}if(ZaSettings.ENABLED_UI_COMPONENTS[ZaSettings.GLOBAL_CONFIG_VIEW]||ZaSettings.ENABLED_UI_COMPONENTS[ZaSettings.CARTE_BLANCHE_UI]){n=new ZaTreeItemData({parent:q,id:ZaId.getTreeItemId(ZaId.PANEL_APP,ZaId.PANEL_CONFIGURATION,null,ZaId.TREEITEM_GSET),text:ZaMsg.OVP_global,forceNode:true,mappingId:ZaZimbraAdmin._GLOBAL_SETTINGS});
n.addListener(ZaTreeEvent.ONDESTROY,new AjxListener(this,this.saveBeforeExit));
v.addTreeItemData(n);
ZaOverviewPanelController.overviewTreeListeners[ZaZimbraAdmin._GLOBAL_SETTINGS]=ZaOverviewPanelController.globalSettingsTreeListener
}if(ZaSettings.ENABLED_UI_COMPONENTS[ZaSettings.ZIMLET_LIST_VIEW]||ZaSettings.ENABLED_UI_COMPONENTS[ZaSettings.CARTE_BLANCHE_UI]){n=new ZaTreeItemData({parent:q,id:ZaId.getTreeItemId(ZaId.PANEL_APP,ZaId.PANEL_CONFIGURATION,null,ZaId.TREEITEM_ZIMLETS),text:ZaMsg.OVP_zimlets,canShowOnRoot:false,forceNode:false,mappingId:ZaZimbraAdmin._ZIMLET_LIST_VIEW});
v.addTreeItemData(n);
ZaOverviewPanelController.overviewTreeListeners[ZaZimbraAdmin._ZIMLET_LIST_VIEW]=ZaOverviewPanelController.zimletListTreeListener
}if(ZaSettings.ENABLED_UI_COMPONENTS[ZaSettings.ADMIN_ZIMLET_LIST_VIEW]||ZaSettings.ENABLED_UI_COMPONENTS[ZaSettings.CARTE_BLANCHE_UI]){n=new ZaTreeItemData({parent:q,id:ZaId.getTreeItemId(ZaId.PANEL_APP,ZaId.PANEL_CONFIGURATION,null,ZaId.TREEITEM_ADMINEXT),text:ZaMsg.OVP_adminZimlets,canShowOnRoot:false,forceNode:false,mappingId:ZaZimbraAdmin._ADMIN_ZIMLET_LIST_VIEW});
v.addTreeItemData(n);
ZaOverviewPanelController.overviewTreeListeners[ZaZimbraAdmin._ADMIN_ZIMLET_LIST_VIEW]=ZaOverviewPanelController.adminExtListTreeListener
}}}if(x){n=new ZaTreeItemData({parent:ZaMsg.OVP_home,id:ZaId.getTreeItemId(ZaId.PANEL_APP,ZaId.PANEL_HOME,null,"magHV"),text:ZaMsg.OVP_toolMig,className:"AdminHomeTreeItem",defaultSelectedItem:1,mappingId:ZaZimbraAdmin._MIGRATION_HOME_VIEW,image:"ToolsAndMigration"});
v.addTreeItemData(n);
if(ZaSettings.ENABLED_UI_COMPONENTS[ZaSettings.DOWNLOADS_VIEW]||ZaSettings.ENABLED_UI_COMPONENTS[ZaSettings.CARTE_BLANCHE_UI]){n=new ZaTreeItemData({parent:ZaTree.getPathByArray([ZaMsg.OVP_home,ZaMsg.OVP_toolMig]),id:ZaId.getTreeItemId(ZaId.PANEL_APP,"magHV",null,"download"),text:ZaMsg.goToMigrationWiz,mappingId:ZaZimbraAdmin._DOWNLOAD_VIEW});
ZaOverviewPanelController.overviewTreeListeners[ZaZimbraAdmin._DOWNLOAD_VIEW]=ZaOverviewPanelController.downloadTreeListener;
v.addTreeItemData(n)
}}n=new ZaTreeItemData({parent:ZaMsg.OVP_home,id:ZaId.getTreeItemId(ZaId.PANEL_APP,ZaId.PANEL_HOME,null,"searchHV"),text:ZaMsg.OVP_search,className:"AdminHomeTreeItem",mappingId:ZaZimbraAdmin._SEARCH_HOME_VIEW,image:"SearchAll"});
ZaOverviewPanelController.overviewTreeListeners[ZaZimbraAdmin._SEARCH_HOME_VIEW]=ZaOverviewPanelController.newSearchListTreeListener;
v.addTreeItemData(n);
q=ZaTree.getPathByArray([ZaMsg.OVP_home,ZaMsg.OVP_search]);
var o=new ZaTreeItemData({parent:q,id:ZaId.getTreeItemId(ZaId.PANEL_APP,"searchHV",null,"currentSearch"),text:ZaMsg.OVP_search,defaultSelectedItem:1,image:"SearchAll",mappingId:ZaZimbraAdmin._SEARCH_HOME_VIEW});
ZaOverviewPanelController.overviewTreeListeners[ZaZimbraAdmin._SEARCH_HOME_VIEW]=ZaOverviewPanelController.newSearchListTreeListener;
v.addTreeItemData(o);
this.setSearchItemPath(ZaTree.getPathByArray([ZaMsg.OVP_home,ZaMsg.OVP_search,ZaMsg.OVP_search]));
n=new ZaTreeItemData({parent:ZaTree.getPathByArray([ZaMsg.OVP_home,ZaMsg.OVP_search,ZaMsg.OVP_search]),id:ZaId.getTreeItemId(ZaId.PANEL_APP,"currentSearch",null,"allResult"),text:ZaMsg.OVP_allSearchResult,mappingId:ZaZimbraAdmin._SEARCH_RESULT_VIEW});
v.addTreeItemData(n);
ZaOverviewPanelController.overviewTreeListeners[ZaZimbraAdmin._SEARCH_RESULT_VIEW]=ZaOverviewPanelController.searchResultTreeListener;
n=new ZaTreeItemData({parent:ZaTree.getPathByArray([ZaMsg.OVP_home,ZaMsg.OVP_search,ZaMsg.OVP_search]),id:ZaId.getTreeItemId(ZaId.PANEL_APP,"currentSearch",null,"accountResult"),text:ZaMsg.OVP_accountSearchResult,mappingId:ZaZimbraAdmin._SEARCH_RESULT_VIEW});
n.setData("TreeItemType",ZaItem.ACCOUNT);
v.addTreeItemData(n);
n=new ZaTreeItemData({parent:ZaTree.getPathByArray([ZaMsg.OVP_home,ZaMsg.OVP_search,ZaMsg.OVP_search]),id:ZaId.getTreeItemId(ZaId.PANEL_APP,"currentSearch",null,"aliasResult"),text:ZaMsg.OVP_aliasSearchResult,mappingId:ZaZimbraAdmin._SEARCH_RESULT_VIEW});
n.setData("TreeItemType",ZaItem.ALIAS);
v.addTreeItemData(n);
n=new ZaTreeItemData({parent:ZaTree.getPathByArray([ZaMsg.OVP_home,ZaMsg.OVP_search,ZaMsg.OVP_search]),id:ZaId.getTreeItemId(ZaId.PANEL_APP,"currentSearch",null,"domainResult"),text:ZaMsg.OVP_domainSearchResult,mappingId:ZaZimbraAdmin._SEARCH_RESULT_VIEW});
n.setData("TreeItemType",ZaItem.DOMAIN);
v.addTreeItemData(n);
n=new ZaTreeItemData({parent:ZaTree.getPathByArray([ZaMsg.OVP_home,ZaMsg.OVP_search,ZaMsg.OVP_search]),id:ZaId.getTreeItemId(ZaId.PANEL_APP,"currentSearch",null,"dlResult"),text:ZabMsg.OVP_dlSearchResult,mappingId:ZaZimbraAdmin._SEARCH_RESULT_VIEW});
n.setData("TreeItemType",ZaItem.DL);
v.addTreeItemData(n);
var m=new ZaTreeItemData({parent:q,canShowOnRoot:false,id:ZaId.getTreeItemId(ZaId.PANEL_APP,"searchHV",null,"searchOption"),text:ZaMsg.OVP_searchOption});
v.addTreeItemData(m);
o.addSilbings(m);
var t=ZaTree.getPathByArray([ZaMsg.OVP_home,ZaMsg.OVP_search,ZaMsg.OVP_searchOption]);
var y=ZaApp.getInstance().getSearchBuilderController().getFilterTreeItems();
for(var C=0;
C<y.length;
C++){n=new ZaTreeItemData({parent:t,canShowOnRoot:false,id:ZaId.getTreeItemId(ZaId.PANEL_APP,"searchOption",null,C+1),mappingId:ZaZimbraAdmin._SEARCH_FILTER_VIEW,buildPath:this.getSearchItemPath(),text:y[C].text});
n.setData("filterType",y[C].filterType);
v.addTreeItemData(n)
}ZaOverviewPanelController.overviewTreeListeners[ZaZimbraAdmin._SEARCH_FILTER_VIEW]=ZaSearchBuilderController.searchFilterTreeListener;
if(ZaSettings.ENABLED_UI_COMPONENTS[ZaSettings.SAVE_SEARCH]||ZaSettings.ENABLED_UI_COMPONENTS[ZaSettings.CARTE_BLANCHE_UI]){var r=new ZaTreeItemData({parent:q,id:ZaId.getTreeItemId(ZaId.PANEL_APP,"searchHV",null,"savedSearch"),canShowOnRoot:false,text:ZaMsg.OVP_savedSearch});
v.addTreeItemData(r);
o.addSilbings(r);
try{var u=ZaApp.getInstance().getSavedSearchList();
if(u&&u.length){var k=ZaTree.getPathByArray([ZaMsg.OVP_home,ZaMsg.OVP_search,ZaMsg.OVP_savedSearch]);
this._savedSearchPath=k;
var B=u.length;
for(var j=0;
j<B;
j++){var J=new ZaTreeItemData({parent:k,id:ZaId.getTreeItemId(ZaId.PANEL_APP,"currentSearch",null,j+1),text:u[j].name,buildPath:this.getSearchItemPath(),mappingId:ZaZimbraAdmin._SEARCH_HOME_VIEW});
J.setData("name",u[j].name);
J.setData("query",u[j].query);
v.addTreeItemData(J)
}}}catch(E){this._handleException(E,"ZaOverviewPanelController.prototype._buildNewFolderTree",null,false)
}}if(c){n=new ZaTreeItemData({parent:ZaMsg.OVP_home,id:ZaId.getTreeItemId(ZaId.PANEL_APP,ZaId.PANEL_HOME,null,"helpCenter"),text:ZaMsg.zimbraHelpCenter,className:"AdminHomeTreeItem",defaultSelectedItem:1,mappingId:ZaZimbraAdmin._HELP_CENTER_HOME_VIEW,image:"Help"});
v.addTreeItemData(n);
n=new ZaTreeItemData({parent:ZaTree.getPathByArray([ZaMsg.OVP_home,ZaMsg.zimbraHelpCenter]),id:ZaId.getTreeItemId(ZaId.PANEL_APP,"helpCenter",null,"helpCenter"),text:ZaMsg.zimbraHelpCenter,mappingId:ZaZimbraAdmin._HELP_CENTER_VIEW});
ZaOverviewPanelController.overviewTreeListeners[ZaZimbraAdmin._HELP_CENTER_VIEW]=ZaZimbraAdmin.prototype._helpListener;
v.addTreeItemData(n)
}if(ZaOverviewPanelController.treeModifiers){var H=ZaOverviewPanelController.treeModifiers;
var B=H.length;
for(var C=0;
C<B;
C++){if(typeof(H[C])=="function"){H[C].call(this,v)
}}}};
ZaOverviewPanelController.prototype._overviewTreeListener=function(e){try{var d=null;
var b=e.item.getData(ZaOverviewPanelController._TID);
if(b!=null&&ZaOverviewPanelController.overviewTreeListeners[b]&&typeof(ZaOverviewPanelController.overviewTreeListeners[b])=="function"){d=ZaOverviewPanelController.overviewTreeListeners[b]
}if(d){if(e.detail==DwtTree.ITEM_SELECTED){d.call(this,e)
}else{if(e.detail==DwtTree.ITEM_ACTIONED){if(b==ZaZimbraAdmin._SEARCH_LIST_VIEW||b==ZaZimbraAdmin._SEARCH_HOME_VIEW){d.call(this,e)
}}}}}catch(c){if(!c){c=new ZmCsfeException("Unknown error",AjxException.UNKNOWN_ERROR,"ZaOverviewPanelController.prototype._overviewTreeListener","Unknown error")
}this._handleException(c,"ZaOverviewPanelController.prototype._overviewTreeListener",null,false)
}};
ZaOverviewPanelController.prototype.setSearchItemPath=function(b){this._searchItemPath=b
};
ZaOverviewPanelController.prototype.getSearchItemPath=function(b){return this._searchItemPath
};
ZaOverviewPanelController.homeTreeListener=function(b){if(ZaApp.getInstance().getCurrentController()){ZaApp.getInstance().getCurrentController().switchToNextView(ZaApp.getInstance().getHomeViewController(),ZaHomeController.prototype.show,null)
}else{ZaApp.getInstance().getHomeViewController().show()
}this._modifySearchMenuButton()
};
ZaOverviewPanelController.cosTreeListener=function(c){var d=ZaApp.getInstance().getCosList(true).getItemById(c.item.getData(ZaOverviewPanelController._OBJ_ID));
if(ZaApp.getInstance().getCurrentController()){ZaApp.getInstance().getCurrentController().switchToNextView(ZaApp.getInstance().getCosController(),ZaCosController.prototype.show,d)
}else{ZaApp.getInstance().getCosController().show(d)
}var b=ZaTree.getPathByArray([ZaMsg.OVP_home,ZaMsg.OVP_configure,ZaMsg.OVP_cos]);
var e=c.item.getData("skipHistory");
ZaZimbraAdmin.getInstance().getOverviewPanelController().addObjectItem(b,d.name,null,(e=="TRUE"),false,d)
};
ZaOverviewPanelController.domainTreeListener=function(e){var f=new ZaDomain();
f.id=e.item.getData(ZaOverviewPanelController._OBJ_ID);
f.attrs[ZaItem.A_zimbraId]=e.item.getData(ZaOverviewPanelController._OBJ_ID);
f.load("id",f.id);
var d=(f.attrs[ZaDomain.A_domainType]==ZaDomain.domainTypes.local);
var c=(f.attrs[ZaDomain.A_domainType]==ZaDomain.domainTypes.alias);
if(ZaApp.getInstance().getCurrentController()){if(d){ZaApp.getInstance().getCurrentController().switchToNextView(ZaApp.getInstance().getDomainController(),ZaDomainController.prototype.show,f)
}else{if(c){ZaApp.getInstance().getDomainAliasWizard(true).editDomainAlias(f,false)
}}}else{if(d){ZaApp.getInstance().getDomainController().show(f)
}else{if(c){ZaApp.getInstance().getDomainAliasWizard(true).editDomainAlias(f,false)
}}}var b=ZaTree.getPathByArray([ZaMsg.OVP_home,ZaMsg.OVP_configure,ZaMsg.OVP_domains]);
var g=e.item.getData("skipHistory");
ZaZimbraAdmin.getInstance().getOverviewPanelController().addObjectItem(b,f.name,null,(g=="TRUE"),false,f)
};
ZaOverviewPanelController.serverTreeListener=function(b){var c=new ZaServer();
c.id=b.item.getData(ZaOverviewPanelController._OBJ_ID);
c.attrs[ZaItem.A_zimbraId]=b.item.getData(ZaOverviewPanelController._OBJ_ID);
if(ZaApp.getInstance().getCurrentController()){ZaApp.getInstance().getCurrentController().switchToNextView(ZaApp.getInstance().getServerController(),ZaServerController.prototype.show,c)
}else{ZaApp.getInstance().getServerController().show(ZaApp.getInstance().getServerList(true).getItemById(b.item.getData(ZaOverviewPanelController._OBJ_ID)))
}};
ZaOverviewPanelController.statsByServerTabTreeListener=function(d){var b=d.item.parent.getData("viewId");
var c=ZaApp.getInstance().getServerStatsController(b);
ZaOverviewPanelController.switchToSubTabForNonXFormView(c,d.item)
};
ZaOverviewPanelController.statsByServerTreeListener=function(f){var g=new ZaServer();
var b=f.item.getData("viewId");
ZaApp.getInstance().getAppViewMgr().pushView(b);
var h=ZaApp.getInstance().getAppViewMgr().getViewContentById(b);
var d=ZaApp.getInstance().getControllerById(b);
var c=h._containedObject;
var e=c.id;
g.id=g.attrs[ZaItem.A_zimbraId]=e;
g.load("id",e,false,true);
d.show(g,true)
};
ZaOverviewPanelController.statusTreeListener=function(b){if(ZaApp.getInstance().getCurrentController()){ZaApp.getInstance().getCurrentController().switchToNextView(ZaApp.getInstance().getStatusViewController(),ZaStatusViewController.prototype.show,null)
}else{ZaApp.getInstance().getStatusViewController().show()
}};
ZaOverviewPanelController.statsTreeListener=function(c){var b=ZaApp.getInstance().getCurrentController();
var d=ZaApp.getInstance().getGlobalStatsController();
if(b){b.switchToNextView(d,ZaGlobalStatsController.prototype.show,null)
}else{d.show()
}ZaOverviewPanelController.switchToSubTabForNonXFormView(d,c.item)
};
ZaOverviewPanelController.switchToSubTabForNonXFormView=function(d,e){var b=e.getData("tabValue");
var c=ZaApp.getInstance().getAppViewMgr().getViewContentById(d.getContentViewId());
c.switchToTab(b)
};
ZaOverviewPanelController.serverListForStatisticsTreeListener=function(c){var b=ZaApp.getInstance().getCurrentController();
var e=ZaApp.getInstance().getServerStatsListController();
var d=ZaServer.getAll([ZaServer.A_description,ZaServer.A_ServiceHostname,ZaItem.A_zimbraId]);
if(b){b.switchToNextView(e,ZaServerStatsListController.prototype.show,d)
}else{e.show(d)
}};
ZaOverviewPanelController.serverListTreeListener=function(b){if(ZaApp.getInstance().getCurrentController()){ZaApp.getInstance().getCurrentController().switchToNextView(ZaApp.getInstance().getServerListController(),ZaServerListController.prototype.show,ZaServer.getAll([ZaServer.A_description,ZaServer.A_ServiceHostname,ZaItem.A_zimbraId]))
}else{ZaApp.getInstance().getServerListController().show(ZaServer.getAll([ZaServer.A_description,ZaServer.A_ServiceHostname,ZaItem.A_zimbraId]))
}};
ZaOverviewPanelController.globalSettingsTreeListener=function(d){if(ZaApp.getInstance().getCurrentController()){ZaApp.getInstance().getCurrentController().switchToNextView(ZaApp.getInstance().getGlobalConfigViewController(),ZaGlobalConfigViewController.prototype.show,ZaApp.getInstance().getGlobalConfig())
}else{ZaApp.getInstance().getGlobalConfigViewController().show(ZaApp.getInstance().getGlobalConfig())
}var b=ZaTree.getPathByArray([ZaMsg.OVP_home,ZaMsg.OVP_configure]);
var c=d.item.getText();
this.addObjectItem(b,c,undefined,true,true,d.item,undefined,true)
};
ZaOverviewPanelController.domainListTreeListener=function(e){var c=ZaApp.getInstance().getDomainListController();
c._currentQuery="";
var j=null;
var b=e.item.getData(ZaOverviewPanelController._TID);
if(b==ZaZimbraAdmin._COS_DOMAIN_LIST_VIEW){var g=e.item.getData("cosItem");
j="("+ZaDomain.A_domainDefaultCOSId+"="+g.id+")";
if(g.name=="default"){j="(|(!("+ZaDomain.A_domainDefaultCOSId+"=*))"+j+")"
}else{if(g.name=="defaultExternal"){j="(|(!("+ZaDomain.A_domainDefaultExternalUserCOSId+"=*))"+j+")"
}}}else{if(b==ZaZimbraAdmin._DOMAIN_ALIAS_LIST_VIEW){var f=e.item.getData("domainItem");
j="("+ZaDomain.A_zimbraDomainAliasTargetId+"="+f.id+")"
}}if(j){c._currentQuery=j
}if(!ZaZimbraAdmin.isGlobalAdmin()){var h=ZaApp.getInstance()._domainNameList;
if(h&&h instanceof Array&&h.length>0){for(var d=0;
d<h.length;
d++){c._currentQuery+="("+ZaDomain.A_domainName+"="+h[d]+")"
}if(h.length>1){c._currentQuery="(|"+c._currentQuery+")"
}}}if(ZaApp.getInstance().getCurrentController()){ZaApp.getInstance().getCurrentController().switchToNextView(c,ZaDomainListController.prototype.show,true)
}else{c.show(true)
}this._modifySearchMenuButton(ZaItem.DOMAIN)
};
ZaOverviewPanelController.aliasListTreeListener=function(c){if((c.item.getData(ZaOverviewPanelController._TID)==ZaZimbraAdmin._ACCOUNT_ALIAS_LIST_VIEW)||c.item.getData(ZaOverviewPanelController._TID)==ZaZimbraAdmin._DL_ALIAS_LIST_VIEW){var b=c.item.getData("aliasTargetId");
var d="("+ZaAlias.A_AliasTargetId+"="+b+")";
this._showAccountsView(ZaItem.ALIAS,c,d)
}else{this._showAccountsView(ZaItem.ALIAS,c)
}this._modifySearchMenuButton(ZaItem.ALIAS)
};
ZaOverviewPanelController.dlListTreeListener=function(d){var f=d.item.getData(ZaAccount.A2_memberOf);
if(f){var b=f[ZaAccount.A2_directMemberList];
var g=f[ZaAccount.A2_indirectMemberList];
var e="";
var h="";
for(var c=0;
c<(b.length+g.length);
c++){if(c<b.length){h=b[c].id
}else{h=g[c-b.length].id
}e+="("+ZaItem.A_zimbraId+"="+h+")"
}e="(|"+e+")";
this._showAccountsView(ZaItem.DL,d,e)
}else{this._showAccountsView(ZaItem.DL,d)
}this._modifySearchMenuButton(ZaItem.DL)
};
ZaOverviewPanelController.accountListTreeListener=function(b){if(b.item.getData(ZaOverviewPanelController._TID)==ZaZimbraAdmin._COS_ACCOUNT_LIST_VIEW){var c=b.item.getData("cosItem");
var d="("+ZaAccount.A_COSId+"="+c.id+")";
if(c.name=="default"){d="(|(&(!("+ZaAccount.A_COSId+"=*))(!("+ZaAccount.A_zimbraIsExternalVirtualAccount+"=TRUE)))"+d+")"
}else{if(c.name=="defaultExternal"){d="(|(&(!("+ZaAccount.A_COSId+"=*))("+ZaAccount.A_zimbraIsExternalVirtualAccount+"=TRUE))"+d+")"
}}this._showAccountsView(ZaItem.ACCOUNT,b,d)
}else{this._showAccountsView(ZaItem.ACCOUNT,b)
}this._modifySearchMenuButton(ZaItem.ACCOUNT)
};
ZaOverviewPanelController.resourceListTreeListener=function(b){this._showAccountsView(ZaItem.RESOURCE,b);
this._modifySearchMenuButton(ZaItem.RESOURCE)
};
ZaOverviewPanelController.searchListTreeListener=function(c){var e=ZaApp.getInstance().getSearchListController()._searchField;
var b=c.item.getData("name");
var d=c.item.getData("query");
if(c.detail==DwtTree.ITEM_SELECTED){if(d){e.selectSavedSearch(b,d)
}else{e.invokeCallback()
}}else{if(c.detail==DwtTree.ITEM_ACTIONED){e._currentSavedSearch={name:b,query:d};
e.getSavedSearchActionMenu().popup(0,c.docX,c.docY)
}}};
ZaOverviewPanelController.newSearchListTreeListener=function(e){var m=this.getOverviewPanel().getFolderTree();
var j=m.getABPath(e.item.getData("dataItem"));
if(j==ZaTree.getPathByArray([ZaMsg.OVP_home,ZaMsg.OVP_search])){var l=this.getSearchItemPath();
m.setSelectionByPath(l,true,true)
}var f=ZaApp.getInstance().getSearchListController();
var k=f._searchField;
var b=e.item.getData("name");
var d=e.item.getData("query");
if(e.detail==DwtTree.ITEM_SELECTED){if(d){k.setCurrentSavedSearch({name:b,query:d});
k.selectSavedSearch(b,d)
}else{k.setCurrentSavedSearch({});
var h=k.getCurrentSearchQuery();
var g=k.getSearchFieldElement().value;
if(k.searchSelectedType&&k.searchSelectedType.length>0){g+=" In "+k.searchSelectedType
}var c={type:1,unique:true,disableForSearch:false,query:h.query,searchType:h.types,displayName:g};
if(!f._uiContainer){f._show()
}f._uiContainer.removeAllBubbles(true);
f._uiContainer.addBubble(c)
}}if(e.detail==DwtTree.ITEM_ACTIONED&&d){k._currentSavedSearch={name:b,query:d};
k.getSavedSearchActionMenu().popup(0,e.docX,e.docY)
}};
ZaOverviewPanelController.searchResultTreeListener=function(e){if(e.detail==DwtTree.ITEM_SELECTED){var c=e.item.getData("TreeItemType");
var f=ZaApp.getInstance().getSearchListController();
f.reset();
var k=f._searchField;
var j=f._contentView;
var d=false;
if(c==ZaItem.ACCOUNT){if(k._containedObject[ZaSearch.A_fAccounts]=="FALSE"){j.set();
d=true
}else{k.accFilterSelectedFromResults()
}}else{if(c==ZaItem.ALIAS){if(k._containedObject[ZaSearch.A_fAliases]=="FALSE"){j.set();
d=true
}else{k.aliasFilterSelectedFromResults()
}}else{if(c==ZaItem.DOMAIN){if(k._containedObject[ZaSearch.A_fDomains]=="FALSE"){j.set();
d=true
}else{k.domainFilterSelectedFromResults()
}}else{if(c==ZaItem.DL){if(k._containedObject[ZaSearch.A_fdistributionlists]=="FALSE"){j.set();
d=true
}else{k.dlFilterSelectedFromResults()
}}else{}}}}k.setCurrentSavedSearch({});
var h=k.getCurrentSearchQuery();
var g=k.getSearchFieldElement().value;
if(k.searchSelectedType&&k.searchSelectedType.length>0){g+=" In "+k.searchSelectedType;
if(c&&c.length>0){g+=" & "+c
}}else{if(c&&c.length>0){g+=" In "+c
}}var b={type:1,unique:true,disableForSearch:d,query:h.query,searchType:h.types,displayName:g};
if(!f._uiContainer){f._show()
}f._uiContainer.removeAllBubbles(true);
f._uiContainer.addBubble(b,d);
k.restoreSearchFilter()
}};
ZaOverviewPanelController.downloadTreeListener=function(b){if(ZaApp.getInstance().getCurrentController()){ZaApp.getInstance().getCurrentController().switchToNextView(ZaApp.getInstance().getMigrationWizController(),ZaMigrationWizController.prototype.show,null)
}else{ZaApp.getInstance().getMigrationWizController().show()
}};
ZaOverviewPanelController.zimletListTreeListener=function(b){ZaZimlet.getAll(ZaZimlet.EXCLUDE_EXTENSIONS,new AjxCallback(ZaOverviewPanelController._zimletListTreeListener))
};
ZaOverviewPanelController._zimletListTreeListener=function(b){if(ZaApp.getInstance().getCurrentController()){ZaApp.getInstance().getCurrentController().switchToNextView(ZaApp.getInstance().getZimletListController(),ZaZimletListController.prototype.show,b)
}else{ZaApp.getInstance().getZimletListController().show(b)
}};
ZaOverviewPanelController.adminExtListTreeListener=function(b){ZaZimlet.getAll(ZaZimlet.EXCLUDE_MAIL,new AjxCallback(ZaOverviewPanelController._adminExtListTreeListener))
};
ZaOverviewPanelController._adminExtListTreeListener=function(b){if(ZaApp.getInstance().getCurrentController()){ZaApp.getInstance().getCurrentController().switchToNextView(ZaApp.getInstance().getAdminExtListController(),ZaAdminExtListController.prototype.show,b)
}else{ZaApp.getInstance().getAdminExtListController().show(b)
}};
ZaOverviewPanelController.cosListTreeListener=function(b){if(ZaApp.getInstance().getCurrentController()){ZaApp.getInstance().getCurrentController().switchToNextView(ZaApp.getInstance().getCosListController(),ZaCosListController.prototype.show,true)
}else{ZaApp.getInstance().getCosListController().show(true)
}this._modifySearchMenuButton(ZaItem.COS)
};
ZaOverviewPanelController.postqTreeListener=function(b){if(ZaApp.getInstance().getCurrentController()){ZaApp.getInstance().getCurrentController().switchToNextView(ZaApp.getInstance().getMTAListController(),ZaMTAListController.prototype.show,ZaMTA.getAll())
}else{ZaApp.getInstance().getMTAListController().show(ZaServer.getAll())
}};
ZaOverviewPanelController.postqByServerTreeListener=function(b){var c=ZaApp.getInstance().getPostQList().getItemById(b.item.getData(ZaOverviewPanelController._OBJ_ID));
if(ZaApp.getInstance().getCurrentController()){ZaApp.getInstance().getCurrentController().switchToNextView(ZaApp.getInstance().getMTAController(),ZaMTAController.prototype.show,c)
}else{ZaApp.getInstance().getMTAController().show(c)
}};
ZaOverviewPanelController.accountStatCallback=function(e){var c=this._overviewPanel.getFolderTree().getCurrentRootItem().getItems();
for(var d=0;
d<c.length;
d++){var f=c[d];
var b=f.getData("TreeItemType");
f.setCount(e[b])
}};
ZaOverviewPanelController.manageAccountTreeListener=function(f){var d=[];
var b=this._overviewPanel.getFolderTree().getCurrentRootItem().getItems();
for(var c=0;
c<b.length;
c++){var h=b[c];
if(h){var e=h.getData("TreeItemType");
if(!AjxUtil.isEmpty(e)){d.push(e)
}}}var g=new AjxCallback(this,ZaOverviewPanelController.accountStatCallback);
ZaSearch.getObjectCounts(d,g)
};
ZaOverviewPanelController.accountListInDomainTreeListener=function(b){var c=b.item.getData("domainItem");
ZaDomain.searchAccountsInDomain(c.name)
};
ZaOverviewPanelController.memberListInDLTreeListener=function(j){var f=j.item.getData("dlItem");
var b=f[ZaDistributionList.A2_memberList];
var h="";
if(b.length>0){for(var c=0;
c<b.length;
c++){h+="("+ZaAccount.A_mail+"="+b[c][ZaAccount.A_name]+")"
}if(b.length>1){h="(|"+h+")"
}var g=[ZaSearch.ACCOUNTS,ZaSearch.DLS,ZaSearch.ALIASES];
var e=ZaApp.getInstance().getSearchListController();
var d=Dwt.getNextId();
var l=new AjxCallback(e,e.searchCallback,{limit:e.RESULTSPERPAGE,show:true,busyId:d});
e.fetchAttrs=ZaSearch.standardAttributes;
var k={query:h,types:g,attrs:e.fetchAttrs,callback:l,controller:e,showBusy:true,busyId:d,busyMsg:ZaMsg.BUSY_SEARCHING,skipCallbackIfCancelled:false};
e.setQuery(h);
e.setSearchTypes(g);
ZaSearch.searchDirectory(k)
}};
ZaOverviewPanelController.prototype.refreshAccountTree=function(){var e=ZaMsg.OVP_home+ZaTree.SEPERATOR+ZaMsg.OVP_manageAccounts;
var b=this.getOverviewPanel().getFolderTree();
var c=b.getCurrentRootItem();
var d=b.getABPath(c.getData("dataItem"));
if(e==d){ZaOverviewPanelController.manageAccountTreeListener.call(this)
}};
ZaOverviewPanelController.prototype.refreshSearchTree=function(k){var b=k.getDetails();
if(!b){return
}var e=ZaTree.getPathByArray([ZaMsg.OVP_home,ZaMsg.OVP_search,ZaMsg.OVP_search]);
var n=this.getOverviewPanel().getFolderTree();
var l=n.getCurrentRootItem();
var m=n.getABPath(l.getData("dataItem"));
if(e!=m){return
}var g=l.getItems();
var d=n.getCurrentSelectedItems().get(0);
var h;
var j;
if(d){j=d.getData("TreeItemType")
}if(j){h=b.searchTotal;
h=h||0;
d.setCount(h);
return
}for(var f=0;
f<g.length;
f++){var c=g[f];
j=c.getData("TreeItemType");
if(j){h=b[j];
h=h||0;
if(b.more){h=h+"+"
}}else{h=b.searchTotal||0
}c.setCount(h)
}};
ZaOverviewPanelController.manageRelatedTreeListener=function(c,g){var b=this.getOverviewPanel().getFolderTree();
if(c.length==0){return""
}var f=c.join(ZaTree.SEPERATOR);
var d=b.getCurrentRootItem();
var e=b.getABPath(d.getData("dataItem"));
if(e==f){var h=b.getTreeItemDataByPath(f);
if(h){h.addRelatedObject(this.getRelatedList(f,g))
}ZaOverviewPanelController.updateRelatedTreeListener.call(this,c)
}};
ZaOverviewPanelController.updateRelatedTreeListener=function(h){var l=this.getOverviewPanel().getFolderTree();
if(h.length==0){return""
}var e=h.join(ZaTree.SEPERATOR);
var j=ZaTree.SEPERATOR+ZaMsg.OVP_related;
var g=l.getTreeItemDataByPath(e);
l.buildTree(g);
var d=l.getCurrentSelectedItems().getArray();
var b=d?d[0]:null;
var c=b?l.getABPath(b.getData("dataItem")):null;
var k=l.getTreeItemByPath(c)||l.getSelectedItem(g);
var f=false;
if(c.indexOf(e+j)==-1){f=true
}l.setSelection(k,f)
};
ZaOverviewPanelController.prototype.refreshRelatedTree=function(o,d,q,g){try{var x=AjxUtil.toArray(o);
var f={};
var m={};
var k={};
var t={};
var z,y,e,l,A,v,p,r,c,h;
for(var s=0;
s<x.length;
s++){var w=x[s];
if(AjxUtil.isEmpty(w)){continue
}if(w.type==ZaItem.ACCOUNT){if(!d){e=ZaAccount.prototype.getCurrentCos.call(w);
y=e[ZaAccount.A_name];
if(typeof(m[y])=="undefined"){m[y]=1;
ZaOverviewPanelController.manageRelatedTreeListener.call(this,[ZaMsg.OVP_home,ZaMsg.OVP_configure,ZaMsg.OVP_cos,y],e)
}if(typeof(m["default"])=="undefined"){m["default"]=1;
v=ZaCos.getCosByName("default");
ZaOverviewPanelController.manageRelatedTreeListener.call(this,[ZaMsg.OVP_home,ZaMsg.OVP_configure,ZaMsg.OVP_cos,"default"],v)
}if(typeof(m.defaultExternal)=="undefined"){m.defaultExternal=1;
v=ZaCos.getCosByName("defaultExternal");
ZaOverviewPanelController.manageRelatedTreeListener.call(this,[ZaMsg.OVP_home,ZaMsg.OVP_configure,ZaMsg.OVP_cos,"defaultExternal"],v)
}}}if(w.type==ZaItem.ALIAS){if(!g){var j=w.targetObj;
var n=j[ZaAccount.A_name];
if(j.type==ZaItem.ACCOUNT){if(typeof(t[n])=="undefined"){t[n]=1;
j.load();
ZaOverviewPanelController.manageRelatedTreeListener.call(this,[ZaMsg.OVP_home,ZaMsg.OVP_manageAccounts,ZaMsg.OVP_accounts,n],j)
}}if(j.type==ZaItem.DL){if(typeof(k[n])=="undefined"){k[n]=1;
j.load();
ZaOverviewPanelController.manageRelatedTreeListener.call(this,[ZaMsg.OVP_home,ZaMsg.OVP_manageAccounts,ZaMsg.OVP_distributionLists,n],j)
}}}}if(w.type==ZaItem.ACCOUNT){if(!g){if(!AjxUtil.isEmpty(w[ZaAccount.A2_memberOf])&&!AjxUtil.isEmpty(w[ZaAccount.A2_memberOf][ZaAccount.A2_directMemberList])){var b=w[ZaAccount.A2_memberOf][ZaAccount.A2_directMemberList];
for(var s=0;
s<b.length;
s++){c=b[s][ZaAccount.A_name];
if(typeof(k[c])=="undefined"){k[c]=1;
r=new ZaDistributionList(b[s]["id"],c);
r.load();
ZaOverviewPanelController.manageRelatedTreeListener.call(this,[ZaMsg.OVP_home,ZaMsg.OVP_manageAccounts,ZaMsg.OVP_distributionLists,c],r)
}}}}}if(w.type==ZaItem.DL){if(!g){if(w[ZaDistributionList.A2_numMembers]>0){ZaOverviewPanelController.manageRelatedTreeListener.call(this,[ZaMsg.OVP_home,ZaMsg.OVP_manageAccounts,ZaMsg.OVP_distributionLists,w.name],w)
}}}if(!q&&(w.type==ZaItem.ACCOUNT||w.type==ZaItem.ALIAS||w.type==ZaItem.DL||w.type==ZaItem.RESOURCE)){l=ZaAccount.getDomain(w[ZaAccount.A_name]);
if(typeof(f[l])=="undefined"){A=ZaDomain.getDomainByName(l);
f[l]=1;
ZaOverviewPanelController.manageRelatedTreeListener.call(this,[ZaMsg.OVP_home,ZaMsg.OVP_configure,ZaMsg.OVP_domains,l],A)
}}if(w.type==ZaItem.DOMAIN){if(!d&&w.attrs[ZaDomain.A_domainType]==ZaDomain.domainTypes.local){z=w.attrs[ZaDomain.A_domainDefaultCOSId];
e=ZaCos.getCosById(z);
if(!e){e=ZaCos.getCosByName("default")
}y=e[ZaAccount.A_name];
if(typeof(m[y])=="undefined"){m[y]=1;
ZaOverviewPanelController.manageRelatedTreeListener.call(this,[ZaMsg.OVP_home,ZaMsg.OVP_configure,ZaMsg.OVP_cos,y],e)
}if(typeof(m["default"])=="undefined"){m["default"]=1;
v=ZaCos.getCosByName("default");
ZaOverviewPanelController.manageRelatedTreeListener.call(this,[ZaMsg.OVP_home,ZaMsg.OVP_configure,ZaMsg.OVP_cos,"default"],v)
}}else{if(!q&&w.attrs[ZaDomain.A_domainType]==ZaDomain.domainTypes.alias){l=w.attrs[ZaDomain.A_zimbraMailCatchAllForwardingAddress];
l=l.replace("@","");
if(typeof(f[l])=="undefined"){A=ZaDomain.getDomainByName(l);
ZaOverviewPanelController.manageRelatedTreeListener.call(this,[ZaMsg.OVP_home,ZaMsg.OVP_configure,ZaMsg.OVP_domains,l],A)
}}}}}}catch(u){ZaApp.getInstance().getCurrentController()._handleException(u,"ZaOverviewPanelController.prototype.refreshRelatedTree")
}};
ZaOverviewPanelController.prototype.refreshRelatedTreeByEdit=function(c){try{if(AjxUtil.isEmpty(c)){return
}if(c.type==ZaItem.DL){ZaOverviewPanelController.manageRelatedTreeListener.call(this,[ZaMsg.OVP_home,ZaMsg.OVP_manageAccounts,ZaMsg.OVP_distributionLists,c[ZaAccount.A_name]],c)
}if(c.type==ZaItem.DOMAIN&&c.attrs[ZaDomain.A_domainType]==ZaDomain.domainTypes.local&&c.createGalAccount){ZaOverviewPanelController.manageRelatedTreeListener.call(this,[ZaMsg.OVP_home,ZaMsg.OVP_configure,ZaMsg.OVP_domains,c[ZaAccount.A_name]],c)
}}catch(b){ZaApp.getInstance().getCurrentController()._handleException(b,"ZaOverviewPanelController.prototype.refreshRelatedTreeByEdit")
}};
ZaOverviewPanelController.prototype._modifySearchMenuButton=function(c){var b=ZaApp.getInstance().getSearchListController();
if(!b||!b._searchField){return
}if(c){switch(c){case ZaItem.ACCOUNT:b._searchField.accFilterSelected();
break;
case ZaItem.ALIAS:b._searchField.aliasFilterSelected();
break;
case ZaItem.DL:b._searchField.dlFilterSelected();
break;
case ZaItem.RESOURCE:b._searchField.resFilterSelected();
break;
case ZaItem.DOMAIN:b._searchField.domainFilterSelected();
break;
case ZaItem.COS:b._searchField.cosFilterSelected();
break
}}else{b._searchField.allFilterSelected()
}};
ZaOverviewPanelController.prototype.addAccountItem=function(f,g){var e=f.type;
var c=ZaMsg.OVP_accounts;
if(e==ZaItem.ACCOUNT){c=ZaMsg.OVP_accounts
}else{if(e==ZaItem.DL){c=ZaMsg.OVP_distributionLists
}else{if(e==ZaItem.RESOURCE){c=ZaMsg.OVP_resources
}else{if(e==ZaItem.ALIAS){if(f.attrs[ZaAlias.A_targetType]==ZaAlias.TARGET_TYPE_ACCOUNT){c=ZaMsg.OVP_accounts
}else{if(f.attrs[ZaAlias.A_targetType]==ZaAlias.TARGET_TYPE_DL){c=ZaMsg.OVP_distributionLists
}else{if(f.attrs[ZaAlias.A_targetType]==ZaAlias.TARGET_TYPE_RESOURCE){c=ZaMsg.OVP_resources
}}}}}}}var b=ZaTree.getPathByArray([ZaMsg.OVP_home,ZaMsg.OVP_manageAccounts,c]);
var d=f.name;
this.addObjectItem(b,d,g,false,false,f,undefined,true)
};
ZaOverviewPanelController.prototype.saveBeforeExit=function(c){var b=ZaApp.getInstance().getCurrentController();
if(b instanceof ZaXFormViewController){b.closeButtonListener(undefined,undefined,undefined,undefined,undefined,c.newPath);
return false
}};
ZaOverviewPanelController.prototype.addObjectItem=function(k,w,v,j,m,e,g,u){if(!v){v=ZaApp.getInstance().getAppViewMgr().getCurrentViewContent();
if(!v||!v.getTabChoices||!v.getTabChoices()){return false
}}var n=k+ZaTree.SEPERATOR+w;
var l=this.getOverviewPanel().getFolderTree();
var p,b,t;
var s=false;
var f=false;
var d=l.getTreeItemDataByPath(n);
if(!d){s=f=true
}else{if(d.getChildrenNum()<=0){f=true
}}var q=new ZaHistory(n,w,e?e.type:null);
ZaZimbraAdmin.getInstance().getHistoryMgr().addHistoryObj(q);
if(s){var c=l.getTreeItemDataByPath(k);
var h=c.getChildrenNum();
var o=c.id;
if(!g||!(t=g.mainNode)){p=ZaZimbraAdmin._XFORM_VIEW;
b=ZaOverviewPanelController.xformTreeListener
}else{p=t.mappingId;
b=t.handler
}d=new ZaTreeItemData({parent:k,mappingId:p,id:DwtId._makeId(o,h+1),image:(e?this.getIconByType(e.type):null),defaultSelectedItem:1,text:w});
l.addTreeItemData(d);
d.addRelatedObject(this.getRelatedList(k,e));
d.addRecentObject(this.getRecentList());
if(u){d.addListener(ZaTreeEvent.ONDESTROY,new AjxListener(this,this.saveBeforeExit))
}ZaOverviewPanelController.overviewTreeListeners[p]=b
}else{d.addRelatedObject(this.getRelatedList(k,e));
d.addRecentObject(this.getRecentList())
}var r=ZaApp.getInstance().getAppViewMgr().getCurrentView();
d.setData("viewId",r);
if(f){if(!g||!(t=g.tabNodes)){p=ZaZimbraAdmin._XFORM_TAB_VIEW;
b=ZaOverviewPanelController.xformTabTreeListener
}else{p=t.mappingId;
b=t.handler
}this.addSubTabsToParentTreeItem(d,v.getTabChoices(),p);
ZaOverviewPanelController.overviewTreeListeners[p]=b
}l.setSelectionByPath(n,!j,m);
return true
};
ZaOverviewPanelController.prototype.addSubTabsToParentTreeItem=function(c,l,k,b){var e,j,g;
var m=this.getOverviewPanel().getFolderTree();
var d=m.getABPath(c);
var f=b?true:false;
if(l&&l.length>0){c.setData("firstTab",l[0].value);
for(var h=0;
h<l.length;
h++){j=l[h];
g=DwtId._makeId(c.id,h+1);
e=new ZaTreeItemData({parent:d,id:g,isShowHistory:f,text:j.label,mappingId:k});
e.setData("tabValue",j.value);
m.addTreeItemData(e)
}}};
ZaOverviewPanelController.xformTabTreeListener=function(e){var c=e.item.parent.getData("viewId");
var b=e.item.getData("tabValue");
if(AjxUtil.isEmpty(c)||AjxUtil.isEmpty(b)){return
}ZaApp.getInstance().getAppViewMgr().pushView(c);
var f=ZaApp.getInstance().getAppViewMgr().getViewContentById(c);
if(AjxUtil.isEmpty(f)){return
}if(e.refresh&&!AjxUtil.isEmpty(f._localXForm)){var d=f._localXForm.getInstance();
if(d&&d.refresh){d.refresh(false,true);
f.setObject(d)
}}if(!AjxUtil.isEmpty(f._localXForm)){f._localXForm.setInstanceValue(b,ZaModel.currentTab)
}};
ZaOverviewPanelController.xformTreeListener=function(e){var c=e.item.getData("viewId");
var b=e.item.getData("firstTab");
if(AjxUtil.isEmpty(c)||AjxUtil.isEmpty(b)){return
}ZaApp.getInstance().getAppViewMgr().pushView(c);
var f=ZaApp.getInstance().getAppViewMgr().getViewContentById(c);
if(AjxUtil.isEmpty(f)){return
}if(e.refresh&&!AjxUtil.isEmpty(f._localXForm)){var d=f._localXForm.getInstance();
if(d&&d.refresh){d.refresh(false,true);
f.setObject(d)
}}if(!AjxUtil.isEmpty(f._localXForm)){f._localXForm.setInstanceValue(b,ZaModel.currentTab)
}};
ZaOverviewPanelController.prototype.getRelatedList=function(b,c){if(!c||!c.getRelatedList){return[]
}return c.getRelatedList(b)
};
ZaOverviewPanelController.prototype.getRecentList=function(){var f=ZaZimbraAdmin.getInstance().getHistoryMgr();
var c=f.getAllHistoryObj().getArray();
var b=[];
var e=null;
var g=null;
for(var d=c.length-1;
d>-1;
d--){g=this.getIconByType(c[d].type);
e=new ZaTreeItemData({text:c[d].displayName,type:1,image:g,isShowHistory:false,forceNode:(d+1!=c.length),path:c[d].path});
b.push(e)
}return b
};
ZaOverviewPanelController.prototype.getIconByType=function(b){var c=null;
if(b==ZaItem.ACCOUNT){c="Account"
}else{if(b==ZaItem.COS){c="COS"
}else{if(b==ZaItem.DOMAIN){c="Domain"
}else{if(b==ZaItem.RESOURCE){c="Resource"
}else{if(b==ZaItem.DL){c="DistributionList"
}else{if(b==ZaItem.ALIAS){c="AccountAlias"
}else{if(b==ZaItem.SERVER){c="Server"
}else{if(b==ZaItem.RIGHT){c="RightObject"
}}}}}}}}return c
}
}if(AjxPackage.define("zimbraAdmin.common.ZaOperation")){ZaOperation=function(d,k,l,c,e,g,j,f,h,b){this.id=d;
this.caption=k;
this.tt=l;
this.listener=g;
this.imageId=c;
this.disImageId=e;
this.type=(j==null)?ZaOperation.TYPE_BUTTON:j;
this.menuOpList=f;
this.className=h;
this.labelId=b;
this.enabled=true;
this.visible=true
};
ZaOperation.prototype.toString=function(){return"ZaOperation"
};
ZaOperation.prototype.setEnabled=function(b){this.enabled=b
};
ZaOperation.prototype.setVisible=function(b){this.visible=b
};
ZaOperation.duplicate=function(e){var d=e.id;
var m=e.caption;
var n=e.tt;
var j=e.listener;
var c=e.imageId;
var f=e.disImageId;
var l=e.type;
var g=e.menuOpList;
var k=e.className;
var b=e.labelId;
var h=new ZaOperation(d,m,n,c,f,j,l,g,k,b);
return h
};
ZaOperation.TYPE_BUTTON=1;
ZaOperation.TYPE_MENU=2;
ZA_OP_INDEX=0;
ZaOperation.NONE=++ZA_OP_INDEX;
ZaOperation.SEP=++ZA_OP_INDEX;
ZaOperation.NEW=++ZA_OP_INDEX;
ZaOperation.DELETE=++ZA_OP_INDEX;
ZaOperation.REFRESH=++ZA_OP_INDEX;
ZaOperation.EDIT=++ZA_OP_INDEX;
ZaOperation.CHNG_PWD=++ZA_OP_INDEX;
ZaOperation.CLOSE=++ZA_OP_INDEX;
ZaOperation.SAVE=++ZA_OP_INDEX;
ZaOperation.NEW_WIZARD=++ZA_OP_INDEX;
ZaOperation.NEW_ALIAS=++ZA_OP_INDEX;
ZaOperation.NEW_DL=++ZA_OP_INDEX;
ZaOperation.NEW_RESOURCE=++ZA_OP_INDEX;
ZaOperation.NEW_ADMIN=++ZA_OP_INDEX;
ZaOperation.PAGE_FORWARD=++ZA_OP_INDEX;
ZaOperation.PAGE_BACK=++ZA_OP_INDEX;
ZaOperation.DUPLICATE=++ZA_OP_INDEX;
ZaOperation.GAL_WIZARD=++ZA_OP_INDEX;
ZaOperation.AUTH_WIZARD=++ZA_OP_INDEX;
ZaOperation.AUTOPROV_WIZARD=++ZA_OP_INDEX;
ZaOperation.VIEW_MAIL=++ZA_OP_INDEX;
ZaOperation.MOVE_ALIAS=++ZA_OP_INDEX;
ZaOperation.NEW_MENU=++ZA_OP_INDEX;
ZaOperation.HELP=++ZA_OP_INDEX;
ZaOperation.REINDEX_MAILBOX=++ZA_OP_INDEX;
ZaOperation.LABEL=++ZA_OP_INDEX;
ZaOperation.VIEW=++ZA_OP_INDEX;
ZaOperation.SEARCH_ACCOUNTS=++ZA_OP_INDEX;
ZaOperation.SEARCH_ALIASES=++ZA_OP_INDEX;
ZaOperation.SEARCH_DLS=++ZA_OP_INDEX;
ZaOperation.SEARCH_DOMAINS=++ZA_OP_INDEX;
ZaOperation.SEARCH_RESOURCES=++ZA_OP_INDEX;
ZaOperation.SEARCH_COSES=++ZA_OP_INDEX;
ZaOperation.SEARCH_ALL=++ZA_OP_INDEX;
ZaOperation.FLUSH=++ZA_OP_INDEX;
ZaOperation.HOLD=++ZA_OP_INDEX;
ZaOperation.REQUEUE=++ZA_OP_INDEX;
ZaOperation.RELEASE=++ZA_OP_INDEX;
ZaOperation.INIT_NOTEBOOK=++ZA_OP_INDEX;
ZaOperation.CHECK_MX_RECORD=++ZA_OP_INDEX;
ZaOperation.SEARCH_RESULT_COUNT=++ZA_OP_INDEX;
ZaOperation.SEARCH_BY_ADDESS_TYPE=++ZA_OP_INDEX;
ZaOperation.SEARCH_BY_DOMAIN=++ZA_OP_INDEX;
ZaOperation.SEARCH_BY_SERVER=++ZA_OP_INDEX;
ZaOperation.SEARCH_BY_BASIC=++ZA_OP_INDEX;
ZaOperation.SEARCH_BY_REMOVE_ALL=++ZA_OP_INDEX;
ZaOperation.SEARCH_BY_ADVANCED=++ZA_OP_INDEX;
ZaOperation.SEARCH_BY_COS=++ZA_OP_INDEX;
ZaOperation.DEPLOY_ZIMLET=++ZA_OP_INDEX;
ZaOperation.CLOSE_TAB=++ZA_OP_INDEX;
ZaOperation.CLOSE_OTHER_TAB=++ZA_OP_INDEX;
ZaOperation.CLOSE_ALL_TAB=++ZA_OP_INDEX;
ZaOperation.TOGGLE=++ZA_OP_INDEX;
ZaOperation.DOWNLOAD_SERVER_CONFIG=++ZA_OP_INDEX;
ZaOperation.DOWNLOAD_GLOBAL_CONFIG=++ZA_OP_INDEX;
ZaOperation.VIEW_DOMAIN_ACCOUNTS=++ZA_OP_INDEX;
ZaOperation.FLUSH_CACHE=++ZA_OP_INDEX;
ZaOperation.MORE_ACTIONS=++ZA_OP_INDEX;
ZaOperation.EXPIRE_SESSION=++ZA_OP_INDEX;
ZaOperation.ADD_DOMAIN_ALIAS=++ZA_OP_INDEX;
ZaOperation.INSTALL_DOMAIN_CERT=++ZA_OP_INDEX;
ZaOperation.LOGOFF=++ZA_OP_INDEX;
ZaOperation.LEFT_BRACKET=++ZA_OP_INDEX;
ZaOperation.RIGHT_BRACKET=++ZA_OP_INDEX;
var ZaOpList=["UNKNOWN","NONE","SEP","NEW","DELETE","REFRESH","EDIT","CHNG_PWD","CLOSE","SAVE","NEW_ACCT","NEW_ALIAS","NEW_DL","NEW_RESOURCE","NEW_ADMIN","PAGE_FORWARD","PAGE_BACK","DUPLICATE","GAL_WIZARD","AUTH_WIZARD","AUTOPROV_WIZARD","VIEW_MAIL","MOVE_ALIAS","NEW_MENU","HELP","REINDEX_MAILBOX","LABEL","VIEW","SEARCH_ACCOUNTS","SEARCH_ALIASES","SEARCH_DLS","SEARCH_DOMAINS","SEARCH_RESOURCES","SEARCH_COSES","SEARCH_ALL","FLUSH","HOLD","REQUEUE","RELEASE","INIT_NOTEBOOK","CHECK_MX_RECORD","SEARCH_RESULT_COUNT","SEARCH_BY_ADDESS_TYPE","SEARCH_BY_DOMAIN","SEARCH_BY_SERVER","SEARCH_BY_BASIC","SEARCH_BY_REMOVE_ALL","SEARCH_BY_ADVANCED","SEARCH_BY_COS","DEPLOY_ZIMLET","CLOSE_TAB","CLOSE_OTHER_TAB","CLOSE_ALL_TAB","TOGGLE","DOWNLOAD_SERVER_CONFIG","DOWNLOAD_GLOBAL_CONFIG","VIEW_DOMAIN_ACCOUNTS","FLUSH_CACHE","MORE_ACTIONS","EXPIRE_SESSION","ADD_DOMAIN_ALIAS","INSTALL_DOMAIN_CERT","LOGOFF","LEFT_BRACKET","RIGHT_BRACKET"];
ZaOperation.getStringName=function(b){if(b<0||b>=ZaOpList.length){return"UNKNOWN_"+b
}return ZaOpList[b]
}
}if(AjxPackage.define("zimbraAdmin.home.controller.ZaHomeController")){ZaHomeController=function(c,b){ZaXFormViewController.call(this,c,b,"ZaHomeController");
this._UICreated=false;
this.objType=ZaEvent.S_HOME;
this.tabConstructor=ZaHomeXFormView
};
ZaHomeController.prototype=new ZaXFormViewController();
ZaHomeController.prototype.constructor=ZaHomeController;
ZaHomeController.prototype.toString=function(){return"ZaHomeController"
};
ZaApp.prototype.getHomeViewController=function(b){if(!b){b=ZaZimbraAdmin._HOME_VIEW
}if(b&&this._controllers[b]!=null){return this._controllers[b]
}else{var d=this._controllers[b]=new ZaHomeController(this._appCtxt,this._container,this);
return d
}};
ZaHomeController.prototype.show=function(b){if(!this._UICreated){this._contentView=this._view=new this.tabConstructor(this._container,b);
var c=new Object();
c[ZaAppViewMgr.C_APP_CONTENT]=this._view;
ZaApp.getInstance().getAppViewMgr().createView(this.getContentViewId(),c);
ZaApp.getInstance()._controllers[this.getContentViewId()]=this;
this._UICreated=true
}b=new ZaHome();
b.load("","",true);
b[ZaModel.currentTab]="1";
b[ZaModel.currentStep]=1;
this._currentObject=b;
this._view.setObject(b);
ZaApp.getInstance().pushView(this.getContentViewId());
b.schedulePostLoading()
};
ZaHomeController.prototype.setInstanceValue=function(c,b){var d=this._view._localXForm;
d.setInstanceValue(c,b)
};
ZaHomeController.prototype.showWarningPanel=function(){var b=this._view._localXForm;
if(b.getInstanceValue(ZaHome.A2_showWarningPanel)!=true){b.setInstanceValue(true,ZaHome.A2_showWarningPanel)
}};
ZaHomeController.prototype.getAppBarAction=function(){if(AjxUtil.isEmpty(this._appbarOperation)){this._appbarOperation[ZaOperation.HELP]=new ZaOperation(ZaOperation.HELP,ZaMsg.TBB_Help,ZaMsg.TBB_Help_tt,"Help","Help",new AjxListener(this,this._helpButtonListener))
}return this._appbarOperation
};
ZaHomeController.prototype.getAppBarOrder=function(){if(AjxUtil.isEmpty(this._appbarOrder)){this._appbarOrder.push(ZaOperation.HELP)
}return this._appbarOrder
}
}if(AjxPackage.define("zimbraAdmin.accounts.controller.ZaAccountListController")){ZaAccountListController=function(c,b){ZaListViewController.call(this,c,b,"ZaAccountListController");
this._popupOperations=new Object();
this._currentPageNum=1;
this._currentQuery=null;
this._currentSortField=ZaAccount.A_uid;
this._currentSortOrder="1";
this.searchTypes=[ZaSearch.ALIASES,ZaSearch.DLS,ZaSearch.ACCOUNTS,ZaSearch.RESOURCES];
this.pages=new Object();
this._searchPanel=null;
this._searchField=null;
this._defaultType=ZaItem.ACCOUNT;
this._helpURL=ZaAccountListController.helpURL;
this._helpButtonText=ZaMsg.helpManageAccounts;
this.objType=ZaEvent.S_ACCOUNT;
this.fetchAttrs=ZaSearch.standardAttributes
};
ZaAccountListController.prototype=new ZaListViewController();
ZaAccountListController.helpURL=location.pathname+ZaUtil.HELP_URL+"managing_accounts/provisioning_accounts.htm?locid="+AjxEnv.DEFAULT_LOCALE;
ZaController.initPopupMenuMethods.ZaAccountListController=new Array();
ZaController.changeActionsStateMethods.ZaAccountListController=new Array();
ZaAccountListController.prototype.show=function(d,b){if(d&&!b){var c=this._contentView&&this._contentView.getList();
if(c){return this._show(c,false,false,this._contentView.scrollHasMore)
}}var f=Dwt.getNextId();
var g=new AjxCallback(this,this.searchCallback,{limit:this.RESULTSPERPAGE,CONS:null,show:d,busyId:f});
this._currentQuery="(&"+this._currentQuery+"(!("+ZaAccount.A_zimbraIsSystemAccount+"=TRUE)))";
var e={query:this._currentQuery,types:this.searchTypes,sortBy:this._currentSortField,offset:this.RESULTSPERPAGE*(this._currentPageNum-1),sortAscending:this._currentSortOrder,limit:this.RESULTSPERPAGE,maxResults:0,attrs:[this.fetchAttrs,ZaAccount.A_zimbraIsDelegatedAdminAccount,ZaAccount.A_zimbraIsAdminAccount,ZaAccount.A_zimbraIsSystemResource,ZaAccount.A_zimbraIsSystemAccount,ZaAccount.A_zimbraIsExternalVirtualAccount].join(),callback:g,controller:this,showBusy:true,busyId:f,busyMsg:ZaMsg.BUSY_SEARCHING,skipCallbackIfCancelled:false,isInitialRequest:true};
this.scrollSearchParams={query:this._currentQuery,types:this.searchTypes,sortBy:this._currentSortField,sortAscending:this._currentSortOrder,attrs:[this.fetchAttrs,ZaAccount.A_zimbraIsDelegatedAdminAccount,ZaAccount.A_zimbraIsAdminAccount,ZaAccount.A_zimbraIsSystemResource,ZaAccount.A_zimbraIsSystemAccount,ZaAccount.A_zimbraIsExternalVirtualAccount].join(),controller:this,showBusy:true,busyMsg:ZaMsg.BUSY_SEARCHING,skipCallbackIfCancelled:false};
ZaSearch.searchDirectory(e)
};
ZaAccountListController.prototype._show=function(c,b,e,d){this._updateUI(c,b,e,d);
this.updatePopupMenu();
ZaApp.getInstance().pushView(this.getContentViewId(),b,e);
return
};
ZaAccountListController.prototype.setDefaultType=function(b){this._defaultType=b;
if(b==ZaItem.ACCOUNT){this._helpURL=location.pathname+ZaUtil.HELP_URL+"managing_accounts/provisioning_accounts.htm?locid="+AjxEnv.DEFAULT_LOCALE
}else{if(b==ZaItem.ALIAS){this._helpURL=location.pathname+ZaUtil.HELP_URL+"managing_accounts/creating_a_mail_aliases.htm?locid="+AjxEnv.DEFAULT_LOCALE
}else{if(b==ZaItem.DL){this._helpURL=location.pathname+ZaUtil.HELP_URL+"managing_accounts/distribution_lists.htm?locid="+AjxEnv.DEFAULT_LOCALE
}else{if(b==ZaItem.RESOURCE){this._helpURL=location.pathname+ZaUtil.HELP_URL+"managing_accounts/managing_resource.htm?locid="+AjxEnv.DEFAULT_LOCALE
}}}}};
ZaAccountListController.prototype.updatePopupMenu=function(){var b=this._defaultType;
if(b==ZaItem.ACCOUNT&&this.showNewAccount){this._popupOperations[ZaOperation.NEW_MENU]=new ZaOperation(ZaOperation.NEW_MENU,ZaMsg.TBB_New,ZaMsg.ACTBB_New_tt,"NewAccount","AccountDis",new AjxListener(this,ZaAccountListController.prototype._newAccountListener))
}else{if(b==ZaItem.ALIAS&&this.showNewAlias){this._popupOperations[ZaOperation.NEW_MENU]=new ZaOperation(ZaOperation.NEW_MENU,ZaMsg.TBB_New,ZaMsg.ALTBB_New_tt,"AccountAlias","AccountDis",new AjxListener(this,ZaAccountListController.prototype._newAliasListener))
}else{if(b==ZaItem.DL&&this.showNewDL){this._popupOperations[ZaOperation.NEW_MENU]=new ZaOperation(ZaOperation.NEW_MENU,ZaMsg.TBB_New,ZaMsg.ALTBB_New_tt,"DistributionList","DistributionListDis",new AjxListener(this,ZaAccountListController.prototype._newDistributionListListener))
}else{if(b==ZaItem.RESOURCE&&this.showNewCalRes){this._popupOperations[ZaOperation.NEW_MENU]=new ZaOperation(ZaOperation.NEW_MENU,ZaMsg.TBB_New,ZaMsg.ALTBB_New_tt,"Resource","ResourceDis",new AjxListener(this,ZaAccountListController.prototype._newResourceListener))
}}}}};
ZaAccountListController.prototype.handleRemoval=function(b){ZaZimbraAdmin.getInstance().getOverviewPanelController().refreshAccountTree();
ZaListViewController.prototype.handleRemoval.call(this,b)
};
ZaAccountListController.prototype.handleCreation=function(b){ZaZimbraAdmin.getInstance().getOverviewPanelController().refreshAccountTree();
ZaListViewController.prototype.handleCreation.call(this,b)
};
ZaAccountListController.prototype.set=function(b){this.show(b)
};
ZaAccountListController.prototype.setPageNum=function(b){this._currentPageNum=Number(b)
};
ZaAccountListController.prototype.getPageNum=function(){return this._currentPageNum
};
ZaAccountListController.prototype.getTotalPages=function(){return this.numPages
};
ZaAccountListController.prototype.setFetchAttrs=function(b){this.fetchAttrs=b
};
ZaAccountListController.prototype.getFetchAttrs=function(){return this.fetchAttrs
};
ZaAccountListController.prototype.setQuery=function(b){this._currentQuery=b
};
ZaAccountListController.prototype.getQuery=function(){return this._currentQuery
};
ZaAccountListController.prototype.setSearchTypes=function(b){this.searchTypes=b
};
ZaAccountListController.prototype.getSearchTypes=function(){return this.searchTypes
};
ZaAccountListController.prototype.setSortOrder=function(b){if(b===true){this._currentSortOrder="1"
}else{if(b===false){this._currentSortOrder="0"
}else{this._currentSortOrder=b
}}};
ZaAccountListController.prototype.getSortOrder=function(){return this._currentSortOrder
};
ZaAccountListController.prototype.setSortField=function(b){this._currentSortField=b
};
ZaAccountListController.prototype.getSortField=function(){return this._currentSortField
};
ZaAccountListController.initPopupMenuMethod=function(){this.showNewAccount=false;
this.showNewDL=false;
this.showNewCalRes=false;
this.showNewAlias=false;
if(ZaZimbraAdmin.currentAdminAccount.attrs[ZaAccount.A_zimbraIsAdminAccount]=="TRUE"){this.showNewAccount=true;
this.showNewDL=true;
this.showNewCalRes=true;
this.showNewAlias=true
}else{this.showNewAccount=ZaZimbraAdmin.canCreateAccount();
this.showNewCalRes=ZaZimbraAdmin.canCreateCalRes;
this.showNewDL=ZaZimbraAdmin.canCreateDL();
this.showNewAlias=ZaZimbraAdmin.canCreateAlias()
}if(this.showNewAccount&&this._defaultType==ZaItem.ACCOUNT){this._popupOperations[ZaOperation.NEW_MENU]=new ZaOperation(ZaOperation.NEW_MENU,ZaMsg.TBB_New,ZaMsg.ACTBB_New_tt,"NewAccount","AccountDis",new AjxListener(this,ZaAccountListController.prototype._newAccountListener))
}else{if(this.showNewCalRes&&this._defaultType==ZaItem.RESOURCE){this._popupOperations[ZaOperation.NEW_MENU]=new ZaOperation(ZaOperation.NEW_MENU,ZaMsg.TBB_New,ZaMsg.ALTBB_New_tt,"Resource","ResourceDis",new AjxListener(this,ZaAccountListController.prototype._newResourceListener))
}else{if(this.showNewDL&&this._defaultType==ZaItem.DL){this._popupOperations[ZaOperation.NEW_MENU]=new ZaOperation(ZaOperation.NEW_MENU,ZaMsg.TBB_New,ZaMsg.ALTBB_New_tt,"DistributionList","DistributionListDis",new AjxListener(this,ZaAccountListController.prototype._newDistributionListListener))
}else{if(this.showNewAlias&&this._defaultType==ZaItem.ALIAS){this._popupOperations[ZaOperation.NEW_MENU]=new ZaOperation(ZaOperation.NEW_MENU,ZaMsg.TBB_New,ZaMsg.ALTBB_New_tt,"AccountAlias","AccountDis",new AjxListener(this,ZaAccountListController.prototype._newAliasListener))
}}}}if(this.showNewAccount||this.showNewCalRes||this.showNewDL||this.showNewAlias){this._popupOrder.push(ZaOperation.NEW_MENU)
}this._popupOperations[ZaOperation.EDIT]=new ZaOperation(ZaOperation.EDIT,ZaMsg.TBB_Edit,ZaMsg.ACTBB_Edit_tt,"Edit","EditDis",new AjxListener(this,ZaAccountListController.prototype._editButtonListener));
this._popupOrder.push(ZaOperation.EDIT);
this._popupOperations[ZaOperation.DELETE]=new ZaOperation(ZaOperation.DELETE,ZaMsg.TBB_Delete,ZaMsg.ACTBB_Delete_tt,"Delete","DeleteDis",new AjxListener(this,ZaAccountListController.prototype._deleteButtonListener));
this._popupOrder.push(ZaOperation.DELETE);
if(this._defaultType==ZaItem.ACCOUNT){this._popupOperations[ZaOperation.CHNG_PWD]=new ZaOperation(ZaOperation.CHNG_PWD,ZaMsg.ACTBB_ChngPwd,ZaMsg.ACTBB_ChngPwd_tt,"Padlock","PadlockDis",new AjxListener(this,ZaAccountListController.prototype._chngPwdListener));
this._popupOperations[ZaOperation.EXPIRE_SESSION]=new ZaOperation(ZaOperation.EXPIRE_SESSION,ZaMsg.ACTBB_ExpireSessions,ZaMsg.ACTBB_ExpireSessions_tt,"ExpireSession","ExpireSessionDis",new AjxListener(this,ZaAccountListController.prototype._expireSessionListener));
this._popupOrder.push(ZaOperation.CHNG_PWD);
this._popupOrder.push(ZaOperation.EXPIRE_SESSION)
}if(this._defaultType==ZaItem.ALIAS){this._popupOperations[ZaOperation.MOVE_ALIAS]=new ZaOperation(ZaOperation.MOVE_ALIAS,ZaMsg.ACTBB_MoveAlias,ZaMsg.ACTBB_MoveAlias_tt,"MoveAlias","MoveAlias",new AjxListener(this,ZaAccountListController.prototype._moveAliasListener));
this._popupOperations[ZaOperation.EXPIRE_SESSION]=new ZaOperation(ZaOperation.EXPIRE_SESSION,ZaMsg.ACTBB_ExpireSessions,ZaMsg.ACTBB_ExpireSessions_tt,"ExpireSession","ExpireSessionDis",new AjxListener(this,ZaAccountListController.prototype._expireSessionListener));
this._popupOrder.push(ZaOperation.MOVE_ALIAS);
this._popupOrder.push(ZaOperation.EXPIRE_SESSION)
}};
ZaController.initPopupMenuMethods.ZaAccountListController.push(ZaAccountListController.initPopupMenuMethod);
ZaAccountListController.prototype._createUI=function(b,d){this._contentView=new ZaAccountListView(this._container,this._defaultType);
ZaApp.getInstance()._controllers[this.getContentViewId()]=this;
this._newDLListener=new AjxListener(this,ZaAccountListController.prototype._newDistributionListListener);
this._newAcctListener=new AjxListener(this,ZaAccountListController.prototype._newAccountListener);
this._newResListener=new AjxListener(this,ZaAccountListController.prototype._newResourceListener);
this._newALListener=new AjxListener(this,ZaAccountListController.prototype._newAliasListener);
var c=new Object();
c[ZaAppViewMgr.C_APP_CONTENT]=this._contentView;
ZaApp.getInstance().getAppViewMgr().createView(this.getContentViewId(),c);
this._initPopupMenu();
this._actionMenu=new ZaPopupMenu(this._contentView,"ActionMenu",null,this._popupOperations,ZaId.VIEW_ACCTLIST,ZaId.MENU_POP);
this._contentView.addSelectionListener(new AjxListener(this,this._listSelectionListener));
this._contentView.addActionListener(new AjxListener(this,this._listActionListener));
if(!ZaApp.getInstance().dialogs.ConfirmMessageDialog){ZaApp.getInstance().dialogs.ConfirmMessageDialog=new ZaMsgDialog(ZaApp.getInstance().getAppCtxt().getShell(),null,[DwtDialog.YES_BUTTON,DwtDialog.NO_BUTTON],null,ZaId.CTR_PREFIX+ZaId.VIEW_ACCTLIST+"_ConfirmMessage")
}this._UICreated=true
};
ZaAccountListController.prototype.closeButtonListener=function(d,b,c,e,f){if(b){c.call(e,f)
}else{ZaApp.getInstance().popView()
}};
ZaAccountListController.prototype._newAccountListener=function(d){try{EmailAddr_XFormItem.resetDomainLists.call(this);
var b=new ZaAccount();
b.loadNewObjectDefaults("name",ZaSettings.myDomainName);
b.rights[ZaAccount.GET_ACCOUNT_MEMBERSHIP_RIGHT]=true;
if(!ZaApp.getInstance().dialogs.newAccountWizard){ZaApp.getInstance().dialogs.newAccountWizard=new ZaNewAccountXWizard(this._container,b)
}else{ZaApp.getInstance().dialogs.newAccountWizard.updateAccountType()
}ZaApp.getInstance().dialogs.newAccountWizard.setObject(b);
ZaApp.getInstance().dialogs.newAccountWizard.popup()
}catch(c){this._handleException(c,"ZaAccountListController.prototype._newAccountListener",null,false)
}};
ZaAccountListController.prototype._newAliasListener=function(d){try{EmailAddr_XFormItem.resetDomainLists.call(this);
var c=new ZaAlias();
c.getAttrs={all:true};
c.setAttrs={all:true};
c._defaultValues={attrs:{}};
c.rights={};
if(!ZaApp.getInstance().dialogs.newAliasDialog){ZaApp.getInstance().dialogs.newAliasDialog=new ZaNewAliasXDialog(this._container,"550px","100px",ZaMsg.New_Alias_Title);
ZaApp.getInstance().dialogs.newAliasDialog.registerCallback(DwtDialog.OK_BUTTON,ZaAlias.prototype.addAlias,c,ZaApp.getInstance().dialogs.newAliasDialog._localXForm)
}ZaApp.getInstance().dialogs.newAliasDialog.setObject(c);
ZaApp.getInstance().dialogs.newAliasDialog.popup()
}catch(b){this._handleException(b,"ZaAccountListController.prototype._newAliasListener",null,false)
}};
ZaAccountListController.prototype._newDistributionListListener=function(d){try{EmailAddr_XFormItem.resetDomainLists.call(this);
var c=new ZaDistributionList();
c.rights={};
c._defaultValues={attrs:{}};
c.loadNewObjectDefaults("name",ZaSettings.myDomainName);
c.rights[ZaDistributionList.RENAME_DL_RIGHT]=true;
c.rights[ZaDistributionList.REMOVE_DL_MEMBER_RIGHT]=true;
c.rights[ZaDistributionList.ADD_DL_MEMBER_RIGHT]=true;
c.rights[ZaDistributionList.GET_DL_MEMBERSHIP_RIGHT]=true;
if(!ZaApp.getInstance().dialogs.newDLWizard){ZaApp.getInstance().dialogs.newDLWizard=new ZaNewDLXWizard(this._container,c)
}ZaApp.getInstance().dialogs.newDLWizard.setObject(c);
ZaApp.getInstance().dialogs.newDLWizard.popup()
}catch(b){this._handleException(b,"ZaAccountListController.prototype._newDistributionListListener",null,false)
}};
ZaAccountListController.prototype._newResourceListener=function(d){try{EmailAddr_XFormItem.resetDomainLists.call(this);
var b=new ZaResource();
b.loadNewObjectDefaults("name",ZaSettings.myDomainName);
if(!ZaApp.getInstance().dialogs.newResourceWizard){ZaApp.getInstance().dialogs.newResourceWizard=new ZaNewResourceXWizard(this._container)
}ZaApp.getInstance().dialogs.newResourceWizard.setObject(b);
ZaApp.getInstance().dialogs.newResourceWizard.popup()
}catch(c){this._handleException(c,"ZaAccountListController.prototype._newResourceListener",null,false)
}};
ZaAccountListController.prototype._listSelectionListener=function(c){if(c.detail==DwtListView.ITEM_DBL_CLICKED){if(c.item){this._editItem(c.item)
}}else{if(this.changeAcStateAcId){AjxTimedAction.cancelAction(this.changeAcStateAcId);
this.changeAcStateAcId=null
}var b=new AjxTimedAction(this,ZaController.prototype.changeActionsState,[c]);
this.changeAcStateAcId=AjxTimedAction.scheduleAction(b,ZaController.CLICK_DELAY)
}};
ZaAccountListController.prototype._listActionListener=function(b){this.changeActionsState();
this._actionMenu.popup(0,b.docX,b.docY)
};
ZaAccountListController.prototype._editButtonListener=function(c){EmailAddr_XFormItem.resetDomainLists.call(this);
if(this._contentView.getSelectionCount()==1){var b=this._contentView.getSelection()[0];
this._editItem(b)
}};
ZaAccountListController.prototype._editItem=function(e){if(this.changeAcStateAcId){AjxTimedAction.cancelAction(this.changeAcStateAcId);
this.changeAcStateAcId=null
}var f=e.id;
if((e.type==ZaItem.ALIAS)&&e.attrs&&e.attrs[ZaAlias.A_AliasTargetId]){f=e.attrs[ZaAlias.A_AliasTargetId]
}var d=e.type;
var g=ZaAccountXFormView;
if(d==ZaItem.ACCOUNT){g=ZaAccountXFormView
}else{if(d==ZaItem.DL){g=ZaDLXFormView
}else{if(d==ZaItem.RESOURCE){g=ZaResourceXFormView
}else{if(d==ZaItem.ALIAS){if(e.attrs[ZaAlias.A_targetType]==ZaAlias.TARGET_TYPE_ACCOUNT){g=ZaAccountXFormView
}else{if(e.attrs[ZaAlias.A_targetType]==ZaAlias.TARGET_TYPE_DL){g=ZaDLXFormView
}else{if(e.attrs[ZaAlias.A_targetType]==ZaAlias.TARGET_TYPE_RESOURCE){g=ZaResourceXFormView
}}}}}}}try{if(!this.selectExistingTabByItemId(f,g)){if(d==ZaItem.ACCOUNT){ZaApp.getInstance().getAccountViewController().show(e,true)
}else{if(d==ZaItem.DL){ZaApp.getInstance().getDistributionListController().show(e,true)
}else{if(d==ZaItem.ALIAS){var c=e.getAliasTargetObj();
if(e.attrs[ZaAlias.A_targetType]==ZaAlias.TARGET_TYPE_ACCOUNT){ZaApp.getInstance().getAccountViewController().show(c,true)
}else{if(e.attrs[ZaAlias.A_targetType]==ZaAlias.TARGET_TYPE_DL){ZaApp.getInstance().getDistributionListController().show(c,true)
}else{if(e.attrs[ZaAlias.A_targetType]==ZaAlias.TARGET_TYPE_RESOURCE){ZaApp.getInstance().getResourceController(f).show(c,true)
}}}}else{if(d==ZaItem.RESOURCE){ZaApp.getInstance().getResourceController(f).show(e,true)
}}}}ZaZimbraAdmin.getInstance().getOverviewPanelController().addAccountItem(e)
}}catch(b){if(b.msg){ZaApp.getInstance().dialogs.errorMsgDlg=new ZaMsgDialog(ZaApp.getInstance().getAppCtxt().getShell(),null,[DwtDialog.OK_BUTTON],null,ZaId.CTR_PREFIX+ZaId.VIEW_ACCTLIST+"_errorMsg");
ZaApp.getInstance().dialogs.errorMsgDlg.setMessage(b.msg,null,DwtMessageDialog.TITLE[DwtMessageDialog.WARNING_STYLE]);
ZaApp.getInstance().dialogs.errorMsgDlg.popup()
}}};
ZaAccountListController.prototype._chngPwdListener=function(f){try{if(this._contentView.getSelectionCount()==1){this._chngPwdDlg=new ZaAccChangePwdXDlg(ZaApp.getInstance().getAppCtxt().getShell(),"400px","90px");
var e=this._contentView.getSelection()[0];
e.loadEffectiveRights("id",e.id,false);
this._chngPwdDlg.registerCallback(DwtDialog.OK_BUTTON,ZaAccountListController._changePwdOKCallback,this,e);
if(e.name!=undefined&&e.name.length>80){this._chngPwdDlg.setTitle(ZaMsg.CHNP_Title+" ("+AjxStringUtil.htmlEncode(e.name.substring(1,80))+"...)")
}else{if(e.name!=undefined){this._chngPwdDlg.setTitle(ZaMsg.CHNP_Title+" ("+AjxStringUtil.htmlEncode(e.name)+")")
}else{this._chngPwdDlg.setTitle(ZaMsg.CHNP_Title)
}}var h=new Object();
h[ZaAccount.A2_confirmPassword]="";
h.attrs={};
h.attrs[ZaAccount.A_password]="";
h.attrs[ZaAccount.A_zimbraPasswordMustChange]=false;
h.getAttrs=e.getAttrs;
h.setAttrs=e.setAttrs;
this._chngPwdDlg.setObject(h);
this._chngPwdDlg.popup()
}}catch(c){if(c.code&&(c.code==ZmCsfeException.SVC_AUTH_EXPIRED||c.code==ZmCsfeException.SVC_AUTH_REQUIRED||c.code==ZmCsfeException.NO_AUTH_TOKEN||c.code==ZmCsfeException.AUTH_TOKEN_CHANGED)){try{var b=false;
if(ZaApp.getInstance()!=null&&(c.code==ZmCsfeException.SVC_AUTH_EXPIRED||c.code==ZmCsfeException.AUTH_TOKEN_CHANGED)){ZmCsfeCommand.noAuth=true;
var g=ZaApp.getInstance().dialogs;
if(g!=undefined){for(var j in g){g[j].popdown()
}}this._loginDialog.registerCallback(this.loginCallback,this);
this._loginDialog.setError(ZaMsg.ERROR_SESSION_EXPIRED);
this._loginDialog.clearPassword()
}else{this._loginDialog.setError(null);
b=false
}this._loginDialog.setReloginMode(b);
this._showLoginDialog(b)
}catch(d){if(window.console&&window.console.log){console.log(d.code)
}}}else{this._handleException(c,"ZaAccountListController._chngPwdListenerLauncher",null,false)
}}};
ZaAccountListController.prototype._expireSessionListener=function(d){try{if(this._contentView.getSelectionCount()==1){var c=this._contentView.getSelection()[0];
if((c.type==ZaItem.ALIAS)&&(c.attrs[ZaAlias.A_targetType]==ZaItem.ACCOUNT)){if(!c.targetObj){c.targetObj=c.getAliasTargetObj()
}c=c.targetObj
}c.loadEffectiveRights("id",c.id,false);
if(ZaItem.hasWritePermission(ZaAccount.A_zimbraAuthTokenValidityValue,c)){ZaApp.getInstance().dialogs.confirmMessageDialog.setMessage(ZaMsg.WARN_EXPIRE_SESSIONS,DwtMessageDialog.WARNING_STYLE);
ZaApp.getInstance().dialogs.confirmMessageDialog.registerCallback(DwtDialog.YES_BUTTON,ZaAccountListController.prototype.expireSessions,this,[c]);
ZaApp.getInstance().dialogs.confirmMessageDialog.registerCallback(DwtDialog.NO_BUTTON,this.closeCnfrmDlg,this,null);
ZaApp.getInstance().dialogs.confirmMessageDialog.popup()
}else{this.popupMsgDialog(AjxMessageFormat.format(ZaMsg.ERROR_NO_PERMISSION_FOR_OPERATION_ON,[c.name?c.name:c.attrs[ZaAccount.A_accountName]]),true)
}}}catch(b){this._handleException(b,"ZaAccountListController._expireSessionListener",null,false)
}};
ZaAccountListController.prototype.expireSessions=function(d){try{ZaApp.getInstance().dialogs.confirmMessageDialog.popdown();
mods={};
mods[ZaAccount.A_zimbraAuthTokenValidityValue]=(!d.attrs[ZaAccount.A_zimbraAuthTokenValidityValue]?1:((parseInt(d.attrs[ZaAccount.A_zimbraAuthTokenValidityValue])+1)%9));
d.modify(mods,d);
if(ZaZimbraAdmin.currentAdminAccount.id==d.id){var b={msg:ZaMsg.EX_EXPIRE_OWN_SESSIONS,code:ZmCsfeException.SVC_AUTH_EXPIRED,method:null,detail:"",data:"",trace:""};
throw new ZmCsfeException(b)
}ZaApp.getInstance().getAppCtxt().getAppController().setActionStatusMsg(AjxMessageFormat.format(ZaMsg.SessionInvalid,[d.name]))
}catch(c){this._handleException(c,"ZaAccountListController.expireSessions",null,false)
}};
ZaAccountListController._viewMailListenerLauncher=function(n){try{var h;
var l;
if(n.type==ZaItem.ACCOUNT||n.type==ZaItem.RESOURCE){h=ZaAccount.getViewMailLink(n.id);
l=n.id
}else{if(n.type==ZaItem.ALIAS&&n.attrs[ZaAlias.A_AliasTargetId]){h=ZaAccount.getViewMailLink(n.attrs[ZaAlias.A_AliasTargetId]);
l=n.attrs[ZaAlias.A_AliasTargetId];
n=new ZaAccount()
}else{return
}}if(!n[ZaAccount.A2_publicMailURL]){n.load("id",l)
}if(!n[ZaAccount.A2_publicMailURL]){n[ZaAccount.A2_publicMailURL]=["http://",ZaAccount.getDomain(n[ZaAccount.A_name]),":7070"].join("")
}var e=n[ZaAccount.A2_publicMailURL];
if(Ip_XModelItem.EXACT_IP_ADDRESS_RE.test(location.hostname)&&e){try{var r=e.indexOf("//");
if(r!=-1){r=r+2
}else{r=0
}var k=e.indexOf(":",r);
if(k==-1){k=e.indexOf("/",r)
}var b;
if(k!=-1){b=e.substring(r,k)
}else{b=e.substring(r)
}var q=ZaServer.getAll().getArray();
var d="";
if(q.length>1){var s=false;
for(var g=0;
g<q.length;
g++){if(!q[g].attrs[ZaServer.A_zimbraMailboxServiceEnabled]){continue
}if(q[g].attrs[ZaServer.A_ServiceHostname]==b){s=true
}if(!s&&q[g].attrs[ZaServer.A_Pop3BindAddress]){for(var f=0;
f<q[g].attrs[ZaServer.A_Pop3BindAddress].length;
f++){if(q[g].attrs[ZaServer.A_Pop3BindAddress][f]==b){s=true;
break
}}}if(s){q[g].load();
if(q[g].nifs){for(var f=0;
f<q[g].nifs.length;
f++){if(q[g].nifs[f].attrs.addr&&(q[g].nifs[f].attrs.addr!="127.0.0.1")){d=q[g].nifs[f].attrs.addr
}break
}}break
}}}else{d=location.hostname
}if(b&&d){e=e.replace(b,d)
}}catch(c){}}if(!h.authToken||!h.lifetime){throw new AjxException(ZaMsg.ERROR_FAILED_TO_GET_CREDENTIALS,AjxException.UNKNOWN,"ZaAccountListController.prototype._viewMailListener")
}var p=[e,"/service/preauth?authtoken=",h.authToken,"&isredirect=1&adminPreAuth=1"].join("");
p=AjxStringUtil.trim(p,true);
var m=window.open(p,"_blank")
}catch(o){this._handleException(o,"ZaAccountListController._viewMailListenerLauncher",null,false)
}};
ZaAccountListController.prototype._deleteButtonListener=function(g){this._removeList=new Array();
this._itemsInTabList=[];
this._haveAliases=false;
this._haveAccounts=false;
this._haveDls=false;
this._haveDomains=false;
this._haveCoses=false;
if(this._contentView.getSelectionCount()>0){var f=this._contentView.getSelection();
var d=f.length;
for(var c=0;
c<d;
c++){var e=f[c];
if(e){if(ZaApp.getInstance().getTabGroup()&&ZaApp.getInstance().getTabGroup().getTabByItemId(e.id)){this._itemsInTabList.push(e)
}else{this._removeList.push(e);
if(!this._haveAliases&&e.type==ZaItem.ALIAS){this._haveAliases=true
}else{if(!this._haveAccounts&&e.type==ZaItem.ACCOUNT){this._haveAccounts=true
}else{if(!this._haveDls&&e.type==ZaItem.DL){this._haveDls=true
}else{if(!this._haveDomains&&e.type==ZaItem.DOMAIN){this._haveDomains=true
}else{if(!this._haveCoses&&e.type==ZaItem.COS){this._haveCoses=true
}}}}}}}}if(this._haveDomains&&!(this._haveAliases||this._haveAccounts||this._haveDls||this._haveCoses)){var b=ZaApp.getInstance().getDomainListController();
b._deleteButtonListener(g);
return
}}if(this._itemsInTabList.length>0){if(!ZaApp.getInstance().dialogs.ConfirmDeleteItemsInTabDialog){ZaApp.getInstance().dialogs.ConfirmDeleteItemsInTabDialog=new ZaMsgDialog(ZaApp.getInstance().getAppCtxt().getShell(),null,[DwtDialog.CANCEL_BUTTON],[ZaMsgDialog.CLOSE_TAB_DELETE_BUTTON_DESC,ZaMsgDialog.NO_DELETE_BUTTON_DESC],ZaId.CTR_PREFIX+ZaId.VIEW_ACCTLIST+"_ConfirmDeleteItemsInTab")
}var h=ZaMsg.dl_warning_delete_accounts_in_tab;
h+=ZaAccountListController.getDlMsgFromList(this._itemsInTabList);
ZaApp.getInstance().dialogs.ConfirmDeleteItemsInTabDialog.setMessage(h,DwtMessageDialog.WARNING_STYLE);
ZaApp.getInstance().dialogs.ConfirmDeleteItemsInTabDialog.registerCallback(ZaMsgDialog.CLOSE_TAB_DELETE_BUTTON,ZaAccountListController.prototype._closeTabsBeforeRemove,this);
ZaApp.getInstance().dialogs.ConfirmDeleteItemsInTabDialog.registerCallback(ZaMsgDialog.NO_DELETE_BUTTON,ZaAccountListController.prototype._deleteAccountsInRemoveList,this);
ZaApp.getInstance().dialogs.ConfirmDeleteItemsInTabDialog.popup()
}else{this._deleteAccountsInRemoveList()
}};
ZaAccountListController.prototype._closeTabsBeforeRemove=function(){this.closeTabsInRemoveList();
this._deleteAccountsInRemoveList()
};
ZaAccountListController.prototype._deleteAccountsInRemoveList=function(){if(ZaApp.getInstance().dialogs.ConfirmDeleteItemsInTabDialog){ZaApp.getInstance().dialogs.ConfirmDeleteItemsInTabDialog.popdown()
}if(this._removeList.length>0){var d;
if(this._haveDls&&!(this._haveAccounts||this._haveAliases||this._haveDomains||this._haveCoses)){d=ZaMsg.Q_DELETE_DLS
}else{if(this._haveAccounts&&!(this._haveDls||this._haveAliases||this._haveDomains||this._haveCoses)){d=ZaMsg.Q_DELETE_ACCOUNTS
}else{if(this._haveAliases&&!(this._haveDls||this._haveAccounts||this._haveDomains||this._haveCoses)){d=ZaMsg.Q_DELETE_ALIASES
}else{if(this._haveDomains&&!(this._haveAliases||this._haveAccounts||this._haveDls||this._haveCoses)){d=ZaMsg.Q_DELETE_DOMAINS
}else{if(this._haveCoses&&!(this._haveAliases||this._haveAccounts||this._haveDomains||this._haveDls)){d=ZaMsg.Q_DELETE_COSES
}else{d=ZaMsg.Q_DELETE_OBJECTS
}}}}}d+=ZaAccountListController.getDlMsgFromList(this._removeList);
var c=this._removeList.length;
var e=[];
for(var b=0;
b<c;
b++){if(this._removeList[b].attrs[ZaAccount.A_zimbraIsSystemResource]&&this._removeList[b].attrs[ZaAccount.A_zimbraIsSystemResource]=="TRUE"){d+="<br/>";
d+=ZaMsg.WARN_DELETING_SYSTEM_RESOURCES;
break
}}ZaApp.getInstance().dialogs.confirmMessageDialog2.setMessage(d,DwtMessageDialog.INFO_STYLE);
ZaApp.getInstance().dialogs.confirmMessageDialog2.registerCallback(DwtDialog.YES_BUTTON,ZaAccountListController.prototype._deleteAccountsCallback,this);
ZaApp.getInstance().dialogs.confirmMessageDialog2.registerCallback(DwtDialog.NO_BUTTON,ZaAccountListController.prototype._donotDeleteAccountsCallback,this);
ZaApp.getInstance().dialogs.confirmMessageDialog2.popup()
}};
ZaAccountListController.getDlMsgFromList=function(c){var f="<br><ul>";
var e=0;
for(var d in c){if(e>19){f+="<li>...</li>";
break
}f+="<li>";
var g=c[d].attrs[ZaAccount.A_displayname]?c[d].attrs[ZaAccount.A_displayname]:c[d].name;
if(g.length>50){var h=0;
var b=50;
do{if(b>=g.length){f+=AjxStringUtil.htmlEncode(g.slice(h))
}else{f+=AjxStringUtil.htmlEncode(g.slice(h,b))
}h=b;
b+=50;
f+="<br />"
}while(h<g.length)
}else{f+=AjxStringUtil.htmlEncode(g)
}f+="</li>";
e++
}f+="</ul>";
return f
};
ZaAccountListController.prototype._deleteAccountsCallback=function(){ZaApp.getInstance().dialogs.removeProgressDlg=new DeleteAcctsPgrsDlg(this._container,"500px","300px");
ZaApp.getInstance().dialogs.confirmMessageDialog2.popdown();
ZaApp.getInstance().dialogs.removeProgressDlg.popup();
ZaApp.getInstance().dialogs.removeProgressDlg.setObject(this._removeList);
ZaApp.getInstance().dialogs.removeProgressDlg.startDeletingAccounts();
if(this._haveCoses){var b=ZaApp.getInstance()._appCtxt.getAppController().getOverviewPanelController();
b.removeCosTreeItems(this._removeList)
}};
ZaAccountListController.prototype._donotDeleteAccountsCallback=function(){this._removeList=new Array();
ZaApp.getInstance().dialogs.confirmMessageDialog2.popdown()
};
ZaAccountListController._changePwdOKCallback=function(k){if(this._chngPwdDlg){try{if(!this._chngPwdDlg.getPassword()||this._chngPwdDlg.getPassword().length<1){ZaApp.getInstance().dialogs.errorMsgDlg=new ZaMsgDialog(ZaApp.getInstance().getAppCtxt().getShell(),null,[DwtDialog.OK_BUTTON],null,ZaId.CTR_PREFIX+ZaId.VIEW_ACCTLIST+"_errorMsg");
ZaApp.getInstance().dialogs.errorMsgDlg.setMessage(ZaMsg.ERROR_PASSWORD_REQUIRED,null,DwtMessageDialog.TITLE[DwtMessageDialog.CRITICAL_STYLE]);
ZaApp.getInstance().dialogs.errorMsgDlg.popup()
}else{if(this._chngPwdDlg.getPassword()!=this._chngPwdDlg.getConfirmPassword()){ZaApp.getInstance().dialogs.errorMsgDlg=new ZaMsgDialog(ZaApp.getInstance().getAppCtxt().getShell(),null,[DwtDialog.OK_BUTTON],null,ZaId.CTR_PREFIX+ZaId.VIEW_ACCTLIST+"_errorMsg");
ZaApp.getInstance().dialogs.errorMsgDlg.setMessage(ZaMsg.ERROR_PASSWORD_MISMATCH,null,DwtMessageDialog.TITLE[DwtMessageDialog.CRITICAL_STYLE]);
ZaApp.getInstance().dialogs.errorMsgDlg.popup()
}else{var h=null;
var d=null;
var f=null;
k.refresh(true,false);
if(k.attrs[ZaAccount.A_zimbraMinPwdLength]!=null){f=k.attrs[ZaAccount.A_zimbraMinPwdLength]
}if(k.attrs[ZaAccount.A_zimbraMaxPwdLength]!=null){d=k.attrs[ZaAccount.A_zimbraMaxPwdLength]
}if(f==null){f=k._defaultValues[ZaAccount.A_zimbraMinPwdLength]
}if(d==null){f=k._defaultValues[ZaAccount.A_zimbraMaxPwdLength]
}if(d==null){d=Number.POSITIVE_INFINITY
}if(f==null){f=1
}var g=this._chngPwdDlg.getPassword();
if(g.length<f||AjxStringUtil.trim(g).length<f){var b;
if(f>1){b=String(ZaMsg.NAD_passMinLengthMsg_p).replace("{0}",f)
}else{b=String(ZaMsg.NAD_passMinLengthMsg_s).replace("{0}",f)
}ZaApp.getInstance().dialogs.errorMsgDlg=new ZaMsgDialog(ZaApp.getInstance().getAppCtxt().getShell(),null,[DwtDialog.OK_BUTTON],null,ZaId.CTR_PREFIX+ZaId.VIEW_ACCTLIST+"_errorMsg");
ZaApp.getInstance().dialogs.errorMsgDlg.setMessage(ZaMsg.ERROR_PASSWORD_TOOSHORT+"<br>"+b,null,DwtMessageDialog.CRITICAL_STYLE,null);
ZaApp.getInstance().dialogs.errorMsgDlg.popup()
}else{if(AjxStringUtil.trim(g).length>d){ZaApp.getInstance().dialogs.errorMsgDlg=new ZaMsgDialog(ZaApp.getInstance().getAppCtxt().getShell(),null,[DwtDialog.OK_BUTTON],null,ZaId.CTR_PREFIX+ZaId.VIEW_ACCTLIST+"_errorMsg");
var l;
if(d>1){l=String(ZaMsg.NAD_passMinLengthMsg_p).replace("{0}",f)
}else{l=String(ZaMsg.NAD_passMinLengthMsg_s).replace("{0}",f)
}ZaApp.getInstance().dialogs.errorMsgDlg.setMessage(ZaMsg.ERROR_PASSWORD_TOOLONG+"<br>"+l,null,DwtMessageDialog.CRITICAL_STYLE,null);
ZaApp.getInstance().dialogs.errorMsgDlg.popup()
}else{k.changePassword(g);
this._chngPwdDlg.popdown();
ZaApp.getInstance().getAppCtxt().getAppController().setActionStatusMsg(AjxMessageFormat.format(ZaMsg.PasswordModified,[k.name]))
}}}}if(this._chngPwdDlg.getMustChangePassword()){var j=new Object();
j[ZaAccount.A_zimbraPasswordMustChange]="TRUE";
k.modify(j)
}}catch(e){if(e.code==ZmCsfeException.ACCT_INVALID_PASSWORD){var c=ZaMsg.ERROR_PASSWORD_INVALID;
if(e.detail){c+="<br>Details:<br>";
c+=e.detail
}ZaApp.getInstance().dialogs.errorDialog.setMessage(c,null,DwtMessageDialog.CRITICAL_STYLE,null);
ZaApp.getInstance().dialogs.errorDialog.popup()
}else{this._handleException(e,"ZaAccountListController._changePwdOKCallback",null,false)
}return
}}};
ZaAccountListController.prototype.getPopUpOperation=function(){return this._popupOperations
};
ZaAccountListController.changeActionsStateMethod=function(){var f=this._contentView.getSelectionCount();
if(f==1){var g=this._contentView.getSelection()[0];
if(g){if(g.type==ZaItem.ALIAS||g.type==ZaItem.DL){if(this._popupOperations[ZaOperation.CHNG_PWD]){this._popupOperations[ZaOperation.CHNG_PWD].enabled=false
}}if(((g.type==ZaItem.ALIAS)&&(g.attrs[ZaAlias.A_targetType]==ZaItem.DL))||(g.type==ZaItem.DL)){if(this._popupOperations[ZaOperation.EXPIRE_SESSION]){this._popupOperations[ZaOperation.EXPIRE_SESSION].enabled=false
}}if((g.type==ZaItem.ALIAS)&&(g.attrs[ZaAlias.A_targetType]==ZaItem.RESOURCE)){if(this._popupOperations[ZaOperation.EXPIRE_SESSION]){this._popupOperations[ZaOperation.EXPIRE_SESSION].enabled=false
}}if(g.type==ZaItem.DL){if(this._popupOperations[ZaOperation.MOVE_ALIAS]){this._popupOperations[ZaOperation.MOVE_ALIAS].enabled=false
}if(!ZaItem.hasRight(ZaAccount.RIGHT_DELETE_DL,g)){if(this._popupOperations[ZaOperation.DELETE]){this._popupOperations[ZaOperation.DELETE].enabled=false
}}}if(g.type==ZaItem.ALIAS&&g.attrs[ZaAlias.A_targetType]==ZaItem.DL){if(!ZaItem.hasRight(ZaDistributionList.REMOVE_DL_ALIAS_RIGHT,g.getAliasTargetObj())){if(this._popupOperations[ZaOperation.DELETE]){this._popupOperations[ZaOperation.DELETE].enabled=false
}}}if(g.type==ZaItem.ACCOUNT){var c=false;
var e=ZaAccount.getDomain(g.toString());
var h=ZaAccountXFormView.isAuthfromInternal(e);
if(ZaZimbraAdmin.currentAdminAccount.attrs[ZaAccount.A_zimbraIsAdminAccount]=="TRUE"){c=true
}else{if(AjxUtil.isEmpty(g.rights)){g.loadEffectiveRights("id",g.id,false)
}}if(!c){if(!ZaItem.hasRight(ZaAccount.DELETE_ACCOUNT_RIGHT,g)){if(this._popupOperations[ZaOperation.DELETE]){this._popupOperations[ZaOperation.DELETE].enabled=false
}}if(!ZaItem.hasAnyRight([ZaAccount.SET_PASSWORD_RIGHT,ZaAccount.CHANGE_PASSWORD_RIGHT],g)&&h){if(this._popupOperations[ZaOperation.CHNG_PWD]){this._popupOperations[ZaOperation.CHNG_PWD].enabled=false
}}if(!ZaItem.hasWritePermission(ZaAccount.A_zimbraAuthTokenValidityValue,g)){if(this._popupOperations[ZaOperation.EXPIRE_SESSION]){this._popupOperations[ZaOperation.EXPIRE_SESSION].enabled=false
}}}else{if(!h){if(this._popupOperations[ZaOperation.CHNG_PWD]){this._popupOperations[ZaOperation.CHNG_PWD].enabled=false
}}}}else{if((g.type==ZaItem.ALIAS)&&(g.attrs[ZaAlias.A_targetType]==ZaItem.ACCOUNT)){if(!g.targetObj){g.targetObj=g.getAliasTargetObj()
}var c=false;
if(ZaZimbraAdmin.currentAdminAccount.attrs[ZaAccount.A_zimbraIsAdminAccount]=="TRUE"){c=true
}else{if(AjxUtil.isEmpty(g.targetObj.rights)){g.targetObj.loadEffectiveRights("id",g.id,false)
}}if(!c){if(!ZaItem.hasRight(ZaAccount.DELETE_ACCOUNT_RIGHT,g.targetObj)){if(this._popupOperations[ZaOperation.DELETE]){this._popupOperations[ZaOperation.DELETE].enabled=false
}}if(!ZaItem.hasAnyRight([ZaAccount.SET_PASSWORD_RIGHT,ZaAccount.CHANGE_PASSWORD_RIGHT],g.targetObj)){if(this._popupOperations[ZaOperation.CHNG_PWD]){this._popupOperations[ZaOperation.CHNG_PWD].enabled=false
}}}}else{if((g.type==ZaItem.ALIAS)&&(g.attrs[ZaAlias.A_targetType]==ZaItem.RESOURCE)){if(!g.targetObj){g.targetObj=g.getAliasTargetObj()
}var c=false;
if(ZaZimbraAdmin.currentAdminAccount.attrs[ZaAccount.A_zimbraIsAdminAccount]=="TRUE"){c=true
}else{if(AjxUtil.isEmpty(g.targetObj.rights)){g.targetObj.loadEffectiveRights("id",g.id,false)
}}if(!c){if(!c){if(!ZaItem.hasRight(ZaResource.DELETE_CALRES_RIGHT,g.targetObj)){if(this._popupOperations[ZaOperation.DELETE]){this._popupOperations[ZaOperation.DELETE].enabled=false
}}if(!ZaItem.hasRight(ZaResource.SET_CALRES_PASSWORD_RIGHT,g.targetObj)){if(this._popupOperations[ZaOperation.CHNG_PWD]){this._popupOperations[ZaOperation.CHNG_PWD].enabled=false
}}}}}else{if(g.type==ZaItem.RESOURCE){var c=false;
if(ZaZimbraAdmin.currentAdminAccount.attrs[ZaAccount.A_zimbraIsAdminAccount]=="TRUE"){c=true
}else{if(AjxUtil.isEmpty(g.rights)){g.loadEffectiveRights("id",g.id,false)
}}if(!c){if(!ZaItem.hasRight(ZaResource.DELETE_CALRES_RIGHT,g)){if(this._popupOperations[ZaOperation.DELETE]){this._popupOperations[ZaOperation.DELETE].enabled=false
}}if(!ZaItem.hasRight(ZaResource.SET_CALRES_PASSWORD_RIGHT,g)){if(this._popupOperations[ZaOperation.CHNG_PWD]){this._popupOperations[ZaOperation.CHNG_PWD].enabled=false
}}}}}}}}else{if(this._popupOperations[ZaOperation.EXPIRE_SESSION]){this._popupOperations[ZaOperation.EXPIRE_SESSION].enabled=false
}if(this._popupOperations[ZaOperation.EDIT]){this._popupOperations[ZaOperation.EDIT].enabled=false
}if(this._popupOperations[ZaOperation.CHNG_PWD]){this._popupOperations[ZaOperation.CHNG_PWD].enabled=false
}if(this._popupOperations[ZaOperation.MOVE_ALIAS]){this._popupOperations[ZaOperation.MOVE_ALIAS].enabled=false
}if(this._popupOperations[ZaOperation.DELETE]){this._popupOperations[ZaOperation.DELETE].enabled=false
}}}else{if(f>1){if(this._popupOperations[ZaOperation.EXPIRE_SESSION]){this._popupOperations[ZaOperation.EXPIRE_SESSION].enabled=false
}if(this._popupOperations[ZaOperation.EDIT]){this._popupOperations[ZaOperation.EDIT].enabled=false
}if(this._popupOperations[ZaOperation.CHNG_PWD]){this._popupOperations[ZaOperation.CHNG_PWD].enabled=false
}if(this._popupOperations[ZaOperation.MOVE_ALIAS]){this._popupOperations[ZaOperation.MOVE_ALIAS].enabled=false
}}else{if(this._popupOperations[ZaOperation.EXPIRE_SESSION]){this._popupOperations[ZaOperation.EXPIRE_SESSION].enabled=false
}if(this._popupOperations[ZaOperation.EDIT]){this._popupOperations[ZaOperation.EDIT].enabled=false
}if(this._popupOperations[ZaOperation.DELETE]){this._popupOperations[ZaOperation.DELETE].enabled=false
}if(this._popupOperations[ZaOperation.CHNG_PWD]){this._popupOperations[ZaOperation.CHNG_PWD].enabled=false
}if(this._popupOperations[ZaOperation.MOVE_ALIAS]){this._popupOperations[ZaOperation.MOVE_ALIAS].enabled=false
}}}for(var d=0;
d<f;
d++){var b=this._contentView.getSelection()[d];
if(b&&b.type==ZaItem.ACCOUNT){if(b.attrs[ZaAccount.A_zimbraIsSystemAccount]=="TRUE"){this._popupOperations[ZaOperation.DELETE].enabled=false
}}}};
ZaController.changeActionsStateMethods.ZaAccountListController.push(ZaAccountListController.changeActionsStateMethod);
ZaAccountListController.prototype._moveAliasListener=function(d){try{var c;
var c=this._contentView.getSelection()[0];
if(!c||c.type!=ZaItem.ALIAS){return
}if(!ZaApp.getInstance().dialogs.moveAliasDialog){ZaApp.getInstance().dialogs.moveAliasDialog=new MoveAliasXDialog(this._container,"400px","300px")
}ZaApp.getInstance().dialogs.moveAliasDialog.setAlias(c);
ZaApp.getInstance().dialogs.moveAliasDialog.popup()
}catch(b){this._handleException(b,"ZaAccountListController.prototype._moveAliasListener",null,false)
}return
}
}if(AjxPackage.define("zimbraAdmin.accounts.controller.ZaAccountViewController")){ZaAccountViewController=function(c,b){ZaXFormViewController.call(this,c,b,"ZaAccountViewController");
this._UICreated=false;
this.objType=ZaEvent.S_ACCOUNT;
this._helpURL=[location.pathname,ZaUtil.HELP_URL,ZaAccountViewController.helpURL,"?locid=",AjxEnv.DEFAULT_LOCALE].join("");
this._helpButtonText=ZaMsg.helpEditAccounts;
this.deleteMsg=ZaMsg.Q_DELETE_ACCOUNT;
this.tabConstructor=ZaAccountXFormView
};
ZaAccountViewController.prototype=new ZaXFormViewController();
ZaAccountViewController.prototype.constructor=ZaAccountViewController;
ZaAccountViewController.helpURL="managing_accounts/editing_accounts.htm";
ZaController.changeActionsStateMethods.ZaAccountViewController=new Array();
ZaController.setViewMethods.ZaAccountViewController=new Array();
ZaController.initToolbarMethods.ZaAccountViewController=new Array();
ZaController.initPopupMenuMethods.ZaAccountViewController=new Array();
ZaXFormViewController.preSaveValidationMethods.ZaAccountViewController=new Array();
ZaAccountViewController.prototype.show=function(d,c,b){this._setView(d,c,b)
};
ZaAccountViewController.initPopupMenuMethod=function(){var b=false;
if(ZaZimbraAdmin.currentAdminAccount.attrs[ZaAccount.A_zimbraIsAdminAccount]=="TRUE"){b=true
}else{b=ZaZimbraAdmin.canCreateAccount()
}this._popupOperations[ZaOperation.SAVE]=new ZaOperation(ZaOperation.SAVE,ZaMsg.TBB_Save,ZaMsg.ALTBB_Save_tt,"Save","SaveDis",new AjxListener(this,this.saveButtonListener));
this._popupOperations[ZaOperation.CLOSE]=new ZaOperation(ZaOperation.CLOSE,ZaMsg.TBB_Close,ZaMsg.ALTBB_Close_tt,"Close","CloseDis",new AjxListener(this,this.closeButtonListener));
if(b){this._popupOperations[ZaOperation.NEW_MENU]=new ZaOperation(ZaOperation.NEW,ZaMsg.TBB_New,ZaMsg.ACTBB_New_tt,"Account","AccountDis",new AjxListener(this,ZaAccountViewController.prototype._newButtonListener));
this._popupOrder.push(ZaOperation.NEW_MENU)
}this._popupOperations[ZaOperation.DELETE]=new ZaOperation(ZaOperation.DELETE,ZaMsg.TBB_Delete,ZaMsg.ACTBB_Delete_tt,"Delete","DeleteDis",new AjxListener(this,this.deleteButtonListener));
this._popupOrder.push(ZaOperation.SAVE);
this._popupOrder.push(ZaOperation.CLOSE);
this._popupOrder.push(ZaOperation.DELETE);
this._popupOperations[ZaOperation.EXPIRE_SESSION]=new ZaOperation(ZaOperation.EXPIRE_SESSION,ZaMsg.ACTBB_ExpireSessions,ZaMsg.ACTBB_ExpireSessions_tt,"ExpireSession","ExpireSessionDis",new AjxListener(this,ZaAccountViewController.prototype._expireSessionListener));
this._popupOrder.push(ZaOperation.EXPIRE_SESSION);
if(ZaItem.hasRight(ZaAccount.REINDEX_MBX_RIGHT,this._currentObject)){this._popupOperations[ZaOperation.REINDEX_MAILBOX]=new ZaOperation(ZaOperation.REINDEX_MAILBOX,ZaMsg.ACTBB_ReindexMbx,ZaMsg.ACTBB_ReindexMbx_tt,"ReindexMailboxes","ReindexMailboxes",new AjxListener(this,ZaAccountViewController.prototype._reindexMbxListener));
this._popupOrder.push(ZaOperation.REINDEX_MAILBOX)
}};
ZaController.initPopupMenuMethods.ZaAccountViewController.push(ZaAccountViewController.initPopupMenuMethod);
ZaAccountViewController.prototype.deleteButtonListener=function(b){if(this._currentObject.id){if(this._currentObject[ZaAccount.A2_zimbra_ds]||this._currentObject[ZaAccount.A2_ldap_ds]){ZaApp.getInstance().dialogs.confirmMessageDialog.setMessage(AjxMessageFormat.format(ZaMsg.WARN_DELETING_GAL_SYNC,[this._currentObject.name]),DwtMessageDialog.WARNING_STYLE)
}else{if(this._currentObject.attrs[ZaAccount.A_zimbraIsSystemResource]&&this._currentObject.attrs[ZaAccount.A_zimbraIsSystemResource]=="TRUE"){ZaApp.getInstance().dialogs.confirmMessageDialog.setMessage(AjxMessageFormat.format(ZaMsg.WARN_DELETING_SYSTEM_RESOURCE,[this._currentObject.name]),DwtMessageDialog.WARNING_STYLE)
}else{ZaApp.getInstance().dialogs.confirmMessageDialog.setMessage(this.deleteMsg,DwtMessageDialog.INFO_STYLE)
}}ZaApp.getInstance().dialogs.confirmMessageDialog.registerCallback(DwtDialog.YES_BUTTON,this.deleteAndGoAway,this,null);
ZaApp.getInstance().dialogs.confirmMessageDialog.registerCallback(DwtDialog.NO_BUTTON,this.closeCnfrmDlg,this,null);
ZaApp.getInstance().dialogs.confirmMessageDialog.popup()
}else{ZaApp.getInstance().popView()
}};
ZaAccountViewController.setViewMethod=function(d){try{this._currentObject=d;
this._initPopupMenu();
if(!d[ZaModel.currentTab]){d[ZaModel.currentTab]="1"
}try{if(!AjxUtil.isEmpty(d.id)){var c=d.isExternal;
d.refresh(false,true);
d.isExternal=c
}this._contentView=this._view=new this.tabConstructor(this._container,d);
var e=new Object();
e[ZaAppViewMgr.C_APP_CONTENT]=this._view;
ZaApp.getInstance().getAppViewMgr().createView(this.getContentViewId(),e);
ZaApp.getInstance()._controllers[this.getContentViewId()]=this;
ZaApp.getInstance().pushView(this.getContentViewId())
}catch(b){this._handleException(b,null,null,false);
if(b.code==ZmCsfeException.SVC_PERM_DENIED){if(this._contentView&&this.getContentViewId()){ZaApp.getInstance().popView()
}return
}}ZaZimbraAdmin.getInstance().getCurrentAppBar().enableButton(ZaOperation.SAVE,false);
this._view.setDirty(false);
d.attrs[ZaAccount.A_password]=null;
d[ZaModel.currentTab]="1";
this._view.setObject(d)
}catch(b){this._handleException(b,"ZaAccountViewController.prototype._setView",null,false)
}this._cosChanged=false;
this._domainsChanged=false
};
ZaController.setViewMethods.ZaAccountViewController.push(ZaAccountViewController.setViewMethod);
ZaAccountViewController.changeActionsStateMethod=function(){if(!this._currentObject){return
}var e=true;
if(!ZaItem.hasRight(ZaAccount.DELETE_ACCOUNT_RIGHT,this._currentObject)){e=false
}var h=this._view.getObject();
if(h.attrs!=null&&h.attrs[ZaAccount.A_mail]!=null){var f=h.attrs[ZaAccount.A_mail];
var d=h.name;
var g=ZaAccount.getDomain(d);
var b=ZaDomain.getDomainByName(g);
if(f=="admin@"+g||f=="root@"+g||f=="postmaster@"+g||f=="domainadmin@"+g){e=false
}if(b.attrs[ZaDomain.A_zimbraGalAccountId]){if(f==b.attrs[ZaDomain.A_zimbraGalAccountId]){e=false
}}if(ZaApp.getInstance().getGlobalConfig().attrs[ZaGlobalConfig.A_zimbraSpamAccount]){if(f==ZaApp.getInstance().getGlobalConfig().attrs[ZaGlobalConfig.A_zimbraSpamAccount].toString()){e=false
}}if(ZaApp.getInstance().getGlobalConfig().attrs[ZaGlobalConfig.A_zimbraHamAccount]){if(f==ZaApp.getInstance().getGlobalConfig().attrs[ZaGlobalConfig.A_zimbraHamAccount].toString()){e=false
}}if(ZaApp.getInstance().getGlobalConfig().attrs[ZaGlobalConfig.A_zimbraAmavisQAccount]){if(f==ZaApp.getInstance().getGlobalConfig().attrs[ZaGlobalConfig.A_zimbraAmavisQAccount].toString()){e=false
}}if(ZaApp.getInstance().getGlobalConfig().attrs[ZaGlobalConfig.A_zimbraWikiAccount]){if(f==ZaApp.getInstance().getGlobalConfig().attrs[ZaGlobalConfig.A_zimbraWikiAccount].toString()){e=false
}}if(h.attrs[ZaAccount.A_isCCAccount]){e=false
}}if(h.attrs&&h.attrs[ZaAccount.A_zimbraIsSystemAccount]=="TRUE"){e=false
}if(!e){if(this._popupOperations[ZaOperation.DELETE]){this._popupOperations[ZaOperation.DELETE].enabled=e
}}if(!ZaItem.hasRight(ZaAccount.REINDEX_MBX_RIGHT,this._currentObject)){if(this._popupOperations[ZaOperation.REINDEX_MAILBOX]){this._popupOperations[ZaOperation.REINDEX_MAILBOX].enabled=e
}}if(!ZaItem.hasWritePermission(ZaAccount.A_zimbraAuthTokenValidityValue,this._currentObject)){if(this._popupOperations[ZaOperation.EXPIRE_SESSION]){this._popupOperations[ZaOperation.EXPIRE_SESSION].enabled=false
}}var c=(this._view&&this._view.isDirty());
if(this._popupOperations[ZaOperation.SAVE]){this._popupOperations[ZaOperation.SAVE].enabled=c
}ZaZimbraAdmin.getInstance().getCurrentAppBar().enableButton(ZaOperation.SAVE,false)
};
ZaController.changeActionsStateMethods.ZaAccountViewController.push(ZaAccountViewController.changeActionsStateMethod);
ZaAccountViewController.prototype._saveChanges=function(){if(this._view.getMyForm().hasErrors()){var w=this._view.getMyForm().getItemsInErrorState();
var p=ZaMsg.CORRECT_ERRORS;
p+="<br><ul>";
var r=0;
for(var x in w){if(r>19){p+="<li>...</li>";
break
}if(x=="size"){continue
}var j=w[x].getInheritedProperty("msgName");
if(!j&&w[x].getParentItem()){j=w[x].getParentItem().getInheritedProperty("msgName")
}if(j){if(j.substring(j.length-1,1)==":"){j=j.substring(0,j.length-1)
}}if(j){p+="<li>";
p+=j;
p+="</li>"
}r++
}p+="</ul>";
this.popupMsgDialog(p,true);
return false
}var y=this._view.getObject();
if(y.attrs==null){this._errorDialog.setMessage(ZaMsg.ERROR_UNKNOWN,null,DwtMessageDialog.CRITICAL_STYLE,null);
this._errorDialog.popup();
return false
}var h=new Object();
if(!AjxUtil.isEmpty(y.attrs[ZaAccount.A_COSId])&&!ZaItem.ID_PATTERN.test(y.attrs[ZaAccount.A_COSId])){var c=ZaCos.getCosByName(y.attrs[ZaAccount.A_COSId]);
if(c){y.attrs[ZaAccount.A_COSId]=c.id;
y._defaultValues=c
}else{this.popupErrorDialog(AjxMessageFormat.format(ZaMsg.ERROR_NO_SUCH_COS,[y.attrs[ZaAccount.A_COSId]]));
return false
}}if(!ZaAccount.checkValues(y)){return false
}if(y.attrs[ZaAccount.A_password]!=null&&y[ZaAccount.A2_confirmPassword]!=null&&y.attrs[ZaAccount.A_password].length>0){try{this._currentObject.changePassword(y.attrs[ZaAccount.A_password])
}catch(t){this.popupErrorDialog(ZaMsg.FAILED_SAVE_ACCOUNT,t);
return false
}}if(y[ZaAccount.A2_autoCos]=="TRUE"){y.attrs[ZaAccount.A_COSId]=""
}for(var u in y.attrs){if(u==ZaAccount.A_password||u==ZaAccount.A_zimbraMailAlias||u==ZaItem.A_objectClass||u==ZaAccount.A2_mbxsize||u==ZaAccount.A_mail||u==ZaItem.A_zimbraId||u==ZaAccount.A_zimbraAvailableSkin||u==ZaAccount.A_zimbraZimletAvailableZimlets||u==ZaItem.A_zimbraACE||u==ZaAccount.A_uid){continue
}if(!ZaItem.hasWritePermission(u,y)){continue
}if((this._currentObject.attrs[u]!=y.attrs[u])&&!(this._currentObject.attrs[u]==undefined&&y.attrs[u]==="")){if(y.attrs[u] instanceof Array){if(!this._currentObject.attrs[u]){this._currentObject.attrs[u]=[]
}if(!(this._currentObject.attrs[u] instanceof Array)){this._currentObject.attrs[u]=[this._currentObject.attrs[u]]
}if(y.attrs[u].join(",").valueOf()!=this._currentObject.attrs[u].join(",").valueOf()){h[u]=y.attrs[u]
}}else{if(u===ZaAccount.A_manager){h[u]=this._getLDAPAttr(y.attrs[u])
}else{h[u]=y.attrs[u]
}}}}if(ZaTabView.isTAB_ENABLED(this._currentObject,ZaAccountXFormView.SKIN_TAB_ATTRS,ZaAccountXFormView.SKIN_TAB_RIGHTS)){if(y.attrs[ZaAccount.A_zimbraAvailableSkin]!=null){if(!(y.attrs[ZaAccount.A_zimbraAvailableSkin] instanceof Array)){h[ZaAccount.A_zimbraAvailableSkin]=[y.attrs[ZaAccount.A_zimbraAvailableSkin]]
}else{var q=y.attrs[ZaAccount.A_zimbraAvailableSkin].length;
h[ZaAccount.A_zimbraAvailableSkin]=[];
for(var r=0;
r<q;
r++){h[ZaAccount.A_zimbraAvailableSkin].push(y.attrs[ZaAccount.A_zimbraAvailableSkin][r])
}}}else{if(this._currentObject.attrs[ZaAccount.A_zimbraAvailableSkin]!=null){h[ZaAccount.A_zimbraAvailableSkin]=""
}}}if(ZaTabView.isTAB_ENABLED(this._currentObject,ZaAccountXFormView.ZIMLET_TAB_ATTRS,ZaAccountXFormView.ZIMLET_TAB_RIGHTS)){if(y.attrs[ZaAccount.A_zimbraZimletAvailableZimlets]!=null){if(!(y.attrs[ZaAccount.A_zimbraZimletAvailableZimlets] instanceof Array)){h[ZaAccount.A_zimbraZimletAvailableZimlets]=[y.attrs[ZaAccount.A_zimbraZimletAvailableZimlets]]
}else{var q=y.attrs[ZaAccount.A_zimbraZimletAvailableZimlets].length;
if(q==0){if(this._currentObject.attrs[ZaAccount.A_zimbraZimletAvailableZimlets]==null||!(this._currentObject.attrs[ZaAccount.A_zimbraZimletAvailableZimlets].length==1&&this._currentObject.attrs[ZaAccount.A_zimbraZimletAvailableZimlets][0]==ZaZimlet.NULL_ZIMLET)){h[ZaAccount.A_zimbraZimletAvailableZimlets]=[ZaZimlet.NULL_ZIMLET]
}}else{h[ZaAccount.A_zimbraZimletAvailableZimlets]=[];
for(var r=0;
r<q;
r++){h[ZaAccount.A_zimbraZimletAvailableZimlets].push(y.attrs[ZaAccount.A_zimbraZimletAvailableZimlets][r])
}}}}else{if(this._currentObject.attrs[ZaAccount.A_zimbraZimletAvailableZimlets]!=null){h[ZaAccount.A_zimbraZimletAvailableZimlets]=""
}}}if(this._currentObject[ZaModel.currentTab]!=y[ZaModel.currentTab]){this._currentObject[ZaModel.currentTab]=y[ZaModel.currentTab]
}try{this._currentObject.modify(h,y)
}catch(t){if(t.code==ZmCsfeException.ACCT_EXISTS){this.popupErrorDialog(ZaMsg.FAILED_CREATE_ACCOUNT_1,t)
}else{if(t.code==ZmCsfeException.NO_SUCH_COS){this.popupErrorDialog(AjxMessageFormat.format(ZaMsg.ERROR_NO_SUCH_COS,[y.attrs[ZaAccount.A_COSId]]),t)
}else{this._handleException(t,"ZaAccountViewController.prototype._saveChanges",null,false)
}}return false
}if(y.attrs[ZaAccount.A_zimbraMailTransport]){var l=y.attrs[ZaAccount.A_zimbraMailTransport];
if(!this.isLegalofMailTransport(l)){return false
}}var s=-1;
var m=-1;
if(ZaTabView.isTAB_ENABLED(this._currentObject,ZaAccountXFormView.ALIASES_TAB_ATTRS,ZaAccountXFormView.ALIASES_TAB_RIGHTS)){if(y.attrs[ZaAccount.A_zimbraMailAlias]){if(typeof y.attrs[ZaAccount.A_zimbraMailAlias]=="string"){var e=y.attrs[ZaAccount.A_zimbraMailAlias];
y.attrs[ZaAccount.A_zimbraMailAlias]=new Array();
y.attrs[ZaAccount.A_zimbraMailAlias].push(e)
}s=y.attrs[ZaAccount.A_zimbraMailAlias].length-1
}if(this._currentObject.attrs[ZaAccount.A_zimbraMailAlias]){if(typeof this._currentObject.attrs[ZaAccount.A_zimbraMailAlias]=="string"){var e=this._currentObject.attrs[ZaAccount.A_zimbraMailAlias];
this._currentObject.attrs[ZaAccount.A_zimbraMailAlias]=new Array();
this._currentObject.attrs[ZaAccount.A_zimbraMailAlias].push(e)
}m=this._currentObject.attrs[ZaAccount.A_zimbraMailAlias].length-1
}for(var b=s;
b>=0;
b--){for(var o=m;
o>=0;
o--){if(y.attrs[ZaAccount.A_zimbraMailAlias][b]==this._currentObject.attrs[ZaAccount.A_zimbraMailAlias][o]){y.attrs[ZaAccount.A_zimbraMailAlias].splice(b,1);
this._currentObject.attrs[ZaAccount.A_zimbraMailAlias].splice(o,1);
break
}}}if(m!=-1){m=this._currentObject.attrs[ZaAccount.A_zimbraMailAlias].length
}try{for(var g=0;
g<m;
g++){this._currentObject.removeAlias(this._currentObject.attrs[ZaAccount.A_zimbraMailAlias][g])
}}catch(t){this._handleException(t,"ZaAccountViewController.prototype._saveChanges",null,false);
return false
}if(s!=-1){s=y.attrs[ZaAccount.A_zimbraMailAlias].length
}var n="";
var f=0;
try{for(var g=0;
g<s;
g++){try{if(y.attrs[ZaAccount.A_zimbraMailAlias][g]){if(y.attrs[ZaAccount.A_zimbraMailAlias][g].indexOf("@")!=y.attrs[ZaAccount.A_zimbraMailAlias][g].lastIndexOf("@")){this._errorDialog.setMessage(AjxMessageFormat.format(ZaMsg.ERROR_ALIAS_INVALID,[y.attrs[ZaAccount.A_zimbraMailAlias][g]]),null,DwtMessageDialog.CRITICAL_STYLE,null);
this._errorDialog.popup();
break
}this._currentObject.addAlias(y.attrs[ZaAccount.A_zimbraMailAlias][g])
}}catch(t){if(t.code==ZmCsfeException.ACCT_EXISTS){var d=this._findAlias(y.attrs[ZaAccount.A_zimbraMailAlias][g]);
switch(d.type){case ZaItem.DL:if(d.name==y.attrs[ZaAccount.A_zimbraMailAlias][g]){n+="<br>"+AjxMessageFormat.format(ZaMsg.WARNING_EACH_ALIAS3,[d.name])
}else{n+="<br>"+AjxMessageFormat.format(ZaMsg.WARNING_EACH_ALIAS4,[d.name,y.attrs[ZaAccount.A_zimbraMailAlias][g]])
}break;
case ZaItem.ACCOUNT:if(d.name==y.attrs[ZaAccount.A_zimbraMailAlias][g]){n+="<br>"+AjxMessageFormat.format(ZaMsg.WARNING_EACH_ALIAS2,[d.name])
}else{n+="<br>"+AjxMessageFormat.format(ZaMsg.WARNING_EACH_ALIAS1,[d.name,y.attrs[ZaAccount.A_zimbraMailAlias][g]])
}break;
case ZaItem.RESOURCE:if(d.name==y.attrs[ZaAccount.A_zimbraMailAlias][g]){n+="<br>"+AjxMessageFormat.format(ZaMsg.WARNING_EACH_ALIAS5,[d.name])
}else{n+="<br>"+AjxMessageFormat.format(ZaMsg.WARNING_EACH_ALIAS6,[d.name,y.attrs[ZaAccount.A_zimbraMailAlias][g]])
}break;
default:n+="<br>"+AjxMessageFormat.format(ZaMsg.WARNING_EACH_ALIAS0,[y.attrs[ZaAccount.A_zimbraMailAlias][g]]);
break
}f++
}else{throw (t)
}}}if(f==1){this._errorDialog.setMessage(AjxMessageFormat.format(ZaMsg.WARNING_ALIAS_EXISTS,[n]),"",DwtMessageDialog.WARNING_STYLE,ZabMsg.zimbraAdminTitle);
this._errorDialog.popup()
}else{if(f>1){this._errorDialog.setMessage(AjxMessageFormat.format(ZaMsg.WARNING_ALIASES_EXIST,[n]),"",DwtMessageDialog.WARNING_STYLE,ZabMsg.zimbraAdminTitle);
this._errorDialog.popup()
}}}catch(t){this.popupErrorDialog(ZaMsg.FAILED_ADD_ALIASES,t);
return false
}}var k=null;
if(this._currentObject&&y.name!=this._currentObject.name){k=y.name
}if(k){try{this._currentObject.rename(k)
}catch(t){if(t.code==ZmCsfeException.ACCT_EXISTS){this.popupErrorDialog(ZaMsg.FAILED_RENAME_ACCOUNT_1,t)
}else{this._handleException(t,"ZaAccountViewController.prototype._saveChanges",null,false)
}return false
}}ZaApp.getInstance().getAppCtxt().getAppController().setActionStatusMsg(AjxMessageFormat.format(ZaMsg.AccountModified,[this._currentObject.name]));
return true
};
ZaAccountViewController.prototype.getPopUpOperation=function(){return this._popupOperations
};
ZaAccountViewController.prototype._newButtonListener=function(d){try{var b=new ZaAccount();
b.loadNewObjectDefaults("name",ZaSettings.myDomainName);
if(!ZaApp.getInstance()._newAccountWizard){ZaApp.getInstance()._newAccountWizard=new ZaNewAccountXWizard(this._container,b)
}else{ZaApp.getInstance()._newAccountWizard.updateAccountType()
}ZaApp.getInstance()._newAccountWizard.setObject(b);
ZaApp.getInstance()._newAccountWizard.popup()
}catch(c){this._handleException(c,"ZaAccountViewController.prototype._newButtonListener",null,false)
}};
ZaAccountViewController.prototype._expireSessionListener=function(d){try{if(this._currentObject){var c=this._currentObject;
if(ZaItem.hasWritePermission(ZaAccount.A_zimbraAuthTokenValidityValue,c)){ZaApp.getInstance().dialogs.confirmMessageDialog.setMessage(ZaMsg.WARN_EXPIRE_SESSIONS,DwtMessageDialog.WARNING_STYLE);
ZaApp.getInstance().dialogs.confirmMessageDialog.registerCallback(DwtDialog.YES_BUTTON,ZaAccountListController.prototype.expireSessions,this,[c]);
ZaApp.getInstance().dialogs.confirmMessageDialog.registerCallback(DwtDialog.NO_BUTTON,this.closeCnfrmDlg,this,null);
ZaApp.getInstance().dialogs.confirmMessageDialog.popup()
}else{this.popupMsgDialog(AjxMessageFormat.format(ZaMsg.ERROR_NO_PERMISSION_FOR_OPERATION_ON,[c.name?c.name:c.attrs[ZaAccount.A_accountName]]),true)
}}}catch(b){this._handleException(b,"ZaAccountViewController.prototype._expireSessionListener",null,false)
}};
ZaAccountViewController.prototype._reindexMbxListener=function(c){try{if(!ZaApp.getInstance().dialogs.reindexWizard){ZaApp.getInstance().dialogs.reindexWizard=new ReindexMailboxXDialog(this._container)
}var d=new ZaReindexMailbox();
d.mbxId=this._currentObject.id;
ZaApp.getInstance().dialogs.reindexWizard.setObject(d);
ZaApp.getInstance().dialogs.reindexWizard.popup()
}catch(b){this._handleException(b,"ZaAccountViewController.prototype._reindexMbxListener",null,false)
}};
ZaAccountViewController.prototype._viewMailListener=function(c){try{if(this._currentObject&&this._currentObject.id){ZaAccountListController._viewMailListenerLauncher.call(this,this._currentObject)
}}catch(b){this._handleException(b,"ZaAccountViewController.prototype._viewMailListener",null,false)
}};
ZaAccountViewController.prototype._handleException=function(b,g,e,c,d){if(b.code==ZmCsfeException.SVC_WRONG_HOST){var f=ZaMsg.ERROR_WRONG_HOST;
if(b.detail){f+="<br>Details:<br>";
f+=b.detail
}this._errorDialog.setMessage(f,null,DwtMessageDialog.CRITICAL_STYLE,null);
this._errorDialog.popup()
}else{if(b.code==ZmCsfeException.ACCT_EXISTS){this._errorDialog.setMessage(ZaMsg.ERROR_ACCOUNT_EXISTS,null,DwtMessageDialog.CRITICAL_STYLE,null);
this._errorDialog.popup()
}else{ZaController.prototype._handleException.call(this,b,g,e,c,d)
}}};
ZaAccountViewController.prototype.isLegalofMailTransport=function(d){if(!d){return false
}var c=new RegExp("(lmtp|smtp|LMTP|SMTP)\\:[\\w\\.\\-]+\\:[0-9]+$");
var b=c.exec(d);
if(b!=null){return true
}else{this._errorDialog.setMessage(ZaMsg.ERROR_MAILTRANSPORT_INVALID,null,DwtMessageDialog.CRITICAL_STYLE,null);
this._errorDialog.popup()
}return false
};
ZaAccountViewController.prototype._getLDAPAttr=function(b){if(b){let attrString="uid=";
let emailStringArray=b.split("@");
attrString=attrString+emailStringArray[0]+",ou=people";
emailStringArray=emailStringArray.length>1&&emailStringArray[1].split(".");
const c=function(d,e){return d+",dc="+e
};
attrString=emailStringArray.reduce(c,attrString);
return attrString
}}
}if(AjxPackage.define("zimbraAdmin.cos.controller.ZaCosListController")){ZaCosListController=function(c,b){ZaListViewController.call(this,c,b,"ZaCosListController");
this.objType=ZaEvent.S_COS;
this._defaultType=ZaItem.COS;
this._currentSortField=ZaCos.A_name;
this._currentPageNum=1;
this._currentSortOrder="1";
this._helpURL=location.pathname+ZaUtil.HELP_URL+"cos/class_of_service.htm?locid="+AjxEnv.DEFAULT_LOCALE;
this._helpButtonText=ZaMsg.helpManageCOS;
this._currentQuery="";
this.fetchAttrs=[ZaCos.A_name,ZaCos.A_description].join();
this.RESULTSPERPAGE=ZaDomain.RESULTSPERPAGE;
this.MAXSEARCHRESULTS=ZaDomain.MAXSEARCHRESULTS
};
ZaCosListController.prototype=new ZaListViewController();
ZaCosListController.prototype.constructor=ZaCosListController;
ZaController.initToolbarMethods.ZaCosListController=new Array();
ZaController.initPopupMenuMethods.ZaCosListController=new Array();
ZaController.changeActionsStateMethods.ZaCosListController=new Array();
ZaCosListController.prototype.show=function(e,d){if(!ZaZimbraAdmin.hasGlobalCOSSListAccess()&&this._currentQuery==""){var b=ZaApp.getInstance()._cosNameList;
if(!b||!(b instanceof Array)||b.length==0){this._list=new ZaItemList(ZaCos);
this.numPages=0;
this._searchTotal=0;
if(e){this._show(this._list)
}else{this._updateUI(this._list)
}return
}for(var c=0;
c<b.length;
c++){this._currentQuery+="("+ZaCos.A_name+"="+b[c]+")"
}if(b.length>1){this._currentQuery="(|"+this._currentQuery+")"
}}var g=Dwt.getNextId();
d=d?d:false;
var h=new AjxCallback(this,this.searchCallback,{openInNewTab:d,limit:this.RESULTSPERPAGE,CONS:null,show:e,busyId:g});
var f={query:this._currentQuery,types:[ZaSearch.COSES],sortBy:this._currentSortField,offset:this.RESULTSPERPAGE*(this._currentPageNum-1),sortAscending:this._currentSortOrder,limit:this.RESULTSPERPAGE,callback:h,attrs:this.fetchAttrs,controller:this,showBusy:true,busyId:g,busyMsg:ZaMsg.BUSY_SEARCHING_COSES,skipCallbackIfCancelled:false,isInitialRequest:true};
this.scrollSearchParams={query:this._currentQuery,types:[ZaSearch.COSES],sortBy:this._currentSortField,sortAscending:this._currentSortOrder,attrs:this.fetchAttrs,controller:this,showBusy:true,busyMsg:ZaMsg.BUSY_SEARCHING_COSES,skipCallbackIfCancelled:false};
ZaSearch.searchDirectory(f)
};
ZaCosListController.prototype.searchCallback=function(d,c){ZaListViewController.prototype.searchCallback.call(this,d,c);
var b=ZaApp.getInstance();
b._cosList=this._list;
b._cosListName=undefined
};
ZaCosListController.prototype._show=function(c,b,e,d){this._updateUI(c,b,e,d);
ZaApp.getInstance().pushView(this.getContentViewId(),b,e);
return
};
ZaCosListController.initPopupMenuMethod=function(){if(ZaZimbraAdmin.canCreateCos()){this._popupOperations[ZaOperation.NEW]=new ZaOperation(ZaOperation.NEW,ZaMsg.TBB_New,ZaMsg.COSTBB_New_tt,"NewCOS","NewCOSDis",new AjxListener(this,ZaCosListController.prototype._newButtonListener));
this._popupOperations[ZaOperation.DUPLICATE]=new ZaOperation(ZaOperation.DUPLICATE,ZaMsg.TBB_Duplicate,ZaMsg.COSTBB_Duplicate_tt,"DuplicateCOS","DuplicateCOSDis",new AjxListener(this,ZaCosListController.prototype._duplicateButtonListener))
}this._popupOperations[ZaOperation.EDIT]=new ZaOperation(ZaOperation.EDIT,ZaMsg.TBB_Edit,ZaMsg.COSTBB_Edit_tt,"Properties","PropertiesDis",new AjxListener(this,ZaCosListController.prototype._editButtonListener));
this._popupOperations[ZaOperation.DELETE]=new ZaOperation(ZaOperation.DELETE,ZaMsg.TBB_Delete,ZaMsg.COSTBB_Delete_tt,"Delete","DeleteDis",new AjxListener(this,ZaCosListController.prototype._deleteButtonListener))
};
ZaController.initPopupMenuMethods.ZaCosListController.push(ZaCosListController.initPopupMenuMethod);
ZaCosListController.initToolbarMethod=function(){};
ZaController.initToolbarMethods.ZaCosListController.push(ZaCosListController.initToolbarMethod);
ZaCosListController.prototype._createUI=function(b,d){this._contentView=new ZaCosListView(this._container,this._defaultType);
ZaApp.getInstance()._controllers[this.getContentViewId()]=this;
var c=new Object();
c[ZaAppViewMgr.C_APP_CONTENT]=this._contentView;
ZaApp.getInstance().getAppViewMgr().createView(this.getContentViewId(),c);
this._initPopupMenu();
this._actionMenu=new ZaPopupMenu(this._contentView,"ActionMenu",null,this._popupOperations,ZaId.VIEW_COSLIST,ZaId.MENU_POP);
this._contentView.addSelectionListener(new AjxListener(this,this._listSelectionListener));
this._contentView.addActionListener(new AjxListener(this,this._listActionListener));
this._removeConfirmMessageDialog=ZaApp.getInstance().dialogs.removeConfirmMessageDialog=new ZaMsgDialog(ZaApp.getInstance().getAppCtxt().getShell(),null,[DwtDialog.YES_BUTTON,DwtDialog.NO_BUTTON],null,ZaId.CTR_PREFIX+ZaId.VIEW_COSLIST+"_removeConfirm");
this._UICreated=true
};
ZaCosListController.prototype._refreshButtonListener=function(b){this.refresh()
};
ZaCosListController.prototype._duplicateButtonListener=function(e){if(this._contentView&&(this._contentView.getSelectionCount()==1)){var b=new ZaCos();
var d=this._contentView.getSelection()[0];
if(d){if(d.id){d.load("id",d.id)
}if(d.attrs){for(var c in d.attrs){if((c==ZaItem.A_objectClass)||(c==ZaItem.A_zimbraId)||(c==ZaCos.A_name)||(c==ZaCos.A_description)||(c==ZaCos.A_zimbraNotes)||(c==ZaItem.A_zimbraCreateTimestamp)){continue
}if((typeof d.attrs[c]=="object")||(d.attrs[c] instanceof Array)){b.attrs[c]=AjxUtil.createProxy(d.attrs[c],3)
}else{b.attrs[c]=d.attrs[c]
}}}b.attrs[ZaCos.A_zimbraNotes]=AjxMessageFormat.format(ZaMsg.COSTBB_DuplicatingFrom_tt,[d.attrs[ZaCos.A_name]]);
if(d.getAttrs){b.getAttrs=d.getAttrs
}if(d.setAttrs){b.setAttrs=d.setAttrs
}if(d.rights){b.rights=d.rights
}}ZaCosListController.showMe.call(this,b)
}};
ZaCosListController.prototype._newButtonListener=function(d){var b=new ZaCos();
var e=ZaCos.getCosByName("default");
b.loadNewObjectDefaults();
b.rights[ZaCos.RENAME_COS_RIGHT]=true;
b.rights[ZaCos.CREATE_COS_RIGHT]=true;
for(var c in e.attrs){if((c==ZaItem.A_objectClass)||(c==ZaItem.A_zimbraId)||(c==ZaCos.A_name)||(c==ZaCos.A_description)||(c==ZaCos.A_notes)||(c==ZaItem.A_zimbraCreateTimestamp)){continue
}b.attrs[c]=e.attrs[c]
}ZaCosListController.showMe.call(this,b)
};
ZaCosListController.prototype._listSelectionListener=function(c){if(c.detail==DwtListView.ITEM_DBL_CLICKED){if(c.item){ZaApp.getInstance().getCosController().show(c.item);
var b=ZaTree.getPathByArray([ZaMsg.OVP_home,ZaMsg.OVP_configure,ZaMsg.OVP_cos]);
ZaZimbraAdmin.getInstance().getOverviewPanelController().addObjectItem(b,c.item.name,null,false,false,c.item,undefined,true)
}}else{this.changeActionsState()
}};
ZaCosListController.prototype._listActionListener=function(b){this.changeActionsState();
this._actionMenu.popup(0,b.docX,b.docY)
};
ZaCosListController.prototype._editButtonListener=function(c){if(this._contentView.getSelectionCount()==1){var b=this._contentView.getSelection()[0];
this._editItem(b)
}};
ZaCosListController.prototype._editItem=function(c){ZaApp.getInstance().getCosController().show(c);
var b=ZaTree.getPathByArray([ZaMsg.OVP_home,ZaMsg.OVP_configure,ZaMsg.OVP_cos]);
ZaZimbraAdmin.getInstance().getOverviewPanelController().addObjectItem(b,c.name,null,false,false,c)
};
ZaCosListController.prototype._deleteButtonListener=function(f){this._removeList=new Array();
this._itemsInTabList=[];
if(this._contentView.getSelectionCount()>0){var e=this._contentView.getSelection();
var c=e.length;
for(var b=0;
b<c;
b++){var d=e[b];
if(d){if(ZaApp.getInstance().getTabGroup()&&ZaApp.getInstance().getTabGroup().getTabByItemId(d.id)){this._itemsInTabList.push(d)
}else{this._removeList.push(d)
}}}}if(this._itemsInTabList.length>0){if(!ZaApp.getInstance().dialogs.ConfirmDeleteItemsInTabDialog){ZaApp.getInstance().dialogs.ConfirmDeleteItemsInTabDialog=new ZaMsgDialog(ZaApp.getInstance().getAppCtxt().getShell(),null,[DwtDialog.CANCEL_BUTTON],[ZaMsgDialog.CLOSE_TAB_DELETE_BUTTON_DESC,ZaMsgDialog.NO_DELETE_BUTTON_DESC],ZaId.CTR_PREFIX+ZaId.VIEW_COSLIST+"_ConfirmDeleteItemsInTab")
}var g=ZaMsg.dl_warning_delete_accounts_in_tab;
g+=ZaCosListController.getDlMsgFromList(this._itemsInTabList);
ZaApp.getInstance().dialogs.ConfirmDeleteItemsInTabDialog.setMessage(g,DwtMessageDialog.WARNING_STYLE);
ZaApp.getInstance().dialogs.ConfirmDeleteItemsInTabDialog.registerCallback(ZaMsgDialog.CLOSE_TAB_DELETE_BUTTON,ZaCosListController.prototype._closeTabsBeforeRemove,this);
ZaApp.getInstance().dialogs.ConfirmDeleteItemsInTabDialog.registerCallback(ZaMsgDialog.NO_DELETE_BUTTON,ZaCosListController.prototype._deleteCosInRemoveList,this);
ZaApp.getInstance().dialogs.ConfirmDeleteItemsInTabDialog.popup()
}else{this._deleteCosInRemoveList()
}};
ZaCosListController.prototype._closeTabsBeforeRemove=function(){this.closeTabsInRemoveList();
this._deleteCosInRemoveList()
};
ZaCosListController.prototype._deleteCosInRemoveList=function(){if(ZaApp.getInstance().dialogs.ConfirmDeleteItemsInTabDialog){ZaApp.getInstance().dialogs.ConfirmDeleteItemsInTabDialog.popdown()
}if(this._removeList.length){var b=ZaMsg.Q_DELETE_COSES;
b+=ZaCosListController.getDlMsgFromList(this._removeList);
this._removeConfirmMessageDialog.setMessage(b,DwtMessageDialog.INFO_STYLE);
this._removeConfirmMessageDialog.registerCallback(DwtDialog.YES_BUTTON,ZaCosListController.prototype._deleteCosCallback,this);
this._removeConfirmMessageDialog.registerCallback(DwtDialog.NO_BUTTON,ZaCosListController.prototype._donotDeleteCosCallback,this);
this._removeConfirmMessageDialog.popup()
}};
ZaCosListController.getDlMsgFromList=function(c){dlgMsg="<br><ul>";
var f=0,d;
for(var e in c){if(f>19){dlgMsg+="<li>...</li>";
break
}dlgMsg+="<li>";
d=c[e].name;
if(d.length>50){var b=49;
var g=0;
while(b<d.length){dlgMsg+=AjxStringUtil.htmlEncode(d.slice(g,b));
g=b+1;
if(g>=(d.length)){break
}b=(d.length<=(b+50))?d.length-1:(b+50);
dlgMsg+="<br>"
}}else{dlgMsg+=AjxStringUtil.htmlEncode(d)
}dlgMsg+="</li>";
f++
}dlgMsg+="</ul>";
return dlgMsg
};
ZaCosListController.prototype._deleteCosCallback=function(){var d=new Array();
for(var c in this._removeList){if(this._removeList[c]){try{this._removeList[c].remove();
d.push(this._removeList[c])
}catch(b){this._removeConfirmMessageDialog.popdown();
this._handleException(b,ZaCosListController.prototype._deleteCosCallback,null,false);
return
}}if(this._list){this._list.remove(this._removeList[c])
}}this.fireRemovalEvent(d);
this._removeConfirmMessageDialog.popdown();
if(this._contentView){this._contentView.setUI()
}this.show()
};
ZaCosListController.prototype._donotDeleteCosCallback=function(){this._removeList=new Array();
this._removeConfirmMessageDialog.popdown()
};
ZaCosListController.changeActionsStateMethod=function(g,f){if(!this._contentView){return
}var d=this._contentView.getSelectionCount();
var h=false;
if(d>=1){var b=this._contentView.getSelectedItems().getArray();
for(var c in b){var e=this._contentView.getItemFromElement(b[c]);
if(e){if(e.name=="default"){h=true;
break
}}}}if(d==1){var e=this._contentView.getSelection()[0];
if(e){if(h){if(this._popupOperations[ZaOperation.DELETE]){this._popupOperations[ZaOperation.DELETE].enabled=false
}}else{if(AjxUtil.isEmpty(e.rights)){e.loadEffectiveRights("id",e.id,false)
}if(!ZaItem.hasRight(ZaCos.DELETE_COS_RIGHT,e)){if(this._popupOperations[ZaOperation.DELETE]){this._popupOperations[ZaOperation.DELETE].enabled=false
}}}}}else{if(d>1){if(h){if(this._popupOperations[ZaOperation.DELETE]){this._popupOperations[ZaOperation.DELETE].enabled=false
}}if(this._popupOperations[ZaOperation.DUPLICATE]&&this._popupOperations[ZaOperation.DUPLICATE].enabled){this._popupOperations[ZaOperation.DUPLICATE].enabled=false
}if(this._popupOperations[ZaOperation.EDIT]){this._popupOperations[ZaOperation.EDIT].enabled=false
}}else{if(this._popupOperations[ZaOperation.EDIT]){this._popupOperations[ZaOperation.EDIT].enabled=false
}if(this._popupOperations[ZaOperation.DELETE]){this._popupOperations[ZaOperation.DELETE].enabled=false
}if(this._popupOperations[ZaOperation.DUPLICATE]&&this._popupOperations[ZaOperation.DUPLICATE].enabled){this._popupOperations[ZaOperation.DUPLICATE].enabled=false
}}}};
ZaController.changeActionsStateMethods.ZaCosListController.push(ZaCosListController.changeActionsStateMethod);
ZaCosListController.showMe=function(b){if(!ZaApp.getInstance().dialogs.newCosXWizard){ZaApp.getInstance().dialogs.newCosXWizard=new ZaNewCosXWizard(this._container,b)
}ZaApp.getInstance().dialogs.newCosXWizard.setObject(b);
ZaApp.getInstance().dialogs.newCosXWizard.popup()
}
}if(AjxPackage.define("zimbraAdmin.cos.controller.ZaCosController")){ZaCosController=function(c,b){ZaXFormViewController.call(this,c,b,"ZaCosController");
this._UICreated=false;
this._helpURL=[location.pathname,ZaUtil.HELP_URL,ZaCosController.helpURL,"?locid=",AjxEnv.DEFAULT_LOCALE].join("");
this._helpButtonText=ZaMsg.helpEditCOS;
this.deleteMsg=ZaMsg.Q_DELETE_COS;
this.objType=ZaEvent.S_COS;
this.tabConstructor=ZaCosXFormView
};
ZaCosController.helpURL="cos/creating_classes_of_service.htm";
ZaCosController.prototype=new ZaXFormViewController();
ZaCosController.prototype.constructor=ZaCosController;
ZaController.initPopupMenuMethods.ZaCosController=new Array();
ZaController.setViewMethods.ZaCosController=new Array();
ZaController.changeActionsStateMethods.ZaCosController=new Array();
ZaCosController.prototype.show=function(b){if(!this.selectExistingTabByItemId(b.id)){this._setView(b,true)
}};
ZaCosController.changeActionsStateMethod=function(){if(this._currentObject.name=="default"){this._popupOperations[ZaOperation.DELETE].enabled=false
}else{if(!ZaItem.hasRight(ZaCos.DELETE_COS_RIGHT,this._currentObject)){this._popupOperations[ZaOperation.DELETE].enabled=false
}}var b=(this._view&&this._view.isDirty());
if(this._popupOperations[ZaOperation.SAVE]){this._popupOperations[ZaOperation.SAVE].enabled=b
}};
ZaController.changeActionsStateMethods.ZaCosController.push(ZaCosController.changeActionsStateMethod);
ZaCosController.initPopupMenuMethod=function(){this._popupOperations[ZaOperation.SAVE]=new ZaOperation(ZaOperation.SAVE,ZaMsg.TBB_Save,ZaMsg.COSTBB_Save_tt,"Save","SaveDis",new AjxListener(this,this.saveButtonListener));
if(ZaZimbraAdmin.canCreateCos()){this._popupOperations[ZaOperation.NEW]=new ZaOperation(ZaOperation.NEW,ZaMsg.TBB_New,ZaMsg.COSTBB_New_tt,"NewCOS","NewCOSDis",new AjxListener(this,ZaCosController.prototype._newButtonListener,[true]))
}this._popupOperations[ZaOperation.DELETE]=new ZaOperation(ZaOperation.DELETE,ZaMsg.TBB_Delete,ZaMsg.COSTBB_Delete_tt,"Delete","DeleteDis",new AjxListener(this,this.deleteButtonListener))
};
ZaController.initPopupMenuMethods.ZaCosController.push(ZaCosController.initPopupMenuMethod);
ZaCosController.setViewMethod=function(c){try{c[ZaModel.currentTab]="1";
if(c.id){c.load("id",c.id)
}this._currentObject=c;
this._initPopupMenu();
this._contentView=this._view=new this.tabConstructor(this._container,c);
var d=new Object();
d[ZaAppViewMgr.C_APP_CONTENT]=this._view;
ZaApp.getInstance().getAppViewMgr().createView(this.getContentViewId(),d);
ZaApp.getInstance()._controllers[this.getContentViewId()]=this;
ZaApp.getInstance().pushView(this.getContentViewId());
this._view.setDirty(false);
this._view.setObject(c)
}catch(b){this._handleException(b,"ZaCosController.prototype._setView",null,false)
}};
ZaController.setViewMethods.ZaCosController.push(ZaCosController.setViewMethod);
ZaCosController.prototype._saveChanges=function(){if(this._view.getMyForm().hasErrors()){var c=this._view.getMyForm().getItemsInErrorState();
var k=ZaMsg.CORRECT_ERRORS;
k+="<br><ul>";
var g=0;
for(var n in c){if(g>19){k+="<li>...</li>";
break
}if(n=="size"){continue
}var m=c[n].getInheritedProperty("msgName");
if(!m&&c[n].getParentItem()){m=c[n].getParentItem().getInheritedProperty("msgName")
}if(m){if(m.substring(m.length-1,1)==":"){m=m.substring(0,m.length-1)
}}if(m){k+="<li>";
k+=m;
k+="</li>"
}g++
}k+="</ul>";
this.popupMsgDialog(k,true);
return false
}var f=this._view.getObject();
var h=false;
if(!ZaCos.checkValues(f)){return false
}var p=new Object();
if(!f.id){h=true
}for(var l in f.attrs){if(l==ZaItem.A_objectClass||l==ZaItem.A_zimbraId||l==ZaCos.A_zimbraAvailableSkin||l==ZaCos.A_zimbraZimletAvailableZimlets||l==ZaCos.A_zimbraMailHostPool||l==ZaItem.A_zimbraACE||l==ZaItem.A_zimbraCreateTimestamp){continue
}if(!ZaItem.hasWritePermission(l,f)){continue
}if(h||(this._currentObject.attrs[l]!=f.attrs[l])){p[l]=f.attrs[l]
}}if(f.attrs[ZaCos.A_zimbraMailHostPool]!=null){var o=[];
if(!(f.attrs[ZaCos.A_zimbraMailHostPool] instanceof Array)){o=[f.attrs[ZaCos.A_zimbraMailHostPool]]
}else{var d=f.attrs[ZaCos.A_zimbraMailHostPool].length;
o=[];
for(var g=0;
g<d;
g++){o.push(f.attrs[ZaCos.A_zimbraMailHostPool][g])
}}if(!h&&this._currentObject.attrs[ZaCos.A_zimbraMailHostPool]!=null){if(this._currentObject.attrs[ZaCos.A_zimbraMailHostPool] instanceof Array){if(o.join(",")!=this._currentObject.attrs[ZaCos.A_zimbraMailHostPool].join(",")){p[ZaCos.A_zimbraMailHostPool]=o
}}else{if(o.join(",")!=[this._currentObject.attrs[ZaCos.A_zimbraMailHostPool]].join(",")){p[ZaCos.A_zimbraMailHostPool]=o
}}}else{p[ZaCos.A_zimbraMailHostPool]=o
}}else{if(this._currentObject.attrs[ZaCos.A_zimbraMailHostPool]!=null){p[ZaCos.A_zimbraMailHostPool]=""
}}if(f.attrs[ZaCos.A_zimbraAvailableSkin]!=null){var o=[];
if(!(f.attrs[ZaCos.A_zimbraAvailableSkin] instanceof Array)){o=[f.attrs[ZaCos.A_zimbraAvailableSkin]]
}else{var d=f.attrs[ZaCos.A_zimbraAvailableSkin].length;
o=[];
for(var g=0;
g<d;
g++){o.push(f.attrs[ZaCos.A_zimbraAvailableSkin][g])
}}if(this._currentObject.attrs[ZaCos.A_zimbraAvailableSkin]!=null){if(this._currentObject.attrs[ZaCos.A_zimbraAvailableSkin] instanceof Array){if(o.join(",")!=this._currentObject.attrs[ZaCos.A_zimbraAvailableSkin].join(",")){p[ZaCos.A_zimbraAvailableSkin]=o
}}else{if(o.join(",")!=[this._currentObject.attrs[ZaCos.A_zimbraAvailableSkin]].join(",")){p[ZaCos.A_zimbraAvailableSkin]=o
}}}else{p[ZaCos.A_zimbraAvailableSkin]=o
}}else{if(this._currentObject.attrs[ZaCos.A_zimbraAvailableSkin]!=null){p[ZaCos.A_zimbraAvailableSkin]=""
}}if(f.attrs[ZaCos.A_zimbraZimletAvailableZimlets]!=null){var o=[];
if(!(f.attrs[ZaCos.A_zimbraZimletAvailableZimlets] instanceof Array)){o=[f.attrs[ZaCos.A_zimbraZimletAvailableZimlets]]
}else{var d=f.attrs[ZaCos.A_zimbraZimletAvailableZimlets].length;
o=[];
for(var g=0;
g<d;
g++){o.push(f.attrs[ZaAccount.A_zimbraZimletAvailableZimlets][g])
}}if(h){p[ZaCos.A_zimbraZimletAvailableZimlets]=o
}else{if(this._currentObject.attrs[ZaCos.A_zimbraZimletAvailableZimlets]!=null){if(this._currentObject.attrs[ZaCos.A_zimbraZimletAvailableZimlets] instanceof Array){if(o.join(",")!=this._currentObject.attrs[ZaCos.A_zimbraZimletAvailableZimlets].join(",")){p[ZaCos.A_zimbraZimletAvailableZimlets]=o
}}else{if(o.join(",")!=[this._currentObject.attrs[ZaCos.A_zimbraZimletAvailableZimlets]].join(",")){p[ZaCos.A_zimbraZimletAvailableZimlets]=o
}}}else{p[ZaCos.A_zimbraZimletAvailableZimlets]=o
}}}else{if(this._currentObject.attrs[ZaCos.A_zimbraZimletAvailableZimlets]!=null){p[ZaCos.A_zimbraZimletAvailableZimlets]=""
}}if(!h){if(f.name!=this._currentObject.name){if(this._currentObject.name=="default"||this._currentObject.name=="defaultExternal"){this._errorDialog.setMessage(AjxMessageFormat.format(ZaMsg.FAILED_RENAME_COS_DEFAULT,this._currentObject.name),null,DwtMessageDialog.CRITICAL_STYLE,ZabMsg.zimbraAdminTitle);
this._errorDialog.popup();
return false
}newName=f.name;
try{this._currentObject.rename(newName)
}catch(j){var e="";
for(var b in j){e=e+b+" - "+j[b]+"\n"
}if(j.code==ZmCsfeException.COS_EXISTS){this._errorDialog.setMessage(ZaMsg.FAILED_RENAME_COS_1,e,DwtMessageDialog.CRITICAL_STYLE,ZabMsg.zimbraAdminTitle);
this._errorDialog.popup()
}else{this._handleException(j,"ZaCosController.prototype._saveChanges",null,false)
}return false
}}}if(this._currentObject[ZaModel.currentTab]!=f[ZaModel.currentTab]){this._currentObject[ZaModel.currentTab]=f[ZaModel.currentTab]
}try{if(h){this._currentObject.create(f.name,p);
this.fireCreationEvent(this._currentObject);
this._toolbar.getButton(ZaOperation.DELETE).setEnabled(true);
ZaApp.getInstance().getAppCtxt().getAppController().setActionStatusMsg(AjxMessageFormat.format(ZaMsg.CosCreated,[f.name]))
}else{this._currentObject.modify(p);
ZaApp.getInstance().getAppCtxt().getAppController().setActionStatusMsg(AjxMessageFormat.format(ZaMsg.CosModified,[this._currentObject.name]))
}}catch(j){var e="";
for(var b in j){if(j[b] instanceof Function){continue
}e=e+b+" - "+j[b]+"\n"
}if(j.code==ZmCsfeException.COS_EXISTS){this._errorDialog.setMessage(ZaMsg.FAILED_CREATE_COS_1,e,DwtMessageDialog.CRITICAL_STYLE,ZabMsg.zimbraAdminTitle);
this._errorDialog.popup()
}else{this._handleException(j,"ZaCosController.prototype._saveChanges",null,false)
}return false
}return true
};
ZaCosController.prototype.newCos=function(){var b=new ZaCos();
var d=ZaCos.getCosByName("default");
for(var c in d.attrs){if((c==ZaItem.A_objectClass)||(c==ZaItem.A_zimbraId)||(c==ZaCos.A_name)||(c==ZaCos.A_description)||(c==ZaCos.A_notes)||(c=ZaItem.A_zimbraCreateTimestamp)){continue
}b.attrs[c]=d.attrs[c]
}this._setView(b,true)
};
ZaCosController.prototype._newButtonListener=function(d,c){if(d){ZaCosListController.prototype._newButtonListener.call(this)
}else{if(this._view.isDirty()){var b=new Object();
b.params=null;
b.obj=this;
b.func=ZaCosController.prototype.newCos;
ZaApp.getInstance().dialogs.confirmMessageDialog.setMessage(ZaMsg.Q_SAVE_CHANGES,DwtMessageDialog.INFO_STYLE);
ZaApp.getInstance().dialogs.confirmMessageDialog.registerCallback(DwtDialog.YES_BUTTON,this.saveAndGoAway,this,b);
ZaApp.getInstance().dialogs.confirmMessageDialog.registerCallback(DwtDialog.NO_BUTTON,this.discardAndGoAway,this,b);
ZaApp.getInstance().dialogs.confirmMessageDialog.popup()
}else{this.newCos()
}}}
}if(AjxPackage.define("zimbraAdmin.domains.controller.ZaDomainListController")){ZaDomainListController=function(c,b){ZaListViewController.call(this,c,b,"ZaDomainListController");
this._helpURL=ZaDomainListController.helpURL;
this._helpButtonText=ZaMsg.helpManageDomains;
this._currentQuery="";
this._currentPageNum=1;
this._currentSortField=ZaDomain.A_domainName;
this.objType=ZaEvent.S_DOMAIN;
this._defaultType=ZaItem.DOMAIN;
this.RESULTSPERPAGE=ZaDomain.RESULTSPERPAGE;
this.MAXSEARCHRESULTS=ZaDomain.MAXSEARCHRESULTS
};
ZaDomainListController.prototype=new ZaListViewController();
ZaDomainListController.prototype.constructor=ZaDomainListController;
ZaDomainListController.helpURL=location.pathname+ZaUtil.HELP_URL+"managing_domains/managing_domains.htm?locid="+AjxEnv.DEFAULT_LOCALE;
ZaController.initToolbarMethods.ZaDomainListController=new Array();
ZaController.initPopupMenuMethods.ZaDomainListController=new Array();
ZaController.changeActionsStateMethods.ZaDomainListController=new Array();
ZaDomainListController.prototype.show=function(d,c){if(!ZaZimbraAdmin.hasGlobalDomainListAccess()&&this._currentQuery==""){var e=ZaApp.getInstance()._domainNameList;
if(e&&(e instanceof Array)&&e.length>0){for(var b=0;
b<e.length;
b++){this._currentQuery+="("+ZaDomain.A_domainName+"="+e[b]+")"
}if(e.length>1){this._currentQuery="(|"+this._currentQuery+")"
}}else{this._list=new ZaItemList(ZaDomain);
this.numPages=0;
this._searchTotal=0;
if(d){this._show(this._list)
}else{this._updateUI(this._list)
}return
}}var g=Dwt.getNextId();
var h=new AjxCallback(this,this.searchCallback,{openInNewTab:c,limit:ZaDomain.RESULTSPERPAGE,CONS:ZaDomain,show:d,busyId:g});
var f={query:this._currentQuery,types:[ZaSearch.DOMAINS],sortBy:ZaDomain.A_domainName,offset:this.RESULTSPERPAGE*(this._currentPageNum-1),sortAscending:"1",limit:this.RESULTSPERPAGE,callback:h,controller:this,showBusy:true,busyId:g,busyMsg:ZaMsg.BUSY_SEARCHING_DOMAINS,skipCallbackIfCancelled:false,attrs:[ZaDomain.A_description,ZaDomain.A_domainName,ZaDomain.A_zimbraDomainStatus,ZaItem.A_zimbraId,ZaDomain.A_domainType],isInitialRequest:true};
this.scrollSearchParams={query:this._currentQuery,types:[ZaSearch.DOMAINS],sortBy:ZaDomain.A_domainName,sortAscending:"1",controller:this,showBusy:true,busyMsg:ZaMsg.BUSY_SEARCHING_DOMAINS,skipCallbackIfCancelled:false,attrs:[ZaDomain.A_description,ZaDomain.A_domainName,ZaDomain.A_zimbraDomainStatus,ZaItem.A_zimbraId,ZaDomain.A_domainType]};
ZaSearch.searchDirectory(f)
};
ZaDomainListController.prototype._show=function(c,b,e,d){this._updateUI(c,b,e,d);
ZaApp.getInstance().pushView(this.getContentViewId(),b,e);
return
};
ZaDomainListController.prototype.getList=function(){return this._list
};
ZaDomainListController.prototype.set=function(b){this.show(b)
};
ZaDomainListController.prototype.handleDomainChange=function(c){if(c){var b=c.getDetails();
if(b){if(this._list){this._list.replace(b)
}if(this._contentView){this._contentView.setUI()
}if(ZaApp.getInstance().getCurrentController()==this){this.show()
}else{if(this.objType&&c.type==this.objType&&this._UICreated){this.show(false)
}}this.changeActionsState();
ZaZimbraAdmin.getInstance().getOverviewPanelController().refreshRelatedTreeByEdit(c.getDetails())
}}};
ZaDomainListController.initPopupMenuMethod=function(){if(ZaZimbraAdmin.canCreateTopDomain()){this._popupOperations[ZaOperation.NEW]=new ZaOperation(ZaOperation.NEW,ZaMsg.TBB_New,ZaMsg.DTBB_New_tt,"Domain","DomainDis",new AjxListener(this,ZaDomainListController.prototype._newButtonListener))
}this._popupOperations[ZaOperation.EDIT]=new ZaOperation(ZaOperation.EDIT,ZaMsg.TBB_Edit,ZaMsg.DTBB_Edit_tt,"Edit","EditDis",new AjxListener(this,ZaDomainListController.prototype._editButtonListener));
this._popupOperations[ZaOperation.DELETE]=new ZaOperation(ZaOperation.DELETE,ZaMsg.TBB_Delete,ZaMsg.DTBB_Delete_tt,"Delete","DeleteDis",new AjxListener(this,ZaDomainListController.prototype._deleteButtonListener));
if(ZaZimbraAdmin.canCreateTopDomain()){this._popupOperations[ZaOperation.ADD_DOMAIN_ALIAS]=new ZaOperation(ZaOperation.ADD_DOMAIN_ALIAS,ZaMsg.TBB_AddDomainAlias,ZaMsg.DTBB_addDomainAlias_tt,"DomainAlias","DomainAliasDis",new AjxListener(this,ZaDomainListController.prototype._addDomainAliasListener))
}this._popupOperations[ZaOperation.VIEW_DOMAIN_ACCOUNTS]=new ZaOperation(ZaOperation.VIEW_DOMAIN_ACCOUNTS,ZaMsg.Domain_view_accounts,ZaMsg.Domain_view_accounts_tt,"Search","SearchDis",new AjxListener(this,this.viewAccountsButtonListener));
this._popupOperations[ZaOperation.GAL_WIZARD]=new ZaOperation(ZaOperation.GAL_WIZARD,ZaMsg.DTBB_GAlConfigWiz,ZaMsg.DTBB_GAlConfigWiz_tt,"GALWizard","GALWizardDis",new AjxListener(this,ZaDomainListController.prototype._galWizButtonListener));
this._popupOperations[ZaOperation.AUTH_WIZARD]=new ZaOperation(ZaOperation.AUTH_WIZARD,ZaMsg.DTBB_AuthConfigWiz,ZaMsg.DTBB_AuthConfigWiz_tt,"AuthWizard","AuthWizardDis",new AjxListener(this,ZaDomainListController.prototype._authWizButtonListener))
};
ZaController.initPopupMenuMethods.ZaDomainListController.push(ZaDomainListController.initPopupMenuMethod);
ZaDomainListController.prototype._createUI=function(b,d){this._contentView=new ZaDomainListView(this._container,this._defaultType);
ZaApp.getInstance()._controllers[this.getContentViewId()]=this;
var c=new Object();
c[ZaAppViewMgr.C_APP_CONTENT]=this._contentView;
ZaApp.getInstance().getAppViewMgr().createView(this.getContentViewId(),c);
this._initPopupMenu();
this._actionMenu=new ZaPopupMenu(this._contentView,"ActionMenu",null,this._popupOperations,ZaId.VIEW_DMLIST,ZaId.MENU_POP);
this._contentView.addSelectionListener(new AjxListener(this,this._listSelectionListener));
this._contentView.addActionListener(new AjxListener(this,this._listActionListener));
this._initDeleteDialogs();
this._UICreated=true
};
ZaDomainListController.prototype._initDeleteDialogs=function(){if(!this._removeConfirmMessageDialog){this._removeConfirmMessageDialog=ZaApp.getInstance().dialogs.removeConfirmMessageDialog=new ZaMsgDialog(ZaApp.getInstance().getAppCtxt().getShell(),null,[DwtDialog.YES_BUTTON,DwtDialog.NO_BUTTON],null,ZaId.CTR_PREFIX+ZaId.VIEW_DMLIST+"_removeConfirm")
}if(!this._forceRemoveMessageDialog){this._forceRemoveMessageDialog=new ZaMsgDialog(ZaApp.getInstance().getAppCtxt().getShell(),null,[DwtDialog.YES_BUTTON,DwtDialog.NO_BUTTON],null,ZaId.CTR_PREFIX+ZaId.VIEW_DMLIST+"_forceRemoveConfirm");
this._forceRemoveMessageDialog.registerCallback(DwtDialog.YES_BUTTON,ZaDomainListController.prototype._forceDeleteDomainCallback,this);
this._forceRemoveMessageDialog.registerCallback(DwtDialog.NO_BUTTON,ZaDomainListController.prototype._donotForceDeleteDomainsCallback,this);
this._forceRemoveMessageDialog._button[DwtDialog.YES_BUTTON].setText(ZaMsg.FORCE_DELETE_BUTTON)
}};
ZaDomainListController.prototype._fireDomainCreationEvent=function(d){try{if(this._evtMgr.isListenerRegistered(ZaEvent.E_CREATE)){var b=new ZaEvent(ZaEvent.S_DOMAIN);
b.set(ZaEvent.E_CREATE,this);
b.setDetails(d);
this._evtMgr.notifyListeners(ZaEvent.E_CREATE,b)
}}catch(c){this._handleException(c,"ZaDomainListController.prototype._fireDomainCreationEvent",d,false)
}};
ZaDomainListController.prototype._fireDomainChangeEvent=function(d){try{if(this._evtMgr.isListenerRegistered(ZaEvent.E_MODIFY)){var b=new ZaEvent(ZaEvent.S_DOMAIN);
b.set(ZaEvent.E_MODIFY,this);
b.setDetails(d);
this._evtMgr.notifyListeners(ZaEvent.E_MODIFY,b)
}}catch(c){this._handleException(c,"ZaDomainListController.prototype._fireDomainChangeEvent",d,false)
}};
ZaDomainListController.prototype._listSelectionListener=function(d){if(d.detail==DwtListView.ITEM_DBL_CLICKED){if(d.item){var c=d.item;
if(c.attrs[ZaDomain.A_domainType]==ZaDomain.domainTypes.local){ZaApp.getInstance().getDomainController().show(c)
}else{if(c.attrs[ZaDomain.A_domainType]==ZaDomain.domainTypes.alias){ZaApp.getInstance().getDomainAliasWizard(true).editDomainAlias(c,true)
}}var b=ZaTree.getPathByArray([ZaMsg.OVP_home,ZaMsg.OVP_configure,ZaMsg.OVP_domains]);
ZaZimbraAdmin.getInstance().getOverviewPanelController().addObjectItem(b,c.name,null,false,false,c,undefined,true)
}}else{this.changeActionsState()
}};
ZaDomainListController.prototype._listActionListener=function(b){this.changeActionsState();
this._actionMenu.popup(0,b.docX,b.docY)
};
ZaDomainListController.prototype._editButtonListener=function(c){if(this._contentView.getSelectionCount()==1){var b=this._contentView.getSelection()[0];
this._editItem(b)
}};
ZaDomainListController.prototype._editItem=function(c){if(c.attrs[ZaDomain.A_domainType]==ZaDomain.domainTypes.local){ZaApp.getInstance().getDomainController().show(c)
}else{if(c.attrs[ZaDomain.A_domainType]==ZaDomain.domainTypes.alias){ZaApp.getInstance().getDomainAliasWizard(true).editDomainAlias(c,true)
}}var b=ZaTree.getPathByArray([ZaMsg.OVP_home,ZaMsg.OVP_configure,ZaMsg.OVP_domains]);
ZaZimbraAdmin.getInstance().getOverviewPanelController().addObjectItem(b,c.name,null,false,false,c,undefined,true)
};
ZaDomainListController.prototype._addDomainAliasListener=function(c){var d=new ZaDomain();
if(this._contentView.getSelectionCount()==1){var b=this._contentView.getSelection()[0];
d[ZaDomain.A2_zimbraDomainAliasTarget]=b
}var e=ZaApp.getInstance().getDomainAliasWizard();
e.registerCallback(DwtDialog.OK_BUTTON,ZaDomain.prototype.createDomainAlias,d,e._localXForm);
e.setObject(d);
e.popup()
};
ZaDomainListController.prototype._newButtonListener=function(c){try{var d=new ZaDomain();
d.getAttrs={all:true};
d.loadNewObjectDefaults("name","domain.tld");
if(!ZaApp.getInstance().dialogs.ZaNewDomainXWizard){ZaApp.getInstance().dialogs.ZaNewDomainXWizard=new ZaNewDomainXWizard(this._container,d)
}this._newDomainWizard=ZaApp.getInstance().dialogs.ZaNewDomainXWizard;
this._newDomainWizard.registerCallback(DwtWizardDialog.FINISH_BUTTON,ZaDomainListController.prototype._finishNewButtonListener,this,null);
this._newDomainWizard.setObject(d);
this._newDomainWizard.popup()
}catch(b){this._handleException(b,"ZaDomainListController.prototype._newButtonListener",null,false)
}};
ZaDomainListController.prototype._galWizButtonListener=function(d){try{if(this._contentView.getSelectionCount()==1){var c=this._contentView.getSelection()[0];
this._openConfigGAL(c)
}}catch(b){this._handleException(b,"ZaDomainListController.prototype._showGalWizard",null,false)
}};
ZaDomainListController.prototype._openConfigGAL=function(b){this._currentObject=b;
b.load("name",b.attrs[ZaDomain.A_domainName],false,true);
ZaApp.getInstance().dialogs.ZaGALConfigXWizard=new ZaGALConfigXWizard(this._container,b);
this._galWizard=ZaApp.getInstance().dialogs.ZaGALConfigXWizard;
b._extid=ZaUtil.getItemUUid();
b._editObject=b;
this._galWizard.setObject(b);
this._galWizard.popup()
};
ZaDomainListController.prototype._authWizButtonListener=function(d){try{if(this._contentView.getSelectionCount()==1){var c=this._contentView.getSelection()[0];
this._openAuthWiz(c)
}}catch(b){this._handleException(b,"ZaDomainListController.prototype._showAuthWizard",null,false)
}};
ZaDomainListController.prototype._openAuthWiz=function(b){this._currentObject=b;
b.load("name",b.attrs[ZaDomain.A_domainName],false,true);
this._authWizard=ZaApp.getInstance().dialogs.ZaTaskAuthConfigWizard=new ZaTaskAuthConfigWizard(this._container);
b._extid=ZaUtil.getItemUUid();
b._editObject=b;
this._authWizard.setObject(b);
this._authWizard.popup()
};
ZaDomainListController.prototype._autoProvWizButtonListener=function(d){try{if(this._contentView.getSelectionCount()==1){var c=this._contentView.getSelection()[0];
this._currentObject=c;
c.load("name",c.attrs[ZaDomain.A_domainName],false,true);
if(!this._autoProvWizard){if(ZaApp.getInstance().dialogs.ZaTaskAutoProvDialog){this._autoProvWizard=ZaApp.getInstance().dialogs.ZaTaskAutoProvDialog
}else{this._autoProvWizard=ZaApp.getInstance().dialogs.ZaTaskAutoProvDialog=new ZaTaskAutoProvDialog(this._container,ZaMsg.NAD_AutoProvConfigTitle)
}}c._extid=ZaUtil.getItemUUid();
c._editObject=c;
this._autoProvWizard.registerCallback(DwtDialog.OK_BUTTON,ZaTaskAutoProvDialog.prototype.finishWizard,this._autoProvWizard,null);
c.currentTab="1";
this._autoProvWizard.setObject(c);
this._autoProvWizard.popup()
}}catch(b){this._handleException(b,"ZaDomainListController.prototype._autoProvWizButtonListener",null,false)
}};
ZaDomainListController.prototype._deleteButtonListener=function(g){this._initDeleteDialogs();
this._removeList=new Array();
this._itemsInTabList=[];
var f=ZaApp.getInstance().getCurrentController()._contentView;
if(f.getSelectionCount()>0){var e=f.getSelection();
var c=e.length;
for(var b=0;
b<c;
b++){var d=e[b];
if(d){if(ZaApp.getInstance().getTabGroup()&&ZaApp.getInstance().getTabGroup().getTabByItemId(d.id)){this._itemsInTabList.push(d)
}else{this._removeList.push(d)
}}}}if(this._itemsInTabList.length>0){if(!ZaApp.getInstance().dialogs.ConfirmDeleteItemsInTabDialog){ZaApp.getInstance().dialogs.ConfirmDeleteItemsInTabDialog=new ZaMsgDialog(ZaApp.getInstance().getAppCtxt().getShell(),null,[DwtDialog.CANCEL_BUTTON],[ZaMsgDialog.CLOSE_TAB_DELETE_BUTTON_DESC,ZaMsgDialog.NO_DELETE_BUTTON_DESC],ZaId.CTR_PREFIX+ZaId.VIEW_DMLIST+"_ConfirmDeleteItemsInTab")
}var h=ZaMsg.dl_warning_delete_accounts_in_tab;
h+=ZaDomainListController.getDlMsgFromList(this._itemsInTabList);
ZaApp.getInstance().dialogs.ConfirmDeleteItemsInTabDialog.setMessage(h,DwtMessageDialog.WARNING_STYLE);
ZaApp.getInstance().dialogs.ConfirmDeleteItemsInTabDialog.registerCallback(ZaMsgDialog.CLOSE_TAB_DELETE_BUTTON,ZaDomainListController.prototype._closeTabsBeforeRemove,this);
ZaApp.getInstance().dialogs.ConfirmDeleteItemsInTabDialog.registerCallback(ZaMsgDialog.NO_DELETE_BUTTON,ZaDomainListController.prototype._deleteDomainInRemoveList,this);
ZaApp.getInstance().dialogs.ConfirmDeleteItemsInTabDialog.popup()
}else{this._deleteDomainInRemoveList()
}};
ZaDomainListController.prototype.viewAccountsButtonListener=function(d){if(this._contentView.getSelectionCount()==1){var c=this._contentView.getSelection()[0];
var b=c.name;
ZaDomain.searchAccountsInDomain(b)
}};
ZaDomainListController.prototype._closeTabsBeforeRemove=function(){this.closeTabsInRemoveList();
this._deleteDomainInRemoveList()
};
ZaDomainListController.prototype._deleteDomainInRemoveList=function(){if(ZaApp.getInstance().dialogs.ConfirmDeleteItemsInTabDialog){ZaApp.getInstance().dialogs.ConfirmDeleteItemsInTabDialog.popdown()
}if(this._removeList.length){var b=ZaMsg.Q_DELETE_DOMAINS;
b+=ZaDomainListController.getDlMsgFromList(this._removeList);
this._removeConfirmMessageDialog.setMessage(b,DwtMessageDialog.INFO_STYLE);
this._removeConfirmMessageDialog.registerCallback(DwtDialog.YES_BUTTON,ZaDomainListController.prototype._deleteDomainsCallback,this);
this._removeConfirmMessageDialog.registerCallback(DwtDialog.NO_BUTTON,ZaDomainListController.prototype._donotDeleteDomainsCallback,this);
this._removeConfirmMessageDialog.popup()
}};
ZaDomainListController.getDlMsgFromList=function(c){var g=0,d;
var f="<br><ul>";
for(var e in c){if(g>19){f+="<li>...</li>";
break
}f+="<li>";
d=c[e].name;
if(d.length>50){var b=49;
var h=0;
while(b<d.length){f+=AjxStringUtil.htmlEncode(d.slice(h,b));
h=b+1;
if(h>=(d.length)){break
}b=(d.length<=(b+50))?d.length-1:(b+50);
f+="<br>"
}}else{f+=AjxStringUtil.htmlEncode(d)
}f+="</li>";
g++
}f+="</ul>";
return f
};
ZaDomainListController.prototype._deleteDomainsCallback=function(){if(!this._successRemList){this._successRemList=new Array()
}for(var c=0;
c<this._removeList.length;
c++){if(this._removeList[c]&&AjxUtil.indexOf(this._successRemList,this._removeList[c])==-1){try{this._removeList[c].remove();
this._successRemList.push(this._removeList[c])
}catch(b){this._removeConfirmMessageDialog.popdown();
if(b.code==ZmCsfeException.DOMAIN_NOT_EMPTY&&ZaZimbraAdmin.haveTargetRight(ZaItem.ACCOUNT,ZaAccount.DELETE_ACCOUNT_RIGHT,this._removeList[c].name)&&ZaZimbraAdmin.haveTargetRight(ZaItem.ACCOUNT,ZaAccount.RIGHT_LIST_ACCOUNT,this._removeList[c].name)){this._forceDeleteDomain(this._removeList[c])
}else{if(b.code==ZmCsfeException.DOMAIN_NOT_EMPTY){this.popupErrorDialog(ZaMsg.ERROR_DOMAIN_NOT_EMPTY)
}else{this._handleException(b,"ZaDomainListController.prototype._deleteDomainsCallback",null,false)
}}return
}if(this._list){this._list.remove(this._removeList[c])
}}}ZaApp.getInstance().getCurrentController().fireRemovalEvent(this._successRemList);
this._successRemList=null;
this._removeConfirmMessageDialog.popdown()
};
ZaDomainListController.prototype._donotDeleteDomainsCallback=function(){this._removeList=new Array();
this._removeConfirmMessageDialog.popdown()
};
ZaDomainListController.prototype._getAllAccountDomain=function(f){if(f){var j=Dwt.getNextId();
var e=[ZaSearch.ACCOUNTS,ZaSearch.DLS,ZaSearch.ALIASES,ZaSearch.RESOURCES];
var h={query:"",domain:f,types:e,attrs:AjxBuffer.concat(ZaAlias.searchAttributes,",",ZaDistributionList.searchAttributes,",",ZaResource.searchAttributes,",",ZaSearch.standardAttributes),controller:ZaApp.getInstance().getCurrentController(),showBusy:true,busyId:j,busyMsg:ZaMsg.BUSY_SEARCHING};
var g=ZaSearch.searchDirectory(h);
if(g&&g.Body.SearchDirectoryResponse){var c=g.Body.SearchDirectoryResponse;
var d=new ZaItemList(ZaAccount);
d.loadFromJS(c);
return d.getArray()
}else{return null
}}else{var b=ZaApp.getInstance().getCurrentController();
b.popupErrorDialog(ZaMsg.ERROR_NO_DOMAIN_NAME)
}return null
};
ZaDomainListController.prototype._forceDeleteDomain=function(g){var b=this._getAllAccountDomain(g.name);
if(b&&b.length>0){var f=0;
var e=0;
for(var d=0;
d<b.length;
d++){if(b[d].attrs[ZaAccount.A_zimbraIsSystemAccount]=="TRUE"){f++
}else{e++
}}this._forceRemoveAccountList=b;
this._forceRemoveDomain=g;
var c=AjxMessageFormat.format(ZaMsg.Q_FORCE_DELETE_DOMAIN,[g.name,f,e]);
c+=ZaDomainListController.getDlMsgFromList(this._forceRemoveAccountList);
this._forceRemoveMessageDialog.setMessage(c,DwtMessageDialog.INFO_STYLE);
this._forceRemoveMessageDialog.popup()
}};
ZaDomainListController.prototype._forceDeleteDomainCallback=function(){this._forceRemoveMessageDialog.popdown();
var b=this._forceRemoveAccountList;
var e=this._forceRemoveDomain;
if(!b||!e){return
}try{for(var d=0;
d<b.length;
d++){b[d].remove()
}this._forceRemoveAccountList=null;
this._deleteDomainsCallback()
}catch(c){this._handleException(c,"ZaDomainListController.prototype._forceDeleteDomainCallback",null,false)
}};
ZaDomainListController.prototype._donotForceDeleteDomainsCallback=function(){this._forceRemoveMessageDialog.popdown();
if(this._forceRemoveDomain){AjxUtil.arrayRemove(this._removeList,this._forceRemoveDomain);
this._deleteDomainsCallback()
}};
ZaDomainListController.changeActionsStateMethod=function(){if(!this._contentView){return
}var b=this._contentView.getSelectionCount();
if(b==1){var c=this._contentView.getSelection()[0];
if(c){if(c.attrs[ZaDomain.A_domainType]=="alias"){if(this._popupOperations[ZaOperation.ADD_DOMAIN_ALIAS]){this._popupOperations[ZaOperation.ADD_DOMAIN_ALIAS].enabled=false
}if(this._popupOperations[ZaOperation.AUTOPROV_WIZARD]){this._popupOperations[ZaOperation.AUTOPROV_WIZARD].enabled=false
}}if(c.attrs[ZaDomain.A_zimbraDomainStatus]==ZaDomain.DOMAIN_STATUS_SHUTDOWN){if(this._popupOperations[ZaOperation.EDIT]){this._popupOperations[ZaOperation.EDIT].enabled=false
}if(this._popupOperations[ZaOperation.AUTH_WIZARD]){this._popupOperations[ZaOperation.AUTH_WIZARD].enabled=false
}if(this._popupOperations[ZaOperation.AUTOPROV_WIZARD]){this._popupOperations[ZaOperation.AUTOPROV_WIZARD].enabled=false
}if(this._popupOperations[ZaOperation.GAL_WIZARD]){this._popupOperations[ZaOperation.GAL_WIZARD].enabled=false
}if(this._popupOperations[ZaOperation.VIEW_DOMAIN_ACCOUNTS]){this._popupOperations[ZaOperation.VIEW_DOMAIN_ACCOUNTS].enabled=false
}}else{if(AjxUtil.isEmpty(c.rights)){c.loadEffectiveRights("id",c.id,false)
}if(!(ZaDomain.canConfigureGal(c))){if(this._popupOperations[ZaOperation.GAL_WIZARD]){this._popupOperations[ZaOperation.GAL_WIZARD].enabled=false
}}if(!(ZaDomain.canConfigureAuth(c))){if(this._popupOperations[ZaOperation.AUTH_WIZARD]){this._popupOperations[ZaOperation.AUTH_WIZARD].enabled=false
}}if(!(ZaDomain.canConfigureAutoProv(c))){if(this._popupOperations[ZaOperation.AUTOPROV_WIZARD]){this._popupOperations[ZaOperation.AUTOPROV_WIZARD].enabled=false
}}if(!c.rights[ZaDomain.RIGHT_DELETE_DOMAIN]){if(this._popupOperations[ZaOperation.DELETE]){this._popupOperations[ZaOperation.DELETE].enabled=false
}}}}}else{if(b>1){if(this._popupOperations[ZaOperation.AUTH_WIZARD]){this._popupOperations[ZaOperation.AUTH_WIZARD].enabled=false
}if(this._popupOperations[ZaOperation.AUTOPROV_WIZARD]){this._popupOperations[ZaOperation.AUTOPROV_WIZARD].enabled=false
}if(this._popupOperations[ZaOperation.GAL_WIZARD]){this._popupOperations[ZaOperation.GAL_WIZARD].enabled=false
}if(this._popupOperations[ZaOperation.EDIT]){this._popupOperations[ZaOperation.EDIT].enabled=false
}if(this._popupOperations[ZaOperation.VIEW_DOMAIN_ACCOUNTS]){this._popupOperations[ZaOperation.VIEW_DOMAIN_ACCOUNTS].enabled=false
}}else{if(this._popupOperations[ZaOperation.EDIT]){this._popupOperations[ZaOperation.EDIT].enabled=false
}if(this._popupOperations[ZaOperation.DELETE]){this._popupOperations[ZaOperation.DELETE].enabled=false
}if(this._popupOperations[ZaOperation.AUTH_WIZARD]){this._popupOperations[ZaOperation.AUTH_WIZARD].enabled=false
}if(this._popupOperations[ZaOperation.AUTOPROV_WIZARD]){this._popupOperations[ZaOperation.AUTOPROV_WIZARD].enabled=false
}if(this._popupOperations[ZaOperation.GAL_WIZARD]){this._popupOperations[ZaOperation.GAL_WIZARD].enabled=false
}if(this._popupOperations[ZaOperation.VIEW_DOMAIN_ACCOUNTS]){this._popupOperations[ZaOperation.VIEW_DOMAIN_ACCOUNTS].enabled=false
}}}};
ZaController.changeActionsStateMethods.ZaDomainListController.push(ZaDomainListController.changeActionsStateMethod);
ZaDomainListController.prototype._finishNewButtonListener=function(d){try{var f=this._newDomainWizard.getObject();
var e=ZaItem.create(f,ZaDomain,"ZaDomain");
if(e!=null){this._newDomainWizard.popdown();
this._fireDomainCreationEvent(e);
var b=new ZaEvent(ZaEvent.S_DOMAIN);
b.set(ZaEvent.E_CREATE,this);
b.setDetails(e);
this.handleCreation(b);
ZaApp.getInstance().getAppCtxt().getAppController().setActionStatusMsg(AjxMessageFormat.format(ZaMsg.DomainCreated,[e.name]))
}}catch(c){if(c.code==ZmCsfeException.DOMAIN_EXISTS){this.popupErrorDialog(ZaMsg.ERROR_DOMAIN_EXISTS,c)
}else{this._handleException(c,"ZaDomainListController.prototype._finishNewButtonListener",null,false)
}}return
};
ZaDomainListController.prototype.notifyAllOpenTabs=function(b){this._currentObject=b;
this._notifyAllOpenTabs()
};
ZaDomainListController.prototype._notifyAllOpenTabs=function(){var d="<br><ul>";
var c=false;
for(var f=0;
f<ZaAppTabGroup._TABS.size();
f++){var g=ZaAppTabGroup._TABS.get(f);
var e=g.getAppView();
if(e&&e._containedObject&&e._containedObject.name){var j=e._containedObject.name;
var b=j.indexOf("@");
var h=null;
if(b>0){h=j.substring(b+1)
}if((h!=null&&h==this._currentObject.attrs[ZaDomain.A_domainName])||(h==null&&j==this._currentObject.attrs[ZaDomain.A_domainName])){d+="<li>"+j+"</li>";
c=true
}}}d+="</ul></br>";
if(c){ZaApp.getInstance().getCurrentController().popupWarningDialog(ZaMsg.WARN_CHANGE_AUTH_METH+d)
}};
ZaDomainListController.prototype._finishAuthButtonListener=function(c){try{ZaDomain.modifyAuthSettings.call(this._currentObject,this._authWizard.getObject());
this._fireDomainChangeEvent(this._currentObject);
this._authWizard.popdown();
this._notifyAllOpenTabs()
}catch(b){this._handleException(b,"ZaDomainListController.prototype._finishAuthButtonListener",null,false)
}return
};
ZaDomainListController.prototype._finishAutoProvButtonListener=function(c){try{if(!this._autoProvWizard._checkGeneralConfig()||!this._autoProvWizard._checkEagerConfig()||!this._autoProvWizard._checkLazyConfig()){return
}var d=this._autoProvWizard.getObject();
this._autoProvWizard._combineConfigureValues(d);
ZaDomain.modifyAutoPovSettings.call(this._currentObject,d);
this._fireDomainChangeEvent(this._currentObject);
this._autoProvWizard.popdown();
this._notifyAllOpenTabs()
}catch(b){this._handleException(b,"ZaDomainListController.prototype._finishAutoProvButtonListener",null,false)
}return
};
ZaDomainListController.prototype._finishGalButtonListener=function(c){try{ZaDomain.modifyGalSettings.call(this._currentObject,this._galWizard.getObject());
this._fireDomainChangeEvent(this._currentObject);
this._galWizard.popdown()
}catch(b){this._handleException(b,"ZaDomainListController.prototype._finishGalButtonListener",null,false)
}return
};
ZaDomainListController.prototype.searchCallback=function(d,c){ZaListViewController.prototype.searchCallback.call(this,d,c);
var b=ZaApp.getInstance();
b._domainList=this.getList()
}
}if(AjxPackage.define("zimbraAdmin.servers.controller.ZaServerListController")){ZaServerListController=function(c,b){ZaListViewController.call(this,c,b,"ZaServerListController");
this._toolbarOperations=new Array();
this._popupOperations=new Array();
this._helpURL=location.pathname+ZaUtil.HELP_URL+"managing_servers/managing_servers.htm?locid="+AjxEnv.DEFAULT_LOCALE;
this._helpButtonText=ZaMsg.helpManageServers
};
ZaServerListController.prototype=new ZaListViewController();
ZaServerListController.prototype.constructor=ZaServerListController;
ZaController.initToolbarMethods.ZaServerListController=new Array();
ZaController.initPopupMenuMethods.ZaServerListController=new Array();
ZaController.changeActionsStateMethods.ZaServerListController=new Array();
ZaServerListController.prototype.show=function(c,b){if(!this._UICreated){this._createUI()
}if(c!=null){this._contentView.set(c.getVector())
}ZaApp.getInstance().pushView(this.getContentViewId());
if(c!=null){this._list=c
}this.changeActionsState()
};
ZaServerListController.initToolbarMethod=function(){this._toolbarOperations[ZaOperation.EDIT]=new ZaOperation(ZaOperation.EDIT,ZaMsg.TBB_Edit,ZaMsg.SERTBB_Edit_tt,"Properties","PropertiesDis",new AjxListener(this,ZaServerListController.prototype._editButtonListener));
this._toolbarOperations[ZaOperation.FLUSH_CACHE]=new ZaOperation(ZaOperation.FLUSH_CACHE,ZaMsg.SERTBB_FlushCache,ZaMsg.SERTBB_FlushCache_tt,"FlushCache","FlushCache",new AjxListener(this,ZaServerListController.prototype._flushCacheButtonListener));
this._toolbarOperations[ZaOperation.NONE]=new ZaOperation(ZaOperation.NONE);
this._toolbarOperations[ZaOperation.HELP]=new ZaOperation(ZaOperation.HELP,ZaMsg.TBB_Help,ZaMsg.TBB_Help_tt,"Help","Help",new AjxListener(this,this._helpButtonListener));
this._toolbarOrder.push(ZaOperation.EDIT);
this._toolbarOrder.push(ZaOperation.FLUSH_CACHE);
this._toolbarOrder.push(ZaOperation.NONE);
this._toolbarOrder.push(ZaOperation.HELP)
};
ZaController.initToolbarMethods.ZaServerListController.push(ZaServerListController.initToolbarMethod);
ZaServerListController.initPopupMenuMethod=function(){this._popupOperations[ZaOperation.EDIT]=new ZaOperation(ZaOperation.EDIT,ZaMsg.TBB_Edit,ZaMsg.SERTBB_Edit_tt,"Properties","PropertiesDis",new AjxListener(this,ZaServerListController.prototype._editButtonListener));
this._popupOperations[ZaOperation.FLUSH_CACHE]=new ZaOperation(ZaOperation.FLUSH_CACHE,ZaMsg.SERTBB_FlushCache,ZaMsg.SERTBB_FlushCache_tt,"FlushCache","FlushCache",new AjxListener(this,ZaServerListController.prototype._flushCacheButtonListener))
};
ZaController.initPopupMenuMethods.ZaServerListController.push(ZaServerListController.initPopupMenuMethod);
ZaServerListController.prototype._createUI=function(){try{var c=new Object();
this._contentView=new ZaServerListView(this._container);
this._initPopupMenu();
this._actionMenu=new ZaPopupMenu(this._contentView,"ActionMenu",null,this._popupOperations,ZaId.VIEW_SERLIST,ZaId.MENU_POP);
c[ZaAppViewMgr.C_APP_CONTENT]=this._contentView;
ZaApp.getInstance().getAppViewMgr().createView(this.getContentViewId(),c);
this._contentView.addSelectionListener(new AjxListener(this,this._listSelectionListener));
this._contentView.addActionListener(new AjxListener(this,this._listActionListener));
this._UICreated=true;
ZaApp.getInstance()._controllers[this.getContentViewId()]=this
}catch(b){this._handleException(b,"ZaServerListController.prototype._createUI",null,false);
return
}};
ZaServerListController.prototype._flushCacheButtonListener=function(g){try{if(this._contentView.getSelectionCount()>0){var f=this._contentView.getSelection();
if(f&&f.length){srvList=[];
srvList._version=1;
var e=[];
for(var d=0;
d<f.length;
d++){var b=f[d];
b.status=0;
srvList.push(b);
e.push(b.id)
}obj={statusMessage:null,flushZimlet:true,flushSkin:true,flushLocale:true,serverList:srvList,status:0,name:(e.length>1?ZaMsg.multiple_servers:srvList[0].name),_uuid:(e.length>1?e.join("__"):e[0])};
obj._uuid=e.join("__");
ZaApp.getInstance().dialogs.flushCacheDialog=new ZaFlushCacheXDialog(this._container,{id:(e.length>1?e.join("__"):e[0]),name:(e.length>1?ZaMsg.multiple_servers:srvList[0].name)});
ZaApp.getInstance().dialogs.flushCacheDialog.setObject(obj);
ZaApp.getInstance().dialogs.flushCacheDialog.popup()
}}}catch(c){this._handleException(c,"ZaServerListController.prototype._flushCacheButtonListener",null,false)
}return
};
ZaServerListController.prototype.set=function(b){this.show(b)
};
ZaServerListController.prototype.handleServerChange=function(c){if(c){var b=c.getDetails();
if(b){if(this._list){this._list.replace(b)
}if(this._contentView){this._contentView.setUI()
}if(ZaApp.getInstance().getCurrentController()==this){this.show()
}this.changeActionsState()
}}};
ZaServerListController.prototype._newButtonListener=function(b){var c=new ZaServer();
ZaApp.getInstance().getServerController().show(c)
};
ZaServerListController.prototype._listSelectionListener=function(c){if(c.detail==DwtListView.ITEM_DBL_CLICKED){if(c.item){this._selectedItem=c.item;
ZaApp.getInstance().getServerController().show(c.item);
var b=ZaTree.getPathByArray([ZaMsg.OVP_home,ZaMsg.OVP_configure,ZaMsg.OVP_servers]);
ZaZimbraAdmin.getInstance().getOverviewPanelController().addObjectItem(b,c.item.name,null,false,false,c.item,undefined,true)
}}else{this.changeActionsState()
}};
ZaServerListController.prototype._listActionListener=function(b){this.changeActionsState();
this._actionMenu.popup(0,b.docX,b.docY)
};
ZaServerListController.prototype._editButtonListener=function(d){if(this._contentView.getSelectionCount()==1){var c=this._contentView.getSelection()[0];
ZaApp.getInstance().getServerController().show(c);
var b=ZaTree.getPathByArray([ZaMsg.OVP_home,ZaMsg.OVP_configure,ZaMsg.OVP_servers]);
ZaZimbraAdmin.getInstance().getOverviewPanelController().addObjectItem(b,c.name,null,false,false,c)
}};
ZaServerListController.prototype.getPopUpOperation=function(){return this._popupOperations
};
ZaServerListController.changeActionsStateMethod=function(){if(this._contentView){var c=this._contentView.getSelectionCount();
var d=true;
var e=this._contentView.getSelection();
if(e){var c=e.length;
for(var b=0;
b<c;
b++){if(!ZaItem.hasRight(ZaServer.FLUSH_CACHE_RIGHT,e[b])||!e[b].attrs[ZaServer.A_zimbraMailboxServiceEnabled]||!e[b].attrs[ZaServer.A_zimbraMailboxServiceInstalled]){d=false;
break
}}}if(c==1){if(!d){if(this._toolbarOperations[ZaOperation.FLUSH_CACHE]){this._toolbarOperations[ZaOperation.FLUSH_CACHE].enabled=false
}if(this._popupOperations[ZaOperation.FLUSH_CACHE]){this._popupOperations[ZaOperation.FLUSH_CACHE].enabled=false
}}}else{if(c>1){if(this._toolbarOperations[ZaOperation.EDIT]){this._toolbarOperations[ZaOperation.EDIT].enabled=false
}if(this._popupOperations[ZaOperation.EDIT]){this._popupOperations[ZaOperation.EDIT].enabled=false
}if(!d){if(this._toolbarOperations[ZaOperation.FLUSH_CACHE]){this._toolbarOperations[ZaOperation.FLUSH_CACHE].enabled=false
}if(this._popupOperations[ZaOperation.FLUSH_CACHE]){this._popupOperations[ZaOperation.FLUSH_CACHE].enabled=false
}}}else{if(c<1){if(this._toolbarOperations[ZaOperation.EDIT]){this._toolbarOperations[ZaOperation.EDIT].enabled=false
}if(this._popupOperations[ZaOperation.EDIT]){this._popupOperations[ZaOperation.EDIT].enabled=false
}if(this._toolbarOperations[ZaOperation.FLUSH_CACHE]){this._toolbarOperations[ZaOperation.FLUSH_CACHE].enabled=false
}if(this._popupOperations[ZaOperation.FLUSH_CACHE]){this._popupOperations[ZaOperation.FLUSH_CACHE].enabled=false
}}}}}};
ZaController.changeActionsStateMethods.ZaServerListController.push(ZaServerListController.changeActionsStateMethod)
}if(AjxPackage.define("zimbraAdmin.servers.controller.ZaServerController")){ZaServerController=function(c,b){ZaXFormViewController.call(this,c,b,"ZaServerController");
this._UICreated=false;
this._helpURL=location.pathname+ZaUtil.HELP_URL+"managing_servers/managing_servers.htm?locid="+AjxEnv.DEFAULT_LOCALE;
this._helpButtonText=ZaMsg.helpManageServers;
this._toolbarOperations=new Array();
this._popupOperations=new Array();
this.deleteMsg=ZaMsg.Q_DELETE_SERVER;
this.objType=ZaEvent.S_SERVER;
this.tabConstructor=ZaServerXFormView
};
ZaServerController.prototype=new ZaXFormViewController();
ZaServerController.prototype.constructor=ZaServerController;
ZaController.initToolbarMethods.ZaServerController=new Array();
ZaController.initPopupMenuMethods.ZaServerController=new Array();
ZaController.setViewMethods.ZaServerController=new Array();
ZaController.changeActionsStateMethods.ZaServerController=new Array();
ZaXFormViewController.preSaveValidationMethods.ZaServerController=new Array();
ZaServerController.prototype.show=function(b){if(!this.selectExistingTabByItemId(b.id)){this._setView(b,true)
}};
ZaServerController.changeActionsStateMethod=function(){var b=(this._view&&this._view.isDirty());
if(this._popupOperations[ZaOperation.SAVE]){this._popupOperations[ZaOperation.SAVE].enabled=b
}};
ZaController.changeActionsStateMethods.ZaServerController.push(ZaServerController.changeActionsStateMethod);
ZaServerController.prototype.setEnabled=function(b){};
ZaServerController.prototype.addServerChangeListener=function(b){this._evtMgr.addListener(ZaEvent.E_MODIFY,b)
};
ZaServerController.prototype.removeServerChangeListener=function(b){this._evtMgr.removeListener(ZaEvent.E_MODIFY,b)
};
ZaServerController.initPopupMethod=function(){this._popupOperations[ZaOperation.SAVE]=new ZaOperation(ZaOperation.SAVE,ZaMsg.TBB_Save,ZaMsg.SERTBB_Save_tt,"Save","SaveDis",new AjxListener(this,this.saveButtonListener));
this._popupOperations[ZaOperation.FLUSH_CACHE]=new ZaOperation(ZaOperation.FLUSH_CACHE,ZaMsg.SERTBB_FlushCache,ZaMsg.SERTBB_FlushCache_tt,"FlushCache","FlushCache",new AjxListener(this,ZaServerController.prototype.flushCacheButtonListener));
this._popupOperations[ZaOperation.DOWNLOAD_SERVER_CONFIG]=new ZaOperation(ZaOperation.DOWNLOAD_SERVER_CONFIG,ZaMsg.TBB_DownloadConfig,ZaMsg.SERTBB_DownloadConfig_tt,"DownloadServerConfig","DownloadServerConfig",new AjxListener(this,this.downloadConfigButtonListener))
};
ZaController.initPopupMenuMethods.ZaServerController.push(ZaServerController.initPopupMethod);
ZaServerController.setViewMethod=function(b){b.load("id",b.id,false,true);
if(!this._UICreated){this._createUI(b)
}ZaApp.getInstance().pushView(this.getContentViewId());
this._view.setDirty(false);
this._view.setObject(b);
this._currentObject=b
};
ZaController.setViewMethods.ZaServerController.push(ZaServerController.setViewMethod);
ZaServerController.prototype._createUI=function(b){this._contentView=this._view=new this.tabConstructor(this._container,b);
this._initPopupMenu();
var c=new Object();
c[ZaAppViewMgr.C_APP_CONTENT]=this._view;
ZaApp.getInstance().getAppViewMgr().createView(this.getContentViewId(),c);
this._UICreated=true;
ZaApp.getInstance()._controllers[this.getContentViewId()]=this
};
ZaServerController.prototype.getPopUpOperation=function(){return this._popupOperations
};
ZaServerController.prototype._saveChanges=function(){var b=this._view.getObject();
if(this._currentObject[ZaModel.currentTab]!=b[ZaModel.currentTab]){this._currentObject[ZaModel.currentTab]=b[ZaModel.currentTab]
}this._currentObject.modify(b);
this._view.setDirty(false);
ZaApp.getInstance().getAppCtxt().getAppController().setActionStatusMsg(AjxMessageFormat.format(ZaMsg.ServerModified,[this._currentObject.name]));
return true
};
ZaServerController.prototype.validateMyNetworks=function(y){if(!ZaItem.hasWritePermission(ZaServer.A_zimbraMtaMyNetworks,this._currentObject)){this.runValidationStack(y);
return
}var m=this._view.getObject();
if(!m.attrs.hasOwnProperty(ZaServer.A_zimbraMtaMyNetworks)){this.runValidationStack(y);
return
}var k=[];
var d=[];
var q=0;
if(this._currentObject.nifs&&this._currentObject.nifs.length){q=this._currentObject.nifs.length;
for(var u=0;
u<q;
u++){if(this._currentObject.nifs[u]&&this._currentObject.nifs[u].attrs&&this._currentObject.nifs[u].attrs.addr&&this._currentObject.nifs[u].attrs.mask){try{var x=ZaIPUtil.isValidIP(this._currentObject.nifs[u].attrs.addr);
var h=ZaIPUtil.isValidIP(this._currentObject.nifs[u].attrs.addr);
k.push(x);
d.push(h)
}catch(v){}}}}var c=q;
if(m.attrs[ZaServer.A_zimbraMtaMyNetworks]){m.attrs[ZaServer.A_zimbraMtaMyNetworks]=AjxStringUtil.trim(m.attrs[ZaServer.A_zimbraMtaMyNetworks],true);
var l=m.attrs[ZaServer.A_zimbraMtaMyNetworks].split(/[\s,]+/);
var t=l.length;
var g=[];
var o=[];
var z;
var n;
for(var u=0;
u<t;
u++){if(l[u]!=null&&l[u].length>2){if(l[u].indexOf("!")==0){n=l[u].substr(1);
if(l[u].indexOf("/")>0){try{z=ZaIPUtil.isValidCIDR(n)
}catch(v){throw new AjxException(AjxMessageFormat.format(ZaMsg.ERROR_NOT_CIDR,[n]),AjxException.INVALID_PARAM,"ZaServerController.prototype.validateMyNetworks")
}o.push(z);
for(var s=(q-1);
s>=0;
s--){if(ZaIPUtil.isInSubNet(z,d[s])){throw new AjxException(AjxMessageFormat.format(ZaMsg.ERROR_LOCAL_ADDR_EXCLUDED,[d[s].src,l[u]]),AjxException.INVALID_PARAM,"ZaServerController.prototype.validateMyNetworks")
}}}else{try{var b=ZaIPUtil.isValidIP(n)
}catch(v){throw new AjxException(AjxMessageFormat.format(ZaMsg.ERROR_INVALID_EXCLUDE_ADDR,[n]),AjxException.INVALID_PARAM,"ZaServerController.prototype.validateMyNetworks")
}for(var s=(q-1);
s>=0;
s--){var r=1;
try{r=ZaIPUtil.compareIP(d[s],b)
}catch(v){}if(r===0){throw new AjxException(AjxMessageFormat.format(ZaMsg.ERROR_LOCAL_ADDR_EXCLUDED,[d[s].src,l[u]]),AjxException.INVALID_PARAM,"ZaServerController.prototype.validateMyNetworks")
}}}}else{n=l[u];
var s=0;
var f=false;
var p=false;
if(n.search("/")<0){p=true;
try{var b=ZaIPUtil.isValidIP(n)
}catch(v){throw new AjxException(AjxMessageFormat.format(ZaMsg.ERROR_INVALID_EXCLUDE_ADDR,[n]),AjxException.INVALID_PARAM,"ZaServerController.prototype.validateMyNetworks")
}}while(n.search("/")<0&&s<k.length){if(n===k[s].src){k.splice(s,1);
c--;
f=true;
break
}s++
}if(f==false&&p==false){try{z=ZaIPUtil.isValidCIDR(n)
}catch(v){throw new AjxException(AjxMessageFormat.format(ZaMsg.ERROR_NOT_CIDR,[n]),AjxException.INVALID_PARAM,"ZaServerController.prototype.validateMyNetworks")
}g.push(z);
for(var s=(c-1);
s>=0;
s--){try{if(ZaIPUtil.isInSubNet(z,k[s])){k.splice(s,1);
c--
}}catch(v){}}}}}else{throw new AjxException(AjxMessageFormat.format(ZaMsg.ERROR_NOT_CIDR,[l[u]]),AjxException.INVALID_PARAM,"ZaServerController.prototype.validateMyNetworks")
}}if(l.length<1){throw new AjxException(AjxMessageFormat.format(ZaMsg.ERROR_NO_VALID_SUBNETS,[m.attrs[ZaServer.A_zimbraMtaMyNetworks]]),AjxException.INVALID_PARAM,"ZaServerController.prototype.validateMyNetworks")
}}if(c>0){var w=[];
for(var e=0;
e<c;
e++){w.push(k[e].src)
}throw new AjxException(AjxMessageFormat.format(ZaMsg.ERROR_MISSING_LOCAL,w.join(",")),AjxException.INVALID_PARAM,"ZaServerController.prototype.validateMyNetworks")
}this.runValidationStack(y)
};
ZaXFormViewController.preSaveValidationMethods.ZaServerController.push(ZaServerController.prototype.validateMyNetworks);
ZaServerController.prototype.validateMTA=function(e){if(!ZaItem.hasWritePermission(ZaServer.A_zimbraSmtpHostname,this._currentObject)){this.runValidationStack(e);
return
}var d=this._view.getObject();
if((AjxUtil.isEmpty(d.attrs[ZaServer.A_zimbraSmtpHostname]))&&!AjxUtil.isEmpty(this._currentObject.attrs[ZaServer.A_zimbraSmtpHostname])){if(ZaApp.getInstance().dialogs.confirmMessageDialog){ZaApp.getInstance().dialogs.confirmMessageDialog.popdown()
}ZaApp.getInstance().dialogs.confirmMessageDialog=new ZaMsgDialog(this._view.shell,null,[DwtDialog.YES_BUTTON,DwtDialog.CANCEL_BUTTON],null,ZaId.CTR_PREFIX+ZaId.VIEW_STATUS+"_confirmMessage");
ZaApp.getInstance().dialogs.confirmMessageDialog.setMessage(AjxMessageFormat.format(ZaMsg.WARNING_RESETING_SMTP_HOST,[d._defaultValues.attrs[ZaServer.A_zimbraSmtpHostname].join(", "),d._defaultValues.attrs[ZaServer.A_zimbraSmtpHostname].join(", ")]),DwtMessageDialog.WARNING_STYLE);
var b;
var c=ZaServerController.prototype.runValidationStack;
if(!e||!e.func){b=null
}else{b=e
}ZaApp.getInstance().dialogs.confirmMessageDialog.registerCallback(DwtDialog.YES_BUTTON,c,this,b);
ZaApp.getInstance().dialogs.confirmMessageDialog.popup()
}else{this.runValidationStack(e);
return
}};
ZaXFormViewController.preSaveValidationMethods.ZaServerController.push(ZaServerController.prototype.validateMTA);
ZaServerController.prototype.validateVolumeChanges=function(e){if(!ZaItem.hasRight(ZaServer.MANAGE_VOLUME_RIGHT,this._currentObject)){this.runValidationStack(e);
return
}var d=this._view.getObject();
if(d[ZaServer.A_RemovedVolumes]&&d[ZaServer.A_RemovedVolumes].length>0){if(ZaApp.getInstance().dialogs.confirmMessageDialog){ZaApp.getInstance().dialogs.confirmMessageDialog.popdown()
}ZaApp.getInstance().dialogs.confirmMessageDialog=new ZaMsgDialog(this._view.shell,null,[DwtDialog.YES_BUTTON,DwtDialog.NO_BUTTON],null,ZaId.CTR_PREFIX+ZaId.VIEW_STATUS+"_confirmMessage");
ZaApp.getInstance().dialogs.confirmMessageDialog.setMessage(ZaMsg.Q_DELETE_VOLUMES,DwtMessageDialog.WARNING_STYLE);
var b;
var c=ZaServerController.prototype.runValidationStack;
if(!e||!e.func){b=null
}else{b=e
}ZaApp.getInstance().dialogs.confirmMessageDialog.registerCallback(DwtDialog.YES_BUTTON,c,this,b);
ZaApp.getInstance().dialogs.confirmMessageDialog.popup()
}else{this.runValidationStack(e);
return
}};
ZaXFormViewController.preSaveValidationMethods.ZaServerController.push(ZaServerController.prototype.validateVolumeChanges);
ZaServerController.changeProxyPorts=function(){if(ZaApp.getInstance().dialogs.confirmMessageDialog){var b=ZaApp.getInstance().dialogs.confirmMessageDialog.getObject();
if(b){if(b.selectedChoice==0){this._view.getObject().attrs[b.fieldRef]=b.defVal
}else{if(b.selectedChoice==2){this._view.getObject().attrs[ZaServer.A_zimbraMailProxyServiceEnabled]=false
}}}}ZaServerController.prototype.runValidationStack.call(this)
};
ZaServerController.prototype.validateImapBindPort=function(c){if(!ZaItem.hasWritePermission(ZaServer.A_zimbraImapBindPort,this._currentObject)){this.runValidationStack(c);
return
}var b=this._view.getObject();
var d={selectedChoice:0,choice1Label:"",choice2Label:"",choice3Label:"",warningMsg:"",fieldRef:""};
if((b.attrs[ZaServer.A_zimbraMailProxyServiceEnabled]!=this._currentObject.attrs[ZaServer.A_zimbraMailProxyServiceEnabled]&&b.attrs[ZaServer.A_zimbraMailProxyServiceEnabled]==true)){if((b.attrs[ZaServer.A_zimbraImapBindPort]!=ZaServer.DEFAULT_IMAP_PORT_ZCS&&(b.attrs[ZaServer.A_zimbraImapBindPort]!=null))||(b.attrs[ZaServer.A_zimbraImapBindPort]==null&&(b._defaultValues.attrs[ZaServer.A_zimbraImapBindPort]!=ZaServer.DEFAULT_IMAP_PORT_ZCS))){d.warningMsg=AjxMessageFormat.format(ZaMsg.Server_WrongPortWarning,[ZaMsg.IMAP_Port,b.attrs[ZaServer.A_zimbraImapBindPort]]);
d.choice1Label=AjxMessageFormat.format(ZaMsg.Server_WrongPortWarning_OP1,[ZaMsg.IMAP_Port,ZaServer.DEFAULT_IMAP_PORT_ZCS]);
d.choice2Label=AjxMessageFormat.format(ZaMsg.Server_WrongPortWarning_OP2,[ZaMsg.IMAP_Port,b.attrs[ZaServer.A_zimbraImapBindPort]]);
d.choice3Label=ZaMsg.Server_WrongPortWarning_OP3;
d.fieldRef=ZaServer.A_zimbraImapBindPort;
d.defVal=ZaServer.DEFAULT_IMAP_PORT_ZCS;
ZaServerController.showPortWarning.call(this,c,d)
}else{this.runValidationStack(c);
return
}}else{this.runValidationStack(c);
return
}};
ZaXFormViewController.preSaveValidationMethods.ZaServerController.push(ZaServerController.prototype.validateImapBindPort);
ZaServerController.prototype.validateImapSSLBindPort=function(c){var b=this._view.getObject();
var d={selectedChoice:0,choice1Label:"",choice2Label:"",choice3Label:"",warningMsg:"",fieldRef:""};
if((b.attrs[ZaServer.A_zimbraMailProxyServiceEnabled]!=this._currentObject.attrs[ZaServer.A_zimbraMailProxyServiceEnabled]&&b.attrs[ZaServer.A_zimbraMailProxyServiceEnabled]==true)){if((b.attrs[ZaServer.A_ImapSSLBindPort]!=ZaServer.DEFAULT_IMAP_SSL_PORT_ZCS&&(b.attrs[ZaServer.A_ImapSSLBindPort]!=null))||(b.attrs[ZaServer.A_ImapSSLBindPort]==null&&(b._defaultValues.attrs[ZaServer.A_ImapSSLBindPort]!=ZaServer.DEFAULT_IMAP_SSL_PORT_ZCS))){d.defVal=ZaServer.DEFAULT_IMAP_SSL_PORT_ZCS;
d.warningMsg=AjxMessageFormat.format(ZaMsg.Server_WrongPortWarning,[ZaMsg.IMAP_Port,b.attrs[ZaServer.A_ImapSSLBindPort]]);
d.choice1Label=AjxMessageFormat.format(ZaMsg.Server_WrongPortWarning_OP1,[ZaMsg.IMAP_SSLPort,ZaServer.DEFAULT_IMAP_SSL_PORT_ZCS]);
d.choice2Label=AjxMessageFormat.format(ZaMsg.Server_WrongPortWarning_OP2,[ZaMsg.IMAP_SSLPort,b.attrs[ZaServer.A_ImapSSLBindPort]]);
d.choice3Label=ZaMsg.Server_WrongPortWarning_OP3;
d.fieldRef=ZaServer.A_ImapSSLBindPort;
ZaServerController.showPortWarning.call(this,c,d)
}else{this.runValidationStack(c);
return
}}else{this.runValidationStack(c);
return
}};
ZaXFormViewController.preSaveValidationMethods.ZaServerController.push(ZaServerController.prototype.validateImapSSLBindPort);
ZaServerController.prototype.validatePop3BindPort=function(c){if(!ZaItem.hasWritePermission(ZaServer.A_zimbraPop3BindPort,this._currentObject)){this.runValidationStack(c);
return
}var b=this._view.getObject();
var d={selectedChoice:0,choice1Label:"",choice2Label:"",choice3Label:"",warningMsg:"",fieldRef:""};
if((b.attrs[ZaServer.A_zimbraMailProxyServiceEnabled]!=this._currentObject.attrs[ZaServer.A_zimbraMailProxyServiceEnabled]&&b.attrs[ZaServer.A_zimbraMailProxyServiceEnabled]==true)){if((b.attrs[ZaServer.A_zimbraPop3BindPort]!=ZaServer.DEFAULT_POP3_PORT_ZCS&&(b.attrs[ZaServer.A_zimbraPop3BindPort]!=null))||(b.attrs[ZaServer.A_zimbraPop3BindPort]==null&&(b._defaultValues.attrs[ZaServer.A_zimbraPop3BindPort]!=ZaServer.DEFAULT_POP3_PORT_ZCS))){d.defVal=ZaServer.DEFAULT_POP3_PORT_ZCS;
d.warningMsg=AjxMessageFormat.format(ZaMsg.Server_WrongPortWarning,[ZaMsg.NAD_POP_Port,b.attrs[ZaServer.A_zimbraPop3BindPort]]);
d.choice1Label=AjxMessageFormat.format(ZaMsg.Server_WrongPortWarning_OP1,[ZaMsg.NAD_POP_Port,ZaServer.DEFAULT_POP3_PORT_ZCS]);
d.choice2Label=AjxMessageFormat.format(ZaMsg.Server_WrongPortWarning_OP2,[ZaMsg.NAD_POP_Port,b.attrs[ZaServer.A_zimbraPop3BindPort]]);
d.choice3Label=ZaMsg.Server_WrongPortWarning_OP3;
d.fieldRef=ZaServer.A_zimbraPop3BindPort;
ZaServerController.showPortWarning.call(this,c,d)
}else{this.runValidationStack(c);
return
}}else{this.runValidationStack(c);
return
}};
ZaXFormViewController.preSaveValidationMethods.ZaServerController.push(ZaServerController.prototype.validatePop3BindPort);
ZaServerController.prototype.validatePop3BindAddress=function(d){if(!ZaItem.hasWritePermission(ZaServer.A_Pop3BindAddress,this._currentObject)){this.runValidationStack(d);
return
}var c=this._view.getObject();
if(c.attrs[ZaServer.A_Pop3BindAddress]!=this._currentObject.attrs[ZaServer.A_Pop3BindAddress]){if(!ZaApp.getInstance().dialogs.confirmSaveDialog){var b=new ZaMsgDialog(ZaApp.getInstance().getAppCtxt().getShell(),null,[DwtDialog.YES_BUTTON,DwtDialog.NO_BUTTON],null,ZaId.VIEW_STATUS+"_confirmSavePopAddr");
b.setMessage(ZaMsg.NAD_POP_Address_Warning,DwtMessageDialog.WARNING_STYLE);
b.registerCallback(DwtDialog.YES_BUTTON,ZaServerController._confirmSavePop3BindAddress,this,null);
ZaApp.getInstance().dialogs.confirmSaveDialog=b
}ZaApp.getInstance().dialogs.confirmSaveDialog.popup()
}else{this.runValidationStack(d);
return
}};
ZaXFormViewController.preSaveValidationMethods.ZaServerController.push(ZaServerController.prototype.validatePop3BindAddress);
ZaServerController._confirmSavePop3BindAddress=function(){if(ZaApp.getInstance().dialogs.confirmSaveDialog){ZaApp.getInstance().dialogs.confirmSaveDialog.popdown()
}ZaServerController.prototype.runValidationStack.call(this)
};
ZaServerController.prototype.validatePop3SSLBindPort=function(c){if(!ZaItem.hasWritePermission(ZaServer.A_zimbraPop3SSLBindPort,this._currentObject)){this.runValidationStack(c);
return
}var b=this._view.getObject();
var d={selectedChoice:0,choice1Label:"",choice2Label:"",choice3Label:"",warningMsg:"",fieldRef:""};
if((b.attrs[ZaServer.A_zimbraMailProxyServiceEnabled]!=this._currentObject.attrs[ZaServer.A_zimbraMailProxyServiceEnabled]&&b.attrs[ZaServer.A_zimbraMailProxyServiceEnabled]==true)){if((b.attrs[ZaServer.A_zimbraPop3SSLBindPort]!=ZaServer.DEFAULT_POP3_SSL_PORT_ZCS&&(b.attrs[ZaServer.A_zimbraPop3SSLBindPort]!=null))||(b.attrs[ZaServer.A_zimbraPop3SSLBindPort]==null&&(b._defaultValues.attrs[ZaServer.A_zimbraPop3SSLBindPort]!=ZaServer.DEFAULT_POP3_SSL_PORT_ZCS))){d.defVal=ZaServer.DEFAULT_POP3_SSL_PORT_ZCS;
d.warningMsg=AjxMessageFormat.format(ZaMsg.Server_WrongPortWarning,[ZaMsg.NAD_POP_SSL_Port,b.attrs[ZaServer.A_zimbraPop3SSLBindPort]]);
d.choice1Label=AjxMessageFormat.format(ZaMsg.Server_WrongPortWarning_OP1,[ZaMsg.NAD_POP_SSL_Port,ZaServer.DEFAULT_POP3_SSL_PORT_ZCS]);
d.choice2Label=AjxMessageFormat.format(ZaMsg.Server_WrongPortWarning_OP2,[ZaMsg.NAD_POP_SSL_Port,b.attrs[ZaServer.A_zimbraPop3SSLBindPort]]);
d.choice3Label=ZaMsg.Server_WrongPortWarning_OP3;
d.fieldRef=ZaServer.A_zimbraPop3SSLBindPort;
ZaServerController.showPortWarning.call(this,c,d)
}else{this.runValidationStack(c);
return
}}else{this.runValidationStack(c);
return
}};
ZaXFormViewController.preSaveValidationMethods.ZaServerController.push(ZaServerController.prototype.validatePop3SSLBindPort);
ZaServerController.prototype.validateImapProxyBindPort=function(c){if(!ZaItem.hasWritePermission(ZaServer.A_zimbraImapProxyBindPort,this._currentObject)){this.runValidationStack(c);
return
}var b=this._view.getObject();
var d={selectedChoice:0,choice1Label:"",choice2Label:"",choice3Label:"",warningMsg:"",fieldRef:""};
if((b.attrs[ZaServer.A_zimbraMailProxyServiceEnabled]!=this._currentObject.attrs[ZaServer.A_zimbraMailProxyServiceEnabled]&&b.attrs[ZaServer.A_zimbraMailProxyServiceEnabled]==true)){if((b.attrs[ZaServer.A_zimbraImapProxyBindPort]!=ZaServer.DEFAULT_IMAP_PORT&&(b.attrs[ZaServer.A_zimbraImapProxyBindPort]!=null))||(b.attrs[ZaServer.A_zimbraImapProxyBindPort]==null&&(b._defaultValues.attrs[ZaServer.A_zimbraImapProxyBindPort]!=ZaServer.DEFAULT_IMAP_PORT))){d.defVal=ZaServer.DEFAULT_IMAP_PORT;
d.warningMsg=AjxMessageFormat.format(ZaMsg.Server_WrongPortWarning,[ZaMsg.IMAP_Proxy_Port,b.attrs[ZaServer.A_zimbraImapProxyBindPort]]);
d.choice1Label=AjxMessageFormat.format(ZaMsg.Server_WrongPortWarning_OP1,[ZaMsg.IMAP_Proxy_Port,ZaServer.DEFAULT_IMAP_PORT]);
d.choice2Label=AjxMessageFormat.format(ZaMsg.Server_WrongPortWarning_OP2,[ZaMsg.IMAP_Proxy_Port,b.attrs[ZaServer.A_zimbraImapProxyBindPort]]);
d.choice3Label=ZaMsg.Server_WrongPortWarning_OP3;
d.fieldRef=ZaServer.A_zimbraImapProxyBindPort;
ZaServerController.showPortWarning.call(this,c,d)
}else{this.runValidationStack(c);
return
}}else{this.runValidationStack(c);
return
}};
ZaXFormViewController.preSaveValidationMethods.ZaServerController.push(ZaServerController.prototype.validateImapProxyBindPort);
ZaServerController.prototype.validateImapSSLProxyBindPort=function(c){if(!ZaItem.hasWritePermission(ZaServer.A_zimbraImapSSLProxyBindPort,this._currentObject)){this.runValidationStack(c);
return
}var b=this._view.getObject();
var d={selectedChoice:0,choice1Label:"",choice2Label:"",choice3Label:"",warningMsg:"",fieldRef:""};
if((b.attrs[ZaServer.A_zimbraMailProxyServiceEnabled]!=this._currentObject.attrs[ZaServer.A_zimbraMailProxyServiceEnabled]&&b.attrs[ZaServer.A_zimbraMailProxyServiceEnabled]==true)){if((b.attrs[ZaServer.A_zimbraImapSSLProxyBindPort]!=ZaServer.DEFAULT_IMAP_SSL_PORT&&(b.attrs[ZaServer.A_zimbraImapSSLProxyBindPort]!=null))||(b.attrs[ZaServer.A_zimbraImapSSLProxyBindPort]==null&&(b._defaultValues.attrs[ZaServer.A_zimbraImapSSLProxyBindPort]!=ZaServer.DEFAULT_IMAP_SSL_PORT))){d.defVal=ZaServer.DEFAULT_IMAP_SSL_PORT;
d.warningMsg=AjxMessageFormat.format(ZaMsg.Server_WrongPortWarning,[ZaMsg.IMAP_SSL_Proxy_Port,b.attrs[ZaServer.A_zimbraImapSSLProxyBindPort]]);
d.choice1Label=AjxMessageFormat.format(ZaMsg.Server_WrongPortWarning_OP1,[ZaMsg.IMAP_SSL_Proxy_Port,ZaServer.DEFAULT_IMAP_SSL_PORT]);
d.choice2Label=AjxMessageFormat.format(ZaMsg.Server_WrongPortWarning_OP2,[ZaMsg.IMAP_SSL_Proxy_Port,b.attrs[ZaServer.A_zimbraImapSSLProxyBindPort]]);
d.choice3Label=ZaMsg.Server_WrongPortWarning_OP3;
d.fieldRef=ZaServer.A_zimbraImapSSLProxyBindPort;
ZaServerController.showPortWarning.call(this,c,d)
}else{this.runValidationStack(c);
return
}}else{this.runValidationStack(c);
return
}};
ZaXFormViewController.preSaveValidationMethods.ZaServerController.push(ZaServerController.prototype.validateImapSSLProxyBindPort);
ZaServerController.prototype.validatePop3ProxyBindPort=function(c){if(!ZaItem.hasWritePermission(ZaServer.A_zimbraPop3ProxyBindPort,this._currentObject)){this.runValidationStack(c);
return
}var b=this._view.getObject();
var d={selectedChoice:0,choice1Label:"",choice2Label:"",choice3Label:"",warningMsg:"",fieldRef:""};
if((b.attrs[ZaServer.A_zimbraMailProxyServiceEnabled]!=this._currentObject.attrs[ZaServer.A_zimbraMailProxyServiceEnabled]&&b.attrs[ZaServer.A_zimbraMailProxyServiceEnabled]==true)){if((b.attrs[ZaServer.A_zimbraPop3ProxyBindPort]!=ZaServer.DEFAULT_POP3_PORT&&(b.attrs[ZaServer.A_zimbraPop3ProxyBindPort]!=null))||(b.attrs[ZaServer.A_zimbraPop3ProxyBindPort]==null&&(b._defaultValues.attrs[ZaServer.A_zimbraPop3ProxyBindPort]!=ZaServer.DEFAULT_POP3_PORT))){d.defVal=ZaServer.DEFAULT_POP3_PORT;
d.warningMsg=AjxMessageFormat.format(ZaMsg.Server_WrongPortWarning,[ZaMsg.NAD_POP_proxy_Port,b.attrs[ZaServer.A_zimbraPop3ProxyBindPort]]);
d.choice1Label=AjxMessageFormat.format(ZaMsg.Server_WrongPortWarning_OP1,[ZaMsg.NAD_POP_proxy_Port,ZaServer.DEFAULT_POP3_PORT]);
d.choice2Label=AjxMessageFormat.format(ZaMsg.Server_WrongPortWarning_OP2,[ZaMsg.NAD_POP_proxy_Port,b.attrs[ZaServer.A_zimbraPop3ProxyBindPort]]);
d.choice3Label=ZaMsg.Server_WrongPortWarning_OP3;
d.fieldRef=ZaServer.A_zimbraPop3ProxyBindPort;
ZaServerController.showPortWarning.call(this,c,d)
}else{this.runValidationStack(c);
return
}}else{this.runValidationStack(c);
return
}};
ZaXFormViewController.preSaveValidationMethods.ZaServerController.push(ZaServerController.prototype.validatePop3ProxyBindPort);
ZaServerController.prototype.validatePop3SSLProxyBindPort=function(c){if(!ZaItem.hasWritePermission(ZaServer.A_zimbraPop3SSLProxyBindPort,this._currentObject)){this.runValidationStack(c);
return
}var b=this._view.getObject();
var d={selectedChoice:0,choice1Label:"",choice2Label:"",choice3Label:"",warningMsg:"",fieldRef:""};
if((b.attrs[ZaServer.A_zimbraMailProxyServiceEnabled]!=this._currentObject.attrs[ZaServer.A_zimbraMailProxyServiceEnabled]&&b.attrs[ZaServer.A_zimbraMailProxyServiceEnabled]==true)){if((b.attrs[ZaServer.A_zimbraPop3SSLProxyBindPort]!=ZaServer.DEFAULT_POP3_SSL_PORT&&(b.attrs[ZaServer.A_zimbraPop3SSLProxyBindPort]!=null))||(b.attrs[ZaServer.A_zimbraPop3SSLProxyBindPort]==null&&(b._defaultValues.attrs[ZaServer.A_zimbraPop3SSLProxyBindPort]!=ZaServer.DEFAULT_POP3_SSL_PORT))){d.defVal=ZaServer.DEFAULT_POP3_SSL_PORT;
d.warningMsg=AjxMessageFormat.format(ZaMsg.Server_WrongPortWarning,[ZaMsg.NAD_POP_SSL_proxy_Port,b.attrs[ZaServer.A_zimbraPop3SSLProxyBindPort]]);
d.choice1Label=AjxMessageFormat.format(ZaMsg.Server_WrongPortWarning_OP1,[ZaMsg.NAD_POP_SSL_proxy_Port,ZaServer.DEFAULT_POP3_SSL_PORT]);
d.choice2Label=AjxMessageFormat.format(ZaMsg.Server_WrongPortWarning_OP2,[ZaMsg.NAD_POP_SSL_proxy_Port,b.attrs[ZaServer.A_zimbraPop3SSLProxyBindPort]]);
d.choice3Label=ZaMsg.Server_WrongPortWarning_OP3;
d.fieldRef=ZaServer.A_zimbraPop3SSLProxyBindPort;
ZaServerController.showPortWarning.call(this,c,d)
}else{this.runValidationStack(c);
return
}}else{this.runValidationStack(c);
return
}};
ZaXFormViewController.preSaveValidationMethods.ZaServerController.push(ZaServerController.prototype.validatePop3SSLProxyBindPort);
ZaServerController.showPortWarning=function(d,c){if(ZaApp.getInstance().dialogs.confirmMessageDialog){ZaApp.getInstance().dialogs.confirmMessageDialog.popdown()
}ZaApp.getInstance().dialogs.confirmMessageDialog=new ZaProxyPortWarningXDialog(ZaApp.getInstance().getAppCtxt().getShell(),"550px","150px",ZaMsg.Server_WrongPortWarningTitle);
ZaApp.getInstance().dialogs.confirmMessageDialog.setObject(c);
ZaApp.getInstance().dialogs.confirmMessageDialog.registerCallback(DwtDialog.OK_BUTTON,ZaServerController.changeProxyPorts,this,null);
var b;
if(!d||!d.func){b=null
}else{b=d
}ZaApp.getInstance().dialogs.confirmMessageDialog.popup()
};
ZaServerController.prototype.saveButtonListener=function(c){try{this.validateChanges()
}catch(b){this._handleException(b,"ZaServerController.prototype.saveButtonListener",null,false)
}};
ZaServerController.prototype.downloadConfigButtonListener=function(b){window.open(["/service/collectconfig/?host=",this._currentObject.attrs[ZaServer.A_ServiceHostname]].join(""))
};
ZaServerController.prototype.flushCacheButtonListener=function(d){try{srvList=[];
srvList._version=1;
var b=this._currentObject;
b.status=0;
srvList.push(b);
obj={statusMessage:null,flushZimlet:true,flushSkin:true,flushLocale:true,serverList:srvList,status:0,_uuid:b.id,name:b.name};
ZaApp.getInstance().dialogs.flushCacheDialog=new ZaFlushCacheXDialog(this._container,b);
ZaApp.getInstance().dialogs.flushCacheDialog.setObject(obj);
ZaApp.getInstance().dialogs.flushCacheDialog.popup()
}catch(c){this._handleException(c,"ZaServerController.prototype.flushCacheButtonListener",null,false)
}return
}
}if(AjxPackage.define("zimbraAdmin.adminext.controller.ZaAdminExtListController")){ZaAdminExtListController=function(c,b){ZaListViewController.call(this,c,b,"ZaAdminExtListController");
this._popupOperations=new Array();
this.objType=ZaEvent.S_ZIMLET;
this._helpURL=location.pathname+ZaUtil.HELP_URL+"admin_console_misc/enhancing_the_zimbra_admin_console_user_interface.htm?locid="+AjxEnv.DEFAULT_LOCALE;
this._helpButtonText=ZaMsg.helpAdminExtensions
};
ZaAdminExtListController.prototype=new ZaListViewController();
ZaAdminExtListController.prototype.constructor=ZaAdminExtListController;
ZaController.initPopupMenuMethods.ZaAdminExtListController=new Array();
ZaController.changeActionsStateMethods.ZaAdminExtListController=new Array();
ZaAdminExtListController.prototype.show=function(c,b){if(!this._UICreated){this._createUI()
}if(c!=null&&c instanceof ZaItemList){this._list=c
}else{this._list=ZaZimlet.getAll(ZaZimlet.EXCLUDE_MAIL,new AjxCallback(this,this.show));
return
}this._contentView.set(this._list.getVector());
ZaApp.getInstance().pushView(this.getContentViewId());
this._removeList=new Array();
this.changeActionsState()
};
ZaAdminExtListController.initPopupMenuMethod=function(){this._popupOperations[ZaOperation.DEPLOY_ZIMLET]=new ZaOperation(ZaOperation.DEPLOY_ZIMLET,ZaMsg.TBB_DeployNew,ZaMsg.TBB_DeployNew_tt,"Deploy","Deploy",new AjxListener(this,this.deployZimletListener));
this._popupOperations[ZaOperation.DELETE]=new ZaOperation(ZaOperation.DELETE,ZaMsg.TBB_Undeploy,ZaMsg.DTBB_Undeploy_tt,"Undeploy","Undeploy",new AjxListener(this,this._undeployButtonListener));
this._popupOrder.push(ZaOperation.DEPLOY_ZIMLET);
this._popupOrder.push(ZaOperation.DELETE)
};
ZaController.initPopupMenuMethods.ZaAdminExtListController.push(ZaAdminExtListController.initPopupMenuMethod);
ZaAdminExtListController.prototype.deployZimletListener=function(d){try{this._deployZimletWizard=new ZaZimletDeployXWizard(this._container);
var b=new ZaZimlet();
this._deployZimletWizard.setObject(b);
this._deployZimletWizard.popup()
}catch(c){this._handleException(c,"ZaAdminExtListController.prototype.deployZimletListener",null,false)
}return
};
ZaAdminExtListController.prototype._createUI=function(){try{var c=new Object();
this._contentView=new ZaAdminExtListView(this._container);
this._initPopupMenu();
this._actionMenu=new ZaPopupMenu(this._contentView,"ActionMenu",null,this._popupOperations,ZaId.VIEW_AELIST,ZaId.MENU_POP);
c[ZaAppViewMgr.C_APP_CONTENT]=this._contentView;
ZaApp.getInstance().getAppViewMgr().createView(this.getContentViewId(),c);
this._contentView.addSelectionListener(new AjxListener(this,this._listSelectionListener));
this._contentView.addActionListener(new AjxListener(this,this._listActionListener));
this._removeConfirmMessageDialog=new ZaMsgDialog(ZaApp.getInstance().getAppCtxt().getShell(),null,[DwtDialog.YES_BUTTON,DwtDialog.NO_BUTTON],null,ZaId.CTR_PREFIX+ZaId.VIEW_AELIST+"_removeConfirm");
this._UICreated=true;
ZaApp.getInstance()._controllers[this.getContentViewId()]=this
}catch(b){this._handleException(b,"ZaAdminExtListController.prototype._createUI",null,false);
return
}};
ZaAdminExtListController.prototype.set=function(b){this.show(b)
};
ZaAdminExtListController.prototype._listSelectionListener=function(c){if(c.detail==DwtListView.ITEM_DBL_CLICKED){if(c.item){this._selectedItem=c.item;
ZaApp.getInstance().getZimletController().show(c.item);
var b=ZaTree.getPathByArray([ZaMsg.OVP_home,ZaMsg.OVP_configure,ZaMsg.OVP_adminZimlets]);
ZaZimbraAdmin.getInstance().getOverviewPanelController().addObjectItem(b,c.item.name,null,false,false,c.item)
}}else{this.changeActionsState()
}};
ZaAdminExtListController.prototype._listActionListener=function(b){this.changeActionsState();
this._actionMenu.popup(0,b.docX,b.docY)
};
ZaAdminExtListController.prototype._editButtonListener=function(b){};
ZaAdminExtListController.prototype._undeployButtonListener=function(g){this._removeList=new Array();
if(this._contentView.getSelectionCount()>0){var f=this._contentView.getSelection();
var e=f.length;
for(var d=0;
d<e;
d++){if(f[d]){this._removeList.push(f[d])
}}}if(this._removeList.length){var c;
c=ZaMsg.Q_UNDEPLOY_ADMIN_EXTENSIONS;
c+="<br>";
for(var d in this._removeList){if(i>19){c+="<li>...</li>";
break
}c+="<li>";
if(this._removeList[d].name.length>50){var b=49;
var h=0;
while(b<this._removeList[d].name.length){c+=this._removeList[d].name.slice(h,b);
h=b+1;
if(h>=(this._removeList[d].name.length)){break
}b=(this._removeList[d].name.length<=(b+50))?this._removeList[d].name.length-1:(b+50);
c+="<br>"
}}else{c+=this._removeList[d].name
}c+="</li>";
i++
}c+="</ul>";
this._removeConfirmMessageDialog.setMessage(c,DwtMessageDialog.INFO_STYLE);
this._removeConfirmMessageDialog.registerCallback(DwtDialog.YES_BUTTON,ZaAdminExtListController.prototype._undeployZimletsCallback,this);
this._removeConfirmMessageDialog.registerCallback(DwtDialog.NO_BUTTON,ZaAdminExtListController.prototype._donotUndeployZimletsCallback,this);
this._removeConfirmMessageDialog.popup()
}};
ZaAdminExtListController.prototype._undeployZimletsCallback=function(){var d=new Array();
for(var c in this._removeList){if(this._removeList[c]){try{this._removeList[c].remove();
d.push(this._removeList[c])
}catch(b){this._removeConfirmMessageDialog.popdown();
this._handleException(b,"ZaAdminExtListController.prototype._undeployZimletsCallback",null,false);
return
}}this._list.remove(this._removeList[c])
}this.fireRemovalEvent(d);
this._removeConfirmMessageDialog.popdown();
this._contentView.setUI();
this.show()
};
ZaAdminExtListController.prototype._donotUndeployZimletsCallback=function(){this._removeList=new Array();
this._removeConfirmMessageDialog.popdown()
};
ZaAdminExtListController.changeActionsStateMethod=function(){var d=this._contentView.getSelectionCount();
if(d==1){var e=this._contentView.getSelection();
if(e[0].attrs[ZaZimlet.A_zimbraAdminExtDisableUIUndeploy]&&e[0].attrs[ZaZimlet.A_zimbraAdminExtDisableUIUndeploy]=="TRUE"){if(this._popupOperations[ZaOperation.DELETE]){this._popupOperations[ZaOperation.DELETE].enabled=false
}}}else{if(d>1){var e=this._contentView.getSelection();
var d=e.length;
var c=false;
for(var b=0;
b<d;
b++){if(!c){if(e[b].attrs[ZaZimlet.A_zimbraAdminExtDisableUIUndeploy]&&e[b].attrs[ZaZimlet.A_zimbraAdminExtDisableUIUndeploy]=="TRUE"){c=true
}}if(c){break
}}if(c){if(this._popupOperations[ZaOperation.DELETE]){this._popupOperations[ZaOperation.DELETE].enabled=false
}}}else{if(this._popupOperations[ZaOperation.EDIT]){this._popupOperations[ZaOperation.EDIT].enabled=false
}if(this._popupOperations[ZaOperation.DELETE]){this._popupOperations[ZaOperation.DELETE].enabled=false
}}}};
ZaController.changeActionsStateMethods.ZaAdminExtListController.push(ZaAdminExtListController.changeActionsStateMethod)
}if(AjxPackage.define("zimbraAdmin.zimlets.controller.ZaZimletListController")){ZaZimletListController=function(c,b){ZaListViewController.call(this,c,b,"ZaZimletListController");
this._toolbarOperations=new Array();
this._popupOperations=new Array();
this.objType=ZaEvent.S_ZIMLET;
this._helpURL=location.pathname+ZaUtil.HELP_URL+"zimlets/about_zimlets.htm?locid="+AjxEnv.DEFAULT_LOCALE;
this._helpButtonText=ZaMsg.helpManageZimlets
};
ZaZimletListController.prototype=new ZaListViewController();
ZaZimletListController.prototype.constructor=ZaZimletListController;
ZaController.initPopupMenuMethods.ZaZimletListController=new Array();
ZaController.changeActionsStateMethods.ZaZimletListController=new Array();
ZaZimletListController.prototype.show=function(c,b){if(!this._UICreated){this._createUI()
}if(c!=null&&c instanceof ZaItemList){this._list=c
}else{this._list=ZaZimlet.getAll(ZaZimlet.EXCLUDE_EXTENSIONS,new AjxCallback(this,this.show));
return
}this._contentView.set(this._list.getVector());
ZaApp.getInstance().pushView(this.getContentViewId());
this._removeList=new Array();
this.changeActionsState()
};
ZaZimletListController.initPopupMenuMethod=function(){this._popupOperations[ZaOperation.DEPLOY_ZIMLET]=new ZaOperation(ZaOperation.DEPLOY_ZIMLET,ZaMsg.TBB_DeployNew,ZaMsg.TBB_DeployNew_tt,"Deploy","Deploy",new AjxListener(this,this.deployZimletListener));
this._popupOperations[ZaOperation.DELETE]=new ZaOperation(ZaOperation.DELETE,ZaMsg.TBB_Undeploy,ZaMsg.DTBB_Undeploy_tt,"Undeploy","Undeploy",new AjxListener(this,this._undeployButtonListener));
this._popupOperations[ZaOperation.TOGGLE]=new ZaOperation(ZaOperation.TOGGLE,ZaMsg.TBB_Toggle,ZaMsg.TBB_Toggle_tt,"ToggleStatus","ToggleStatus",new AjxListener(this,this._toggleButtonListener));
this._popupOrder.push(ZaOperation.DEPLOY_ZIMLET);
this._popupOrder.push(ZaOperation.DELETE);
this._popupOrder.push(ZaOperation.TOGGLE)
};
ZaController.initPopupMenuMethods.ZaZimletListController.push(ZaZimletListController.initPopupMenuMethod);
ZaZimletListController.prototype._toggleButtonListener=function(f){try{var e=this._contentView.getSelection();
var d=e.length;
for(var c=0;
c<d;
c++){if(e[c]){e[c].enable(!e[c].isEnabled(),new AjxCallback(this,this.fireChangeEvent,e[c]))
}}}catch(b){this._handleException(b,"ZaZimletListController.prototype._toggleZimletListener",null,false)
}return
};
ZaZimletListController.prototype.deployZimletListener=function(d){try{this._deployZimletWizard=new ZaZimletDeployXWizard(this._container);
var b=new ZaZimlet();
this._deployZimletWizard.setObject(b);
this._deployZimletWizard.popup()
}catch(c){this._handleException(c,"ZaZimletListController.prototype.deployZimletListener",null,false)
}return
};
ZaZimletListController.prototype._createUI=function(){try{var c=new Object();
this._contentView=new ZaZimletListView(this._container);
this._initPopupMenu();
this._actionMenu=new ZaPopupMenu(this._contentView,"ActionMenu",null,this._popupOperations,ZaId.VIEW_ZIMLIST,ZaId.MENU_POP);
c[ZaAppViewMgr.C_APP_CONTENT]=this._contentView;
ZaApp.getInstance().getAppViewMgr().createView(this.getContentViewId(),c);
this._contentView.addSelectionListener(new AjxListener(this,this._listSelectionListener));
this._contentView.addActionListener(new AjxListener(this,this._listActionListener));
this._removeConfirmMessageDialog=new ZaMsgDialog(ZaApp.getInstance().getAppCtxt().getShell(),null,[DwtDialog.YES_BUTTON,DwtDialog.NO_BUTTON],null,ZaId.CTR_PREFIX+ZaId.VIEW_ZIMLIST+"_removeConfirm");
this._UICreated=true;
ZaApp.getInstance()._controllers[this.getContentViewId()]=this
}catch(b){this._handleException(b,"ZaZimletListController.prototype._createUI",null,false);
return
}};
ZaZimletListController.prototype.set=function(b){this.show(b)
};
ZaZimletListController.prototype._listSelectionListener=function(c){if(c.detail==DwtListView.ITEM_DBL_CLICKED){if(c.item){this._selectedItem=c.item;
ZaApp.getInstance().getZimletController().show(c.item);
var b=ZaTree.getPathByArray([ZaMsg.OVP_home,ZaMsg.OVP_configure,ZaMsg.OVP_zimlets]);
ZaZimbraAdmin.getInstance().getOverviewPanelController().addObjectItem(b,c.item.name,null,false,false,c.item)
}}else{this.changeActionsState()
}};
ZaZimletListController.prototype._listActionListener=function(b){this.changeActionsState();
this._actionMenu.popup(0,b.docX,b.docY)
};
ZaZimletListController.prototype._editButtonListener=function(b){};
ZaZimletListController.prototype._undeployButtonListener=function(g){this._removeList=new Array();
if(this._contentView.getSelectionCount()>0){var f=this._contentView.getSelection();
var e=f.length;
for(var d=0;
d<e;
d++){if(f[d]){this._removeList.push(f[d])
}}}if(this._removeList.length){var c;
c=ZaMsg.Q_UNDEPLOY_ZIMLETS;
c+="<br>";
for(var d in this._removeList){if(i>19){c+="<li>...</li>";
break
}c+="<li>";
if(this._removeList[d].name.length>50){var b=49;
var h=0;
while(b<this._removeList[d].name.length){c+=this._removeList[d].name.slice(h,b);
h=b+1;
if(h>=(this._removeList[d].name.length)){break
}b=(this._removeList[d].name.length<=(b+50))?this._removeList[d].name.length-1:(b+50);
c+="<br>"
}}else{c+=this._removeList[d].name
}c+="</li>";
i++
}c+="</ul>";
this._removeConfirmMessageDialog.setMessage(c,DwtMessageDialog.INFO_STYLE);
this._removeConfirmMessageDialog.registerCallback(DwtDialog.YES_BUTTON,ZaZimletListController.prototype._undeployZimletsCallback,this);
this._removeConfirmMessageDialog.registerCallback(DwtDialog.NO_BUTTON,ZaZimletListController.prototype._donotUndeployZimletsCallback,this);
this._removeConfirmMessageDialog.popup()
}};
ZaZimletListController.prototype._undeployZimletsCallback=function(){var d=new Array();
for(var c in this._removeList){if(this._removeList[c]){try{this._removeList[c].remove();
d.push(this._removeList[c])
}catch(b){this._removeConfirmMessageDialog.popdown();
this._handleException(b,"ZaZimletListController.prototype._undeployZimletsCallback",null,false);
return
}}this._list.remove(this._removeList[c])
}this.fireRemovalEvent(d);
this._removeConfirmMessageDialog.popdown();
this._contentView.setUI();
this.show()
};
ZaZimletListController.prototype._donotUndeployZimletsCallback=function(){this._removeList=new Array();
this._removeConfirmMessageDialog.popdown()
};
ZaZimletListController.changeActionsStateMethod=function(){var c=this._contentView.getSelectionCount();
var d=[];
var b=[];
if(c<1){if(this._popupOperations[ZaOperation.EDIT]){this._popupOperations[ZaOperation.EDIT].enabled=false
}if(this._popupOperations[ZaOperation.DELETE]){this._popupOperations[ZaOperation.DELETE].enabled=false
}if(this._popupOperations[ZaOperation.TOGGLE]){this._popupOperations[ZaOperation.TOGGLE].enabled=false
}}};
ZaController.changeActionsStateMethods.ZaZimletListController.push(ZaZimletListController.changeActionsStateMethod)
}if(AjxPackage.define("zimbraAdmin.zimlets.controller.ZaZimletViewController")){ZaZimletViewController=function(c,b){ZaXFormViewController.call(this,c,b,"ZaZimletViewController");
this._UICreated=false;
this.objType=ZaEvent.S_ZIMLET;
this._helpURL=ZaAccountViewController.helpURL;
this.deleteMsg=ZaMsg.Q_DELETE_ACCOUNT;
this.tabConstructor=ZaZimletXFormView
};
ZaZimletViewController.prototype=new ZaXFormViewController();
ZaZimletViewController.prototype.constructor=ZaZimletViewController;
ZaZimletViewController.helpURL=location.pathname+ZaUtil.HELP_URL+"managing_accounts/provisioning_accounts.htm?locid="+AjxEnv.DEFAULT_LOCALE;
ZaController.initToolbarMethods.ZaZimletViewController=new Array();
ZaController.setViewMethods.ZaZimletViewController=new Array();
ZaController.initPopupMenuMethods.ZaZimletViewController=new Array();
ZaZimletViewController.prototype.show=function(c,b){if(!this.selectExistingTabByItemId(c.id)){this._setView(c,true)
}};
ZaZimletViewController.setViewMethod=function(b){b.load("name",b.name);
if(!this._UICreated){this._createUI()
}ZaApp.getInstance().pushView(this.getContentViewId());
this._view.setDirty(false);
b[ZaModel.currentTab]="1";
this._view.setObject(b);
this._currentObject=b
};
ZaController.setViewMethods.ZaZimletViewController.push(ZaZimletViewController.setViewMethod);
ZaZimletViewController.prototype._createUI=function(){this._contentView=this._view=new this.tabConstructor(this._container);
this._initPopupMenu();
var b=new Object();
b[ZaAppViewMgr.C_APP_CONTENT]=this._view;
ZaApp.getInstance().getAppViewMgr().createView(this.getContentViewId(),b);
this._UICreated=true;
ZaApp.getInstance()._controllers[this.getContentViewId()]=this
};
ZaZimletViewController.prototype.getAppBarAction=function(){if(AjxUtil.isEmpty(this._appbarOperation)){this._appbarOperation[ZaOperation.HELP]=new ZaOperation(ZaOperation.HELP,ZaMsg.TBB_Help,ZaMsg.TBB_Help_tt,"Help","Help",new AjxListener(this,this._helpButtonListener));
this._appbarOperation[ZaOperation.CLOSE]=new ZaOperation(ZaOperation.CLOSE,ZaMsg.TBB_Close,ZaMsg.ALTBB_Close_tt,"","",new AjxListener(this,this.closeButtonListener))
}return this._appbarOperation
};
ZaZimletViewController.prototype.getAppBarOrder=function(){if(AjxUtil.isEmpty(this._appbarOrder)){this._appbarOrder.push(ZaOperation.HELP);
this._appbarOrder.push(ZaOperation.CLOSE)
}return this._appbarOrder
};
ZaZimletViewController.initPopupMenuMethod=function(){this._popupOperations[ZaOperation.CLOSE]=new ZaOperation(ZaOperation.CLOSE,ZaMsg.TBB_Close,ZaMsg.DTBB_Close_tt,"Close","CloseDis",new AjxListener(this,this.closeButtonListener));
this._popupOrder.push(ZaOperation.CLOSE)
};
ZaController.initPopupMenuMethods.ZaZimletViewController.push(ZaZimletViewController.initPopupMenuMethod)
}if(AjxPackage.define("zimbraAdmin.domains.controller.ZaDomainController")){ZaDomainController=function(c,b){ZaXFormViewController.call(this,c,b,"ZaDomainController");
this._UICreated=false;
this._helpURL=location.pathname+ZaUtil.HELP_URL+"managing_domains/managing_domains.htm?locid="+AjxEnv.DEFAULT_LOCALE;
this._helpButtonText=ZaMsg.helpEditDomains;
this._toolbarOperations=new Array();
this.deleteMsg=ZaMsg.Q_DELETE_DOMAIN;
this.objType=ZaEvent.S_DOMAIN;
this.tabConstructor=ZaDomainXFormView
};
ZaDomainController.prototype=new ZaXFormViewController();
ZaDomainController.prototype.constructor=ZaDomainController;
ZaController.changeActionsStateMethods.ZaDomainController=new Array();
ZaController.initToolbarMethods.ZaDomainController=new Array();
ZaController.initPopupMenuMethods.ZaDomainController=new Array();
ZaController.setViewMethods.ZaDomainController=new Array();
ZaController.saveChangeCheckMethods.ZaDomainController=new Array();
ZaController.postChangeMethods.ZaDomainController=new Array();
ZaDomainController.prototype.show=function(b){if(!this.selectExistingTabByItemId(b.id)){this._setView(b,true)
}};
ZaDomainController.changeActionsStateMethod=function(){var b=(this._view&&this._view.isDirty());
if(this._popupOperations[ZaOperation.SAVE]){this._popupOperations[ZaOperation.SAVE].enabled=b
}};
ZaController.changeActionsStateMethods.ZaDomainController.push(ZaDomainController.changeActionsStateMethod);
ZaDomainController.initPopupMenuMethod=function(){this._popupOperations[ZaOperation.SAVE]=new ZaOperation(ZaOperation.SAVE,ZaMsg.TBB_Save,ZaMsg.DTBB_Save_tt,"Save","SaveDis",new AjxListener(this,this.saveButtonListener));
if(ZaZimbraAdmin.canCreateDomain()){this._popupOperations[ZaOperation.NEW]=new ZaOperation(ZaOperation.NEW,ZaMsg.TBB_New,ZaMsg.DTBB_New_tt,"Domain","DomainDis",new AjxListener(this,this._newButtonListener))
}this._popupOperations[ZaOperation.VIEW_DOMAIN_ACCOUNTS]=new ZaOperation(ZaOperation.VIEW_DOMAIN_ACCOUNTS,ZaMsg.Domain_view_accounts,ZaMsg.Domain_view_accounts_tt,"Search","SearchDis",new AjxListener(this,this.viewAccountsButtonListener));
if(ZaDomain.canConfigureGal(this._currentObject)){this._popupOperations[ZaOperation.GAL_WIZARD]=new ZaOperation(ZaOperation.GAL_WIZARD,ZaMsg.DTBB_GAlConfigWiz,ZaMsg.DTBB_GAlConfigWiz_tt,"GALWizard","GALWizardDis",new AjxListener(this,ZaDomainController.prototype._galWizButtonListener))
}if(ZaDomain.canConfigureAuth(this._currentObject)){this._popupOperations[ZaOperation.AUTH_WIZARD]=new ZaOperation(ZaOperation.AUTH_WIZARD,ZaMsg.DTBB_AuthConfigWiz,ZaMsg.DTBB_AuthConfigWiz_tt,"AuthWizard","AuthWizardDis",new AjxListener(this,ZaDomainController.prototype._authWizButtonListener))
}if(ZaItem.hasRight(ZaDomain.RIGHT_CHECK_MX_RECORD,this._currentObject)){this._popupOperations[ZaOperation.CHECK_MX_RECORD]=new ZaOperation(ZaOperation.CHECK_MX_RECORD,ZaMsg.DTBB_CheckMX,ZaMsg.DTBB_CheckMX_tt,"ReindexMailboxes","ReindexMailboxes",new AjxListener(this,ZaDomainController.prototype._checkMXButtonListener))
}};
ZaController.initPopupMenuMethods.ZaDomainController.push(ZaDomainController.initPopupMenuMethod);
ZaDomainController.setViewMethod=function(b){b.load("id",b.id,false,true);
this._currentObject=b;
this._createUI(b);
ZaApp.getInstance().pushView(this.getContentViewId());
this._view.setDirty(false);
this._view.setObject(b)
};
ZaController.setViewMethods.ZaDomainController.push(ZaDomainController.setViewMethod);
ZaDomainController.prototype._createUI=function(b){this._contentView=this._view=new this.tabConstructor(this._container,b);
this._initPopupMenu();
var c=new Object();
c[ZaAppViewMgr.C_APP_CONTENT]=this._view;
ZaApp.getInstance().getAppViewMgr().createView(this.getContentViewId(),c);
this._UICreated=true;
ZaApp.getInstance()._controllers[this.getContentViewId()]=this
};
ZaDomainController.prototype._saveChanges=function(){var t=this._view.getObject();
if(t.attrs==null){this._errorDialog.setMessage(ZaMsg.ERROR_UNKNOWN,null,DwtMessageDialog.CRITICAL_STYLE,null);
this._errorDialog.popup();
return false
}var f=new Object();
var q=false;
var s=false;
var j=false;
var c=false;
this._currentObject.mods=f;
if(!(AjxUtil.isEmpty(t[ZaAccount.A_zimbraMailCatchAllAddress])&&AjxUtil.isEmpty(this._currentObject[ZaAccount.A_zimbraMailCatchAllAddress]))&&(t[ZaAccount.A_zimbraMailCatchAllAddress]!=this._currentObject[ZaAccount.A_zimbraMailCatchAllAddress])){j=true
}if(ZaController.saveChangeCheckMethods.ZaDomainController){var p=ZaController.saveChangeCheckMethods.ZaDomainController;
var m=p.length;
for(var n=0;
n<m&&!q;
n++){if(typeof(p[n])=="function"){q=p[n].call(this,f,t,this._currentObject)
}}}for(var r in t.attrs){if(r==ZaItem.A_zimbraId||r==ZaDomain.A_domainName||r==ZaDomain.A_domainType||r==ZaItem.A_zimbraACE){continue
}if(!ZaItem.hasWritePermission(r,t)){continue
}if(!(AjxUtil.isEmpty(this._currentObject.attrs[r])&&AjxUtil.isEmpty(t.attrs[r]))){if(t.attrs[r] instanceof Array){if(!(this._currentObject.attrs[r] instanceof Array)||(this._currentObject.attrs[r]&&t.attrs[r]&&t.attrs[r].join(",").valueOf()!=this._currentObject.attrs[r].join(",").valueOf())||(this._currentObject.attrs[r]==null&&t.attrs[r]!=null)||(this._currentObject.attrs[r]!=null&&(t.attrs[r]==null||t.attrs[r].length==0))){f[r]=t.attrs[r];
q=true
}}else{if(t.attrs[r]!=this._currentObject.attrs[r]){f[r]=t.attrs[r];
q=true;
if(r==ZaDomain.A_zimbraSkinForegroundColor||r==ZaDomain.A_zimbraSkinBackgroundColor||r==ZaDomain.A_zimbraSkinSecondaryColor||r==ZaDomain.A_zimbraSkinSelectionColor||r==ZaDomain.A_zimbraSkinLogoURL||r==ZaDomain.A_zimbraSkinLogoLoginBanner||r==ZaDomain.A_zimbraSkinLogoAppBanner){c=true
}}}}}if(!this.checkCertKeyValid(t.attrs[ZaDomain.A_zimbraSSLCertificate],t.attrs[ZaDomain.A_zimbraSSLPrivateKey])){return false
}if(t.attrs[ZaDomain.A_zimbraMailAddressValidationRegex]){var b=t.attrs[ZaDomain.A_zimbraMailAddressValidationRegex];
var g=true;
var k=null;
if(b&&b instanceof Array){for(var n=0;
n<b.length&&g;
n++){if(b[n].indexOf("@")==-1){g=false;
k=b[n]
}}}else{if(b){if(b.indexOf("@")==-1){g=false;
k=b
}}}if(!g){this._errorDialog.setMessage(AjxMessageFormat.format(ZaMsg.ERROR_MSG_EmailValidReg,k),null,DwtMessageDialog.CRITICAL_STYLE,ZabMsg.zimbraAdminTitle);
this._errorDialog.popup();
return g
}}if(!q){if(t[ZaDomain.A2_gal_sync_accounts]&&t[ZaDomain.A2_gal_sync_accounts][0]){if(t[ZaDomain.A2_gal_sync_accounts][0][ZaAccount.A2_zimbra_ds]&&t[ZaDomain.A2_gal_sync_accounts][0][ZaAccount.A2_zimbra_ds].attrs&&this._currentObject[ZaDomain.A2_gal_sync_accounts][0][ZaAccount.A2_zimbra_ds]&&this._currentObject[ZaDomain.A2_gal_sync_accounts][0][ZaAccount.A2_zimbra_ds].attrs){if(this._currentObject[ZaDomain.A2_gal_sync_accounts][0][ZaAccount.A2_zimbra_ds].attrs[ZaDataSource.A_zimbraDataSourcePollingInterval]!=t[ZaDomain.A2_gal_sync_accounts][0][ZaAccount.A2_zimbra_ds].attrs[ZaDataSource.A_zimbraDataSourcePollingInterval]){q=true
}}}}if(!q){if(t[ZaDomain.A2_gal_sync_accounts]&&t[ZaDomain.A2_gal_sync_accounts][0]){if(t[ZaDomain.A2_gal_sync_accounts][0][ZaAccount.A2_ldap_ds]&&t[ZaDomain.A2_gal_sync_accounts][0][ZaAccount.A2_ldap_ds].attrs&&this._currentObject[ZaDomain.A2_gal_sync_accounts][0][ZaAccount.A2_ldap_ds]&&this._currentObject[ZaDomain.A2_gal_sync_accounts][0][ZaAccount.A2_ldap_ds].attrs){if(this._currentObject[ZaDomain.A2_gal_sync_accounts][0][ZaAccount.A2_ldap_ds].attrs[ZaDataSource.A_zimbraDataSourcePollingInterval]!=t[ZaDomain.A2_gal_sync_accounts][0][ZaAccount.A2_ldap_ds].attrs[ZaDataSource.A_zimbraDataSourcePollingInterval]){q=true
}}}}if(q||j){try{if(s){var d=new ZaAccount();
d.load(ZaAccount.A_name,this._currentObject.attrs[ZaDomain.A_zimbraNotebookAccount]);
d.rename(t.attrs[ZaDomain.A_zimbraNotebookAccount])
}if(j){if(!AjxUtil.isEmpty(this._currentObject[ZaAccount.A_zimbraMailCatchAllAddress])&&!AjxUtil.isEmpty(this._currentObject[ZaAccount.A_zimbraMailCatchAllAddress].id)){ZaAccount.modifyCatchAll(this._currentObject[ZaAccount.A_zimbraMailCatchAllAddress].id,"")
}else{if(this._currentObject[ZaAccount.A_zimbraMailCatchAllAddress]&&ZaItem.ID_PATTERN.test(this._currentObject[ZaAccount.A_zimbraMailCatchAllAddress])){ZaAccount.modifyCatchAll(this._currentObject[ZaAccount.A_zimbraMailCatchAllAddress],"")
}}if(!AjxUtil.isEmpty(t[ZaAccount.A_zimbraMailCatchAllAddress])&&!AjxUtil.isEmpty(t[ZaAccount.A_zimbraMailCatchAllAddress].id)){ZaAccount.modifyCatchAll(t[ZaAccount.A_zimbraMailCatchAllAddress].id,this._currentObject.attrs[ZaDomain.A_domainName])
}else{if(t[ZaAccount.A_zimbraMailCatchAllAddress]&&ZaItem.ID_PATTERN.test(t[ZaAccount.A_zimbraMailCatchAllAddress])){ZaAccount.modifyCatchAll(t[ZaAccount.A_zimbraMailCatchAllAddress],this._currentObject.attrs[ZaDomain.A_domainName])
}}if(!AjxUtil.isEmpty(t[ZaAccount.A_zimbraMailCatchAllAddress])&&!AjxUtil.isEmpty(t[ZaAccount.A_zimbraMailCatchAllAddress].id)){this._currentObject[ZaAccount.A_zimbraMailCatchAllAddress]=t[ZaAccount.A_zimbraMailCatchAllAddress]
}else{if(!AjxUtil.isEmpty(t[ZaAccount.A_zimbraMailCatchAllAddress])&&ZaItem.ID_PATTERN.test(t[ZaAccount.A_zimbraMailCatchAllAddress])){var h=new ZaAccount(ZaApp.getInstance());
h.load("id",t[ZaAccount.A_zimbraMailCatchAllAddress],false,true);
this._currentObject[ZaAccount.A_zimbraMailCatchAllAddress]=h
}}}if(q){try{this._currentObject.modify(f,t)
}catch(o){this._handleException(o,"ZaAccountViewController.prototype._saveChanges",null,false);
return false
}}if(c){try{var l=ZaApp.getInstance().getMailServers();
var e=[];
var m=l.length;
for(var n=0;
n<m;
n++){if(ZaItem.hasRight(ZaServer.FLUSH_CACHE_RIGHT,l[n])){e.push(l[n])
}}if(e.length>0){ZaApp.getInstance().dialogs.confirmMessageDialog2.setMessage(ZaMsg.Domain_flush_cache_q,DwtMessageDialog.INFO_STYLE);
ZaApp.getInstance().dialogs.confirmMessageDialog2.registerCallback(DwtDialog.YES_BUTTON,this.openFlushCacheDlg,this,[e]);
ZaApp.getInstance().dialogs.confirmMessageDialog2.registerCallback(DwtDialog.NO_BUTTON,this.closeCnfrmDelDlg,this,null);
ZaApp.getInstance().dialogs.confirmMessageDialog2.popup()
}}catch(o){if(o.code==ZmCsfeException.SVC_PERM_DENIED){return
}else{throw (o)
}}}if(this._currentObject[ZaModel.currentTab]!=t[ZaModel.currentTab]){this._currentObject[ZaModel.currentTab]=t[ZaModel.currentTab]
}ZaApp.getInstance().getAppCtxt().getAppController().setActionStatusMsg(AjxMessageFormat.format(ZaMsg.DomainModified,[this._currentObject.name]));
return true
}catch(o){this._handleException(o,"ZaDomainController.prototype._saveChanges")
}}else{ZaApp.getInstance().getAppCtxt().getAppController().setActionStatusMsg(AjxMessageFormat.format(ZaMsg.DomainModified,[this._currentObject.name]));
return true
}};
ZaDomainController.prototype.openFlushCacheDlg=function(b){ZaApp.getInstance().dialogs.confirmMessageDialog2.popdown();
b._version=1;
var d=[];
for(var c=0;
c<b.length;
c++){b[c]["status"]=0;
d.push(b[c].id)
}obj={statusMessage:null,flushZimlet:false,flushSkin:true,flushLocale:false,serverList:b,status:0,_uuid:(d.length>1?d.join("__"):d[0]),name:(d.length>1?ZaMsg.multiple_servers:b[0].name)};
ZaApp.getInstance().dialogs.flushCacheDialog=new ZaFlushCacheXDialog(this._container,{id:(d.length>1?d.join("__"):d[0]),name:(d.length>1?ZaMsg.multiple_servers:b[0].name)});
ZaApp.getInstance().dialogs.flushCacheDialog.setObject(obj);
ZaApp.getInstance().dialogs.flushCacheDialog.popup()
};
ZaDomainController.prototype.newDomain=function(){var b="";
if(!this._currentDomainName){this._currentDomainName=this._currentObject.attrs[ZaDomain.A_domainName]
}if(this._currentDomainName){b="."+this._currentDomainName
}this._currentObject=new ZaDomain();
this._currentObject.getAttrs={all:true};
this._currentObject.loadNewObjectDefaults("name","foo"+b);
this._currentObject.attrs[ZaDomain.A_domainName]=b;
this._showNewDomainWizard()
};
ZaDomainController.prototype._showNewDomainWizard=function(){try{if(!ZaApp.getInstance().dialogs.newDomainWizard){ZaApp.getInstance().dialogs.newDomainWizard=new ZaNewDomainXWizard(this._container,this._currentObject)
}this._newDomainWizard=ZaApp.getInstance().dialogs.newDomainWizard;
this._newDomainWizard.registerCallback(DwtWizardDialog.FINISH_BUTTON,ZaDomainController.prototype._finishNewButtonListener,this,null);
this._newDomainWizard.setObject(this._currentObject);
this._newDomainWizard.popup()
}catch(b){this._handleException(b,"ZaDomainController.prototype._showNewDomainWizard",null,false)
}};
ZaDomainController.prototype._newButtonListener=function(c){if(this._view.isDirty()){var b=new Object();
b.params=null;
b.obj=ZaApp.getInstance().getDomainController();
b.func=ZaDomainController.prototype.newDomain;
ZaApp.getInstance().dialogs.confirmMessageDialog.setMessage(ZaMsg.Q_SAVE_CHANGES,DwtMessageDialog.INFO_STYLE);
ZaApp.getInstance().dialogs.confirmMessageDialog.registerCallback(DwtDialog.YES_BUTTON,this.saveAndGoAway,this,b);
ZaApp.getInstance().dialogs.confirmMessageDialog.registerCallback(DwtDialog.NO_BUTTON,this.discardAndGoAway,this,b);
ZaApp.getInstance().dialogs.confirmMessageDialog.popup()
}else{this.newDomain()
}};
ZaDomainController.prototype.viewAccountsButtonListener=function(c){var b=this._view.getObject().name;
ZaDomain.searchAccountsInDomain(b)
};
ZaDomainController.prototype._galWizButtonListener=function(c){try{this._galWizard=ZaApp.getInstance().dialogs.galWizard=new ZaGALConfigXWizard(this._container,this._currentObject);
this._currentObject._extid=ZaUtil.getItemUUid();
this._currentObject._editObject=this._currentObject;
this._galWizard.setObject(this._currentObject);
this._galWizard.popup()
}catch(b){this._handleException(b,"ZaDomainController.prototype._showGalWizard",null,false)
}};
ZaDomainController.prototype._authWizButtonListener=function(c){try{if(!this._authWizard){this._authWizard=ZaApp.getInstance().dialogs.authWizard=new ZaTaskAuthConfigWizard(this._container);
this._currentObject._extid=ZaUtil.getItemUUid();
this._currentObject._editObject=this._currentObject
}this._authWizard.setObject(this._currentObject);
this._authWizard.popup()
}catch(b){this._handleException(b,"ZaDomainController.prototype._showAuthWizard",null,false)
}};
ZaDomainController.prototype._autoProvWizButtonListener=function(c){try{if(!this._autoProvWizard){if(ZaApp.getInstance().dialogs.autoProvWizard){this._autoProvWizard=ZaApp.getInstance().dialogs.autoProvWizard
}else{this._autoProvWizard=ZaApp.getInstance().dialogs.autoProvWizard=new ZaTaskAutoProvDialog(this._container,ZaMsg.NAD_AutoProvConfigTitle)
}}this._currentObject._extid=ZaUtil.getItemUUid();
this._currentObject._editObject=this._currentObject;
this._autoProvWizard.registerCallback(DwtDialog.OK_BUTTON,ZaTaskAutoProvDialog.prototype.finishWizard,this._autoProvWizard,null);
this._currentObject.currentTab="1";
this._autoProvWizard.setObject(this._currentObject);
this._autoProvWizard.popup()
}catch(b){this._handleException(b,"ZaDomainController.prototype._autoProvWizButtonListener",null,false)
}};
ZaDomainController.prototype._finishGalButtonListener=function(c){try{ZaDomain.modifyGalSettings.call(this._currentObject,this._galWizard.getObject());
this.fireChangeEvent(this._currentObject);
this._view.setObject(this._currentObject);
this._galWizard.popdown()
}catch(b){this._handleException(b,"ZaDomainController.prototype._finishGalButtonListener",null,false)
}return
};
ZaDomainController.prototype._notifyAllOpenTabs=function(){var d="<br><ul>";
var c=false;
for(var f=0;
f<ZaAppTabGroup._TABS.size();
f++){var g=ZaAppTabGroup._TABS.get(f);
var e=g.getAppView();
if(e&&e._containedObject&&e._containedObject.name){var j=e._containedObject.name;
var b=j.indexOf("@");
var h=null;
if(b>0){h=j.substring(b+1)
}if(h!=null&&h==this._currentObject.attrs[ZaDomain.A_domainName]){d+="<li>"+j+"</li>";
c=true
}}}d+="</ul></br>";
if(c){ZaApp.getInstance().getCurrentController().popupWarningDialog(ZaMsg.WARN_CHANGE_AUTH_METH+d)
}};
ZaDomainController.prototype._finishAuthButtonListener=function(c){try{ZaDomain.modifyAuthSettings.call(this._currentObject,this._authWizard.getObject());
this.fireChangeEvent(this._currentObject);
this._view.setObject(this._currentObject);
this._authWizard.popdown();
this._notifyAllOpenTabs()
}catch(b){this._handleException(b,"ZaDomainController.prototype._finishAuthButtonListener",null,false)
}return
};
ZaDomainController.prototype._finishAutoProvButtonListener=function(c){try{if(!this._autoProvWizard._checkGeneralConfig()||!this._autoProvWizard._checkEagerConfig()||!this._autoProvWizard._checkLazyConfig()){return
}var d=this._autoProvWizard.getObject();
this._autoProvWizard._combineConfigureValues(d);
ZaDomain.modifyAutoPovSettings.call(this._currentObject,d);
this._view.setObject(this._currentObject);
this._autoProvWizard.popdown();
this._notifyAllOpenTabs()
}catch(b){this._handleException(b,"ZaDomainController.prototype._finishAutoProvButtonListener",null,false)
}return
};
ZaDomainController.prototype._finishNewButtonListener=function(c){try{var e=this._newDomainWizard.getObject();
var d=ZaItem.create(e,ZaDomain,"ZaDomain");
d.load("id",d.id,false,true);
if(d!=null){this.fireCreationEvent(d);
if(d.rights&&d.rights[ZaDomain.RIGHT_DELETE_DOMAIN]){if(this._toolbar&&this._toolbar.getButton(ZaOperation.DELETE)){this._toolbar.getButton(ZaOperation.DELETE).setEnabled(true)
}}this._newDomainWizard.popdown()
}}catch(b){if(b.code==ZmCsfeException.DOMAIN_EXISTS){this.popupErrorDialog(ZaMsg.ERROR_DOMAIN_EXISTS,b)
}else{this._handleException(b,"ZaDomainController.prototype._finishNewButtonListener",null,false)
}}return
};
ZaDomainController.prototype._checkMXButtonListener=function(b){var c=new AjxCallback(this,this.checkMXCallback);
ZaDomain.checkDomainMXRecord(this._currentObject,c)
};
ZaDomainController.prototype.checkMXCallback=function(f){if(!f){return
}if(f.isException()){this.popupErrorDialog(AjxMessageFormat.format(ZaMsg.failedToGetMXRecords,[this._currentObject.name]));
return
}var c=f.getResponse().Body.CheckDomainMXRecordResponse;
if(c.code[0]._content=="Ok"){this.popupMsgDialog(ZaMsg.MX_RecordCheckSuccess)
}else{var b=[];
b.push(ZaMsg.foundTheseMXRecords);
if(c.entry&&c.entry.length>0){var e=c.entry.length;
for(var d=0;
d<e;
d++){b.push(c.entry[d]._content)
}}this._errorDialog.setMessage(c.message[0]._content,b.join("<br/>"),DwtMessageDialog.CRITICAL_STYLE,ZabMsg.zimbraAdminTitle);
this._errorDialog.popup()
}};
ZaDomainController.prototype._handleException=function(b,f,e,c,d){if(b.code==ZmCsfeException.DOMAIN_NOT_EMPTY){this.popupErrorDialog(ZaMsg.ERROR_DOMAIN_NOT_EMPTY)
}else{if(b.code==ZmCsfeException.DOMAIN_EXISTS){this.popupErrorDialog(ZaMsg.ERROR_DOMAIN_EXISTS)
}else{ZaController.prototype._handleException.call(this,b,f,e,c,d)
}}};
ZaDomainController.prototype.checkCertKeyValid=function(d,c){if(d&&c){var e={type:"comm",cert:d,prvkey:c};
resp=ZaCert.verifyCertKey(ZaApp.getInstance(),e);
if(!resp){this._errorDialog.setMessage(ZaMsg.SERVER_ERROR,ZaMsg.ERROR_DOMAIN_CERT_VERIFY,DwtMessageDialog.CRITICAL_STYLE,ZabMsg.zimbraAdminTitle);
this._errorDialog.popup();
return false
}var b=resp.verifyResult;
if(b=="false"){this._errorDialog.setMessage(ZaMsg.ERROR_DOMAIN_CERT_KEY_VERIFY,ZaMsg.ALERT_DOMAIN_CERT_KEY,DwtMessageDialog.CRITICAL_STYLE,ZabMsg.zimbraAdminTitle);
this._errorDialog.popup();
return false
}else{if(b=="invalid"){this._errorDialog.setMessage(ZaMsg.ERROR_DOMAIN_CERT_KEY_INVALID,null,DwtMessageDialog.CRITICAL_STYLE,ZaMsg.zimbraAdminTitle);
this._errorDialog.popup();
return false
}else{if(b=="true"){return true
}else{return false
}}}}else{if(!d&&c){this._errorDialog.setMessage(ZaMsg.ERROR_DOMAIN_CERT_MISSING,null,DwtMessageDialog.CRITICAL_STYLE,ZabMsg.zimbraAdminTitle);
this._errorDialog.popup();
return false
}else{if(d&&!c){this._errorDialog.setMessage(ZaMsg.ERROR_DOMAIN_KEY_MISSING,null,DwtMessageDialog.CRITICAL_STYLE,ZabMsg.zimbraAdminTitle);
this._errorDialog.popup();
return false
}}}return true
};
ZaDomainController.prototype.handleDomainChange=function(d){var b=ZaController.postChangeMethods.ZaDomainController;
for(var c in b){var e=b[c];
if(typeof(e)=="function"){e.call(this,d)
}}}
}if(AjxPackage.define("zimbraAdmin.status.controller.ZaStatusViewController")){ZaStatusViewController=function(c,b){ZaController.call(this,c,b,"ZaStatusViewController");
this._helpURL=location.pathname+ZaUtil.HELP_URL+"managing_servers/monitoring_zimbra_collaboration_suite.htm?locid="+AjxEnv.DEFAULT_LOCALE;
this._helpButtonText=ZaMsg.helpEditDomains;
this._popupOperations=new Array();
this._UICreated=false
};
ZaStatusViewController.prototype=new ZaController();
ZaStatusViewController.prototype.constructor=ZaStatusViewController;
ZaController.initToolbarMethods.ZaStatusViewController=new Array();
ZaController.initPopupMenuMethods.ZaStatusViewController=new Array();
ZaStatusViewController.prototype.show=function(e){try{this._createUI(e);
var d=new ZaStatus();
d.load();
var f=d.getStatusVector();
this._contentView.set(f);
ZaApp.getInstance().pushView(this.getContentViewId());
var b=new Date()
}catch(c){this._handleException(c,"ZaStatusViewController.prototype.show",null,false);
return
}};
ZaStatusViewController.prototype.getAppBarAction=function(){if(AjxUtil.isEmpty(this._appbarOperation)){this._appbarOperation[ZaOperation.HELP]=new ZaOperation(ZaOperation.HELP,ZaMsg.TBB_Help,ZaMsg.TBB_Help_tt,"Help","Help",new AjxListener(this,this._helpButtonListener))
}return this._appbarOperation
};
ZaStatusViewController.prototype.getAppBarOrder=function(){if(AjxUtil.isEmpty(this._appbarOrder)){this._appbarOrder.push(ZaOperation.HELP)
}return this._appbarOrder
};
ZaStatusViewController.prototype._createUI=function(c){try{var d=new Object();
this._contentView=new ZaServicesListView(this._container);
this._initPopupMenu();
if(this._popupOperations&&this._popupOperations.length){this._acctionMenu=new ZaPopupMenu(this._contentView,"ActionMenu",null,this._popupOperations,ZaId.VIEW_STATUSLIST,ZaId.MENU_POP)
}d[ZaAppViewMgr.C_APP_CONTENT]=this._contentView;
ZaApp.getInstance().getAppViewMgr().createView(this.getContentViewId(),d);
this._UICreated=true;
ZaApp.getInstance()._controllers[this.getContentViewId()]=this
}catch(b){this._handleException(b,"ZaStatusViewController.prototype._createUI",null,false);
return
}};
ZaStatusViewController.prototype.refreshListener=function(){this.show()
};
ZaStatusViewController.prototype._handleException=function(b,f,e,c,d){if(b.code&&b.code==ZmCsfeException.SVC_AUTH_REQUIRED){this.popupErrorDialog(ZaMsg.SERVER_ERROR,b)
}else{ZaController.prototype._handleException.call(this,b,f,e,c,d)
}}
}if(AjxPackage.define("zimbraAdmin.statistics.controller.ZaGlobalStatsController")){ZaGlobalStatsController=function(c,b){this._toolbarOperations=new Array();
this._toolbarOrder=new Array();
ZaController.call(this,c,b,"ZaGlobalStatsController");
this._helpURL=location.pathname+ZaUtil.HELP_URL+"monitoring/checking_usage_statistics.htm?locid="+AjxEnv.DEFAULT_LOCALE;
this._helpButtonText=ZaMsg.helpCheckStatistics;
this.tabConstructor=ZaGlobalStatsView
};
ZaGlobalStatsController.prototype=new ZaController();
ZaGlobalStatsController.prototype.constructor=ZaGlobalStatsController;
ZaController.setViewMethods.ZaGlobalStatsController=[];
ZaGlobalStatsController.prototype.show=function(){this._setView();
ZaApp.getInstance().pushView(this.getContentViewId());
var c=new Object();
try{c[ZaModel.currentTab]="1";
this._contentView.setObject(c)
}catch(b){this._handleException(b,"ZaGlobalConfigViewController.prototype.show",null,false)
}this._currentObject=c
};
ZaGlobalStatsController.setViewMethod=function(){if(!this._contentView){this._contentView=new this.tabConstructor(this._container);
var b=new Object();
b[ZaAppViewMgr.C_APP_CONTENT]=this._contentView;
ZaApp.getInstance().getAppViewMgr().createView(this.getContentViewId(),b);
ZaApp.getInstance()._controllers[this.getContentViewId()]=this
}};
ZaController.setViewMethods.ZaGlobalStatsController.push(ZaGlobalStatsController.setViewMethod);
ZaGlobalStatsController.prototype.refreshListener=function(c){var b=this._contentView._tabs[this._contentView._currentTabKey]["view"];
if(b&&b.showMe){b.showMe(2)
}}
}if(AjxPackage.define("zimbraAdmin.statistics.controller.ZaServerStatsController")){ZaServerStatsController=function(c,b){this._toolbarOperations=new Array();
this._toolbarOrder=new Array();
ZaController.call(this,c,b,"ZaServerStatsController");
this._helpURL=location.pathname+ZaUtil.HELP_URL+"monitoring/checking_usage_statistics.htm?locid="+AjxEnv.DEFAULT_LOCALE;
this._helpButtonText=ZaMsg.helpCheckStatistics;
this.tabConstructor=ZaServerStatsView
};
ZaServerStatsController.prototype=new ZaController();
ZaServerStatsController.prototype.constructor=ZaServerStatsController;
ZaController.setViewMethods.ZaServerStatsController=[];
ZaServerStatsController.prototype.show=function(d,c,b){if(!this.selectExistingTabByItemId(d.id)){this._setView(d,c,b)
}};
ZaServerStatsController.setViewMethod=function(c,b){if(!this._contentView){this._view=this._contentView=new this.tabConstructor(this._container);
var d=new Object();
d[ZaAppViewMgr.C_APP_CONTENT]=this._contentView;
ZaApp.getInstance().getAppViewMgr().createView(this.getContentViewId(),d);
this._UICreated=true;
ZaApp.getInstance()._controllers[this.getContentViewId()]=this
}ZaApp.getInstance().pushView(this.getContentViewId());
this._contentView.setObject(c)
};
ZaController.setViewMethods.ZaServerStatsController.push(ZaServerStatsController.setViewMethod);
ZaServerStatsController.prototype._prevPageListener=function(e){var g=this.getCurrentStatsView();
var c=this._contentView._mbxPage;
var f=this._contentView._sessionPage;
if(g==c){var b=c._view;
var d=b.getInstance();
c.updateMbxLists(d,null,d.offset-ZaServerMBXStatsPage.MBX_DISPLAY_LIMIT,null,null)
}if(g==f){f._pageListener(true)
}};
ZaServerStatsController.prototype._nextPageListener=function(e){var g=this.getCurrentStatsView();
var c=this._contentView._mbxPage;
var f=this._contentView._sessionPage;
if(g==c){var b=c._view;
var d=b.getInstance();
c.updateMbxLists(d,null,d.offset+ZaServerMBXStatsPage.MBX_DISPLAY_LIMIT,null,null)
}if(g==f){f._pageListener()
}};
ZaServerStatsController.prototype.getCurrentStatsView=function(){return this._contentView._tabs[this._contentView._currentTabKey].view
};
ZaServerStatsController.prototype.refreshListener=function(c){var b=this._contentView._tabs[this._contentView._currentTabKey]["view"];
if(b&&b.showMe){b.showMe(2)
}};
ZaServerStatsListController=function(c,b){ZaListViewController.call(this,c,b,"ZaServerStatsListController");
this._popupOperations=new Array();
this._helpURL=location.pathname+ZaUtil.HELP_URL+"monitoring/checking_usage_statistics.htm?locid="+AjxEnv.DEFAULT_LOCALE;
this._helpButtonText=ZaMsg.helpCheckStatistics
};
ZaServerStatsListController.prototype=new ZaListViewController();
ZaServerStatsListController.prototype.constructor=ZaServerStatsListController;
ZaController.initPopupMenuMethods.ZaServerStatsListController=new Array();
ZaController.changeActionsStateMethods.ZaServerStatsListController=new Array();
ZaServerStatsListController.prototype.show=function(b){if(!this._UICreated){this._createUI()
}if(b!=null){this._contentView.set(b.getVector())
}ZaApp.getInstance().pushView(this.getContentViewId());
if(b!=null){this._list=b
}this.changeActionsState()
};
ZaServerStatsListController.initPopupMenuMethod=function(){this._popupOperations[ZaOperation.VIEW]=new ZaOperation(ZaOperation.VIEW,ZaMsg.TBB_View,ZaMsg.PQTBB_View_tt,"Properties","PropertiesDis",new AjxListener(this,ZaServerStatsListController.prototype._viewButtonListener));
this._popupOperations[ZaOperation.VIEW].enabled=false
};
ZaController.initPopupMenuMethods.ZaServerStatsListController.push(ZaServerStatsListController.initPopupMenuMethod);
ZaServerStatsListController.prototype._createUI=function(){try{var c=new Object();
this._contentView=new ZaServerListView(this._container);
this._initPopupMenu();
this._actionMenu=new ZaPopupMenu(this._contentView,"ActionMenu",null,this._popupOperations,ZaId.VIEW_SERLIST,ZaId.MENU_POP);
c[ZaAppViewMgr.C_APP_CONTENT]=this._contentView;
ZaApp.getInstance().getAppViewMgr().createView(this.getContentViewId(),c);
this._contentView.addSelectionListener(new AjxListener(this,this._listSelectionListener));
this._contentView.addActionListener(new AjxListener(this,this._listActionListener));
this._UICreated=true;
ZaApp.getInstance()._controllers[this.getContentViewId()]=this
}catch(b){this._handleException(b,"ZaServerStatsListController.prototype._createUI",null,false)
}};
ZaServerStatsListController.prototype.set=function(b){this.show(b)
};
ZaServerStatsListController.prototype.handleServerChange=function(c){if(c){var b=c.getDetails();
if(b){if(this._list){this._list.replace(b)
}if(this._contentView){this._contentView.setUI()
}if(ZaApp.getInstance().getCurrentController()==this){this.show()
}this.changeActionsState()
}}};
ZaServerStatsListController.mappingId2handlerMap=null;
ZaServerStatsListController._getMapForMappingId2handler=function(){if(!ZaServerStatsListController.mappingId2handlerMap){ZaServerStatsListController.mappingId2handlerMap={mainNode:{mappingId:ZaZimbraAdmin._STATISTICS_BY_SERVER,handler:ZaOverviewPanelController.statsByServerTreeListener},tabNodes:{mappingId:ZaZimbraAdmin._SERVER_STATISTICS_TAB_VIEW,handler:ZaOverviewPanelController.statsByServerTabTreeListener}}
}return ZaServerStatsListController.mappingId2handlerMap
};
ZaServerStatsListController.parentPathInTree=null;
ZaServerStatsListController._getparentPathInTree=function(){if(!ZaServerStatsListController.parentPathInTree){ZaServerStatsListController.parentPathInTree=ZaTree.getPathByArray([ZaMsg.OVP_home,ZaMsg.OVP_monitor,ZaMsg.OVP_statistics])
}return ZaServerStatsListController.parentPathInTree
};
ZaServerStatsListController.prototype._listSelectionListener=function(c){if(c.detail==DwtListView.ITEM_DBL_CLICKED){var b=c.item;
this._switchToSubItem(b)
}else{this.changeActionsState()
}};
ZaServerStatsListController.prototype._listActionListener=function(b){this.changeActionsState();
this._actionMenu.popup(0,b.docX,b.docY)
};
ZaServerStatsListController.prototype._viewButtonListener=function(c){if(this._contentView.getSelectionCount()==1){var b=this._contentView.getSelection()[0];
this._switchToSubItem(b)
}};
ZaServerStatsListController.prototype._switchToSubItem=function(d){if(d){this._selectedItem=d;
ZaApp.getInstance().getServerStatsController().show(d);
var b=ZaZimbraAdmin.getInstance().getOverviewPanelController();
var c=ZaServerStatsListController._getparentPathInTree();
var e=ZaServerStatsListController._getMapForMappingId2handler();
b.addObjectItem(c,d.name,null,false,false,d,e)
}};
ZaServerStatsListController.changeActionsStateMethod=function(){var b=this._contentView;
if(!b){return
}var c=(b.getSelectionCount()==1&&b.getSelection()[0]!=null);
if(this._popupOperations[ZaOperation.VIEW]){this._popupOperations[ZaOperation.VIEW].enabled=c
}};
ZaController.changeActionsStateMethods.ZaServerStatsListController.push(ZaServerStatsListController.changeActionsStateMethod)
}if(AjxPackage.define("zimbraAdmin.globalconfig.controller.ZaGlobalConfigViewController")){ZaGlobalConfigViewController=function(c,b){ZaXFormViewController.call(this,c,b,"ZaGlobalConfigViewController");
this._UICreated=false;
this._helpURL=location.pathname+ZaUtil.HELP_URL+"managing_global_settings/global_settings.htm?locid="+AjxEnv.DEFAULT_LOCALE;
this._helpButtonText=ZaMsg.helpManageGlobalSettings;
this.objType=ZaEvent.S_GLOBALCONFIG;
this.tabConstructor=GlobalConfigXFormView;
this._currentSortOrder=true
};
ZaGlobalConfigViewController.prototype=new ZaXFormViewController();
ZaGlobalConfigViewController.prototype.constructor=ZaGlobalConfigViewController;
ZaController.initToolbarMethods.ZaGlobalConfigViewController=new Array();
ZaController.initPopupMenuMethods.ZaGlobalConfigViewController=new Array();
ZaController.setViewMethods.ZaGlobalConfigViewController=[];
ZaController.changeActionsStateMethods.ZaGlobalConfigViewController=[];
ZaXFormViewController.preSaveValidationMethods.ZaGlobalConfigViewController=new Array();
ZaController.saveChangeCheckMethods.ZaGlobalConfigViewController=new Array();
ZaGlobalConfigViewController.prototype.addSettingsChangeListener=function(b){this._evtMgr.addListener(ZaEvent.E_MODIFY,b)
};
ZaGlobalConfigViewController.prototype.show=function(c,b){this._setView(c,false)
};
ZaGlobalConfigViewController.initPopupMenuMethod=function(){this._popupOperations[ZaOperation.SAVE]=new ZaOperation(ZaOperation.SAVE,ZaMsg.TBB_Save,ZaMsg.ALTBB_Save_tt,"Save","SaveDis",new AjxListener(this,this.saveButtonListener));
this._popupOperations[ZaOperation.DOWNLOAD_GLOBAL_CONFIG]=new ZaOperation(ZaOperation.DOWNLOAD_GLOBAL_CONFIG,ZaMsg.TBB_DownloadConfig,ZaMsg.GLOBTBB_DownloadConfig_tt,"DownloadGlobalConfig","DownloadGlobalConfig",new AjxListener(this,this.downloadConfigButtonListener))
};
ZaController.initPopupMenuMethods.ZaGlobalConfigViewController.push(ZaGlobalConfigViewController.initPopupMenuMethod);
ZaGlobalConfigViewController.setViewMethod=function(c){try{c.load()
}catch(b){this._handleException(b,"ZaGlobalConfigViewController.prototype.show",null,false)
}if(!c[ZaModel.currentTab]){c[ZaModel.currentTab]="1"
}if(!this._UICreated){this._createUI(c)
}ZaApp.getInstance().pushView(this.getContentViewId());
this._view.setDirty(false);
this._view.setObject(c);
this._currentObject=c
};
ZaController.setViewMethods.ZaGlobalConfigViewController.push(ZaGlobalConfigViewController.setViewMethod);
ZaGlobalConfigViewController.prototype._createUI=function(b){this._contentView=this._view=new this.tabConstructor(this._container,b);
this._initPopupMenu();
var c=new Object();
c[ZaAppViewMgr.C_APP_CONTENT]=this._view;
ZaApp.getInstance().getAppViewMgr().createView(this.getContentViewId(),c);
this._UICreated=true;
ZaApp.getInstance()._controllers[this.getContentViewId()]=this
};
ZaGlobalConfigViewController.prototype.setEnabled=function(b){this._view.setEnabled(b)
};
ZaGlobalConfigViewController.changeActionsStateMethod=function(){var b=(this._view&&this._view.isDirty());
if(this._popupOperations[ZaOperation.SAVE]){this._popupOperations[ZaOperation.SAVE].enabled=b
}};
ZaController.changeActionsStateMethods.ZaGlobalConfigViewController.push(ZaGlobalConfigViewController.changeActionsStateMethod);
ZaGlobalConfigViewController.prototype.downloadConfigButtonListener=function(b){window.open("/service/collectldapconfig/")
};
ZaGlobalConfigViewController.prototype._saveChanges=function(){var J=this._view.getObject();
var j=false;
if(J.attrs==null){this._errorDialog.setMessage(ZaMsg.ERROR_UNKNOWN,null,DwtMessageDialog.CRITICAL_STYLE,null);
this._errorDialog.popup();
return false
}if(ZaItem.hasWritePermission(ZaGlobalConfig.A_zimbraSmtpPort,J)){if(!AjxUtil.isNonNegativeLong(J.attrs[ZaGlobalConfig.A_zimbraSmtpPort])){this._errorDialog.setMessage(AjxMessageFormat.format(ZaMsg.ERROR_INVALID_VALUE_FOR,[ZaMsg.NAD_SmtpPort]),null,DwtMessageDialog.CRITICAL_STYLE,null);
this._errorDialog.popup();
return false
}}if(ZaItem.hasWritePermission(ZaGlobalConfig.A_zimbraDefaultDomainName,J)){if(J.attrs[ZaGlobalConfig.A_zimbraDefaultDomainName]){if(J.attrs[ZaGlobalConfig.A_zimbraDefaultDomainName]!=this._currentObject.attrs[ZaGlobalConfig.A_zimbraDefaultDomainName]){var T=new ZaDomain();
try{T.load("name",J.attrs[ZaGlobalConfig.A_zimbraDefaultDomainName])
}catch(L){if(L.code==ZmCsfeException.NO_SUCH_DOMAIN){this._errorDialog.setMessage(AjxMessageFormat.format(ZaMsg.ERROR_WRONG_DOMAIN_IN_GS,[J.attrs[ZaGlobalConfig.A_zimbraDefaultDomainName]]),null,DwtMessageDialog.CRITICAL_STYLE,null);
this._errorDialog.popup();
return false
}else{throw (L)
}}}}}if(ZaItem.hasWritePermission(ZaGlobalConfig.A_zimbraGalMaxResults,J)){if(!AjxUtil.isNonNegativeLong(J.attrs[ZaGlobalConfig.A_zimbraGalMaxResults])){this._errorDialog.setMessage(AjxMessageFormat.format(ZaMsg.ERROR_INVALID_VALUE_FOR,[ZaMsg.MSG_zimbraGalMaxResults]),null,DwtMessageDialog.CRITICAL_STYLE,null);
this._errorDialog.popup();
return false
}}if(ZaItem.hasWritePermission(ZaGlobalConfig.A_zimbraScheduledTaskNumThreads,J)){if(J.attrs[ZaGlobalConfig.A_zimbraScheduledTaskNumThreads]&&!AjxUtil.isPositiveInt(J.attrs[ZaGlobalConfig.A_zimbraScheduledTaskNumThreads])){this._errorDialog.setMessage(AjxMessageFormat.format(ZaMsg.ERROR_INVALID_VALUE_FOR,[ZaMsg.NAD_zimbraScheduledTaskNumThreads]),null,DwtMessageDialog.CRITICAL_STYLE,null);
this._errorDialog.popup();
return false
}}if(ZaItem.hasWritePermission(ZaGlobalConfig.A_zimbraMtaRestriction,J)){var z=[];
for(var U=0;
U<ZaGlobalConfig.MTA_RESTRICTIONS.length;
U++){var n=ZaGlobalConfig.MTA_RESTRICTIONS[U];
if(J.attrs["_"+ZaGlobalConfig.A_zimbraMtaRestriction+"_"+n]){z.push(n)
}}var s=z.length>0;
if(J.attrs[ZaGlobalConfig.A_zimbraMtaRestriction]){var b=AjxUtil.isString(J.attrs[ZaGlobalConfig.A_zimbraMtaRestriction])?[J.attrs[ZaGlobalConfig.A_zimbraMtaRestriction]]:J.attrs[ZaGlobalConfig.A_zimbraMtaRestriction];
s=AjxStringUtil.getAsString(z.sort())!=AjxStringUtil.getAsString(b.sort());
if(!s){for(var U=0;
U<b.length;
U++){var n=b[U];
if(!J.attrs["_"+ZaGlobalConfig.A_zimbraMtaRestriction+"_"+n]){s=true;
break
}}}}var V=J.attrs[ZaGlobalConfig.A_zimbraMtaPolicyService];
var O=this._currentObject.attrs[ZaGlobalConfig.A_zimbraMtaPolicyService];
var C=V.length;
if((C!=O.length)||(V.join("")!=O.join(""))){s=true
}for(var w=0;
w<C;
w++){var x=V[w];
if(x){z.push("check_policy_service "+x)
}}var S=J.attrs[ZaGlobalConfig.A_zimbraMtaRejectRblClient];
var v=this._currentObject.attrs[ZaGlobalConfig.A_zimbraMtaRejectRblClient];
var K=S.length;
if((K!=v.length)||(S.join("")!=v.join(""))){s=true
}for(var w=0;
w<K;
w++){var d=S[w];
if(d){z.push("reject_rbl_client "+d)
}}var q=J.attrs[ZaGlobalConfig.A_zimbraMtaRejectRHSblClient];
var y=this._currentObject.attrs[ZaGlobalConfig.A_zimbraMtaRejectRHSblClient];
var D=q.length;
if((D!=y.length)||(q.join("")!=y.join(""))){s=true
}for(var w=0;
w<D;
w++){var l=q[w];
if(l){z.push("reject_rhsbl_client "+l)
}}var F=J.attrs[ZaGlobalConfig.A_zimbraMtaRejectRHSblReverseClient];
var u=this._currentObject.attrs[ZaGlobalConfig.A_zimbraMtaRejectRHSblReverseClient];
var B=F.length;
if((B!=u.length)||(F.join("")!=u.join(""))){s=true
}for(var w=0;
w<B;
w++){var m=F[w];
if(m){z.push("reject_rhsbl_reverse_client "+m)
}}var G=J.attrs[ZaGlobalConfig.A_zimbraMtaRejectRHSblSender];
var R=this._currentObject.attrs[ZaGlobalConfig.A_zimbraMtaRejectRHSblSender];
var g=G.length;
if((g!=R.length)||(G.join("")!=R.join(""))){s=true
}for(var w=0;
w<g;
w++){var M=G[w];
if(M){z.push("reject_rhsbl_sender "+M)
}}if(s){J.attrs[ZaGlobalConfig.A_zimbraMtaRestriction]=z
}}if(J.attrs[ZaGlobalConfig.A_zimbraMailAddressValidationRegex]){var A=J.attrs[ZaGlobalConfig.A_zimbraMailAddressValidationRegex];
var P=true;
var c=null;
if(A&&A instanceof Array){for(var U=0;
U<A.length&&P;
U++){if(A[U].indexOf("@")==-1){P=false;
c=A[U]
}}}else{if(A){if(A.indexOf("@")==-1){P=false;
c=A
}}}if(!P){this._errorDialog.setMessage(AjxMessageFormat.format(ZaMsg.ERROR_MSG_EmailValidReg,c),null,DwtMessageDialog.CRITICAL_STYLE,ZabMsg.zimbraAdminTitle);
this._errorDialog.popup();
return P
}}var e=new Object();
if(ZaController.saveChangeCheckMethods.ZaGlobalConfigViewController){var E=ZaController.saveChangeCheckMethods.ZaGlobalConfigViewController;
var t=E.length;
for(var U=0;
U<t;
U++){if(typeof(E[U])=="function"){E[U].call(this,e,J,this._currentObject)
}}}for(var W in J.attrs){if(W==ZaItem.A_objectClass||W==ZaGlobalConfig.A_zimbraAccountClientAttr||W==ZaGlobalConfig.A_zimbraServerInheritedAttr||W==ZaGlobalConfig.A_zimbraDomainInheritedAttr||W==ZaGlobalConfig.A_zimbraCOSInheritedAttr||W==ZaGlobalConfig.A_zimbraGalLdapAttrMap||W==ZaGlobalConfig.A_zimbraGalLdapFilterDef||/^_/.test(W)||W==ZaGlobalConfig.A_zimbraMtaBlockedExtension||W==ZaGlobalConfig.A_zimbraMtaCommonBlockedExtension||W==ZaItem.A_zimbraACE){continue
}if(!ZaItem.hasWritePermission(W,J)){continue
}if((this._currentObject.attrs[W]!=J.attrs[W])&&!(this._currentObject.attrs[W]==undefined&&J.attrs[W]==="")){if(J.attrs[W] instanceof Array){if(!this._currentObject.attrs[W]){this._currentObject.attrs[W]=[]
}else{if(!(this._currentObject.attrs[W] instanceof Array)){this._currentObject.attrs[W]=[this._currentObject.attrs[W]]
}}if(J.attrs[W].join(",").valueOf()!=this._currentObject.attrs[W].join(",").valueOf()){if(W===ZaGlobalConfig.A_zimbraMtaRestriction){var h=ZaGlobalConfigViewController.getMTARestCustomAttributes(this._currentObject.attrs[W]);
J.attrs[W]=AjxUtil.mergeArrays(J.attrs[W],h);
AjxUtil.dedup(J.attrs[W])
}e[W]=J.attrs[W]
}}else{e[W]=J.attrs[W]
}}}if(ZaItem.hasWritePermission(ZaGlobalConfig.A_zimbraMtaBlockedExtension,J)){if(!AjxUtil.isEmpty(J.attrs[ZaGlobalConfig.A_zimbraMtaBlockedExtension])){if(((!this._currentObject.attrs[ZaGlobalConfig.A_zimbraMtaBlockedExtension]||!this._currentObject.attrs[ZaGlobalConfig.A_zimbraMtaBlockedExtension].length))||(J.attrs[ZaGlobalConfig.A_zimbraMtaBlockedExtension].join("")!=this._currentObject.attrs[ZaGlobalConfig.A_zimbraMtaBlockedExtension].join(""))){e[ZaGlobalConfig.A_zimbraMtaBlockedExtension]=J.attrs[ZaGlobalConfig.A_zimbraMtaBlockedExtension]
}}else{if(AjxUtil.isEmpty(J.attrs[ZaGlobalConfig.A_zimbraMtaBlockedExtension])&&!AjxUtil.isEmpty(this._currentObject.attrs[ZaGlobalConfig.A_zimbraMtaBlockedExtension])){e[ZaGlobalConfig.A_zimbraMtaBlockedExtension]=""
}}}var r="ldap";
var I="ssdb";
var k="//default";
if(ZaItem.hasWritePermission(ZaGlobalConfig.A_zimbraEphemeralBackendURL,J)){if(J.attrs[ZaGlobalConfig.A_zimbraEphemeralBackendURL]){var p=J.attrs[ZaGlobalConfig.A_zimbraEphemeralBackendURL];
var Q=p.split(":");
if(Q<2||Q>3){throw new AjxException(AjxMessageFormat.format(ZaMsg.ERROR_INVALID_BACKEND_URL,[p]),AjxException.INVALID_PARAM,"ZaGlobalConfigViewController.prototype._saveChanges")
}for(var U=0;
U<Q.length;
U++){if(Q[U].length==0){throw new AjxException(AjxMessageFormat.format(ZaMsg.ERROR_INVALID_BACKEND_URL,[p]),AjxException.INVALID_PARAM,"ZaGlobalConfigViewController.prototype._saveChanges")
}}if(Q.length==2){if(Q[0]==r){if(Q.length==2&&Q[1]!=k){throw new AjxException(AjxMessageFormat.format(ZaMsg.ERROR_INVALID_BACKEND_URL,[p]),AjxException.INVALID_PARAM,"ZaGlobalConfigViewController.prototype._saveChanges")
}}if(Q[0]==I){throw new AjxException(AjxMessageFormat.format(ZaMsg.ERROR_INVALID_BACKEND_URL,[p]),AjxException.INVALID_PARAM,"ZaGlobalConfigViewController.prototype._saveChanges")
}}else{var f=false;
if(!ZaGlobalConfigViewController.isValidHostName(Q[1])){f=false
}if(Q[1]==="localhost"){f=true
}if(!f){try{var N=ZaIPUtil.isIPV4(Q[1]);
f=true
}catch(L){f=false
}}if(!f){throw new AjxException(AjxMessageFormat.format(ZaMsg.ERROR_INVALID_BACKEND_URL,[p]),AjxException.INVALID_PARAM,"ZaGlobalConfigViewController.prototype._saveChanges")
}if(!AjxUtil.isInt(Q[2])){throw new AjxException(AjxMessageFormat.format(ZaMsg.ERROR_INVALID_BACKEND_URL,[p]),AjxException.INVALID_PARAM,"ZaGlobalConfigViewController.prototype._saveChanges")
}}}else{throw new AjxException(AjxMessageFormat.format(ZaMsg.ERROR_EMPTY_BACKEND_URL,[p]),AjxException.INVALID_PARAM,"ZaGlobalConfigViewController.prototype._saveChanges")
}}if(this._currentObject[ZaModel.currentTab]!=J[ZaModel.currentTab]){this._currentObject[ZaModel.currentTab]=J[ZaModel.currentTab]
}this._currentObject.modify(e,J);
if(e.hasOwnProperty(ZaGlobalConfig.A_zimbraSkinForegroundColor)||e.hasOwnProperty(ZaGlobalConfig.A_zimbraSkinBackgroundColor)||e.hasOwnProperty(ZaGlobalConfig.A_zimbraSkinSecondaryColor)||e.hasOwnProperty(ZaGlobalConfig.A_zimbraSkinSelectionColor)||e.hasOwnProperty(ZaGlobalConfig.A_zimbraSkinLogoURL)||e.hasOwnProperty(ZaGlobalConfig.A_zimbraSkinLogoLoginBanner)||e.hasOwnProperty(ZaGlobalConfig.A_zimbraSkinLogoAppBanner)){try{var H=ZaApp.getInstance().getMailServers();
var o=[];
var t=H.length;
for(var U=0;
U<t;
U++){if(ZaItem.hasRight(ZaServer.FLUSH_CACHE_RIGHT,H[U])){o.push(H[U])
}}if(o.length>0){ZaApp.getInstance().dialogs.confirmMessageDialog2.setMessage(ZaMsg.Domain_flush_cache_q,DwtMessageDialog.INFO_STYLE);
ZaApp.getInstance().dialogs.confirmMessageDialog2.registerCallback(DwtDialog.YES_BUTTON,this.openFlushCacheDlg,this,[o]);
ZaApp.getInstance().dialogs.confirmMessageDialog2.registerCallback(DwtDialog.NO_BUTTON,this.closeCnfrmDelDlg,this,null);
ZaApp.getInstance().dialogs.confirmMessageDialog2.popup()
}}catch(L){this._handleException(L,"ZaGlobalConfigViewController.prototype._saveChange",null,false);
return false
}}ZaApp.getInstance().getAppCtxt().getAppController().setActionStatusMsg(ZaMsg.GlobalConfigModified);
return true
};
ZaGlobalConfigViewController.isValidHostName=function(b){if(!b){return false
}var d=b.split(".");
for(var c=0;
c<b.length;
c++){if(b[c].length==0){return false
}}if(AjxUtil.isHostName(b)){return true
}return false
};
ZaGlobalConfigViewController.prototype.validateMyNetworks=ZaServerController.prototype.validateMyNetworks;
ZaXFormViewController.preSaveValidationMethods.ZaGlobalConfigViewController.push(ZaGlobalConfigViewController.prototype.validateMyNetworks);
ZaGlobalConfigViewController.prototype.openFlushCacheDlg=function(b){ZaApp.getInstance().dialogs.confirmMessageDialog2.popdown();
b._version=1;
var d=[];
for(var c=0;
c<b.length;
c++){b[c]["status"]=0;
d.push(b[c].id)
}obj={statusMessage:null,flushZimlet:false,flushSkin:true,flushLocale:false,serverList:b,status:0,_uuid:(d.length>1?d.join("__"):d[0]),name:(d.length>1?ZaMsg.multiple_servers:b[0].name)};
ZaApp.getInstance().dialogs.flushCacheDialog=new ZaFlushCacheXDialog(this._container,{id:(d.length>1?d.join("__"):d[0]),name:(d.length>1?ZaMsg.multiple_servers:b[0].name)});
ZaApp.getInstance().dialogs.flushCacheDialog.setObject(obj);
ZaApp.getInstance().dialogs.flushCacheDialog.popup()
};
ZaGlobalConfigViewController.getMTARestCustomAttributes=function(b){var f=ZaGlobalConfig.MTA_RESTRICTIONS;
var k=["policy_service","reject_rbl_client","reject_rhsbl_client","reject_rhsbl_reverse_client","reject_rhsbl_sender"];
f=AjxUtil.mergeArrays(f,k);
var j=b.length;
var h=AjxStringUtil.getAsString(f);
var c=[];
for(var e=0;
e<j;
e++){var g=b[e];
var d=g.substring(0,g.indexOf(" "));
if(h.indexOf(g)===-1&&k.indexOf(d)===-1){c.push(g)
}}return c
};
ZaGlobalConfigViewController.prototype.setSortOrder=function(b){this._currentSortOrder=b
};
ZaGlobalConfigViewController.prototype.getSortOrder=function(){return this._currentSortOrder
}
}if(AjxPackage.define("zimbraAdmin.dl.controller.ZaDLController")){ZaDLController=function(c,b){ZaXFormViewController.call(this,c,b,"ZaDLController");
this._UICreated=false;
this._helpURL=location.pathname+ZaUtil.HELP_URL+"managing_accounts/distribution_lists.htm?locid="+AjxEnv.DEFAULT_LOCALE;
this._helpButtonText=ZaMsg.helpEditDL;
this.deleteMsg=ZaMsg.Q_DELETE_DL;
this.objType=ZaEvent.S_ACCOUNT;
this.tabConstructor=ZaDLXFormView;
this._removeAliasArr=[];
this._addAliasArr=[]
};
ZaDLController.prototype=new ZaXFormViewController();
ZaDLController.prototype.constructor=ZaDLController;
ZaController.initToolbarMethods.ZaDLController=new Array();
ZaController.initPopupMenuMethods.ZaDLController=new Array();
ZaController.setViewMethods.ZaDLController=[];
ZaController.changeActionsStateMethods.ZaDLController=new Array();
ZaDLController.prototype.toString=function(){return"ZaDLController"
};
ZaDLController.prototype.show=function(d,c,b){this._setView(d,c,b);
d.schedulePostLoading(this)
};
ZaDLController.setViewMethod=function(d){try{var b=false;
if(d.id==null){b=true
}d.refresh(b,true);
this._createUI(d);
ZaApp.getInstance().pushView(this.getContentViewId());
this._view.setDirty(false);
d[ZaModel.currentTab]="1";
this._view.setObject(d);
this._currentObject=d
}catch(c){this._handleException(c,"ZaDLController.prototype.show",null,false)
}};
ZaController.setViewMethods.ZaDLController.push(ZaDLController.setViewMethod);
ZaDLController.changeActionsStateMethod=function(){var b=(this._view&&this._view.isDirty());
if(this._popupOperations[ZaOperation.SAVE]){this._popupOperations[ZaOperation.SAVE].enabled=b
}if(!this._currentObject.id||!ZaItem.hasRight(ZaAccount.RIGHT_DELETE_DL,this._currentObject)){this._popupOperations[ZaOperation.DELETE].enabled=false
}};
ZaController.changeActionsStateMethods.ZaDLController.push(ZaDLController.changeActionsStateMethod);
ZaDLController.initToolbarMethod=function(){};
ZaController.initToolbarMethods.ZaDLController.push(ZaDLController.initToolbarMethod);
ZaDLController.initPopupMenuMethod=function(){var b=false;
if(ZaZimbraAdmin.currentAdminAccount.attrs[ZaAccount.A_zimbraIsAdminAccount]=="TRUE"){b=true
}else{b=ZaZimbraAdmin.canCreateDL()
}this._popupOperations[ZaOperation.SAVE]=new ZaOperation(ZaOperation.SAVE,ZaMsg.TBB_Save,ZaMsg.ALTBB_Save_tt,"Save","SaveDis",new AjxListener(this,this.saveButtonListener));
this._popupOperations[ZaOperation.CLOSE]=new ZaOperation(ZaOperation.CLOSE,ZaMsg.TBB_Close,ZaMsg.ALTBB_Close_tt,"Close","CloseDis",new AjxListener(this,this.closeButtonListener));
if(b){this._popupOperations[ZaOperation.NEW]=new ZaOperation(ZaOperation.NEW,ZaMsg.TBB_New,ZaMsg.DLTBB_New_tt,"DistributionList","DistributionListDis",new AjxListener(this,this.newButtonListener,[true]))
}this._popupOperations[ZaOperation.DELETE]=new ZaOperation(ZaOperation.DELETE,ZaMsg.TBB_Delete,ZaMsg.DLTBB_Delete_tt,"Delete","DeleteDis",new AjxListener(this,this.deleteButtonListener));
if(b){this._popupOrder.push(ZaOperation.NEW)
}this._popupOrder.push(ZaOperation.DELETE);
this._popupOrder.push(ZaOperation.SAVE);
this._popupOrder.push(ZaOperation.CLOSE);
this._popupOrder.push(ZaOperation.SEP)
};
ZaController.initPopupMenuMethods.ZaDLController.push(ZaDLController.initPopupMenuMethod);
ZaDLController.prototype.getPopUpOperation=function(){return this._popupOperations
};
ZaDLController.prototype.newDl=function(){var b=new ZaDistributionList();
this.show(b)
};
ZaDLController.prototype.newButtonListener=function(d,c){if(d){ZaAccountListController.prototype._newDistributionListListener.call(this)
}else{if(this._view.isDirty()){var b=new Object();
b.params=null;
b.obj=this;
b.func=ZaDLController.prototype.newDl;
ZaApp.getInstance().dialogs.confirmMessageDialog.setMessage(ZaMsg.Q_SAVE_CHANGES,DwtMessageDialog.INFO_STYLE);
ZaApp.getInstance().dialogs.confirmMessageDialog.registerCallback(DwtDialog.YES_BUTTON,this.saveAndGoAway,this,b);
ZaApp.getInstance().dialogs.confirmMessageDialog.registerCallback(DwtDialog.NO_BUTTON,this.discardAndGoAway,this,b);
ZaApp.getInstance().dialogs.confirmMessageDialog.popup()
}else{this.newDl()
}}};
ZaDLController.prototype._createUI=function(b){this._contentView=this._view=new this.tabConstructor(this._container,b);
this._initPopupMenu();
var c=new Object();
c[ZaAppViewMgr.C_APP_CONTENT]=this._view;
ZaApp.getInstance().getAppViewMgr().createView(this.getContentViewId(),c);
this._removeConfirmMessageDialog=new ZaMsgDialog(ZaApp.getInstance().getAppCtxt().getShell(),null,[DwtDialog.YES_BUTTON,DwtDialog.NO_BUTTON],null,ZaId.CTR_PREFIX+ZaId.VIEW_DL+"_removeConfirm");
this._UICreated=true;
ZaApp.getInstance()._controllers[this.getContentViewId()]=this
};
ZaDLController.prototype._saveChanges=function(){var c=false;
var g=null;
var d;
try{if(this._view.getMyForm().hasErrors()){var b=this._view.getMyForm().getItemsInErrorState();
var h=ZaMsg.CORRECT_ERRORS;
h+="<br><ul>";
var e=0;
for(var k in b){if(e>19){h+="<li>...</li>";
break
}if(k=="size"){continue
}var j=b[k].getInheritedProperty("msgName");
if(!j&&b[k].getLabel()){j=b[k].getLabel()
}else{if(!j&&b[k].getParentItem()){if(b[k].getParentItem().getInheritedProperty("msgName")){j=b[k].getParentItem().getInheritedProperty("msgName")
}else{j=b[k].getParentItem().getLabel()
}}}if(j){if(j.substring(j.length-1,1)==":"){j=j.substring(0,j.length-1)
}}if(j){h+="<li>";
h+=j;
h+="</li>"
}e++
}h+="</ul>";
this.popupMsgDialog(h,true);
return false
}d=this._view.getObject();
if(!ZaDistributionList.checkValues(d)){return c
}if(this._currentObject[ZaModel.currentTab]!=d[ZaModel.currentTab]){this._currentObject[ZaModel.currentTab]=d[ZaModel.currentTab]
}if(this._currentObject.id){this._currentObject.schedulePostLoading(this);
this._currentObject.modify(null,d);
if(this._currentObject&&d.name!=this._currentObject.name&&this._currentObject.id){g=d.name
}if(g){try{this._currentObject.rename(g)
}catch(f){if(f.code==ZmCsfeException.DISTRIBUTION_LIST_EXISTS){this.popupErrorDialog(ZaMsg.FAILED_RENAME_DL_1,f)
}else{this.popupErrorDialog(ZaMsg.FAILED_RENAME_DL,f)
}return c
}}ZaApp.getInstance().getAppCtxt().getAppController().setActionStatusMsg(AjxMessageFormat.format(ZaMsg.DLModified,[this._currentObject.name]))
}else{this._currentObject=ZaItem.create(d,ZaDistributionList,"ZaDistributionList");
ZaApp.getInstance().getAppCtxt().getAppController().setActionStatusMsg(AjxMessageFormat.format(ZaMsg.DLCreated,[this._currentObject.name]));
ZaApp.getInstance().getAccountListController().fireCreationEvent(this._currentObject)
}}catch(f){if(f.code==ZmCsfeException.ACCT_EXISTS||f.code==ZmCsfeException.DISTRIBUTION_LIST_EXISTS){this.popupErrorDialog(ZaMsg.ERROR_dlWithThisNameExists,f)
}else{this._handleException(f,"ZaDLController.prototype._saveChanges",null,false)
}return false
}return true
}
}if(AjxPackage.define("zimbraAdmin.resource.controller.ZaResourceController")){ZaResourceController=function(c,b){ZaXFormViewController.call(this,c,b,"ZaResourceController");
this._UICreated=false;
this._helpURL=location.pathname+ZaUtil.HELP_URL+"managing_accounts/managing_resource.htm?locid="+AjxEnv.DEFAULT_LOCALE;
this._helpButtonText=ZaMsg.helpManageResourceAccount;
this.deleteMsg=ZaMsg.Q_DELETE_RES;
this.objType=ZaEvent.S_ACCOUNT;
this.tabConstructor=ZaResourceXFormView
};
ZaResourceController.prototype=new ZaXFormViewController();
ZaResourceController.prototype.constructor=ZaResourceController;
ZaController.initToolbarMethods.ZaResourceController=new Array();
ZaController.initPopupMenuMethods.ZaResourceController=new Array();
ZaController.setViewMethods.ZaResourceController=[];
ZaController.changeActionsStateMethods.ZaResourceController=new Array();
ZaResourceController.prototype.toString=function(){return"ZaResourceController"
};
ZaResourceController.prototype.show=function(d,c,b){this._setView(d,c,b)
};
ZaResourceController.changeActionsStateMethod=function(){var b=(this._view&&this._view.isDirty());
if(this._popupOperations[ZaOperation.SAVE]){this._popupOperations[ZaOperation.SAVE].enabled=b
}};
ZaController.changeActionsStateMethods.ZaResourceController.push(ZaResourceController.changeActionsStateMethod);
ZaResourceController.setViewMethod=function(c){this._createUI(c);
try{ZaApp.getInstance().pushView(this.getContentViewId());
if(c.id){c.load("id",c.id,null)
}this._view.setDirty(false);
c[ZaModel.currentTab]="1";
this._view.setObject(c);
ZaZimbraAdmin.getInstance().getCurrentAppBar().enableButton(ZaOperation.SAVE,false);
this._currentObject=c
}catch(b){this._handleException(b,"ZaResourceController.prototype.show",null,false)
}};
ZaController.setViewMethods.ZaResourceController.push(ZaResourceController.setViewMethod);
ZaResourceController.initPopupMenuMethod=function(){var b=false;
if(ZaSettings.HAVE_MORE_DOMAINS||ZaZimbraAdmin.currentAdminAccount.attrs[ZaAccount.A_zimbraIsAdminAccount]=="TRUE"){b=true
}else{b=ZaZimbraAdmin.canCreateCalRes()
}this._popupOperations[ZaOperation.SAVE]=new ZaOperation(ZaOperation.SAVE,ZaMsg.TBB_Save,ZaMsg.ALTBB_Save_tt,"Save","SaveDis",new AjxListener(this,this.saveButtonListener));
this._popupOperations[ZaOperation.CLOSE]=new ZaOperation(ZaOperation.CLOSE,ZaMsg.TBB_Close,ZaMsg.ALTBB_Close_tt,"Close","CloseDis",new AjxListener(this,this.closeButtonListener));
if(b){this._popupOperations[ZaOperation.NEW]=new ZaOperation(ZaOperation.NEW,ZaMsg.TBB_New,ZaMsg.RESTBB_New_tt,"Resource","ResourceDis",new AjxListener(this,this.newButtonListener))
}this._popupOperations[ZaOperation.DELETE]=new ZaOperation(ZaOperation.DELETE,ZaMsg.TBB_Delete,ZaMsg.RESTBB_Delete_tt,"Delete","DeleteDis",new AjxListener(this,this.deleteButtonListener));
this._popupOrder.push(ZaOperation.NEW);
this._popupOrder.push(ZaOperation.SAVE);
this._popupOrder.push(ZaOperation.CLOSE);
this._popupOrder.push(ZaOperation.DELETE)
};
ZaController.initPopupMenuMethods.ZaResourceController.push(ZaResourceController.initPopupMenuMethod);
ZaResourceController.prototype.getPopUpOperation=function(){return this._popupOperations
};
ZaResourceController.prototype.newResource=function(){try{var b=new ZaResource();
b.loadNewObjectDefaults("name",ZaSettings.myDomainName);
if(!ZaApp.getInstance().dialogs.newResourceWizard){ZaApp.getInstance().dialogs.newResourceWizard=new ZaNewResourceXWizard(this._container)
}ZaApp.getInstance().dialogs.newResourceWizard.setObject(b);
ZaApp.getInstance().dialogs.newResourceWizard.popup()
}catch(c){this._handleException(c,"ZaResourceController.prototype.newResource",null,false)
}};
ZaResourceController.prototype.newButtonListener=function(c){if(this._view.isDirty()){var b=new Object();
b.params=null;
b.obj=this;
b.func=ZaResourceController.prototype.newResource;
ZaApp.getInstance().dialogs.confirmMessageDialog.setMessage(ZaMsg.Q_SAVE_CHANGES,DwtMessageDialog.INFO_STYLE);
ZaApp.getInstance().dialogs.confirmMessageDialog.registerCallback(DwtDialog.YES_BUTTON,this.saveAndGoAway,this,b);
ZaApp.getInstance().dialogs.confirmMessageDialog.registerCallback(DwtDialog.NO_BUTTON,this.discardAndGoAway,this,b);
ZaApp.getInstance().dialogs.confirmMessageDialog.popup()
}else{this.newResource()
}};
ZaResourceController.prototype._createUI=function(b){this._contentView=this._view=new this.tabConstructor(this._container,b);
this._initPopupMenu();
var c=new Object();
c[ZaAppViewMgr.C_APP_CONTENT]=this._view;
ZaApp.getInstance().getAppViewMgr().createView(this.getContentViewId(),c);
this._removeConfirmMessageDialog=new ZaMsgDialog(ZaApp.getInstance().getAppCtxt().getShell(),null,[DwtDialog.YES_BUTTON,DwtDialog.NO_BUTTON],null,ZaId.VIEW_RES+"_removeConfirm");
this._UICreated=true;
ZaApp.getInstance()._controllers[this.getContentViewId()]=this
};
ZaResourceController.prototype._saveChanges=function(){if(this._view.getMyForm().hasErrors()){var b=this._view.getMyForm().getItemsInErrorState();
var g=ZaMsg.CORRECT_ERRORS;
g+="<br><ul>";
var d=0;
for(var k in b){if(d>19){g+="<li>...</li>";
break
}if(k=="size"){continue
}var j=b[k].getInheritedProperty("msgName");
if(!j&&b[k].getParentItem()){j=b[k].getParentItem().getInheritedProperty("msgName")
}if(j){if(j.substring(j.length-1,1)==":"){j=j.substring(0,j.length-1)
}}if(j){g+="<li>";
g+=j;
g+="</li>"
}d++
}g+="</ul>";
this.popupMsgDialog(g,true);
return false
}var c=this._view.getObject();
var f=null;
if(c.attrs==null){this._errorDialog.setMessage(ZaMsg.ERROR_UNKNOWN,null,DwtMessageDialog.CRITICAL_STYLE,null);
this._errorDialog.popup();
return false
}ZaResource.prototype.setLdapAttrsFromSchedulePolicy.call(c);
if(this._currentObject&&c.name!=this._currentObject.name){if(!AjxUtil.isValidEmailNonReg(c.name)){this._errorDialog.setMessage(ZaMsg.ERROR_ACCOUNT_NAME_INVALID,null,DwtMessageDialog.CRITICAL_STYLE,null);
this._errorDialog.popup();
return false
}f=c.name
}var m=new Object();
if(!ZaResource.checkValues(c)){return false
}if(ZaItem.hasAnyRight([ZaResource.SET_CALRES_PASSWORD_RIGHT,ZaResource.CHANGE_CALRES_PASSWORD_RIGHT],c)){if(c.attrs[ZaResource.A_password]!=null&&c[ZaResource.A2_confirmPassword]!=null&&c.attrs[ZaResource.A_password].length>0){try{this._currentObject.changePassword(c.attrs[ZaResource.A_password])
}catch(e){this.popupErrorDialog(ZaMsg.FAILED_SAVE_ACCOUNT,e);
return false
}}}var l=new Object();
if(c[ZaResource.A2_autoCos]=="TRUE"){c.attrs[ZaResource.A_COSId]=""
}if(f){l.newName=f;
try{this._currentObject.rename(f)
}catch(e){if(e.code==ZmCsfeException.ACCT_EXISTS){this.popupErrorDialog(ZaMsg.FAILED_RENAME_ACCOUNT_1,e)
}else{this._handleException(e,"ZaResourceController.prototype._saveChanges",null,false)
}return false
}}for(var h in c.attrs){if(h==ZaResource.A_password||h==ZaItem.A_objectClass||h==ZaResource.A_mail||h==ZaItem.A_zimbraId||h==ZaItem.A_zimbraACE){continue
}if(!ZaItem.hasWritePermission(h,c)){continue
}if((this._currentObject.attrs[h]!=c.attrs[h])&&!(this._currentObject.attrs[h]==undefined&&c.attrs[h]==="")){if(h==ZaResource.A_uid){continue
}if(h==ZaResource.A_COSId&&!AjxUtil.isEmpty(c.attrs[ZaResource.A_COSId])&&!ZaItem.ID_PATTERN.test(c.attrs[ZaResource.A_COSId])){this.popupErrorDialog(AjxMessageFormat.format(ZaMsg.ERROR_NO_SUCH_COS,[c.attrs[ZaResource.A_COSId]]),null);
return false
}if(c.attrs[h] instanceof Array&&this._currentObject.attrs[h] instanceof Array){if(c.attrs[h].join(",").valueOf()!=this._currentObject.attrs[h].join(",").valueOf()){m[h]=c.attrs[h]
}}else{m[h]=c.attrs[h]
}}}if(this._currentObject[ZaModel.currentTab]!=c[ZaModel.currentTab]){this._currentObject[ZaModel.currentTab]=c[ZaModel.currentTab]
}try{this._currentObject.modify(m)
}catch(e){if(e.code==ZmCsfeException.ACCT_EXISTS){this.popupErrorDialog(ZaMsg.FAILED_CREATE_ACCOUNT_1,e)
}else{if(e.code==ZmCsfeException.NO_SUCH_COS){this.popupErrorDialog(AjxMessageFormat.format(ZaMsg.ERROR_NO_SUCH_COS,[c.attrs[ZaResource.A_COSId]]),e)
}else{this._handleException(e,"ZaResourceController.prototype._saveChanges",null,false)
}}return false
}ZaApp.getInstance().getAppCtxt().getAppController().setActionStatusMsg(AjxMessageFormat.format(ZaMsg.ResourceModified,[this._currentObject.name]));
return true
}
}if(AjxPackage.define("zimbraAdmin.helpdesk.controller.ZaHelpViewController")){ZaHelpViewController=function(c,b){ZaController.call(this,c,b,"ZaHelpViewController");
this.tabConstructor=ZaHelpView
};
ZaHelpViewController.prototype=new ZaController();
ZaHelpViewController.prototype.constructor=ZaHelpViewController;
ZaController.initToolbarMethods.ZaHelpViewController=new Array();
ZaHelpViewController.prototype.show=function(b){if(!this._contentView){var c=new Object();
this._contentView=new this.tabConstructor(this._container);
c[ZaAppViewMgr.C_APP_CONTENT]=this._contentView;
ZaApp.getInstance().getAppViewMgr().createView(this.getContentViewId(),c);
this._UICreated=true;
ZaApp.getInstance()._controllers[this.getContentViewId()]=this
}ZaApp.getInstance().pushView(this.getContentViewId())
}
}if(AjxPackage.define("zimbraAdmin.helpdesk.controller.ZaMWizController")){ZaMigrationWizController=function(c,b){ZaController.call(this,c,b,"ZaMigrationWizController");
this.tabConstructor=ZaMigrationWizView
};
ZaMigrationWizController.prototype=new ZaController();
ZaMigrationWizController.prototype.constructor=ZaMigrationWizController;
ZaMigrationWizController.prototype.show=function(b){if(!this._contentView){var c=new Object();
this._contentView=new this.tabConstructor(this._container);
c[ZaAppViewMgr.C_APP_CONTENT]=this._contentView;
ZaApp.getInstance().getAppViewMgr().createView(this.getContentViewId(),c);
this._UICreated=true;
ZaApp.getInstance()._controllers[this.getContentViewId()]=this
}ZaApp.getInstance().pushView(this.getContentViewId())
}
}if(AjxPackage.define("zimbraAdmin.mta.controller.ZaMTAListController")){ZaMTAListController=function(c,b){ZaController.call(this,c,b,"ZaMTAListController");
this._toolbarOperations=new Array();
this._popupOperations=new Array();
this.MTAPool=[];
this._helpURL=location.pathname+ZaUtil.HELP_URL+"monitoring/monitoring_zimbra_mta_mail_queues.htm?locid="+AjxEnv.DEFAULT_LOCALE;
this._helpButtonText=ZaMsg.helpManageMailQueue
};
ZaMTAListController.prototype=new ZaController();
ZaMTAListController.prototype.constructor=ZaMTAListController;
ZaController.initToolbarMethods.ZaMTAListController=new Array();
ZaController.initPopupMenuMethods.ZaMTAListController=new Array();
ZaController.changeActionsStateMethods.ZaMTAListController=new Array();
ZaMTAListController.prototype.show=function(j,h){if(!this._UICreated){this._createUI()
}if(j!=null){this._contentView.set(j.getVector());
this.MTAPool=[];
var g=j.getArray();
var c=g.length;
for(var b=0;
b<c;
b++){this.MTAPool.push(g[b])
}var f=0;
var e=[];
var d=c>5?5:c;
for(f=0;
f<d;
f++){e[f]=this.MTAPool.shift()
}ZaMTA._quecountsArr=new Array();
for(f=d-1;
f>=0;
f--){e[f].load("id",e[f].id,false,true)
}}ZaApp.getInstance().pushView(this.getContentViewId());
this._removeList=new Array();
if(j!=null){this._list=j
}this.changeActionsState()
};
ZaMTAListController.initPopupMenuMethod=function(){this._popupOperations[ZaOperation.VIEW]=new ZaOperation(ZaOperation.VIEW,ZaMsg.TBB_View,ZaMsg.PQTBB_View_tt,"Properties","PropertiesDis",new AjxListener(this,ZaMTAListController.prototype._viewButtonListener))
};
ZaController.initPopupMenuMethods.ZaMTAListController.push(ZaMTAListController.initPopupMenuMethod);
ZaMTAListController.prototype._createUI=function(){try{var c=new Object();
this._contentView=new ZaMTAListView(this._container);
this._initPopupMenu();
this._actionMenu=new ZaPopupMenu(this._contentView,"ActionMenu",null,this._popupOperations,ZaId.VIEW_MTALIST,ZaId.MENU_POP);
c[ZaAppViewMgr.C_APP_CONTENT]=this._contentView;
ZaApp.getInstance().getAppViewMgr().createView(this.getContentViewId(),c);
this._contentView.addSelectionListener(new AjxListener(this,this._listSelectionListener));
this._contentView.addActionListener(new AjxListener(this,this._listActionListener));
this._removeConfirmMessageDialog=new ZaMsgDialog(ZaApp.getInstance().getAppCtxt().getShell(),null,[DwtDialog.YES_BUTTON,DwtDialog.NO_BUTTON],null,ZaId.CTR_PREFIX+ZaId.VIEW_MTALIST+"_removeConfirm");
this._UICreated=true;
ZaApp.getInstance()._controllers[this.getContentViewId()]=this
}catch(b){this._handleException(b,"ZaMTAListController.prototype._createUI",null,false);
return
}};
ZaMTAListController.prototype.getList=function(){return this._list
};
ZaMTAListController.prototype.set=function(b){this.show(b)
};
ZaMTAListController.prototype._listSelectionListener=function(b){if(b.detail==DwtListView.ITEM_DBL_CLICKED){if(b.item){this._selectedItem=b.item;
ZaApp.getInstance().getMTAController().show(b.item)
}}else{this.changeActionsState()
}};
ZaMTAListController.prototype._listActionListener=function(b){this.changeActionsState();
this._actionMenu.popup(0,b.docX,b.docY)
};
ZaMTAListController.prototype._viewButtonListener=function(c){if(this._contentView.getSelectionCount()==1){var b=this._contentView.getSelection()[0];
ZaApp.getInstance().getMTAController().show(b)
}};
ZaMTAListController.changeActionsState=function(){var b=this._contentView.getSelectionCount();
if(b!=1){if(this._popupOperations[ZaOperation.EDIT]){this._popupOperations[ZaOperation.EDIT].enabled=false
}}};
ZaController.changeActionsStateMethods.ZaMTAListController.push(ZaMTAListController.changeActionsStateMethod);
ZaMTAListController.prototype.handleMTAChange=function(c){if(c&&this._contentView){if(c.getDetail("obj")){this._contentView.setUI();
if(this.MTAPool.length){var b=this.MTAPool.shift();
b.load()
}}}};
ZaMTAListController.prototype.getQCounts=function(){this.MTAPool=[];
var g=this._list.getArray();
var c=g.length;
for(var b=0;
b<c;
b++){this.MTAPool.push(g[b])
}var f=c>5?5:c;
var e=0;
var d=[];
for(e=0;
e<f;
e++){d[e]=this.MTAPool.shift()
}ZaMTA._quecountsArr=new Array();
for(e=f-1;
e>=0;
e--){d[e].load()
}};
ZaMTAListController.prototype.refreshListener=function(){this.getQCounts()
}
}if(AjxPackage.define("zimbraAdmin.mta.controller.ZaMTAController")){ZaMTAController=function(c,b){ZaXFormViewController.call(this,c,b,"ZaMTAController");
this._UICreated=false;
this._helpURL=location.pathname+ZaUtil.HELP_URL+"monitoring/monitoring_zimbra_mta_mail_queues.htm?locid="+AjxEnv.DEFAULT_LOCALE;
this._helpButtonText=ZaMsg.helpManageMailQueue;
this._toolbarOperations=new Array();
this._popupOperations=new Array();
this.objType=ZaEvent.S_MTA;
this.tabConstructor=ZaMTAXFormView
};
ZaMTAController.prototype=new ZaXFormViewController();
ZaMTAController.prototype.constructor=ZaMTAController;
ZaController.initToolbarMethods.ZaMTAController=new Array();
ZaController.initPopupMenuMethods.ZaMTAController=new Array();
ZaController.setViewMethods.ZaMTAController=new Array();
ZaController.changeActionsStateMethods.ZaMTAController=new Array();
ZaMTAController.prototype.show=function(b){if(!this.selectExistingTabByItemId(b.id)){this._setView(b,true);
this.setDirty(false)
}};
ZaMTAController.setViewMethod=function(b){b.load();
if(!this._UICreated){this._createUI()
}ZaApp.getInstance().pushView(this.getContentViewId());
this._view.setDirty(false);
this._view.setObject(b);
this._currentObject=b
};
ZaController.setViewMethods.ZaMTAController.push(ZaMTAController.setViewMethod);
ZaMTAController.initPopupMenuMethod=function(){this._popupOperations[ZaOperation.FLUSH]=new ZaOperation(ZaOperation.FLUSH,ZaMsg.TBB_FlushQs,ZaMsg.TBB_TBB_FlushQs_tt,"FlushAllQueues","FlushAllQueues",new AjxListener(this,this.flushListener))
};
ZaController.initPopupMenuMethods.ZaMTAController.push(ZaMTAController.initPopupMenuMethod);
ZaMTAController.prototype._createUI=function(){this._contentView=this._view=new this.tabConstructor(this._container);
this._initPopupMenu();
var b=new Object();
b[ZaAppViewMgr.C_APP_CONTENT]=this._view;
ZaApp.getInstance().getAppViewMgr().createView(this.getContentViewId(),b);
this._UICreated=true;
ZaApp.getInstance()._controllers[this.getContentViewId()]=this
};
ZaMTAController.prototype.flushListener=function(){ZaApp.getInstance().dialogs.confirmMessageDialog.setMessage(ZaMsg.Q_FLUSH_QUEUES,DwtMessageDialog.WARNING_STYLE);
ZaApp.getInstance().dialogs.confirmMessageDialog.registerCallback(DwtDialog.YES_BUTTON,this.flushQueues,this);
ZaApp.getInstance().dialogs.confirmMessageDialog.registerCallback(DwtDialog.NO_BUTTON,this.closeCnfrmDlg,this,null);
ZaApp.getInstance().dialogs.confirmMessageDialog.popup()
};
ZaMTAController.prototype.flushQueues=function(){try{this._currentObject.flushQueues()
}catch(b){this._handleException(b,"ZaMTAController.prototype.flushQueues")
}this.closeCnfrmDlg()
};
ZaMTAController.prototype.handleMTAChange=function(c){if(c&&this._view&&(this._view.__internalId==ZaApp.getInstance().getAppViewMgr().getCurrentView())){if(c.getDetail("obj")&&(c.getDetail("obj") instanceof ZaMTA)){if(this._currentObject&&this._currentObject[ZaItem.A_zimbraId]==c.getDetail("obj")[ZaItem.A_zimbraId]){this._currentObject=c.getDetail("obj");
var e=c.getDetail("qName");
if(e&&c.getDetail("poll")){var d=0;
if(c.getDetail("offset")!=undefined){if(c.getDetail("offset")>0){d=c.getDetail("offset")/ZaMTA.RESULTSPERPAGE
}}this._currentObject[e][ZaMTA.A_pageNum]=d;
if(this._currentObject[e][ZaMTA.A_Status]==ZaMTA.STATUS_SCANNING){var b=new AjxTimedAction(this._currentObject,ZaMTA.prototype.getMailQStatus,e,c.getDetail("query"),c.getDetail("offset"),c.getDetail("limit"),c.getDetail("force"));
AjxTimedAction.scheduleAction(b,ZaMTA.POLL_INTERVAL)
}}this._view.setObject(this._currentObject)
}}}}
}if(AjxPackage.define("zimbraAdmin.search.controller.ZaSearchListController")){ZaSearchListController=function(c,b){ZaListViewController.call(this,c,b,"ZaSearchListController");
this._toolbarOperations=new Array();
this._popupOperations=new Array();
this._popupOperationsOnAppBar=new Array();
this._currentPageNum=1;
this._currentQuery=null;
this._currentDomain=null;
this._currentSortField=ZaAccount.A_uid;
this._currentSortOrder="1";
this.searchTypes=[ZaSearch.ALIASES,ZaSearch.DLS,ZaSearch.ACCOUNTS,ZaSearch.RESOURCES,ZaSearch.DOMAINS,ZaSearch.COSES];
this.pages=new Object();
this._searchPanel=null;
this._searchField=null;
this._helpURL=ZaSearchListController.helpURL;
this._helpButtonText=ZaMsg.helpManageAccounts;
this._UICreated=false;
this._readFromQuery=false;
this._isAdvancedSearch=false;
this._searchFieldInput=null;
this.objType=ZaEvent.S_ACCOUNT;
this.fetchAttrs=ZaSearch.standardAttributes;
this.searchResultFilter=[ZaAccount.A_accountStatus];
this._filterObj=null
};
ZaSearchListController.prototype=new ZaListViewController();
ZaSearchListController.prototype.constructor=ZaSearchListController;
ZaSearchListController.helpURL=location.pathname+ZaUtil.HELP_URL+"search/search.htm?locid="+AjxEnv.DEFAULT_LOCALE;
ZaController.initToolbarMethods.ZaSearchListController=new Array();
ZaController.initPopupMenuMethods.ZaSearchListController=new Array();
ZaController.changeActionsStateMethods.ZaSearchListController=new Array();
ZaSearchListController.prototype.show=function(e){var g=Dwt.getNextId();
var j=new AjxCallback(this,this.searchCallback,{limit:this.RESULTSPERPAGE,CONS:null,show:e,busyId:g,resultFilter:this._filterObj});
var f={query:this._currentQuery,types:this.searchTypes,sortBy:this._currentSortField,offset:this.RESULTSPERPAGE*(this._currentPageNum-1),sortAscending:this._currentSortOrder,limit:this.RESULTSPERPAGE,attrs:this.fetchAttrs,callback:j,controller:this,showBusy:true,busyId:g,busyMsg:ZaMsg.BUSY_SEARCHING,skipCallbackIfCancelled:false};
var h=new Array();
var d=false;
for(var c=0;
this.searchTypes&&c<this.searchTypes.length;
c++){if(this.searchTypes[c]==ZaSearch.ALIASES){d=true
}}if(d&&!this._currentDomain){h.push(f);
var b=ZaSearchListController._getSearchKeyWord(this._currentQuery);
ZaSearchListController.searchAliasDomain(b,this,h)
}else{if(this._currentDomain){f.domain=this._currentDomain
}ZaSearch.searchDirectory(f)
}};
ZaSearchListController.version=1;
ZaSearchListController.prototype._show=function(f,e,g,b,d){this._updateUI(f,e,g,b);
ZaApp.getInstance().pushView(this.getContentViewId());
if(d){this._uiContainer.setQueryFieldVisible(true)
}else{this._uiContainer.setQueryFieldVisible(false)
}var c=this._uiContainer.getQueryFormBubbles();
c=c?c:"";
this._uiContainer.setQueryField(c)
};
ZaSearchListController.prototype.getSearchPanel=function(){if(!this._searchPanel){this._searchPanel=new DwtComposite(ZaApp.getInstance().getAppCtxt().getShell(),"SearchPanel",DwtControl.ABSOLUTE_STYLE,null,ZaId.getOverviewId(ZaId.PANEL_APPSEARCH));
this._searchToolBar=new ZaSearchToolBar(this._searchPanel,null,ZaId.PANEL_APPSEARCH);
this._searchField=this._searchToolBar.getSearchField();
this._searchField.registerCallback(ZaSearchListController.prototype._searchFieldCallback,this);
this._searchPanel.zShow(true)
}return this._searchPanel
};
ZaSearchListController.prototype.set=function(b){this.show(b)
};
ZaSearchListController.prototype.setPageNum=function(b){this._currentPageNum=Number(b)
};
ZaSearchListController.prototype.getPageNum=function(){return this._currentPageNum
};
ZaSearchListController.prototype.getTotalPages=function(){return this.numPages
};
ZaSearchListController.prototype.setFetchAttrs=function(b){this.fetchAttrs=b
};
ZaSearchListController.prototype.getFetchAttrs=function(){return this.fetchAttrs
};
ZaSearchListController.prototype.setQuery=function(b){this._currentQuery=b
};
ZaSearchListController.prototype.getQuery=function(){return this._currentQuery
};
ZaSearchListController.prototype.setSearchTypes=function(b){this.searchTypes=b
};
ZaSearchListController.prototype.getSearchTypes=function(){return this.searchTypes
};
ZaSearchListController.prototype.setSortOrder=function(b){this._currentSortOrder=b
};
ZaSearchListController.prototype.getSortOrder=function(){return this._currentSortOrder
};
ZaSearchListController.prototype.setSortField=function(b){this._currentSortField=b
};
ZaSearchListController.prototype.getSortField=function(){return this._currentSortField
};
ZaSearchListController.prototype._batchSearchforDomain=function(o,l,c,f){var h;
var j=ZaSearch.ALIASES;
var n="(uid=*";
if(!c){n+=")"
}else{if(c&&!(c instanceof Array)){n+=c+"*)"
}else{if(c instanceof Array&&c.length==1){n+=c[0]+"*)"
}else{if(c instanceof Array&&c.length>1){n+=c[1]+")"
}}}}var g=ZaApp.getInstance().getSearchListController();
if(l&&l instanceof Array){h=l
}else{h=new Array()
}var e=Dwt.getNextId();
var b={limit:g.RESULTSPERPAGE,show:true,openInSearchTab:true,busyId:e,isShowBubble:f};
var m=new AjxCallback(g,g.searchCallback,b);
for(var d=0;
d<o.length;
d++){var k={query:n,types:j,showBusy:true,busyId:e,busyMsg:ZaMsg.BUSY_SEARCHING,skipCallbackIfCancelled:false,sortBy:g._currentSortField,attrs:ZaSearch.standardAttributes,callback:m,controller:g,domain:o[d]};
h.push(k)
}g.multipleSearchCallback(b,h)
};
ZaSearchListController.searchAliasDomainCallback=function(h,g){if(h.busyId){ZaApp.getInstance().getAppCtxt().getShell().setBusy(false,h.busyId)
}try{if(!g){throw (new AjxException(ZaMsg.ERROR_EMPTY_RESPONSE_ARG,AjxException.UNKNOWN,"ZaSearchListController.searchAliasDomainCallback"))
}if(g.isException()){throw (g.getException())
}else{var b=g.getResponse().Body.SearchDirectoryResponse;
var c=new Array();
if(b.domain&&b.domain.length>0){for(var e=0;
e<b.domain.length;
e++){var f=b.domain[e].name;
c.push(f)
}}ZaSearchListController.prototype._batchSearchforDomain(c,h.searchQueryList,h.childQueries,h.isShowBubble)
}}catch(d){this._handleException(d,"ZaSearchListController.searchAliasDomainCallback",null,false)
}};
ZaSearchListController.searchAliasDomain=function(g,k,h,c){var b=Dwt.getNextId();
var d=k?k:this;
var e="("+ZaDomain.A_domainName;
if(g.length>0){e+="="+g[0]+"*)"
}else{e=""
}var j=new AjxCallback(d,ZaSearchListController.searchAliasDomainCallback,{busyId:b,searchQueryList:h,childQueries:g,isShowBubble:c});
var f={query:e,types:[ZaSearch.DOMAINS],sortBy:ZaDomain.A_domainName,attrs:[ZaDomain.A_domainName],callback:j,controller:d,showBusy:true,busyId:b,busyMsg:ZaMsg.BUSY_SEARCHING_DOMAINS,skipCallbackIfCancelled:false};
ZaSearch.searchDirectory(f)
};
ZaSearchListController._getSearchKeyWord=function(g){var d="";
var b="zimbraDomainName=*";
var e="@";
var f="*";
if(!g){return d
}var h=g.indexOf(b);
if(h<0||h>g.length-1){return[]
}var c=g.indexOf(f,h+b.length);
if(c>g.length-1){return[]
}d=g.substr(h+b.length,c-h-b.length);
h=d.indexOf(e);
if(h<0||h>g.length-1){return[d]
}return[d.substr(h+1,d.length),d.substr(0,h)]
};
ZaSearchListController.prototype._searchFieldCallback=function(c){var j=new Array();
if(this.setSearchTypes){this.setSearchTypes(c.types)
}this._currentQuery=c.query;
this._currentSortField=c.sortBy;
var e=Dwt.getNextId();
var k=new AjxCallback(this,this.searchCallback,{limit:this.RESULTSPERPAGE,show:true,openInSearchTab:true,busyId:e,resultFilter:this._filterObj,isShowBubble:c.isShowBubble});
var b=new AjxCallback(this,this.updateSearchTree);
var h={query:this._currentQuery,types:c.types,showBusy:true,busyId:e,busyMsg:ZaMsg.BUSY_SEARCHING,skipCallbackIfCancelled:false,sortBy:c.sortBy,offset:this.RESULTSPERPAGE*(this._currentPageNum-1),sortAscending:this._currentSortOrder,limit:this.RESULTSPERPAGE,attrs:ZaSearch.standardAttributes,callback:k,controller:this};
var f=false;
for(var d=0;
c.types&&d<c.types.length;
d++){if(c.types[d]==ZaSearch.ALIASES){f=true
}}if(f){this.scrollSearchParams={query:this._currentQuery,types:c.types,showBusy:true,busyId:e,busyMsg:ZaMsg.BUSY_SEARCHING,skipCallbackIfCancelled:false,sortBy:c.sortBy,sortAscending:this._currentSortOrder,attrs:ZaSearch.standardAttributes,controller:this,scrollType:"isAliasSearch",postCallback:b};
j.push(h);
var g=ZaSearchListController._getSearchKeyWord(c.query);
ZaSearchListController.searchAliasDomain(g,this,j,c.isShowBubble)
}else{this.scrollSearchParams={query:this._currentQuery,types:c.types,showBusy:true,busyId:e,busyMsg:ZaMsg.BUSY_SEARCHING,skipCallbackIfCancelled:false,sortBy:c.sortBy,sortAscending:this._currentSortOrder,attrs:ZaSearch.standardAttributes,controller:this,postCallback:b,isInitialRequest:true};
ZaSearch.searchDirectory(h)
}};
ZaSearchListController.initPopupMenuMethod=function(){this._popupOperations[ZaOperation.EDIT]=new ZaOperation(ZaOperation.EDIT,ZaMsg.TBB_Edit,ZaMsg.ACTBB_Edit_tt,"Edit","EditDis",new AjxListener(this,ZaSearchListController.prototype._editButtonListener));
this._popupOperations[ZaOperation.DELETE]=new ZaOperation(ZaOperation.DELETE,ZaMsg.TBB_Delete,ZaMsg.ACTBB_Delete_tt,"Delete","DeleteDis",new AjxListener(this,ZaSearchListController.prototype._deleteButtonListener));
this._popupOperations[ZaOperation.CHNG_PWD]=new ZaOperation(ZaOperation.CHNG_PWD,ZaMsg.ACTBB_ChngPwd,ZaMsg.ACTBB_ChngPwd_tt,"Padlock","PadlockDis",new AjxListener(this,ZaAccountListController.prototype._chngPwdListener));
this._popupOperations[ZaOperation.EXPIRE_SESSION]=new ZaOperation(ZaOperation.EXPIRE_SESSION,ZaMsg.ACTBB_ExpireSessions,ZaMsg.ACTBB_ExpireSessions_tt,"ExpireSession","ExpireSessionDis",new AjxListener(this,ZaAccountListController.prototype._expireSessionListener));
this._popupOperations[ZaOperation.MOVE_ALIAS]=new ZaOperation(ZaOperation.MOVE_ALIAS,ZaMsg.ACTBB_MoveAlias,ZaMsg.ACTBB_MoveAlias_tt,"MoveAlias","MoveAlias",new AjxListener(this,ZaAccountListController.prototype._moveAliasListener))
};
ZaController.initPopupMenuMethods.ZaSearchListController.push(ZaSearchListController.initPopupMenuMethod);
ZaSearchListController.prototype.reset=function(){this._currentPageNum=1;
this._currentQuery=null;
this._currentSortField=ZaAccount.A_uid;
this._currentSortOrder="1";
this.pages=new Object();
this.objType=ZaEvent.S_ACCOUNT
};
ZaSearchListController.prototype._createUI=function(){this._uiContainer=new ZaSearchXFormView(this._container);
this._contentView=this._uiContainer.widget;
ZaApp.getInstance()._controllers[this.getContentViewId()]=this;
this._newDLListener=new AjxListener(this,ZaSearchListController.prototype._newDistributionListListener);
this._newAcctListener=new AjxListener(this,ZaSearchListController.prototype._newAccountListener);
this._newResListener=new AjxListener(this,ZaSearchListController.prototype._newResourceListener);
var b=new Object();
b[ZaAppViewMgr.C_APP_CONTENT]=this._uiContainer;
ZaApp.getInstance().getAppViewMgr().createView(this.getContentViewId(),b);
this._initPopupMenu();
this._actionMenu=new ZaPopupMenu(this._contentView,"ActionMenu",null,this._popupOperations,ZaId.VIEW_SCHLIST,ZaId.MENU_POP);
this._initPopupMenuAtAppBar();
this._contentView.addSelectionListener(new AjxListener(this,this._listSelectionListener));
this._contentView.addActionListener(new AjxListener(this,this._listActionListener));
this._removeConfirmMessageDialog=ZaApp.getInstance().dialogs.ConfirmMessageDialog=new ZaMsgDialog(ZaApp.getInstance().getAppCtxt().getShell(),null,[DwtDialog.YES_BUTTON,DwtDialog.NO_BUTTON],null,ZaId.CTR_PREFIX+ZaId.VIEW_SCHLIST+"_ConfirmMessage");
this._UICreated=true
};
ZaSearchListController.prototype.closeButtonListener=function(e,c,d,f,g){if(c){d.call(f,g)
}else{ZaApp.getInstance().popView()
}if(this._searchField){var b=this._searchField._localXForm;
var h=b.getItemsById(ZaSearch.A_query)[0];
h.getElement().value=""
}};
ZaSearchListController.prototype._newAccountListener=function(d){try{var b=new ZaAccount();
if(!ZaApp.getInstance().dialogs.newAccountWizard){ZaApp.getInstance().dialogs.newAccountWizard=new ZaNewAccountXWizard(this._container)
}ZaApp.getInstance().dialogs.newAccountWizard.setObject(b);
ZaApp.getInstance().dialogs.newAccountWizard.popup()
}catch(c){this._handleException(c,"ZaSearchListController.prototype._newAccountListener",null,false)
}};
ZaSearchListController.prototype._newDistributionListListener=function(d){try{var c=new ZaDistributionList();
ZaApp.getInstance().getDistributionListController().show(c)
}catch(b){this._handleException(b,"ZaSearchListController.prototype._newDistributionListListener",null,false)
}};
ZaSearchListController.prototype._newResourceListener=function(d){try{var b=new ZaResource();
if(!ZaApp.getInstance().dialogs.newResourceWizard){ZaApp.getInstance().dialogs.newResourceWizard=new ZaNewResourceXWizard(this._container)
}ZaApp.getInstance().dialogs.newResourceWizard.setObject(b);
ZaApp.getInstance().dialogs.newResourceWizard.popup()
}catch(c){this._handleException(c,"ZaSearchListController.prototype._newResourceListener",null,false)
}};
ZaSearchListController.prototype._listSelectionListener=function(b){if(b.detail==DwtListView.ITEM_DBL_CLICKED){if(b.item){this._editItem(b.item)
}}else{this.changeActionsState()
}};
ZaSearchListController.prototype._listActionListener=function(b){this.changeActionsState();
this._actionMenu.popup(0,b.docX,b.docY)
};
ZaSearchListController.prototype._editButtonListener=function(c){if(this._contentView.getSelectionCount()==1){var b=this._contentView.getSelection()[0];
this._editItem(b)
}};
ZaSearchListController.prototype._deleteButtonListener=function(b){ZaAccountListController.prototype._deleteButtonListener.call(this,b)
};
ZaSearchListController.prototype._deleteAccountsInRemoveList=function(b){ZaAccountListController.prototype._deleteAccountsInRemoveList.call(this,b)
};
ZaSearchListController.prototype._editItem=function(d){var c=d.type;
if(c==ZaItem.ACCOUNT){ZaApp.getInstance().getAccountViewController().show(d)
}else{if(c==ZaItem.DL){ZaApp.getInstance().getDistributionListController().show(d)
}else{if(c==ZaItem.ALIAS){var b=d.getAliasTargetObj();
if(d.attrs[ZaAlias.A_targetType]==ZaAlias.TARGET_TYPE_ACCOUNT){ZaApp.getInstance().getAccountViewController().show(b,true)
}else{if(d.attrs[ZaAlias.A_targetType]==ZaAlias.TARGET_TYPE_DL){ZaApp.getInstance().getDistributionListController().show(b,true)
}}}else{if(c==ZaItem.RESOURCE){ZaApp.getInstance().getResourceController().show(d)
}else{if(c==ZaItem.DOMAIN){if(d.attrs[ZaDomain.A_domainType]==ZaDomain.domainTypes.local){ZaApp.getInstance().getDomainController().show(d)
}else{if(d.attrs[ZaDomain.A_domainType]==ZaDomain.domainTypes.alias){ZaApp.getInstance().getDomainAliasWizard(true).editDomainAlias(d,true)
}}}else{if(c==ZaItem.COS){ZaApp.getInstance().getCosController().show(d)
}}}}}}ZaZimbraAdmin.getInstance().getOverviewPanelController().addAccountItem(d)
};
ZaSearchListController.changeActionsStateMethod=function(){var e=this._contentView.getSelectionCount();
if(e==1){var f=this._contentView.getSelection()[0];
if(f){if(f.type!=ZaItem.ALIAS){if(this._popupOperations[ZaOperation.MOVE_ALIAS]){this._popupOperations[ZaOperation.MOVE_ALIAS].enabled=false
}}if(f.type==ZaItem.ALIAS||f.type==ZaItem.DL){if(this._popupOperations[ZaOperation.CHNG_PWD]){this._popupOperations[ZaOperation.CHNG_PWD].enabled=false
}}if(((f.type==ZaItem.ALIAS)&&(f.attrs[ZaAlias.A_targetType]==ZaItem.DL))||(f.type==ZaItem.DL)){if(this._popupOperations[ZaOperation.EXPIRE_SESSION]){this._popupOperations[ZaOperation.EXPIRE_SESSION].enabled=false
}}else{if(f.type==ZaItem.DL){if(this._popupOperations[ZaOperation.MOVE_ALIAS]){this._popupOperations[ZaOperation.MOVE_ALIAS].enabled=false
}}else{if(f.type==ZaItem.ACCOUNT){var c=false;
if(ZaZimbraAdmin.currentAdminAccount.attrs[ZaAccount.A_zimbraIsAdminAccount]=="TRUE"){c=true
}else{if(AjxUtil.isEmpty(f.rights)){f.loadEffectiveRights("id",f.id,false)
}}if(!c){if(!ZaItem.hasRight(ZaAccount.DELETE_ACCOUNT_RIGHT,f)){if(this._popupOperations[ZaOperation.DELETE]){this._popupOperations[ZaOperation.DELETE].enabled=false
}}if(!ZaItem.hasAnyRight([ZaAccount.SET_PASSWORD_RIGHT,ZaAccount.CHANGE_PASSWORD_RIGHT],f)){if(this._popupOperations[ZaOperation.CHNG_PWD]){this._popupOperations[ZaOperation.CHNG_PWD].enabled=false
}}if(!ZaItem.hasWritePermission(ZaAccount.A_zimbraAuthTokenValidityValue,f)){if(this._popupOperations[ZaOperation.EXPIRE_SESSION]){this._popupOperations[ZaOperation.EXPIRE_SESSION].enabled=false
}}}}else{if((f.type==ZaItem.ALIAS)&&(f.attrs[ZaAlias.A_targetType]==ZaItem.ACCOUNT)){if(!f.targetObj){f.targetObj=f.getAliasTargetObj()
}var c=false;
if(ZaZimbraAdmin.currentAdminAccount.attrs[ZaAccount.A_zimbraIsAdminAccount]=="TRUE"){c=true
}else{if(AjxUtil.isEmpty(f.targetObj.rights)){f.targetObj.loadEffectiveRights("id",f.id,false)
}}if(!c){if(!ZaItem.hasRight(ZaAccount.DELETE_ACCOUNT_RIGHT,f.targetObj)){if(this._popupOperations[ZaOperation.DELETE]){this._popupOperations[ZaOperation.DELETE].enabled=false
}}if(!ZaItem.hasAnyRight([ZaAccount.SET_PASSWORD_RIGHT,ZaAccount.CHANGE_PASSWORD_RIGHT],f.targetObj)){if(this._popupOperations[ZaOperation.CHNG_PWD]){this._popupOperations[ZaOperation.CHNG_PWD].enabled=false
}}if(!ZaItem.hasWritePermission(ZaAccount.A_zimbraAuthTokenValidityValue,f.targetObj)){if(this._popupOperations[ZaOperation.EXPIRE_SESSION]){this._popupOperations[ZaOperation.EXPIRE_SESSION].enabled=false
}}}}else{if((f.type==ZaItem.ALIAS)&&(f.attrs[ZaAlias.A_targetType]==ZaItem.RESOURCE)){if(!f.targetObj){f.targetObj=f.getAliasTargetObj()
}var c=false;
if(ZaZimbraAdmin.currentAdminAccount.attrs[ZaAccount.A_zimbraIsAdminAccount]=="TRUE"){c=true
}else{if(AjxUtil.isEmpty(f.targetObj.rights)){f.targetObj.loadEffectiveRights("id",f.id,false)
}}if(!c){if(!ZaItem.hasRight(ZaResource.DELETE_CALRES_RIGHT,f.targetObj)){if(this._popupOperations[ZaOperation.DELETE]){this._popupOperations[ZaOperation.DELETE].enabled=false
}}if(!ZaItem.hasRight(ZaResource.SET_CALRES_PASSWORD_RIGHT,f.targetObj)){if(this._popupOperations[ZaOperation.CHNG_PWD]){this._popupOperations[ZaOperation.CHNG_PWD].enabled=false
}}}}else{if(f.type==ZaItem.RESOURCE){var c=false;
if(ZaZimbraAdmin.currentAdminAccount.attrs[ZaAccount.A_zimbraIsAdminAccount]=="TRUE"){c=true
}else{if(AjxUtil.isEmpty(f.rights)){f.loadEffectiveRights("id",f.id,false)
}}if(!c){if(!ZaItem.hasRight(ZaResource.DELETE_CALRES_RIGHT,f)){if(this._popupOperations[ZaOperation.DELETE]){this._popupOperations[ZaOperation.DELETE].enabled=false
}}if(!ZaItem.hasRight(ZaResource.SET_CALRES_PASSWORD_RIGHT,f)){if(this._popupOperations[ZaOperation.CHNG_PWD]){this._popupOperations[ZaOperation.CHNG_PWD].enabled=false
}}}}else{if(f.type==ZaItem.DOMAIN||f.type==ZaItem.COS){if(this._popupOperations[ZaOperation.DELETE]){this._popupOperations[ZaOperation.DELETE].enabled=false
}if(this._popupOperations[ZaOperation.EXPIRE_SESSION]){this._popupOperations[ZaOperation.EXPIRE_SESSION].enabled=false
}if(this._popupOperations[ZaOperation.CHNG_PWD]){this._popupOperations[ZaOperation.CHNG_PWD].enabled=false
}}}}}}}}}else{if(this._popupOperations[ZaOperation.EXPIRE_SESSION]){this._popupOperations[ZaOperation.EXPIRE_SESSION].enabled=false
}if(this._popupOperations[ZaOperation.EDIT]){this._popupOperations[ZaOperation.EDIT].enabled=false
}if(this._popupOperations[ZaOperation.CHNG_PWD]){this._popupOperations[ZaOperation.CHNG_PWD].enabled=false
}if(this._popupOperations[ZaOperation.MOVE_ALIAS]){this._popupOperations[ZaOperation.MOVE_ALIAS].enabled=false
}if(this._popupOperations[ZaOperation.DELETE]){this._popupOperations[ZaOperation.DELETE].enabled=false
}}}else{if(e>1){if(this._popupOperations[ZaOperation.EDIT]){this._popupOperations[ZaOperation.EDIT].enabled=false
}if(this._popupOperations[ZaOperation.CHNG_PWD]){this._popupOperations[ZaOperation.CHNG_PWD].enabled=false
}if(this._popupOperations[ZaOperation.MOVE_ALIAS]){this._popupOperations[ZaOperation.MOVE_ALIAS].enabled=false
}if(this._popupOperations[ZaOperation.EXPIRE_SESSION]){this._popupOperations[ZaOperation.EXPIRE_SESSION].enabled=false
}}else{if(this._popupOperations[ZaOperation.EXPIRE_SESSION]){this._popupOperations[ZaOperation.EXPIRE_SESSION].enabled=false
}if(this._popupOperations[ZaOperation.EDIT]){this._popupOperations[ZaOperation.EDIT].enabled=false
}if(this._popupOperations[ZaOperation.DELETE]){this._popupOperations[ZaOperation.DELETE].enabled=false
}if(this._popupOperations[ZaOperation.CHNG_PWD]){this._popupOperations[ZaOperation.CHNG_PWD].enabled=false
}if(this._popupOperations[ZaOperation.MOVE_ALIAS]){this._popupOperations[ZaOperation.MOVE_ALIAS].enabled=false
}}}for(var d=0;
d<e;
d++){var b=this._contentView.getSelection()[d];
if(b&&b.type==ZaItem.ACCOUNT){if(b.attrs[ZaAccount.A_zimbraIsSystemAccount]=="TRUE"){if(this._popupOperations[ZaOperation.DELETE]){this._popupOperations[ZaOperation.DELETE].enabled=false
}}}}};
ZaController.changeActionsStateMethods.ZaSearchListController.push(ZaSearchListController.changeActionsStateMethod);
ZaSearchListController.prototype.getSearchResultStats=function(c,d){var b={};
if(d){b=d
}if(!c||!c.searchTotal){return b
}if(c.more||((d&&d.more))){b.more=true
}if(b.searchTotal){b.searchTotal+=c.searchTotal
}else{b.searchTotal=c.searchTotal
}if(c[ZaItem.ACCOUNT] instanceof Array){if(b[ZaItem.ACCOUNT]){b[ZaItem.ACCOUNT]+=c[ZaItem.ACCOUNT].length
}else{b[ZaItem.ACCOUNT]=c[ZaItem.ACCOUNT].length
}}if(c[ZaItem.ALIAS] instanceof Array){if(b[ZaItem.ALIAS]){b[ZaItem.ALIAS]+=c[ZaItem.ALIAS].length
}else{b[ZaItem.ALIAS]=c[ZaItem.ALIAS].length
}}if(c[ZaItem.DOMAIN] instanceof Array){if(b[ZaItem.DOMAIN]){b[ZaItem.DOMAIN]+=c[ZaItem.DOMAIN].length
}else{b[ZaItem.DOMAIN]=c[ZaItem.DOMAIN].length
}}if(c[ZaItem.DL] instanceof Array){if(b[ZaItem.DL]){b[ZaItem.DL]+=c[ZaItem.DL].length
}else{b[ZaItem.DL]=c[ZaItem.DL].length
}}return b
};
ZaSearchListController.prototype.updateSearchTree=function(d,g,e){if(!e){return""
}var f=e.getArray();
var b={};
b.searchTotal=d;
b.more=g;
b[ZaItem.ACCOUNT]=0;
b[ZaItem.DOMAIN]=0;
b[ZaItem.DL]=0;
for(var c=0;
c<f.length;
c++){if(f[c].type==ZaItem.ACCOUNT){b[ZaItem.ACCOUNT]++
}else{if(f[c].type==ZaItem.DOMAIN){b[ZaItem.DOMAIN]++
}else{if(f[c].type==ZaItem.DL){b[ZaItem.DL]++
}}}}ZaZimbraAdmin.getInstance().getOverviewPanelController().fireSearchEvent(b)
};
ZaSearchListController.prototype._initPopupMenuAtAppBar=function(){if(AjxUtil.isEmpty(this._popupOrder)){for(var b in this._popupOperations){this._popupOrder.push(b)
}for(var b in this._popupOperationsOnAppBar){this._popupOrder.push(b)
}}for(var b in this._popupOperations){this._popupOperationsOnAppBar[b]=this._popupOperations[b]
}};
ZaSearchListController.prototype.getPopUpOperation=function(){return this._popupOperationsOnAppBar
}
}if(AjxPackage.define("zimbraAdmin.search.controller.ZaSearchBuilderController")){ZaSearchBuilderController=function(c,b){ZaController.call(this,c,b,"ZaSearchBuilderController");
this._helpURL=location.pathname+ZaUtil.HELP_URL+"managing_servers/monitoring_zimbra_collaboration_suite.htm?locid="+AjxEnv.DEFAULT_LOCALE;
this._helpButtonText=ZaMsg.zimbraHelpCenter;
this._option_views=[];
this._searchBuildPanel=null;
this._searchBuildTBPanel=null;
this._searchBuilderVisible=false;
this._query=null;
this._searchTypes=null;
this._objTypeOptionViewPosition=-1;
this._serverOptionViewPosition=-1;
this._numberOfDomainOptions=0;
this._cosids=null
};
ZaSearchBuilderController.prototype=new ZaController();
ZaSearchBuilderController.prototype.constructor=ZaSearchBuilderController;
ZaSearchBuilderController.prototype.getSearchBuilderPanel=function(){if(!this._searchBuildPanel){DBG.println(AjxDebug.DBG3,"Initializing the search builder option panel.");
this._searchBuildPanel=new ZaSearchBuilderView(ZaApp.getInstance().getAppCtxt().getShell());
this.addOptionView(ZaSearchOption.BASIC_TYPE_ID)
}return this._searchBuildPanel
};
ZaSearchBuilderController.prototype.getSearchBuilderTBPanel=function(){if(!this._searchBuildTBPanel){DBG.println(AjxDebug.DBG3,"Initialize the search builder toolbar panel.");
this._searchBuildTBPanel=new ZaSearchBuilderToolbarView(ZaApp.getInstance().getAppCtxt().getShell())
}return this._searchBuildTBPanel
};
ZaSearchBuilderController.prototype.toggleVisible=function(){this._searchBuilderVisible=!this._searchBuilderVisible
};
ZaSearchBuilderController.prototype.isSBVisible=function(){return this._searchBuilderVisible
};
ZaSearchBuilderController.prototype.isAdvancedSearch=function(b){var c=/\([^\(\)\=]+=[^\(\)\=]+\)/;
if(b.match(c)!=null){return true
}return false
};
ZaSearchBuilderController.handleOptions=function(h,b,c){var e=ZaApp.getInstance().getSearchBuilderController();
var l=ZaApp.getInstance().getSearchListController()._searchField;
var j=b.charCode;
if(j==13||j==3){l.invokeCallback()
}else{this.setInstanceValue(h);
var f;
if(h=="TRUE"){f="FALSE"
}var d=this.getRef();
if(f=="FALSE"&&d==ZaSearchOption.A_objTypeAccountDomainAdmin){this.setInstanceValue(f,ZaSearchOption.A_objTypeAccountAdmin);
this.setInstanceValue(f,ZaSearchOption.A_objTypeSystemAccount)
}else{if(f=="FALSE"&&d==ZaSearchOption.A_objTypeAccountAdmin){this.setInstanceValue(f,ZaSearchOption.A_objTypeAccountDomainAdmin);
this.setInstanceValue(f,ZaSearchOption.A_objTypeSystemAccount)
}else{if(f=="FALSE"&&d==ZaSearchOption.A_objTypeSystemAccount){this.setInstanceValue(f,ZaSearchOption.A_objTypeAccountAdmin);
this.setInstanceValue(f,ZaSearchOption.A_objTypeAccountDomainAdmin)
}}}if((d==ZaSearchOption.A_enableAccountLastLoginTime_From||d==ZaSearchOption.A_enableAccountLastLoginTime_To)&&(h=="TRUE")){var g;
if(d==ZaSearchOption.A_enableAccountLastLoginTime_From){g=ZaSearchOption.A_accountLastLoginTime_From
}if(d==ZaSearchOption.A_enableAccountLastLoginTime_To){g=ZaSearchOption.A_accountLastLoginTime_To
}var k=this.getInstanceValue(g);
if(!k){this.setInstanceValue(new Date(),g)
}}e.setQuery()
}};
ZaSearchBuilderController.filterDomains=function(d,c,b){if(AjxUtil.isEmpty(d)||AjxStringUtil.trim(d)==""){return
}this.setInstanceValue(d);
var f=Dwt.getNextId();
var g=new AjxCallback(this,ZaSearchBuilderController.optionFilterCallback,{busyId:f});
var e={query:"("+ZaDomain.A_domainName+"=*"+d+"*)",types:[ZaSearch.DOMAINS],sortBy:ZaDomain.A_domainName,attrs:[ZaDomain.A_domainName],applyCos:"0",callback:g,controller:ZaApp.getInstance().getCurrentController(),showBusy:true,busyId:f,busyMsg:ZaMsg.BUSY_SEARCHING_DOMAINS,skipCallbackIfCancelled:false};
ZaSearch.searchDirectory(e)
};
ZaSearchBuilderController.filterCOSES=function(d,c,b){if(AjxUtil.isEmpty(d)||AjxStringUtil.trim(d)==""){return
}this.setInstanceValue(d);
var f=Dwt.getNextId();
var g=new AjxCallback(this,ZaSearchBuilderController.optionCosFilterCallback,{busyId:f});
var e={query:"("+ZaCos.A_name+"=*"+d+"*)",types:[ZaSearch.COSES],sortBy:ZaCos.A_name,attrs:[ZaCos.A_name],applyCos:"0",callback:g,controller:ZaApp.getInstance().getCurrentController(),showBusy:true,busyId:f,busyMsg:ZaMsg.BUSY_SEARCHING_COSES,skipCallbackIfCancelled:false};
ZaSearch.searchDirectory(e)
};
ZaSearchBuilderController.prototype.listAllServers=function(){var f=this._option_views[this._option_views.length-1];
var d=f._localXForm;
var b=d.getInstance();
var e=ZaServer.getAll().getArray();
var g=new Array(e.length);
for(var c=0;
c<g.length;
c++){g[c]=e[c].name
}b.options[ZaSearchOption.A_serverList]=g;
b.options[ZaSearchOption.A_serverListChecked]=new AjxVector();
d.refresh()
};
ZaSearchBuilderController.prototype.updateServerFilter=function(d){var g=d;
var e=g._localXForm;
var b=e.getInstance();
var f=ZaServer.getAll().getArray();
var h=new Array(f.length);
for(var c=0;
c<h.length;
c++){h[c]=f[c].name
}b.options[ZaSearchOption.A_serverList]=h;
b.options[ZaSearchOption.A_serverListChecked]=new AjxVector();
e.refresh()
};
ZaSearchBuilderController.filterSelectionListener=function(g){var j=g.target;
if(j.type&&j.type=="checkbox"){var f=this.getRef();
var e=j.value;
var d=this.getForm();
var b=d.getInstance();
var h=null;
if(f==ZaSearchOption.A_domainList){h=b.options[ZaSearchOption.A_domainListChecked]
}else{if(f==ZaSearchOption.A_serverList){h=b.options[ZaSearchOption.A_serverListChecked]
}else{if(f==ZaSearchOption.A_cosList){h=b.options[ZaSearchOption.A_cosListChecked]
}}}var c=d.parent._controller;
if(j.checked){h.remove(e)
}else{h.add(e)
}c.setQuery()
}};
ZaSearchBuilderController.optionFilterCallback=function(j,h){DBG.println(AjxDebug.DBG3,"Check for the filter results ... ");
if(j.busyId){ZaApp.getInstance().getAppCtxt().getShell().setBusy(false,j.busyId)
}var g=this.getForm();
try{if(!h){throw (new AjxException(ZaMsg.ERROR_EMPTY_RESPONSE_ARG,AjxException.UNKNOWN,"ZaListViewController.prototype.searchCallback"))
}if(h.isException()){throw (h.getException())
}else{var c=h.getResponse().Body.SearchDirectoryResponse;
if(c.domain&&c.domain.length>0){var b=new Array(c.domain.length);
for(var e=0;
e<b.length;
e++){if(c.domain[e]){b[e]=c.domain[e].name
}}var f=c.searchTotal;
this.setInstanceValue(b,"/options/"+ZaSearchOption.A_domainList);
this.setInstanceValue(new AjxVector(),"/options/"+ZaSearchOption.A_domainListChecked);
g.refresh()
}else{this.setInstanceValue([],"/options/"+ZaSearchOption.A_domainList);
this.setInstanceValue(new AjxVector(),"/options/"+ZaSearchOption.A_domainListChecked);
g.refresh()
}}}catch(d){if(d.code!=ZmCsfeException.MAIL_QUERY_PARSE_ERROR){g.parent._controller._handleException(d,"ZaSearchBuilderController.optionFilterCallback")
}else{g.parent._controller.popupErrorDialog(ZaMsg.queryParseError,d)
}}};
ZaSearchBuilderController.optionCosFilterCallback=function(j,h){if(j.busyId){ZaApp.getInstance().getAppCtxt().getShell().setBusy(false,j.busyId)
}var f=this.getForm();
var b=ZaApp.getInstance().getSearchBuilderController();
try{if(!h){throw (new AjxException(ZaMsg.ERROR_EMPTY_RESPONSE_ARG,AjxException.UNKNOWN,"ZaListViewController.prototype.searchCallback"))
}if(h.isException()){throw (h.getException())
}else{var c=h.getResponse().Body.SearchDirectoryResponse;
if(c.cos&&c.cos.length>0){var g=new Array(c.cos.length);
b._cosids=new Array(c.cos.length);
for(var e=0;
e<g.length;
e++){g[e]=c.cos[e].name;
b._cosids[g[e]]=c.cos[e].id
}this.setInstanceValue(g,"/options/"+ZaSearchOption.A_cosList);
this.setInstanceValue(new AjxVector(),"/options/"+ZaSearchOption.A_cosListChecked);
f.refresh()
}else{this.setInstanceValue([],"/options/"+ZaSearchOption.A_cosList);
this.setInstanceValue(new AjxVector(),"/options/"+ZaSearchOption.A_cosListChecked);
f.refresh()
}}}catch(d){if(d.code!=ZmCsfeException.MAIL_QUERY_PARSE_ERROR){f.parent._controller._handleException(d,"ZaSearchBuilderController.optionCosFilterCallback")
}else{f.parent._controller.popupErrorDialog(ZaMsg.queryParseError,d)
}}};
ZaSearchBuilderController.prototype.handleSpecialQueries=function(){var d=this.getOptionViews();
this._includeNeverLoggedInAccts=false;
this._includeObjectWithoutCosId=false;
for(var c=0;
c<d.length;
c++){var e=d[c]._optionId;
var b=d[c]._localXForm.getInstance();
if(this._includeNeverLoggedInAccts==false&&b[ZaSearchOption.A_includeNeverLoginedAccounts]&&b[ZaSearchOption.A_includeNeverLoginedAccounts]=="TRUE"){this._includeNeverLoggedInAccts=true
}if(this._includeObjectWithoutCosId==false&&b[ZaSearchOption.A2_cosNotSet]&&b[ZaSearchOption.A2_cosNotSet]=="TRUE"){this._includeObjectWithoutCosId=true
}}};
ZaSearchBuilderController.prototype.setQuery=function(){this.handleSpecialQueries();
var k=this.getOptionViews();
this._query=null;
this._searchTypes=null;
this._filterObj={};
this._filterObj[ZaSearchOption.BASIC_TYPE_ID]=[];
this._filterObj[ZaSearchOption.OBJECT_TYPE_ID]=[];
this._filterObj[ZaSearchOption.DOMAIN_ID]=[];
this._filterObj[ZaSearchOption.SERVER_ID]=[];
this._filterObj[ZaSearchOption.ADVANCED_ID]=[];
this._filterObj[ZaSearchOption.COS_ID]=[];
for(var e=0;
e<k.length;
e++){var d=k[e]._optionId;
var m=k[e]._localXForm.getInstance();
var n=m.options;
var b=[];
if(d==ZaSearchOption.COS_ID&&this._includeObjectWithoutCosId&&(!n[ZaSearchOption.A_cosListChecked]||n[ZaSearchOption.A_cosListChecked].size()==0)){b.push("(!("+ZaAccount.A_COSId+"=*))")
}for(var l in n){var j=n[l];
if(j!=null){var g=null;
if(j instanceof Date){j=ZaUtil.getAdminServerDateTime(j,true)
}if(l==ZaSearchOption.A_accountLastLoginTime_From){if(m[ZaSearchOption.A_enableAccountLastLoginTime_From]=="TRUE"){l=ZaAccount.A_zimbraLastLogonTimestamp;
g=">="
}else{continue
}}if(l==ZaSearchOption.A_accountLastLoginTime_To){if(m[ZaSearchOption.A_enableAccountLastLoginTime_To]=="TRUE"){l=ZaAccount.A_zimbraLastLogonTimestamp;
g="<="
}else{continue
}}if((j.length>0)||((j instanceof AjxVector)&&(j.size()>0))){this._addFilter(b,l,j,g)
}}}this._filterObj[d].push(b)
}this._query=this.getQueryFromFilters();
this._searchTypes=this.getSearchTypesFromFilters();
DBG.println(AjxDebug.DBG1,"Current Query String = "+this._query);
var h=ZaApp.getInstance().getSearchListController()._searchField._localXForm;
var c=h.getInstance();
var f=h.getItemsById(ZaSearch.A_query)[0];
if(this.isSBVisible()){f.toolTipContent=ZaMsg.tt_advancedSearchField;
c[ZaSearch.A_query]=this._query
}else{f.toolTipContent=null;
c[ZaSearch.A_query]=""
}h.refresh()
};
ZaSearchBuilderController.prototype._addFilter=function(d,c,f,g){if(f instanceof String){f=String(f).replace(/([\\\\\\*\\(\\)])/g,"\\$1")
}var e=null;
var b=ZaApp.getInstance().getSearchListController();
if(c==ZaSearchOption.A_domainFilter||c==ZaSearchOption.A_domainList||c==ZaSearchOption.A_serverList||c==ZaSearchOption.A_cosFilter||c==ZaSearchOption.A_cosList){}else{if(c==ZaSearchOption.A_objTypeAccount){if(f=="TRUE"&&(ZaSettings.ENABLED_UI_COMPONENTS[ZaSettings.ACCOUNT_LIST_VIEW]||ZaSettings.ENABLED_UI_COMPONENTS[ZaSettings.CARTE_BLANCHE_UI])){d.push(ZaSearch.ACCOUNTS)
}}else{if(c==ZaSearchOption.A_objTypeDl){if(f=="TRUE"&&(ZaSettings.ENABLED_UI_COMPONENTS[ZaSettings.DL_LIST_VIEW]||ZaSettings.ENABLED_UI_COMPONENTS[ZaSettings.CARTE_BLANCHE_UI])){d.push(ZaSearch.DLS)
}}else{if(c==ZaSearchOption.A_objTypeAlias){if(f=="TRUE"&&(ZaSettings.ENABLED_UI_COMPONENTS[ZaSettings.ALIAS_LIST_VIEW]||ZaSettings.ENABLED_UI_COMPONENTS[ZaSettings.CARTE_BLANCHE_UI])){d.push(ZaSearch.ALIASES)
}}else{if(c==ZaSearchOption.A_objTypeResource){if(f=="TRUE"&&(ZaSettings.ENABLED_UI_COMPONENTS[ZaSettings.RESOURCE_LIST_VIEW]||ZaSettings.ENABLED_UI_COMPONENTS[ZaSettings.CARTE_BLANCHE_UI])){d.push(ZaSearch.RESOURCES)
}}else{if(c==ZaSearchOption.A_objTypeSystemAccount){if(f=="TRUE"){e="("+c+"="+f+")"
}}else{if(c==ZaSearchOption.A_objTypeAccountAdmin){if(f=="TRUE"){e="("+c+"="+f+")"
}}else{if(ZaSearchOption.A_objTypeAccountDomainAdmin&&c==ZaSearchOption.A_objTypeAccountDomainAdmin){if(f=="TRUE"){e="("+c+"="+f+")"
}}else{if(c==ZaSearchOption.A_domainListChecked){if(f.size()>0){e=ZaSearchBuilderController.getOrFilter4ListArray(f.getArray(),ZaSearchOption.DOMAIN_ID)
}}else{if(c==ZaSearchOption.A_serverListChecked){if(f.size()>0){e=ZaSearchBuilderController.getOrFilter4ListArray(f.getArray(),ZaSearchOption.SERVER_ID)
}}else{if(c==ZaSearchOption.A_cosListChecked){if(f.size()>0){e=ZaSearchBuilderController.getCosFilter4ListArray(f.getArray())
}}else{if(c==ZaAccount.A_zimbraLastLogonTimestamp){e="("+c+g+f+")"
}else{if(c==ZaSearchOption.A_zimbraMailForwardingAddress){e="("+c+"=*"+f+"*)";
e+="("+ZaSearchOption.A_zimbraPrefMailForwardingAddress+"=*"+f+"*)";
e="(|"+e+")"
}else{if(b.searchResultFilter.indexOf(c)>=0){if(!b._filterObj||!(b._filterObj instanceof Object)){b._filterObj={}
}b._filterObj[c]=f
}else{e="("+c+"=*"+f+"*)"
}}}}}}}}}}}}}}if(e!=null&&e.length>0){DBG.println(AjxDebug.DBG1,"Add entry "+e);
d.push(e)
}};
ZaSearchBuilderController.prototype.getSearchTypesFromFilters=function(){var b=this._filterObj[ZaSearchOption.OBJECT_TYPE_ID];
if(this._objTypeOptionViewPosition<0){return ZaSearchOption.getDefaultObjectTypes()
}else{if(b!=null&&b.length>0){return b
}else{return[]
}}};
ZaSearchBuilderController.prototype.getQueryFromFilters=function(){var e="";
var c=0;
for(var b in this._filterObj){if(b!=ZaSearchOption.OBJECT_TYPE_ID){var d=this.getOrFilter4SameOptionType(this._filterObj[b],b);
if(d!=null&&d.length>0){e+=d;
c++
}}}if(c>1){e="(&"+e+")"
}return e
};
ZaSearchBuilderController.prototype.getOrFilter4SameOptionType=function(b,e){var f="";
var d=0;
if(e==ZaSearchOption.ADVANCED_ID){if(this._includeNeverLoggedInAccts){f+="(!("+ZaAccount.A_zimbraLastLogonTimestamp+"=*))";
d++
}}for(var c=0;
c<b.length;
c++){f+=this.getAndFilter4EntriesInOneOption(b[c]);
d++
}if(d>1){f="(|"+f+")"
}DBG.println(AjxDebug.DBG3,"Same Option Type Filter = "+f);
return f
};
ZaSearchBuilderController.prototype.getAndFilter4EntriesInOneOption=function(b){var c=b.join("");
if(b.length>1){c="(&"+c+")"
}DBG.println(AjxDebug.DBG3,"One Option Type Filter = "+c);
return c
};
ZaSearchBuilderController.getOrFilter4ListArray=function(b,e){var d="";
for(var c=0;
c<b.length;
c++){if(e==ZaSearchOption.DOMAIN_ID){d+="("+ZaAccount.A_mailDeliveryAddress+"=*@"+b[c]+")("+ZaAccount.A_zimbraMailAlias+"=*@"+b[c]+")"
}else{if(e==ZaSearchOption.SERVER_ID){d+="("+ZaAccount.A_mailHost+"="+b[c]+")"
}}}if(b.length>1||(b.length>0&&e==ZaSearchOption.DOMAIN_ID)){d="(|"+d+")"
}return d
};
ZaSearchBuilderController.getCosFilter4ListArray=function(b){var e="";
var c=ZaApp.getInstance().getSearchBuilderController();
var f=c._cosids;
if(c._includeObjectWithoutCosId){e+="(!("+ZaAccount.A_COSId+"=*))"
}if(f&&f.length>0){for(var d=0;
d<b.length&&d<f.length;
d++){e+="("+ZaAccount.A_COSId+"="+f[b[d]]+")"
}}if(f.length>1||(f.length==1&&c._includeObjectWithoutCosId)){e="(|"+e+")"
}return e
};
ZaSearchBuilderController.prototype.getQuery=function(){return this._query
};
ZaSearchBuilderController.prototype.getAddressTypes=function(){return this._searchTypes
};
ZaSearchBuilderController.prototype.addOptionView=function(e){var b=this._option_views.length;
var c=this._searchBuildPanel||this.getSearchBuilderPanel();
var d=ZaSearchOptionView.WIDTH;
if(e==ZaSearchOption.BASIC_TYPE_ID){d=ZaSearchOptionView.BASIC_OPTION_WIDTH
}else{if(e==ZaSearchOption.ADVANCED_ID){d=ZaSearchOptionView.ADVANCED_OPTION_WIDTH
}else{if(e==ZaSearchOption.OBJECT_TYPE_ID){if(this._objTypeOptionViewPosition>=0){return
}else{this._objTypeOptionViewPosition=b
}}else{if(e==ZaSearchOption.SERVER_ID){if(this._serverOptionViewPosition>=0){return
}else{this._serverOptionViewPosition=b
}}else{if(e==ZaSearchOption.DOMAIN_ID){d=ZaSearchOptionView.DOMAIN_OPTION_WIDTH
}else{if(e==ZaSearchOption.COS_ID){d=ZaSearchOptionView.COS_OPTION_WIDTH
}}}}}}this._option_views.push(new ZaSearchOptionView(c,e,d,b))
};
ZaSearchBuilderController.prototype.removeAllOptionViews=function(){for(var b=this._option_views.length-1;
b>=0;
b--){this.removeOptionView(b)
}};
ZaSearchBuilderController.prototype.removeOptionView=function(d,e){var g=this._option_views[d];
var h=g.getY();
g.dispose();
this._option_views.splice(d,1);
if(g._optionId==ZaSearchOption.OBJECT_TYPE_ID){this._objTypeOptionViewPosition=-1;
this._searchBuildTBPanel.getButton(ZaOperation.SEARCH_BY_ADDESS_TYPE).setEnabled(true)
}else{if(g._optionId==ZaSearchOption.SERVER_ID){this._serverOptionViewPosition=-1;
this._searchBuildTBPanel.getButton(ZaOperation.SEARCH_BY_SERVER).setEnabled(true)
}}if(e){var c=this._option_views.length;
for(var f=d;
f<c;
f++){var b=this._searchBuildPanel.getNextOptionX(f);
this._option_views[f].setLocation(b,h);
this._option_views[f].setPosition(f)
}this.setQuery()
}};
ZaSearchBuilderController.prototype.getOptionViews=function(){return this._option_views
};
ZaSearchBuilderController.newHandleOptions=function(h,b,c){var j=b.charCode;
if(j==13||j==3){}else{this.setInstanceValue(h);
var f;
if(h=="TRUE"){f="FALSE"
}var d=this.getRef();
if(f=="FALSE"&&d==ZaSearchOption.A_objTypeAccountDomainAdmin){this.setInstanceValue(f,ZaSearchOption.A_objTypeAccountAdmin);
this.setInstanceValue(f,ZaSearchOption.A_objTypeSystemAccount)
}else{if(f=="FALSE"&&d==ZaSearchOption.A_objTypeAccountAdmin){if(ZaSearchOption.A_objTypeAccountDomainAdmin){this.setInstanceValue(f,ZaSearchOption.A_objTypeAccountDomainAdmin)
}this.setInstanceValue(f,ZaSearchOption.A_objTypeSystemAccount)
}else{if(f=="FALSE"&&d==ZaSearchOption.A_objTypeSystemAccount){this.setInstanceValue(f,ZaSearchOption.A_objTypeAccountAdmin);
if(ZaSearchOption.A_objTypeAccountDomainAdmin){this.setInstanceValue(f,ZaSearchOption.A_objTypeAccountDomainAdmin)
}}}}if((d==ZaSearchOption.A_enableAccountLastLoginTime_From||d==ZaSearchOption.A_enableAccountLastLoginTime_To)&&(h=="TRUE")){var g;
if(d==ZaSearchOption.A_enableAccountLastLoginTime_From){g=ZaSearchOption.A_accountLastLoginTime_From
}if(d==ZaSearchOption.A_enableAccountLastLoginTime_To){g=ZaSearchOption.A_accountLastLoginTime_To
}var k=this.getInstanceValue(g);
if(!k){this.setInstanceValue(new Date(),g)
}}if(d==ZaSearchOption.A2_status_active||d==ZaSearchOption.A2_status_closed||d==ZaSearchOption.A2_status_locked||d==ZaSearchOption.A2_status_lockout||d==ZaSearchOption.A2_status_pending||d==ZaSearchOption.A2_status_maintenance){var e=[];
if(this.getInstanceValue(ZaSearchOption.A2_status_active)=="TRUE"){e.push(ZaAccount.ACCOUNT_STATUS_ACTIVE)
}if(this.getInstanceValue(ZaSearchOption.A2_status_closed)=="TRUE"){e.push(ZaAccount.ACCOUNT_STATUS_CLOSED)
}if(this.getInstanceValue(ZaSearchOption.A2_status_locked)=="TRUE"){e.push(ZaAccount.ACCOUNT_STATUS_LOCKED)
}if(this.getInstanceValue(ZaSearchOption.A2_status_lockout)=="TRUE"){e.push(ZaAccount.ACCOUNT_STATUS_LOCKOUT)
}if(this.getInstanceValue(ZaSearchOption.A2_status_pending)=="TRUE"){e.push(ZaAccount.ACCOUNT_STATUS_PENDING)
}if(this.getInstanceValue(ZaSearchOption.A2_status_maintenance)=="TRUE"){e.push(ZaAccount.ACCOUNT_STATUS_MAINTENANCE)
}this.setInstanceValue(e,ZaSearchOption.A2_status_list)
}}};
ZaSearchBuilderController.prototype.newHandleSpecialQueries=function(){var d=this.getFilterDialogArray();
this._includeNeverLoggedInAccts=false;
this._includeObjectWithoutCosId=false;
for(var c=0;
c<d.length;
c++){var e=d[c]._optionId;
var b=d[c]._localXForm.getInstance();
if(this._includeNeverLoggedInAccts==false&&b[ZaSearchOption.A_includeNeverLoginedAccounts]&&b[ZaSearchOption.A_includeNeverLoginedAccounts]=="TRUE"){this._includeNeverLoggedInAccts=true
}if(this._includeObjectWithoutCosId==false&&b[ZaSearchOption.A2_cosNotSet]&&b[ZaSearchOption.A2_cosNotSet]=="TRUE"){this._includeObjectWithoutCosId=true
}}};
ZaSearchBuilderController.prototype.setNewQuery=function(g){this.newHandleSpecialQueries();
var l=this.getFilterDialogArray();
this._query=null;
this._searchTypes=null;
this._filterObj=null;
var e=g._optionId;
var n=g._localXForm.getInstance();
var o=n.options;
var b=[];
if(e==ZaSearchOption.COS_FILTER_ID&&this._includeObjectWithoutCosId&&(!o[ZaSearchOption.A_cosListChecked]||o[ZaSearchOption.A_cosListChecked].size()==0)){b.push("(!("+ZaAccount.A_COSId+"=*))")
}for(var m in o){var k=o[m];
if(k!=null){var f=null;
if(k instanceof Date){k=ZaUtil.getAdminServerDateTime(k,true)
}if(m==ZaSearchOption.A_accountLastLoginTime_From){if(n[ZaSearchOption.A_enableAccountLastLoginTime_From]=="TRUE"){m=ZaAccount.A_zimbraLastLogonTimestamp;
f=">="
}else{continue
}}if(m==ZaSearchOption.A_accountLastLoginTime_To){if(n[ZaSearchOption.A_enableAccountLastLoginTime_To]=="TRUE"){m=ZaAccount.A_zimbraLastLogonTimestamp;
f="<="
}else{continue
}}if((k.length>0)||((k instanceof AjxVector)&&(k.size()>0))){this._newAddFilter(b,m,k,f)
}}}var j=ZaApp.getInstance().getSearchListController();
if(j._uiContainer){var h=this.newGetOrFilter4SameOptionType([b],e);
var d=false;
if(e==ZaSearchOption.SERVER_FILTER_ID){d=true
}var c={type:2,unique:d,query:h,optionalType:e,displayName:this.getFilterTypeName(g._optionId)};
j._uiContainer.addBubble(c)
}};
ZaSearchBuilderController.prototype.getFilterTypeName=function(c){var b;
switch(c){case ZaSearchOption.BASIC_FILTER_ID:b=ZaMsg.OVP_basicFilter;
break;
case ZaSearchOption.STATUS_FILTER_ID:b=ZaMsg.OVP_statutsFilter;
break;
case ZaSearchOption.LASTER_LOGIN_TIME_FILTER_ID:b=ZaMsg.OVP_lltFilter;
break;
case ZaSearchOption.EXT_EMAIL_ADDRESS_FILTER_ID:b=ZaMsg.OVP_eeaFilter;
break;
case ZaSearchOption.COS_FILTER_ID:b=ZaMsg.OVP_cosFilter;
break;
case ZaSearchOption.SERVER_FILTER_ID:b=ZaMsg.OVP_serverFilter;
break;
case ZaSearchOption.DOMAIN_FILTER_ID:b=ZaMsg.OVP_domainFilter;
break
}return b
};
ZaSearchBuilderController.prototype._newAddFilter=function(d,c,f,g){if(f instanceof String){f=String(f).replace(/([\\\\\\*\\(\\)])/g,"\\$1")
}var e=null;
var b=ZaApp.getInstance().getSearchListController();
if(c==ZaSearchOption.A_domainFilter||c==ZaSearchOption.A_domainList||c==ZaSearchOption.A_serverList||c==ZaSearchOption.A_cosFilter||c==ZaSearchOption.A_cosList||c==ZaSearchOption.A2_status_active||c==ZaSearchOption.A2_status_closed||c==ZaSearchOption.A2_status_locked||c==ZaSearchOption.A2_status_lockout||c==ZaSearchOption.A2_status_pending||c==ZaSearchOption.A2_status_maintenance){}else{if(c==ZaSearchOption.A_objTypeSystemAccount){if(f=="TRUE"){e="("+c+"="+f+")"
}}else{if(c==ZaSearchOption.A_objTypeAccountAdmin){if(f=="TRUE"){e="("+c+"="+f+")"
}}else{if(ZaSearchOption.A_objTypeAccountDomainAdmin&&c==ZaSearchOption.A_objTypeAccountDomainAdmin){if(f=="TRUE"){e="("+c+"="+f+")"
}}else{if(c==ZaSearchOption.A_domainListChecked){if(f.size()>0){e=ZaSearchBuilderController.newGetOrFilter4ListArray(f.getArray(),ZaSearchOption.DOMAIN_FILTER_ID)
}}else{if(c==ZaSearchOption.A_serverListChecked){if(f.size()>0){e=ZaSearchBuilderController.newGetOrFilter4ListArray(f.getArray(),ZaSearchOption.SERVER_FILTER_ID)
}}else{if(c==ZaSearchOption.A_cosListChecked){if(f.size()>0){e=ZaSearchBuilderController.newGetCosFilter4ListArray(f.getArray())
}}else{if(c==ZaSearchOption.A2_status_list){if(f.length>0){e=ZaSearchBuilderController.newGetOrFilter4ListArray(f,ZaSearchOption.STATUS_FILTER_ID)
}}else{if(c==ZaAccount.A_zimbraLastLogonTimestamp){e="("+c+g+f+")"
}else{if(c==ZaSearchOption.A_zimbraMailForwardingAddress){e="("+c+"=*"+f+"*)";
e+="("+ZaSearchOption.A_zimbraPrefMailForwardingAddress+"=*"+f+"*)";
e="(|"+e+")"
}else{e="("+c+"=*"+f+"*)"
}}}}}}}}}}if(e!=null&&e.length>0){d.push(e)
}};
ZaSearchBuilderController.prototype.newGetQueryFromFilters=function(){var e="";
var c=0;
for(var b in this._filterObj){var d=this.newGetOrFilter4SameOptionType(this._filterObj[b],b);
if(d!=null&&d.length>0){e+=d;
c++
}}if(c>1){e="(&"+e+")"
}return e
};
ZaSearchBuilderController.prototype.newGetOrFilter4SameOptionType=function(b,e){var f="";
var d=0;
if(e==ZaSearchOption.LASTER_LOGIN_TIME_FILTER_ID){if(this._includeNeverLoggedInAccts){f+="(!("+ZaAccount.A_zimbraLastLogonTimestamp+"=*))";
d++
}}for(var c=0;
c<b.length;
c++){f+=this.newGetAndFilter4EntriesInOneOption(b[c]);
d++
}if(d>1){f="(|"+f+")"
}return f
};
ZaSearchBuilderController.prototype.newGetAndFilter4EntriesInOneOption=function(b){var c=b.join("");
if(b.length>1){c="(&"+c+")"
}return c
};
ZaSearchBuilderController.newGetOrFilter4ListArray=function(b,e){var d="";
for(var c=0;
c<b.length;
c++){if(e==ZaSearchOption.DOMAIN_FILTER_ID){d+="("+ZaAccount.A_mailDeliveryAddress+"=*@"+b[c]+")("+ZaAccount.A_zimbraMailAlias+"=*@"+b[c]+")"
}else{if(e==ZaSearchOption.SERVER_FILTER_ID){d+="("+ZaAccount.A_mailHost+"="+b[c]+")"
}else{if(e==ZaSearchOption.STATUS_FILTER_ID){d+="("+ZaAccount.A_accountStatus+"="+b[c]+")"
}}}}if(b.length>1||(b.length>0&&e==ZaSearchOption.DOMAIN_FILTER_ID)){d="(|"+d+")"
}return d
};
ZaSearchBuilderController.newGetCosFilter4ListArray=function(b){var e="";
var c=ZaApp.getInstance().getSearchBuilderController();
var f=c._cosids;
if(c._includeObjectWithoutCosId){e+="(!("+ZaAccount.A_COSId+"=*))"
}if(f&&f.length>0){for(var d=0;
d<b.length&&d<f.length;
d++){e+="("+ZaAccount.A_COSId+"="+f[b[d]]+")"
}}if(f.length>1||(f.length==1&&c._includeObjectWithoutCosId)){e="(|"+e+")"
}return e
};
ZaSearchBuilderController.prototype.getFilterTreeItems=function(){return[{text:ZaMsg.OVP_basicFilter,filterType:ZaSearchOption.BASIC_FILTER_ID},{text:ZaMsg.OVP_statutsFilter,filterType:ZaSearchOption.STATUS_FILTER_ID},{text:ZaMsg.OVP_lltFilter,filterType:ZaSearchOption.LASTER_LOGIN_TIME_FILTER_ID},{text:ZaMsg.OVP_eeaFilter,filterType:ZaSearchOption.EXT_EMAIL_ADDRESS_FILTER_ID},{text:ZaMsg.OVP_cosFilter,filterType:ZaSearchOption.COS_FILTER_ID},{text:ZaMsg.OVP_serverFilter,filterType:ZaSearchOption.SERVER_FILTER_ID},{text:ZaMsg.OVP_domainFilter,filterType:ZaSearchOption.DOMAIN_FILTER_ID}]
};
ZaSearchBuilderController.searchFilterTreeListener=function(h){var b=h.item.getData("filterType");
var f={};
var d=h.item.getBounds();
f.x=d.x+d.width;
f.y=d.y;
var g;
var e=ZaApp.getInstance().getSearchBuilderController();
var j=false;
switch(b){case ZaSearchOption.BASIC_FILTER_ID:g=e.getFilterDialogByType(ZaSearchOption.BASIC_FILTER_ID);
break;
case ZaSearchOption.SERVER_FILTER_ID:g=e.getFilterDialogByType(ZaSearchOption.SERVER_FILTER_ID,true);
e.updateServerFilter(g);
j=true;
break;
case ZaSearchOption.COS_FILTER_ID:g=e.getFilterDialogByType(ZaSearchOption.COS_FILTER_ID);
break;
case ZaSearchOption.DOMAIN_FILTER_ID:g=e.getFilterDialogByType(ZaSearchOption.DOMAIN_FILTER_ID);
break;
case ZaSearchOption.EXT_EMAIL_ADDRESS_FILTER_ID:g=e.getFilterDialogByType(ZaSearchOption.EXT_EMAIL_ADDRESS_FILTER_ID);
break;
case ZaSearchOption.LASTER_LOGIN_TIME_FILTER_ID:g=e.getFilterDialogByType(ZaSearchOption.LASTER_LOGIN_TIME_FILTER_ID);
break;
case ZaSearchOption.STATUS_FILTER_ID:g=e.getFilterDialogByType(ZaSearchOption.STATUS_FILTER_ID);
break
}if(g){ZaSearchBuilderController.currentPopupDialog=g;
if(!j){g._localXForm.setInstance(ZaSearchOption.getDefaultInstance(g._optionId))
}g.popup(f);
var k=DwtOutsideMouseEventMgr.INSTANCE;
var c={id:"ZaOptionView",obj:g,outsideListener:ZaSearchBuilderController.getOutsideListener()};
k.startListening(c)
}};
ZaSearchBuilderController.filterDialogSet={};
ZaSearchBuilderController.currentPopupDialog=undefined;
ZaSearchBuilderController.outSideListener=undefined;
ZaSearchBuilderController.prototype.getFilterDialogArray=function(){var b=[];
for(var c in ZaSearchBuilderController.filterDialogSet){if(ZaSearchBuilderController.filterDialogSet[c]){b.push(ZaSearchBuilderController.filterDialogSet[c])
}}return b
};
ZaSearchBuilderController.getOutsideListener=function(){if(!ZaSearchBuilderController.outSideListener){ZaSearchBuilderController.outSideListener=new AjxListener(null,ZaSearchBuilderController.outsideListener)
}return ZaSearchBuilderController.outSideListener
};
ZaSearchBuilderController.outsideListener=function(d,b){if(ZaSearchBuilderController.currentPopupDialog){if(ZaSearchBuilderController._isChildMenuClicked(d.target)){return
}ZaSearchBuilderController.currentPopupDialog.popdown();
var c=DwtOutsideMouseEventMgr.INSTANCE;
c.stopListening({id:"ZaOptionView",obj:ZaSearchBuilderController.currentPopupDialog});
ZaSearchBuilderController.currentPopupDialog=undefined
}};
ZaSearchBuilderController._isChildMenuClicked=function(b){while(b&&b.className!="DwtShell"){if(b.className=="DwtMenu"){return true
}b=b.parentElement?b.parentElement:b.parentNode
}return false
};
ZaSearchBuilderController.prototype.getFilterDialogByType=function(e,c){if(!ZaSearchBuilderController.filterDialogSet[e]||c){var b,d;
if(e==ZaSearchOption.SERVER_FILTER_ID){b=ZaSearchOptionView.WIDTH+10;
d=150
}else{if(e==ZaSearchOption.COS_FILTER_ID){b=ZaSearchOptionView.COS_OPTION_WIDTH
}else{if(e==ZaSearchOption.DOMAIN_FILTER_ID){b=ZaSearchOptionView.DOMAIN_OPTION_WIDTH;
d=150
}else{if(e==ZaSearchOption.EXT_EMAIL_ADDRESS_FILTER_ID){b=240;
d=60
}}}}ZaSearchBuilderController.filterDialogSet[e]=new ZaSearchOptionDialog(ZaApp.getInstance().getAppCtxt().getShell(),e,b,d);
ZaSearchBuilderController.filterDialogSet[e].registerCallback(DwtDialog.OK_BUTTON,this.filterOKListener,this,e)
}return ZaSearchBuilderController.filterDialogSet[e]
};
ZaSearchBuilderController.prototype.filterOKListener=function(d){var b=this.getFilterDialogByType(d);
b.popdown();
b._controller.setNewQuery(b);
var c=DwtOutsideMouseEventMgr.INSTANCE;
c.stopListening({id:"ZaOptionView",obj:b});
ZaSearchBuilderController.currentPopupDialog=undefined
}
}if(AjxPackage.define("zimbraAdmin.task.controller.ZaTaskController")){ZaTaskController=function(c,b){ZaController.call(this,c,b,"ZaTaskController");
this._workingInProcess=new AjxVector();
this._workingInProcess.getArray()._version=1;
this._runningTask=new AjxVector();
this._runningTask.getArray()._version=1;
this._notification={_msgNames:{}}
};
ZaTaskController.prototype=new ZaController();
ZaTaskController.prototype.constructor=ZaTaskController;
ZaTaskController.prototype.getTaskHeaderPanel=function(){if(!this._taskHeadPanel){this._taskHeadPanel=new ZaTaskHeaderPanel(this._container)
}return this._taskHeadPanel
};
ZaTaskController.prototype.getTaskContentPanel=function(b){if(!this._taskContentPanel){if(!b){b=new ZaTask();
b.load(false,false,true);
b[ZaModel.currentTab]="1";
b[ZaModel.currentStep]=1
}this._taskContentPanel=new ZaTaskContentView(this._container,b);
this._taskContentPanel.setObject(b)
}return this._taskContentPanel
};
ZaTaskController.prototype.addTask=function(d){var c;
var f;
if(d.type==1){c=this._workingInProcess;
f=ZaTask.A_workingInProcess
}else{c=this._runningTask;
f=ZaTask.A_runningTask
}var e=c.indexOfLike(d,d.getData);
c.getArray()._version=c.getArray()._version+1;
if(e==-1){c.add(d,undefined,true);
this._taskContentPanel._localXForm.setInstanceValue(c.getArray(),f)
}else{var b=c.get(e);
d.displayName=b.displayName;
c.replace(e,d);
this._taskContentPanel._localXForm.setInstanceValue(c.getArray(),f)
}};
ZaTaskController.prototype.removeTask=function(c){var b;
var e;
if(c.type==1){b=this._workingInProcess;
e=ZaTask.A_workingInProcess
}else{b=this._runningTask;
e=ZaTask.A_runningTask
}var d=b.indexOfLike(c,c.getData);
if(d!=-1){b.getArray()._version=b.getArray()._version+1;
b.removeAt(d);
this._taskContentPanel._localXForm.setInstanceValue(b.getArray(),e)
}};
ZaTaskController.prototype.setExpanded=function(c){var b;
if(c){b=ZaSkin.hints.rightTask.maxWidth||220
}else{b=ZaSkin.hints.rightTask.minWidth||20
}window.skin.setToolWidth(b);
window.skin._reflowApp();
this._taskContentPanel._localXForm.setInstanceValue(c,ZaTask.A2_isExpanded)
};
ZaTaskController.prototype.setInstanceValue=function(c,b){if(this._taskContentPanel&&this._taskContentPanel._localXForm){this._taskContentPanel._localXForm.setInstanceValue(c,b)
}};
ZaTaskController.prototype.getInstanceValue=function(b){if(this._taskContentPanel&&this._taskContentPanel._localXForm){return this._taskContentPanel._localXForm.getInstanceValue(b)
}return null
};
ZaTaskController.prototype.increaseNotificationCount=function(c){if(AjxUtil.isEmpty(c)){return
}if(!this._notification._msgNames[c]){this._notification._msgNames[c]=true;
var b=this.getInstanceValue(ZaTask.A2_notificationCount)||0;
this.setInstanceValue(++b,ZaTask.A2_notificationCount)
}};
ZaTaskController.prototype.decreaseNotificationCount=function(c){if(AjxUtil.isEmpty(c)){return
}if(this._notification._msgNames[c]){this._notification._msgNames[c]=false;
var b=this.getInstanceValue(ZaTask.A2_notificationCount)||0;
if(b>0){this.setInstanceValue(--b,ZaTask.A2_notificationCount)
}}}
}if(AjxPackage.define("zimbraAdmin.home.model.ZaHome")){ZaHome=function(){ZaItem.call(this,"ZaHome");
this._init()
};
ZaItem.loadMethods.ZaHome=new Array();
ZaItem.initMethods.ZaHome=new Array();
ZaHome.postLoadDataFunction=new Array();
ZaHome.prototype=new ZaItem;
ZaHome.prototype.constructor=ZaHome;
ZaHome.A2_version="version";
ZaHome.A2_account="account";
ZaHome.A2_serverNum="serverNum";
ZaHome.A2_accountNum="accountNum";
ZaHome.A2_cosNum="cosNum";
ZaHome.A2_domainNum="domainNum";
ZaHome.A2_lastCleanup="lastCleanup";
ZaHome.A2_lastCleanupTime="lastCleanupTime";
ZaHome.A2_lastLogPurge="lastLogPurge";
ZaHome.A2_lastLogPurgeTime="lastLogPurgeTime";
ZaHome.A2_DBCheckType="dbCheckType";
ZaHome.A2_DBCheckMessage="dbCheckMessage";
ZaHome.A2_serviceStatus="serviceStatus";
ZaHome.A2_serviceStatusMessage="serviceStatusMessage";
ZaHome.A2_serviceDetailedMessage="serviceDetailedMessage";
ZaHome.A2_activeSession="activeSession";
ZaHome.A2_queueLength="queueLength";
ZaHome.A2_messageCount="messageCount";
ZaHome.A2_messageVolume="messageVolume";
ZaHome.A2_showWarningPanel="showWarningPanel";
ZaHome.A2_maintenanceItemNum="maintenanceItemNum";
ZaHome.initMethod=function(){this.attrs=new Object();
this.type=ZaItem.HOME
};
ZaItem.initMethods.ZaHome.push(ZaHome.initMethod);
ZaHome.loadMethod=function(){var b=new Date();
var c=AjxDateFormat.getDateInstance(AjxDateFormat.LONG);
var d=c.format(b);
this.attrs[ZaHome.A2_account]=ZaZimbraAdmin.currentAdminAccount.attrs.mail;
this.attrs[ZaHome.A2_version]=ZaServerVersionInfo.version;
this.attrs[ZaHome.A2_accountNum]=ZaMsg.MSG_HomeLoading;
this.attrs[ZaHome.A2_cosNum]=ZaMsg.MSG_HomeLoading;
this.attrs[ZaHome.A2_domainNum]=ZaMsg.MSG_HomeLoading;
this.attrs[ZaHome.A2_serverNum]=ZaMsg.MSG_HomeLoading;
this.attrs[ZaHome.A2_activeSession]=ZaMsg.MSG_HomeLoading;
this.attrs[ZaHome.A2_lastCleanup]=true;
this.attrs[ZaHome.A2_lastCleanupTime]=d;
this.attrs[ZaHome.A2_lastLogPurge]=true;
this.attrs[ZaHome.A2_lastLogPurgeTime]=d;
this.attrs[ZaHome.A2_DBCheckType]=true;
this.attrs[ZaHome.A2_DBCheckMessage]=ZaMsg.LBL_HomeStatusOK;
this.attrs[ZaHome.A2_serviceStatusMessage]=ZaMsg.MSG_HomeLoading;
this.attrs[ZaHome.A2_serviceDetailedMessage]=ZaMsg.MSG_HomeLoading;
this.attrs[ZaHome.A2_queueLength]=ZaMsg.MSG_HomeLoading;
this.attrs[ZaHome.A2_messageCount]="120/h";
this.attrs[ZaHome.A2_messageVolume]="34MB/h";
this.attrs[ZaHome.A2_showWarningPanel]=false;
this.attrs[ZaHome.A2_maintenanceItemNum]=1
};
ZaItem.loadMethods.ZaHome.push(ZaHome.loadMethod);
ZaHome.updateMaintenanceNum=function(){var b=1;
try{var d=ZaApp.getInstance().getHomeViewController();
var e=d._view._localXForm.getItemsById("maintenance_grp");
b=e[0].items.length
}catch(c){}ZaApp.getInstance().getHomeViewController().setInstanceValue(b,ZaHome.A2_maintenanceItemNum)
};
ZaHome.postLoadDataFunction.push(ZaHome.updateMaintenanceNum);
ZaHome.accountStatCallback=function(b){ZaApp.getInstance().getHomeViewController().setInstanceValue(b[ZaItem.ACCOUNT],ZaHome.A2_accountNum)
};
ZaHome.loadAccountNum=function(){var b=new AjxCallback(ZaHome.accountStatCallback);
ZaSearch.getObjectCounts([ZaItem.ACCOUNT],b)
};
ZaHome.postLoadDataFunction.push(ZaHome.loadAccountNum);
ZaHome.loadServerServerNum=function(){var d=AjxSoapDoc.create("GetAllServersRequest",ZaZimbraAdmin.URN,null);
d.getMethod().setAttribute("applyConfig","false");
var b=new AjxCallback(this,this.updateServerNum);
var f=new Object();
f.soapDoc=d;
f.asyncMode=true;
f.callback=b;
var c={controller:ZaApp.getInstance().getCurrentController(),busyMsg:ZaMsg.BUSY_GET_ALL_SERVER};
var e=ZaRequestMgr.invoke(f,c);
return e
};
ZaHome.postLoadDataFunction.push(ZaHome.loadServerServerNum);
ZaHome.prototype.updateServerNum=function(e){var b=1;
try{var e=e.getResponse().Body.GetAllServersResponse;
var d=new ZaItemList(ZaServer);
d.loadFromJS(e);
b=d.size()
}catch(c){}ZaApp.getInstance().getHomeViewController().setInstanceValue(b,ZaHome.A2_serverNum)
};
ZaHome.loadDomainNum=function(){var c=function(d){ZaApp.getInstance().getHomeViewController().setInstanceValue(d.size(),ZaHome.A2_domainNum)
};
try{ZaApp.getInstance().getDomainList(true,{asyncMode:true,callback:c})
}catch(b){}};
ZaHome.postLoadDataFunction.push(ZaHome.loadDomainNum);
ZaHome.loadCosNum=function(){var c=function(d){ZaApp.getInstance().getHomeViewController().setInstanceValue(d.size(),ZaHome.A2_cosNum)
};
try{ZaApp.getInstance().getCosList(true,c)
}catch(b){}};
ZaHome.postLoadDataFunction.push(ZaHome.loadCosNum);
ZaHome.prototype.updateCosNum=function(c){var b=1;
ZaApp.getInstance().getHomeViewController().setInstanceValue(b,ZaHome.A2_cosNum)
};
ZaHome.loadStatusfo=function(){try{var d=ZaApp.getInstance().getGlobalConfig().attrs[ZaServer.A_zimbraLogHostname];
if(d){var e=AjxSoapDoc.create("GetServiceStatusRequest",ZaZimbraAdmin.URN,null);
var b=new AjxCallback(this,this.updateServiceStatus);
var g=new ZmCsfeCommand();
var f=new Object();
f.soapDoc=e;
f.asyncMode=true;
f.noAuthToken=true;
f.callback=b;
g.invoke(f)
}else{this.updateServiceStatus()
}}catch(c){this.attrs[ZaHome.A2_serviceStatusMessage]=ZaMsg.LBL_HOmeStatusUnknown;
this.attrs[ZaHome.A2_serviceDetailedMessage]=ZaMsg.LBL_HomeDetailedServiceUnknown
}};
ZaHome.postLoadDataFunction.push(ZaHome.loadStatusfo);
ZaHome.prototype.updateServiceStatus=function(d){var f=new ZaStatus();
if(d){d=d.getResponse().Body.GetServiceStatusResponse;
f.initFromJS(d)
}var c;
var l=ZaMsg.LBL_HOmeStatusUnknown;
var k=ZaMsg.LBL_HomeDetailedServiceUnknown;
try{var e=f.getStatusVector();
var g;
if(e.size()>0){c=true;
l=ZaMsg.LBL_HomeStatusRunning;
for(var h=0;
h<e.size();
h++){g=e.get(h);
if(g.status!=1){c=false;
l=ZaMsg.LBL_HomeStatusFailed;
k=ZaMsg.LBL_HomeDetailedServiceNotRunning;
break
}}}}catch(j){}var b=ZaApp.getInstance().getHomeViewController();
b.setInstanceValue(c,ZaHome.A2_serviceStatus);
b.setInstanceValue(l,ZaHome.A2_serviceStatusMessage);
b.setInstanceValue(k,ZaHome.A2_serviceDetailedMessage);
if(c!=true&&ZaHomeXFormView.showStatusInfo()){b.showWarningPanel()
}};
ZaHome.startLoadingSessions=function(){ZaHome.totalSession=0;
var b=new AjxCallback(this,ZaHome.startLoadingSessionsCallback);
ZaApp.getInstance().getMailServers(false,b)
};
ZaHome.postLoadDataFunction.push(ZaHome.startLoadingSessions);
ZaHome.startLoadingSessionsCallback=function(f){if(f.getResponse()&&f.getResponse().Body&&f.getResponse().Body.GetAllServersResponse){var d=new ZaItemList(ZaServer);
d.loadFromJS(f.getResponse().Body.GetAllServersResponse);
var c=d.getArray();
for(var b=0;
b<c.length;
b++){var e=c[b];
var g=new AjxCallback(this,ZaHome.loadActiveSession,e);
e.loadEffectiveRights("id",e.id,true,g)
}}};
ZaHome.totalSession=0;
ZaHome.loadActiveSession=function(c,h){if(h&&h.getResponse()&&h.getResponse().Body&&h.getResponse().Body.GetEffectiveRightsResponse&&c){c.initEffectiveRightsFromJS(h.getResponse().Body.GetEffectiveRightsResponse);
var m=["soap","admin","imap"];
for(var f=0;
f<m.length;
f++){if(ZaItem.hasRight(ZaServer.RIGHT_GET_SESSIONS,c)){var b=new AjxCallback(this,ZaHome.loadOneSessionNumer);
try{var l=AjxSoapDoc.create("GetSessionsRequest",ZaZimbraAdmin.URN,null);
var e={};
e.type=m[f];
l.getMethod().setAttribute("type",e.type);
e.fresh=1;
l.getMethod().setAttribute("refresh",e.fresh);
l.getMethod().setAttribute("limit",ZaServerSessionStatsPage.PAGE_LIMIT);
e.offset=0;
l.getMethod().setAttribute("offset",e.offset);
e.sortBy="nameAsc";
l.getMethod().setAttribute("sortBy",e.sortBy);
var g=new ZmCsfeCommand();
e.soapDoc=l;
e.asyncMode=true;
e.noAuthToken=true;
e.callback=b;
var d=g.invoke(e)
}catch(k){b.run()
}}}}};
ZaHome.loadOneSessionNumer=function(c){if(c&&c.getException&&!c.getException()){c=c.getResponse();
if(c&&c.Body&&c.Body.GetSessionsResponse){var b=c.Body.GetSessionsResponse;
ZaHome.totalSession+=b.total
}}this.updateSessionNum(ZaHome.totalSession)
};
ZaHome.prototype.updateSessionNum=function(b){ZaApp.getInstance().getHomeViewController().setInstanceValue(b,ZaHome.A2_activeSession)
};
ZaHome.startLoadingMTAS=function(){ZaHome.totalSession=0;
var f=ZaApp.getInstance().getPostQList();
if(f){var c=f.getArray();
for(var b=0;
b<c.length;
b++){var d=c[b];
var e=ZaHome.loadQueueLength.bind(this,d);
d.loadEffectiveRights("id",d.id,true,e)
}}};
ZaHome.postLoadDataFunction.push(ZaHome.startLoadingMTAS);
ZaHome.loadQueueLength=function(b,f){if(f&&f.getResponse()&&f.getResponse().Body&&f.getResponse().Body.GetEffectiveRightsResponse&&b){b.initEffectiveRightsFromJS(f.getResponse().Body.GetEffectiveRightsResponse);
if(ZaItem.hasRight(ZaServer.MANAGE_MAIL_QUEUE_RIGHT,b)){var e=false;
var k=new AjxCallback(this,ZaHome.loadOneQueueNumber);
try{var j=AjxSoapDoc.create("GetMailQueueInfoRequest",ZaZimbraAdmin.URN,null);
var g=j.set("server","");
g.setAttribute("name",b.name);
var c=new ZmCsfeCommand();
var d=new Object();
d.soapDoc=j;
d.asyncMode=true;
d.noAuthToken=true;
d.callback=k;
c.invoke(d)
}catch(h){}}}};
ZaHome.loadOneQueueNumber=function(f){if(f&&f.getException&&!f.getException()){f=f.getResponse();
var c=f.Body;
var d=0;
if(c&&c.GetMailQueueInfoResponse.server&&c.GetMailQueueInfoResponse.server[0]){var b=c.GetMailQueueInfoResponse.server[0].queue;
for(var e in b){if(b[e].n){d+=parseInt(b[e].n)
}}}}this.updateQueueLength(d)
};
ZaHome.prototype.updateQueueLength=function(b){ZaApp.getInstance().getHomeViewController().setInstanceValue(b,ZaHome.A2_queueLength)
};
ZaHome.prototype.schedulePostLoading=function(){var b=new AjxTimedAction(this,ZaHome.prototype.startPostLoading);
AjxTimedAction.scheduleAction(b,100)
};
ZaHome.prototype.startPostLoading=function(){for(var b=0;
b<ZaHome.postLoadDataFunction.length;
b++){ZaHome.postLoadDataFunction[b].call(this)
}};
ZaHome.myXModel={items:[{id:ZaHome.A2_version,type:_STRING_,ref:"attrs/"+ZaHome.A2_version},{id:ZaHome.A2_account,type:_STRING_,ref:"attrs/"+ZaHome.A2_account},{id:ZaHome.A2_domainNum,type:_STRING_,ref:"attrs/"+ZaHome.A2_domainNum},{id:ZaHome.A2_cosNum,type:_STRING_,ref:"attrs/"+ZaHome.A2_cosNum},{id:ZaHome.A2_serverNum,type:_STRING_,ref:"attrs/"+ZaHome.A2_serverNum},{id:ZaHome.A2_accountNum,type:_STRING_,ref:"attrs/"+ZaHome.A2_accountNum},{id:ZaHome.A2_lastCleanupTime,type:_STRING_,ref:"attrs/"+ZaHome.A2_lastCleanupTime},{id:ZaHome.A2_lastCleanup,type:_ENUM_,ref:"attrs/"+ZaHome.A2_lastCleanupTime,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaHome.A2_lastLogPurgeTime,type:_STRING_,ref:"attrs/"+ZaHome.A2_lastLogPurgeTime},{id:ZaHome.A2_lastLogPurge,type:_ENUM_,ref:"attrs/"+ZaHome.A2_lastLogPurge,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaHome.A2_DBCheckMessage,type:_STRING_,ref:"attrs/"+ZaHome.A2_DBCheckMessage},{id:ZaHome.A2_DBCheckType,type:_ENUM_,ref:"attrs/"+ZaHome.A2_DBCheckType,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaHome.A2_serviceStatusMessage,type:_STRING_,ref:"attrs/"+ZaHome.A2_serviceStatusMessage},{id:ZaHome.A2_serviceDetailedMessage,type:_STRING_,ref:"attrs/"+ZaHome.A2_serviceDetailedMessage},{id:ZaHome.A2_serviceStatus,type:_ENUM_,ref:"attrs/"+ZaHome.A2_serviceStatus,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaHome.A2_activeSession,type:_STRING_,ref:"attrs/"+ZaHome.A2_activeSession},{id:ZaHome.A2_queueLength,type:_STRING_,ref:"attrs/"+ZaHome.A2_queueLength},{id:ZaHome.A2_messageCount,type:_NUMBER_,ref:"attrs/"+ZaHome.A2_messageCount},{id:ZaHome.A2_messageVolume,type:_NUMBER_,ref:"attrs/"+ZaHome.A2_messageVolume},{id:ZaHome.A2_showWarningPanel,type:_ENUM_,ref:"attrs/"+ZaHome.A2_showWarningPanel,choices:ZaModel.BOOLEAN_CHOICES1},{id:ZaHome.A2_maintenanceItemNum,type:_NUMBER_,ref:"attrs/"+ZaHome.A2_maintenanceItemNum}]}
}if(AjxPackage.define("zimbraAdmin.accounts.model.ZaDataSource")){ZaDataSource=function(b){if(b){return
}ZaItem.call(this,"ZaDataSource");
this._init();
this.type=ZaItem.DATASOURCE
};
ZaDataSource.prototype=new ZaItem;
ZaDataSource.prototype.constructor=ZaDataSource;
ZaDataSource.DS_TYPE_GAL="gal";
ZaDataSource.GAL_TYPE_ZIMBRA="zimbra";
ZaDataSource.GAL_TYPE_LDAP="ldap";
ZaDataSource.A_zimbraGalLdapAttrMap="zimbraGalLdapAttrMap";
ZaDataSource.A_zimbraGalSyncLdapURL="zimbraGalSyncLdapURL";
ZaDataSource.A_zimbraGalSyncLdapSearchBase="zimbraGalSyncLdapSearchBase";
ZaDataSource.A_zimbraGalSyncLdapFilter="zimbraGalSyncLdapFilter";
ZaDataSource.A_zimbraGalSyncLdapAuthMech="zimbraGalSyncLdapAuthMech";
ZaDataSource.A_zimbraGalSyncLdapBindDn="zimbraGalSyncLdapBindDn";
ZaDataSource.A_zimbraGalSyncLdapBindPassword="zimbraGalSyncLdapBindPassword";
ZaDataSource.A_zimbraGalSyncLdapKerberos5Principal="zimbraGalSyncLdapKerberos5Principal";
ZaDataSource.A_zimbraGalSyncLdapKerberos5Keytab="zimbraGalSyncLdapKerberos5Keytab";
ZaDataSource.A_zimbraGalSyncLdapPageSize="zimbraGalSyncLdapPageSize";
ZaDataSource.A_zimbraGalSyncInternalSearchBase="zimbraGalSyncInternalSearchBase";
ZaDataSource.A_zimbraGalSyncLdapStartTlsEnabled="zimbraGalSyncLdapStartTlsEnabled";
ZaDataSource.A_zimbraGalLastSuccessfulSyncTimestamp="zimbraGalLastSuccessfulSyncTimestamp";
ZaDataSource.A_zimbraGalLastFailedSyncTimestamp="zimbraGalLastFailedSyncTimestamp";
ZaDataSource.A_zimbraGalStatus="zimbraGalStatus";
ZaDataSource.A_zimbraGalType="zimbraGalType";
ZaDataSource.A_zimbraGalSyncTimestampFormat="zimbraGalSyncTimestampFormat";
ZaDataSource.A_zimbraDataSourceType="zimbraDataSourceType";
ZaDataSource.A_zimbraDataSourcePollingInterval="zimbraDataSourcePollingInterval";
ZaDataSource.myXModel={items:[{id:ZaDataSource.A_zimbraDataSourceType,type:_STRING_,ref:"attrs/"+ZaDataSource.A_zimbraDataSourceType},{id:ZaDataSource.A_zimbraGalType,type:_STRING_,ref:"attrs/"+ZaDataSource.A_zimbraGalType},{id:ZaDataSource.A_zimbraGalSyncLdapURL,type:_LIST_,listItem:{type:_SHORT_URL_},ref:"attrs/"+ZaDataSource.A_zimbraGalSyncLdapURL},{id:ZaDataSource.A_zimbraGalSyncLdapFilter,type:_STRING_,ref:"attrs/"+ZaDataSource.A_zimbraGalSyncLdapFilter,required:true},{id:ZaDataSource.A_zimbraGalSyncInternalSearchBase,type:_STRING_,ref:"attrs/"+ZaDataSource.A_zimbraGalSyncInternalSearchBase},{id:ZaDataSource.A_zimbraGalSyncLdapBindDn,type:_ENUM_,choices:ZaModel.BOOLEAN_CHOICES,ref:"attrs/"+ZaDataSource.A_zimbraGalSyncLdapBindDn},{id:ZaDataSource.A_zimbraGalSyncLdapBindPassword,type:_STRING_,ref:"attrs/"+ZaDataSource.A_zimbraGalSyncLdapBindPassword},{id:ZaDataSource.A_zimbraGalSyncLdapStartTlsEnabled,type:_ENUM_,choices:ZaModel.BOOLEAN_CHOICES,ref:"attrs/"+ZaDataSource.A_zimbraGalSyncLdapStartTlsEnabled},{id:ZaDataSource.A_zimbraGalSyncLdapAuthMech,type:_STRING_,ref:"attrs/"+ZaDataSource.A_zimbraGalSyncLdapAuthMech},{id:ZaDataSource.A_zimbraDataSourcePollingInterval,type:_MLIFETIME_,ref:"attrs/"+ZaDataSource.A_zimbraDataSourcePollingInterval}]}
}if(AjxPackage.define("zimbraAdmin.accounts.model.ZaAccount")){ZaAccount=function(b){if(b){return
}ZaItem.call(this,"ZaAccount");
this._init();
this.type=ZaItem.ACCOUNT
};
ZaAccount.prototype=new ZaItem;
ZaAccount.prototype.constructor=ZaAccount;
ZaItem.loadMethods.ZaAccount=new Array();
ZaItem.initMethods.ZaAccount=new Array();
ZaItem.modifyMethods.ZaAccount=new Array();
ZaItem.createMethods.ZaAccount=new Array();
ZaItem.ObjectModifiers.ZaAccount=[];
ZaItem.modelExtensions.ZaAccount=new Array();
ZaItem.getRelatedMethods.ZaAccount=new Array();
ZaAccount.renameMethods=new Array();
ZaAccount.changePasswordMethods=new Array();
ZaAccount.A_name="name";
ZaAccount.A_uid="uid";
ZaAccount.A_accountName="cn";
ZaAccount.A_firstName="givenName";
ZaAccount.A_lastName="sn";
ZaAccount.A_mail="mail";
ZaAccount.A_password="password";
ZaAccount.A_description="description";
ZaAccount.A_telephoneNumber="telephoneNumber";
ZaAccount.A_homePhone="homePhone";
ZaAccount.A_mobile="mobile";
ZaAccount.A_pager="pager";
ZaAccount.A_displayname="displayName";
ZaAccount.A_country="co";
ZaAccount.A_company="company";
ZaAccount.A_title="title";
ZaAccount.A_manager="manager";
ZaAccount.A_facsimileTelephoneNumber="facsimileTelephoneNumber";
ZaAccount.A_initials="initials";
ZaAccount.A_city="l";
ZaAccount.A_orgUnit="ou";
ZaAccount.A_office="physicalDeliveryOfficeName";
ZaAccount.A_street="street";
ZaAccount.A_zip="postalCode";
ZaAccount.A_state="st";
ZaAccount.A_mailDeliveryAddress="zimbraMailDeliveryAddress";
ZaAccount.A_accountStatus="zimbraAccountStatus";
ZaAccount.A_notes="zimbraNotes";
ZaAccount.A_zimbraMailQuota="zimbraMailQuota";
ZaAccount.A_mailHost="zimbraMailHost";
ZaAccount.A_zimbraMailTransport="zimbraMailTransport";
ZaAccount.A_COSId="zimbraCOSId";
ZaAccount.A_zimbraPhoneticFirstName="zimbraPhoneticFirstName";
ZaAccount.A_zimbraPhoneticLastName="zimbraPhoneticLastName";
ZaAccount.A_zimbraPhoneticCompany="zimbraPhoneticCompany";
ZaAccount.A_zimbraIsAdminAccount="zimbraIsAdminAccount";
ZaAccount.A_zimbraIsDelegatedAdminAccount="zimbraIsDelegatedAdminAccount";
ZaAccount.A_zimbraIsExternalVirtualAccount="zimbraIsExternalVirtualAccount";
ZaAccount.A_zimbraIsSystemAccount="zimbraIsSystemAccount";
ZaAccount.A_zimbraMinPwdLength="zimbraPasswordMinLength";
ZaAccount.A_zimbraMaxPwdLength="zimbraPasswordMaxLength";
ZaAccount.A_zimbraPasswordMinUpperCaseChars="zimbraPasswordMinUpperCaseChars";
ZaAccount.A_zimbraPasswordMinLowerCaseChars="zimbraPasswordMinLowerCaseChars";
ZaAccount.A_zimbraPasswordMinPunctuationChars="zimbraPasswordMinPunctuationChars";
ZaAccount.A_zimbraPasswordMinNumericChars="zimbraPasswordMinNumericChars";
ZaAccount.A_zimbraPasswordMinDigitsOrPuncs="zimbraPasswordMinDigitsOrPuncs";
ZaAccount.A_zimbraMinPwdAge="zimbraPasswordMinAge";
ZaAccount.A_zimbraMaxPwdAge="zimbraPasswordMaxAge";
ZaAccount.A_zimbraEnforcePwdHistory="zimbraPasswordEnforceHistory";
ZaAccount.A_zimbraPasswordBlockCommonEnabled="zimbraPasswordBlockCommonEnabled";
ZaAccount.A_zimbraMailAlias="zimbraMailAlias";
ZaAccount.A_zimbraMailForwardingAddress="zimbraMailForwardingAddress";
ZaAccount.A_zimbraPasswordMustChange="zimbraPasswordMustChange";
ZaAccount.A_zimbraPasswordLocked="zimbraPasswordLocked";
ZaAccount.A_zimbraContactMaxNumEntries="zimbraContactMaxNumEntries";
ZaAccount.A_zimbraMailForwardingAddressMaxLength="zimbraMailForwardingAddressMaxLength";
ZaAccount.A_zimbraMailForwardingAddressMaxNumAddrs="zimbraMailForwardingAddressMaxNumAddrs";
ZaAccount.A_zimbraAttachmentsBlocked="zimbraAttachmentsBlocked";
ZaAccount.A_zimbraQuotaWarnPercent="zimbraQuotaWarnPercent";
ZaAccount.A_zimbraQuotaWarnInterval="zimbraQuotaWarnInterval";
ZaAccount.A_zimbraQuotaWarnMessage="zimbraQuotaWarnMessage";
ZaAccount.A_zimbraIsSystemResource="zimbraIsSystemResource";
ZaAccount.A_zimbraExcludeFromCMBSearch="zimbraExcludeFromCMBSearch";
ZaAccount.A_zimbraInterceptAddress="zimbraInterceptAddress";
ZaAccount.A_zimbraInterceptSendHeadersOnly="zimbraInterceptSendHeadersOnly";
ZaAccount.A_zimbraAdminAuthTokenLifetime="zimbraAdminAuthTokenLifetime";
ZaAccount.A_zimbraAuthTokenValidityValue="zimbraAuthTokenValidityValue";
ZaAccount.A_zimbraAuthTokenLifetime="zimbraAuthTokenLifetime";
ZaAccount.A_zimbraMailMessageLifetime="zimbraMailMessageLifetime";
ZaAccount.A_zimbraMailSpamLifetime="zimbraMailSpamLifetime";
ZaAccount.A_zimbraMailTrashLifetime="zimbraMailTrashLifetime";
ZaAccount.A_zimbraMailIdleSessionTimeout="zimbraMailIdleSessionTimeout";
ZaAccount.A_zimbraAvailableSkin="zimbraAvailableSkin";
ZaAccount.A_zimbraZimletAvailableZimlets="zimbraZimletAvailableZimlets";
ZaAccount.A_zimbraDataSourceMinPollingInterval="zimbraDataSourceMinPollingInterval";
ZaAccount.A_zimbraDataSourcePop3PollingInterval="zimbraDataSourcePop3PollingInterval";
ZaAccount.A_zimbraDataSourceImapPollingInterval="zimbraDataSourceImapPollingInterval";
ZaAccount.A_zimbraDataSourceCalendarPollingInterval="zimbraDataSourceCalendarPollingInterval";
ZaAccount.A_zimbraDataSourceRssPollingInterval="zimbraDataSourceRssPollingInterval";
ZaAccount.A_zimbraDataSourceCaldavPollingInterval="zimbraDataSourceCaldavPollingInterval";
ZaAccount.A_zimbraProxyAllowedDomains="zimbraProxyAllowedDomains";
ZaAccount.A_zimbraIsCCAccount="zimbraIsCustomerCareAccount";
ZaAccount.A_zimbraPrefAppleIcalDelegationEnabled="zimbraPrefAppleIcalDelegationEnabled";
ZaAccount.A_zimbraPrefCalendarShowPastDueReminders="zimbraPrefCalendarShowPastDueReminders";
ZaAccount.A_zimbraPrefCalendarToasterEnabled="zimbraPrefCalendarToasterEnabled";
ZaAccount.A_zimbraPrefCalendarAllowCancelEmailToSelf="zimbraPrefCalendarAllowCancelEmailToSelf";
ZaAccount.A_zimbraPrefCalendarAllowPublishMethodInvite="zimbraPrefCalendarAllowPublishMethodInvite";
ZaAccount.A_zimbraPrefCalendarAllowForwardedInvite="zimbraPrefCalendarAllowForwardedInvite";
ZaAccount.A_zimbraPrefCalendarReminderFlashTitle="zimbraPrefCalendarReminderFlashTitle";
ZaAccount.A_zimbraPrefCalendarNotifyDelegatedChanges="zimbraPrefCalendarNotifyDelegatedChanges";
ZaAccount.A_zimbraPrefCalendarFirstDayOfWeek="zimbraPrefCalendarFirstDayOfWeek";
ZaAccount.A_zimbraPrefCalendarInitialView="zimbraPrefCalendarInitialView";
ZaAccount.A_zimbraPrefCalendarForwardInvitesTo="zimbraPrefCalendarForwardInvitesTo";
ZaAccount.A_zimbraPrefClientType="zimbraPrefClientType";
ZaAccount.A_zimbraPrefTimeZoneId="zimbraPrefTimeZoneId";
ZaAccount.A_zimbraAllowAnyFromAddress="zimbraAllowAnyFromAddress";
ZaAccount.A_zimbraAllowFromAddress="zimbraAllowFromAddress";
ZaAccount.A_zimbraPrefCalendarAlwaysShowMiniCal="zimbraPrefCalendarAlwaysShowMiniCal";
ZaAccount.A_zimbraPrefCalendarUseQuickAdd="zimbraPrefCalendarUseQuickAdd";
ZaAccount.A_zimbraPrefSaveToSent="zimbraPrefSaveToSent";
ZaAccount.A_zimbraPrefMailSignature="zimbraPrefMailSignature";
ZaAccount.A_zimbraPrefMailSignatureEnabled="zimbraPrefMailSignatureEnabled";
ZaAccount.A_zimbraPrefSentMailFolder="zimbraPrefSentMailFolder";
ZaAccount.A_zimbraPrefGroupMailBy="zimbraPrefGroupMailBy";
ZaAccount.A_zimbraPrefIncludeSpamInSearch="zimbraPrefIncludeSpamInSearch";
ZaAccount.A_zimbraPrefIncludeTrashInSearch="zimbraPrefIncludeTrashInSearch";
ZaAccount.A_zimbraPrefMailInitialSearch="zimbraPrefMailInitialSearch";
ZaAccount.A_zimbraMaxMailItemsPerPage="zimbraMaxMailItemsPerPage";
ZaAccount.A_zimbraPrefMailItemsPerPage="zimbraPrefMailItemsPerPage";
ZaAccount.A_zimbraPrefMailPollingInterval="zimbraPrefMailPollingInterval";
ZaAccount.A_zimbraPrefAutoSaveDraftInterval="zimbraPrefAutoSaveDraftInterval";
ZaAccount.A_zimbraPrefMailFlashTitle="zimbraPrefMailFlashTitle";
ZaAccount.A_zimbraPrefMailFlashIcon="zimbraPrefMailFlashIcon";
ZaAccount.A_zimbraPrefMailSoundsEnabled="zimbraPrefMailSoundsEnabled";
ZaAccount.A_zimbraPrefMailToasterEnabled="zimbraPrefMailToasterEnabled";
ZaAccount.A_zimbraMailMinPollingInterval="zimbraMailMinPollingInterval";
ZaAccount.A_zimbraPrefOutOfOfficeFromDate="zimbraPrefOutOfOfficeFromDate";
ZaAccount.A_zimbraPrefOutOfOfficeUntilDate="zimbraPrefOutOfOfficeUntilDate";
ZaAccount.A_zimbraPrefOutOfOfficeReply="zimbraPrefOutOfOfficeReply";
ZaAccount.A_zimbraPrefOutOfOfficeReplyEnabled="zimbraPrefOutOfOfficeReplyEnabled";
ZaAccount.A_zimbraPrefReplyToAddress="zimbraPrefReplyToAddress";
ZaAccount.A_zimbraPrefUseKeyboardShortcuts="zimbraPrefUseKeyboardShortcuts";
ZaAccount.A_zimbraMemberOf="zimbraMemberOf";
ZaAccount.A_zimbraPrefComposeInNewWindow="zimbraPrefComposeInNewWindow";
ZaAccount.A_zimbraPrefForwardReplyInOriginalFormat="zimbraPrefForwardReplyInOriginalFormat";
ZaAccount.A_zimbraPrefAutoAddAddressEnabled="zimbraPrefAutoAddAddressEnabled";
ZaAccount.A_zimbraPrefComposeFormat="zimbraPrefComposeFormat";
ZaAccount.A_zimbraPrefMessageViewHtmlPreferred="zimbraPrefMessageViewHtmlPreferred";
ZaAccount.A_zimbraPrefNewMailNotificationAddress="zimbraPrefNewMailNotificationAddress";
ZaAccount.A_zimbraPrefNewMailNotificationEnabled="zimbraPrefNewMailNotificationEnabled";
ZaAccount.A_zimbraPrefOutOfOfficeReply="zimbraPrefOutOfOfficeReply";
ZaAccount.A_zimbraPrefShowSearchString="zimbraPrefShowSearchString";
ZaAccount.A_zimbraPrefUseTimeZoneListInCalendar="zimbraPrefUseTimeZoneListInCalendar";
ZaAccount.A_zimbraPrefImapSearchFoldersEnabled="zimbraPrefImapSearchFoldersEnabled";
ZaAccount.A_zimbraPrefMailForwardingAddress="zimbraPrefMailForwardingAddress";
ZaAccount.A_zimbraPrefMailLocalDeliveryDisabled="zimbraPrefMailLocalDeliveryDisabled";
ZaAccount.A_zimbraPrefCalendarApptReminderWarningTime="zimbraPrefCalendarApptReminderWarningTime";
ZaAccount.A_zimbraPrefSkin="zimbraPrefSkin";
ZaAccount.A_zimbraPrefGalAutoCompleteEnabled="zimbraPrefGalAutoCompleteEnabled";
ZaAccount.A_zimbraPrefWarnOnExit="zimbraPrefWarnOnExit";
ZaAccount.A_zimbraPrefShowSelectionCheckbox="zimbraPrefShowSelectionCheckbox";
ZaAccount.A_zimbraPrefHtmlEditorDefaultFontSize="zimbraPrefHtmlEditorDefaultFontSize";
ZaAccount.A_zimbraPrefHtmlEditorDefaultFontFamily="zimbraPrefHtmlEditorDefaultFontFamily";
ZaAccount.A_zimbraPrefHtmlEditorDefaultFontColor="zimbraPrefHtmlEditorDefaultFontColor";
ZaAccount.A_zimbraMailSignatureMaxLength="zimbraMailSignatureMaxLength";
ZaAccount.A_zimbraPrefDisplayExternalImages="zimbraPrefDisplayExternalImages";
ZaAccount.A_zimbraPrefOutOfOfficeCacheDuration="zimbraPrefOutOfOfficeCacheDuration";
ZaAccount.A_zimbraPrefMailDefaultCharset="zimbraPrefMailDefaultCharset";
ZaAccount.A_zimbraPrefLocale="zimbraPrefLocale";
ZaAccount.A_zimbraJunkMessagesIndexingEnabled="zimbraJunkMessagesIndexingEnabled";
ZaAccount.A_zimbraPrefMailSendReadReceipts="zimbraPrefMailSendReadReceipts";
ZaAccount.A_zimbraPrefReadReceiptsToAddress="zimbraPrefReadReceiptsToAddress";
ZaAccount.A_zimbraPrefAdminConsoleWarnOnExit="zimbraPrefAdminConsoleWarnOnExit";
ZaAccount.A_zimbraPrefMandatorySpellCheckEnabled="zimbraPrefMandatorySpellCheckEnabled";
ZaAccount.A_zimbraPrefMessageIdDedupingEnabled="zimbraPrefMessageIdDedupingEnabled";
ZaAccount.A_zimbraPrefItemsPerVirtualPage="zimbraPrefItemsPerVirtualPage";
ZaAccount.A_zimbraPrefImapEnabled="zimbraPrefImapEnabled";
ZaAccount.A_zimbraPrefPop3Enabled="zimbraPrefPop3Enabled";
ZaAccount.A_zimbraFeatureManageZimlets="zimbraFeatureManageZimlets";
ZaAccount.A_zimbraFeatureImportFolderEnabled="zimbraFeatureImportFolderEnabled";
ZaAccount.A_zimbraFeatureExportFolderEnabled="zimbraFeatureExportFolderEnabled";
ZaAccount.A_zimbraFeatureDocumentEditingEnabled="zimbraFeatureDocumentEditingEnabled";
ZaAccount.A_zimbraDumpsterEnabled="zimbraDumpsterEnabled";
ZaAccount.A_zimbraMailDumpsterLifetime="zimbraMailDumpsterLifetime";
ZaAccount.A_zimbraDumpsterUserVisibleAge="zimbraDumpsterUserVisibleAge";
ZaAccount.A_zimbraDumpsterPurgeEnabled="zimbraDumpsterPurgeEnabled";
ZaAccount.A_zimbraPrefCalendarReminderSoundsEnabled="zimbraPrefCalendarReminderSoundsEnabled";
ZaAccount.A_zimbraPrefCalendarSendInviteDeniedAutoReply="zimbraPrefCalendarSendInviteDeniedAutoReply";
ZaAccount.A_zimbraPrefCalendarAutoAddInvites="zimbraPrefCalendarAutoAddInvites";
ZaAccount.A_zimbraPrefCalendarApptVisibility="zimbraPrefCalendarApptVisibility";
ZaAccount.A_zimbraFeatureReadReceiptsEnabled="zimbraFeatureReadReceiptsEnabled";
ZaAccount.A_zimbraFeatureMailPriorityEnabled="zimbraFeatureMailPriorityEnabled";
ZaAccount.A_zimbraFeatureImapDataSourceEnabled="zimbraFeatureImapDataSourceEnabled";
ZaAccount.A_zimbraFeaturePop3DataSourceEnabled="zimbraFeaturePop3DataSourceEnabled";
ZaAccount.A_zimbraFeatureMailSendLaterEnabled="zimbraFeatureMailSendLaterEnabled";
ZaAccount.A_zimbraFeatureIdentitiesEnabled="zimbraFeatureIdentitiesEnabled";
ZaAccount.A_zimbraFeatureMailForwardingEnabled="zimbraFeatureMailForwardingEnabled";
ZaAccount.A_zimbraFeatureContactsEnabled="zimbraFeatureContactsEnabled";
ZaAccount.A_zimbraFeatureCalendarEnabled="zimbraFeatureCalendarEnabled";
ZaAccount.A_zimbraFeatureTasksEnabled="zimbraFeatureTasksEnabled";
ZaAccount.A_zimbraFeatureTaggingEnabled="zimbraFeatureTaggingEnabled";
ZaAccount.A_zimbraFeaturePeopleSearchEnabled="zimbraFeaturePeopleSearchEnabled";
ZaAccount.A_zimbraFeatureAdvancedSearchEnabled="zimbraFeatureAdvancedSearchEnabled";
ZaAccount.A_zimbraFeatureSavedSearchesEnabled="zimbraFeatureSavedSearchesEnabled";
ZaAccount.A_zimbraFeatureConversationsEnabled="zimbraFeatureConversationsEnabled";
ZaAccount.A_zimbraFeatureChangePasswordEnabled="zimbraFeatureChangePasswordEnabled";
ZaAccount.A_zimbraFeatureInitialSearchPreferenceEnabled="zimbraFeatureInitialSearchPreferenceEnabled";
ZaAccount.A_zimbraFeatureFiltersEnabled="zimbraFeatureFiltersEnabled";
ZaAccount.A_zimbraFeatureGalEnabled="zimbraFeatureGalEnabled";
ZaAccount.A_zimbraFeatureMAPIConnectorEnabled="zimbraFeatureMAPIConnectorEnabled";
ZaAccount.A_zimbraFeatureSharingEnabled="zimbraFeatureSharingEnabled";
ZaAccount.A_zimbraPublicSharingEnabled="zimbraPublicSharingEnabled";
ZaAccount.A_zimbraExternalSharingEnabled="zimbraExternalSharingEnabled";
ZaAccount.A_zimbraFeatureBriefcasesEnabled="zimbraFeatureBriefcasesEnabled";
ZaAccount.A_zimbraFeatureHtmlComposeEnabled="zimbraFeatureHtmlComposeEnabled";
ZaAccount.A_zimbraFeatureGalAutoCompleteEnabled="zimbraFeatureGalAutoCompleteEnabled";
ZaAccount.A_zimbraImapEnabled="zimbraImapEnabled";
ZaAccount.A_zimbraPop3Enabled="zimbraPop3Enabled";
ZaAccount.A_zimbraFeatureWebClientEnabled="zimbraFeatureWebClientEnabled";
ZaAccount.A_zimbraFeatureSkinChangeEnabled="zimbraFeatureSkinChangeEnabled";
ZaAccount.A_zimbraFeatureOutOfOfficeReplyEnabled="zimbraFeatureOutOfOfficeReplyEnabled";
ZaAccount.A_zimbraFeatureNewMailNotificationEnabled="zimbraFeatureNewMailNotificationEnabled";
ZaAccount.A_zimbraHideInGal="zimbraHideInGal";
ZaAccount.A_zimbraMailCanonicalAddress="zimbraMailCanonicalAddress";
ZaAccount.A_zimbraMailCatchAllAddress="zimbraMailCatchAllAddress";
ZaAccount.A_zimbraFeatureOptionsEnabled="zimbraFeatureOptionsEnabled";
ZaAccount.A_zimbraFeatureMailEnabled="zimbraFeatureMailEnabled";
ZaAccount.A_zimbraFeatureGroupCalendarEnabled="zimbraFeatureGroupCalendarEnabled";
ZaAccount.A_zimbraFeatureFlaggingEnabled="zimbraFeatureFlaggingEnabled";
ZaAccount.A_zimbraForeignPrincipal="zimbraForeignPrincipal";
ZaAccount.A_zimbraPasswordLockoutEnabled="zimbraPasswordLockoutEnabled";
ZaAccount.A_zimbraPasswordLockoutDuration="zimbraPasswordLockoutDuration";
ZaAccount.A_zimbraPasswordLockoutMaxFailures="zimbraPasswordLockoutMaxFailures";
ZaAccount.A_zimbraPasswordLockoutFailureLifetime="zimbraPasswordLockoutFailureLifetime";
ZaAccount.A_zimbraAdminConsoleUIComponents="zimbraAdminConsoleUIComponents";
ZaAccount.A_zimbraAuthLdapExternalDn="zimbraAuthLdapExternalDn";
ZaAccount.A_zimbraFreebusyExchangeUserOrg="zimbraFreebusyExchangeUserOrg";
ZaAccount.A_zimbraFeatureManageSMIMECertificateEnabled="zimbraFeatureManageSMIMECertificateEnabled";
ZaAccount.A_zimbraFeatureSMIMEEnabled="zimbraFeatureSMIMEEnabled";
ZaAccount.A_zimbraFeatureEwsEnabled="zimbraFeatureEwsEnabled";
ZaAccount.A_zimbraFeatureTouchClientEnabled="zimbraFeatureTouchClientEnabled";
ZaAccount.A_zimbraFeatureWebClientOfflineAccessEnabled="zimbraFeatureWebClientOfflineAccessEnabled";
ZaAccount.A_zimbraFeatureDistributionListFolderEnabled="zimbraFeatureDistributionListFolderEnabled";
ZaAccount.A_zimbraFeatureCalendarReminderDeviceEmailEnabled="zimbraFeatureCalendarReminderDeviceEmailEnabled";
ZaAccount.A_zimbraLastLogonTimestamp="zimbraLastLogonTimestamp";
ZaAccount.A_zimbraPasswordModifiedTime="zimbraPasswordModifiedTime";
ZaAccount.ACCOUNT_STATUS_ACTIVE="active";
ZaAccount.ACCOUNT_STATUS_MAINTENANCE="maintenance";
ZaAccount.ACCOUNT_STATUS_LOCKED="locked";
ZaAccount.ACCOUNT_STATUS_LOCKOUT="lockout";
ZaAccount.ACCOUNT_STATUS_CLOSED="closed";
ZaAccount.ACCOUNT_STATUS_PENDING="pending";
ZaAccount.A2_ldap_ds="ldap_ds";
ZaAccount.A2_zimbra_ds="zimbra_ds";
ZaAccount.A2_datasources="datasources";
ZaAccount.A2_confirmPassword="confirmPassword";
ZaAccount.A2_mbxsize="mbxSize";
ZaAccount.A2_quota="quota2";
ZaAccount.A2_autodisplayname="autodisplayname";
ZaAccount.A2_autoMailServer="automailserver";
ZaAccount.A2_autoCos="autoCos";
ZaAccount.A2_myCOS="mycos";
ZaAccount.A2_newAlias="newalias";
ZaAccount.A2_aliases="aliases";
ZaAccount.A2_forwarding="forwardings";
ZaAccount.A2_memberOf="memberOf";
ZaAccount.A2_directMemberList="directMemberList";
ZaAccount.A2_indirectMemberList="indirectMemberList";
ZaAccount.A2_nonMemberList="nonMemberList";
ZaAccount.A2_nonMemberListSelected="nonMemberListSelected";
ZaAccount.A2_indirectMemberListSelected="indirectMemberListSelected";
ZaAccount.A2_directMemberListSelected="directMemberListSelected";
ZaAccount.A2_showSameDomain="showSameDomain";
ZaAccount.A2_domainLeftAccounts="leftDomainAccounts";
ZaAccount.A2_publicMailURL="publicMailURL";
ZaAccount.A2_adminSoapURL="adminSoapURL";
ZaAccount.A2_soapURL="soapURL";
ZaAccount.MAXSEARCHRESULTS=ZaSettings.MAXSEARCHRESULTS;
ZaAccount.RESULTSPERPAGE=ZaSettings.RESULTSPERPAGE;
ZaAccount.A2_accountTypes="accountTypes";
ZaAccount.A2_currentAccountType="currentAccountType";
ZaAccount.A2_alias_selection_cache="alias_selection_cache";
ZaAccount.A2_fwdAddr_selection_cache="fwdAddr_selection_cache";
ZaAccount.A2_calFwdAddr_selection_cache="calFwdAddr_selection_cache";
ZaAccount.A2_fp_selection_cache="fp_selection_cache";
ZaAccount.A2_errorMessage="errorMessage";
ZaAccount.A2_warningMessage="warningMessage";
ZaAccount.A2_showAccountTypeMsg="showAccountTypeMsg";
ZaAccount.A2_isExternalAuth="isExternalAuth";
ZaAccount.SET_PASSWORD_RIGHT="setAccountPassword";
ZaAccount.CHANGE_PASSWORD_RIGHT="changeAccountPassword";
ZaAccount.RENAME_ACCOUNT_RIGHT="renameAccount";
ZaAccount.REINDEX_MBX_RIGHT="reindexMailbox";
ZaAccount.DELETE_ACCOUNT_RIGHT="deleteAccount";
ZaAccount.GET_MBX_DUMP_RIGHT="getMailboxDump";
ZaAccount.VIEW_MAIL_RIGHT="adminLoginAs";
ZaAccount.ADD_ACCOUNT_ALIAS_RIGHT="addAccountAlias";
ZaAccount.REMOVE_ACCOUNT_ALIAS_RIGHT="removeAccountAlias";
ZaAccount.GET_ACCOUNT_MEMBERSHIP_RIGHT="getAccountMembership";
ZaAccount.GET_MAILBOX_INFO_RIGHT="getMailboxInfo";
ZaAccount.GET_ACCOUNT_INFO_RIGHT="getAccountInfo";
ZaAccount.RIGHT_VIEW_ADMINUI_COMPONENTS="viewAccountAdminUI";
ZaAccount.RIGHT_DELETE_DL="deleteDistributionList";
ZaAccount.RIGHT_LIST_ACCOUNT="listAccount";
ZaAccount.checkValues=function(B){if(ZaItem.hasWritePermission(ZaAccount.A_name,B)&&(B.name==null||B.name.length<1)){ZaApp.getInstance().getCurrentController().popupErrorDialog(ZaMsg.ERROR_ACCOUNT_NAME_REQUIRED);
return false
}if(ZaItem.hasWritePermission(ZaAccount.A_name,B)&&(B.name.length>255)){ZaApp.getInstance().getCurrentController().popupErrorDialog(ZaMsg.ERROR_ACCOUNT_NAME_TOOLONG);
return false
}if(ZaItem.hasWritePermission(ZaAccount.A_lastName,B)&&(B.attrs[ZaAccount.A_lastName]==null||B.attrs[ZaAccount.A_lastName].length<1)){ZaApp.getInstance().getCurrentController().popupErrorDialog(ZaMsg.ERROR_ACCOUNT_LAST_NAME_REQUIRED);
return false
}if(ZaItem.hasWritePermission(ZaAccount.A_name,B)&&!AjxUtil.isValidEmailNonReg(B.name)){ZaApp.getInstance().getCurrentController().popupErrorDialog(ZaMsg.ERROR_ACCOUNT_NAME_INVALID);
return false
}var h=Number.POSITIVE_INFINITY;
var l=0;
var A=Number.POSITIVE_INFINITY;
var d=0;
if(ZaItem.hasWritePermission(ZaAccount.A_zimbraMinPwdLength,B)&&B.attrs[ZaAccount.A_zimbraMinPwdLength]!=""&&B.attrs[ZaAccount.A_zimbraMinPwdLength]!=null&&!AjxUtil.isNonNegativeLong(B.attrs[ZaAccount.A_zimbraMinPwdLength])){ZaApp.getInstance().getCurrentController().popupErrorDialog(AjxMessageFormat.format(ZaMsg.ERROR_INVALID_VALUE_FOR,[ZaMsg.MSG_zimbraMinPwdLength]));
return false
}if(ZaItem.hasWritePermission(ZaAccount.A_zimbraMaxPwdLength,B)&&B.attrs[ZaAccount.A_zimbraMaxPwdLength]!=""&&B.attrs[ZaAccount.A_zimbraMaxPwdLength]!=null&&!AjxUtil.isNonNegativeLong(B.attrs[ZaAccount.A_zimbraMaxPwdLength])){ZaApp.getInstance().getCurrentController().popupErrorDialog(AjxMessageFormat.format(ZaMsg.ERROR_INVALID_VALUE_FOR,[ZaMsg.MSG_zimbraMaxPwdLength]));
return false
}if(ZaItem.hasWritePermission(ZaAccount.A_zimbraMaxPwdLength,B)&&B.attrs[ZaAccount.A_zimbraMaxPwdLength]){B.attrs[ZaAccount.A_zimbraMaxPwdLength]=parseInt(B.attrs[ZaAccount.A_zimbraMaxPwdLength])
}if(ZaItem.hasWritePermission(ZaAccount.A_zimbraMinPwdLength,B)&&B.attrs[ZaAccount.A_zimbraMinPwdLength]){B.attrs[ZaAccount.A_zimbraMinPwdLength]=parseInt(B.attrs[ZaAccount.A_zimbraMinPwdLength])
}if(ZaItem.hasWritePermission(ZaAccount.A_zimbraMinPwdAge,B)&&B.attrs[ZaAccount.A_zimbraMinPwdAge]!=""&&B.attrs[ZaAccount.A_zimbraMinPwdAge]!=null&&!AjxUtil.isNonNegativeLong(B.attrs[ZaAccount.A_zimbraMinPwdAge])){ZaApp.getInstance().getCurrentController().popupErrorDialog(AjxMessageFormat.format(ZaMsg.ERROR_INVALID_VALUE_FOR,[ZaMsg.MSG_zimbraMinPwdAge]));
return false
}if(ZaItem.hasWritePermission(ZaAccount.A_zimbraMaxPwdAge,B)&&B.attrs[ZaAccount.A_zimbraMaxPwdAge]!=""&&B.attrs[ZaAccount.A_zimbraMaxPwdAge]!=null&&!AjxUtil.isNonNegativeLong(B.attrs[ZaAccount.A_zimbraMaxPwdAge])){ZaApp.getInstance().getCurrentController().popupErrorDialog(AjxMessageFormat.format(ZaMsg.ERROR_INVALID_VALUE_FOR,[ZaMsg.MSG_zimbraMaxPwdAge]));
return false
}if(ZaItem.hasWritePermission(ZaAccount.A_zimbraMinPwdAge,B)&&B.attrs[ZaAccount.A_zimbraMinPwdAge]){B.attrs[ZaAccount.A_zimbraMinPwdAge]=parseInt(B.attrs[ZaAccount.A_zimbraMinPwdAge])
}if(ZaItem.hasWritePermission(ZaAccount.A_zimbraMaxPwdAge,B)&&B.attrs[ZaCos.A_zimbraMaxPwdAge]){B.attrs[ZaCos.A_zimbraMaxPwdAge]=parseInt(B.attrs[ZaCos.A_zimbraMaxPwdAge])
}if(ZaItem.hasWritePermission(ZaAccount.A_zimbraMinPwdLength,B)){if(B.attrs[ZaAccount.A_zimbraMinPwdLength]!=null){l=parseInt(B.attrs[ZaAccount.A_zimbraMinPwdLength])
}else{l=parseInt(B._defaultValues.attrs[ZaAccount.A_zimbraMinPwdLength])
}}if(ZaItem.hasWritePermission(ZaAccount.A_zimbraMaxPwdLength,B)){if(B.attrs[ZaAccount.A_zimbraMaxPwdLength]!=null){h=parseInt(B.attrs[ZaAccount.A_zimbraMaxPwdLength])
}else{h=parseInt(B._defaultValues.attrs[ZaAccount.A_zimbraMaxPwdLength])
}}if(ZaItem.hasWritePermission(ZaAccount.A_zimbraMaxPwdLength,B)||ZaItem.hasWritePermission(ZaAccount.A_zimbraMinPwdLength,B)){if(h<l){ZaApp.getInstance().getCurrentController().popupErrorDialog(ZaMsg.ERROR_MAX_MIN_PWDLENGTH);
return false
}}if(ZaItem.hasWritePermission(ZaAccount.A_zimbraMaxPwdLength,B)){if(B.attrs[ZaAccount.A_zimbraMaxPwdAge]!=null){A=parseInt(B.attrs[ZaAccount.A_zimbraMaxPwdAge])
}else{A=parseInt(B._defaultValues.attrs[ZaAccount.A_zimbraMaxPwdAge])
}}if(ZaItem.hasWritePermission(ZaAccount.A_zimbraMinPwdAge,B)){if(B.attrs[ZaAccount.A_zimbraMinPwdAge]!=null){d=parseInt(B.attrs[ZaAccount.A_zimbraMinPwdAge])
}else{d=parseInt(B._defaultValues.attrs[ZaCos.A_zimbraMinPwdAge])
}}if(ZaItem.hasWritePermission(ZaAccount.A_zimbraMaxPwdLength,B)||ZaItem.hasWritePermission(ZaAccount.A_zimbraMinPwdLength,B)){if(A<d){ZaApp.getInstance().getCurrentController().popupErrorDialog(ZaMsg.ERROR_MAX_MIN_PWDAGE);
return false
}}if(ZaItem.hasAnyRight([ZaAccount.SET_PASSWORD_RIGHT,ZaAccount.CHANGE_PASSWORD_RIGHT],B)){if(!AjxUtil.isEmpty(B.attrs[ZaAccount.A_password])||!AjxUtil.isEmpty(B[ZaAccount.A2_confirmPassword])){if(B.attrs[ZaAccount.A_password]!=B[ZaAccount.A2_confirmPassword]){ZaApp.getInstance().getCurrentController().popupErrorDialog(ZaMsg.ERROR_PASSWORD_MISMATCH);
return false
}if(B.attrs[ZaAccount.A_password].length<l||AjxStringUtil.trim(B.attrs[ZaAccount.A_password]).length<l){var k;
if(l>1){k=String(ZaMsg.NAD_passMinLengthMsg_p).replace("{0}",l)
}else{k=String(ZaMsg.NAD_passMinLengthMsg_s).replace("{0}",l)
}ZaApp.getInstance().getCurrentController().popupErrorDialog(ZaMsg.ERROR_PASSWORD_TOOSHORT+"<br>"+k);
return false
}if(AjxStringUtil.trim(B.attrs[ZaAccount.A_password]).length>h){var z;
if(h>1){z=String(ZaMsg.NAD_passMaxLengthMsg_p).replace("{0}",h)
}else{z=String(ZaMsg.NAD_passMaxLengthMsg_s).replace("{0}",h)
}ZaApp.getInstance().getCurrentController().popupErrorDialog(ZaMsg.ERROR_PASSWORD_TOOLONG+"<br>"+z);
return false
}}}if(ZaItem.hasWritePermission(ZaAccount.A_zimbraMailQuota,B)){if(B.attrs[ZaAccount.A_zimbraMailQuota]!=""&&B.attrs[ZaAccount.A_zimbraMailQuota]!=null&&!AjxUtil.isNonNegativeLong(B.attrs[ZaAccount.A_zimbraMailQuota])){ZaApp.getInstance().getCurrentController().popupErrorDialog(AjxMessageFormat.format(ZaMsg.ERROR_INVALID_VALUE_FOR,[ZaMsg.MSG_zimbraMailQuota]));
return false
}}if(ZaItem.hasWritePermission(ZaAccount.A_zimbraContactMaxNumEntries,B)){if(B.attrs[ZaAccount.A_zimbraContactMaxNumEntries]!=""&&B.attrs[ZaAccount.A_zimbraContactMaxNumEntries]!=null&&!AjxUtil.isNonNegativeLong(B.attrs[ZaAccount.A_zimbraContactMaxNumEntries])){ZaApp.getInstance().getCurrentController().popupErrorDialog(AjxMessageFormat.format(ZaMsg.ERROR_INVALID_VALUE_FOR,[ZaMsg.MSG_zimbraContactMaxNumEntries]));
return false
}}if(ZaItem.hasWritePermission(ZaAccount.A_zimbraMailForwardingAddressMaxLength,B)){if(B.attrs[ZaAccount.A_zimbraMailForwardingAddressMaxLength]!=""&&B.attrs[ZaAccount.A_zimbraMailForwardingAddressMaxLength]!=null&&!AjxUtil.isNonNegativeLong(B.attrs[ZaAccount.A_zimbraMailForwardingAddressMaxLength])){ZaApp.getInstance().getCurrentController().popupErrorDialog(AjxMessageFormat.format(ZaMsg.ERROR_INVALID_VALUE_FOR,[ZaMsg.MSG_zimbraMailForwardingAddressMaxLength]));
return false
}}if(ZaItem.hasWritePermission(ZaAccount.A_zimbraDataSourceMinPollingInterval,B)){var p=B.attrs[ZaAccount.A_zimbraDataSourceMinPollingInterval];
if(!AjxUtil.isEmpty(p)&&!AjxUtil.isLifeTime(p)){ZaApp.getInstance().getCurrentController().popupErrorDialog(AjxMessageFormat.format(ZaMsg.ERROR_INVALID_VALUE_FOR,[ZaMsg.MSG_zimbraDataSourceMinPollingInterval]));
return false
}}if(ZaItem.hasWritePermission(ZaAccount.A_zimbraDataSourcePop3PollingInterval,B)){var b=B.attrs[ZaAccount.A_zimbraDataSourcePop3PollingInterval];
if(!AjxUtil.isEmpty(b)&&!AjxUtil.isLifeTime(b)){ZaApp.getInstance().getCurrentController().popupErrorDialog(AjxMessageFormat.format(ZaMsg.ERROR_INVALID_VALUE_FOR,[ZaMsg.MSG_zimbraDataSourcePop3PollingInterval]));
return false
}if(!AjxUtil.isEmpty(p)){p=B._defaultValues.attrs[ZaAccount.A_zimbraDataSourceMinPollingInterval]
}if(!AjxUtil.isEmpty(b)&&!AjxUtil.isEmpty(p)){if(ZaUtil.getLifeTimeInSeconds(b)<ZaUtil.getLifeTimeInSeconds(p)){ZaApp.getInstance().getCurrentController().popupErrorDialog(ZaMsg.tt_mailPollingIntervalError+p);
return false
}}}if(ZaItem.hasWritePermission(ZaAccount.A_zimbraDataSourceImapPollingInterval,B)){var b=B.attrs[ZaAccount.A_zimbraDataSourceImapPollingInterval];
if(!AjxUtil.isEmpty(b)&&!AjxUtil.isLifeTime(b)){ZaApp.getInstance().getCurrentController().popupErrorDialog(AjxMessageFormat.format(ZaMsg.ERROR_INVALID_VALUE_FOR,[ZaMsg.MSG_zimbraDataSourceImapPollingInterval]));
return false
}if(!AjxUtil.isEmpty(p)){p=B._defaultValues.attrs[ZaAccount.A_zimbraDataSourceMinPollingInterval]
}if(!AjxUtil.isEmpty(b)&&!AjxUtil.isEmpty(p)){if(ZaUtil.getLifeTimeInSeconds(b)<ZaUtil.getLifeTimeInSeconds(p)){ZaApp.getInstance().getCurrentController().popupErrorDialog(ZaMsg.tt_mailPollingIntervalError+p);
return false
}}}if(ZaItem.hasWritePermission(ZaAccount.A_zimbraDataSourceCalendarPollingInterval,B)){var b=B.attrs[ZaAccount.A_zimbraDataSourceCalendarPollingInterval];
if(!AjxUtil.isEmpty(b)&&!AjxUtil.isLifeTime(b)){ZaApp.getInstance().getCurrentController().popupErrorDialog(AjxMessageFormat.format(ZaMsg.ERROR_INVALID_VALUE_FOR,[ZaMsg.MSG_zimbraDataSourceCalendarPollingInterval]));
return false
}if(!AjxUtil.isEmpty(p)){p=B._defaultValues.attrs[ZaAccount.A_zimbraDataSourceMinPollingInterval]
}if(!AjxUtil.isEmpty(b)&&!AjxUtil.isEmpty(p)){if(ZaUtil.getLifeTimeInSeconds(b)<ZaUtil.getLifeTimeInSeconds(p)){ZaApp.getInstance().getCurrentController().popupErrorDialog(ZaMsg.tt_mailPollingIntervalError+p);
return false
}}}if(ZaItem.hasWritePermission(ZaAccount.A_zimbraDataSourceRssPollingInterval,B)){var b=B.attrs[ZaAccount.A_zimbraDataSourceRssPollingInterval];
if(!AjxUtil.isEmpty(b)&&!AjxUtil.isLifeTime(b)){ZaApp.getInstance().getCurrentController().popupErrorDialog(AjxMessageFormat.format(ZaMsg.ERROR_INVALID_VALUE_FOR,[ZaMsg.MSG_zimbraDataSourceRssPollingInterval]));
return false
}if(!AjxUtil.isEmpty(p)){p=B._defaultValues.attrs[ZaAccount.A_zimbraDataSourceMinPollingInterval]
}if(!AjxUtil.isEmpty(b)&&!AjxUtil.isEmpty(p)){if(ZaUtil.getLifeTimeInSeconds(b)<ZaUtil.getLifeTimeInSeconds(p)){ZaApp.getInstance().getCurrentController().popupErrorDialog(ZaMsg.tt_mailPollingIntervalError+p);
return false
}}}if(ZaItem.hasWritePermission(ZaAccount.A_zimbraDataSourceCaldavPollingInterval,B)){var b=B.attrs[ZaAccount.A_zimbraDataSourceCaldavPollingInterval];
if(!AjxUtil.isEmpty(b)&&!AjxUtil.isLifeTime(b)){ZaApp.getInstance().getCurrentController().popupErrorDialog(AjxMessageFormat.format(ZaMsg.ERROR_INVALID_VALUE_FOR,[ZaMsg.MSG_zimbraDataSourceCaldavPollingInterval]));
return false
}if(!AjxUtil.isEmpty(p)){p=B._defaultValues.attrs[ZaAccount.A_zimbraDataSourceMinPollingInterval]
}if(!AjxUtil.isEmpty(b)&&!AjxUtil.isEmpty(p)){if(ZaUtil.getLifeTimeInSeconds(b)<ZaUtil.getLifeTimeInSeconds(p)){ZaApp.getInstance().getCurrentController().popupErrorDialog(ZaMsg.tt_mailPollingIntervalError+p);
return false
}}}if(ZaItem.hasWritePermission(ZaAccount.A_zimbraPrefAutoSaveDraftInterval,B)){var x=B.attrs[ZaAccount.A_zimbraPrefAutoSaveDraftInterval];
if(x!=""&&x!=null&&!AjxUtil.isLifeTime(x)){ZaApp.getInstance().getCurrentController().popupErrorDialog(AjxMessageFormat.format(ZaMsg.ERROR_INVALID_VALUE_FOR,[ZaMsg.MSG_zimbraPrefAutoSaveDraftInterval]));
return false
}}if(ZaItem.hasWritePermission(ZaAccount.A_zimbraMailForwardingAddressMaxNumAddrs,B)){if(B.attrs[ZaAccount.A_zimbraMailForwardingAddressMaxNumAddrs]!=""&&B.attrs[ZaAccount.A_zimbraMailForwardingAddressMaxNumAddrs]!=null&&!AjxUtil.isNonNegativeLong(B.attrs[ZaAccount.A_zimbraMailForwardingAddressMaxNumAddrs])){ZaApp.getInstance().getCurrentController().popupErrorDialog(AjxMessageFormat.format(ZaMsg.ERROR_INVALID_VALUE_FOR,[ZaMsg.MSG_zimbraMailForwardingAddressMaxNumAddrs]));
return false
}}if(ZaItem.hasWritePermission(ZaAccount.A_zimbraContactMaxNumEntries,B)){if(B.attrs[ZaAccount.A_zimbraContactMaxNumEntries]){B.attrs[ZaAccount.A_zimbraContactMaxNumEntries]=parseInt(B.attrs[ZaAccount.A_zimbraContactMaxNumEntries])
}}if(ZaItem.hasWritePermission(ZaAccount.A_zimbraPasswordMinUpperCaseChars,B)){if(B.attrs[ZaAccount.A_zimbraPasswordMinUpperCaseChars]!=""&&B.attrs[ZaAccount.A_zimbraPasswordMinUpperCaseChars]!=null&&!AjxUtil.isNonNegativeLong(B.attrs[ZaAccount.A_zimbraPasswordMinUpperCaseChars])){ZaApp.getInstance().getCurrentController().popupErrorDialog(AjxMessageFormat.format(ZaMsg.ERROR_INVALID_VALUE_FOR,[ZaMsg.MSG_zimbraPasswordMinUpperCaseChars]));
return false
}}if(ZaItem.hasWritePermission(ZaAccount.A_zimbraPasswordMinUpperCaseChars,B)){if(B.attrs[ZaAccount.A_zimbraPasswordMinUpperCaseChars]){B.attrs[ZaAccount.A_zimbraPasswordMinUpperCaseChars]=parseInt(B.attrs[ZaAccount.A_zimbraPasswordMinUpperCaseChars])
}}if(ZaItem.hasWritePermission(ZaAccount.A_zimbraPasswordMinLowerCaseChars,B)){if(B.attrs[ZaAccount.A_zimbraPasswordMinLowerCaseChars]!=""&&B.attrs[ZaAccount.A_zimbraPasswordMinLowerCaseChars]!=null&&!AjxUtil.isNonNegativeLong(B.attrs[ZaAccount.A_zimbraPasswordMinLowerCaseChars])){ZaApp.getInstance().getCurrentController().popupErrorDialog(AjxMessageFormat.format(ZaMsg.ERROR_INVALID_VALUE_FOR,[ZaMsg.MSG_zimbraPasswordMinLowerCaseChars]));
return false
}}if(ZaItem.hasWritePermission(ZaAccount.A_zimbraPasswordMinLowerCaseChars,B)){if(B.attrs[ZaAccount.A_zimbraPasswordMinLowerCaseChars]){B.attrs[ZaAccount.A_zimbraPasswordMinLowerCaseChars]=parseInt(B.attrs[ZaAccount.A_zimbraPasswordMinLowerCaseChars])
}}if(ZaItem.hasWritePermission(ZaAccount.A_zimbraPasswordMinPunctuationChars,B)){if(B.attrs[ZaAccount.A_zimbraPasswordMinPunctuationChars]!=""&&B.attrs[ZaAccount.A_zimbraPasswordMinPunctuationChars]!=null&&!AjxUtil.isNonNegativeLong(B.attrs[ZaAccount.A_zimbraPasswordMinPunctuationChars])){ZaApp.getInstance().getCurrentController().popupErrorDialog(AjxMessageFormat.format(ZaMsg.ERROR_INVALID_VALUE_FOR,[ZaMsg.MSG_zimbraPasswordMinPunctuationChars]));
return false
}}if(ZaItem.hasWritePermission(ZaAccount.A_zimbraPasswordMinPunctuationChars,B)){if(B.attrs[ZaAccount.A_zimbraPasswordMinPunctuationChars]){B.attrs[ZaAccount.A_zimbraPasswordMinPunctuationChars]=parseInt(B.attrs[ZaAccount.A_zimbraPasswordMinPunctuationChars])
}}if(ZaItem.hasWritePermission(ZaAccount.A_zimbraPasswordMinNumericChars,B)){if(B.attrs[ZaAccount.A_zimbraPasswordMinNumericChars]!=""&&B.attrs[ZaAccount.A_zimbraPasswordMinNumericChars]!=null&&!AjxUtil.isNonNegativeLong(B.attrs[ZaAccount.A_zimbraPasswordMinNumericChars])){ZaApp.getInstance().getCurrentController().popupErrorDialog(AjxMessageFormat.format(ZaMsg.ERROR_INVALID_VALUE_FOR,[ZaMsg.MSG_zimbraPasswordMinNumericChars]));
return false
}}if(ZaItem.hasWritePermission(ZaAccount.A_zimbraPasswordMinNumericChars,B)){if(B.attrs[ZaAccount.A_zimbraPasswordMinNumericChars]){B.attrs[ZaAccount.A_zimbraPasswordMinNumericChars]=parseInt(B.attrs[ZaAccount.A_zimbraPasswordMinNumericChars])
}}if(ZaItem.hasWritePermission(ZaAccount.A_zimbraPasswordMinDigitsOrPuncs,B)){if(B.attrs[ZaAccount.A_zimbraPasswordMinDigitsOrPuncs]!=""&&B.attrs[ZaAccount.A_zimbraPasswordMinDigitsOrPuncs]!=null&&!AjxUtil.isNonNegativeLong(B.attrs[ZaAccount.A_zimbraPasswordMinDigitsOrPuncs])){ZaApp.getInstance().getCurrentController().popupErrorDialog(AjxMessageFormat.format(ZaMsg.ERROR_INVALID_VALUE_FOR,[ZaMsg.MSG_zimbraPasswordMinDigitsOrPuncs]));
return false
}}if(ZaItem.hasWritePermission(ZaAccount.A_zimbraPasswordMinDigitsOrPuncs,B)){if(B.attrs[ZaAccount.A_zimbraPasswordMinDigitsOrPuncs]){B.attrs[ZaAccount.A_zimbraPasswordMinDigitsOrPuncs]=parseInt(B.attrs[ZaAccount.A_zimbraPasswordMinDigitsOrPuncs])
}}if(ZaItem.hasWritePermission(ZaAccount.A_zimbraAuthTokenLifetime,B)){if(B.attrs[ZaAccount.A_zimbraAuthTokenLifetime]!=""&&B.attrs[ZaAccount.A_zimbraAuthTokenLifetime]!=null&&!AjxUtil.isLifeTime(B.attrs[ZaAccount.A_zimbraAuthTokenLifetime])){ZaApp.getInstance().getCurrentController().popupErrorDialog(AjxMessageFormat.format(ZaMsg.ERROR_INVALID_VALUE_FOR,[ZaMsg.MSG_zimbraAuthTokenLifetime]));
return false
}}if(ZaItem.hasWritePermission(ZaAccount.A_zimbraAdminAuthTokenLifetime,B)){if(B.attrs[ZaAccount.A_zimbraAdminAuthTokenLifetime]!=""&&B.attrs[ZaAccount.A_zimbraAdminAuthTokenLifetime]!=null&&!AjxUtil.isLifeTime(B.attrs[ZaAccount.A_zimbraAdminAuthTokenLifetime])){ZaApp.getInstance().getCurrentController().popupErrorDialog(AjxMessageFormat.format(ZaMsg.ERROR_INVALID_VALUE_FOR,[ZaMsg.MSG_zimbraAdminAuthTokenLifetime]));
return false
}}if(ZaItem.hasWritePermission(ZaAccount.A_zimbraPrefOutOfOfficeCacheDuration,B)){if(B.attrs[ZaAccount.A_zimbraPrefOutOfOfficeCacheDuration]!=""&&B.attrs[ZaAccount.A_zimbraPrefOutOfOfficeCacheDuration]!=null&&!AjxUtil.isLifeTime(B.attrs[ZaAccount.A_zimbraPrefOutOfOfficeCacheDuration])){ZaApp.getInstance().getCurrentController().popupErrorDialog(AjxMessageFormat.format(ZaMsg.ERROR_INVALID_VALUE_FOR,[ZaMsg.MSG_zimbraPrefOutOfOfficeCacheDuration]));
return false
}}if(ZaItem.hasWritePermission(ZaAccount.A_zimbraPrefMailPollingInterval,B)){var y=B.attrs[ZaAccount.A_zimbraPrefMailPollingInterval];
if(y!=""&&y!=null&&!AjxUtil.isLifeTime(y)){ZaApp.getInstance().getCurrentController().popupErrorDialog(AjxMessageFormat.format(ZaMsg.ERROR_INVALID_VALUE_FOR,[ZaMsg.MSG_zimbraPrefMailPollingInterval]));
return false
}}if(ZaItem.hasWritePermission(ZaAccount.A_zimbraMailMinPollingInterval,B)){var g=B.attrs[ZaAccount.A_zimbraMailMinPollingInterval];
if(g!=""&&g!=null&&!AjxUtil.isLifeTime(g)){ZaApp.getInstance().getCurrentController().popupErrorDialog(AjxMessageFormat.format(ZaMsg.ERROR_INVALID_VALUE_FOR,[ZaMsg.MSG_zimbraMailMinPollingInterval]));
return false
}}if(ZaItem.hasWritePermission(ZaAccount.A_zimbraMailMinPollingInterval,B)){if(g==""||g==null){g=B._defaultValues.attrs[ZaAccount.A_zimbraMailMinPollingInterval]
}}if(ZaItem.hasWritePermission(ZaAccount.A_zimbraPrefMailPollingInterval,B)){if(y==""||y==null){y=B._defaultValues.attrs[ZaAccount.A_zimbraPrefMailPollingInterval]
}if(y!=null&&g!=null){if(ZaUtil.getLifeTimeInSeconds(y)<ZaUtil.getLifeTimeInSeconds(g)){ZaApp.getInstance().getCurrentController().popupErrorDialog(ZaMsg.tt_mailPollingIntervalError+g);
return false
}}}if(ZaItem.hasWritePermission(ZaAccount.A_zimbraMailIdleSessionTimeout,B)){if(B.attrs[ZaAccount.A_zimbraMailIdleSessionTimeout]!=""&&B.attrs[ZaAccount.A_zimbraMailIdleSessionTimeout]!=null&&!AjxUtil.isLifeTime(B.attrs[ZaAccount.A_zimbraMailIdleSessionTimeout])){ZaApp.getInstance().getCurrentController().popupErrorDialog(AjxMessageFormat.format(ZaMsg.ERROR_INVALID_VALUE_FOR,[ZaMsg.MSG_zimbraMailIdleSessionTimeout]));
return false
}}if(ZaItem.hasWritePermission(ZaAccount.A_zimbraMailMessageLifetime,B)){if(B.attrs[ZaAccount.A_zimbraMailMessageLifetime]!=""&&B.attrs[ZaAccount.A_zimbraMailMessageLifetime]!=null){if(!AjxUtil.isLifeTime(B.attrs[ZaAccount.A_zimbraMailMessageLifetime])){ZaApp.getInstance().getCurrentController().popupErrorDialog(AjxMessageFormat.format(ZaMsg.ERROR_INVALID_VALUE_FOR,[ZaMsg.MSG_zimbraMailMessageLifetime]));
return false
}var v=parseInt(B.attrs[ZaAccount.A_zimbraMailMessageLifetime].substr(0,B.attrs[ZaAccount.A_zimbraMailMessageLifetime].length-1));
if(v>0&&v<31){ZaApp.getInstance().getCurrentController().popupErrorDialog(ZaMsg.ERROR_MESSAGE_LIFETIME_BELOW_31);
return false
}}}if(ZaItem.hasWritePermission(ZaAccount.A_zimbraMailTrashLifetime,B)){if(B.attrs[ZaAccount.A_zimbraMailTrashLifetime]!=""&&B.attrs[ZaAccount.A_zimbraMailTrashLifetime]!=null&&!AjxUtil.isLifeTime(B.attrs[ZaAccount.A_zimbraMailTrashLifetime])){ZaApp.getInstance().getCurrentController().popupErrorDialog(AjxMessageFormat.format(ZaMsg.ERROR_INVALID_VALUE_FOR,[ZaMsg.MSG_zimbraMailTrashLifetime]));
return false
}}if(ZaItem.hasWritePermission(ZaAccount.A_zimbraMailSpamLifetime,B)){if(B.attrs[ZaAccount.A_zimbraMailSpamLifetime]!=""&&B.attrs[ZaAccount.A_zimbraMailSpamLifetime]!=0&&B.attrs[ZaAccount.A_zimbraMailSpamLifetime]!=null&&!AjxUtil.isLifeTime(B.attrs[ZaAccount.A_zimbraMailSpamLifetime])){ZaApp.getInstance().getCurrentController().popupErrorDialog(AjxMessageFormat.format(ZaMsg.ERROR_INVALID_VALUE_FOR,[ZaMsg.MSG_zimbraMailSpamLifetime]));
return false
}}if(ZaItem.hasWritePermission(ZaAccount.A_zimbraPasswordLockoutFailureLifetime,B)){if(B.attrs[ZaAccount.A_zimbraPasswordLockoutFailureLifetime]!=""&&B.attrs[ZaAccount.A_zimbraPasswordLockoutFailureLifetime]!=null&&!AjxUtil.isLifeTime(B.attrs[ZaAccount.A_zimbraPasswordLockoutFailureLifetime])){ZaApp.getInstance().getCurrentController().popupErrorDialog(AjxMessageFormat.format(ZaMsg.ERROR_INVALID_VALUE_FOR,[ZaMsg.MSG_zimbraPasswordLockoutFailureLifetime]));
return false
}}if(ZaItem.hasWritePermission(ZaAccount.A_zimbraPasswordLockoutDuration,B)){if(B.attrs[ZaAccount.A_zimbraPasswordLockoutDuration]!=""&&B.attrs[ZaAccount.A_zimbraPasswordLockoutDuration]!=null&&B.attrs[ZaAccount.A_zimbraPasswordLockoutDuration]!=0&&!AjxUtil.isLifeTime(B.attrs[ZaAccount.A_zimbraPasswordLockoutDuration])){ZaApp.getInstance().getCurrentController().popupErrorDialog(AjxMessageFormat.format(ZaMsg.ERROR_INVALID_VALUE_FOR,[ZaMsg.MSG_zimbraPasswordLockoutDuration]));
return false
}}if(ZaItem.hasWritePermission(ZaAccount.A_zimbraEnforcePwdHistory,B)){if(B.attrs[ZaAccount.A__zimbraEnforcePwdHistory]!=""&&B.attrs[ZaAccount.A_zimbraEnforcePwdHistory]!=null&&!AjxUtil.isNonNegativeLong(B.attrs[ZaAccount.A_zimbraEnforcePwdHistory])){ZaApp.getInstance().getCurrentController().popupErrorDialog(AjxMessageFormat.format(ZaMsg.ERROR_INVALID_VALUE_FOR,[ZaMsg.MSG_zimbraEnforcePwdHistory]));
return false
}if(B.attrs[ZaAccount.A_zimbraEnforcePwdHistory]){B.attrs[ZaAccount.A_zimbraEnforcePwdHistory]=parseInt(B.attrs[ZaAccount.A_zimbraEnforcePwdHistory])
}}if(ZaItem.hasWritePermission(ZaAccount.A_zimbraMaxMailItemsPerPage,B)){var n;
if(B.attrs[ZaAccount.A_zimbraMaxMailItemsPerPage]!=null){n=parseInt(B.attrs[ZaAccount.A_zimbraMaxMailItemsPerPage])
}else{n=parseInt(B._defaultValues.attrs[ZaAccount.A_zimbraMaxMailItemsPerPage])
}}if(ZaItem.hasWritePermission(ZaAccount.A_zimbraPrefMailItemsPerPage,B)){var u;
if(B.attrs[ZaAccount.A_zimbraPrefMailItemsPerPage]!=null){u=parseInt(B.attrs[ZaAccount.A_zimbraPrefMailItemsPerPage])
}else{u=parseInt(B._defaultValues.attrs[ZaAccount.A_zimbraPrefMailItemsPerPage])
}}if(ZaItem.hasWritePermission(ZaAccount.A_zimbraPrefMailItemsPerPage,B)&&ZaItem.hasWritePermission(ZaAccount.A_zimbraMaxMailItemsPerPage,B)){if(n<u){ZaApp.getInstance().getCurrentController().popupErrorDialog(ZaMsg.ERROR_ITEMS_PER_PAGE_OVER_MAX);
return false
}}if(!ZaZimbraAdmin.isGlobalAdmin()&&ZaItem.hasWritePermission(ZaAccount.A_zimbraDomainAdminMaxMailQuota,B)&&(B.attrs[ZaAccount.A_zimbraMailQuota]!=null)){var f=B._defaultValues.attrs[ZaAccount.A_zimbraDomainAdminMaxMailQuota];
var w=B.attrs[ZaAccount.A_zimbraMailQuota];
if(w>f){ZaApp.getInstance().getCurrentController().popupErrorDialog(ZaMsg.ERROR_MAX_ACCOUNT_QUOTA);
return false
}}var m=[ZaAccount.A_zimbraMailForwardingAddress,ZaAccount.A_zimbraPrefMailForwardingAddress,ZaAccount.A_zimbraPrefCalendarForwardInvitesTo];
var e=AjxUtil.reduce(m.concat([ZaAccount.A_zimbraPrefMailLocalDeliveryDisabled]),function(D,C){return D||ZaItem.hasWritePermission(C,B)
});
if(e&&B.attrs[ZaAccount.A_zimbraPrefMailLocalDeliveryDisabled]=="TRUE"){var q=AjxUtil.reduce(m,function(D,C){return D||(B.attrs[C]&&B.attrs[C].length>0)
});
if(!q){ZaApp.getInstance().getCurrentController().popupErrorDialog(ZaMsg.ERROR_missing_zimbraPrefMailForwardingAddress);
return false
}}if(ZaItem.hasWritePermission(ZaAccount.A_zimbraPasswordLockoutMaxFailures,B)&&B.attrs[ZaAccount.A_zimbraPasswordLockoutMaxFailures]&&!AjxUtil.isInt(B.attrs[ZaAccount.A_zimbraPasswordLockoutMaxFailures])){ZaApp.getInstance().getCurrentController().popupErrorDialog(AjxMessageFormat.format(ZaMsg.ERROR_VALUE_NOT_INTEGER,ZaAccount.A_zimbraPasswordLockoutMaxFailures));
return false
}if(ZaSettings.ENABLED_UI_COMPONENTS[ZaSettings.ACCOUNTS_SKIN_TAB]||ZaSettings.ENABLED_UI_COMPONENTS[ZaSettings.CARTE_BLANCHE_UI]){var r=B.attrs[ZaAccount.A_zimbraPrefSkin]?B.attrs[ZaAccount.A_zimbraPrefSkin]:B._defaultValues.attrs[ZaCos.A_zimbraPrefSkin];
var j=B.attrs[ZaAccount.A_zimbraAvailableSkin]?B.attrs[ZaAccount.A_zimbraAvailableSkin]:B._defaultValues.attrs[ZaCos.A_zimbraAvailableSkin];
if(r&&j){var c=j instanceof Array?j:[j];
var s=c.length;
var o=false;
for(var t=0;
t<s;
t++){if(c[t]==r){o=true;
break
}}if(!o){ZaApp.getInstance().getCurrentController().popupErrorDialog(AjxMessageFormat.format(ZaMsg.NAD_WarningCurrentThemeNotAvail,[r,r]));
return false
}}}if(!ZaAccount.isAccountTypeSet(B)){ZaApp.getInstance().getCurrentController().popupErrorDialog(ZaMsg.ERROR_ACCOUNT_TYPE_NOT_SET);
return false
}return true
};
ZaAccount.createMethod=function(g,k){g.attrs[ZaAccount.A_mail]=g.name.replace(/[\s]+/g,"");
var h;
var p=AjxSoapDoc.create("CreateAccountRequest",ZaZimbraAdmin.URN,null);
p.set(ZaAccount.A_name,g.attrs[ZaAccount.A_mail]);
if(g.attrs[ZaAccount.A_password]&&g.attrs[ZaAccount.A_password].length>0){p.set(ZaAccount.A_password,g.attrs[ZaAccount.A_password])
}if(g[ZaAccount.A2_autoMailServer]=="TRUE"){g.attrs[ZaAccount.A_mailHost]=null
}if(g[ZaAccount.A2_autoCos]=="TRUE"){g.attrs[ZaAccount.A_COSId]=null
}for(var n in g.attrs){if(n==ZaAccount.A_password||n==ZaAccount.A_zimbraMailAlias||n==ZaItem.A_objectClass||n==ZaAccount.A2_mbxsize||n==ZaAccount.A_mail){continue
}if(g.attrs[n] instanceof Array){var c=g.attrs[n].length;
if(c){for(var e=0;
e<c;
e++){if(typeof(g.attrs[n][e])=="object"){var l=p.set("a",g.attrs[n][e].toString());
l.setAttribute("n",n)
}else{var l=p.set("a",g.attrs[n][e]);
l.setAttribute("n",n)
}}}}else{if(g.attrs[n] instanceof AjxVector){var q=g.attrs[n].getArray();
var c=q.length;
if(c){for(var e=0;
e<c;
e++){if(q[e]!=null){if(typeof(q[e])=="object"){var l=p.set("a",q[e].toString());
l.setAttribute("n",n)
}else{var l=p.set("a",q[e]);
l.setAttribute("n",n)
}}}}}else{if(g.attrs[n]!=null){if(typeof(g.attrs[n])=="object"){var l=p.set("a",g.attrs[n].toString());
l.setAttribute("n",n)
}else{var l=p.set("a",g.attrs[n]);
l.setAttribute("n",n)
}}}}}try{var f=new Object();
f.soapDoc=p;
var b={};
b.controller=ZaApp.getInstance().getCurrentController();
b.busyMsg=ZaMsg.BUSY_CREATE_ACCOUNTS;
h=ZaRequestMgr.invoke(f,b).Body.CreateAccountResponse
}catch(m){throw m;
return null
}k.initFromJS(h.account[0]);
if(g.attrs[ZaAccount.A_zimbraMailAlias].length){var o=g.attrs[ZaAccount.A_zimbraMailAlias].length;
var j="";
var d=0;
try{for(var e=0;
e<o;
e++){try{if(g.attrs[ZaAccount.A_zimbraMailAlias][e]!=""){k.addAlias(g.attrs[ZaAccount.A_zimbraMailAlias][e]);
k.attrs[ZaAccount.A_zimbraMailAlias].push(g.attrs[ZaAccount.A_zimbraMailAlias][e])
}}catch(m){if(m.code==ZmCsfeException.ACCT_EXISTS){j+=("<br>"+g.attrs[ZaAccount.A_zimbraMailAlias][e]);
d++
}else{throw (m)
}}}if(d==1){ZaApp.getInstance().getCurrentController().popupErrorDialog(AjxMessageFormat.format(ZaMsg.WARNING_ALIAS_EXISTS,[j]))
}else{if(d>1){ZaApp.getInstance().getCurrentController().popupErrorDialog(AjxMessageFormat.format(ZaMsg.WARNING_ALIASES_EXIST,[j]))
}}}catch(m){ZaApp.getInstance().getCurrentController().popupErrorDialog(ZaMsg.FAILED_ADD_ALIASES,m);
return null
}}};
ZaItem.createMethods.ZaAccount.push(ZaAccount.createMethod);
ZaAccount.modifyMethod=function(l){var k=false;
var j=AjxSoapDoc.create("ModifyAccountRequest",ZaZimbraAdmin.URN,null);
j.set("id",this.id);
for(var h in l){k=true;
if(l[h] instanceof Array){var c=l[h].length;
if(c){var e=false;
for(var d=0;
d<c;
d++){var g=null;
if(l[h][d] instanceof String||AjxUtil.isString(l[h][d])){if(AjxUtil.isEmpty(l[h][d])){continue
}else{e=true
}var g=j.set("a",l[h][d].toString())
}else{if(l[h][d] instanceof Object){var g=j.set("a",l[h][d].toString());
e=true
}else{var g=j.set("a",l[h][d]);
e=true
}}if(g){g.setAttribute("n",h)
}}if(!e){var g=j.set("a","");
g.setAttribute("n",h)
}}else{var g=j.set("a","");
g.setAttribute("n",h)
}}else{var g=j.set("a",l[h]);
g.setAttribute("n",h)
}}if(!k){return
}var f=new Object();
f.soapDoc=j;
var b={controller:ZaApp.getInstance().getCurrentController(),busyMsg:ZaMsg.BUSY_MODIFY_ACCOUNT};
resp=ZaRequestMgr.invoke(f,b).Body.ModifyAccountResponse;
this.initFromJS(resp.account[0]);
this[ZaAccount.A2_confirmPassword]=null;
this._toolTip=null;
return
};
ZaItem.modifyMethods.ZaAccount.push(ZaAccount.modifyMethod);
ZaAccount.getViewMailLink=function(c){var f={authToken:"",lifetime:0};
var e=AjxSoapDoc.create("DelegateAuthRequest",ZaZimbraAdmin.URN,null);
var b=e.set("account",c);
b.setAttribute("by","id");
var h=new Object();
h.soapDoc=e;
var d={controller:ZaApp.getInstance().getCurrentController()};
var g=ZaRequestMgr.invoke(h,d).Body.DelegateAuthResponse;
f.authToken=g.authToken[0]._content;
f.lifetime=g.lifetime;
return f
};
ZaReindexMailbox=function(){this.status=null;
this.numSucceeded=0;
this.numFailed=0;
this.numRemaining=0;
this.numTotal=100;
this.numDone=0;
this.progressMsg=ZaMsg.NAD_ACC_ReindexingNotRunning;
this.mbxId=null;
this.resultMsg=null;
this.errorDetail=null;
this.pollInterval=500
};
ZaReindexMailbox.A_status="status";
ZaReindexMailbox.A_numSucceeded="numSucceeded";
ZaReindexMailbox.A_numFailed="numFailed";
ZaReindexMailbox.A_numRemaining="numRemaining";
ZaReindexMailbox.A_mbxId="mbxId";
ZaReindexMailbox.A_numTotal="numTotal";
ZaReindexMailbox.A_numDone="numDone";
ZaReindexMailbox.A_pollInterval="pollInterval";
ZaReindexMailbox.A_progressMsg="progressMsg";
ZaReindexMailbox.A_errorDetail="errorDetail";
ZaReindexMailbox.A_resultMsg="resultMsg";
ZaReindexMailbox.myXModel={items:[{id:ZaReindexMailbox.A_status,ref:ZaReindexMailbox.A_status,type:_STRING_},{id:ZaReindexMailbox.A_numSucceeded,ref:ZaReindexMailbox.A_numSucceeded,type:_NUMBER_},{id:ZaReindexMailbox.A_numFailed,ref:ZaReindexMailbox.A_numFailed,type:_NUMBER_},{id:ZaReindexMailbox.A_numRemaining,ref:ZaReindexMailbox.A_numRemaining,type:_NUMBER_},{id:ZaReindexMailbox.A_mbxId,ref:ZaReindexMailbox.A_mbxId,type:_STRING_},{id:ZaReindexMailbox.A_numTotal,ref:ZaReindexMailbox.A_numTotal,type:_NUMBER_},{id:ZaReindexMailbox.A_numDone,ref:ZaReindexMailbox.A_numDone,type:_NUMBER_},{id:ZaReindexMailbox.A_pollInterval,ref:ZaReindexMailbox.A_pollInterval,type:_STRING_},{id:ZaReindexMailbox.A_progressMsg,ref:ZaReindexMailbox.A_progressMsg,type:_STRING_},{id:ZaReindexMailbox.A_resultMsg,ref:ZaReindexMailbox.A_pollInterval,type:_STRING_},{id:ZaReindexMailbox.A_errorDetail,ref:ZaReindexMailbox.A_pollInterval,type:_STRING_}]};
ZaAccount.prototype.remove=function(e){var b;
if(this[ZaAccount.A2_ldap_ds]||this[ZaAccount.A2_zimbra_ds]){b=AjxSoapDoc.create("DeleteGalSyncAccountRequest",ZaZimbraAdmin.URN,null);
var c=b.set("account",this.id);
c.setAttribute("by","id")
}else{b=AjxSoapDoc.create("DeleteAccountRequest",ZaZimbraAdmin.URN,null);
b.set("id",this.id)
}this.deleteCommand=new ZmCsfeCommand();
var d=new Object();
d.soapDoc=b;
d.noAuthToken=true;
if(e){d.asyncMode=true;
d.callback=e
}this.deleteCommand.invoke(d)
};
ZaAccount.getReindexStatus=function(c,j){var e=AjxSoapDoc.create("ReIndexRequest",ZaZimbraAdmin.URN,null);
e.getMethod().setAttribute("action","status");
var b=e.set("mbox",null);
b.setAttribute("id",c);
var h=null;
try{var g=new ZmCsfeCommand();
var f=new Object();
f.soapDoc=e;
f.noAuthToken=true;
if(j){f.asyncMode=true;
f.callback=j;
g.invoke(f)
}else{h=g.invoke(f)
}}catch(d){if(d.code=="service.NOT_IN_PROGRESS"){h=null
}else{throw (d)
}}return h
};
ZaAccount.startReindexMailbox=function(c,j){var e=AjxSoapDoc.create("ReIndexRequest",ZaZimbraAdmin.URN,null);
e.getMethod().setAttribute("action","start");
var b=e.set("mbox",null);
b.setAttribute("id",c);
var h;
try{var g=new ZmCsfeCommand();
var f=new Object();
f.soapDoc=e;
f.noAuthToken=true;
if(j){f.asyncMode=true;
f.callback=j;
g.invoke(f)
}else{h=g.invoke(f)
}}catch(d){h=d
}return h
};
ZaAccount.abortReindexMailbox=function(c,j){var e=AjxSoapDoc.create("ReIndexRequest",ZaZimbraAdmin.URN,null);
e.getMethod().setAttribute("action","cancel");
var b=e.set("mbox",null);
b.setAttribute("id",c);
var h;
try{var g=new ZmCsfeCommand();
var f=new Object();
f.soapDoc=e;
f.noAuthToken=true;
if(j){f.asyncMode=true;
f.callback=j;
g.invoke(f)
}else{h=g.invoke(f)
}}catch(d){h=d
}return h
};
ZaAccount.parseReindexResponse=function(c,k,d){if(!c){return
}if(c.isException&&c.isException()){var g=c.getException().code;
if(g&&g=="service.NOT_IN_PROGRESS"){d.setInstanceValue("",ZaReindexMailbox.A_errorDetail);
d.setInstanceValue("",ZaReindexMailbox.A_resultMsg);
d.setInstanceValue(ZaMsg.NAD_ACC_ReindexingNotRunning,ZaReindexMailbox.A_progressMsg);
if(k.numRemaining>0||k.status=="started"){d.setInstanceValue(k.numTotal,ZaReindexMailbox.A_numDone);
d.setInstanceValue(ZaMsg.NAD_ACC_ReindexingComplete,ZaReindexMailbox.A_progressMsg);
d.setInstanceValue("complete",ZaReindexMailbox.A_status)
}else{d.setInstanceValue(null,ZaReindexMailbox.A_status)
}}else{if(g&&g==ZmCsfeException.EMPTY_RESPONSE){d.setInstanceValue(ZaMsg.ERROR_RECEIVED_EMPTY_RESPONSE,ZaReindexMailbox.A_resultMsg);
d.setInstanceValue(null,ZaReindexMailbox.A_errorDetail);
d.setInstanceValue("error",ZaReindexMailbox.A_status)
}else{var h=c.getException().detail;
var e=c.getException().msg;
var j=[];
if(h){j.push(h)
}if(e){j.push(e)
}d.setInstanceValue(AjxMessageFormat.format(ZaMsg.FAILED_REINDEX,[g]),ZaReindexMailbox.A_resultMsg);
d.setInstanceValue(j.join("\n"),ZaReindexMailbox.A_errorDetail);
d.setInstanceValue("error",ZaReindexMailbox.A_status)
}}}else{var f;
if(c.getResponse){f=c.getResponse()
}else{if(c.Body.ReIndexResponse){f=c
}}if(f&&f.Body.ReIndexResponse){if(f.Body.ReIndexResponse.status=="idle"){d.setInstanceValue("",ZaReindexMailbox.A_errorDetail);
d.setInstanceValue("",ZaReindexMailbox.A_resultMsg);
d.setInstanceValue(ZaMsg.NAD_ACC_ReindexingNotRunning,ZaReindexMailbox.A_progressMsg);
if(k.numRemaining>0||k.status=="started"){d.setInstanceValue(k.numTotal,ZaReindexMailbox.A_numDone);
d.setInstanceValue(ZaMsg.NAD_ACC_ReindexingComplete,ZaReindexMailbox.A_progressMsg);
d.setInstanceValue("complete",ZaReindexMailbox.A_status)
}else{d.setInstanceValue(null,ZaReindexMailbox.A_status)
}d.setInstanceValue(f.Body.ReIndexResponse.status,ZaReindexMailbox.A_status)
}else{d.setInstanceValue(f.Body.ReIndexResponse.status,ZaReindexMailbox.A_status);
if(f.Body.ReIndexResponse.status=="started"){d.setInstanceValue(0,ZaReindexMailbox.A_numDone);
d.setInstanceValue(ZaMsg.NAD_ACC_ReindexingStarted,ZaReindexMailbox.A_progressMsg)
}if(f.Body.ReIndexResponse.progress&&f.Body.ReIndexResponse.progress[0]){var b=f.Body.ReIndexResponse.progress[0];
d.setInstanceValue(b.numFailed,ZaReindexMailbox.A_numFailed);
d.setInstanceValue(b.numSucceeded,ZaReindexMailbox.A_numSucceeded);
d.setInstanceValue(b.numRemaining,ZaReindexMailbox.A_numRemaining);
d.setInstanceValue(b.numSucceeded+b.numFailed+b.numRemaining,ZaReindexMailbox.A_numTotal);
d.setInstanceValue(b.numFailed+b.numSucceeded,ZaReindexMailbox.A_numDone);
d.setInstanceValue(AjxMessageFormat.format(ZaMsg.NAD_ACC_ReindexingStatus,[b.numSucceeded,b.numRemaining,b.numFailed]),ZaReindexMailbox.A_progressMsg);
if(k.status=="cancelled"){d.setInstanceValue((k.progressMsg+"<br>"+ZaMsg.NAD_ACC_ReindexingCancelled),ZaReindexMailbox.A_progressMsg)
}if(k.numRemaining==0){d.setInstanceValue(k.numTotal,ZaReindexMailbox.A_numDone)
}}}}}};
ZaAccount.prototype.initFromDom=function(f){this.name=f.getAttribute("name");
this.id=f.getAttribute("id");
this.attrs[ZaAccount.A_zimbraMailAlias]=new Array();
this.attrs[ZaAccount.A_zimbraMailForwardingAddress]=new Array();
this.attrs[ZaAccount.A_zimbraPrefCalendarForwardInvitesTo]=new Array();
this.attrs[ZaAccount.A_zimbraAllowFromAddress]=new Array();
this.attrs[ZaAccount.A_zimbraForeignPrincipal]=[];
var e=f.childNodes;
for(var d=0;
d<e.length;
d++){child=e[d];
if(child.nodeName!="a"){continue
}var b=child.getAttribute("n");
if(child.firstChild!=null){var g=child.firstChild.nodeValue;
if(b in this.attrs){var c=this.attrs[b];
if((typeof c)=="object"){c.push(g)
}else{this.attrs[b]=[c,g]
}}else{this.attrs[b]=g
}}}};
ZaAccount.prototype.initFromJS=function(d){if(!d){return
}this.attrs=new Object();
this.attrs[ZaAccount.A_zimbraMailAlias]=new Array();
this.name=d.name;
this.id=d.id;
this.isExternal=d.isExternal;
var b=d.a.length;
this.attrs[ZaAccount.A_zimbraMailAlias]=new Array();
this.attrs[ZaAccount.A_zimbraMailForwardingAddress]=new Array();
this.attrs[ZaAccount.A_zimbraPrefCalendarForwardInvitesTo]=new Array();
this.attrs[ZaAccount.A_zimbraAllowFromAddress]=new Array();
this.attrs[ZaAccount.A_zimbraForeignPrincipal]=[];
for(var c=0;
c<b;
c++){if(!this.attrs[[d.a[c].n]]){this.attrs[[d.a[c].n]]=d.a[c]._content
}else{if(!(this.attrs[[d.a[c].n]] instanceof Array)){this.attrs[[d.a[c].n]]=[this.attrs[[d.a[c].n]]]
}this.attrs[[d.a[c].n]].push(d.a[c]._content)
}}if(!(this.attrs[ZaAccount.A_description] instanceof Array)){this.attrs[ZaAccount.A_description]=[this.attrs[ZaAccount.A_description]]
}if(!this.attrs[ZaItem.A_zimbraId]&&this.id){this.attrs[ZaItem.A_zimbraId]=this.id
}if(this.attrs[ZaAccount.A_zimbraProxyAllowedDomains]&&(!(this.attrs[ZaAccount.A_zimbraProxyAllowedDomains] instanceof Array))){this.attrs[ZaAccount.A_zimbraProxyAllowedDomains]=[this.attrs[ZaAccount.A_zimbraProxyAllowedDomains]]
}};
ZaAccount.prototype.getToolTip=function(){if(!this._toolTip){var c=new Array(20);
var b=0;
c[b++]="<table cellpadding='0' cellspacing='0' border='0'>";
c[b++]="<tr valign='center'><td colspan='2' align='left'>";
c[b++]="<div style='border-bottom: 1px solid black; white-space:nowrap; overflow:hidden;width:350' >";
c[b++]="<table cellpadding='0' cellspacing='0' border='0' style='width:100%;'>";
c[b++]="<tr valign='center'>";
c[b++]="<td><b>"+AjxStringUtil.htmlEncode(this.name)+"</b></td>";
c[b++]="<td align='right'>";
if(this.attrs[ZaAccount.A_zimbraIsAdminAccount]=="TRUE"){c[b++]=AjxImg.getImageHtml("AdminUser")
}else{if(this.attrs[ZaAccount.A_zimbraIsDelegatedAdminAccount]=="TRUE"){c[b++]=AjxImg.getImageHtml("DomainAdminUser")
}else{if(this.attrs[ZaAccount.A_zimbraIsSystemResource]=="TRUE"){c[b++]=AjxImg.getImageHtml("SystemResource")
}else{c[b++]=AjxImg.getImageHtml("Account")
}}}c[b++]="</td>";
c[b++]="</table></div></td></tr>";
c[b++]="<tr></tr>";
if(this.isExternal){b=this._addRow(ZaMsg.NAD_MailServer,this.attrs[ZaAccount.A_zimbraMailTransport],c,b);
c[b++]="<tr valign='top'><td align='left' style='padding-right: 5px;' colspan='2'><b>";
c[b++]=AjxStringUtil.htmlEncode(ZaMsg.externalAccountNote);
c[b++]="</b></td>";
c[b++]="</td></tr>"
}else{b=this._addRow(ZaMsg.NAD_MailServer,this.attrs[ZaAccount.A_mailHost],c,b)
}b=this._addAttrRow(ZaItem.A_zimbraId,c,b);
c[b++]="</table>";
this._toolTip=c.join("")
}return this._toolTip
};
ZaAccount.loadMethod=function(t,B){var A,y,n;
A=AjxSoapDoc.create("BatchRequest","urn:zimbra");
A.setMethodAttribute("onerror","continue");
if(t=="id"){this.id=B;
this.attrs[ZaItem.A_zimbraId]=B;
var x=A.set("GetAccountRequest",null,null,ZaZimbraAdmin.URN);
x.setAttribute("applyCos","0");
if(!this.getAttrs.all&&!AjxUtil.isEmpty(this.attrsToGet)){x.setAttribute("attrs",this.attrsToGet.join(","))
}var p=A.set("account",B,x);
p.setAttribute("by",t)
}else{var x=AjxSoapDoc.create("GetAccountRequest",ZaZimbraAdmin.URN,null);
x.getMethod().setAttribute("applyCos","0");
if(!this.getAttrs.all&&!AjxUtil.isEmpty(this.attrsToGet)){x.getMethod().setAttribute("attrs",this.attrsToGet.join(","))
}var p=x.set("account",B);
p.setAttribute("by",t);
var y=new Object();
y.soapDoc=x;
var e={controller:ZaApp.getInstance().getCurrentController()};
n=ZaRequestMgr.invoke(y,e).Body.GetAccountResponse;
this.attrs=new Object();
this.initFromJS(n.account[0])
}if(!AjxUtil.isEmpty(this.attrs[ZaAccount.A_mailHost])&&ZaItem.hasRight(ZaAccount.GET_MAILBOX_INFO_RIGHT,this)&&this.attrs[ZaAccount.A_zimbraIsExternalVirtualAccount]!="TRUE"){var o=A.set("GetMailboxRequest",null,null,ZaZimbraAdmin.URN);
var q=A.set("mbox","",o);
q.setAttribute("id",this.attrs[ZaItem.A_zimbraId])
}this[ZaAccount.A2_confirmPassword]=null;
if(ZaItem.hasRight(ZaAccount.GET_ACCOUNT_MEMBERSHIP_RIGHT,this)){var g=AjxSoapDoc.create("GetAccountMembershipRequest",ZaZimbraAdmin.URN);
var d=g.set("account",this.attrs[ZaItem.A_zimbraId]);
d.setAttribute("by","id");
var y={soapDoc:g,asyncMode:true,callback:this._handleAccountMembershipResponse.bind(this)};
var e={controller:ZaApp.getInstance().getCurrentController()};
ZaRequestMgr.invoke(y,e)
}if(ZaItem.hasRight(ZaAccount.GET_ACCOUNT_INFO_RIGHT,this)){var m=A.set("GetAccountInfoRequest",null,null,ZaZimbraAdmin.URN);
var d=A.set("account",this.attrs[ZaItem.A_zimbraId],m);
d.setAttribute("by","id")
}if(ZaItem.hasRight(ZaAccount.VIEW_MAIL_RIGHT,this)){var v=A.set("GetDataSourcesRequest",null,null,ZaZimbraAdmin.URN);
var k=A.set("id",this.attrs[ZaItem.A_zimbraId],v)
}var f=false;
var w;
if(t=="id"||ZaItem.hasRight(ZaAccount.GET_ACCOUNT_INFO_RIGHT,this)||ZaItem.hasRight(ZaAccount.GET_ACCOUNT_MEMBERSHIP_RIGHT,this)||(!AjxUtil.isEmpty(this.attrs[ZaAccount.A_mailHost])&&ZaItem.hasRight(ZaAccount.GET_MAILBOX_INFO_RIGHT,this))){try{y=new Object();
y.soapDoc=A;
var e={controller:ZaApp.getInstance().getCurrentController()};
var z=ZaRequestMgr.invoke(y,e);
if(z.isException&&z.isException()){ZaApp.getInstance().getCurrentController()._handleException(z.getException(),"ZaAccount.loadMethod",null,false);
f=true;
w=u
}else{if(z.Body.BatchResponse.Fault){var h=z.Body.BatchResponse.Fault;
if(h instanceof Array){h=h[0]
}if(h){var u=ZmCsfeCommand.faultToEx(h);
ZaApp.getInstance().getCurrentController()._handleException(u,"ZaAccount.loadMethod",null,false);
f=true;
w=u
}}else{var r=z.Body.BatchResponse;
if(r.GetAccountResponse){n=r.GetAccountResponse[0];
this.initFromJS(n.account[0])
}if(r.GetMailboxResponse){n=r.GetMailboxResponse[0];
if(n&&n.mbox&&n.mbox[0]){this.attrs[ZaAccount.A2_mbxsize]=n.mbox[0].s
}}if(r.GetAccountMembershipResponse){n=r.GetAccountMembershipResponse[0];
this[ZaAccount.A2_memberOf]=ZaAccountMemberOfListView.parseGetAccMembershipResponse(n);
this[ZaAccount.A2_directMemberList+"_more"]=(this[ZaAccount.A2_memberOf][ZaAccount.A2_directMemberList].length>ZaAccountMemberOfListView.SEARCH_LIMIT)?1:0;
this[ZaAccount.A2_indirectMemberList+"_more"]=(this[ZaAccount.A2_memberOf][ZaAccount.A2_indirectMemberList].length>ZaAccountMemberOfListView.SEARCH_LIMIT)?1:0
}if(r.GetAccountInfoResponse){n=r.GetAccountInfoResponse[0];
if(n[ZaAccount.A2_publicMailURL]&&n[ZaAccount.A2_publicMailURL][0]){this[ZaAccount.A2_publicMailURL]=n[ZaAccount.A2_publicMailURL][0]._content
}if(n[ZaAccount.A2_adminSoapURL]&&n[ZaAccount.A2_adminSoapURL][0]){this[ZaAccount.A2_adminSoapURL]=n[ZaAccount.A2_adminSoapURL][0]._content
}if(n[ZaAccount.A2_soapURL]&&n[ZaAccount.A2_soapURL][0]){this[ZaAccount.A2_soapURL]=n[ZaAccount.A2_soapURL][0]._content
}if(n.cos&&n.cos.id){this[ZaAccount.A2_currentAccountType]=n.cos.id
}}if(r.GetDataSourcesResponse&&r.GetDataSourcesResponse instanceof Array&&r.GetDataSourcesResponse[0]){this[ZaAccount.A2_datasources]=new ZaItemList(ZaDataSource);
this[ZaAccount.A2_datasources].loadFromJS(r.GetDataSourcesResponse[0]);
var b=this[ZaAccount.A2_datasources].getArray();
if(b&&b.length){for(var s=0;
s<b.length;
s++){if(b[s].attrs[ZaDataSource.A_zimbraDataSourceType]==ZaDataSource.DS_TYPE_GAL){if(b[s].attrs[ZaDataSource.A_zimbraGalType]==ZaDataSource.GAL_TYPE_ZIMBRA){this[ZaAccount.A2_zimbra_ds]=b[s]
}else{if(b[s].attrs[ZaDataSource.A_zimbraGalType]==ZaDataSource.GAL_TYPE_LDAP){this[ZaAccount.A2_ldap_ds]=b[s]
}}}}}}}}}catch(u){ZaApp.getInstance().getCurrentController()._handleException(u,"ZaAccount.prototype.load",null,false);
f=true;
w=u
}}if(f){throw w
}var l;
if(this.attrs[ZaAccount.A_firstName]){l=this.attrs[ZaAccount.A_firstName]
}else{l=""
}if(this.attrs[ZaAccount.A_initials]){l+=" ";
l+=this.attrs[ZaAccount.A_initials];
l+="."
}if(this.attrs[ZaAccount.A_lastName]){if(l.length>0){l+=" "
}l+=this.attrs[ZaAccount.A_lastName]
}if(this.attrs[ZaAccount.A_zimbraPrefMailPollingInterval]){var c=ZaUtil.getLifeTimeInSeconds(this.attrs[ZaAccount.A_zimbraPrefMailPollingInterval]);
if(c>=1){this.attrs[ZaAccount.A_zimbraPrefMailPollingInterval]=c+"s"
}}if(this._defaultValues.attrs[ZaAccount.A_zimbraPrefMailPollingInterval]){var j=ZaUtil.getLifeTimeInSeconds(this._defaultValues.attrs[ZaAccount.A_zimbraPrefMailPollingInterval]);
if(j>=1){this._defaultValues.attrs[ZaAccount.A_zimbraPrefMailPollingInterval]=j+"s"
}}if(l==this.attrs[ZaAccount.A_displayname]){this[ZaAccount.A2_autodisplayname]="TRUE"
}else{this[ZaAccount.A2_autodisplayname]="FALSE"
}};
ZaItem.loadMethods.ZaAccount.push(ZaAccount.loadMethod);
ZaAccount.prototype.rename=function(b){if(ZaAccount.renameMethods){var c=ZaAccount.renameMethods;
var e=c.length;
for(var d=0;
d<e;
d++){if(typeof(c[d])=="function"){c[d].call(this,b)
}}}};
ZaAccount.renameMethod=function(b){var c=AjxSoapDoc.create("RenameAccountRequest",ZaZimbraAdmin.URN,null);
c.set("id",this.id);
c.set("newName",b);
var e=new ZmCsfeCommand();
var d=new Object();
d.soapDoc=c;
d.noAuthToken=true;
e.invoke(d)
};
ZaAccount.renameMethods.push(ZaAccount.renameMethod);
ZaAccount.changePasswordMethod=function(e){var b=AjxSoapDoc.create("SetPasswordRequest",ZaZimbraAdmin.URN,null);
b.set("id",this.id);
b.set("newPassword",e);
var d=new ZmCsfeCommand();
var c=new Object();
c.soapDoc=b;
c.noAuthToken=true;
d.invoke(c)
};
ZaAccount.prototype.changePassword=function(e){if(ZaAccount.changePasswordMethods){var b=ZaAccount.changePasswordMethods;
var d=b.length;
for(var c=0;
c<d;
c++){if(typeof(b[c])=="function"){b[c].call(this,e)
}}}};
ZaAccount.changePasswordMethods.push(ZaAccount.changePasswordMethod);
ZaAccount.isValidName=function(f){if(AjxUtil.isEmpty(f)){return false
}var c=f.indexOf("@");
var b=f.substring(0,c);
var e=b.replace(/(\s*$)/g,"");
e=AjxStringUtil.trim(e);
var d=f.substring(c+1);
d=AjxStringUtil.trim(d);
f=e+"@"+d;
return(AjxEmailAddress.isValid(f))
};
ZaAccount.myXModel={items:[{id:"getAttrs",type:_LIST_},{id:"setAttrs",type:_LIST_},{id:"rights",type:_LIST_},{id:ZaItem.A_zimbraACE,ref:"attrs/"+ZaItem.A_zimbraACE,type:_LIST_},{id:ZaAccount.A2_errorMessage,ref:ZaAccount.A2_errorMessage,type:_STRING_},{id:ZaAccount.A2_warningMessage,ref:ZaAccount.A2_warningMessage,type:_STRING_},{id:ZaAccount.A2_domainLeftAccounts,ref:ZaAccount.A2_domainLeftAccounts,type:_STRING_},{id:ZaAccount.A2_showAccountTypeMsg,ref:ZaAccount.A2_showAccountTypeMsg,type:_STRING_},{id:ZaAccount.A_name,type:_STRING_,ref:"name",required:true,constraints:{type:"method",value:function(e,c,d,b){if(e){if(ZaAccount.isValidName(e)){return e
}else{throw ZaMsg.ErrorInvalidEmailAddress
}}}}},{id:ZaItem.A_zimbraId,type:_STRING_,ref:"attrs/"+ZaItem.A_zimbraId},{id:ZaAccount.A_uid,type:_STRING_,ref:"attrs/"+ZaAccount.A_uid},{id:ZaItem.A_zimbraCreateTimestamp,ref:"attrs/"+ZaItem.A_zimbraCreateTimestamp},{id:ZaAccount.A_accountName,type:_STRING_,ref:"attrs/"+ZaAccount.A_accountName},{id:ZaAccount.A_firstName,type:_STRING_,ref:"attrs/"+ZaAccount.A_firstName},{id:ZaAccount.A_lastName,type:_STRING_,ref:"attrs/"+ZaAccount.A_lastName,required:true},{id:ZaAccount.A_zimbraPhoneticFirstName,type:_STRING_,ref:"attrs/"+ZaAccount.A_zimbraPhoneticFirstName},{id:ZaAccount.A_zimbraPhoneticLastName,type:_STRING_,ref:"attrs/"+ZaAccount.A_zimbraPhoneticLastName},{id:ZaAccount.A_zimbraPhoneticCompany,type:_STRING_,ref:"attrs/"+ZaAccount.A_zimbraPhoneticCompany},{id:ZaAccount.A_mail,type:_STRING_,ref:"attrs/"+ZaAccount.A_mail},{id:ZaAccount.A_password,type:_STRING_,ref:"attrs/"+ZaAccount.A_password},{id:ZaAccount.A2_confirmPassword,type:_STRING_},ZaItem.descriptionModelItem,{id:ZaAccount.A_telephoneNumber,type:_STRING_,ref:"attrs/"+ZaAccount.A_telephoneNumber},{id:ZaAccount.A_mobile,type:_STRING_,ref:"attrs/"+ZaAccount.A_mobile},{id:ZaAccount.A_pager,type:_STRING_,ref:"attrs/"+ZaAccount.A_pager},{id:ZaAccount.A_homePhone,type:_STRING_,ref:"attrs/"+ZaAccount.A_homePhone},{id:ZaAccount.A_displayname,type:_STRING_,ref:"attrs/"+ZaAccount.A_displayname},{id:ZaAccount.A_country,type:_STRING_,ref:"attrs/"+ZaAccount.A_country},{id:ZaAccount.A_company,type:_STRING_,ref:"attrs/"+ZaAccount.A_company},{id:ZaAccount.A_title,type:_STRING_,ref:"attrs/"+ZaAccount.A_title},{id:ZaAccount.A_manager,type:_STRING_,ref:"attrs/"+ZaAccount.A_manager},{id:ZaAccount.A_facsimileTelephoneNumber,type:_STRING_,ref:"attrs/"+ZaAccount.A_facsimileTelephoneNumber},{id:ZaAccount.A_initials,type:_STRING_,ref:"attrs/"+ZaAccount.A_initials},{id:ZaAccount.A_city,type:_STRING_,ref:"attrs/"+ZaAccount.A_city},{id:ZaAccount.A_orgUnit,type:_STRING_,ref:"attrs/"+ZaAccount.A_orgUnit},{id:ZaAccount.A_office,type:_STRING_,ref:"attrs/"+ZaAccount.A_office},{id:ZaAccount.A_street,type:_STRING_,ref:"attrs/"+ZaAccount.A_street},{id:ZaAccount.A_zip,type:_STRING_,ref:"attrs/"+ZaAccount.A_zip},{id:ZaAccount.A_state,type:_STRING_,ref:"attrs/"+ZaAccount.A_state},{id:ZaAccount.A_mailDeliveryAddress,type:_EMAIL_ADDRESS_,ref:"attrs/"+ZaAccount.A_mailDeliveryAddress},{id:ZaAccount.A_zimbraMailCanonicalAddress,type:_EMAIL_ADDRESS_,ref:"attrs/"+ZaAccount.A_zimbraMailCanonicalAddress},{id:ZaAccount.A_accountStatus,type:_STRING_,ref:"attrs/"+ZaAccount.A_accountStatus},{id:ZaAccount.A_notes,type:_STRING_,ref:"attrs/"+ZaAccount.A_notes},{id:ZaAccount.A_zimbraMailQuota,type:_COS_MAILQUOTA_,ref:"attrs/"+ZaAccount.A_zimbraMailQuota},{id:ZaAccount.A_mailHost,type:_STRING_,ref:"attrs/"+ZaAccount.A_mailHost},{id:ZaAccount.A_COSId,type:_STRING_,ref:"attrs/"+ZaAccount.A_COSId},{id:ZaAccount.A_zimbraIsAdminAccount,type:_ENUM_,choices:ZaModel.BOOLEAN_CHOICES,ref:"attrs/"+ZaAccount.A_zimbraIsAdminAccount},{id:ZaAccount.A_zimbraIsSystemResource,type:_ENUM_,choices:ZaModel.BOOLEAN_CHOICES,ref:"attrs/"+ZaAccount.A_zimbraIsSystemResource},{id:ZaAccount.A_zimbraIsSystemAccount,type:_ENUM_,choices:ZaModel.BOOLEAN_CHOICES,ref:"attrs/"+ZaAccount.A_zimbraIsSystemAccount},{id:ZaAccount.A_zimbraLastLogonTimestamp,type:_STRING_,ref:"attrs/"+ZaAccount.A_zimbraLastLogonTimestamp},{id:ZaAccount.A_zimbraMaxPwdLength,type:_COS_NUMBER_,ref:"attrs/"+ZaAccount.A_zimbraMaxPwdLength,maxInclusive:2147483647,minInclusive:0},{id:ZaAccount.A_zimbraMinPwdLength,type:_COS_NUMBER_,ref:"attrs/"+ZaAccount.A_zimbraMinPwdLength,maxInclusive:2147483647,minInclusive:0},{id:ZaAccount.A_zimbraPasswordMinUpperCaseChars,type:_COS_NUMBER_,ref:"attrs/"+ZaAccount.A_zimbraPasswordMinUpperCaseChars,maxInclusive:2147483647,minInclusive:0},{id:ZaAccount.A_zimbraPasswordMinLowerCaseChars,type:_COS_NUMBER_,ref:"attrs/"+ZaAccount.A_zimbraPasswordMinLowerCaseChars,maxInclusive:2147483647,minInclusive:0},{id:ZaAccount.A_zimbraPasswordMinPunctuationChars,type:_COS_NUMBER_,ref:"attrs/"+ZaAccount.A_zimbraPasswordMinPunctuationChars,maxInclusive:2147483647,minInclusive:0},{id:ZaAccount.A_zimbraPasswordMinNumericChars,type:_COS_NUMBER_,ref:"attrs/"+ZaAccount.A_zimbraPasswordMinNumericChars,maxInclusive:2147483647,minInclusive:0},{id:ZaAccount.A_zimbraPasswordMinDigitsOrPuncs,type:_COS_NUMBER_,ref:"attrs/"+ZaAccount.A_zimbraPasswordMinDigitsOrPuncs,maxInclusive:2147483647,minInclusive:0},{id:ZaAccount.A_zimbraAuthLdapExternalDn,type:_STRING_,ref:"attrs/"+ZaAccount.A_zimbraAuthLdapExternalDn},{id:ZaAccount.A_zimbraMinPwdAge,type:_COS_NUMBER_,ref:"attrs/"+ZaAccount.A_zimbraMinPwdAge,maxInclusive:2147483647,minInclusive:0},{id:ZaAccount.A_zimbraMaxPwdAge,type:_COS_NUMBER_,ref:"attrs/"+ZaAccount.A_zimbraMaxPwdAge,maxInclusive:2147483647,minInclusive:0},{id:ZaAccount.A_zimbraEnforcePwdHistory,type:_COS_NUMBER_,ref:"attrs/"+ZaAccount.A_zimbraEnforcePwdHistory,maxInclusive:2147483647,minInclusive:0},{id:ZaAccount.A_zimbraMailAlias,type:_LIST_,ref:"attrs/"+ZaAccount.A_zimbraMailAlias,listItem:{type:_EMAIL_ADDRESS_}},{id:ZaAccount.A_zimbraForeignPrincipal,type:_LIST_,ref:"attrs/"+ZaAccount.A_zimbraForeignPrincipal,listItem:{type:_STRING_}},{id:ZaAccount.A_zimbraMailForwardingAddress,type:_LIST_,ref:"attrs/"+ZaAccount.A_zimbraMailForwardingAddress,listItem:{type:_EMAIL_ADDRESS_}},{id:ZaAccount.A_zimbraPrefCalendarForwardInvitesTo,type:_LIST_,ref:"attrs/"+ZaAccount.A_zimbraPrefCalendarForwardInvitesTo,listItem:{type:_EMAIL_ADDRESS_}},{id:ZaAccount.A_zimbraPasswordMustChange,type:_ENUM_,choices:ZaModel.BOOLEAN_CHOICES,ref:"attrs/"+ZaAccount.A_zimbraPasswordMustChange},{id:ZaAccount.A_zimbraPasswordLocked,type:_COS_ENUM_,ref:"attrs/"+ZaAccount.A_zimbraPasswordLocked,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaAccount.A_zimbraPasswordBlockCommonEnabled,type:_COS_ENUM_,ref:"attrs/"+ZaAccount.A_zimbraPasswordBlockCommonEnabled,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaAccount.A_zimbraContactMaxNumEntries,type:_COS_NUMBER_,ref:"attrs/"+ZaAccount.A_zimbraContactMaxNumEntries,maxInclusive:2147483647,minInclusive:0},{id:ZaAccount.A_zimbraMailForwardingAddressMaxLength,type:_COS_NUMBER_,ref:"attrs/"+ZaAccount.A_zimbraMailForwardingAddressMaxLength,maxInclusive:2147483647,minInclusive:0},{id:ZaAccount.A_zimbraDataSourcePop3PollingInterval,type:_COS_MLIFETIME_,ref:"attrs/"+ZaAccount.A_zimbraDataSourcePop3PollingInterval},{id:ZaAccount.A_zimbraDataSourceImapPollingInterval,type:_COS_MLIFETIME_,ref:"attrs/"+ZaAccount.A_zimbraDataSourceImapPollingInterval},{id:ZaAccount.A_zimbraDataSourceCalendarPollingInterval,type:_COS_MLIFETIME_,ref:"attrs/"+ZaAccount.A_zimbraDataSourceCalendarPollingInterval},{id:ZaAccount.A_zimbraDataSourceRssPollingInterval,type:_COS_MLIFETIME_,ref:"attrs/"+ZaAccount.A_zimbraDataSourceRssPollingInterval},{id:ZaAccount.A_zimbraDataSourceCaldavPollingInterval,type:_COS_MLIFETIME_,ref:"attrs/"+ZaAccount.A_zimbraDataSourceCaldavPollingInterval},{id:ZaAccount.A_zimbraDataSourceMinPollingInterval,type:_COS_MLIFETIME_,ref:"attrs/"+ZaAccount.A_zimbraDataSourceMinPollingInterval},{id:ZaAccount.A_zimbraPrefAutoSaveDraftInterval,type:_COS_MLIFETIME_,ref:"attrs/"+ZaAccount.A_zimbraPrefAutoSaveDraftInterval},{id:ZaAccount.A_zimbraProxyAllowedDomains,type:_COS_LIST_,ref:"attrs/"+ZaAccount.A_zimbraProxyAllowedDomains,listItem:{type:_STRING_}},{id:ZaAccount.A_zimbraMailForwardingAddressMaxNumAddrs,type:_COS_NUMBER_,ref:"attrs/"+ZaAccount.A_zimbraMailForwardingAddressMaxNumAddrs,maxInclusive:2147483647,minInclusive:0},{id:ZaAccount.A_zimbraAttachmentsBlocked,type:_COS_ENUM_,ref:"attrs/"+ZaAccount.A_zimbraAttachmentsBlocked,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaAccount.A_zimbraQuotaWarnPercent,type:_COS_NUMBER_,ref:"attrs/"+ZaAccount.A_zimbraQuotaWarnPercent},{id:ZaAccount.A_zimbraQuotaWarnInterval,type:_COS_MLIFETIME_,ref:"attrs/"+ZaAccount.A_zimbraQuotaWarnInterval},{id:ZaAccount.A_zimbraQuotaWarnMessage,type:_COS_STRING_,ref:"attrs/"+ZaAccount.A_zimbraQuotaWarnMessage},{id:ZaAccount.A_zimbraInterceptAddress,type:_LIST_,ref:"attrs/"+ZaAccount.A_zimbraInterceptAddress,listItem:{type:_EMAIL_ADDRESS_}},{id:ZaAccount.A_zimbraInterceptSendHeadersOnly,type:_COS_ENUM_,ref:"attrs/"+ZaAccount.A_zimbraInterceptSendHeadersOnly,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaAccount.A_zimbraAuthTokenLifetime,type:_COS_MLIFETIME_,ref:"attrs/"+ZaAccount.A_zimbraAuthTokenLifetime},{id:ZaAccount.A_zimbraAdminAuthTokenLifetime,type:_COS_MLIFETIME_,ref:"attrs/"+ZaAccount.A_zimbraAdminAuthTokenLifetime},{id:ZaAccount.A_zimbraMailIdleSessionTimeout,type:_COS_MLIFETIME_,ref:"attrs/"+ZaAccount.A_zimbraMailIdleSessionTimeout},{id:ZaAccount.A_zimbraMailMessageLifetime,type:_COS_MLIFETIME_,ref:"attrs/"+ZaAccount.A_zimbraMailMessageLifetime},{id:ZaAccount.A_zimbraMailSpamLifetime,type:_COS_MLIFETIME_,ref:"attrs/"+ZaAccount.A_zimbraMailSpamLifetime},{id:ZaAccount.A_zimbraMailTrashLifetime,type:_COS_MLIFETIME_,ref:"attrs/"+ZaAccount.A_zimbraMailTrashLifetime},{id:ZaAccount.A_zimbraPrefSaveToSent,type:_COS_ENUM_,ref:"attrs/"+ZaAccount.A_zimbraPrefSaveToSent,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaAccount.A_zimbraPrefMailSignature,type:_STRING_,ref:"attrs/"+ZaAccount.A_zimbraPrefMailSignature},{id:ZaAccount.A_zimbraPrefMailSignatureEnabled,type:_ENUM_,choices:ZaModel.BOOLEAN_CHOICES,ref:"attrs/"+ZaAccount.A_zimbraPrefMailSignatureEnabled},{id:ZaAccount.A_zimbraPrefMandatorySpellCheckEnabled,type:_COS_ENUM_,ref:"attrs/"+ZaAccount.A_zimbraPrefMandatorySpellCheckEnabled,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaAccount.A_zimbraPrefAppleIcalDelegationEnabled,type:_COS_ENUM_,ref:"attrs/"+ZaAccount.A_zimbraPrefAppleIcalDelegationEnabled,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaAccount.A_zimbraPrefCalendarShowPastDueReminders,type:_COS_ENUM_,ref:"attrs/"+ZaAccount.A_zimbraPrefCalendarShowPastDueReminders,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaAccount.A_zimbraPrefCalendarToasterEnabled,type:_COS_ENUM_,ref:"attrs/"+ZaAccount.A_zimbraPrefCalendarToasterEnabled,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaAccount.A_zimbraPrefCalendarAllowCancelEmailToSelf,type:_COS_ENUM_,ref:"attrs/"+ZaAccount.A_zimbraPrefCalendarAllowCancelEmailToSelf,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaAccount.A_zimbraPrefCalendarAllowPublishMethodInvite,type:_COS_ENUM_,ref:"attrs/"+ZaAccount.A_zimbraPrefCalendarAllowPublishMethodInvite,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaAccount.A_zimbraPrefCalendarAllowForwardedInvite,type:_COS_ENUM_,ref:"attrs/"+ZaAccount.A_zimbraPrefCalendarAllowForwardedInvite,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaAccount.A_zimbraPrefCalendarReminderFlashTitle,type:_COS_ENUM_,ref:"attrs/"+ZaAccount.A_zimbraPrefCalendarReminderFlashTitle,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaAccount.A_zimbraPrefCalendarReminderSoundsEnabled,type:_COS_ENUM_,ref:"attrs/"+ZaAccount.A_zimbraPrefCalendarReminderSoundsEnabled,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaAccount.A_zimbraPrefCalendarSendInviteDeniedAutoReply,type:_COS_ENUM_,ref:"attrs/"+ZaAccount.A_zimbraPrefCalendarSendInviteDeniedAutoReply,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaAccount.A_zimbraPrefCalendarNotifyDelegatedChanges,type:_COS_ENUM_,ref:"attrs/"+ZaAccount.A_zimbraPrefCalendarNotifyDelegatedChanges,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaAccount.A_zimbraPrefCalendarFirstDayOfWeek,type:_COS_NUMBER_,ref:"attrs/"+ZaAccount.A_zimbraPrefCalendarFirstDayOfWeek,choices:ZaSettings.dayOfWeekChoices},{id:ZaAccount.A_zimbraPrefCalendarInitialView,type:_COS_ENUM_,ref:"attrs/"+ZaAccount.A_zimbraPrefCalendarInitialView,choices:ZaSettings.calendarViewChoinces},{id:ZaAccount.A_zimbraPrefClientType,type:_COS_ENUM_,ref:"attrs/"+ZaAccount.A_zimbraPrefClientType,choices:ZaSettings.clientTypeChoices},{id:ZaAccount.A_zimbraPrefTimeZoneId,type:_COS_STRING_,ref:"attrs/"+ZaAccount.A_zimbraPrefTimeZoneId,choices:ZaSettings.timeZoneChoices},{id:ZaAccount.A_zimbraPrefMailDefaultCharset,type:_COS_STRING_,ref:"attrs/"+ZaAccount.A_zimbraPrefMailDefaultCharset,choices:ZaSettings.mailCharsetChoices},{id:ZaAccount.A_zimbraPrefMailToasterEnabled,type:_COS_ENUM_,ref:"attrs/"+ZaAccount.A_zimbraPrefMailToasterEnabled,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaAccount.A_zimbraPrefMessageIdDedupingEnabled,type:_COS_ENUM_,ref:"attrs/"+ZaAccount.A_zimbraPrefMessageIdDedupingEnabled,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaAccount.A_zimbraPrefLocale,type:_COS_STRING_,ref:"attrs/"+ZaAccount.A_zimbraPrefLocale},{id:ZaAccount.A_zimbraPrefSentMailFolder,type:_STRING_,ref:"attrs/"+ZaAccount.A_zimbraPrefSentMailFolder},{id:ZaAccount.A_zimbraPrefIncludeSpamInSearch,type:_COS_ENUM_,ref:"attrs/"+ZaAccount.A_zimbraPrefIncludeSpamInSearch,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaAccount.A_zimbraPrefIncludeTrashInSearch,type:_COS_ENUM_,ref:"attrs/"+ZaAccount.A_zimbraPrefIncludeTrashInSearch,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaAccount.A_zimbraPrefMailInitialSearch,type:_COS_STRING_,ref:"attrs/"+ZaAccount.A_zimbraPrefMailInitialSearch},{id:ZaAccount.A_zimbraMaxMailItemsPerPage,type:_COS_NUMBER_,ref:"attrs/"+ZaAccount.A_zimbraMaxMailItemsPerPage,maxInclusive:2147483647,minInclusive:0},{id:ZaAccount.A_zimbraPrefMailItemsPerPage,type:_COS_NUMBER_,ref:"attrs/"+ZaAccount.A_zimbraPrefMailItemsPerPage,choices:[10,25,50,100]},{id:ZaAccount.A_zimbraPrefMailPollingInterval,type:_COS_ENUM_POLLING_,ref:"attrs/"+ZaAccount.A_zimbraPrefMailPollingInterval,choices:ZaModel.MAIL_POLLING_INTERVAL_CHOICES},{id:ZaAccount.A_zimbraMailMinPollingInterval,type:_COS_MLIFETIME_,ref:"attrs/"+ZaAccount.A_zimbraMailMinPollingInterval},{id:ZaAccount.A_zimbraPrefMailFlashIcon,choices:ZaModel.BOOLEAN_CHOICES,ref:"attrs/"+ZaAccount.A_zimbraPrefMailFlashIcon,type:_COS_ENUM_},{id:ZaAccount.A_zimbraPrefMailFlashTitle,choices:ZaModel.BOOLEAN_CHOICES,ref:"attrs/"+ZaAccount.A_zimbraPrefMailFlashTitle,type:_COS_ENUM_},{id:ZaAccount.A_zimbraPrefMailSoundsEnabled,choices:ZaModel.BOOLEAN_CHOICES,ref:"attrs/"+ZaAccount.A_zimbraPrefMailSoundsEnabled,type:_COS_ENUM_},{id:ZaAccount.A_zimbraPrefOutOfOfficeReply,type:_STRING_,ref:"attrs/"+ZaAccount.A_zimbraPrefOutOfOfficeReply},{id:ZaAccount.A_zimbraPrefOutOfOfficeReplyEnabled,choices:ZaModel.BOOLEAN_CHOICES,ref:"attrs/"+ZaAccount.A_zimbraPrefOutOfOfficeReplyEnabled,type:_COS_ENUM_},{id:ZaAccount.A_zimbraPrefItemsPerVirtualPage,type:_COS_NUMBER_,ref:"attrs/"+ZaAccount.A_zimbraPrefItemsPerVirtualPage},{id:ZaAccount.A_zimbraPrefReplyToAddress,type:_STRING_,ref:"attrs/"+ZaAccount.A_zimbraPrefReplyToAddress},{id:ZaAccount.A_zimbraPrefUseKeyboardShortcuts,type:_COS_ENUM_,ref:"attrs/"+ZaAccount.A_zimbraPrefUseKeyboardShortcuts,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaAccount.A_zimbraAllowAnyFromAddress,type:_COS_ENUM_,ref:"attrs/"+ZaAccount.A_zimbraAllowAnyFromAddress,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaAccount.A_zimbraAllowFromAddress,type:_LIST_,ref:"attrs/"+ZaAccount.A_zimbraAllowFromAddress,listItem:{type:_STRING_}},{id:ZaAccount.A_zimbraPrefComposeInNewWindow,type:_COS_ENUM_,ref:"attrs/"+ZaAccount.A_zimbraPrefComposeInNewWindow,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaAccount.A_zimbraPrefForwardReplyInOriginalFormat,type:_COS_ENUM_,ref:"attrs/"+ZaAccount.A_zimbraPrefForwardReplyInOriginalFormat,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaAccount.A_zimbraPrefAutoAddAddressEnabled,type:_COS_ENUM_,ref:"attrs/"+ZaAccount.A_zimbraPrefAutoAddAddressEnabled,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaAccount.A_zimbraPrefComposeFormat,type:_COS_ENUM_,ref:"attrs/"+ZaAccount.A_zimbraPrefComposeFormat,choices:ZaModel.COMPOSE_FORMAT_CHOICES},{id:ZaAccount.A_zimbraPrefHtmlEditorDefaultFontFamily,choices:ZaModel.FONT_FAMILY_CHOICES,ref:"attrs/"+ZaAccount.A_zimbraPrefHtmlEditorDefaultFontFamily,type:_COS_ENUM_},{id:ZaAccount.A_zimbraPrefHtmlEditorDefaultFontSize,choices:ZaModel.FONT_SIZE_CHOICES,ref:"attrs/"+ZaAccount.A_zimbraPrefHtmlEditorDefaultFontSize,type:_COS_ENUM_},{id:ZaAccount.A_zimbraPrefHtmlEditorDefaultFontColor,ref:"attrs/"+ZaAccount.A_zimbraPrefHtmlEditorDefaultFontColor,type:_COS_STRING_},{id:ZaAccount.A_zimbraMailSignatureMaxLength,type:_COS_NUMBER_,ref:"attrs/"+ZaAccount.A_zimbraMailSignatureMaxLength},{id:ZaAccount.A_zimbraPrefGroupMailBy,type:_COS_ENUM_,ref:"attrs/"+ZaAccount.A_zimbraPrefGroupMailBy,choices:ZaModel.GROUP_MAIL_BY_CHOICES},{id:ZaAccount.A_zimbraPrefMessageViewHtmlPreferred,type:_COS_ENUM_,ref:"attrs/"+ZaAccount.A_zimbraPrefMessageViewHtmlPreferred,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaAccount.A_zimbraPrefNewMailNotificationAddress,type:_STRING_,ref:"attrs/"+ZaAccount.A_zimbraPrefNewMailNotificationAddress},{id:ZaAccount.A_zimbraPrefMailForwardingAddress,type:_STRING_,ref:"attrs/"+ZaAccount.A_zimbraPrefMailForwardingAddress,constraints:{type:"method",value:function(j,b,g,l){if(j){var d;
var k=0;
var e=0;
var h;
var f;
var c=false;
j=j.replace(/\s/g,"");
for(d=0;
d<j.length;
d++){e=j.indexOf(",",k);
if(e==-1){h=j.substring(k);
if(!AjxUtil.isEmailAddress(h,false)){c=true
}break
}h=j.substring(k,e);
if(!AjxUtil.isEmailAddress(h,false)){c=true;
break
}k=e+1
}if(c){throw ZaMsg.ErrorInvalidEmailAddressList
}}return j
}}},{id:ZaAccount.A_zimbraPrefNewMailNotificationEnabled,type:_ENUM_,choices:ZaModel.BOOLEAN_CHOICES,ref:"attrs/"+ZaAccount.A_zimbraPrefNewMailNotificationEnabled},{id:ZaAccount.A_zimbraPrefOutOfOfficeReply,type:_STRING_,ref:"attrs/"+ZaAccount.A_zimbraPrefOutOfOfficeReply},{id:ZaAccount.A_zimbraPrefMailLocalDeliveryDisabled,type:_ENUM_,choices:ZaModel.BOOLEAN_CHOICES,ref:"attrs/"+ZaAccount.A_zimbraPrefMailLocalDeliveryDisabled},{id:ZaAccount.A_zimbraIsExternalVirtualAccount,type:_ENUM_,choices:ZaModel.BOOLEAN_CHOICES,ref:"attrs/"+ZaAccount.A_zimbraIsExternalVirtualAccount},{id:ZaAccount.A_zimbraPrefShowSearchString,type:_COS_ENUM_,ref:"attrs/"+ZaAccount.A_zimbraPrefShowSearchString,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaAccount.A_zimbraPrefUseTimeZoneListInCalendar,type:_COS_ENUM_,ref:"attrs/"+ZaAccount.A_zimbraPrefUseTimeZoneListInCalendar,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaAccount.A_zimbraPrefImapSearchFoldersEnabled,type:_COS_ENUM_,ref:"attrs/"+ZaAccount.A_zimbraPrefImapSearchFoldersEnabled,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaAccount.A_zimbraPrefCalendarUseQuickAdd,type:_COS_ENUM_,ref:"attrs/"+ZaAccount.A_zimbraPrefCalendarUseQuickAdd,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaAccount.A_zimbraPrefCalendarAlwaysShowMiniCal,type:_COS_ENUM_,ref:"attrs/"+ZaAccount.A_zimbraPrefCalendarAlwaysShowMiniCal,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaAccount.A_zimbraPrefSkin,type:_COS_STRING_,ref:"attrs/"+ZaAccount.A_zimbraPrefSkin},{id:ZaAccount.A_zimbraAvailableSkin,type:_COS_LIST_,ref:"attrs/"+ZaAccount.A_zimbraAvailableSkin,dataType:_STRING_},{id:ZaAccount.A_zimbraZimletAvailableZimlets,type:_COS_LIST_,ref:"attrs/"+ZaAccount.A_zimbraZimletAvailableZimlets,dataType:_STRING_,outputType:_LIST_},{id:ZaAccount.A_zimbraPrefGalAutoCompleteEnabled,type:_COS_ENUM_,choices:ZaModel.BOOLEAN_CHOICES,ref:"attrs/"+ZaAccount.A_zimbraPrefGalAutoCompleteEnabled},{id:ZaAccount.A_zimbraPrefAdminConsoleWarnOnExit,type:_COS_ENUM_,choices:ZaModel.BOOLEAN_CHOICES,ref:"attrs/"+ZaAccount.A_zimbraPrefAdminConsoleWarnOnExit},{id:ZaAccount.A_zimbraPrefWarnOnExit,type:_COS_ENUM_,choices:ZaModel.BOOLEAN_CHOICES,ref:"attrs/"+ZaAccount.A_zimbraPrefWarnOnExit},{id:ZaAccount.A_zimbraPrefShowSelectionCheckbox,type:_COS_ENUM_,choices:ZaModel.BOOLEAN_CHOICES,ref:"attrs/"+ZaAccount.A_zimbraPrefShowSelectionCheckbox},{id:ZaAccount.A_zimbraPrefDisplayExternalImages,type:_COS_ENUM_,ref:"attrs/"+ZaAccount.A_zimbraPrefDisplayExternalImages,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaAccount.A_zimbraPrefOutOfOfficeCacheDuration,type:_COS_MLIFETIME_,ref:"attrs/"+ZaAccount.A_zimbraPrefOutOfOfficeCacheDuration},{id:ZaAccount.A_zimbraJunkMessagesIndexingEnabled,type:_COS_ENUM_,ref:"attrs/"+ZaAccount.A_zimbraJunkMessagesIndexingEnabled,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaAccount.A_zimbraPrefMailSendReadReceipts,type:_COS_ENUM_,ref:"attrs/"+ZaAccount.A_zimbraPrefMailSendReadReceipts,choices:ZaModel.SEND_READ_RECEPIT_CHOICES},{id:ZaAccount.A_zimbraPrefReadReceiptsToAddress,type:_EMAIL_ADDRESS_,ref:"attrs/"+ZaAccount.A_zimbraPrefReadReceiptsToAddress},{id:ZaAccount.A_zimbraPrefCalendarAutoAddInvites,type:_COS_ENUM_,ref:"attrs/"+ZaAccount.A_zimbraPrefCalendarAutoAddInvites,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaAccount.A_zimbraPrefCalendarApptVisibility,type:_COS_ENUM_,ref:"attrs/"+ZaAccount.A_zimbraPrefCalendarApptVisibility,choices:ZaSettings.apptVisibilityChoices},{id:ZaAccount.A_zimbraPrefImapEnabled,type:_COS_ENUM_,ref:"attrs/"+ZaAccount.A_zimbraPrefImapEnabled,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaAccount.A_zimbraPrefPop3Enabled,type:_COS_ENUM_,ref:"attrs/"+ZaAccount.A_zimbraPrefPop3Enabled,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaAccount.A_zimbraFeatureManageZimlets,type:_COS_ENUM_,ref:"attrs/"+ZaAccount.A_zimbraFeatureManageZimlets,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaAccount.A_zimbraFeatureImportFolderEnabled,type:_COS_ENUM_,ref:"attrs/"+ZaAccount.A_zimbraFeatureImportFolderEnabled,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaAccount.A_zimbraFeatureExportFolderEnabled,type:_COS_ENUM_,ref:"attrs/"+ZaAccount.A_zimbraFeatureExportFolderEnabled,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaAccount.A_zimbraFeatureDocumentEditingEnabled,type:_COS_ENUM_,ref:"attrs/"+ZaAccount.A_zimbraFeatureDocumentEditingEnabled,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaAccount.A_zimbraDumpsterEnabled,type:_COS_ENUM_,ref:"attrs/"+ZaAccount.A_zimbraDumpsterEnabled,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaAccount.A_zimbraDumpsterUserVisibleAge,type:_COS_MLIFETIME_,ref:"attrs/"+ZaAccount.A_zimbraDumpsterUserVisibleAge},{id:ZaAccount.A_zimbraDumpsterPurgeEnabled,type:_COS_ENUM_,ref:"attrs/"+ZaAccount.A_zimbraDumpsterPurgeEnabled,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaAccount.A_zimbraMailDumpsterLifetime,type:_COS_MLIFETIME_,ref:"attrs/"+ZaAccount.A_zimbraMailDumpsterLifetime},{id:ZaAccount.A_zimbraFeatureMailPriorityEnabled,type:_COS_ENUM_,ref:"attrs/"+ZaAccount.A_zimbraFeatureMailPriorityEnabled,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaAccount.A_zimbraFeatureReadReceiptsEnabled,type:_COS_ENUM_,ref:"attrs/"+ZaAccount.A_zimbraFeatureReadReceiptsEnabled,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaAccount.A_zimbraFeatureImapDataSourceEnabled,type:_COS_ENUM_,ref:"attrs/"+ZaAccount.A_zimbraFeatureImapDataSourceEnabled,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaAccount.A_zimbraFeaturePop3DataSourceEnabled,type:_COS_ENUM_,ref:"attrs/"+ZaAccount.A_zimbraFeaturePop3DataSourceEnabled,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaAccount.A_zimbraFeatureMailSendLaterEnabled,type:_COS_ENUM_,ref:"attrs/"+ZaAccount.A_zimbraFeatureMailSendLaterEnabled,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaAccount.A_zimbraFeatureIdentitiesEnabled,type:_COS_ENUM_,ref:"attrs/"+ZaAccount.A_zimbraFeatureIdentitiesEnabled,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaAccount.A_zimbraFeatureContactsEnabled,type:_COS_ENUM_,ref:"attrs/"+ZaAccount.A_zimbraFeatureContactsEnabled,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaAccount.A_zimbraFeatureCalendarEnabled,type:_COS_ENUM_,ref:"attrs/"+ZaAccount.A_zimbraFeatureCalendarEnabled,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaAccount.A_zimbraFeatureTasksEnabled,type:_COS_ENUM_,ref:"attrs/"+ZaAccount.A_zimbraFeatureTasksEnabled,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaAccount.A_zimbraFeatureTaggingEnabled,type:_COS_ENUM_,ref:"attrs/"+ZaAccount.A_zimbraFeatureTaggingEnabled,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaAccount.A_zimbraFeaturePeopleSearchEnabled,type:_COS_ENUM_,ref:"attrs/"+ZaAccount.A_zimbraFeaturePeopleSearchEnabled,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaAccount.A_zimbraFeatureAdvancedSearchEnabled,type:_COS_ENUM_,ref:"attrs/"+ZaAccount.A_zimbraFeatureAdvancedSearchEnabled,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaAccount.A_zimbraFeatureSavedSearchesEnabled,type:_COS_ENUM_,ref:"attrs/"+ZaAccount.A_zimbraFeatureSavedSearchesEnabled,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaAccount.A_zimbraFeatureConversationsEnabled,type:_COS_ENUM_,ref:"attrs/"+ZaAccount.A_zimbraFeatureConversationsEnabled,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaAccount.A_zimbraFeatureChangePasswordEnabled,type:_COS_ENUM_,ref:"attrs/"+ZaAccount.A_zimbraFeatureChangePasswordEnabled,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaAccount.A_zimbraFeatureInitialSearchPreferenceEnabled,type:_COS_ENUM_,ref:"attrs/"+ZaAccount.A_zimbraFeatureInitialSearchPreferenceEnabled,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaAccount.A_zimbraFeatureFiltersEnabled,type:_COS_ENUM_,ref:"attrs/"+ZaAccount.A_zimbraFeatureFiltersEnabled,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaAccount.A_zimbraFeatureGalEnabled,type:_COS_ENUM_,ref:"attrs/"+ZaAccount.A_zimbraFeatureGalEnabled,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaAccount.A_zimbraFeatureMAPIConnectorEnabled,type:_COS_ENUM_,ref:"attrs/"+ZaAccount.A_zimbraFeatureMAPIConnectorEnabled,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaAccount.A_zimbraFeatureMailEnabled,type:_COS_ENUM_,ref:"attrs/"+ZaAccount.A_zimbraFeatureMailEnabled,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaAccount.A_zimbraFeatureBriefcasesEnabled,type:_COS_ENUM_,ref:"attrs/"+ZaAccount.A_zimbraFeatureBriefcasesEnabled,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaAccount.A_zimbraFeatureHtmlComposeEnabled,type:_COS_ENUM_,ref:"attrs/"+ZaAccount.A_zimbraFeatureHtmlComposeEnabled,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaAccount.A_zimbraFeatureMailForwardingEnabled,type:_COS_ENUM_,ref:"attrs/"+ZaAccount.A_zimbraFeatureMailForwardingEnabled,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaAccount.A_zimbraFeatureSharingEnabled,type:_COS_ENUM_,ref:"attrs/"+ZaAccount.A_zimbraFeatureSharingEnabled,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaAccount.A_zimbraExternalSharingEnabled,type:_COS_ENUM_,ref:"attrs/"+ZaAccount.A_zimbraExternalSharingEnabled,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaAccount.A_zimbraPublicSharingEnabled,type:_COS_ENUM_,ref:"attrs/"+ZaAccount.A_zimbraPublicSharingEnabled,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaAccount.A_zimbraFeatureOutOfOfficeReplyEnabled,type:_COS_ENUM_,ref:"attrs/"+ZaAccount.A_zimbraFeatureOutOfOfficeReplyEnabled,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaAccount.A_zimbraFeatureNewMailNotificationEnabled,type:_COS_ENUM_,ref:"attrs/"+ZaAccount.A_zimbraFeatureNewMailNotificationEnabled,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaAccount.A_zimbraFeatureOptionsEnabled,type:_COS_ENUM_,ref:"attrs/"+ZaAccount.A_zimbraFeatureOptionsEnabled,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaAccount.A_zimbraFeatureSkinChangeEnabled,type:_COS_ENUM_,ref:"attrs/"+ZaAccount.A_zimbraFeatureSkinChangeEnabled,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaAccount.A_zimbraPrefCalendarApptReminderWarningTime,type:_COS_ENUM_,ref:"attrs/"+ZaAccount.A_zimbraPrefCalendarApptReminderWarningTime,choices:ZaModel.REMINDER_CHOICES},{id:ZaAccount.A_zimbraFeatureGalAutoCompleteEnabled,type:_COS_ENUM_,ref:"attrs/"+ZaAccount.A_zimbraFeatureGalAutoCompleteEnabled,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaAccount.A_zimbraFeatureGroupCalendarEnabled,type:_COS_ENUM_,ref:"attrs/"+ZaAccount.A_zimbraFeatureGroupCalendarEnabled,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaAccount.A_zimbraFeatureFlaggingEnabled,type:_COS_ENUM_,ref:"attrs/"+ZaAccount.A_zimbraFeatureFlaggingEnabled,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaAccount.A_zimbraImapEnabled,type:_COS_ENUM_,ref:"attrs/"+ZaAccount.A_zimbraImapEnabled,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaAccount.A_zimbraPop3Enabled,type:_COS_ENUM_,ref:"attrs/"+ZaAccount.A_zimbraPop3Enabled,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaAccount.A_zimbraFeatureWebClientEnabled,type:_COS_ENUM_,ref:"attrs/"+ZaAccount.A_zimbraFeatureWebClientEnabled,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaAccount.A_zimbraFeatureDistributionListFolderEnabled,choices:ZaModel.BOOLEAN_CHOICES,ref:"attrs/"+ZaAccount.A_zimbraFeatureDistributionListFolderEnabled,type:_COS_ENUM_},{id:ZaAccount.A_zimbraFeatureSMIMEEnabled,type:_COS_ENUM_,ref:"attrs/"+ZaAccount.A_zimbraFeatureSMIMEEnabled,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaAccount.A_zimbraFeatureManageSMIMECertificateEnabled,type:_COS_ENUM_,ref:"attrs/"+ZaAccount.A_zimbraFeatureManageSMIMECertificateEnabled,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaAccount.A_zimbraFeatureEwsEnabled,type:_COS_ENUM_,ref:"attrs/"+ZaAccount.A_zimbraFeatureEwsEnabled,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaAccount.A_zimbraFeatureTouchClientEnabled,type:_COS_ENUM_,ref:"attrs/"+ZaAccount.A_zimbraFeatureTouchClientEnabled,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaAccount.A_zimbraFeatureWebClientOfflineAccessEnabled,type:_COS_ENUM_,ref:"attrs/"+ZaAccount.A_zimbraFeatureWebClientOfflineAccessEnabled,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaAccount.A_zimbraFeatureCalendarReminderDeviceEmailEnabled,type:_COS_ENUM_,ref:"attrs/"+ZaAccount.A_zimbraFeatureCalendarReminderDeviceEmailEnabled,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaModel.currentStep,type:_NUMBER_,ref:ZaModel.currentStep},{id:ZaAccount.A2_newAlias,type:_STRING_},{id:ZaAccount.A2_aliases,type:_LIST_,listItem:{type:_STRING_}},{id:ZaAccount.A2_forwarding,type:_LIST_,listItem:{type:_STRING_}},{id:ZaAccount.A2_mbxsize,type:_NUMBER_,ref:"attrs/"+ZaAccount.A2_mbxsize},{id:ZaAccount.A2_autodisplayname,type:_ENUM_,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaAccount.A2_autoMailServer,type:_ENUM_,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaAccount.A2_autoCos,type:_ENUM_,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaAccount.A2_alias_selection_cache,type:_LIST_},{id:ZaAccount.A2_fwdAddr_selection_cache,type:_LIST_},{id:ZaAccount.A2_calFwdAddr_selection_cache,type:_LIST_},{id:ZaAccount.A2_fp_selection_cache,type:_LIST_},{id:ZaAccount.A_zimbraHideInGal,type:_ENUM_,ref:"attrs/"+ZaAccount.A_zimbraHideInGal,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaAccount.A_zimbraMailTransport,type:_STRING_,ref:"attrs/"+ZaAccount.A_zimbraMailTransport},{id:ZaAccount.A_zimbraPasswordLockoutEnabled,type:_COS_ENUM_,ref:"attrs/"+ZaAccount.A_zimbraPasswordLockoutEnabled,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaAccount.A_zimbraPasswordLockoutDuration,type:_COS_MLIFETIME_,ref:"attrs/"+ZaAccount.A_zimbraPasswordLockoutDuration},{id:ZaAccount.A_zimbraPasswordLockoutMaxFailures,type:_COS_NUMBER_,ref:"attrs/"+ZaAccount.A_zimbraPasswordLockoutMaxFailures,maxInclusive:2147483647,minInclusive:0},{id:ZaAccount.A_zimbraPasswordLockoutFailureLifetime,type:_COS_MLIFETIME_,ref:"attrs/"+ZaAccount.A_zimbraPasswordLockoutFailureLifetime},{id:ZaAccount.A_zimbraFreebusyExchangeUserOrg,ref:"attrs/"+ZaAccount.A_zimbraFreebusyExchangeUserOrg,type:_COS_STRING_},{id:ZaAccount.A2_ldap_ds,ref:ZaAccount.A2_ldap_ds,type:_OBJECT_,items:ZaDataSource.myXModel.items},{id:ZaAccount.A2_zimbra_ds,ref:ZaAccount.A2_zimbra_ds,type:_OBJECT_,items:ZaDataSource.myXModel.items},{id:ZaAccount.A2_datasources,ref:ZaAccount.A2_datasources,type:_LIST_,listItem:{type:_OBJECT_,items:ZaDataSource.myXModel.items}},{id:ZaAccount.A2_isExternalAuth,ref:ZaAccount.A2_isExternalAuth,type:_ENUM_,choices:ZaModel.BOOLEAN_CHOICES1}]};
ZaItem._ATTR[ZaAccount.A_displayname]=ZaMsg.attrDesc_accountName;
ZaItem._ATTR[ZaAccount.A_description]=ZaMsg.attrDesc_description;
ZaItem._ATTR[ZaAccount.A_firstName]=ZaMsg.attrDesc_firstName;
ZaItem._ATTR[ZaAccount.A_lastName]=ZaMsg.attrDesc_lastName;
ZaItem._ATTR[ZaAccount.A_accountStatus]=ZaMsg.attrDesc_accountStatus;
ZaItem._ATTR[ZaAccount.A_mailHost]=ZabMsg.attrDesc_mailHost;
ZaItem._ATTR[ZaAccount.A_zimbraMailQuota]=ZaMsg.attrDesc_zimbraMailQuota;
ZaItem._ATTR[ZaAccount.A_notes]=ZaMsg.attrDesc_notes;
ZaAccount._accountStatus=function(c){var b=ZaAccount.getAccountStatusMsg(c);
return(b==null)?c:b
};
ZaAccount.getAccountStatusMsg=function(b){if(b==ZaAccount.ACCOUNT_STATUS_ACTIVE){return ZaMsg.accountStatus_active
}else{if(b==ZaAccount.ACCOUNT_STATUS_CLOSED){return ZaMsg.accountStatus_closed
}else{if(b==ZaAccount.ACCOUNT_STATUS_LOCKED){return ZaMsg.accountStatus_locked
}else{if(b==ZaAccount.ACCOUNT_STATUS_LOCKOUT){return ZaMsg.accountStatus_lockout
}else{if(b==ZaAccount.ACCOUNT_STATUS_MAINTENANCE){return ZaMsg.accountStatus_maintenance
}else{if(b==ZaAccount.ACCOUNT_STATUS_PENDING){return ZaMsg.accountStatus_pending
}else{return""
}}}}}}};
ZaAccount.initMethod=function(){this.attrs=new Object();
this.id="";
this.name="";
this.attrs[ZaAccount.A_zimbraMailAlias]=new Array();
this.attrs[ZaAccount.A_zimbraForeignPrincipal]=new Array();
this[ZaAccount.A2_memberOf]={directMemberList:[],indirectMemberList:[],nonMemberList:[]};
this[ZaAccount.A2_directMemberList+"_more"]=0;
this[ZaAccount.A2_indirectMemberList+"_more"]=0
};
ZaItem.initMethods.ZaAccount.push(ZaAccount.initMethod);
ZaAccount.getDomain=function(b){if(!b){return null
}return b.substring(b.lastIndexOf("@")+1)
};
ZaAccount.isAutoMailServer=function(){return(this.getInstanceValue(ZaAccount.A2_autoMailServer)=="FALSE"&&!AjxUtil.isEmpty(ZaApp.getInstance().getServerListChoices().getChoices())&&!AjxUtil.isEmpty(ZaApp.getInstance().getServerListChoices().getChoices().values))
};
ZaAccount.setCosChanged=function(f,d,c){var b=this.getInstanceValue();
if(b==f){return
}this.setInstanceValue(f);
if(ZaItem.ID_PATTERN.test(f)){this._defaultValues=ZaCos.getCosById(f)
}else{if(!AjxUtil.isEmpty(f)){var e=ZaCos.getCosByName(f);
if(e){this._defaultValues=e;
this.getInstance().attrs[ZaAccount.A_COSId]=e.id
}else{this.setError(AjxMessageFormat.format(ZaMsg.ERROR_NO_SUCH_COS,[f]));
var d=new DwtXFormsEvent(c,this,f);
c.notifyListeners(DwtEvent.XFORMS_VALUE_ERROR,d)
}}}};
ZaAccount.setDomainChanged=function(n,r,c){try{var u=c.getInstance();
var h=ZaAccount.getDomain(u[ZaAccount.A_name]);
this.setInstanceValue(n);
var m=c.parent;
var w=ZaAccount.getDomain(n);
if(!w){return
}var e;
try{e=ZaDomain.getDomainByName(w)
}catch(t){if(t.code==ZmCsfeException.SVC_PERM_DENIED){c.getModel().setInstanceValue(c.getInstance(),"setAttrs",[]);
c.getModel().setInstanceValue(c.getInstance(),ZaAccount.A2_errorMessage,AjxMessageFormat.format(ZaMsg.CANNOT_CREATE_ACCOUNTS_IN_THIS_DOMAIN,[w]));
return
}else{if(t.code==ZmCsfeException.NO_SUCH_DOMAIN){return
}else{throw (t)
}}}if(u[ZaAccount.A2_autoCos]=="TRUE"){ZaAccount.setDefaultCos(u)
}if((w!=h)||(u[ZaAccount.A_name].indexOf("@")==0)){try{ZaItem.prototype.loadNewObjectDefaults.call(u,"name",w)
}catch(t){if(t.code==ZmCsfeException.NO_SUCH_DOMAIN){return n
}else{throw (t)
}}if(u.getAttrs[ZaAccount.A_zimbraAvailableSkin]||u.getAttrs.all){var v=ZaApp.getInstance().getInstalledSkins();
if(AjxUtil.isEmpty(v)){if(e&&e.attrs&&!AjxUtil.isEmpty(e.attrs[ZaDomain.A_zimbraAvailableSkin])){v=e.attrs[ZaDomain.A_zimbraAvailableSkin]
}else{if(u._defaultValues&&u._defaultValues.attrs&&!AjxUtil.isEmpty(u._defaultValues.attrs[ZaAccount.A_zimbraAvailableSkin])){v=u._defaultValues.attrs[ZaAccount.A_zimbraAvailableSkin]
}else{v=[]
}}}else{if(AjxUtil.isString(v)){v=[v]
}}var f=ZaApp.getInstance().getSkinChoices(v);
if(ZaNewAccountXWizard.themeChoices){ZaNewAccountXWizard.themeChoices.setChoices(f);
ZaNewAccountXWizard.themeChoices.dirtyChoices()
}if(ZaAccountXFormView.themeChoices){ZaAccountXFormView.themeChoices.setChoices(f);
ZaAccountXFormView.themeChoices.dirtyChoices()
}}if(u.getAttrs[ZaAccount.A_zimbraZimletAvailableZimlets]||u.getAttrs.all){var g=ZaZimlet.getAll("extension");
if(!AjxUtil.isEmpty(g)&&g instanceof ZaItemList||g instanceof AjxVector){g=g.getArray()
}if(AjxUtil.isEmpty(g)){if(e&&e.attrs&&!AjxUtil.isEmpty(e.attrs[ZaDomain.A_zimbraZimletDomainAvailableZimlets])){g=e.attrs[ZaDomain.A_zimbraZimletDomainAvailableZimlets]
}else{if(u._defaultValues&&u._defaultValues.attrs&&!AjxUtil.isEmpty(u._defaultValues.attrs[ZaAccount.A_zimbraZimletAvailableZimlets])){g=u._defaultValues.attrs[ZaAccount.A_zimbraZimletAvailableZimlets]
}else{g=[]
}}if(ZaNewAccountXWizard.zimletChoices){ZaNewAccountXWizard.zimletChoices.setChoices(g);
ZaNewAccountXWizard.zimletChoices.dirtyChoices()
}if(ZaAccountXFormView.zimletChoices){ZaAccountXFormView.zimletChoices.setChoices(g);
ZaAccountXFormView.zimletChoices.dirtyChoices()
}}else{var q=g.length;
var l=[];
for(var s=0;
s<q;
s++){var o=g[s];
l.push(o.name)
}if(ZaNewAccountXWizard.zimletChoices){ZaNewAccountXWizard.zimletChoices.setChoices(l);
ZaNewAccountXWizard.zimletChoices.dirtyChoices()
}if(ZaAccountXFormView.zimletChoices){ZaAccountXFormView.zimletChoices.setChoices(l);
ZaAccountXFormView.zimletChoices.dirtyChoices()
}}}ZaAccount.setDefaultCos(u);
u[ZaAccount.A2_autoCos]="TRUE";
c.refresh()
}if(h!=w){if(e&&e.attrs){var b=e.attrs[ZaDomain.A_zimbraDomainCOSMaxAccounts];
if(b&&b.length>0){c.getModel().setInstanceValue(c.getInstance(),ZaAccount.A2_errorMessage,"");
c.getModel().setInstanceValue(c.getInstance(),ZaAccount.A2_accountTypes,e.getAccountTypes());
c.parent.updateAccountType()
}}}if(e&&e.attrs){var k=e.attrs[ZaDomain.A_domainMaxAccounts];
var b=e.attrs[ZaDomain.A_zimbraDomainCOSMaxAccounts];
if(k){k=parseInt(k)
}if(k&&k>0){var j=e.getUsedDomainAccounts(w);
if(k<j&&(!b||b.length<=0)){c.getModel().setInstanceValue(c.getInstance(),ZaAccount.A2_accountTypes,null);
var d;
if(j-k>1){d=AjxMessageFormat.format(ZaMsg.NAD_DomainAccountLimits_p,[w,j-k])
}else{d=AjxMessageFormat.format(ZaMsg.NAD_DomainAccountLimits_s,[w,j-k])
}c.getModel().setInstanceValue(c.getInstance(),ZaAccount.A2_domainLeftAccounts,d)
}else{c.getModel().setInstanceValue(c.getInstance(),ZaAccount.A2_domainLeftAccounts,null)
}}else{c.getModel().setInstanceValue(c.getInstance(),ZaAccount.A2_domainLeftAccounts,null)
}}if(e&&e.attrs&&e.attrs[ZaDomain.A_AuthMech]&&(e.attrs[ZaDomain.A_AuthMech]!=ZaDomain.AuthMech_zimbra)){c.getModel().setInstanceValue(c.getInstance(),ZaAccount.A2_isExternalAuth,true)
}else{c.getModel().setInstanceValue(c.getInstance(),ZaAccount.A2_isExternalAuth,false)
}if(c.parent.setDirty){c.parent.setDirty(true)
}}catch(t){ZaApp.getInstance().getCurrentController()._handleException(t,"ZaAccount.setDomainChanged",null,false)
}};
ZaAccount.generateDisplayName=function(b,g,d,j){var c=this.getInstanceValue(ZaAccount.A_displayname);
var f="";
var e=g,h=d;
if(ZaZimbraAdmin.isLanguage("ja")){e=d;
h=g
}if(e){f=e
}else{f=""
}if(j){f+=" ";
f+=j;
f+="."
}if(h){if(f.length>0){f+=" "
}f+=h
}if(f==c){return false
}else{this.getModel().setInstanceValue(b,ZaAccount.A_displayname,f);
return true
}};
ZaAccount.setDefaultCos=function(b){var c=ZaCos.getDefaultCos4Account(b[ZaAccount.A_name],b.attrs[ZaAccount.A_zimbraIsExternalVirtualAccount]=="TRUE");
if(c&&c.id){b._defaultValues=c;
b.attrs[ZaAccount.A_COSId]=c.id
}};
ZaAccount.prototype.getCurrentCos=function(){try{var b=this.attrs[ZaAccount.A_COSId];
var c;
c=ZaCos.getCosById(this.attrs[ZaAccount.A_COSId]);
if(!c){c=ZaCos.getDefaultCos4Account(this.name,this.attrs[ZaAccount.A_zimbraIsExternalVirtualAccount]=="TRUE")
}return c
}catch(d){ZaApp.getInstance().getCurrentController()._handleException(d,"ZaAccount.prototype.getCurrentCos",null,false)
}};
ZaAccount.getLastLoginTime=function(b){if(b){return ZaItem.formatServerTime(b)
}else{return ZaMsg.Last_Login_Never
}};
ZaAccount.prototype.manageSpecialAttrs=function(){var e="";
var h=this.attrs[ZaAccount.A_zimbraPrefTimeZoneId];
if(h){var c=ZaModel.setUnrecoganizedChoiceValue(h,ZaSettings.timeZoneChoices);
if(h!=c){this.attrs[ZaAccount.A_zimbraPrefTimeZoneId]=c;
e+=AjxMessageFormat.format(ZaMsg.WARNING_TIME_ZONE_INVALID,[h,'account - "'+this.name+'"'])
}}var d=this.attrs[ZaAccount.A_zimbraPrefMailDefaultCharset];
if(d){var f=ZaModel.setUnrecoganizedChoiceValue(d,ZaSettings.mailCharsetChoices);
if(d!=f){this.attrs[ZaAccount.A_zimbraPrefMailDefaultCharset]=f;
e+=AjxMessageFormat.format(ZaMsg.WARNING_CHARSET_INVALID,[d,'account - "'+this.name+'"'])
}}var g=this.attrs[ZaCos.A_zimbraPrefLocale];
if(g){var b=ZaModel.setUnrecoganizedChoiceValue(g,ZaSettings.getLocaleChoices());
if(g!=b){this.attrs[ZaCos.A_zimbraPrefLocale]=b;
e+=AjxMessageFormat.format(ZaMsg.WARNING_LOCALE_INVALID,[g,'account - "'+this.name+'"'])
}}if(e&&e.length>0){ZaApp.getInstance().getCurrentController().popupMsgDialog(e,true)
}};
ZaAccount.isAdminAccount=function(){try{return(this.getInstanceValue(ZaAccount.A_zimbraIsAdminAccount)=="TRUE"||this.getInstanceValue(ZaAccount.A_zimbraIsDelegatedAdminAccount)=="TRUE")
}catch(b){return false
}};
ZaAccount.isEmailRetentionPolicyEnabled=function(){try{var b=this.getInstance();
var f=ZaApp.getInstance().getGlobalConfig();
if(AjxUtil.isEmpty(b.attrs[ZaAccount.A_mailHost])){var d=new ZmCsfeException("The request was not sent",ZmCsfeException.ACCT_INVALID_ATTR_VALUE,"GetEffectiveRightsRequest","zimbraMailHost cannot be read");
throw (d)
}var g=ZaApp.getInstance().getServerByName(b.attrs[ZaAccount.A_mailHost]);
var c=g.attrs[ZaServer.A_zimbraMailPurgeSleepInterval];
var e=f.attrs[ZaGlobalConfig.A_zimbraMailPurgeSleepInterval];
if(c===_UNDEFINED_||c===null){if(window.console&&window.console.log){console.log("server setting A_zimbraMailPurgeSleepInterval is NOT set.")
}if(e!=null&&ZaUtil.getLifeTimeInSeconds(e)==0){return false
}}else{if(ZaUtil.getLifeTimeInSeconds(c)==0){return false
}}return true
}catch(d){return false
}};
ZaAccount.isEmailRetentionPolicyDisabled=function(){return !ZaAccount.isEmailRetentionPolicyEnabled.call(this)
};
ZaAccount.isShowAccountType=function(){var g=this.getForm();
var c=g.getInstance();
var j=c[ZaAccount.A2_accountTypes];
var d=false;
for(var f=0;
f<j.length&&!d;
f++){var e=ZaAccount.getDomain(c.name);
var b=ZaDomain.getDomainByName(e,g.parent._app);
var h=ZaCos.getCosById(j[f],ZaApp.getInstance());
if(h==null){ZaApp.getInstance().getCurrentController().popupErrorDialog(AjxMessageFormat.format(ZaMsg.ERROR_INVALID_ACCOUNT_TYPE,[j[f]]));
return d
}if(b.isCosLimitInDomain(h.name)){d=true
}}return d
};
ZaAccount.getAccountTypeOutput=function(f){var d=this.getForm();
var m=d.getInstance();
var p=m[ZaAccount.A2_accountTypes];
var g=[];
if(p&&p.length>0){var k=m[ZaAccount.A2_currentAccountType];
var j=ZaCos.getDefaultCos4Account(m[ZaAccount.A_name],m.attrs[ZaAccount.A_zimbraIsExternalVirtualAccount]=="TRUE");
if(!k&&j){k=j.id
}var e=ZaAccount.getDomain(m.name);
var o=ZaDomain.getDomainByName(e,d.parent._app);
var r=true;
g.push("<table with=100%>");
g.push("<colgroup><col width='200px' /><col width='200px' /><col width='200px' /></colgroup> ");
g.push("<tbody>");
var q="account_type_radio_group_"+Dwt.getNextId();
o.updateUsedAccounts();
for(var h=0;
h<p.length;
h++){var n=ZaCos.getCosById(p[h],ZaApp.getInstance());
var c=false;
if(n==null){ZaApp.getInstance().getCurrentController().popupErrorDialog(AjxMessageFormat.format(ZaMsg.ERROR_INVALID_ACCOUNT_TYPE,[p[h]]));
return
}var l=n.attrs[ZaCos.A_description];
if(!l||l.length<1){l=n.name
}if(h%3==0){g.push("<tr>")
}g.push("<td>");
var b=o.getUsedAccounts(n.name);
var s=o.getAvailableAccounts(n.name);
var f=false;
if(d&&d.parent&&d.parent instanceof ZaNewAccountXWizard){f=true
}if(s>0){r=false
}else{if(k==p[h]){r=false
}}if(k==p[h]){c=true;
if(k!=m.attrs[ZaAccount.A_COSId]){m.autoCos="FALSE";
m.attrs[ZaAccount.A_COSId]=k;
if(f){d.parent.updateCosGrouper()
}}}g.push("<div><label style='font-weight: bold;"+((s>0||(k==p[h]&&!f))?"":"color: #686357;")+"'>");
g.push("<input type=radio name="+q+" value="+p[h]+((s>0||(k==p[h]&&!f))?(' onclick="ZaAccount.setAccountType.call('+this.getGlobalRef()+", '"+p[h]+"', event );\" "):(" disabled "))+((c&&(s>0||!f))?" checked ":"")+" />");
g.push(l+"</label></div>");
g.push("<div>"+AjxMessageFormat.format(ZaMsg.AccountsAvailable,[b,s])+"</div> ");
g.push("</td>");
if((h%3==2)||(h+1==p.length)){g.push("</tr>")
}}g.push("</tbody></table>");
if(r){d.getModel().setInstanceValue(d.getInstance(),ZaAccount.A2_showAccountTypeMsg,AjxMessageFormat.format(ZaMsg.MSG_AccountTypeUnavailable,[j.name]))
}else{d.getModel().setInstanceValue(d.getInstance(),ZaAccount.A2_showAccountTypeMsg,null)
}}return g.join("")
};
ZaAccount.setAccountType=function(d,f){var e=this.getForm();
var b=e.getInstance();
var c=ZaCos.getCosById(d);
if(c.id!=b.attrs[ZaAccount.A_COSId]){if(b.cos){b._defaultValues=c
}b.autoCos="FALSE";
b.attrs[ZaAccount.A_COSId]=c.id;
e.parent._isCosChanged=true;
e.itemChanged(this,d,f);
if(e.parent.setDirty){e.parent.setDirty(true)
}e.parent.updateCosGrouper()
}};
ZaAccount.isAccountTypeSet=function(e){var b=e.attrs[ZaAccount.A_COSId]||e[ZaAccount.A2_currentAccountType];
var d=ZaCos.getDefaultCos4Account(e[ZaAccount.A_name],e.attrs[ZaAccount.A_zimbraIsExternalVirtualAccount]=="TRUE");
if(!e.accountTypes||e.accountTypes.length<=0){return true
}else{if(!b){return false
}}if(b==d.id){return true
}for(var c=0;
c<e.accountTypes.length;
c++){if(b==e.accountTypes[c]){return true
}}return false
};
ZaAccount.getCatchAllDomain=function(b){return"@"+b
};
ZaAccount.getCatchAllAccount=function(c){var f={limit:1,type:[ZaSearch.ACCOUNTS],domain:c,applyCos:0,attrs:[ZaAccount.A_zimbraMailCatchAllAddress],query:(["(",ZaAccount.A_zimbraMailCatchAllAddress,"=",ZaAccount.getCatchAllDomain(c),")"].join(""))};
var e=ZaSearch.searchDirectory(f).Body.SearchDirectoryResponse;
var d=new ZaItemList(ZaAccount);
d.loadFromJS(e);
var b=d.getArray();
if(!AjxUtil.isEmpty(b)){if(b[0]){return b[0]
}}return new ZaAccount(ZaApp.getInstance())
};
ZaAccount.modifyCatchAll=function(h,b){if(h==null|h.length<=0){return
}var d=AjxSoapDoc.create("ModifyAccountRequest","urn:zimbraAdmin",null);
d.set("id",h);
var e="";
if(b==null||b.length==0){e=""
}else{if(b.indexOf("@")==-1){e=ZaAccount.getCatchAllDomain(b)
}else{if(b.indexOf("@")!=0){e=b.substring(b.lastIndexOf("@"))
}else{e=b
}}}var c=d.set("a",e);
c.setAttribute("n",ZaAccount.A_zimbraMailCatchAllAddress);
var g=new ZmCsfeCommand();
var f=new Object();
f.soapDoc=d;
f.noAuthToken=true;
g.invoke(f)
};
ZaAccount.getRelatedList=function(c){var f=this.attrs[ZaAccount.A_zimbraMailAlias];
var m=ZaCos.getCosById(this.attrs[ZaAccount.A_COSId])||ZaCos.getDefaultCos4Account(this[ZaAccount.A_name],this.attrs[ZaAccount.A_zimbraIsExternalVirtualAccount]=="TRUE");
var d=ZaAccount.getDomain(this[ZaAccount.A_name]);
var n=ZaDomain.getDomainByName(d);
var l=[];
if(f.length>0){var g=new ZaTreeItemData({text:ZaMsg.TABT_Aliases,count:f.length,image:"AccountAlias",mappingId:ZaZimbraAdmin._ACCOUNT_ALIAS_LIST_VIEW,path:c+ZaTree.SEPERATOR+this.name+ZaTree.SEPERATOR+ZaMsg.TABT_Aliases});
g.setData("aliasTargetId",this.id);
ZaOverviewPanelController.overviewTreeListeners[ZaZimbraAdmin._ACCOUNT_ALIAS_LIST_VIEW]=ZaOverviewPanelController.aliasListTreeListener;
l.push(g)
}var b=this[ZaAccount.A2_memberOf];
if(b!=null){var h=b[ZaAccount.A2_directMemberList];
var k=b[ZaAccount.A2_indirectMemberList];
if((h.length+k.length)>0){var e=new ZaTreeItemData({text:ZaMsg.OVP_distributionLists,count:h.length+k.length,image:"DistributionList",mappingId:ZaZimbraAdmin._DISTRIBUTION_LISTS_LIST_VIEW,path:c+ZaTree.SEPERATOR+this.name+ZaTree.SEPERATOR+ZaMsg.OVP_distributionLists});
e.setData(ZaAccount.A2_memberOf,b);
ZaOverviewPanelController.overviewTreeListeners[ZaZimbraAdmin._DISTRIBUTION_LISTS_LIST_VIEW]=ZaOverviewPanelController.dlListTreeListener;
l.push(e)
}}var j=new ZaTreeItemData({text:m.name,image:"COS",forceNode:true,mappingId:ZaZimbraAdmin._COS_VIEW,path:c+ZaTree.SEPERATOR+m.name});
j.setData(ZaOverviewPanelController._OBJ_ID,m.id);
j.setData("skipHistory","TRUE");
ZaOverviewPanelController.overviewTreeListeners[ZaZimbraAdmin._COS_VIEW]=ZaOverviewPanelController.cosTreeListener;
l.push(j);
var o=new ZaTreeItemData({text:d,image:"Domain",forceNode:true,mappingId:ZaZimbraAdmin._DOMAIN_VIEW,path:c+ZaTree.SEPERATOR+d});
o.setData(ZaOverviewPanelController._OBJ_ID,n.id);
o.setData("skipHistory","TRUE");
ZaOverviewPanelController.overviewTreeListeners[ZaZimbraAdmin._DOMAIN_VIEW]=ZaOverviewPanelController.domainTreeListener;
l.push(o);
return l
};
ZaItem.getRelatedMethods.ZaAccount.push(ZaAccount.getRelatedList);
ZaAccount.prototype._handleAccountMembershipResponse=function(b){var f=b.getResponse().Body;
if(!f){return
}var e=f.GetAccountMembershipResponse;
if(!e){return
}this[ZaAccount.A2_memberOf]=ZaAccountMemberOfListView.parseGetAccMembershipResponse(e);
this[ZaAccount.A2_directMemberList+"_more"]=(this[ZaAccount.A2_memberOf][ZaAccount.A2_directMemberList].length>ZaAccountMemberOfListView.SEARCH_LIMIT)?1:0;
this[ZaAccount.A2_indirectMemberList+"_more"]=(this[ZaAccount.A2_memberOf][ZaAccount.A2_indirectMemberList].length>ZaAccountMemberOfListView.SEARCH_LIMIT)?1:0;
var d=ZaApp.getInstance().getCurrentController();
if(!d||d._currentObject!==this){return
}var c=d._view;
if(c){var g=c.getMyForm();
if(g){g.setInstanceValue(ZaAccountMemberOfListView.cloneMemberOf(this),ZaAccount.A2_memberOf);
g.setInstanceValue(this[ZaAccount.A2_directMemberList+"_more"],ZaAccount.A2_directMemberList+"_more");
g.setInstanceValue(this[ZaAccount.A2_indirectMemberList+"_more"],ZaAccount.A2_indirectMemberList+"_more");
g.setInstanceValue(true,"memberOfLoaded");
g.setInstance(g.getInstance())
}}}
}if(AjxPackage.define("zimbraAdmin.dl.model.ZaDistributionList")){ZaDistributionList=function(f,b,e,d,c){ZaItem.call(this,"ZaDistributionList");
this._init();
this.attrs=new Object();
this.attrs[ZaAccount.A_zimbraMailAlias]=[];
this.id=(f!=null)?f:null;
this.type=ZaItem.DL;
this.name=(b!=null)?b:null;
this._selfMember=new ZaDistributionListMember(this.name);
if(d!=null){this.attrs.description=d
}if(c!=null){this.attrs.zimbraNotes=c
}this.attrs[ZaDistributionList.A_zimbraIsACLGroup]="TRUE";
this[ZaDistributionList.A2_dlType]=ZaDistributionList.STATIC_DL_TYPE;
this[ZaDistributionList.A2_numMembers]=0;
this[ZaDistributionList.A2_memberList]=(e!=null)?e:new Array();
this[ZaDistributionList.A2_memberPool]=new Array();
this[ZaAccount.A2_autoMailServer]="TRUE";
this[ZaAccount.A2_memberOf]={directMemberList:[],indirectMemberList:[],nonMemberList:[]};
this[ZaAccount.A2_directMemberList+"_more"]=0;
this[ZaAccount.A2_indirectMemberList+"_more"]=0;
this[ZaDistributionList.A2_DLOwners]=new Array()
};
ZaDistributionList.prototype=new ZaItem;
ZaDistributionList.prototype.constructor=ZaDistributionList;
ZaItem.modifyMethods.ZaDistributionList=new Array();
ZaItem.loadMethods.ZaDistributionList=new Array();
ZaItem.initMethods.ZaDistributionList=new Array();
ZaItem.createMethods.ZaDistributionList=new Array();
ZaItem.ObjectModifiers.ZaDistributionList=new Array();
ZaItem.getRelatedMethods.ZaDistributionList=new Array();
ZaDistributionList.EMAIL_ADDRESS="ZDLEA";
ZaDistributionList.DESCRIPTION="ZDLDESC";
ZaDistributionList.ID="ZDLID";
ZaDistributionList.MEMBER_QUERY_LIMIT=25;
ZaDistributionList.MEMBER_LIST_PAGE_SIZE=15;
ZaDistributionList.MEMBER_POOL_PAGE_SIZE=15;
ZaDistributionList.A_zimbraGroupId="zimbraGroupId";
ZaDistributionList.A_zimbraCreateTimestamp="zimbraCreateTimestamp";
ZaDistributionList.A_mailStatus="zimbraMailStatus";
ZaDistributionList.A2_dlType="dlType";
ZaDistributionList.A_memberOfURL="memberURL";
ZaDistributionList.A_zimbraIsACLGroup="zimbraIsACLGroup";
ZaDistributionList.A2_members="members";
ZaDistributionList.A2_allMemberHash="allMemberHash";
ZaDistributionList.A2_allMemberPages="allMemberPages";
ZaDistributionList.A2_allMemberHash="allMemberHash";
ZaDistributionList.A2_memberList="memberList";
ZaDistributionList.A2_origList="origList";
ZaDistributionList.A2_addList="addList";
ZaDistributionList.A2_removeList="removeList";
ZaDistributionList.A2_query="query";
ZaDistributionList.A2_pagenum="pagenum";
ZaDistributionList.A2_poolPagenum="poolPagenum";
ZaDistributionList.A2_poolNumPages="poolNumPages";
ZaDistributionList.A2_totalNumInPool="totalNumInPool";
ZaDistributionList.A2_numMembers="numMembers";
ZaDistributionList.A2_memPagenum="memPagenum";
ZaDistributionList.A2_memNumPages="memNumPages";
ZaDistributionList.A2_memberPool="memberPool";
ZaDistributionList.A2_optionalAdd="optionalAdd";
ZaDistributionList.A2_membersSelected="membersSelected";
ZaDistributionList.A2_nonmembersSelected="nonmembersSelected";
ZaDistributionList.A2_memberPoolSelected="memberPoolSelected";
ZaDistributionList.A2_directMemberSelected="directMemberSelected";
ZaDistributionList.A2_indirectMemberSelected="indirectMemberSelected";
ZaDistributionList.A2_directMemberList="directMemberList";
ZaDistributionList.A2_indirectMemberList="indirectMemberList";
ZaDistributionList.A2_nonMemberList="nonMemberList";
ZaDistributionList.A2_alias_selection_cache="alias_selection_cache";
ZaDistributionList.A_isAdminGroup="zimbraIsAdminGroup";
ZaDistributionList.A_zimbraPrefReplyToAddress="zimbraPrefReplyToAddress";
ZaDistributionList.A_zimbraPrefReplyToDisplay="zimbraPrefReplyToDisplay";
ZaDistributionList.A_zimbraPrefReplyToEnabled="zimbraPrefReplyToEnabled";
ZaDistributionList.A_zimbraDistributionListSubscriptionPolicy="zimbraDistributionListSubscriptionPolicy";
ZaDistributionList.A_zimbraDistributionListUnsubscriptionPolicy="zimbraDistributionListUnsubscriptionPolicy";
ZaDistributionList.A_zimbraDistributionListSendShareMessageToNewMembers="zimbraDistributionListSendShareMessageToNewMembers";
ZaDistributionList.A2_zimbraDLSubscriptionPolicyAccept="ACCEPT";
ZaDistributionList.A2_zimbraDLSubscriptionPolicyReject="REJECT";
ZaDistributionList.A2_zimbraDLSubscriptionPolicyApproval="APPROVAL";
ZaDistributionList.A2_DLOwners="DLOwner";
ZaDistributionList.A2_owners_selection_cache="owners_selection_cache";
ZaDistributionList.getDLStatus=function(b){if(b=="enabled"){return ZaMsg.DL_Status_enabled
}else{if(b=="disabled"){return ZaMsg.DL_Status_disabled
}else{return ZaMsg.ERROR_UNKNOWN
}}};
ZaDistributionList.RENAME_DL_RIGHT="renameDistributionList";
ZaDistributionList.ADD_DL_ALIAS_RIGHT="addDistributionListAlias";
ZaDistributionList.REMOVE_DL_ALIAS_RIGHT="removeDistributionListAlias";
ZaDistributionList.REMOVE_DL_MEMBER_RIGHT="removeDistributionListMember";
ZaDistributionList.ADD_DL_MEMBER_RIGHT="addDistributionListMember";
ZaDistributionList.GET_DL_MEMBERSHIP_RIGHT="getDistributionListMembership";
ZaDistributionList.GET_DL_SHARE_INFO_RIGHT="getDistributionListShareInfo";
ZaDistributionList.RIGHT_VIEW_ADMINUI_COMPONENTS="viewDistributionListAdminUI";
ZaDistributionList.searchAttributes=AjxBuffer.concat(ZaAccount.A_displayname,",",ZaItem.A_zimbraId,",",ZaAccount.A_mailHost,",",ZaAccount.A_uid,",",ZaAccount.A_description,",",ZaDistributionList.A_isAdminGroup,",",ZaDistributionList.A_mailStatus);
ZaDistributionList.DYNAMIC_DL_TYPE="1";
ZaDistributionList.STATIC_DL_TYPE="0";
ZaDistributionList.postLoadDataFunction=new Array();
ZaDistributionList.prototype.remove=function(d){var b=AjxSoapDoc.create("DeleteDistributionListRequest",ZaZimbraAdmin.URN,null);
b.set("id",this.id);
this.deleteCommand=new ZmCsfeCommand();
var c=new Object();
c.soapDoc=b;
c.noAuthToken=true;
if(d){c.asyncMode=true;
c.callback=d
}this.deleteCommand.invoke(c)
};
ZaDistributionList.prototype.rename=function(b){var d=AjxSoapDoc.create("RenameDistributionListRequest",ZaZimbraAdmin.URN,null);
d.set("id",this.id);
d.set("newName",b);
var f=new Object();
f.soapDoc=d;
var c={controller:ZaApp.getInstance().getCurrentController(),busyMsg:ZaMsg.BUSY_RENAME_DL};
var e=ZaRequestMgr.invoke(f,c).Body.RenameDistributionListResponse;
this.initFromJS(e.dl[0])
};
ZaDistributionList.createMethod=function(f,h){f.attrs[ZaAccount.A_mail]=f.name;
var g;
var m=AjxSoapDoc.create("CreateDistributionListRequest",ZaZimbraAdmin.URN,null);
m.set(ZaAccount.A_name,f.name);
if(f[ZaDistributionList.A2_dlType]==ZaDistributionList.DYNAMIC_DL_TYPE){m.setMethodAttribute("dynamic",ZaDistributionList.DYNAMIC_DL_TYPE)
}if(f[ZaAccount.A2_autoMailServer]=="TRUE"){f.attrs[ZaAccount.A_mailHost]=null
}if(f[ZaAccount.A2_autoCos]=="TRUE"){f.attrs[ZaAccount.A_COSId]=null
}for(var l in f.attrs){if(l==ZaAccount.A_zimbraMailAlias||l==ZaItem.A_objectClass||l==ZaAccount.A2_mbxsize||l==ZaAccount.A_mail){continue
}if(f[ZaDistributionList.A2_dlType]!=ZaDistributionList.DYNAMIC_DL_TYPE&&l==ZaDistributionList.A_zimbraIsACLGroup){continue
}if(f.attrs[l] instanceof Array){var c=f.attrs[l].length;
if(c){for(var d=0;
d<c;
d++){if(typeof(f.attrs[l][d])=="object"){var j=m.set("a",f.attrs[l][d].toString());
j.setAttribute("n",l)
}else{var j=m.set("a",f.attrs[l][d]);
j.setAttribute("n",l)
}}}}else{if(f.attrs[l] instanceof AjxVector){var n=f.attrs[l].getArray();
var c=n.length;
if(c){for(var d=0;
d<c;
d++){if(n[d]!=null){if(typeof(n[d])=="object"){var j=m.set("a",n[d].toString());
j.setAttribute("n",l)
}else{var j=m.set("a",n[d]);
j.setAttribute("n",l)
}}}}}else{if(f.attrs[l]!=null){if(typeof(f.attrs[l])=="object"){var j=m.set("a",f.attrs[l].toString());
j.setAttribute("n",l)
}else{var j=m.set("a",f.attrs[l]);
j.setAttribute("n",l)
}}}}}try{var e=new Object();
e.soapDoc=m;
var b={};
b.controller=ZaApp.getInstance().getCurrentController();
b.busyMsg=ZaMsg.BUSY_CREATE_ACCOUNTS;
g=ZaRequestMgr.invoke(e,b).Body.CreateDistributionListResponse
}catch(k){throw k;
return null
}h.initFromJS(g.dl[0]);
f.rights=h.rights;
f.setAttrs=h.setAttrs;
f.getAttrs=h.getAttrs;
f.id=h.id;
f.attrs[ZaItem.A_zimbraId]=h.attrs[ZaItem.A_zimbraId]
};
ZaItem.createMethods.ZaDistributionList.push(ZaDistributionList.createMethod);
ZaDistributionList.modifyMethod=function(l,f){var j=false;
var h=AjxSoapDoc.create("ModifyDistributionListRequest",ZaZimbraAdmin.URN,null);
h.set("id",this.id);
for(var k in f.attrs){if(k==ZaItem.A_objectClass||k==ZaAccount.A_mail||k==ZaItem.A_zimbraId||k==ZaAccount.A_zimbraMailAlias||k==ZaItem.A_zimbraACE){continue
}if((this.attrs[k]!=f.attrs[k])&&!(this.attrs[k]==undefined&&f.attrs[k]==="")){if(k==ZaAccount.A_uid){continue
}if(!ZaItem.hasWritePermission(k,f)){continue
}j=true;
if(f.attrs[k] instanceof Array){if(!this.attrs[k]){this.attrs[k]=[]
}else{if(!(this.attrs[k] instanceof Array)){this.attrs[k]=[this.attrs[k]]
}}if(f.attrs[k].join(",").valueOf()!=this.attrs[k].join(",").valueOf()){var c=f.attrs[k].length;
if(c){for(var d=0;
d<c;
d++){var g=null;
if(f.attrs[k][d] instanceof String){var g=h.set("a",f.attrs[k][d].toString())
}else{if(f.attrs[k][d] instanceof Object){var g=h.set("a",f.attrs[k][d].toString())
}else{if(f.attrs[k][d]){var g=h.set("a",f.attrs[k][d])
}}}if(g){g.setAttribute("n",k)
}}}else{var g=h.set("a","");
g.setAttribute("n",k)
}}}else{var g=h.set("a",f.attrs[k]);
g.setAttribute("n",k)
}}}if(!j){return
}var e=new Object();
e.soapDoc=h;
var b={controller:ZaApp.getInstance().getCurrentController(),busyMsg:ZaMsg.BUSY_MODIFY_DL};
resp=ZaRequestMgr.invoke(e,b).Body.ModifyDistributionListResponse;
this.initFromJS(resp.dl[0]);
this._toolTip=null;
return
};
ZaItem.modifyMethods.ZaDistributionList.push(ZaDistributionList.modifyMethod);
ZaDistributionList.prototype.getToolTip=function(){if(!this._toolTip){var c=new Array(20);
var b=0;
c[b++]="<table>";
c[b++]="<tr valign='center'><td colspan='2' align='left'>";
c[b++]="<div style='border-bottom: 1px solid black; white-space:nowrap; overflow:hidden;'>";
c[b++]="<table style='width:100%;'>";
c[b++]="<tr valign='center'>";
c[b++]="<td><b>"+AjxStringUtil.htmlEncode(this.name)+"</b></td>";
c[b++]="<td align='right'>";
if(this.attrs[ZaDistributionList.A_isAdminGroup]=="TRUE"){c[b++]=AjxImg.getImageHtml("DistributionListGroup")
}else{c[b++]=AjxImg.getImageHtml("DistributionList")
}c[b++]="</td>";
c[b++]="</table></div></td></tr>";
c[b++]="<tr></tr>";
b=this._addAttrRow(ZaItem.A_description,c,b);
b=this._addAttrRow(ZaItem.A_zimbraId,c,b);
c[b++]="</table>";
this._toolTip=c.join("")
}return this._toolTip
};
ZaDistributionList.addRemoveAliases=function(o,f){var n=-1;
var g=-1;
if(ZaItem.hasRight(ZaDistributionList.REMOVE_DL_ALIAS_RIGHT,this)||ZaItem.hasRight(ZaDistributionList.ADD_DL_ALIAS_RIGHT,this)){if(f.attrs[ZaAccount.A_zimbraMailAlias]){if(typeof f.attrs[ZaAccount.A_zimbraMailAlias]=="string"){var j=f.attrs[ZaAccount.A_zimbraMailAlias];
f.attrs[ZaAccount.A_zimbraMailAlias]=new Array();
f.attrs[ZaAccount.A_zimbraMailAlias].push(j)
}n=f.attrs[ZaAccount.A_zimbraMailAlias].length-1
}if(this.attrs[ZaAccount.A_zimbraMailAlias]){if(typeof this.attrs[ZaAccount.A_zimbraMailAlias]=="string"){var j=this.attrs[ZaAccount.A_zimbraMailAlias];
this.attrs[ZaAccount.A_zimbraMailAlias]=new Array();
this.attrs[ZaAccount.A_zimbraMailAlias].push(j)
}g=this.attrs[ZaAccount.A_zimbraMailAlias].length-1
}for(var b=n;
b>=0;
b--){for(var m=g;
m>=0;
m--){if(f.attrs[ZaAccount.A_zimbraMailAlias][b]==this.attrs[ZaAccount.A_zimbraMailAlias][m]){f.attrs[ZaAccount.A_zimbraMailAlias].splice(b,1);
this.attrs[ZaAccount.A_zimbraMailAlias].splice(m,1);
break
}}}if(g!=-1){g=this.attrs[ZaAccount.A_zimbraMailAlias].length
}if(ZaItem.hasRight(ZaDistributionList.REMOVE_DL_ALIAS_RIGHT,this)){try{for(var d=0;
d<g;
d++){this.removeAlias(this.attrs[ZaAccount.A_zimbraMailAlias][d])
}}catch(l){ZaApp.getInstance().getCurrentController()._handleException(l,"ZaDistributionList.addRemoveAliases",null,false);
return false
}}if(n!=-1){n=f.attrs[ZaAccount.A_zimbraMailAlias].length
}var e="";
var c=0;
if(ZaItem.hasRight(ZaDistributionList.ADD_DL_ALIAS_RIGHT,this)){try{for(var d=0;
d<n;
d++){var k=f.attrs[ZaAccount.A_zimbraMailAlias][d];
try{if(k){if(k.indexOf("@")!=k.lastIndexOf("@")){ZaApp.getInstance().getCurrentController()._errorDialog.setMessage(AjxMessageFormat.format(ZaMsg.ERROR_ALIAS_INVALID,[k]),null,DwtMessageDialog.CRITICAL_STYLE,null);
ZaApp.getInstance().getCurrentController()._errorDialog.popup();
break
}this.addAlias(k)
}}catch(l){if((l.code==ZmCsfeException.ACCT_EXISTS)&&k){var h=ZaXFormViewController.prototype._findAlias.call(this,k);
switch(h.type){case ZaItem.DL:if(h.name==k){e+="<br>"+AjxMessageFormat.format(ZaMsg.WARNING_EACH_ALIAS3,[h.name])
}else{e+="<br>"+AjxMessageFormat.format(ZaMsg.WARNING_EACH_ALIAS4,[h.name,k])
}break;
case ZaItem.ACCOUNT:if(h.name==k){e+="<br>"+AjxMessageFormat.format(ZaMsg.WARNING_EACH_ALIAS2,[h.name])
}else{e+="<br>"+AjxMessageFormat.format(ZaMsg.WARNING_EACH_ALIAS1,[h.name,k])
}break;
case ZaItem.RESOURCE:if(h.name==k){e+="<br>"+AjxMessageFormat.format(ZaMsg.WARNING_EACH_ALIAS5,[h.name])
}else{e+="<br>"+AjxMessageFormat.format(ZaMsg.WARNING_EACH_ALIAS6,[h.name,k])
}break;
default:e+="<br>"+AjxMessageFormat.format(ZaMsg.WARNING_EACH_ALIAS0,[k]);
break
}c++
}else{throw (l)
}}}if(c==1){ZaApp.getInstance().getCurrentController()._errorDialog.setMessage(AjxMessageFormat.format(ZaMsg.WARNING_ALIAS_EXISTS,[e]),"",DwtMessageDialog.WARNING_STYLE,ZabMsg.zimbraAdminTitle);
ZaApp.getInstance().getCurrentController()._errorDialog.popup()
}else{if(c>1){ZaApp.getInstance().getCurrentController()._errorDialog.setMessage(AjxMessageFormat.format(ZaMsg.WARNING_ALIASES_EXIST,[e]),"",DwtMessageDialog.WARNING_STYLE,ZabMsg.zimbraAdminTitle);
ZaApp.getInstance().getCurrentController()._errorDialog.popup()
}}}catch(l){ZaApp.getInstance().getCurrentController().popupErrorDialog(ZaMsg.FAILED_ADD_ALIASES,l);
return false
}}}};
ZaItem.modifyMethods.ZaDistributionList.push(ZaDistributionList.addRemoveAliases);
ZaDistributionList.addAliases=function(d,f){if(ZaItem.hasRight(ZaDistributionList.ADD_DL_ALIAS_RIGHT,f)){if(d.attrs[ZaAccount.A_zimbraMailAlias]){if(typeof d.attrs[ZaAccount.A_zimbraMailAlias]=="string"){var h=d.attrs[ZaAccount.A_zimbraMailAlias];
d.attrs[ZaAccount.A_zimbraMailAlias]=new Array();
d.attrs[ZaAccount.A_zimbraMailAlias].push(h)
}tmpObjCnt=d.attrs[ZaAccount.A_zimbraMailAlias].length
}var e="";
var b=0;
try{for(var c=0;
c<tmpObjCnt;
c++){var k=d.attrs[ZaAccount.A_zimbraMailAlias][c];
try{if(k){if(k.indexOf("@")!=k.lastIndexOf("@")){ZaApp.getInstance().getCurrentController()._errorDialog.setMessage(AjxMessageFormat.format(ZaMsg.ERROR_ALIAS_INVALID,[k]),null,DwtMessageDialog.CRITICAL_STYLE,null);
ZaApp.getInstance().getCurrentController()._errorDialog.popup();
break
}f.addAlias(k)
}}catch(j){if((j.code==ZmCsfeException.ACCT_EXISTS)&&k){var g=ZaXFormViewController.prototype._findAlias.call(this,k);
switch(g.type){case ZaItem.DL:if(g.name==k){e+="<br>"+AjxMessageFormat.format(ZaMsg.WARNING_EACH_ALIAS3,[g.name])
}else{e+="<br>"+AjxMessageFormat.format(ZaMsg.WARNING_EACH_ALIAS4,[g.name,k])
}break;
case ZaItem.ACCOUNT:if(g.name==k){e+="<br>"+AjxMessageFormat.format(ZaMsg.WARNING_EACH_ALIAS2,[g.name])
}else{e+="<br>"+AjxMessageFormat.format(ZaMsg.WARNING_EACH_ALIAS1,[g.name,k])
}break;
case ZaItem.RESOURCE:if(g.name==k){e+="<br>"+AjxMessageFormat.format(ZaMsg.WARNING_EACH_ALIAS5,[g.name])
}else{e+="<br>"+AjxMessageFormat.format(ZaMsg.WARNING_EACH_ALIAS6,[g.name,k])
}break;
default:e+="<br>"+AjxMessageFormat.format(ZaMsg.WARNING_EACH_ALIAS0,[k]);
break
}b++
}else{throw (j)
}}}if(b==1){ZaApp.getInstance().getCurrentController()._errorDialog.setMessage(ZaMsg.WARNING_ALIAS_EXISTS+e,"",DwtMessageDialog.WARNING_STYLE,ZabMsg.zimbraAdminTitle);
ZaApp.getInstance().getCurrentController()._errorDialog.popup()
}else{if(b>1){ZaApp.getInstance().getCurrentController()._errorDialog.setMessage(ZaMsg.WARNING_ALIASES_EXIST+e,"",DwtMessageDialog.WARNING_STYLE,ZabMsg.zimbraAdminTitle);
ZaApp.getInstance().getCurrentController()._errorDialog.popup()
}}}catch(j){ZaApp.getInstance().getCurrentController().popupErrorDialog(ZaMsg.FAILED_ADD_ALIASES,j);
return false
}}};
ZaItem.createMethods.ZaDistributionList.push(ZaDistributionList.addAliases);
ZaDistributionList.addRemoveOwners=function(l,d){var k=-1;
var e=-1;
var f=true;
if(f){if(d[ZaDistributionList.A2_DLOwners]){if(!(d[ZaDistributionList.A2_DLOwners] instanceof Array)){var g=d[ZaDistributionList.A2_DLOwners];
d[ZaDistributionList.A2_DLOwners]=new Array();
d[ZaDistributionList.A2_DLOwners].push(g)
}k=d[ZaDistributionList.A2_DLOwners].length-1
}if(this[ZaDistributionList.A2_DLOwners]){if(!(this[ZaDistributionList.A2_DLOwners] instanceof Array)){var g=this[ZaDistributionList.A2_DLOwners];
this[ZaDistributionList.A2_DLOwners]=new Array();
this[ZaDistributionList.A2_DLOwners].push(g)
}e=this[ZaDistributionList.A2_DLOwners].length-1
}for(var b=k;
b>=0;
b--){for(var j=e;
j>=0;
j--){if(d[ZaDistributionList.A2_DLOwners][b]==this[ZaDistributionList.A2_DLOwners][j]){d[ZaDistributionList.A2_DLOwners].splice(b,1);
this[ZaDistributionList.A2_DLOwners].splice(j,1);
break
}}}if(e!=-1){e=this[ZaDistributionList.A2_DLOwners].length
}try{for(var c=0;
c<e;
c++){this.addRemoveOwner(this[ZaDistributionList.A2_DLOwners][c])
}}catch(h){ZaApp.getInstance().getCurrentController()._handleException(h,"ZaDistributionList.addRemoveOwner",null,false);
return false
}if(k!=-1){k=d[ZaDistributionList.A2_DLOwners].length
}try{for(var c=0;
c<k;
c++){try{if(d[ZaDistributionList.A2_DLOwners][c]){this.addRemoveOwner(d[ZaDistributionList.A2_DLOwners][c],true)
}}catch(h){throw (h)
}}}catch(h){ZaApp.getInstance().getCurrentController()._handleException(h,"ZaDistributionList.addRemoveOwner",null,false);
return false
}}};
ZaItem.modifyMethods.ZaDistributionList.push(ZaDistributionList.addRemoveOwners);
ZaDistributionList.addOwners=function(g,d){var f=-1;
if(g[ZaDistributionList.A2_DLOwners]){if(!(g[ZaDistributionList.A2_DLOwners] instanceof Array)){var b=g[ZaDistributionList.A2_DLOwners];
g[ZaDistributionList.A2_DLOwners]=new Array();
g[ZaDistributionList.A2_DLOwners].push(b)
}f=g[ZaDistributionList.A2_DLOwners].length-1
}if(f!=-1){f=g[ZaDistributionList.A2_DLOwners].length
}try{for(var c=0;
c<f;
c++){try{if(g[ZaDistributionList.A2_DLOwners][c]){g.addRemoveOwner(g[ZaDistributionList.A2_DLOwners][c],true)
}}catch(e){throw (e)
}}}catch(e){ZaApp.getInstance().getCurrentController()._handleException(e,"ZaDistributionList.addOwner",null,false);
return false
}};
ZaItem.createMethods.ZaDistributionList.push(ZaDistributionList.addOwners);
ZaDistributionList.prototype.addRemoveOwner=function(l,j){var h=AjxSoapDoc.create("DistributionListActionRequest","urn:zimbraAccount",null);
var c=h.set("dl",this.id);
c.setAttribute("by","id");
var b=h.set("action",null);
var k;
var g;
if(j){g="addOwners";
k=ZaMsg.BUSY_ADD_DL_OWNER
}else{g="removeOwners";
k=ZaMsg.BUSY_REMOVE_DL_OWNER
}b.setAttribute("op",g);
var f=h.set("owner",l,b);
f.setAttribute("by","name");
f.setAttribute("type","usr");
var e=new Object();
e.soapDoc=h;
var d={controller:ZaApp.getInstance().getCurrentController(),busyMsg:k};
ZaRequestMgr.invoke(e,d)
};
ZaDistributionList.checkValues=function(b){if(ZaItem.hasWritePermission(ZaAccount.A_name,b)){if(b.name==null||b.name.length<1){ZaApp.getInstance().getCurrentController().popupErrorDialog(ZaMsg.ERROR_DL_NAME_REQUIRED);
return false
}if(!AjxUtil.isValidEmailNonReg(b.name)){ZaApp.getInstance().getCurrentController().popupErrorDialog(ZaMsg.ERROR_DL_NAME_INVALID);
return false
}}return true
};
ZaDistributionList.prototype.markChanged=function(){this._dirty=true
};
ZaDistributionList.prototype.markClean=function(){this._dirty=false
};
ZaDistributionList.prototype.isDirty=function(){return this._dirty
};
ZaDistributionList.prototype.getId=function(){return this.id
};
ZaDistributionList.prototype.setId=function(b){this.id=b
};
ZaDistributionList.prototype.getName=function(){return this.name
};
ZaDistributionList.prototype.getMemberQueryParams=function(k,d,c,f,j){if(d==null){d=0
}if(c==null){c=ZaDistributionList.MEMBER_QUERY_LIMIT
}var l=AjxSoapDoc.create("GetDistributionListRequest",ZaZimbraAdmin.URN,null);
if(!this.getAttrs.all&&!AjxUtil.isEmpty(this.attrsToGet)){l.setMethodAttribute("attrs",this.attrsToGet.join(","))
}l.setMethodAttribute("limit",c);
l.setMethodAttribute("offset",d);
var g=l.set("dl",this.id);
g.setAttribute("by","id");
l.set("name",this.getName());
var e=Dwt.getNextId();
var m={controller:f,offset:d,limit:c,busyId:e,ajxCallbackWhenCompleted:j};
var h={soapDoc:l,noAuthToken:true,asyncMode:true};
if(k!=null){h.callback=new AjxCallback(this,k,m)
}var b={controller:f,showBusy:true,busyMsg:ZaMsg.BUSY_GET_DL,busyId:e,skipCallbackIfCancelled:true};
var n={reqCtrlParams:h,reqMgrParams:b};
return n
};
ZaDistributionList.prototype.getAllMembers=function(c){if(AjxUtil.isEmpty(c)||AjxUtil.isEmpty(c.controller)||AjxUtil.isEmpty(c.controller._view)){return
}var f=c.controller,k=c.controller._view;
if(this.id!=null){var d=0;
var e=0;
var j=ZaDistributionList.prototype.getAllMembersCallback;
this[ZaDistributionList.A2_allMemberHash]={};
try{var h=new AjxCallback(k,ZaDLXFormView.prototype.updateMemberList);
var b=new AjxCallback(this,this.updateTree);
var l=ZaDistributionList.prototype.getMemberQueryParams.call(this,j,e,d,f,[h,b]);
ZaRequestMgr.invoke(l.reqCtrlParams,l.reqMgrParams)
}catch(g){ZaApp.getInstance().getCurrentController()._handleException(g,"ZaDistributionList.prototype.getAllMembers",null,false)
}}};
ZaDistributionList.prototype.updateTree=function(){var b=ZaZimbraAdmin.getInstance().getOverviewPanelController();
b.refreshRelatedTree(this,true,true)
};
ZaDistributionList.prototype.getAllMembersCallback=function(g,h){try{if(g.busyId){ZaApp.getInstance().getAppCtxt().getShell().setBusy(false,g.busyId)
}if(!h&&!this._currentRequest.cancelled){throw (new AjxException(ZaMsg.ERROR_EMPTY_RESPONSE_ARG,AjxException.UNKNOWN,"ZaListViewController.prototype.getAllMembersCallback"))
}else{if(!h.isException()){if(!h._data||!h._data||!h._data.Body||!h._data.Body.GetDistributionListResponse){return
}var d=h._data.Body.GetDistributionListResponse;
if(!d.dl||!(d.dl[0])){return
}var r=d.dl[0];
if(r.dynamic===true){this[ZaDistributionList.A2_dlType]=ZaDistributionList.DYNAMIC_DL_TYPE
}var k=r.dlm;
var n=(k&&k.length)?k.length:0;
var f=this[ZaDistributionList.A2_allMemberHash];
for(var m=0;
m<n;
++m){var b=k[m]._content;
if(!AjxUtil.isEmpty(b)){var l=new ZaDistributionListMember(b);
f[b]=l
}}this[ZaDistributionList.A2_numMembers]=n;
this[ZaDistributionList.A2_memNumPages]=Math.ceil(n/ZaDistributionList.MEMBER_LIST_PAGE_SIZE);
ZaDistributionList.prototype.pageAllMembers.call(this);
this.id=r.id;
this.initFromJS(r);
if(this[ZaDistributionList.A2_dlType]!==ZaDistributionList.DYNAMIC_DL_TYPE){this[ZaAccount.A2_memberOf]=ZaAccountMemberOfListView.getDlMemberShip(this.id,"id")
}else{this[ZaAccount.A2_memberOf]={directMemberList:[],indirectMemberList:[],nonMemberList:[]}
}this[ZaAccount.A2_directMemberList+"_more"]=(this[ZaAccount.A2_memberOf][ZaAccount.A2_directMemberList].length>ZaAccountMemberOfListView.SEARCH_LIMIT)?1:0;
this[ZaAccount.A2_indirectMemberList+"_more"]=(this[ZaAccount.A2_memberOf][ZaAccount.A2_indirectMemberList].length>ZaAccountMemberOfListView.SEARCH_LIMIT)?1:0;
var e=r.owners;
var j=(e&&e.length)?e.length:0;
this[ZaDistributionList.A2_DLOwners]=new Array();
if(j>0){var p=e[0].owner;
for(var m=0;
m<p.length;
m++){var c=new ZaDistributionListOwner(p[m]);
this[ZaDistributionList.A2_DLOwners].push(c.name)
}}var q=g.ajxCallbackWhenCompleted||null;
if(q instanceof Array){for(var m=0;
m<q.length;
m++){q[m].run1([this])
}}else{if(q instanceof AjxCallback){q.run1([this])
}}}}}catch(o){ZaApp.getInstance().getCurrentController()._handleException(o,"ZaDistributionList.prototype.getAllMembersCallback",null,false)
}};
ZaDistributionList.prototype.pageAllMembers=function(){var g=this[ZaDistributionList.A2_allMemberHash];
if(AjxUtil.isEmpty(g)){return
}var b=new Array();
var f=AjxUtil.getHashKeys(g);
for(var d=0;
d<f.length;
d+=ZaDistributionList.MEMBER_LIST_PAGE_SIZE){var e=new Array();
for(var c=0;
(d+c<f.length)&&(c<ZaDistributionList.MEMBER_LIST_PAGE_SIZE);
c++){var h=g[f[d+c]];
e.push(h)
}b.push(e)
}this[ZaDistributionList.A2_allMemberPages]=b
};
ZaDistributionList.removeDeletedMembers=function(m,h,j,f){if(!ZaItem.hasRight(ZaDistributionList.REMOVE_DL_MEMBER_RIGHT,h)){if(f&&f instanceof AjxCallback){f.run()
}return
}var c,b;
var e=new ZmCsfeCommand();
c=AjxSoapDoc.create("RemoveDistributionListMemberRequest",ZaZimbraAdmin.URN,null);
c.set("id",h.id);
var l=h[ZaDistributionList.A2_removeList].length;
if(l<1){return
}for(var g=0;
g<l;
g++){c.set("dlm",h[ZaDistributionList.A2_removeList][g].toString())
}var d=new Object();
d.soapDoc=c;
d.noAuthToken=true;
if(f&&f instanceof AjxCallback){d.asyncMode=true;
d.callback=f
}var k=h[ZaDistributionList.A2_removeList];
h[ZaDistributionList.A2_removeList]=new Array();
e.invoke(d);
ZaDistributionList.modifyAccountDL(h,k,false)
};
ZaItem.modifyMethods.ZaDistributionList.push(ZaDistributionList.removeDeletedMembers);
ZaDistributionList.addNewMembers=function(m,h,j,f){if(!ZaItem.hasRight(ZaDistributionList.ADD_DL_MEMBER_RIGHT,h)){if(f&&f instanceof AjxCallback){f.run()
}return
}var c,b;
var e=new ZmCsfeCommand();
c=AjxSoapDoc.create("AddDistributionListMemberRequest",ZaZimbraAdmin.URN,null);
c.set("id",h.id);
var l=h[ZaDistributionList.A2_addList].length;
if(l<1){return
}for(var g=0;
g<l;
g++){c.set("dlm",h[ZaDistributionList.A2_addList][g].toString())
}var d=new Object();
d.soapDoc=c;
if(f&&f instanceof AjxCallback){d.asyncMode=true;
d.callback=f
}d.noAuthToken=true;
var k=h[ZaDistributionList.A2_addList];
e.invoke(d);
h[ZaDistributionList.A2_addList]=new Array();
ZaDistributionList.modifyAccountDL(h,k,true)
};
ZaItem.modifyMethods.ZaDistributionList.push(ZaDistributionList.addNewMembers);
ZaDistributionList.modifyAccountDL=function(q,g,s){var e=ZaApp.getInstance().getTabGroup();
var t={name:q.name,id:q.id};
for(var r=0;
r<g.length;
r++){var f=g[r];
var b=null;
b=f.name;
if(f.type==ZaItem.ALIAS&&f.attrs){b=f.attrs[ZaAlias.A_targetAccount]
}if(!b){continue
}var u=null;
for(var c=0;
c<ZaAppTabGroup._TABS.size();
c++){var d=ZaAppTabGroup._TABS.get(c);
var h=d.getAppView();
if(h&&h._containedObject&&h._containedObject.name&&h.constructor&&(h.constructor==ZaAccountXFormView)){if(b==h._containedObject.name){u=h;
break
}else{if(h._containedObject.attrs&&h._containedObject.attrs[ZaAccount.A_zimbraMailAlias]){var o=h._containedObject.attrs[ZaAccount.A_zimbraMailAlias];
var k=false;
for(var n=0;
n<o.length;
n++){if(b==o[n]){k=true;
break
}}if(k){u=h;
break
}}}}}if(!u){continue
}var m=false;
var l=u._containedObject[ZaAccount.A2_memberOf][ZaAccount.A2_directMemberList];
for(var p=0;
p<l.length;
p++){if(l[p].name==t.name){m=true;
break
}}if(!m&&s){l.push(t)
}else{if(m&&!s){l.splice(p,1)
}else{continue
}}u._localXForm.setInstanceValue(l,ZaAccount.A2_directMemberList)
}};
ZaDistributionList.addNewMembersCreateMethod=function(d,b,c){ZaDistributionList.addNewMembers.call(this,null,d,b,c)
};
ZaItem.createMethods.ZaDistributionList.push(ZaDistributionList.addNewMembersCreateMethod);
ZaDistributionList.prototype.initFromJS=function(d){if(!d){return
}this.attrs=new Object();
this.attrs[ZaAccount.A_zimbraMailAlias]=new Array();
this.name=d.name;
this.id=d.id;
this.dynamic=d.dynamic;
var b=d.a.length;
for(var c=0;
c<b;
c++){if(d.a[c].n==ZaAccount.A_zimbraMailAlias&&d.a[c]._content==this.name){continue
}if(!this.attrs[[d.a[c].n]]){this.attrs[[d.a[c].n]]=d.a[c]._content
}else{if(!(this.attrs[[d.a[c].n]] instanceof Array)){this.attrs[[d.a[c].n]]=[this.attrs[[d.a[c].n]]]
}this.attrs[[d.a[c].n]].push(d.a[c]._content)
}}if(!this.attrs[ZaAccount.A_description]){this.attrs[ZaAccount.A_description]=[]
}if(!(this.attrs[ZaAccount.A_description] instanceof Array)){this.attrs[ZaAccount.A_description]=[this.attrs[ZaAccount.A_description]]
}};
ZaDistributionList.compareTwoMembers=function(f,e){var d=AjxUtil.isEmpty(f);
var c=AjxUtil.isEmpty(e);
if(d&&!c){return -1
}if(!d&&c){return 1
}if(d&&c){return 0
}if(AjxUtil.isEmpty(f.name)&&AjxUtil.isEmpty(e.name)){return 0
}if(f.name==e.name){return 0
}if(f.name<e.name){return -1
}if(f.name>e.name){return 1
}return 0
};
ZaDistributionListMember=function(b){this[ZaAccount.A_name]=b;
this.id="ZADLM_"+b
};
ZaDistributionListMember.prototype.toString=function(){return this[ZaAccount.A_name]
};
ZaDistributionListOwner=function(b){this[ZaAccount.A_name]=b.name;
this.id=b.id;
this.type=b.type
};
ZaDistributionListOwner.prototype.toString=function(){return this[ZaAccount.A_name]
};
ZaDistributionList.myXModel={items:[{id:"id",type:_STRING_},{id:ZaDistributionList.A2_query,type:_STRING_},{id:ZaDistributionList.A2_dlType,type:_STRING_},{id:ZaDistributionList.A2_pagenum,type:_NUMBER_,defaultValue:1},{id:ZaDistributionList.A2_poolPagenum,type:_NUMBER_,defaultValue:1},{id:ZaDistributionList.A2_poolNumPages,type:_NUMBER_,defaultValue:1},{id:ZaDistributionList.A2_memPagenum,type:_NUMBER_,defaultValue:1},{id:ZaDistributionList.A2_memNumPages,type:_NUMBER_,defaultValue:1},{id:ZaDistributionList.A2_memberPool,type:_LIST_},{id:ZaDistributionList.A2_memberList,type:_LIST_},{id:ZaDistributionList.A2_allMemberHash,type:_OBJECT_,defaultValue:{}},{id:ZaDistributionList.A2_allMemberPages,type:_LIST_,defaultValue:[]},{id:ZaDistributionList.A2_origList,type:_LIST_},{id:ZaDistributionList.A2_addList,type:_LIST_},{id:ZaDistributionList.A2_removeList,type:_LIST_},{id:ZaDistributionList.A2_optionalAdd,type:_STRING_},{id:ZaAccount.A_name,type:_STRING_,required:true,constraints:{type:"method",value:function(e,c,d,b){if(e){if(AjxUtil.isValidEmailNonReg(e)){return e
}else{throw ZaMsg.ErrorInvalidEmailAddress
}}}}},{id:ZaDistributionList.A2_DLOwners,type:_LIST_,ref:ZaDistributionList.A2_DLOwners,listItem:{type:_STRING_}},{id:ZaDistributionList.A2_owners_selection_cache,type:_LIST_},{id:ZaDistributionList.A2_members,type:_LIST_},ZaItem.descriptionModelItem,{id:ZaItem.A_zimbraId,type:_STRING_,ref:"attrs/"+ZaItem.A_zimbraId},{id:ZaDistributionList.A_memberOfURL,ref:"attrs/"+ZaDistributionList.A_memberOfURL,type:_STRING_,constraints:{type:"method",value:function(f,d,e,b){f=AjxStringUtil.trim(f);
var c=b.attrs[ZaDistributionList.A_zimbraIsACLGroup];
if(c!="TRUE"&&!f){throw AjxMsg.valueIsRequired
}return f
}}},{id:ZaDistributionList.A_zimbraIsACLGroup,ref:"attrs/"+ZaDistributionList.A_zimbraIsACLGroup,type:_ENUM_,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaItem.A_zimbraCreateTimestamp,ref:"attrs/"+ZaItem.A_zimbraCreateTimestamp},{id:ZaAccount.A_zimbraHideInGal,type:_ENUM_,ref:"attrs/"+ZaAccount.A_zimbraHideInGal,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaAccount.A_notes,ref:"attrs/"+ZaAccount.A_notes,type:_STRING_},{id:ZaAccount.A_mailHost,type:_STRING_,ref:"attrs/"+ZaAccount.A_mailHost},{id:ZaAccount.A2_autoMailServer,type:_ENUM_,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaAccount.A_displayname,type:_STRING_,ref:"attrs/"+ZaAccount.A_displayname},{id:ZaAccount.A_zimbraMailAlias,type:_LIST_,ref:"attrs/"+ZaAccount.A_zimbraMailAlias,listItem:{type:_STRING_}},{id:ZaDistributionList.A_mailStatus,ref:"attrs/"+ZaDistributionList.A_mailStatus,type:_STRING_},{id:ZaDistributionList.A_zimbraDistributionListSubscriptionPolicy,ref:"attrs/"+ZaDistributionList.A_zimbraDistributionListSubscriptionPolicy,type:_STRING_},{id:ZaDistributionList.A_zimbraDistributionListUnsubscriptionPolicy,ref:"attrs/"+ZaDistributionList.A_zimbraDistributionListUnsubscriptionPolicy,type:_STRING_},{id:ZaDistributionList.A_zimbraDistributionListSendShareMessageToNewMembers,ref:"attrs/"+ZaDistributionList.A_zimbraDistributionListSendShareMessageToNewMembers,type:_ENUM_,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaDistributionList.A2_membersSelected,type:_LIST_},{id:ZaDistributionList.A2_nonmembersSelected,type:_LIST_},{id:ZaDistributionList.A2_memberPoolSelected,type:_LIST_},{id:ZaDistributionList.A2_directMemberSelected,type:_LIST_},{id:ZaDistributionList.A2_indirectMemberSelected,type:_LIST_},{id:ZaAccount.A2_memberOf,type:_OBJECT_,items:[{id:ZaDistributionList.A2_directMemberList,type:_LIST_},{id:ZaDistributionList.A2_indirectMemberList,type:_LIST_},{id:ZaDistributionList.A2_nonMemberList,type:_LIST_}]},{id:(ZaAccount.A2_directMemberList+"_more"),type:_LIST_},{id:(ZaAccount.A2_directMemberList+"_offset"),type:_LIST_},{id:(ZaAccount.A2_indirectMemberList+"_more"),type:_LIST_},{id:(ZaAccount.A2_indirectMemberList+"_offset"),type:_LIST_},{id:(ZaAccount.A2_nonMemberList+"_more"),type:_LIST_},{id:(ZaAccount.A2_nonMemberList+"_offset"),type:_LIST_},{id:ZaDistributionList.A2_alias_selection_cache,type:_LIST_},{id:ZaDistributionList.A_zimbraPrefReplyToEnabled,type:_ENUM_,ref:"attrs/"+ZaDistributionList.A_zimbraPrefReplyToEnabled,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaDistributionList.A_zimbraPrefReplyToDisplay,type:_STRING_,ref:"attrs/"+ZaDistributionList.A_zimbraPrefReplyToDisplay},{id:ZaDistributionList.A_zimbraPrefReplyToAddress,type:_EMAIL_ADDRESS_,ref:"attrs/"+ZaDistributionList.A_zimbraPrefReplyToAddress}]};
ZaDistributionList.prototype.schedulePostLoading=function(c){var b=new AjxTimedAction(this,ZaDistributionList.prototype.getAllMembers,{controller:c});
AjxTimedAction.scheduleAction(b,100)
};
ZaDistributionList.getRelatedList=function(d){var e=this.attrs[ZaAccount.A_zimbraMailAlias];
var c=this[ZaDistributionList.A2_numMembers];
var b=[];
if(e.length>0){var g=new ZaTreeItemData({text:ZaMsg.TABT_Aliases,count:e.length,image:"AccountAlias",mappingId:ZaZimbraAdmin._DL_ALIAS_LIST_VIEW,path:d+ZaTree.SEPERATOR+this.name+ZaTree.SEPERATOR+ZaMsg.TABT_Aliases});
g.setData("aliasTargetId",this.id);
ZaOverviewPanelController.overviewTreeListeners[ZaZimbraAdmin._DL_ALIAS_LIST_VIEW]=ZaOverviewPanelController.aliasListTreeListener;
b.push(g)
}if(c>0){var f=new ZaTreeItemData({text:ZaMsg.DLXV_LabelListMembers,count:c,image:"DistributionList",mappingId:ZaZimbraAdmin._DL_MEMBERS_LIST_VIEW,path:d+ZaTree.SEPERATOR+this.name+ZaTree.SEPERATOR+ZaMsg.DLXV_LabelListMembers});
f.setData("dlItem",this);
ZaOverviewPanelController.overviewTreeListeners[ZaZimbraAdmin._DL_MEMBERS_LIST_VIEW]=ZaOverviewPanelController.memberListInDLTreeListener;
b.push(f)
}return b
};
ZaItem.getRelatedMethods.ZaDistributionList.push(ZaDistributionList.getRelatedList)
}if(AjxPackage.define("zimbraAdmin.resource.model.ZaSignature")){ZaSignature=function(b,e,d,c){this.id=e;
this.name=b;
this.content=d;
this.type=c?c:"text/plain"
};
ZaSignature.prototype.constructor=ZaSignature;
ZaSignature.prototype.toString=function(){return this.name
};
ZaSignature.compareObject=function(d,c){for(var b in d){if(d[b]!=c[b]){return false
}}return true
};
ZaSignature.A2_name="name";
ZaSignature.A2_id="id";
ZaSignature.A2_content="content";
ZaSignature.A2_type="type";
ZaSignature.myXModel={items:[{id:ZaSignature.A2_id,type:_STRING_,ref:ZaSignature.A2_id},{id:ZaSignature.A2_name,type:_STRING_,ref:ZaSignature.A2_name},{id:ZaSignature.A2_content,type:_STRING_,ref:ZaSignature.A2_content},{id:ZaSignature.A2_type,type:_STRING_,ref:ZaSignature.A2_type}]};
ZaSignature.signatureTypeChoices=[{value:"text/plain",label:ZaMsg.resSignaturePlainType},{value:"text/html",label:ZaMsg.resSignatureHTMLType}];
ZaSignature.getSignatureChoices=function(c){var b=[];
b.push({name:ZaMsg.VALUE_NOT_SET,id:""});
var d=0;
for(d=0;
d<c.length;
d++){if(c[d]&&c[d].name){b.push({name:c[d].name,id:c[d].id})
}}return b
};
ZaSignature.getNewSignatureChoices=function(c){var b=[];
b.push({name:ZaMsg.VALUE_NOT_SET,id:""});
var d=0;
for(d=0;
d<c.length;
d++){if(c[d]&&c[d].name){b.push({name:c[d].name,id:c[d].name})
}}return b
};
ZaSignature.GetSignatures=function(k,b){if(!ZaZimbraAdmin.haveTargetRight(ZaItem.RESOURCE,ZaResource.VIEW_RESOURCE_MAIL_RIGHT,this.name)&&!ZaZimbraAdmin.haveTargetRight(ZaItem.RESOURCE,ZaResource.VIEW_RESOURCE_MAIL_RIGHT,ZaAccount.getDomain(this.name))){return
}if(!ZaZimbraAdmin.isGlobalAdmin()&&this.attrs[ZaResource.A_accountStatus]!=ZaResource.ACCOUNT_STATUS_ACTIVE){return
}var l=AjxSoapDoc.create("GetSignaturesRequest","urn:zimbraAccount",null);
var d=new Object();
d.soapDoc=l;
d.skipAuthCheck=false;
if(k=="id"){d.accountId=b
}else{d.accountName=b
}try{var c={controller:ZaApp.getInstance().getCurrentController(),busyMsg:ZaMsg.BUSY_GET_RESOURCE};
this[ZaResource.A2_signatureList]=[];
var e=ZaRequestMgr.invoke(d,c).Body.GetSignaturesResponse;
if(e.signature){for(var g in e.signature){var h;
var f;
if(e.signature[g].content&&e.signature[g].content[0]){h=e.signature[g].content[0]._content;
f=e.signature[g].content[0].type
}var m=new ZaSignature(e.signature[g].name,e.signature[g].id,h,f);
this[ZaResource.A2_signatureList].push(m)
}}}catch(j){throw j;
return null
}};
ZaSignature.CreateSignature=function(h,b){var j=AjxSoapDoc.create("CreateSignatureRequest","urn:zimbraAccount",null);
var k=j.set("signature",null);
k.setAttribute("name",this[ZaSignature.A2_name]);
var f;
if(this[ZaSignature.A2_type]=="text/plain"){f=j.set("content",this[ZaSignature.A2_content],k);
f.setAttribute("type","text/plain");
f=j.set("content",null,k);
f.setAttribute("type","text/html")
}else{f=j.set("content",this[ZaSignature.A2_content],k);
f.setAttribute("type","text/html");
f=j.set("content",null,k);
f.setAttribute("type","text/plain")
}var d=new Object();
d.soapDoc=j;
d.skipAuthCheck=false;
if(h=="id"){d.accountId=b
}else{d.accountName=b
}try{var c={controller:ZaApp.getInstance().getCurrentController(),busyMsg:ZaMsg.BUSY_GET_RESOURCE};
var e=ZaRequestMgr.invoke(d,c).Body.CreateSignatureResponse;
if(e.signature&&e.signature[0]){this.id=e.signature[0].id
}return this
}catch(g){throw g;
return null
}};
ZaSignature.CreateAccountSignature=function(h,e){if(!ZaZimbraAdmin.haveTargetRight(ZaItem.RESOURCE,ZaResource.VIEW_RESOURCE_MAIL_RIGHT,e.name)&&!ZaZimbraAdmin.haveTargetRight(ZaItem.RESOURCE,ZaResource.VIEW_RESOURCE_MAIL_RIGHT,ZaAccount.getDomain(e.name))){return
}if(!AjxUtil.isEmpty(h[ZaResource.A2_signatureList])){for(var c=0;
c<h[ZaResource.A2_signatureList].length;
c++){var f=h[ZaResource.A2_signatureList][c];
var g;
if(f[ZaSignature.A2_name]&&f[ZaSignature.A2_content]){g=new ZaSignature(f[ZaSignature.A2_name],"",f[ZaSignature.A2_content],f[ZaSignature.A2_type]);
ZaSignature.CreateSignature.call(g,"id",e.id);
h[ZaResource.A2_signatureList][c]=g
}}var d={};
var b;
if(h.attrs[ZaResource.A_zimbraPrefCalendarAutoAcceptSignatureId]){b=ZaUtil.findValueInObjArrByPropertyName(h[ZaResource.A2_signatureList],h.attrs[ZaResource.A_zimbraPrefCalendarAutoAcceptSignatureId]);
if(b!=-1&&h[ZaResource.A2_signatureList][b].id){d[ZaResource.A_zimbraPrefCalendarAutoAcceptSignatureId]=h[ZaResource.A2_signatureList][b].id
}}if(h.attrs[ZaResource.A_zimbraPrefCalendarAutoDenySignatureId]){b=ZaUtil.findValueInObjArrByPropertyName(h[ZaResource.A2_signatureList],h.attrs[ZaResource.A_zimbraPrefCalendarAutoDenySignatureId]);
if(b!=-1&&h[ZaResource.A2_signatureList][b].id){d[ZaResource.A_zimbraPrefCalendarAutoDenySignatureId]=h[ZaResource.A2_signatureList][b].id
}}if(h.attrs[ZaResource.A_zimbraPrefCalendarAutoDeclineSignatureId]){b=ZaUtil.findValueInObjArrByPropertyName(h[ZaResource.A2_signatureList],h.attrs[ZaResource.A_zimbraPrefCalendarAutoDeclineSignatureId]);
if(b!=-1&&h[ZaResource.A2_signatureList][b].id){d[ZaResource.A_zimbraPrefCalendarAutoDeclineSignatureId]=h[ZaResource.A2_signatureList][b].id
}}if(!AjxUtil.isEmpty(d)){ZaResource.modifyMethod.call(e,d)
}}return e
};
ZaSignature.ModifySignature=function(f,j){var d=AjxSoapDoc.create("ModifySignatureRequest","urn:zimbraAccount",null);
var h=d.set("signature",null);
h.setAttribute("name",this[ZaSignature.A2_name]);
h.setAttribute("id",this[ZaSignature.A2_id]);
var e;
if(this[ZaSignature.A2_type]=="text/plain"){e=d.set("content",this[ZaSignature.A2_content],h);
e.setAttribute("type","text/plain");
e=d.set("content",null,h);
e.setAttribute("type","text/html")
}else{e=d.set("content",this[ZaSignature.A2_content],h);
e.setAttribute("type","text/html");
e=d.set("content",null,h);
e.setAttribute("type","text/plain")
}var g=new Object();
g.soapDoc=d;
g.skipAuthCheck=false;
if(f=="id"){g.accountId=j
}else{g.accountName=j
}try{var c={controller:ZaApp.getInstance().getCurrentController(),busyMsg:ZaMsg.BUSY_GET_RESOURCE};
ZaRequestMgr.invoke(g,c).Body.ModifySignatureResponse
}catch(b){throw b;
return null
}};
ZaSignature.DeleteSignature=function(e,j){var d=AjxSoapDoc.create("DeleteSignatureRequest","urn:zimbraAccount",null);
var h=d.set("signature",null);
h.setAttribute("id",this[ZaSignature.A2_id]);
var g=new Object();
g.soapDoc=d;
g.skipAuthCheck=false;
if(e=="id"){g.accountId=j
}else{g.accountName=j
}try{var c={controller:ZaApp.getInstance().getCurrentController(),busyMsg:ZaMsg.BUSY_GET_RESOURCE};
var f=ZaRequestMgr.invoke(g,c).Body.DeleteSignatureResponse
}catch(b){throw b;
return null
}}
}if(AjxPackage.define("zimbraAdmin.resource.model.ZaResource")){ZaResource=function(){ZaItem.call(this,"ZaResource");
this._init();
this.type=ZaItem.RESOURCE
};
ZaResource.prototype=new ZaAccount;
ZaResource.prototype.constructor=ZaResource;
ZaItem.loadMethods.ZaResource=new Array();
ZaItem.initMethods.ZaResource=new Array();
ZaItem.modifyMethods.ZaResource=new Array();
ZaItem.createMethods.ZaResource=new Array();
ZaResource.A_name=ZaAccount.A_name;
ZaResource.A_uid=ZaAccount.A_uid;
ZaResource.A_accountName=ZaAccount.A_accountName;
ZaResource.A_mail=ZaAccount.A_mail;
ZaResource.A_description=ZaAccount.A_description;
ZaResource.A_displayname=ZaAccount.A_displayname;
ZaResource.A_country=ZaAccount.A_country;
ZaResource.A_street=ZaAccount.A_street;
ZaResource.A_city=ZaAccount.A_city;
ZaResource.A_zip=ZaAccount.A_zip;
ZaResource.A_state=ZaAccount.A_state;
ZaResource.A_password=ZaAccount.A_password;
ZaResource.A2_confirmPassword=ZaAccount.A2_confirmPassword;
ZaResource.A_accountStatus=ZaAccount.A_accountStatus;
ZaResource.A_notes=ZaAccount.A_notes;
ZaResource.A_mailHost=ZaAccount.A_mailHost;
ZaResource.A_COSId=ZaAccount.A_COSId;
ZaResource.A_zimbraMinPwdLength=ZaAccount.A_zimbraMinPwdLength;
ZaResource.A_zimbraMaxPwdLength=ZaAccount.A_zimbraMaxPwdLength;
ZaResource.A_zimbraPrefCalendarForwardInvitesTo="zimbraPrefCalendarForwardInvitesTo";
ZaResource.A_zimbraCalResMaxNumConflictsAllowed="zimbraCalResMaxNumConflictsAllowed";
ZaResource.A_zimbraCalResMaxPercentConflictsAllowed="zimbraCalResMaxPercentConflictsAllowed";
ZaResource.A_locationDisplayName="zimbraCalResLocationDisplayName";
ZaResource.A_zimbraAccountCalendarUserType="zimbraAccountCalendarUserType";
ZaResource.A_zimbraCalResAlwaysFree="zimbraCalResAlwaysFree";
ZaResource.A_zimbraCalResAutoAcceptDecline="zimbraCalResAutoAcceptDecline";
ZaResource.A_zimbraCalResAutoDeclineIfBusy="zimbraCalResAutoDeclineIfBusy";
ZaResource.A_zimbraCalResAutoDeclineRecurring="zimbraCalResAutoDeclineRecurring";
ZaResource.A_zimbraCalResBuilding="zimbraCalResBuilding";
ZaResource.A_zimbraCalResCapacity="zimbraCalResCapacity";
ZaResource.A_zimbraCalResContactEmail="zimbraCalResContactEmail";
ZaResource.A_zimbraCalResContactName="zimbraCalResContactName";
ZaResource.A_zimbraCalResContactPhone="zimbraCalResContactPhone";
ZaResource.A_zimbraCalResFloor="zimbraCalResFloor";
ZaResource.A_zimbraCalResRoom="zimbraCalResRoom";
ZaResource.A_zimbraCalResSite="zimbraCalResSite";
ZaResource.A_zimbraCalResType="zimbraCalResType";
ZaResource.A_contactInfoAutoComplete="contactInfoAutoComplete";
ZaResource.A_zimbraMailForwardingAddressMaxLength="zimbraMailForwardingAddressMaxLength";
ZaResource.A_zimbraMailForwardingAddressMaxNumAddrs="zimbraMailForwardingAddressMaxNumAddrs";
ZaResource.ACCOUNT_STATUS_ACTIVE="active";
ZaResource.ACCOUNT_STATUS_MAINTENANCE="maintenance";
ZaResource.ACCOUNT_STATUS_LOCKED="locked";
ZaResource.ACCOUNT_STATUS_CLOSED="closed";
ZaResource.RESOURCE_TYPE_LOCATION="Location";
ZaResource.RESOURCE_TYPE_EQUIPMENT="Equipment";
ZaResource.SCHEDULE_POLICY_TT="scheduleTT";
ZaResource.SCHEDULE_POLICY_FT="scheduleFT";
ZaResource.SCHEDULE_POLICY_TF="scheduleTF";
ZaResource.SCHEDULE_POLICY_FF="scheduleFF";
ZaResource.A_zimbraPrefCalendarAutoAcceptSignatureId="zimbraPrefCalendarAutoAcceptSignatureId";
ZaResource.A_zimbraPrefCalendarAutoDeclineSignatureId="zimbraPrefCalendarAutoDeclineSignatureId";
ZaResource.A_zimbraPrefCalendarAutoDenySignatureId="zimbraPrefCalendarAutoDenySignatureId";
ZaResource.A2_signatureList="signatureList";
ZaResource.A2_signature_selection_cache="signatureSelectionCache";
ZaResource.A2_schedulePolicy="schedulePolicy";
ZaResource.A2_autodisplayname="autodisplayname";
ZaResource.A2_autoMailServer="automailserver";
ZaResource.A2_autoCos="autoCos";
ZaResource.A2_autoLocationName="autolocationname";
ZaResource.A2_myCOS="mycos";
ZaResource.A2_calFwdAddr_selection_cache="calFwdAddr_selection_cache";
ZaResource.MAXSEARCHRESULTS=ZaSettings.MAXSEARCHRESULTS;
ZaResource.RESULTSPERPAGE=ZaSettings.RESULTSPERPAGE;
ZaResource.searchAttributes=AjxBuffer.concat(ZaResource.A_displayname,",",ZaItem.A_zimbraId,",",ZaResource.A_mailHost,",",ZaResource.A_uid,",",ZaResource.A_accountStatus,",",ZaResource.A_description,",",ZaResource.A_zimbraCalResType);
ZaResource.VIEW_RESOURCE_MAIL_RIGHT="adminLoginCalendarResourceAs";
ZaResource.SET_CALRES_PASSWORD_RIGHT="setCalendarResourcePassword";
ZaResource.CHANGE_CALRES_PASSWORD_RIGHT="changeCalendarResourcePassword";
ZaResource.ADD_CALRES_ALIAS_RIGHT="addCalendarResourceAlias";
ZaResource.REMOVE_CALRES_ALIAS_RIGHT="removeCalendarResourceAlias";
ZaResource.DELETE_CALRES_RIGHT="deleteCalendarResource";
ZaResource.GET_CALRES_SHAREINFO_RIGHT="getCalendarResourceShareInfo";
ZaResource.LIST_CALRES_RIGHT="listCalendarResource";
ZaResource.PUBLISH_CALRES_SHAREINFO="publishCalendarResourceShareInfo";
ZaResource.RENAME_CALRES_RIGHT="renameCalendarResource";
ZaResource.GET_CALRES_INFO_RIGHT="getCalendarResourceInfo";
ZaResource.checkValues=function(f){if(ZaItem.hasWritePermission(ZaAccount.A_name,f)){if(f.name==null||f.name.length<1){ZaApp.getInstance().getCurrentController().popupErrorDialog(ZaMsg.ERROR_ACCOUNT_NAME_REQUIRED);
return false
}if(!AjxUtil.isValidEmailNonReg(f.name)){ZaApp.getInstance().getCurrentController().popupErrorDialog(ZaMsg.ERROR_RESOURCE_EMAIL_INVALID);
return false
}}var d=Number.POSITIVE_INFINITY;
var b=1;
if(ZaItem.hasWritePermission(ZaAccount.A_zimbraMinPwdLength,f)&&ZaItem.hasWritePermission(ZaAccount.A_zimbraMaxPwdLength,f)){if(f.attrs[ZaResource.A_zimbraMinPwdLength]!=null){b=f.attrs[ZaResource.A_zimbraMinPwdLength]
}else{b=f._defaultValues.attrs[ZaResource.A_zimbraMinPwdLength]
}if(f.attrs[ZaResource.A_zimbraMaxPwdLength]!=null){d=f.attrs[ZaResource.A_zimbraMaxPwdLength]
}else{d=f._defaultValues.attrs[ZaResource.A_zimbraMaxPwdLength]
}}if(ZaItem.hasAnyRight([ZaResource.SET_CALRES_PASSWORD_RIGHT,ZaResource.CHANGE_CALRES_PASSWORD_RIGHT],f)){if(f.attrs[ZaResource.A_password]!=null||f[ZaResource.A2_confirmPassword]!=null){if(f.attrs[ZaResource.A_password]!=f[ZaResource.A2_confirmPassword]){ZaApp.getInstance().getCurrentController().popupErrorDialog(ZaMsg.ERROR_PASSWORD_MISMATCH);
return false
}if(f.attrs[ZaResource.A_password].length<b||AjxStringUtil.trim(f.attrs[ZaResource.A_password]).length<b){var c;
if(b>1){c=String(ZaMsg.NAD_passMinLengthMsg_p).replace("{0}",b)
}else{c=String(ZaMsg.NAD_passMinLengthMsg_s).replace("{0}",b)
}ZaApp.getInstance().getCurrentController().popupErrorDialog(ZaMsg.ERROR_PASSWORD_TOOSHORT+"<br>"+c);
return false
}if(AjxStringUtil.trim(f.attrs[ZaResource.A_password]).length>d){var e;
if(d>1){e=String(ZaMsg.NAD_passMinLengthMsg_p).replace("{0}",b)
}else{e=String(ZaMsg.NAD_passMinLengthMsg_s).replace("{0}",b)
}ZaApp.getInstance().getCurrentController().popupErrorDialog(ZaMsg.ERROR_PASSWORD_TOOLONG+"<br>"+e);
return false
}}}return true
};
ZaResource.createMethod=function(g,e){g.attrs[ZaResource.A_mail]=g.name;
var h;
var m=AjxSoapDoc.create("CreateCalendarResourceRequest",ZaZimbraAdmin.URN,null);
m.set(ZaResource.A_name,g.name);
if(g.attrs[ZaResource.A_password]&&g.attrs[ZaResource.A_password].length>0){m.set(ZaResource.A_password,g.attrs[ZaResource.A_password])
}if(g[ZaResource.A2_autoMailServer]=="TRUE"){g.attrs[ZaResource.A_mailHost]=null
}if(g[ZaResource.A2_autoCos]=="TRUE"){g.attrs[ZaResource.A_COSId]=null
}ZaResource.prototype.setLdapAttrsFromSchedulePolicy.call(g);
for(var l in g.attrs){if(l==ZaResource.A_password||l==ZaItem.A_objectClass||l==ZaResource.A_mail||l==ZaResource.A_zimbraPrefCalendarAutoAcceptSignatureId||l==ZaResource.A_zimbraPrefCalendarAutoDenySignatureId||l==ZaResource.A_zimbraPrefCalendarAutoDeclineSignatureId){continue
}if(g.attrs[l] instanceof Array){var c=g.attrs[l].length;
if(c){for(var d=0;
d<c;
d++){var j=m.set("a",g.attrs[l][d]);
j.setAttribute("n",l)
}}}else{if(g.attrs[l]!=null){var j=m.set("a",g.attrs[l]);
j.setAttribute("n",l)
}}}try{var f=new Object();
f.soapDoc=m;
var b={controller:ZaApp.getInstance().getCurrentController(),busyMsg:ZaMsg.BUSY_CREATE_RESOURCE};
h=ZaRequestMgr.invoke(f,b).Body.CreateCalendarResourceResponse
}catch(k){throw k;
return null
}e.initFromJS(h.calresource[0]);
return e
};
ZaItem.createMethods.ZaResource.push(ZaResource.createMethod);
ZaItem.createMethods.ZaResource.push(ZaSignature.CreateAccountSignature);
ZaResource.modifyMethod=function(k){var l=false;
var j=AjxSoapDoc.create("ModifyCalendarResourceRequest",ZaZimbraAdmin.URN,null);
j.set("id",this.id);
for(var h in k){l=true;
if(k[h] instanceof Array){var c=k[h].length;
if(c){var e=false;
for(var d=0;
d<c;
d++){var g=null;
if(k[h][d] instanceof String||AjxUtil.isString(k[h][d])){if(AjxUtil.isEmpty(k[h][d])){continue
}else{e=true
}var g=j.set("a",k[h][d].toString())
}else{if(k[h][d] instanceof Object){var g=j.set("a",k[h][d].toString());
e=true
}else{var g=j.set("a",k[h][d]);
e=true
}}if(g){g.setAttribute("n",h)
}}if(!e){var g=j.set("a","");
g.setAttribute("n",h)
}}else{var g=j.set("a","");
g.setAttribute("n",h)
}}else{var g=j.set("a",k[h]);
g.setAttribute("n",h)
}}if(!l){return
}var f=new Object();
f.soapDoc=j;
var b={controller:ZaApp.getInstance().getCurrentController(),busyMsg:ZaMsg.BUSY_MODIFY_RESOURCE};
resp=ZaRequestMgr.invoke(f,b).Body.ModifyCalendarResourceResponse;
this.initFromJS(resp.calresource[0]);
this[ZaResource.A2_confirmPassword]=null;
this._toolTip=null;
return
};
ZaItem.modifyMethods.ZaResource.push(ZaResource.modifyMethod);
ZaResource.prototype.remove=function(d){var b=AjxSoapDoc.create("DeleteCalendarResourceRequest",ZaZimbraAdmin.URN,null);
b.set("id",this.id);
this.deleteCommand=new ZmCsfeCommand();
var c=new Object();
c.soapDoc=b;
c.noAuthToken=true;
if(d){c.asyncMode=true;
c.callback=d
}this.deleteCommand.invoke(c)
};
ZaResource.prototype.initFromJS=function(d){if(!d){return
}this.attrs=new Object();
this.name=d.name;
this.id=d.id;
this.attrs[ZaResource.A_zimbraPrefCalendarForwardInvitesTo]=new Array();
var b=(d.a?d.a.length:0);
for(var c=0;
c<b;
c++){if(!this.attrs[[d.a[c].n]]){this.attrs[[d.a[c].n]]=d.a[c]._content
}else{if(!(this.attrs[[d.a[c].n]] instanceof Array)){this.attrs[[d.a[c].n]]=[this.attrs[[d.a[c].n]]]
}this.attrs[[d.a[c].n]].push(d.a[c]._content)
}}this.setSchedulePolicyFromLdapAttrs();
if(!this.attrs[ZaAccount.A_description]){this.attrs[ZaAccount.A_description]=[]
}if(!(this.attrs[ZaAccount.A_description] instanceof Array)){this.attrs[ZaAccount.A_description]=[this.attrs[ZaAccount.A_description]]
}};
ZaResource.prototype.setSchedulePolicyFromLdapAttrs=function(){if(this.attrs[ZaResource.A_zimbraCalResAutoAcceptDecline]=="TRUE"&&this.attrs[ZaResource.A_zimbraCalResAutoDeclineIfBusy]=="TRUE"){this[ZaResource.A2_schedulePolicy]=ZaResource.SCHEDULE_POLICY_TT
}else{if(this.attrs[ZaResource.A_zimbraCalResAutoAcceptDecline]=="TRUE"&&this.attrs[ZaResource.A_zimbraCalResAutoDeclineIfBusy]=="FALSE"){this[ZaResource.A2_schedulePolicy]=ZaResource.SCHEDULE_POLICY_TF
}else{if(this.attrs[ZaResource.A_zimbraCalResAutoAcceptDecline]=="FALSE"&&this.attrs[ZaResource.A_zimbraCalResAutoDeclineIfBusy]=="FALSE"){this[ZaResource.A2_schedulePolicy]=ZaResource.SCHEDULE_POLICY_FF
}else{if(this.attrs[ZaResource.A_zimbraCalResAutoAcceptDecline]=="FALSE"&&this.attrs[ZaResource.A_zimbraCalResAutoDeclineIfBusy]=="TRUE"){this[ZaResource.A2_schedulePolicy]=ZaResource.SCHEDULE_POLICY_FT
}}}}};
ZaResource.prototype.setLdapAttrsFromSchedulePolicy=function(){if(this[ZaResource.A2_schedulePolicy]==ZaResource.SCHEDULE_POLICY_TT){this.attrs[ZaResource.A_zimbraCalResAutoAcceptDecline]="TRUE";
this.attrs[ZaResource.A_zimbraCalResAutoDeclineIfBusy]="TRUE"
}else{if(this[ZaResource.A2_schedulePolicy]==ZaResource.SCHEDULE_POLICY_TF){this.attrs[ZaResource.A_zimbraCalResAutoAcceptDecline]="TRUE";
this.attrs[ZaResource.A_zimbraCalResAutoDeclineIfBusy]="FALSE"
}else{if(this[ZaResource.A2_schedulePolicy]==ZaResource.SCHEDULE_POLICY_FT){this.attrs[ZaResource.A_zimbraCalResAutoAcceptDecline]="FALSE";
this.attrs[ZaResource.A_zimbraCalResAutoDeclineIfBusy]="TRUE"
}else{if(this[ZaResource.A2_schedulePolicy]==ZaResource.SCHEDULE_POLICY_FF){this.attrs[ZaResource.A_zimbraCalResAutoAcceptDecline]="FALSE";
this.attrs[ZaResource.A_zimbraCalResAutoDeclineIfBusy]="FALSE"
}}}}};
ZaResource.prototype.getToolTip=function(){if(!this._toolTip){var c=new Array(20);
var b=0;
c[b++]="<table cellpadding='0' cellspacing='0' border='0'>";
c[b++]="<tr valign='center'><td colspan='2' align='left'>";
c[b++]="<div style='border-bottom: 1px solid black; white-space:nowrap; overflow:hidden;width:350' >";
c[b++]="<table cellpadding='0' cellspacing='0' border='0' style='width:100%;'>";
c[b++]="<tr valign='center'>";
c[b++]="<td><b>"+AjxStringUtil.htmlEncode(this.name)+"</b></td>";
c[b++]="<td align='right'>";
if(this.attrs[ZaResource.A_zimbraCalResType]==ZaResource.RESOURCE_TYPE_LOCATION){c[b++]=AjxImg.getImageHtml("Location")
}else{c[b++]=AjxImg.getImageHtml("Resource")
}c[b++]="</td>";
c[b++]="</table></div></td></tr>";
c[b++]="<tr></tr>";
b=this._addRow(ZaMsg.NAD_ResourceStatus,ZaResource.getAccountStatusLabel(this.attrs[ZaResource.A_accountStatus]),c,b);
b=this._addRow(ZaMsg.NAD_ResourceName,this.attrs[ZaResource.A_displayname],c,b);
b=this._addRow(ZaMsg.NAD_ResType,ZaResource.getResTypeLabel(this.attrs[ZaResource.A_zimbraCalResType]),c,b);
if(this.getAttrs&&this.getAttrs[ZaResource.A_mailHost]){b=this._addRow(ZaMsg.NAD_MailServer,this.attrs[ZaResource.A_mailHost],c,b)
}b=this._addAttrRow(ZaItem.A_zimbraId,c,b);
c[b++]="</table>";
this._toolTip=c.join("")
}return this._toolTip
};
ZaResource.loadMethod=function(h,b,g){var j=AjxSoapDoc.create("GetCalendarResourceRequest",ZaZimbraAdmin.URN,null);
if(g){j.getMethod().setAttribute("applyCos","1")
}else{j.getMethod().setAttribute("applyCos","0")
}if(!this.getAttrs.all&&!AjxUtil.isEmpty(this.attrsToGet)){j.setMethodAttribute("attrs",this.attrsToGet.join(","))
}var k=j.set("calresource",b);
k.setAttribute("by",h);
var d=new Object();
d.soapDoc=j;
var c={controller:ZaApp.getInstance().getCurrentController(),busyMsg:ZaMsg.BUSY_GET_RESOURCE};
var e=ZaRequestMgr.invoke(d,c).Body.GetCalendarResourceResponse;
this.attrs=new Object();
this.initFromJS(e.calresource[0]);
var f=this.attrs[ZaResource.A_locationDisplayName];
if(!f){f=""
}if(this.getAutoLocationName()==f){this[ZaResource.A2_autoLocationName]="TRUE"
}else{this[ZaResource.A2_autoLocationName]="FALSE"
}this[ZaResource.A2_confirmPassword]=null
};
ZaItem.loadMethods.ZaResource.push(ZaResource.loadMethod);
ZaResource.loadInfoMethod=function(f,j,d){if(!ZaItem.hasRight(ZaResource.GET_CALRES_INFO_RIGHT,this)){return
}var e=AjxSoapDoc.create("GetAccountInfoRequest",ZaZimbraAdmin.URN,null);
var b=e.set("account",j);
b.setAttribute("by",f);
var h=new Object();
i;
h.soapDoc=e;
var c={controller:ZaApp.getInstance().getCurrentController()};
var g=ZaRequestMgr.invoke(h,c).Body.GetAccountInfoResponse;
if(g[ZaAccount.A2_publicMailURL]&&g[ZaAccount.A2_publicMailURL][0]){this[ZaAccount.A2_publicMailURL]=g[ZaAccount.A2_publicMailURL][0]._content
}if(g[ZaAccount.A2_adminSoapURL]&&g[ZaAccount.A2_adminSoapURL][0]){this[ZaAccount.A2_adminSoapURL]=g[ZaAccount.A2_adminSoapURL][0]._content
}if(g[ZaAccount.A2_soapURL]&&g[ZaAccount.A2_soapURL][0]){this[ZaAccount.A2_soapURL]=g[ZaAccount.A2_soapURL][0]._content
}};
ZaItem.loadMethods.ZaResource.push(ZaSignature.GetSignatures);
ZaItem.loadMethods.ZaResource.push(ZaResource.loadInfoMethod);
ZaResource.prototype.getAutoLocationName=function(){var b="";
if(this.attrs[ZaResource.A_zimbraCalResSite]){b+=ZaMsg.NAD_Site+" "+this.attrs[ZaResource.A_zimbraCalResSite]
}if(this.attrs[ZaResource.A_zimbraCalResBuilding]){b+=", "+ZaMsg.NAD_Building+" "+this.attrs[ZaResource.A_zimbraCalResBuilding]
}if(this.attrs[ZaResource.A_zimbraCalResFloor]){b+=", "+ZaMsg.NAD_Floor+" "+this.attrs[ZaResource.A_zimbraCalResFloor]
}if(this.attrs[ZaResource.A_zimbraCalResRoom]){b+=", "+ZaMsg.NAD_Room+" "+this.attrs[ZaResource.A_zimbraCalResRoom]
}var c=/^\,\s*/;
b=b.replace(c,"");
return b
};
ZaResource.prototype.refresh=function(b){this.load("id",this.id,b)
};
ZaResource.prototype.rename=function(b){var d=AjxSoapDoc.create("RenameCalendarResourceRequest",ZaZimbraAdmin.URN,null);
d.set("id",this.id);
d.set("newName",b);
var e=new Object();
e.soapDoc=d;
var c={controller:ZaApp.getInstance().getCurrentController(),busyMsg:ZaMsg.BUSY_RENAME_RESOURCE};
ZaRequestMgr.invoke(e,c)
};
ZaResource.myXModel={items:[{id:ZaResource.A_name,type:_STRING_,ref:"name",required:true,constraints:{type:"method",value:function(e,c,d,b){if(e){if(AjxUtil.isValidEmailNonReg(e)){return e
}else{throw ZaMsg.ErrorInvalidEmailAddress
}}}}},{id:ZaItem.A_zimbraId,type:_STRING_,ref:"attrs/"+ZaItem.A_zimbraId},{id:ZaItem.A_zimbraCreateTimestamp,ref:"attrs/"+ZaItem.A_zimbraCreateTimestamp},{id:ZaResource.A_mail,type:_STRING_,ref:"attrs/"+ZaResource.A_mail,constraints:{type:"method",value:function(e,c,d,b){if(e){if(AjxUtil.isValidEmailNonReg(e)){return e
}else{throw ZaMsg.ErrorInvalidEmailAddress
}}}}},{id:ZaResource.A2_schedulePolicy,type:_STRING_,ref:ZaResource.A2_schedulePolicy},{id:ZaResource.A_password,type:_STRING_,ref:"attrs/"+ZaAccount.A_password},{id:ZaResource.A2_confirmPassword,type:_STRING_},{id:ZaResource.A_displayname,type:_STRING_,ref:"attrs/"+ZaResource.A_displayname,required:true},{id:ZaResource.A_zimbraCalResType,type:_STRING_,ref:"attrs/"+ZaResource.A_zimbraCalResType},{id:ZaResource.A_uid,type:_STRING_,ref:"attrs/"+ZaResource.A_uid},{id:ZaResource.A_mailHost,type:_STRING_,ref:"attrs/"+ZaResource.A_mailHost},{id:ZaResource.A_COSId,type:_STRING_,ref:"attrs/"+ZaResource.A_COSId},{id:ZaResource.A_accountStatus,type:_STRING_,ref:"attrs/"+ZaResource.A_accountStatus},{id:ZaResource.A_zimbraCalResAutoDeclineIfBusy,type:_STRING_,ref:"attrs/"+ZaResource.A_zimbraCalResAutoDeclineIfBusy},{id:ZaResource.A_zimbraCalResAlwaysFree,type:_STRING_,ref:"attrs/"+ZaResource.A_zimbraCalResAlwaysFree},{id:ZaResource.A_zimbraCalResAutoDeclineRecurring,type:_STRING_,ref:"attrs/"+ZaResource.A_zimbraCalResAutoDeclineRecurring},{id:ZaResource.A_zimbraCalResMaxNumConflictsAllowed,type:_NUMBER_,ref:"attrs/"+ZaResource.A_zimbraCalResMaxNumConflictsAllowed,defaultValue:0,minInclusive:0},{id:ZaResource.A_zimbraCalResMaxPercentConflictsAllowed,type:_NUMBER_,ref:"attrs/"+ZaResource.A_zimbraCalResMaxPercentConflictsAllowed,minInclusive:0,maxInclusive:100,defaultValue:0},ZaItem.descriptionModelItem,{id:ZaResource.A_notes,type:_STRING_,ref:"attrs/"+ZaResource.A_notes},{id:ZaResource.A_zimbraPrefCalendarAutoAcceptSignatureId,type:_STRING_,ref:"attrs/"+ZaResource.A_zimbraPrefCalendarAutoAcceptSignatureId},{id:ZaResource.A_zimbraPrefCalendarAutoDenySignatureId,type:_STRING_,ref:"attrs/"+ZaResource.A_zimbraPrefCalendarAutoDenySignatureId},{id:ZaResource.A_zimbraPrefCalendarAutoDeclineSignatureId,type:_STRING_,ref:"attrs/"+ZaResource.A_zimbraPrefCalendarAutoDeclineSignatureId},{id:ZaResource.A_zimbraCalResSite,type:_STRING_,ref:"attrs/"+ZaResource.A_zimbraCalResSite},{id:ZaResource.A_zimbraCalResBuilding,type:_STRING_,ref:"attrs/"+ZaResource.A_zimbraCalResBuilding},{id:ZaResource.A_zimbraCalResFloor,type:_STRING_,ref:"attrs/"+ZaResource.A_zimbraCalResFloor},{id:ZaResource.A_zimbraCalResRoom,type:_STRING_,ref:"attrs/"+ZaResource.A_zimbraCalResRoom},{id:ZaResource.A_zimbraCalResCapacity,type:_NUMBER_,ref:"attrs/"+ZaResource.A_zimbraCalResCapacity},{id:ZaResource.A_locationDisplayName,type:_STRING_,ref:"attrs/"+ZaResource.A_locationDisplayName},{id:ZaResource.A_street,type:_STRING_,ref:"attrs/"+ZaResource.A_street},{id:ZaResource.A_city,type:_STRING_,ref:"attrs/"+ZaResource.A_city},{id:ZaResource.A_state,type:_STRING_,ref:"attrs/"+ZaResource.A_state},{id:ZaResource.A_country,type:_STRING_,ref:"attrs/"+ZaResource.A_country},{id:ZaResource.A_zip,type:_STRING_,ref:"attrs/"+ZaResource.A_zip},{id:ZaResource.A_zimbraCalResContactName,type:_STRING_,ref:"attrs/"+ZaResource.A_zimbraCalResContactName},{id:ZaResource.A_zimbraCalResContactEmail,type:_STRING_,ref:"attrs/"+ZaResource.A_zimbraCalResContactEmail,constraints:{type:"method",value:function(e,c,d,b){if(e){if(AjxUtil.isValidEmailNonReg(e)){return e
}else{throw ZaMsg.ErrorInvalidEmailAddress
}}}}},{id:ZaResource.A_zimbraCalResContactPhone,type:_STRING_,ref:"attrs/"+ZaResource.A_zimbraCalResContactPhone},{id:ZaResource.A_contactInfoAutoComplete,type:_LIST_,ref:"attrs/"+ZaResource.A_contactInfoAutoComplete},{id:ZaResource.A_zimbraPrefCalendarForwardInvitesTo,type:_LIST_,ref:"attrs/"+ZaResource.A_zimbraPrefCalendarForwardInvitesTo,listItem:{type:_EMAIL_ADDRESS_}},{id:ZaResource.A2_autodisplayname,type:_ENUM_,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaResource.A2_autoMailServer,type:_ENUM_,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaResource.A2_autoCos,type:_ENUM_,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaResource.A2_autoLocationName,type:_ENUM_,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaAccount.A2_calFwdAddr_selection_cache,type:_LIST_},{id:ZaResource.A2_signatureList,type:_LIST_},{id:ZaResource.A2_signature_selection_cache,type:_LIST_}]};
ZaItem._ATTR[ZaResource.A_displayname]=ZaMsg.attrDesc_accountName;
ZaItem._ATTR[ZaResource.A_description]=ZaMsg.attrDesc_description;
ZaItem._ATTR[ZaResource.A_accountStatus]=ZaMsg.attrDesc_accountStatus;
ZaItem._ATTR[ZaResource.A_mailHost]=ZabMsg.attrDesc_mailHost;
ZaItem._ATTR[ZaResource.A_notes]=ZaMsg.attrDesc_notes;
ZaResource.getAccountStatusLabel=ZaAccount.getAccountStatusMsg;
ZaResource.getResTypeLabel=function(c){var b=ZaResource._RESOURCE_TYPE[c];
return(b==null)?c:b
};
ZaResource._RESOURCE_TYPE=new Object();
ZaResource._RESOURCE_TYPE[ZaResource.RESOURCE_TYPE_LOCATION]=ZaMsg.resType_location;
ZaResource._RESOURCE_TYPE[ZaResource.RESOURCE_TYPE_EQUIPMENT]=ZaMsg.resType_equipment;
ZaResource.initMethod=function(){this.attrs=new Object();
this.id="";
this.name=""
};
ZaItem.initMethods.ZaResource.push(ZaResource.initMethod);
ZaResource.setAutoLocationName=function(e,d,c){var b=this.getInstance();
this.getForm().itemChanged(this,e,c);
if(b[ZaResource.A2_autoLocationName]=="TRUE"){b.attrs[ZaResource.A_locationDisplayName]=ZaResource.prototype.getAutoLocationName.call(b);
this.getForm().refresh()
}};
ZaResource.isLocation=function(){return(this.getInstanceValue(ZaResource.A_zimbraCalResType).toLowerCase()==ZaResource.RESOURCE_TYPE_LOCATION.toLowerCase())
};
ZaResource.isAutoDeclineEnabled=function(){return(this.getInstanceValue(ZaResource.A2_schedulePolicy)==ZaResource.SCHEDULE_POLICY_TT||this.getInstanceValue(ZaResource.A2_schedulePolicy)==ZaResource.SCHEDULE_POLICY_FT)
}
}if(AjxPackage.define("zimbraAdmin.resource.model.ZaContactList")){ZaContactList=function(){this._list=[]
};
ZaContactList.matchValue=ZaAccount.A_displayname;
ZaContactList.matchText="matchListFieldText";
ZaContactList.prototype.getContactList=function(e,f){try{var d={};
var c=Dwt.getNextId();
d.attrs=[ZaAccount.A_displayname,ZaAccount.A_mail,ZaAccount.A_telephoneNumber].join();
d.types=ZaSearch.ACCOUNTS;
d.sortBy=ZaAccount.A_displayname;
d.query=ZaSearch.getSearchByDisplayNameQuery(e);
d.applyCos="0";
myCallback=new AjxCallback(this,this.getDataCallback,{callback:f,busyId:c});
d.callback=myCallback;
d.controller=ZaApp.getInstance().getCurrentController();
d.showBusy=true;
d.busyMsg=ZaMsg.BUSY_SEARCHING;
d.skipCallbackIfCancelled=false;
d.busyId=c;
ZaSearch.searchDirectory(d)
}catch(b){ZaApp.getInstance().getCurrentController()._handleException(b,"ZaContactList.prototype.getContactList")
}};
ZaContactList.prototype._autocompleteCallback=function(e,f){var c=f.getForm();
var d=c.getItemsById(ZaResource.A_zimbraCalResContactEmail)[0];
var b=c.getItemsById(ZaResource.A_zimbraCalResContactPhone)[0];
d.setInstanceValue(e.contact[ZaAccount.A_name]);
b.setInstanceValue(e.contact[ZaAccount.A_telephoneNumber]);
c.refresh()
};
ZaContactList.prototype.getDataCallback=function(b,c){try{var k=b.callback;
if(b.busyId){ZaApp.getInstance().getAppCtxt().getShell().setBusy(false,b.busyId)
}if(!c){throw (new AjxException(ZaMsg.ERROR_EMPTY_RESPONSE_ARG,AjxException.UNKNOWN,"ZaContactList.prototype.getDataCallback"))
}if(c.isException()){ZaSearch.handleTooManyResultsException(c.getException(),"ZaContactList.prototype.getDataCallback")
}else{ZaSearch.TOO_MANY_RESULTS_FLAG=false;
var d=c.getResponse().Body.SearchDirectoryResponse;
var h=new ZaItemList();
h.loadFromJS(d);
var g=h.getArray();
var e=[];
for(var f=0;
f<g.length;
f++){e[f]={contact:{}};
e[f]["contact"][ZaAccount.A_displayname]=g[f].attrs[ZaAccount.A_displayname];
e[f]["contact"][ZaAccount.A_name]=g[f][ZaAccount.A_name];
e[f]["contact"][ZaAccount.A_telephoneNumber]=g[f].attrs[ZaAccount.A_telephoneNumber];
e[f][ZaContactList.matchText]=e[f]["contact"][ZaAccount.A_displayname]+"< "+e[f]["contact"][ZaAccount.A_name]+">";
e[f][ZaContactList.matchValue]=e[f]["contact"][ZaAccount.A_displayname]
}k.run(e)
}}catch(j){ZaApp.getInstance().getCurrentController()._handleException(j,"ZaContactList.prototype.getDataCallback")
}};
ZaContactList.prototype.isUniqueValue=function(b){};
ZaContactList.prototype.getList=function(){return this._list
}
}if(AjxPackage.define("zimbraAdmin.accounts.model.ZaAlias")){ZaAlias=function(){ZaItem.call(this);
this.attrs=new Object();
this.id="";
this.name="";
this.type=ZaItem.ALIAS
};
ZaAlias.prototype=new ZaItem;
ZaAlias.prototype.constructor=ZaAlias;
ZaAlias.A_AliasTargetId="zimbraAliasTargetId";
ZaAlias.A_targetAccount="targetName";
ZaAlias.A_targetType="type";
ZaAlias.A_index="index";
ZaAlias.A_uid="uid";
ZaAlias.TARGET_TYPE_DL=ZaItem.DL;
ZaAlias.TARGET_TYPE_ACCOUNT=ZaItem.ACCOUNT;
ZaAlias.TARGET_TYPE_RESOURCE=ZaItem.RESOURCE;
ZaItem._ATTR[ZaAlias.A_targetAccount]=ZaMsg.attrDesc_aliasFor;
ZaAlias.searchAttributes=AjxBuffer.concat(ZaAlias.A_AliasTargetId,",",ZaItem.A_zimbraId,",",ZaAlias.A_targetAccount,",",ZaAlias.A_uid,",",ZaAlias.A_targetType,",",ZaAccount.A_description);
ZaAlias.prototype.remove=function(e){var b;
switch(this.attrs[ZaAlias.A_targetType]){case ZaAlias.TARGET_TYPE_ACCOUNT:b="RemoveAccountAliasRequest";
break;
case ZaAlias.TARGET_TYPE_DL:b="RemoveDistributionListAliasRequest";
break;
case ZaAlias.TARGET_TYPE_RESOURCE:b="RemoveAccountAliasRequest";
break;
default:throw new Error("Can't add alias for account type: "+this.attrs[ZaAlias.A_targetType])
}var c=AjxSoapDoc.create(b,ZaZimbraAdmin.URN,null);
c.set("id",this.attrs[ZaAlias.A_AliasTargetId]);
c.set("alias",this.name);
this.deleteCommand=new ZmCsfeCommand();
var d=new Object();
d.soapDoc=c;
d.noAuthToken=true;
if(e){d.asyncMode=true;
d.callback=e
}this.deleteCommand.invoke(d)
};
ZaAlias.prototype.getToolTip=function(){if(!this._toolTip){var c=new Array(20);
var b=0;
c[b++]="<table cellpadding='0' cellspacing='0' border='0'>";
c[b++]="<tr valign='center'><td colspan='2' align='left'>";
c[b++]="<div style='border-bottom: 1px solid black; white-space:nowrap; overflow:hidden;width:350' >";
c[b++]="<table cellpadding='0' cellspacing='0' border='0' style='width:100%;'>";
c[b++]="<tr valign='center'>";
c[b++]="<td><b>"+AjxStringUtil.htmlEncode(this.name)+"</b></td>";
c[b++]="<td align='right'>";
c[b++]=AjxImg.getImageHtml("AccountAlias");
c[b++]="</td>";
c[b++]="</table></div></td></tr>";
c[b++]="<tr></tr>";
var d=this.getAliasTargetObj();
if(d&&(this.attrs[ZaAlias.A_targetType]==ZaAlias.TARGET_TYPE_ACCOUNT)){b=this._addRow(ZaItem._attrDesc(ZaAlias.A_targetAccount),d.attrs[ZaAccount.A_displayname],c,b);
b=this._addRow(ZaMsg.NAD_AccountStatus,ZaAccount._accountStatus(d.attrs[ZaAccount.A_accountStatus]),c,b);
if(d.getAttrs[ZaAccount.A_mailHost]){b=this._addRow(ZaMsg.NAD_MailServer,d.attrs[ZaAccount.A_mailHost],c,b)
}}else{if(d&&(this.attrs[ZaAlias.A_targetType]==ZaAlias.TARGET_TYPE_DL)){b=this._addRow(ZaItem._attrDesc(ZaAlias.A_targetAccount),d.attrs[ZaAccount.A_displayname],c,b);
b=this._addRow(ZaMsg.NAD_AccountStatus,ZaDistributionList.getDLStatus(d.attrs[ZaDistributionList.A_mailStatus]),c,b)
}else{if(d&&(this.attrs[ZaAlias.A_targetType]==ZaAlias.TARGET_TYPE_RESOURCE)){b=this._addRow(ZaItem._attrDesc(ZaAlias.A_targetAccount),d.attrs[ZaAccount.A_displayname],c,b);
b=this._addRow(ZaMsg.NAD_AccountStatus,ZaResource.getAccountStatusLabel(d.attrs[ZaResource.A_accountStatus]),c,b);
if(d.getAttrs&&d.getAttrs[ZaResource.A_mailHost]){b=this._addRow(ZaMsg.NAD_MailServer,d.attrs[ZaResource.A_mailHost],c,b)
}}}}b=this._addAttrRow(ZaItem.A_zimbraId,c,b);
c[b++]="</table>";
this._toolTip=c.join("")
}return this._toolTip
};
ZaAlias.myXModel={items:[{id:"getAttrs",type:_LIST_},{id:"setAttrs",type:_LIST_},{id:"rights",type:_LIST_},{id:ZaAccount.A_name,type:_STRING_,ref:"name",constraints:{type:"method",value:function(e,c,d,b){if(e){if(AjxUtil.isValidEmailNonReg(e)){return e
}else{throw ZaMsg.ErrorInvalidEmailAddress
}}}}},{id:ZaAlias.A_AliasTargetId,type:_STRING_,ref:ZaAlias.A_AliasTargetId},{id:ZaAlias.A_targetType,type:_STRING_,ref:ZaAlias.A_targetType},{id:ZaAlias.A_targetAccount,ref:ZaAlias.A_targetAccount},{id:ZaAlias.A_index,type:_NUMBER_,ref:ZaAlias.A_index}]};
ZaAlias.prototype.addAlias=function(g){var b=g.getInstance();
var f=b[ZaAccount.A_name];
var e=b[ZaAlias.A_targetAccount];
try{var d;
var h=ZaAlias.TARGET_TYPE_ACCOUNT;
try{d=ZaAlias.getTargetByName(e,h)
}catch(c){if(c.code==ZmCsfeException.ACCT_NO_SUCH_ACCOUNT){h=ZaAlias.TARGET_TYPE_DL;
d=ZaAlias.getTargetByName(e,h)
}else{throw c
}}d.addAlias(f);
this.targetObj=d;
ZaApp.getInstance().getAccountViewController(true).fireCreationEvent(this);
g.parent.popdown();
ZaApp.getInstance().getAppCtxt().getAppController().setActionStatusMsg(AjxMessageFormat.format(ZaMsg.AliasCreated,[f]))
}catch(c){if(c.code==ZmCsfeException.ACCT_EXISTS){ZaApp.getInstance().getCurrentController().popupErrorDialog(AjxMessageFormat.format(ZaMsg.WARNING_ALIAS_EXISTS,[f])+"<BR />"+c.msg)
}else{if(c.code==ZmCsfeException.NO_SUCH_DISTRIBUTION_LIST||c.code==ZmCsfeException.ACCT_NO_SUCH_ACCOUNT){ZaApp.getInstance().getCurrentController().popupErrorDialog(AjxMessageFormat.format(ZaMsg.WARNING_ALIASES_TARGET_NON_EXIST,[e]))
}else{ZaApp.getInstance().getCurrentController()._handleException(c,"ZaAlias.prototype.addAlias",null,false)
}}}};
ZaAlias.getTargetByName=function(c,b){var j;
var k;
if(b==ZaAlias.TARGET_TYPE_DL){j=AjxSoapDoc.create("GetDistributionListRequest",ZaZimbraAdmin.URN,null);
k=j.set("dl",c)
}else{if(b==ZaAlias.TARGET_TYPE_ACCOUNT){j=AjxSoapDoc.create("GetAccountRequest",ZaZimbraAdmin.URN,null);
k=j.set("account",c)
}else{throw new Error("Alias type "+b+" is not valid.")
}}j.getMethod().setAttribute("applyCos","0");
k.setAttribute("by","name");
var e=new Object();
e.soapDoc=j;
var d={controller:ZaApp.getInstance().getCurrentController()};
var h=ZaRequestMgr.invoke(e,d).Body;
var f;
var g;
if(b==ZaAlias.TARGET_TYPE_DL){f=h.GetDistributionListResponse.dl[0];
g=new ZaDistributionList()
}else{if(b==ZaAlias.TARGET_TYPE_ACCOUNT){f=h.GetAccountResponse.account[0];
g=new ZaAccount()
}}g.attrs=new Object();
g.initFromJS(f);
return g
};
ZaAlias.prototype.getAliasTargetObj=function(){var c;
var e=this.attrs[ZaAlias.A_targetType];
var d=this.attrs[ZaAlias.A_targetAccount];
var b=this.attrs[ZaAlias.A_AliasTargetId];
if(e==ZaAlias.TARGET_TYPE_DL){c=new ZaDistributionList(b,d)
}else{if(e==ZaAlias.TARGET_TYPE_ACCOUNT){c=new ZaAccount()
}else{if(e==ZaAlias.TARGET_TYPE_RESOURCE){c=new ZaResource()
}else{throw new Error("Alias type "+e+" is not valid.")
}}}c.load("name",d,false,true);
return c
};
ZaAlias.prototype.initEffectiveRightsFromJS=function(e){if(!this.targetObj){var d=this.attrs[ZaAlias.A_targetType];
var c=this.attrs[ZaAlias.A_targetAccount];
var b=this.attrs[ZaAlias.A_AliasTargetId];
if(d==ZaAlias.TARGET_TYPE_DL){this.targetObj=new ZaDistributionList(b,c)
}else{if(d==ZaAlias.TARGET_TYPE_ACCOUNT){this.targetObj=new ZaAccount();
this.targetObj.id=b;
this.targetObj.name=c;
if(!this.targetObj.attrs){this.targetObj.attrs={}
}this.targetObj.attrs[ZaItem.A_cn]=c;
this.targetObj.attrs[ZaItem.A_zimbraId]=b
}}}this.targetObj.initEffectiveRightsFromJS(e)
}
}if(AjxPackage.define("zimbraAdmin.accounts.model.ZaForwardingAddress")){ZaForwardingAddress=function(){ZaItem.call(this,ZaEvent.S_ACCOUNT);
this.attrs=new Object();
this.id="";
this.name=""
};
ZaForwardingAddress.prototype=new ZaItem;
ZaForwardingAddress.prototype.constructor=ZaForwardingAddress
}if(AjxPackage.define("zimbraAdmin.accounts.model.ZaFp")){ZaFp=function(){ZaItem.call(this,ZaEvent.S_ACCOUNT);
this.attrs=new Object();
this.name="";
this.prefix=""
};
ZaFp.prototype=new ZaItem;
ZaFp.prototype.constructor=ZaFp;
ZaFp.A_name="name";
ZaFp.A_index="index";
ZaFp.A_prefix="prefix";
ZaFp.INTEROP_PROVIDER_CHOICES=[];
ZaFp.getXModel=function(){var b={items:[{id:"getAttrs",type:_LIST_},{id:"setAttrs",type:_LIST_},{id:"rights",type:_LIST_},{id:ZaFp.A_name,type:_STRING_,ref:ZaFp.A_name},{id:ZaFp.A_index,type:_NUMBER_,ref:ZaFp.A_index},{id:ZaFp.A_prefix,type:_STRING_,ref:ZaFp.A_prefix}]};
return b
};
ZaFp.getObject=function(c){var e={};
var d=false;
for(var b=0;
b<ZaFp.INTEROP_PROVIDER_CHOICES.length;
b++){if(c.indexOf(ZaFp.INTEROP_PROVIDER_CHOICES[b].value)==0){e[ZaFp.A_prefix]=ZaFp.INTEROP_PROVIDER_CHOICES[b].value;
e[ZaFp.A_name]=c.substr(ZaFp.INTEROP_PROVIDER_CHOICES[b].value.length);
d=true;
break
}}if(!d){e[ZaFp.A_name]=c
}return e
};
ZaFp.getEntry=function(c){var b="";
if(c!=null){b=(c[ZaFp.A_prefix]||"")+(c[ZaFp.A_name]||"")
}return b
};
ZaFp.push=function(f){var d=AjxSoapDoc.create("PushFreeBusyRequest",ZaZimbraAdmin.URN,null);
var e=d.set("account","");
e.setAttribute("id",f);
try{params=new Object();
params.soapDoc=d;
var c={controller:ZaApp.getInstance().getCurrentController(),asyncMode:false,busyMsg:ZaMsg.BUSY_PUSH_FP};
resp=ZaRequestMgr.invoke(params,c).Body.PushFreeBusyResponse;
ZaApp.getInstance().getCurrentController().popupMsgDialog(ZaMsg.PUSH_SUCCEED,true)
}catch(b){ZaApp.getInstance().getCurrentController()._handleException(b,"ZaFp.push",null,false)
}};
ZaFp.getProviders=function(){var e=AjxSoapDoc.create("GetAllFreeBusyProvidersRequest",ZaZimbraAdmin.URN,null);
try{params=new Object();
params.soapDoc=e;
var d={controller:ZaApp.getInstance().getCurrentController(),asyncMode:false,busyMsg:ZaMsg.BUSY_GET_INTEROP_PROVIDERS};
var g=ZaRequestMgr.invoke(params,d).Body.GetAllFreeBusyProvidersResponse;
ZaFp.INTEROP_PROVIDER_CHOICES=[];
var f=g.provider;
if(f!=null){for(var c=0;
c<f.length;
c++){ZaFp.INTEROP_PROVIDER_CHOICES.push({value:f[c].prefix||"",label:f[c].name})
}}}catch(b){ZaApp.getInstance().getCurrentController()._handleException(b,"ZaFp.push",null,false)
}};
ZaFp.findDupPrefixFp=function(b,d){for(var c=0;
c<b.length;
c++){if((d.length==0&&b[c].indexOf(":")==-1)||(d.length!=0&&b[c].indexOf(d)==0)){return true
}}return false
}
}if(AjxPackage.define("zimbraAdmin.cos.model.ZaCos")){ZaCos=function(){ZaItem.call(this,"ZaCos");
this._init()
};
ZaItem.loadMethods.ZaCos=new Array();
ZaItem.modifyMethods.ZaCos=new Array();
ZaItem.initMethods.ZaCos=new Array();
ZaItem.getRelatedMethods.ZaCos=new Array();
ZaCos.prototype=new ZaItem;
ZaCos.prototype.constructor=ZaCos;
ZaCos.NONE="none";
ZaCos.A_zimbraNotes="zimbraNotes";
ZaCos.A_zimbraMailQuota="zimbraMailQuota";
ZaCos.A_zimbraMinPwdLength="zimbraPasswordMinLength";
ZaCos.A_zimbraMaxPwdLength="zimbraPasswordMaxLength";
ZaCos.A_zimbraPasswordMinUpperCaseChars="zimbraPasswordMinUpperCaseChars";
ZaCos.A_zimbraPasswordMinLowerCaseChars="zimbraPasswordMinLowerCaseChars";
ZaCos.A_zimbraPasswordMinPunctuationChars="zimbraPasswordMinPunctuationChars";
ZaCos.A_zimbraPasswordMinNumericChars="zimbraPasswordMinNumericChars";
ZaCos.A_zimbraPasswordMinDigitsOrPuncs="zimbraPasswordMinDigitsOrPuncs";
ZaCos.A_zimbraMinPwdAge="zimbraPasswordMinAge";
ZaCos.A_zimbraMaxPwdAge="zimbraPasswordMaxAge";
ZaCos.A_zimbraEnforcePwdHistory="zimbraPasswordEnforceHistory";
ZaCos.A_zimbraPasswordLocked="zimbraPasswordLocked";
ZaCos.A_zimbraPasswordBlockCommonEnabled="zimbraPasswordBlockCommonEnabled";
ZaCos.A_name="cn";
ZaCos.A_description="description";
ZaCos.A_zimbraAttachmentsBlocked="zimbraAttachmentsBlocked";
ZaCos.A_zimbraQuotaWarnPercent="zimbraQuotaWarnPercent";
ZaCos.A_zimbraQuotaWarnInterval="zimbraQuotaWarnInterval";
ZaCos.A_zimbraQuotaWarnMessage="zimbraQuotaWarnMessage";
ZaCos.A_zimbraAdminAuthTokenLifetime="zimbraAdminAuthTokenLifetime";
ZaCos.A_zimbraAuthTokenLifetime="zimbraAuthTokenLifetime";
ZaCos.A_zimbraMailIdleSessionTimeout="zimbraMailIdleSessionTimeout";
ZaCos.A_zimbraContactMaxNumEntries="zimbraContactMaxNumEntries";
ZaCos.A_zimbraMailMinPollingInterval="zimbraMailMinPollingInterval";
ZaCos.A_zimbraMailMessageLifetime="zimbraMailMessageLifetime";
ZaCos.A_zimbraMailTrashLifetime="zimbraMailTrashLifetime";
ZaCos.A_zimbraMailSpamLifetime="zimbraMailSpamLifetime";
ZaCos.A_zimbraMailHostPool="zimbraMailHostPool";
ZaCos.A_zimbraAvailableSkin="zimbraAvailableSkin";
ZaCos.A_zimbraZimletAvailableZimlets="zimbraZimletAvailableZimlets";
ZaCos.A_zimbraMailForwardingAddressMaxLength="zimbraMailForwardingAddressMaxLength";
ZaCos.A_zimbraMailForwardingAddressMaxNumAddrs="zimbraMailForwardingAddressMaxNumAddrs";
ZaCos.A_zimbraPrefItemsPerVirtualPage="zimbraPrefItemsPerVirtualPage",ZaCos.A_zimbraDataSourceMinPollingInterval="zimbraDataSourceMinPollingInterval";
ZaCos.A_zimbraDataSourcePop3PollingInterval="zimbraDataSourcePop3PollingInterval";
ZaCos.A_zimbraDataSourceImapPollingInterval="zimbraDataSourceImapPollingInterval";
ZaCos.A_zimbraDataSourceCalendarPollingInterval="zimbraDataSourceCalendarPollingInterval";
ZaCos.A_zimbraDataSourceRssPollingInterval="zimbraDataSourceRssPollingInterval";
ZaCos.A_zimbraDataSourceCaldavPollingInterval="zimbraDataSourceCaldavPollingInterval";
ZaCos.A_zimbraProxyAllowedDomains="zimbraProxyAllowedDomains";
ZaCos.A_zimbraPrefMandatorySpellCheckEnabled="zimbraPrefMandatorySpellCheckEnabled";
ZaCos.A_zimbraPrefAppleIcalDelegationEnabled="zimbraPrefAppleIcalDelegationEnabled";
ZaCos.A_zimbraPrefCalendarShowPastDueReminders="zimbraPrefCalendarShowPastDueReminders";
ZaCos.A_zimbraPrefCalendarToasterEnabled="zimbraPrefCalendarToasterEnabled";
ZaCos.A_zimbraPrefCalendarAllowCancelEmailToSelf="zimbraPrefCalendarAllowCancelEmailToSelf";
ZaCos.A_zimbraPrefCalendarAllowPublishMethodInvite="zimbraPrefCalendarAllowPublishMethodInvite";
ZaCos.A_zimbraPrefCalendarAllowForwardedInvite="zimbraPrefCalendarAllowForwardedInvite";
ZaCos.A_zimbraPrefCalendarReminderFlashTitle="zimbraPrefCalendarReminderFlashTitle";
ZaCos.A_zimbraPrefCalendarReminderSoundsEnabled="zimbraPrefCalendarReminderSoundsEnabled";
ZaCos.A_zimbraPrefCalendarSendInviteDeniedAutoReply="zimbraPrefCalendarSendInviteDeniedAutoReply";
ZaCos.A_zimbraPrefCalendarAutoAddInvites="zimbraPrefCalendarAutoAddInvites";
ZaCos.A_zimbraPrefCalendarApptVisibility="zimbraPrefCalendarApptVisibility";
ZaCos.A_zimbraPrefCalendarNotifyDelegatedChanges="zimbraPrefCalendarNotifyDelegatedChanges";
ZaCos.A_zimbraPrefCalendarInitialView="zimbraPrefCalendarInitialView";
ZaCos.A_zimbraPrefClientType="zimbraPrefClientType";
ZaCos.A_zimbraPrefTimeZoneId="zimbraPrefTimeZoneId";
ZaCos.A_zimbraAllowAnyFromAddress="zimbraAllowAnyFromAddress";
ZaCos.A_zimbraPrefCalendarAlwaysShowMiniCal="zimbraPrefCalendarAlwaysShowMiniCal";
ZaCos.A_zimbraPrefCalendarUseQuickAdd="zimbraPrefCalendarUseQuickAdd";
ZaCos.A_zimbraPrefGroupMailBy="zimbraPrefGroupMailBy";
ZaCos.A_zimbraPrefIncludeSpamInSearch="zimbraPrefIncludeSpamInSearch";
ZaCos.A_zimbraPrefIncludeTrashInSearch="zimbraPrefIncludeTrashInSearch";
ZaCos.A_zimbraPrefMailInitialSearch="zimbraPrefMailInitialSearch";
ZaCos.A_zimbraMaxMailItemsPerPage="zimbraMaxMailItemsPerPage";
ZaCos.A_zimbraPrefMailItemsPerPage="zimbraPrefMailItemsPerPage";
ZaCos.A_zimbraPrefMailPollingInterval="zimbraPrefMailPollingInterval";
ZaCos.A_zimbraPrefAutoSaveDraftInterval="zimbraPrefAutoSaveDraftInterval";
ZaCos.A_zimbraPrefMailFlashTitle="zimbraPrefMailFlashTitle";
ZaCos.A_zimbraPrefMailFlashIcon="zimbraPrefMailFlashIcon";
ZaCos.A_zimbraPrefMailSoundsEnabled="zimbraPrefMailSoundsEnabled";
ZaCos.A_zimbraPrefMailToasterEnabled="zimbraPrefMailToasterEnabled";
ZaCos.A_zimbraPrefMessageIdDedupingEnabled="zimbraPrefMessageIdDedupingEnabled";
ZaCos.A_zimbraPrefUseKeyboardShortcuts="zimbraPrefUseKeyboardShortcuts";
ZaCos.A_zimbraPrefSaveToSent="zimbraPrefSaveToSent";
ZaCos.A_zimbraPrefComposeInNewWindow="zimbraPrefComposeInNewWindow";
ZaCos.A_zimbraPrefForwardReplyInOriginalFormat="zimbraPrefForwardReplyInOriginalFormat";
ZaCos.A_zimbraPrefAutoAddAddressEnabled="zimbraPrefAutoAddAddressEnabled";
ZaCos.A_zimbraPrefComposeFormat="zimbraPrefComposeFormat";
ZaCos.A_zimbraPrefMessageViewHtmlPreferred="zimbraPrefMessageViewHtmlPreferred";
ZaCos.A_zimbraPrefShowSearchString="zimbraPrefShowSearchString";
ZaCos.A_zimbraPrefUseTimeZoneListInCalendar="zimbraPrefUseTimeZoneListInCalendar";
ZaCos.A_zimbraPrefImapSearchFoldersEnabled="zimbraPrefImapSearchFoldersEnabled";
ZaCos.A_zimbraPrefCalendarApptReminderWarningTime="zimbraPrefCalendarApptReminderWarningTime";
ZaCos.A_zimbraPrefSkin="zimbraPrefSkin";
ZaCos.A_zimbraPrefGalAutoCompleteEnabled="zimbraPrefGalAutoCompleteEnabled";
ZaCos.A_zimbraPrefWarnOnExit="zimbraPrefWarnOnExit";
ZaCos.A_zimbraPrefShowSelectionCheckbox="zimbraPrefShowSelectionCheckbox";
ZaCos.A_zimbraPrefHtmlEditorDefaultFontFamily="zimbraPrefHtmlEditorDefaultFontFamily";
ZaCos.A_zimbraPrefHtmlEditorDefaultFontSize="zimbraPrefHtmlEditorDefaultFontSize";
ZaCos.A_zimbraPrefHtmlEditorDefaultFontColor="zimbraPrefHtmlEditorDefaultFontColor";
ZaCos.A_zimbraMailSignatureMaxLength="zimbraMailSignatureMaxLength";
ZaCos.A_zimbraPrefDisplayExternalImages="zimbraPrefDisplayExternalImages";
ZaCos.A_zimbraPrefOutOfOfficeCacheDuration="zimbraPrefOutOfOfficeCacheDuration";
ZaCos.A_zimbraPrefMailDefaultCharset="zimbraPrefMailDefaultCharset";
ZaCos.A_zimbraPrefLocale="zimbraPrefLocale";
ZaCos.A_zimbraJunkMessagesIndexingEnabled="zimbraJunkMessagesIndexingEnabled";
ZaCos.A_zimbraPrefMailSendReadReceipts="zimbraPrefMailSendReadReceipts";
ZaCos.A_zimbraPrefAdminConsoleWarnOnExit="zimbraPrefAdminConsoleWarnOnExit";
ZaCos.A_zimbraPrefImapEnabled="zimbraPrefImapEnabled";
ZaCos.A_zimbraPrefPop3Enabled="zimbraPrefPop3Enabled";
ZaCos.A_zimbraFeatureExportFolderEnabled="zimbraFeatureExportFolderEnabled";
ZaCos.A_zimbraFeatureImportFolderEnabled="zimbraFeatureImportFolderEnabled";
ZaCos.A_zimbraFeatureDocumentEditingEnabled="zimbraFeatureDocumentEditingEnabled";
ZaCos.A_zimbraDumpsterEnabled="zimbraDumpsterEnabled";
ZaCos.A_zimbraMailDumpsterLifetime="zimbraMailDumpsterLifetime";
ZaCos.A_zimbraDumpsterUserVisibleAge="zimbraDumpsterUserVisibleAge";
ZaCos.A_zimbraDumpsterPurgeEnabled="zimbraDumpsterPurgeEnabled";
ZaCos.A_zimbraPrefCalendarFirstDayOfWeek="zimbraPrefCalendarFirstDayOfWeek";
ZaCos.A_zimbraFeatureReadReceiptsEnabled="zimbraFeatureReadReceiptsEnabled";
ZaCos.A_zimbraFeatureMailPriorityEnabled="zimbraFeatureMailPriorityEnabled";
ZaCos.A_zimbraFeatureImapDataSourceEnabled="zimbraFeatureImapDataSourceEnabled";
ZaCos.A_zimbraFeaturePop3DataSourceEnabled="zimbraFeaturePop3DataSourceEnabled";
ZaCos.A_zimbraFeatureIdentitiesEnabled="zimbraFeatureIdentitiesEnabled";
ZaCos.A_zimbraFeatureContactsEnabled="zimbraFeatureContactsEnabled";
ZaCos.A_zimbraFeatureCalendarEnabled="zimbraFeatureCalendarEnabled";
ZaCos.A_zimbraFeatureTasksEnabled="zimbraFeatureTasksEnabled";
ZaCos.A_zimbraFeatureTaggingEnabled="zimbraFeatureTaggingEnabled";
ZaCos.A_zimbraFeaturePeopleSearchEnabled="zimbraFeaturePeopleSearchEnabled";
ZaCos.A_zimbraFeatureAdvancedSearchEnabled="zimbraFeatureAdvancedSearchEnabled";
ZaCos.A_zimbraFeatureSavedSearchesEnabled="zimbraFeatureSavedSearchesEnabled";
ZaCos.A_zimbraFeatureConversationsEnabled="zimbraFeatureConversationsEnabled";
ZaCos.A_zimbraFeatureChangePasswordEnabled="zimbraFeatureChangePasswordEnabled";
ZaCos.A_zimbraFeatureInitialSearchPreferenceEnabled="zimbraFeatureInitialSearchPreferenceEnabled";
ZaCos.A_zimbraFeatureFiltersEnabled="zimbraFeatureFiltersEnabled";
ZaCos.A_zimbraFeatureGalEnabled="zimbraFeatureGalEnabled";
ZaCos.A_zimbraFeatureMAPIConnectorEnabled="zimbraFeatureMAPIConnectorEnabled";
ZaCos.A_zimbraFeatureEwsEnabled="zimbraFeatureEwsEnabled";
ZaCos.A_zimbraFeatureTouchClientEnabled="zimbraFeatureTouchClientEnabled";
ZaCos.A_zimbraFeatureWebClientOfflineAccessEnabled="zimbraFeatureWebClientOfflineAccessEnabled";
ZaCos.A_zimbraFeatureMailForwardingEnabled="zimbraFeatureMailForwardingEnabled";
ZaCos.A_zimbraFeatureMailSendLaterEnabled="zimbraFeatureMailSendLaterEnabled";
ZaCos.A_zimbraFeatureSharingEnabled="zimbraFeatureSharingEnabled";
ZaCos.A_zimbraExternalSharingEnabled="zimbraExternalSharingEnabled";
ZaCos.A_zimbraPublicSharingEnabled="zimbraPublicSharingEnabled";
ZaCos.A_zimbraFeatureCalendarReminderDeviceEmailEnabled="zimbraFeatureCalendarReminderDeviceEmailEnabled";
ZaCos.A_zimbraFeatureBriefcasesEnabled="zimbraFeatureBriefcasesEnabled";
ZaCos.A_zimbraFeatureBriefcaseDocsEnabled="zimbraFeatureBriefcaseDocsEnabled";
ZaCos.A_zimbraImapEnabled="zimbraImapEnabled";
ZaCos.A_zimbraPop3Enabled="zimbraPop3Enabled";
ZaCos.A_zimbraFeatureWebClientEnabled="zimbraFeatureWebClientEnabled";
ZaCos.A_zimbraFeatureHtmlComposeEnabled="zimbraFeatureHtmlComposeEnabled";
ZaCos.A_zimbraFeatureGalAutoCompleteEnabled="zimbraFeatureGalAutoCompleteEnabled";
ZaCos.A_zimbraFeatureManageZimlets="zimbraFeatureManageZimlets";
ZaCos.A_zimbraFeatureSkinChangeEnabled="zimbraFeatureSkinChangeEnabled";
ZaCos.A_zimbraFeatureOutOfOfficeReplyEnabled="zimbraFeatureOutOfOfficeReplyEnabled";
ZaCos.A_zimbraFeatureNewMailNotificationEnabled="zimbraFeatureNewMailNotificationEnabled";
ZaCos.A_zimbraFeatureOptionsEnabled="zimbraFeatureOptionsEnabled";
ZaCos.A_zimbraFeatureMailEnabled="zimbraFeatureMailEnabled";
ZaCos.A_zimbraFeatureGroupCalendarEnabled="zimbraFeatureGroupCalendarEnabled";
ZaCos.A_zimbraFeatureFlaggingEnabled="zimbraFeatureFlaggingEnabled";
ZaCos.A_zimbraFeatureManageSMIMECertificateEnabled="zimbraFeatureManageSMIMECertificateEnabled";
ZaCos.A_zimbraFeatureSMIMEEnabled="zimbraFeatureSMIMEEnabled";
ZaCos.A_zimbraFeatureDistributionListFolderEnabled="zimbraFeatureDistributionListFolderEnabled";
ZaCos.A_zimbraPasswordLockoutEnabled="zimbraPasswordLockoutEnabled";
ZaCos.A_zimbraPasswordLockoutDuration="zimbraPasswordLockoutDuration";
ZaCos.A_zimbraPasswordLockoutMaxFailures="zimbraPasswordLockoutMaxFailures";
ZaCos.A_zimbraPasswordLockoutFailureLifetime="zimbraPasswordLockoutFailureLifetime";
ZaCos.A_zimbraNumFileVersionsToKeep="zimbraNumFileVersionsToKeep";
ZaCos.A_zimbraUnaccessedFileLifetime="zimbraUnaccessedFileLifetime";
ZaCos.A_zimbraFileTrashLifetime="zimbraFileTrashLifetime";
ZaCos.A_zimbraFileSendExpirationWarning="zimbraFileSendExpirationWarning";
ZaCos.A_zimbraFileExpirationWarningDays="zimbraFileExpirationWarningDays";
ZaCos.A2_retentionPoliciesKeepInherited="retentionPoliciesKeepInherited";
ZaCos.A2_retentionPoliciesKeep="retentionPolicyKeep";
ZaCos.A2_retentionPoliciesPurge="retentionPolicyPurge";
ZaCos.A2_retentionPoliciesKeep_Selection="retentionPoliciesKeep_Selection";
ZaCos.A2_retentionPoliciesPurge_Selection="retentionPoliciesPurge_Selection";
ZaCos.RIGHT_LIST_COS="listCos";
ZaCos.RIGHT_LIST_ZIMLET="listZimlet";
ZaCos.RIGHT_GET_ZIMLET="getZimlet";
ZaCos.RIGHT_GET_HOSTNAME="zimbraVirtualHostname";
ZaCos.A_zimbraFreebusyExchangeUserOrg="zimbraFreebusyExchangeUserOrg";
ZaCos.A_zimbraSieveRejectMailEnabled="zimbraSieveRejectMailEnabled";
ZaCos.A_zimbraSieveEditHeaderEnabled="zimbraSieveEditHeaderEnabled";
ZaCos.A_zimbraAdminSieveScriptBefore="zimbraAdminSieveScriptBefore";
ZaCos.A_zimbraAdminSieveScriptAfter="zimbraAdminSieveScriptAfter";
ZaCos.cacheCounter=0;
ZaCos.staticCosByNameCacheTable={};
ZaCos.staticCosByIdCacheTable={};
ZaCos.putCosToCache=function(b){if(ZaCos.cacheCounter==100){ZaCos.staticCosByNameCacheTable={};
ZaCos.staticCosByIdCacheTable={};
ZaCos.cacheCounter=0
}if(!ZaCos.staticCosByNameCacheTable[b.name]||!ZaCos.staticCosByIdCacheTable[b.id]){ZaCos.cacheCounter++;
ZaCos.staticCosByNameCacheTable[b.name]=b;
ZaCos.staticCosByIdCacheTable[b.id]=b
}};
ZaCos.MAJOR_FEATURES_CHOICES=[{value:ZaCos.A_zimbraFeatureMailEnabled,label:ZaMsg.NAD_zimbraFeatureMailEnabled},{value:ZaCos.A_zimbraFeatureContactsEnabled,label:ZaMsg.NAD_FeatureContactsEnabled},{value:ZaCos.A_zimbraFeatureCalendarEnabled,label:ZaMsg.NAD_FeatureCalendarEnabled},{value:ZaCos.A_zimbraFeatureTasksEnabled,label:ZaMsg.NAD_FeatureTaskEnabled},{value:ZaCos.A_zimbraFeatureBriefcasesEnabled,label:ZaMsg.NAD_zimbraFeatureBriefcasesEnabled},{value:ZaCos.A_zimbraFeatureOptionsEnabled,label:ZaMsg.NAD_zimbraFeatureOptionsEnabled}];
ZaCos.RENAME_COS_RIGHT="renameCos";
ZaCos.CREATE_COS_RIGHT="createCos";
ZaCos.DELETE_COS_RIGHT="deleteCos";
ZaCos.initMethod=function(){this.attrs=new Object();
this.id="";
this.name="";
this.type=ZaItem.COS
};
ZaItem.initMethods.ZaCos.push(ZaCos.initMethod);
ZaCos.loadMethod=function(f,j){var d=AjxSoapDoc.create("GetCosRequest",ZaZimbraAdmin.URN,null);
var c=d.set("cos",j);
c.setAttribute("by",f);
if(!this.getAttrs.all&&!AjxUtil.isEmpty(this.attrsToGet)){d.getMethod().setAttribute("attrs",this.attrsToGet.join(","))
}var h=new Object();
h.soapDoc=d;
var b={controller:ZaApp.getInstance().getCurrentController(),busyMsg:ZaMsg.BUSY_GET_COS};
var g=ZaRequestMgr.invoke(h,b).Body.GetCosResponse;
this.initFromJS(g.cos[0]);
if(this.attrs[ZaAccount.A_zimbraPrefMailPollingInterval]){var e=ZaUtil.getLifeTimeInSeconds(this.attrs[ZaAccount.A_zimbraPrefMailPollingInterval]);
if(e>=1){this.attrs[ZaAccount.A_zimbraPrefMailPollingInterval]=e+"s"
}}if(this.attrs[ZaCos.A_zimbraProxyAllowedDomains]&&(!(this.attrs[ZaCos.A_zimbraProxyAllowedDomains] instanceof Array))){this.attrs[ZaCos.A_zimbraProxyAllowedDomains]=[this.attrs[ZaCos.A_zimbraProxyAllowedDomains]]
}};
ZaItem.loadMethods.ZaCos.push(ZaCos.loadMethod);
ZaCos.prototype.refresh=function(){this.load("name",this.name)
};
ZaCos.prototype.initFromJS=function(b){ZaItem.prototype.initFromJS.call(this,b);
if(typeof(this.attrs[ZaCos.A_zimbraMailHostPool])=="string"){this.attrs[ZaCos.A_zimbraMailHostPool]=[this.attrs[ZaCos.A_zimbraMailHostPool]]
}};
ZaCos.prototype.create=function(b,l){var k=AjxSoapDoc.create("CreateCosRequest",ZaZimbraAdmin.URN,null);
k.set("name",b);
for(var j in l){if(l[j] instanceof Array){var d=l[j].length;
if(d){for(var e=0;
e<d;
e++){if(l[j][e] instanceof String){var h=k.set("a",l[j][e].toString())
}else{if(l[j][e] instanceof Object){var h=k.set("a",l[j][e].toString())
}else{var h=k.set("a",l[j][e])
}}h.setAttribute("n",j)
}}}else{if(l[j]&&(l[j].length||!isNaN(l[j]))){var h=k.set("a",l[j]);
h.setAttribute("n",j)
}}}var g=new Object();
g.soapDoc=k;
var c={controller:ZaApp.getInstance().getCurrentController(),busyMsg:ZaMsg.BUSY_CREATE_COS};
var f=ZaRequestMgr.invoke(g,c).Body.CreateCosResponse;
this.initFromJS(f.cos[0])
};
ZaCos.prototype.rename=function(b){var d=AjxSoapDoc.create("RenameCosRequest",ZaZimbraAdmin.URN,null);
d.set("id",this.id);
d.set("newName",b);
var f=new Object();
f.soapDoc=d;
var c={controller:ZaApp.getInstance().getCurrentController(),busyMsg:ZaMsg.BUSY_RENAME_COS};
var e=ZaRequestMgr.invoke(f,c).Body.RenameCosResponse;
this.initFromJS(e.cos[0])
};
ZaCos.prototype.remove=function(e){var c=AjxSoapDoc.create("DeleteCosRequest",ZaZimbraAdmin.URN,null);
c.set("id",this.id);
var d=new Object();
d.soapDoc=c;
d.soapDoc=c;
if(e){d.asyncMode=true;
d.callback=e
}var b={controller:ZaApp.getInstance().getCurrentController(),busyMsg:ZaMsg.BUSY_DELETE_COS};
ZaRequestMgr.invoke(d,b)
};
ZaCos.modifyMethod=function(m){var l=false;
var k=AjxSoapDoc.create("ModifyCosRequest",ZaZimbraAdmin.URN,null);
k.set("id",this.id);
for(var j in m){l=true;
if(m[j] instanceof Array){var c=m[j].length;
if(c){var e=false;
for(var d=0;
d<c;
d++){var h=null;
if(m[j][d] instanceof String||AjxUtil.isString(m[j][d])){if(AjxUtil.isEmpty(m[j][d])){continue
}else{e=true
}var h=k.set("a",m[j][d].toString())
}else{if(m[j][d] instanceof Object){var h=k.set("a",m[j][d].toString());
e=true
}else{var h=k.set("a",m[j][d]);
e=true
}}if(h){h.setAttribute("n",j)
}}if(!e){var h=k.set("a","");
h.setAttribute("n",j)
}}else{var h=k.set("a","");
h.setAttribute("n",j)
}}else{var h=k.set("a",m[j]);
h.setAttribute("n",j)
}}if(!l){return
}var g=new Object();
g.soapDoc=k;
var b={controller:ZaApp.getInstance().getCurrentController(),busyMsg:ZaMsg.BUSY_MODIFY_COS};
var f=ZaRequestMgr.invoke(g,b).Body.ModifyCosResponse;
this.initFromJS(f.cos[0]);
ZaCos.putCosToCache(this)
};
ZaItem.modifyMethods.ZaCos.push(ZaCos.modifyMethod);
ZaCos.prototype.getToolTip=function(){if(!this._toolTip){var c=new Array(20);
var b=0;
c[b++]="<table cellpadding='0' cellspacing='0' border='0'>";
c[b++]="<tr valign='center'><td colspan='2' align='left'>";
c[b++]="<div style='border-bottom: 1px solid black; white-space:nowrap; overflow:hidden;'>";
c[b++]="<table cellpadding='0' cellspacing='0' border='0' style='width:100%;'>";
c[b++]="<tr valign='center'>";
c[b++]="<td><b>"+AjxStringUtil.htmlEncode(this.name)+"</b></td>";
c[b++]="<td align='right'>";
c[b++]=AjxImg.getImageHtml("COS");
c[b++]="</td>";
c[b++]="</table></div></td></tr>";
c[b++]="<tr></tr>";
b=this._addAttrRow(ZaItem.A_description,c,b);
b=this._addAttrRow(ZaItem.A_zimbraId,c,b);
c[b++]="</table>";
this._toolTip=c.join("")
}return this._toolTip
};
ZaCos.getAll=function(){var c=AjxSoapDoc.create("GetAllCosRequest",ZaZimbraAdmin.URN,null);
var f=new Object();
f.soapDoc=c;
var b={controller:ZaApp.getInstance().getCurrentController(),busyMsg:ZaMsg.BUSY_GET_ALL_COS};
var e=ZaRequestMgr.invoke(f,b).Body.GetAllCosResponse;
var d=new ZaItemList(ZaCos);
d.loadFromJS(e);
return d
};
ZaCos.getCosChoices=function(){if(ZaCos.cosChoices){return ZaCos.cosChoices
}else{ZaCos.cosChoices=new XFormChoices
}};
ZaCos.getDefaultCos4Account=function(j,b){var d;
var l;
if(!j){return d
}var c=ZaAccount.getDomain(j);
var f;
var e;
try{e=ZaDomain.getDomainByName(c)
}catch(h){e=undefined
}if(e){f=b?e.attrs[ZaDomain.A_domainDefaultExternalUserCOSId]:e.attrs[ZaDomain.A_domainDefaultCOSId];
var g=b?"defaultExternal":"default";
if(!f){var k=ZaCos.getCosByName(g);
return k
}else{var k=ZaCos.getCosById(f);
if(!k){k=ZaCos.getCosByName(g)
}return k
}}else{return null
}};
ZaCos.getCosByName=function(b){if(!b){return null
}var d=ZaCos.staticCosByNameCacheTable[b];
if(!d){d=new ZaCos();
try{d.load("name",b)
}catch(c){if(c.code==ZmCsfeException.NO_SUCH_COS){return null
}else{throw (c)
}}ZaCos.putCosToCache(d)
}return d
};
ZaCos.getCosById=function(b){if(!b){return null
}var d=ZaCos.staticCosByIdCacheTable[b];
if(!d){d=new ZaCos();
try{d.load("id",b)
}catch(c){if(c.code==ZmCsfeException.NO_SUCH_COS){return null
}else{throw (c)
}}ZaCos.putCosToCache(d)
}return d
};
ZaCos.myXModel={items:[{id:"getAttrs",type:_LIST_},{id:"setAttrs",type:_LIST_},{id:"rights",type:_LIST_},{id:ZaItem.A_zimbraId,type:_STRING_,ref:"attrs/"+ZaItem.A_zimbraId},{id:ZaItem.A_zimbraCreateTimestamp,ref:"attrs/"+ZaItem.A_zimbraCreateTimestamp},{id:ZaCos.A_zimbraMailHostPool,ref:"attrs/"+ZaCos.A_zimbraMailHostPool,type:_LIST_,dataType:_STRING_,outputType:_LIST_},{id:ZaCos.A_zimbraNotes,type:_STRING_,ref:"attrs/"+ZaCos.A_zimbraNotes},{id:ZaCos.A_zimbraMailQuota,type:_MAILQUOTA_,ref:"attrs."+ZaCos.A_zimbraMailQuota},{id:ZaCos.A_zimbraMinPwdLength,type:_NUMBER_,ref:"attrs/"+ZaCos.A_zimbraMinPwdLength,maxInclusive:2147483647,minInclusive:0},{id:ZaCos.A_zimbraMaxPwdLength,type:_NUMBER_,ref:"attrs/"+ZaCos.A_zimbraMaxPwdLength,maxInclusive:2147483647,minInclusive:0},{id:ZaCos.A_zimbraPasswordMinUpperCaseChars,type:_NUMBER_,ref:"attrs/"+ZaCos.A_zimbraPasswordMinUpperCaseChars,maxInclusive:2147483647,minInclusive:0},{id:ZaCos.A_zimbraPasswordMinLowerCaseChars,type:_NUMBER_,ref:"attrs/"+ZaCos.A_zimbraPasswordMinLowerCaseChars,maxInclusive:2147483647,minInclusive:0},{id:ZaCos.A_zimbraPasswordMinPunctuationChars,type:_NUMBER_,ref:"attrs/"+ZaCos.A_zimbraPasswordMinPunctuationChars,maxInclusive:2147483647,minInclusive:0},{id:ZaCos.A_zimbraPasswordMinNumericChars,type:_NUMBER_,ref:"attrs/"+ZaCos.A_zimbraPasswordMinNumericChars,maxInclusive:2147483647,minInclusive:0},{id:ZaCos.A_zimbraPasswordMinDigitsOrPuncs,type:_NUMBER_,ref:"attrs/"+ZaCos.A_zimbraPasswordMinDigitsOrPuncs,maxInclusive:2147483647,minInclusive:0},{id:ZaCos.A_zimbraMinPwdAge,type:_NUMBER_,ref:"attrs/"+ZaCos.A_zimbraMinPwdAge,maxInclusive:2147483647,minInclusive:0},{id:ZaCos.A_zimbraMaxPwdAge,type:_NUMBER_,ref:"attrs/"+ZaCos.A_zimbraMaxPwdAge,maxInclusive:2147483647,minInclusive:0},{id:ZaCos.A_zimbraEnforcePwdHistory,type:_NUMBER_,ref:"attrs/"+ZaCos.A_zimbraEnforcePwdHistory,maxInclusive:2147483647,minInclusive:0},{id:ZaCos.A_zimbraPasswordLocked,type:_ENUM_,choices:ZaModel.BOOLEAN_CHOICES,ref:"attrs/"+ZaCos.A_zimbraPasswordLocked},{id:ZaCos.A_zimbraPasswordBlockCommonEnabled,type:_ENUM_,choices:ZaModel.BOOLEAN_CHOICES,ref:"attrs/"+ZaCos.A_zimbraPasswordBlockCommonEnabled},{id:ZaCos.A_name,type:_STRING_,ref:"attrs/"+ZaCos.A_name},ZaItem.descriptionModelItem,{id:ZaCos.A_zimbraAttachmentsBlocked,type:_ENUM_,choices:ZaModel.BOOLEAN_CHOICES,ref:"attrs/"+ZaCos.A_zimbraAttachmentsBlocked},{id:ZaCos.A_zimbraAuthTokenLifetime,type:_MLIFETIME_,ref:"attrs/"+ZaCos.A_zimbraAuthTokenLifetime,required:true},{id:ZaCos.A_zimbraAdminAuthTokenLifetime,type:_MLIFETIME_,ref:"attrs/"+ZaCos.A_zimbraAdminAuthTokenLifetime,required:true},{id:ZaCos.A_zimbraMailIdleSessionTimeout,type:_MINTERVAL_,ref:"attrs/"+ZaCos.A_zimbraMailIdleSessionTimeout},{id:ZaCos.A_zimbraContactMaxNumEntries,type:_NUMBER_,ref:"attrs/"+ZaCos.A_zimbraContactMaxNumEntries,maxInclusive:2147483647,minInclusive:0},{id:ZaCos.A_zimbraMailForwardingAddressMaxLength,type:_NUMBER_,ref:"attrs/"+ZaCos.A_zimbraMailForwardingAddressMaxLength,maxInclusive:2147483647,minInclusive:0},{id:ZaCos.A_zimbraMailForwardingAddressMaxNumAddrs,type:_NUMBER_,ref:"attrs/"+ZaCos.A_zimbraMailForwardingAddressMaxNumAddrs,maxInclusive:2147483647,minInclusive:0},{id:ZaCos.A_zimbraMailMinPollingInterval,type:_MINTERVAL_,ref:"attrs/"+ZaCos.A_zimbraMailMinPollingInterval},{id:ZaCos.A_zimbraMailMessageLifetime,type:_MLIFETIME_,ref:"attrs/"+ZaCos.A_zimbraMailMessageLifetime},{id:ZaCos.A_zimbraMailTrashLifetime,type:_MLIFETIME_,ref:"attrs/"+ZaCos.A_zimbraMailTrashLifetime},{id:ZaCos.A_zimbraPrefItemsPerVirtualPage,type:_NUMBER_,ref:"attrs/"+ZaCos.A_zimbraPrefItemsPerVirtualPage},{id:ZaCos.A_zimbraMailSpamLifetime,type:_MLIFETIME_,ref:"attrs/"+ZaCos.A_zimbraMailSpamLifetime},{id:ZaCos.A_zimbraQuotaWarnPercent,type:_NUMBER_,ref:"attrs/"+ZaCos.A_zimbraQuotaWarnPercent},{id:ZaCos.A_zimbraQuotaWarnInterval,type:_MINTERVAL_,ref:"attrs/"+ZaCos.A_zimbraQuotaWarnInterval},{id:ZaCos.A_zimbraQuotaWarnMessage,type:_STRING_,ref:"attrs/"+ZaCos.A_zimbraQuotaWarnMessage},{id:ZaCos.A_zimbraPrefMandatorySpellCheckEnabled,types:_ENUM_,ref:"attrs/"+ZaCos.A_zimbraPrefMandatorySpellCheckEnabled,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaCos.A_zimbraPrefAppleIcalDelegationEnabled,types:_ENUM_,ref:"attrs/"+ZaCos.A_zimbraPrefAppleIcalDelegationEnabled,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaCos.A_zimbraPrefCalendarShowPastDueReminders,types:_ENUM_,ref:"attrs/"+ZaCos.A_zimbraPrefCalendarShowPastDueReminders,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaCos.A_zimbraPrefCalendarToasterEnabled,type:_ENUM_,ref:"attrs/"+ZaCos.A_zimbraPrefCalendarToasterEnabled,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaCos.A_zimbraPrefCalendarAllowCancelEmailToSelf,type:_ENUM_,ref:"attrs/"+ZaCos.A_zimbraPrefCalendarAllowCancelEmailToSelf,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaCos.A_zimbraPrefCalendarAllowPublishMethodInvite,type:_ENUM_,ref:"attrs/"+ZaCos.A_zimbraPrefCalendarAllowPublishMethodInvite,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaCos.A_zimbraPrefCalendarAllowForwardedInvite,type:_ENUM_,ref:"attrs/"+ZaCos.A_zimbraPrefCalendarAllowForwardedInvite,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaCos.A_zimbraPrefCalendarReminderFlashTitle,type:_ENUM_,ref:"attrs/"+ZaCos.A_zimbraPrefCalendarReminderFlashTitle,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaCos.A_zimbraPrefCalendarReminderSoundsEnabled,type:_ENUM_,ref:"attrs/"+ZaCos.A_zimbraPrefCalendarReminderSoundsEnabled,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaCos.A_zimbraPrefCalendarAutoAddInvites,type:_ENUM_,ref:"attrs/"+ZaCos.A_zimbraPrefCalendarAutoAddInvites,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaCos.A_zimbraPrefCalendarNotifyDelegatedChanges,type:_ENUM_,ref:"attrs/"+ZaCos.A_zimbraPrefCalendarNotifyDelegatedChanges,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaCos.A_zimbraPrefCalendarApptVisibility,type:_ENUM_,ref:"attrs/"+ZaCos.A_zimbraPrefCalendarApptVisibility,choices:ZaSettings.apptVisibilityChoices},{id:ZaCos.A_zimbraPrefCalendarFirstDayOfWeek,type:_NUMBER_,ref:"attrs/"+ZaCos.A_zimbraPrefCalendarFirstDayOfWeek,choices:ZaSettings.dayOfWeekChoices},{id:ZaCos.A_zimbraPrefCalendarInitialView,type:_ENUM_,ref:"attrs/"+ZaCos.A_zimbraPrefCalendarInitialView,choices:ZaSettings.calendarViewChoinces},{id:ZaCos.A_zimbraPrefClientType,type:_STRING_,ref:"attrs/"+ZaCos.A_zimbraPrefClientType,choices:ZaSettings.clientTypeChoices},{id:ZaCos.A_zimbraPrefTimeZoneId,type:_STRING_,ref:"attrs/"+ZaCos.A_zimbraPrefTimeZoneId,choices:ZaSettings.timeZoneChoices},{id:ZaCos.A_zimbraPrefGroupMailBy,type:_STRING_,ref:"attrs/"+ZaCos.A_zimbraPrefGroupMailBy},{id:ZaCos.A_zimbraPrefIncludeSpamInSearch,choices:ZaModel.BOOLEAN_CHOICES,ref:"attrs/"+ZaCos.A_zimbraPrefIncludeSpamInSearch,type:_ENUM_},{id:ZaCos.A_zimbraPrefIncludeTrashInSearch,choices:ZaModel.BOOLEAN_CHOICES,ref:"attrs/"+ZaCos.A_zimbraPrefIncludeTrashInSearch,type:_ENUM_},{id:ZaCos.A_zimbraPrefMailInitialSearch,type:_STRING_,ref:"attrs/"+ZaCos.A_zimbraPrefMailInitialSearch},{id:ZaCos.A_zimbraPrefUseKeyboardShortcuts,choices:ZaModel.BOOLEAN_CHOICES,ref:"attrs/"+ZaCos.A_zimbraPrefUseKeyboardShortcuts,type:_ENUM_},{id:ZaCos.A_zimbraAllowAnyFromAddress,choices:ZaModel.BOOLEAN_CHOICES,ref:"attrs/"+ZaCos.A_zimbraAllowAnyFromAddress,type:_ENUM_},{id:ZaCos.A_zimbraPrefSaveToSent,choices:ZaModel.BOOLEAN_CHOICES,ref:"attrs/"+ZaCos.A_zimbraPrefSaveToSent,type:_ENUM_},{id:ZaCos.A_zimbraMaxMailItemsPerPage,type:_NUMBER_,ref:"attrs/"+ZaCos.A_zimbraMaxMailItemsPerPage,maxInclusive:2147483647,minInclusive:0},{id:ZaCos.A_zimbraPrefMailItemsPerPage,type:_NUMBER_,ref:"attrs/"+ZaCos.A_zimbraPrefMailItemsPerPage,choices:[10,25,50,100]},{id:ZaCos.A_zimbraPrefHtmlEditorDefaultFontFamily,choices:ZaModel.FONT_FAMILY_CHOICES,ref:"attrs/"+ZaCos.A_zimbraPrefHtmlEditorDefaultFontFamily,type:_ENUM_},{id:ZaCos.A_zimbraPrefHtmlEditorDefaultFontSize,choices:ZaModel.FONT_SIZE_CHOICES,ref:"attrs/"+ZaCos.A_zimbraPrefHtmlEditorDefaultFontSize,type:_ENUM_},{id:ZaCos.A_zimbraPrefHtmlEditorDefaultFontColor,ref:"attrs/"+ZaCos.A_zimbraPrefHtmlEditorDefaultFontColor,type:_STRING_},{id:ZaCos.A_zimbraMailSignatureMaxLength,type:_NUMBER_,ref:"attrs/"+ZaCos.A_zimbraMailSignatureMaxLength},{id:ZaCos.A_zimbraPrefMailToasterEnabled,type:_ENUM_,ref:"attrs/"+ZaCos.A_zimbraPrefMailToasterEnabled,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaCos.A_zimbraPrefMessageIdDedupingEnabled,type:_ENUM_,ref:"attrs/"+ZaCos.A_zimbraPrefMessageIdDedupingEnabled,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaCos.A_zimbraPrefComposeInNewWindow,choices:ZaModel.BOOLEAN_CHOICES,ref:"attrs/"+ZaCos.A_zimbraPrefComposeInNewWindow,type:_ENUM_},{id:ZaCos.A_zimbraPrefForwardReplyInOriginalFormat,choices:ZaModel.BOOLEAN_CHOICES,ref:"attrs/"+ZaCos.A_zimbraPrefForwardReplyInOriginalFormat,type:_ENUM_},{id:ZaCos.A_zimbraPrefComposeFormat,choices:ZaModel.COMPOSE_FORMAT_CHOICES,ref:"attrs/"+ZaCos.A_zimbraPrefComposeFormat,type:_ENUM_},{id:ZaCos.A_zimbraPrefAutoAddAddressEnabled,choices:ZaModel.BOOLEAN_CHOICES,ref:"attrs/"+ZaCos.A_zimbraPrefAutoAddAddressEnabled,type:_ENUM_},{id:ZaCos.A_zimbraPrefImapSearchFoldersEnabled,choices:ZaModel.BOOLEAN_CHOICES,ref:"attrs/"+ZaCos.A_zimbraPrefImapSearchFoldersEnabled,type:_ENUM_},{id:ZaCos.A_zimbraPrefGroupMailBy,choices:ZaModel.GROUP_MAIL_BY_CHOICES,ref:"attrs/"+ZaCos.A_zimbraPrefGroupMailBy,type:_ENUM_},{id:ZaCos.A_zimbraPrefMessageViewHtmlPreferred,choices:ZaModel.BOOLEAN_CHOICES,ref:"attrs/"+ZaCos.A_zimbraPrefMessageViewHtmlPreferred,type:_ENUM_},{id:ZaCos.A_zimbraPrefShowSearchString,choices:ZaModel.BOOLEAN_CHOICES,ref:"attrs/"+ZaCos.A_zimbraPrefShowSearchString,type:_ENUM_},{id:ZaCos.A_zimbraPrefUseTimeZoneListInCalendar,choices:ZaModel.BOOLEAN_CHOICES,ref:"attrs/"+ZaCos.A_zimbraPrefUseTimeZoneListInCalendar,type:_ENUM_},{id:ZaCos.A_zimbraPrefMailPollingInterval,ref:"attrs/"+ZaCos.A_zimbraPrefMailPollingInterval,type:_ENUM_,choices:ZaModel.MAIL_POLLING_INTERVAL_CHOICES},{id:ZaCos.A_zimbraPrefAutoSaveDraftInterval,ref:"attrs/"+ZaCos.A_zimbraPrefAutoSaveDraftInterval,type:_MINTERVAL_},{id:ZaCos.A_zimbraDataSourceMinPollingInterval,ref:"attrs/"+ZaCos.A_zimbraDataSourceMinPollingInterval,type:_LIFETIME_},{id:ZaCos.A_zimbraDataSourcePop3PollingInterval,ref:"attrs/"+ZaCos.A_zimbraDataSourcePop3PollingInterval,type:_LIFETIME_},{id:ZaCos.A_zimbraDataSourceImapPollingInterval,ref:"attrs/"+ZaCos.A_zimbraDataSourceImapPollingInterval,type:_LIFETIME_},{id:ZaCos.A_zimbraDataSourceCalendarPollingInterval,ref:"attrs/"+ZaCos.A_zimbraDataSourceCalendarPollingInterval,type:_LIFETIME_},{id:ZaCos.A_zimbraDataSourceRssPollingInterval,ref:"attrs/"+ZaCos.A_zimbraDataSourceRssPollingInterval,type:_LIFETIME_},{id:ZaCos.A_zimbraDataSourceCaldavPollingInterval,ref:"attrs/"+ZaCos.A_zimbraDataSourceCaldavPollingInterval,type:_LIFETIME_},{id:ZaCos.A_zimbraProxyAllowedDomains,type:_LIST_,ref:"attrs/"+ZaCos.A_zimbraProxyAllowedDomains,listItem:{type:_STRING_}},{id:ZaCos.A_zimbraPrefMailFlashIcon,choices:ZaModel.BOOLEAN_CHOICES,ref:"attrs/"+ZaCos.A_zimbraPrefMailFlashIcon,type:_ENUM_},{id:ZaCos.A_zimbraPrefMailFlashTitle,choices:ZaModel.BOOLEAN_CHOICES,ref:"attrs/"+ZaCos.A_zimbraPrefMailFlashTitle,type:_ENUM_},{id:ZaCos.A_zimbraPrefMailSoundsEnabled,choices:ZaModel.BOOLEAN_CHOICES,ref:"attrs/"+ZaCos.A_zimbraPrefMailSoundsEnabled,type:_ENUM_},{id:ZaCos.A_zimbraPrefCalendarUseQuickAdd,choices:ZaModel.BOOLEAN_CHOICES,ref:"attrs/"+ZaCos.A_zimbraPrefCalendarUseQuickAdd,type:_ENUM_},{id:ZaCos.A_zimbraPrefCalendarAlwaysShowMiniCal,choices:ZaModel.BOOLEAN_CHOICES,ref:"attrs/"+ZaCos.A_zimbraPrefCalendarAlwaysShowMiniCal,type:_ENUM_},{id:ZaCos.A_zimbraPrefCalendarApptReminderWarningTime,choices:ZaModel.REMINDER_CHOICES,ref:"attrs/"+ZaCos.A_zimbraPrefCalendarApptReminderWarningTime,type:_ENUM_},{id:ZaCos.A_zimbraPrefSkin,ref:"attrs/"+ZaCos.A_zimbraPrefSkin,type:_STRING_},{id:ZaCos.A_zimbraPrefGalAutoCompleteEnabled,choices:ZaModel.BOOLEAN_CHOICES,ref:"attrs/"+ZaCos.A_zimbraPrefGalAutoCompleteEnabled,type:_ENUM_},{id:ZaCos.A_zimbraPrefWarnOnExit,choices:ZaModel.BOOLEAN_CHOICES,ref:"attrs/"+ZaCos.A_zimbraPrefWarnOnExit,type:_ENUM_},{id:ZaCos.A_zimbraPrefAdminConsoleWarnOnExit,choices:ZaModel.BOOLEAN_CHOICES,ref:"attrs/"+ZaCos.A_zimbraPrefAdminConsoleWarnOnExit,type:_ENUM_},{id:ZaCos.A_zimbraPrefShowSelectionCheckbox,choices:ZaModel.BOOLEAN_CHOICES,ref:"attrs/"+ZaCos.A_zimbraPrefShowSelectionCheckbox,type:_ENUM_},{id:ZaCos.A_zimbraPrefIMAutoLogin,choices:ZaModel.BOOLEAN_CHOICES,ref:"attrs/"+ZaCos.A_zimbraPrefIMAutoLogin,type:_ENUM_},{id:ZaCos.A_zimbraAvailableSkin,ref:"attrs/"+ZaCos.A_zimbraAvailableSkin,type:_LIST_,dataType:_STRING_,outputType:_LIST_},{id:ZaCos.A_zimbraZimletAvailableZimlets,ref:"attrs/"+ZaCos.A_zimbraZimletAvailableZimlets,type:_LIST_,dataType:_STRING_,outputType:_LIST_},{id:ZaCos.A_zimbraPrefDisplayExternalImages,choices:ZaModel.BOOLEAN_CHOICES,ref:"attrs/"+ZaCos.A_zimbraPrefDisplayExternalImages,type:_ENUM_},{id:ZaCos.A_zimbraPrefOutOfOfficeCacheDuration,ref:"attrs/"+ZaCos.A_zimbraPrefOutOfOfficeCacheDuration,type:_MLIFETIME_},{id:ZaCos.A_zimbraPrefMailDefaultCharset,type:_STRING_,ref:"attrs/"+ZaCos.A_zimbraPrefMailDefaultCharset,choices:ZaSettings.mailCharsetChoices},{id:ZaCos.A_zimbraPrefLocale,type:_STRING_,ref:"attrs/"+ZaCos.A_zimbraPrefLocale},{id:ZaCos.A_zimbraJunkMessagesIndexingEnabled,choices:ZaModel.BOOLEAN_CHOICES,ref:"attrs/"+ZaCos.A_zimbraJunkMessagesIndexingEnabled,type:_ENUM_},{id:ZaCos.A_zimbraPrefMailSendReadReceipts,choices:ZaModel.SEND_READ_RECEPIT_CHOICES,ref:"attrs/"+ZaCos.A_zimbraPrefMailSendReadReceipts,type:_ENUM_},{id:ZaCos.A_zimbraPrefImapEnabled,choices:ZaModel.BOOLEAN_CHOICES,ref:"attrs/"+ZaCos.A_zimbraPrefImapEnabled,type:_ENUM_},{id:ZaCos.A_zimbraPrefPop3Enabled,choices:ZaModel.BOOLEAN_CHOICES,ref:"attrs/"+ZaCos.A_zimbraPrefPop3Enabled,type:_ENUM_},{id:ZaCos.A_zimbraFeatureExportFolderEnabled,choices:ZaModel.BOOLEAN_CHOICES,ref:"attrs/"+ZaCos.A_zimbraFeatureExportFolderEnabled,type:_ENUM_},{id:ZaCos.A_zimbraFeatureDocumentEditingEnabled,choices:ZaModel.BOOLEAN_CHOICES,ref:"attrs/"+ZaCos.A_zimbraFeatureDocumentEditingEnabled,type:_ENUM_},{id:ZaCos.A_zimbraFeatureImportFolderEnabled,choices:ZaModel.BOOLEAN_CHOICES,ref:"attrs/"+ZaCos.A_zimbraFeatureImportFolderEnabled,type:_ENUM_},{id:ZaCos.A_zimbraDumpsterEnabled,choices:ZaModel.BOOLEAN_CHOICES,ref:"attrs/"+ZaCos.A_zimbraDumpsterEnabled,type:_ENUM_},{id:ZaCos.A_zimbraDumpsterUserVisibleAge,type:_MLIFETIME_,ref:"attrs/"+ZaCos.A_zimbraDumpsterUserVisibleAge},{id:ZaCos.A_zimbraDumpsterPurgeEnabled,choices:ZaModel.BOOLEAN_CHOICES,ref:"attrs/"+ZaCos.A_zimbraDumpsterPurgeEnabled,type:_ENUM_},{id:ZaCos.A_zimbraMailDumpsterLifetime,type:_MLIFETIME_,ref:"attrs/"+ZaCos.A_zimbraMailDumpsterLifetime},{id:ZaCos.A_zimbraPrefCalendarSendInviteDeniedAutoReply,choices:ZaModel.BOOLEAN_CHOICES,ref:"attrs/"+ZaCos.A_zimbraPrefCalendarSendInviteDeniedAutoReply,type:_ENUM_},{id:ZaCos.A_zimbraFeatureReadReceiptsEnabled,choices:ZaModel.BOOLEAN_CHOICES,ref:"attrs/"+ZaCos.A_zimbraFeatureReadReceiptsEnabled,type:_ENUM_},{id:ZaCos.A_zimbraFeatureDistributionListFolderEnabled,choices:ZaModel.BOOLEAN_CHOICES,ref:"attrs/"+ZaCos.A_zimbraFeatureDistributionListFolderEnabled,type:_ENUM_},{id:ZaCos.A_zimbraFeatureMailPriorityEnabled,choices:ZaModel.BOOLEAN_CHOICES,ref:"attrs/"+ZaCos.A_zimbraFeatureMailPriorityEnabled,type:_ENUM_},{id:ZaCos.A_zimbraFeatureImapDataSourceEnabled,choices:ZaModel.BOOLEAN_CHOICES,ref:"attrs/"+ZaCos.A_zimbraFeatureImapDataSourceEnabled,type:_ENUM_},{id:ZaCos.A_zimbraFeaturePop3DataSourceEnabled,choices:ZaModel.BOOLEAN_CHOICES,ref:"attrs/"+ZaCos.A_zimbraFeaturePop3DataSourceEnabled,type:_ENUM_},{id:ZaCos.A_zimbraFeatureIdentitiesEnabled,choices:ZaModel.BOOLEAN_CHOICES,ref:"attrs/"+ZaCos.A_zimbraFeatureIdentitiesEnabled,type:_ENUM_},{id:ZaCos.A_zimbraFeatureContactsEnabled,choices:ZaModel.BOOLEAN_CHOICES,ref:"attrs/"+ZaCos.A_zimbraFeatureContactsEnabled,type:_ENUM_},{id:ZaCos.A_zimbraFeatureCalendarEnabled,choices:ZaModel.BOOLEAN_CHOICES,ref:"attrs/"+ZaCos.A_zimbraFeatureCalendarEnabled,type:_ENUM_},{id:ZaCos.A_zimbraFeatureTasksEnabled,choices:ZaModel.BOOLEAN_CHOICES,ref:"attrs/"+ZaCos.A_zimbraFeatureTasksEnabled,type:_ENUM_},{id:ZaCos.A_zimbraFeatureTaggingEnabled,choices:ZaModel.BOOLEAN_CHOICES,ref:"attrs/"+ZaCos.A_zimbraFeatureTaggingEnabled,type:_ENUM_},{id:ZaCos.A_zimbraFeaturePeopleSearchEnabled,choices:ZaModel.BOOLEAN_CHOICES,ref:"attrs/"+ZaCos.A_zimbraFeaturePeopleSearchEnabled,type:_ENUM_},{id:ZaCos.A_zimbraFeatureAdvancedSearchEnabled,choices:ZaModel.BOOLEAN_CHOICES,ref:"attrs/"+ZaCos.A_zimbraFeatureAdvancedSearchEnabled,type:_ENUM_},{id:ZaCos.A_zimbraFeatureSavedSearchesEnabled,choices:ZaModel.BOOLEAN_CHOICES,ref:"attrs/"+ZaCos.A_zimbraFeatureSavedSearchesEnabled,type:_ENUM_},{id:ZaCos.A_zimbraFeatureConversationsEnabled,choices:ZaModel.BOOLEAN_CHOICES,ref:"attrs/"+ZaCos.A_zimbraFeatureConversationsEnabled,type:_ENUM_},{id:ZaCos.A_zimbraFeatureChangePasswordEnabled,choices:ZaModel.BOOLEAN_CHOICES,ref:"attrs/"+ZaCos.A_zimbraFeatureChangePasswordEnabled,type:_ENUM_},{id:ZaCos.A_zimbraFeatureHtmlComposeEnabled,choices:ZaModel.BOOLEAN_CHOICES,ref:"attrs/"+ZaCos.A_zimbraFeatureHtmlComposeEnabled,type:_ENUM_},{id:ZaCos.A_zimbraFeatureInitialSearchPreferenceEnabled,choices:ZaModel.BOOLEAN_CHOICES,ref:"attrs/"+ZaCos.A_zimbraFeatureInitialSearchPreferenceEnabled,type:_ENUM_},{id:ZaCos.A_zimbraFeatureFiltersEnabled,choices:ZaModel.BOOLEAN_CHOICES,ref:"attrs/"+ZaCos.A_zimbraFeatureFiltersEnabled,type:_ENUM_},{id:ZaCos.A_zimbraFeatureGalEnabled,choices:ZaModel.BOOLEAN_CHOICES,ref:"attrs/"+ZaCos.A_zimbraFeatureGalEnabled,type:_ENUM_},{id:ZaCos.A_zimbraFeatureMAPIConnectorEnabled,choices:ZaModel.BOOLEAN_CHOICES,ref:"attrs/"+ZaCos.A_zimbraFeatureMAPIConnectorEnabled,type:_ENUM_},{id:ZaCos.A_zimbraFeatureEwsEnabled,choices:ZaModel.BOOLEAN_CHOICES,ref:"attrs/"+ZaCos.A_zimbraFeatureEwsEnabled,type:_ENUM_},{id:ZaCos.A_zimbraFeatureTouchClientEnabled,choices:ZaModel.BOOLEAN_CHOICES,ref:"attrs/"+ZaCos.A_zimbraFeatureTouchClientEnabled,type:_ENUM_},{id:ZaCos.A_zimbraFeatureWebClientOfflineAccessEnabled,choices:ZaModel.BOOLEAN_CHOICES,ref:"attrs/"+ZaCos.A_zimbraFeatureWebClientOfflineAccessEnabled,type:_ENUM_},{id:ZaCos.A_zimbraFeatureManageSMIMECertificateEnabled,choices:ZaModel.BOOLEAN_CHOICES,ref:"attrs/"+ZaCos.A_zimbraFeatureManageSMIMECertificateEnabled,type:_ENUM_},{id:ZaCos.A_zimbraFeatureSMIMEEnabled,choices:ZaModel.BOOLEAN_CHOICES,ref:"attrs/"+ZaCos.A_zimbraFeatureSMIMEEnabled,type:_ENUM_},{id:ZaCos.A_zimbraFeatureMailForwardingEnabled,choices:ZaModel.BOOLEAN_CHOICES,ref:"attrs/"+ZaCos.A_zimbraFeatureMailForwardingEnabled,type:_ENUM_},{id:ZaCos.A_zimbraFeatureMailSendLaterEnabled,choices:ZaModel.BOOLEAN_CHOICES,ref:"attrs/"+ZaCos.A_zimbraFeatureMailSendLaterEnabled,type:_ENUM_},{id:ZaCos.A_zimbraFeatureCalendarReminderDeviceEmailEnabled,choices:ZaModel.BOOLEAN_CHOICES,ref:"attrs/"+ZaCos.A_zimbraFeatureCalendarReminderDeviceEmailEnabled,type:_ENUM_},{id:ZaCos.A_zimbraFeatureBriefcasesEnabled,choices:ZaModel.BOOLEAN_CHOICES,ref:"attrs/"+ZaCos.A_zimbraFeatureBriefcasesEnabled,type:_ENUM_},{id:ZaCos.A_zimbraFeatureBriefcaseDocsEnabled,choices:ZaModel.BOOLEAN_CHOICES,ref:"attrs/"+ZaCos.A_zimbraFeatureBriefcaseDocsEnabled,type:_ENUM_},{id:ZaCos.A_zimbraFeatureGalAutoCompleteEnabled,choices:ZaModel.BOOLEAN_CHOICES,ref:"attrs/"+ZaCos.A_zimbraFeatureGalAutoCompleteEnabled,type:_ENUM_},{id:ZaCos.A_zimbraFeatureHtmlComposeEnabled,choices:ZaModel.BOOLEAN_CHOICES,ref:"attrs/"+ZaCos.A_zimbraFeatureHtmlComposeEnabled,type:_ENUM_},{id:ZaCos.A_zimbraImapEnabled,choices:ZaModel.BOOLEAN_CHOICES,ref:"attrs/"+ZaCos.A_zimbraImapEnabled,type:_ENUM_},{id:ZaCos.A_zimbraPop3Enabled,choices:ZaModel.BOOLEAN_CHOICES,ref:"attrs/"+ZaCos.A_zimbraPop3Enabled,type:_ENUM_},{id:ZaCos.A_zimbraFeatureWebClientEnabled,choices:ZaModel.BOOLEAN_CHOICES,ref:"attrs/"+ZaCos.A_zimbraFeatureWebClientEnabled,type:_ENUM_},{id:ZaCos.A_zimbraFeatureSharingEnabled,choices:ZaModel.BOOLEAN_CHOICES,ref:"attrs/"+ZaCos.A_zimbraFeatureSharingEnabled,type:_ENUM_},{id:ZaCos.A_zimbraExternalSharingEnabled,choices:ZaModel.BOOLEAN_CHOICES,ref:"attrs/"+ZaCos.A_zimbraExternalSharingEnabled,type:_ENUM_},{id:ZaCos.A_zimbraPublicSharingEnabled,choices:ZaModel.BOOLEAN_CHOICES,ref:"attrs/"+ZaCos.A_zimbraPublicSharingEnabled,type:_ENUM_},{id:ZaCos.A_zimbraFeatureOutOfOfficeReplyEnabled,choices:ZaModel.BOOLEAN_CHOICES,ref:"attrs/"+ZaCos.A_zimbraFeatureOutOfOfficeReplyEnabled,type:_ENUM_},{id:ZaCos.A_zimbraFeatureNewMailNotificationEnabled,choices:ZaModel.BOOLEAN_CHOICES,ref:"attrs/"+ZaCos.A_zimbraFeatureNewMailNotificationEnabled,type:_ENUM_},{id:ZaCos.A_zimbraFeatureOptionsEnabled,choices:ZaModel.BOOLEAN_CHOICES,ref:"attrs/"+ZaCos.A_zimbraFeatureOptionsEnabled,type:_ENUM_},{id:ZaCos.A_zimbraFeatureSkinChangeEnabled,choices:ZaModel.BOOLEAN_CHOICES,ref:"attrs/"+ZaCos.A_zimbraFeatureSkinChangeEnabled,type:_ENUM_},{id:ZaCos.A_zimbraFeatureManageZimlets,choices:ZaModel.BOOLEAN_CHOICES,ref:"attrs/"+ZaCos.A_zimbraFeatureManageZimlets,type:_ENUM_},{id:ZaCos.A_zimbraFeatureMailEnabled,choices:ZaModel.BOOLEAN_CHOICES,ref:"attrs/"+ZaCos.A_zimbraFeatureMailEnabled,type:_ENUM_},{id:ZaCos.A_zimbraFeatureGroupCalendarEnabled,choices:ZaModel.BOOLEAN_CHOICES,ref:"attrs/"+ZaCos.A_zimbraFeatureGroupCalendarEnabled,type:_ENUM_},{id:ZaCos.A_zimbraFeatureFlaggingEnabled,choices:ZaModel.BOOLEAN_CHOICES,ref:"attrs/"+ZaCos.A_zimbraFeatureFlaggingEnabled,type:_ENUM_},{id:ZaCos.A_zimbraPasswordLockoutEnabled,type:_ENUM_,ref:"attrs/"+ZaCos.A_zimbraPasswordLockoutEnabled,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaCos.A_zimbraPasswordLockoutDuration,type:_MLIFETIME_,ref:"attrs/"+ZaCos.A_zimbraPasswordLockoutDuration},{id:ZaCos.A_zimbraPasswordLockoutMaxFailures,type:_NUMBER_,ref:"attrs/"+ZaCos.A_zimbraPasswordLockoutMaxFailures,maxInclusive:2147483647,minInclusive:0},{id:ZaCos.A_zimbraPasswordLockoutFailureLifetime,type:_MLIFETIME_,ref:"attrs/"+ZaCos.A_zimbraPasswordLockoutFailureLifetime},{id:ZaCos.A_zimbraFreebusyExchangeUserOrg,type:_STRING_,ref:"attrs/"+ZaCos.A_zimbraFreebusyExchangeUserOrg},{id:ZaCos.A_zimbraSieveRejectMailEnabled,type:_ENUM_,ref:"attrs/"+ZaCos.A_zimbraSieveRejectMailEnabled,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaCos.A_zimbraSieveEditHeaderEnabled,type:_ENUM_,ref:"attrs/"+ZaCos.A_zimbraSieveEditHeaderEnabled,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaCos.A_zimbraAdminSieveScriptBefore,type:_STRING_,ref:"attrs/"+ZaCos.A_zimbraAdminSieveScriptBefore},{id:ZaCos.A_zimbraAdminSieveScriptAfter,type:_STRING_,ref:"attrs/"+ZaCos.A_zimbraAdminSieveScriptAfter},{id:ZaCos.A_zimbraFileTrashLifetime,type:_MLIFETIME_,ref:"attrs/"+ZaCos.A_zimbraFileTrashLifetime},{id:ZaCos.A_zimbraUnaccessedFileLifetime,type:_MLIFETIME_,ref:"attrs/"+ZaCos.A_zimbraUnaccessedFileLifetime},{id:ZaCos.A_zimbraNumFileVersionsToKeep,type:_NUMBER_,ref:"attrs/"+ZaCos.A_zimbraNumFileVersionsToKeep,maxInclusive:2147483647,minInclusive:0},{id:ZaCos.A_zimbraFileSendExpirationWarning,type:_ENUM_,ref:"attrs/"+ZaCos.A_zimbraFileSendExpirationWarning,choices:["none","owner","all"]},{id:ZaCos.A_zimbraFileExpirationWarningDays,type:_MINTERVAL_,ref:"attrs/"+ZaCos.A_zimbraFileExpirationWarningDays},{id:ZaCos.A2_retentionPoliciesKeepInherited,type:_ENUM_,ref:ZaCos.A2_retentionPoliciesKeepInherited,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaCos.A2_retentionPoliciesKeep,type:_LIST_},{id:ZaCos.A2_retentionPoliciesPurge,type:_LIST_},{id:ZaCos.A2_retentionPoliciesKeep_Selection,type:_LIST_},{id:ZaCos.A2_retentionPoliciesPurge_Selection,type:_LIST_}]};
ZaCos.prototype.manageSpecialAttrs=function(){var e="";
var h=this.attrs[ZaCos.A_zimbraPrefTimeZoneId];
if(h){var c=ZaModel.setUnrecoganizedChoiceValue(h,ZaSettings.timeZoneChoices);
if(h!=c){this.attrs[ZaCos.A_zimbraPrefTimeZoneId]=c;
e+=AjxMessageFormat.format(ZaMsg.WARNING_TIME_ZONE_INVALID,[h,'cos - "'+this.name+'"'])
}}var d=this.attrs[ZaCos.A_zimbraPrefMailDefaultCharset];
if(d){var f=ZaModel.setUnrecoganizedChoiceValue(d,ZaSettings.mailCharsetChoices);
if(d!=f){this.attrs[ZaCos.A_zimbraPrefMailDefaultCharset]=f;
e+=AjxMessageFormat.format(ZaMsg.WARNING_CHARSET_INVALID,[d,'cos - "'+this.name+'"'])
}}var g=this.attrs[ZaCos.A_zimbraPrefLocale];
if(g){var b=ZaModel.setUnrecoganizedChoiceValue(g,ZaSettings.getLocaleChoices());
if(g!=b){this.attrs[ZaCos.A_zimbraPrefLocale]=b;
e+=AjxMessageFormat.format(ZaMsg.WARNING_LOCALE_INVALID,[g,'cos - "'+this.name+'"'])
}}if(e&&e.length>0){ZaApp.getInstance().getCurrentController().popupMsgDialog(e,true)
}};
ZaCos.globalRights={};
ZaCos.getEffectiveCosList=function(m){var o=AjxSoapDoc.create("GetAllEffectiveRightsRequest",ZaZimbraAdmin.URN,null);
var d=o.set("grantee",m);
d.setAttribute("type","usr");
d.setAttribute("by","id");
var e={};
e.soapDoc=o;
e.asyncMode=false;
var b={controller:ZaApp.getInstance().getCurrentController(),busyMsg:ZaMsg.BUSY_GET_EFFICIENT_COS_LIST};
var p=[];
try{var f=ZaRequestMgr.invoke(e,b);
if(!f||f.Body.GetAllEffectiveRightsResponse.Fault){return p
}var l=f.Body.GetAllEffectiveRightsResponse.target;
for(var h=0;
h<l.length;
h++){if(l[h].type!=ZaItem.COS){continue
}if(!l[h].entries&&!l[h].all){continue
}if(l[h].all){if(l[h].all.length&&l[h].all[0]&&l[h].all[0].right&&l[h].all[0].right.length){for(var g=0;
g<l[h].all[0].right.length;
g++){ZaCos.globalRights[l[h].all[0].right[g].n]=true
}}}for(var g=0;
g<l[h].entries.length;
g++){var q=l[h].entries[g].entry;
for(var c=0;
c<q.length;
c++){p.push(q[c].name)
}}break
}return p
}catch(n){return p
}};
ZaCos.prototype.countAllAccounts=function(){var d=AjxSoapDoc.create("SearchDirectoryRequest",ZaZimbraAdmin.URN,null);
d.getMethod().setAttribute("maxResults","0");
d.getMethod().setAttribute("limit","-1");
var e="("+ZaAccount.A_COSId+"="+this.id+")";
if(this.name=="default"){e="(|(&(!("+ZaAccount.A_COSId+"=*))(!("+ZaAccount.A_zimbraIsExternalVirtualAccount+"=TRUE)))"+e+")"
}else{if(this.name=="defaultExternal"){e="(|(&(!("+ZaAccount.A_COSId+"=*))("+ZaAccount.A_zimbraIsExternalVirtualAccount+"=TRUE))"+e+")"
}}e="(&"+e+"(!("+ZaAccount.A_zimbraIsSystemAccount+"=TRUE)))";
d.set("query",e);
d.set("types",ZaSearch.ACCOUNTS);
var g=new ZmCsfeCommand();
var c=new Object();
c.soapDoc=d;
c.noAuthToken=true;
try{var f=g.invoke(c).Body.SearchDirectoryResponse;
if(f.searchTotal){return f.searchTotal
}else{return 0
}}catch(b){throw (b)
}return 0
};
ZaCos.prototype.countAllDomains=function(){var d=AjxSoapDoc.create("SearchDirectoryRequest",ZaZimbraAdmin.URN,null);
d.getMethod().setAttribute("maxResults","0");
d.getMethod().setAttribute("limit","-1");
var e="("+ZaDomain.A_domainDefaultCOSId+"="+this.id+")";
if(this.name=="default"){e="(|(!("+ZaDomain.A_domainDefaultCOSId+"=*))"+e+")"
}else{if(this.name=="defaultExternal"){e="(|(!("+ZaDomain.A_domainDefaultExternalUserCOSId+"=*))"+e+")"
}}d.set("query",e);
d.set("types",ZaSearch.DOMAINS);
var g=new ZmCsfeCommand();
var c=new Object();
c.soapDoc=d;
c.noAuthToken=true;
try{var f=g.invoke(c).Body.SearchDirectoryResponse;
if(f.searchTotal){return f.searchTotal
}else{return 0
}}catch(b){throw (b)
}return 0
};
ZaCos.checkValues=function(e){if(e.attrs==null){ZaApp.getInstance().getCurrentController().popupErrorDialog(ZaMsg.ERROR_UNKNOWN);
return false
}if(ZaItem.hasWritePermission(ZaCos.A_name,e)){if((e.attrs[ZaCos.A_name]==null||e.attrs[ZaCos.A_name].length<1)){ZaApp.getInstance().getCurrentController().popupErrorDialog(ZaMsg.ERROR_NAME_REQUIRED);
return false
}else{e.name=e.attrs[ZaCos.A_name]
}if(e.name.length>256||e.attrs[ZaCos.A_name].length>256){ZaApp.getInstance().getCurrentController().popupErrorDialog(ZaMsg.ERROR_COS_NAME_TOOLONG);
return false
}}if(ZaItem.hasWritePermission(ZaCos.A_zimbraPasswordMinUpperCaseChars,e)){if(e.attrs[ZaCos.A_zimbraPasswordMinUpperCaseChars]!=null&&!AjxUtil.isNonNegativeLong(e.attrs[ZaCos.A_zimbraPasswordMinUpperCaseChars])){ZaApp.getInstance().getCurrentController().popupErrorDialog(AjxMessageFormat.format(ZaMsg.ERROR_INVALID_VALUE_FOR,[ZaMsg.MSG_zimbraPasswordMinUpperCaseChars]));
return false
}}if(ZaItem.hasWritePermission(ZaCos.A_zimbraPasswordMinLowerCaseChars,e)){if(e.attrs[ZaCos.A_zimbraPasswordMinLowerCaseChars]!=null&&e.attrs[ZaCos.A_zimbraPasswordMinLowerCaseChars]&&!AjxUtil.isNonNegativeLong(e.attrs[ZaCos.A_zimbraPasswordMinLowerCaseChars])){ZaApp.getInstance().getCurrentController().popupErrorDialog(AjxMessageFormat.format(ZaMsg.ERROR_INVALID_VALUE_FOR,[ZaMsg.MSG_zimbraPasswordMinLowerCaseChars]));
return false
}}if(ZaItem.hasWritePermission(ZaCos.A_zimbraPasswordMinPunctuationChars,e)){if(e.attrs[ZaCos.A_zimbraPasswordMinPunctuationChars]!=null&&e.attrs[ZaCos.A_zimbraPasswordMinPunctuationChars]&&!AjxUtil.isNonNegativeLong(e.attrs[ZaCos.A_zimbraPasswordMinPunctuationChars])){ZaApp.getInstance().getCurrentController().popupErrorDialog(AjxMessageFormat.format(ZaMsg.ERROR_INVALID_VALUE_FOR,[ZaMsg.MSG_zimbraPasswordMinPunctuationChars]));
return false
}}if(ZaItem.hasWritePermission(ZaCos.A_zimbraPasswordMinNumericChars,e)){if(e.attrs[ZaCos.A_zimbraPasswordMinNumericChars]!=null&&e.attrs[ZaCos.A_zimbraPasswordMinNumericChars]&&!AjxUtil.isNonNegativeLong(e.attrs[ZaCos.A_zimbraPasswordMinNumericChars])){ZaApp.getInstance().getCurrentController().popupErrorDialog(AjxMessageFormat.format(ZaMsg.ERROR_INVALID_VALUE_FOR,[ZaMsg.MSG_zimbraPasswordMinNumericChars]));
return false
}}if(ZaItem.hasWritePermission(ZaCos.A_zimbraPasswordMinDigitsOrPuncs,e)){if(e.attrs[ZaCos.A_zimbraPasswordMinDigitsOrPuncs]!=null&&e.attrs[ZaCos.A_zimbraPasswordMinDigitsOrPuncs]&&!AjxUtil.isNonNegativeLong(e.attrs[ZaCos.A_zimbraPasswordMinDigitsOrPuncs])){ZaApp.getInstance().getCurrentController().popupErrorDialog(AjxMessageFormat.format(ZaMsg.ERROR_INVALID_VALUE_FOR,[ZaMsg.MSG_zimbraPasswordMinDigitsOrPuncs]));
return false
}}if(e.attrs[ZaCos.A_zimbraMailQuota]!=null&&e.attrs[ZaCos.A_zimbraMailQuota]&&!AjxUtil.isNonNegativeLong(e.attrs[ZaCos.A_zimbraMailQuota])){ZaApp.getInstance().getCurrentController().popupErrorDialog(AjxMessageFormat.format(ZaMsg.ERROR_INVALID_VALUE_FOR,[ZaMsg.MSG_zimbraMailQuota]));
return false
}if(ZaItem.hasWritePermission(ZaCos.A_zimbraContactMaxNumEntries,e)){if(e.attrs[ZaCos.A_zimbraContactMaxNumEntries]!=null&&e.attrs[ZaCos.A_zimbraContactMaxNumEntries]&&!AjxUtil.isNonNegativeLong(e.attrs[ZaCos.A_zimbraContactMaxNumEntries])){ZaApp.getInstance().getCurrentController().popupErrorDialog(AjxMessageFormat.format(ZaMsg.ERROR_INVALID_VALUE_FOR,[ZaMsg.MSG_zimbraContactMaxNumEntries]));
return false
}}if(ZaItem.hasWritePermission(ZaCos.A_zimbraMinPwdLength,e)){if(e.attrs[ZaCos.A_zimbraMinPwdLength]!=null&&e.attrs[ZaCos.A_zimbraMinPwdLength]&&!AjxUtil.isNonNegativeLong(e.attrs[ZaCos.A_zimbraMinPwdLength])){ZaApp.getInstance().getCurrentController().popupErrorDialog(AjxMessageFormat.format(ZaMsg.ERROR_INVALID_VALUE_FOR,[ZaMsg.MSG_zimbraMinPwdLength]));
return false
}}if(ZaItem.hasWritePermission(ZaCos.A_zimbraMaxPwdLength,e)){if(e.attrs[ZaCos.A_zimbraMaxPwdLength]!=null&&e.attrs[ZaCos.A_zimbraMaxPwdLength]&&!AjxUtil.isNonNegativeLong(e.attrs[ZaCos.A_zimbraMaxPwdLength])){ZaApp.getInstance().getCurrentController().popupErrorDialog(AjxMessageFormat.format(ZaMsg.ERROR_INVALID_VALUE_FOR,[ZaMsg.MSG_zimbraMaxPwdLength]));
return false
}}if(ZaItem.hasWritePermission(ZaCos.A_zimbraMaxPwdLength,e)&&ZaItem.hasWritePermission(ZaCos.A_zimbraMinPwdLength,e)){if(e.attrs[ZaCos.A_zimbraMaxPwdLength]!=null&&e.attrs[ZaCos.A_zimbraMinPwdLength]!=null){if(parseInt(e.attrs[ZaCos.A_zimbraMaxPwdLength])<parseInt(e.attrs[ZaCos.A_zimbraMinPwdLength])&&parseInt(e.attrs[ZaCos.A_zimbraMaxPwdLength])>0){ZaApp.getInstance().getCurrentController().popupErrorDialog(ZaMsg.ERROR_MAX_MIN_PWDLENGTH);
return false
}}}if(ZaItem.hasWritePermission(ZaCos.A_zimbraMinPwdAge,e)){if(e.attrs[ZaCos.A_zimbraMinPwdAge]!=null&&!AjxUtil.isNonNegativeLong(e.attrs[ZaCos.A_zimbraMinPwdAge])){ZaApp.getInstance().getCurrentController().popupErrorDialog(AjxMessageFormat.format(ZaMsg.ERROR_INVALID_VALUE_FOR,[ZaMsg.MSG_passMinAge]));
return false
}}if(ZaItem.hasWritePermission(ZaCos.A_zimbraMaxPwdAge,e)){if(e.attrs[ZaCos.A_zimbraMaxPwdAge]!=null&&!AjxUtil.isNonNegativeLong(e.attrs[ZaCos.A_zimbraMaxPwdAge])){ZaApp.getInstance().getCurrentController().popupErrorDialog(AjxMessageFormat.format(ZaMsg.ERROR_INVALID_VALUE_FOR,[ZaMsg.MSG_passMaxAge]));
return false
}}if(ZaItem.hasWritePermission(ZaCos.A_zimbraMinPwdAge,e)&&ZaItem.hasWritePermission(ZaCos.A_zimbraMaxPwdAge,e)){if(e.attrs[ZaCos.A_zimbraMinPwdAge]!=null&&e.attrs[ZaCos.A_zimbraMaxPwdAge]!=null){if(parseInt(e.attrs[ZaCos.A_zimbraMaxPwdAge])<parseInt(e.attrs[ZaCos.A_zimbraMinPwdAge])&&parseInt(e.attrs[ZaCos.A_zimbraMaxPwdAge])>0){ZaApp.getInstance().getCurrentController().popupErrorDialog(ZaMsg.ERROR_MAX_MIN_PWDAGE);
return false
}}}if(ZaItem.hasWritePermission(ZaCos.A_zimbraAuthTokenLifetime,e)){if(e.attrs[ZaCos.A_zimbraAuthTokenLifetime]!=null&&!AjxUtil.isLifeTime(e.attrs[ZaCos.A_zimbraAuthTokenLifetime])){ZaApp.getInstance().getCurrentController().popupErrorDialog(AjxMessageFormat.format(ZaMsg.ERROR_INVALID_VALUE_FOR,[ZaMsg.MSG_zimbraAuthTokenLifetime]));
return false
}}if(ZaItem.hasWritePermission(ZaCos.A_zimbraPrefOutOfOfficeCacheDuration,e)){if(e.attrs[ZaCos.A_zimbraPrefOutOfOfficeCacheDuration]!=null&&!AjxUtil.isLifeTime(e.attrs[ZaCos.A_zimbraPrefOutOfOfficeCacheDuration])){ZaApp.getInstance().getCurrentController().popupErrorDialog(AjxMessageFormat.format(ZaMsg.ERROR_INVALID_VALUE_FOR,[ZaMsg.MSG_zimbraPrefOutOfOfficeCacheDuration]));
return false
}}if(ZaItem.hasWritePermission(ZaCos.A_zimbraMailIdleSessionTimeout,e)){if(e.attrs[ZaCos.A_zimbraMailIdleSessionTimeout]!=null&&!AjxUtil.isLifeTime(e.attrs[ZaCos.A_zimbraMailIdleSessionTimeout])){ZaApp.getInstance().getCurrentController().popupErrorDialog(AjxMessageFormat.format(ZaMsg.ERROR_INVALID_VALUE_FOR,[ZaMsg.MSG_zimbraMailIdleSessionTimeout]));
return false
}}if(ZaItem.hasWritePermission(ZaCos.A_zimbraPrefAutoSaveDraftInterval,e)){if(e.attrs[ZaCos.A_zimbraPrefAutoSaveDraftInterval]!=null&&!AjxUtil.isLifeTime(e.attrs[ZaCos.A_zimbraPrefAutoSaveDraftInterval])){ZaApp.getInstance().getCurrentController().popupErrorDialog(AjxMessageFormat.format(ZaMsg.ERROR_INVALID_VALUE_FOR,[ZaMsg.MSG_zimbraPrefAutoSaveDraftInterval]));
return false
}}if(ZaItem.hasWritePermission(ZaCos.A_zimbraDataSourceMinPollingInterval,e)){var g=e.attrs[ZaCos.A_zimbraDataSourceMinPollingInterval];
if(!AjxUtil.isEmpty(g)&&!AjxUtil.isLifeTime(g)){ZaApp.getInstance().getCurrentController().popupErrorDialog(AjxMessageFormat.format(ZaMsg.ERROR_INVALID_VALUE_FOR,[ZaMsg.MSG_zimbraDataSourceMinPollingInterval]));
return false
}}if(ZaItem.hasWritePermission(ZaCos.A_zimbraDataSourcePop3PollingInterval,e)){var g=e.attrs[ZaCos.A_zimbraDataSourcePop3PollingInterval];
if(!AjxUtil.isEmpty(g)){if(!AjxUtil.isLifeTime(g)){ZaApp.getInstance().getCurrentController().popupErrorDialog(AjxMessageFormat.format(ZaMsg.ERROR_INVALID_VALUE_FOR,[ZaMsg.MSG_zimbraDataSourcePop3PollingInterval]));
return false
}var l=e.attrs[ZaCos.A_zimbraDataSourceMinPollingInterval];
if(!AjxUtil.isEmpty(l)){if(ZaUtil.getLifeTimeInSeconds(g)<ZaUtil.getLifeTimeInSeconds(l)){ZaApp.getInstance().getCurrentController().popupErrorDialog(ZaMsg.tt_mailPollingIntervalError+l);
return false
}}}}if(ZaItem.hasWritePermission(ZaCos.A_zimbraDataSourceImapPollingInterval,e)){var g=e.attrs[ZaCos.A_zimbraDataSourceImapPollingInterval];
if(!AjxUtil.isEmpty(g)){if(!AjxUtil.isLifeTime(g)){ZaApp.getInstance().getCurrentController().popupErrorDialog(AjxMessageFormat.format(ZaMsg.ERROR_INVALID_VALUE_FOR,[ZaMsg.MSG_zimbraDataSourceImapPollingInterval]));
return false
}var l=e.attrs[ZaCos.A_zimbraDataSourceMinPollingInterval];
if(!AjxUtil.isEmpty(l)){if(ZaUtil.getLifeTimeInSeconds(g)<ZaUtil.getLifeTimeInSeconds(l)){ZaApp.getInstance().getCurrentController().popupErrorDialog(ZaMsg.tt_mailPollingIntervalError+l);
return false
}}}}if(ZaItem.hasWritePermission(ZaCos.A_zimbraDataSourceCalendarPollingInterval,e)){var g=e.attrs[ZaCos.A_zimbraDataSourceCalendarPollingInterval];
if(!AjxUtil.isEmpty(g)){if(!AjxUtil.isLifeTime(g)){ZaApp.getInstance().getCurrentController().popupErrorDialog(AjxMessageFormat.format(ZaMsg.ERROR_INVALID_VALUE_FOR,[ZaMsg.MSG_zimbraDataSourceCalendarPollingInterval]));
return false
}var l=e.attrs[ZaCos.A_zimbraDataSourceMinPollingInterval];
if(!AjxUtil.isEmpty(l)){if(ZaUtil.getLifeTimeInSeconds(g)<ZaUtil.getLifeTimeInSeconds(l)){ZaApp.getInstance().getCurrentController().popupErrorDialog(ZaMsg.tt_mailPollingIntervalError+l);
return false
}}}}if(ZaItem.hasWritePermission(ZaCos.A_zimbraDataSourceRssPollingInterval,e)){var g=e.attrs[ZaCos.A_zimbraDataSourceRssPollingInterval];
if(!AjxUtil.isEmpty(g)){if(!AjxUtil.isLifeTime(g)){ZaApp.getInstance().getCurrentController().popupErrorDialog(AjxMessageFormat.format(ZaMsg.ERROR_INVALID_VALUE_FOR,[ZaMsg.MSG_zimbraDataSourceRssPollingInterval]));
return false
}var l=e.attrs[ZaCos.A_zimbraDataSourceMinPollingInterval];
if(!AjxUtil.isEmpty(l)){if(ZaUtil.getLifeTimeInSeconds(g)<ZaUtil.getLifeTimeInSeconds(l)){ZaApp.getInstance().getCurrentController().popupErrorDialog(ZaMsg.tt_mailPollingIntervalError+l);
return false
}}}}if(ZaItem.hasWritePermission(ZaCos.A_zimbraDataSourceCaldavPollingInterval,e)){var g=e.attrs[ZaCos.A_zimbraDataSourceCaldavPollingInterval];
if(!AjxUtil.isEmpty(g)){if(!AjxUtil.isLifeTime(g)){ZaApp.getInstance().getCurrentController().popupErrorDialog(AjxMessageFormat.format(ZaMsg.ERROR_INVALID_VALUE_FOR,[ZaMsg.MSG_zzimbraDataSourceCaldavPollingInterval]));
return false
}var l=e.attrs[ZaCos.A_zimbraDataSourceMinPollingInterval];
if(!AjxUtil.isEmpty(l)){if(ZaUtil.getLifeTimeInSeconds(g)<ZaUtil.getLifeTimeInSeconds(l)){ZaApp.getInstance().getCurrentController().popupErrorDialog(ZaMsg.tt_mailPollingIntervalError+l);
return false
}}}}if(ZaItem.hasWritePermission(ZaCos.A_zimbraPrefMailPollingInterval,e)){if(e.attrs[ZaCos.A_zimbraPrefMailPollingInterval]!=null&&!AjxUtil.isLifeTime(e.attrs[ZaCos.A_zimbraPrefMailPollingInterval])){ZaApp.getInstance().getCurrentController().popupErrorDialog(AjxMessageFormat.format(ZaMsg.ERROR_INVALID_VALUE_FOR,[ZaMsg.MSG_zimbraPrefMailPollingInterval]));
return false
}}if(ZaItem.hasWritePermission(ZaCos.A_zimbraPrefMailPollingInterval,e)){var c=e.attrs[ZaCos.A_zimbraMailMinPollingInterval];
if(c!=null&&!AjxUtil.isLifeTime(c)){ZaApp.getInstance().getCurrentController().popupErrorDialog(AjxMessageFormat.format(ZaMsg.ERROR_INVALID_VALUE_FOR,[ZaMsg.MSG_zimbraMailMinPollingInterval]));
return false
}var h=e.attrs[ZaCos.A_zimbraMailMinPollingInterval];
if(h!=null&&ZaUtil.getLifeTimeInSeconds(c)>ZaUtil.getLifeTimeInSeconds(h)){ZaApp.getInstance().getCurrentController().popupErrorDialog(AjxMessageFormat.format(ZaMsg.tt_minPollingIntervalWarning,[h,c]),true)
}}if(ZaItem.hasWritePermission(ZaCos.A_zimbraMailMessageLifetime,e)){if(e.attrs[ZaCos.A_zimbraMailMessageLifetime]!=null){if(!AjxUtil.isLifeTime(e.attrs[ZaCos.A_zimbraMailMessageLifetime])){ZaApp.getInstance().getCurrentController().popupErrorDialog(AjxMessageFormat.format(ZaMsg.ERROR_INVALID_VALUE_FOR,[ZaMsg.MSG_zimbraMailMessageLifetime]));
return false
}var b=parseInt(e.attrs[ZaCos.A_zimbraMailMessageLifetime].substr(0,e.attrs[ZaCos.A_zimbraMailMessageLifetime].length-1));
if(b>0&&b<31){ZaApp.getInstance().getCurrentController().popupErrorDialog(ZaMsg.ERROR_MESSAGE_LIFETIME_BELOW_31);
return false
}}}if(ZaItem.hasWritePermission(ZaCos.A_zimbraMailTrashLifetime,e)){if(e.attrs[ZaCos.A_zimbraMailTrashLifetime]!=null&&!AjxUtil.isLifeTime(e.attrs[ZaCos.A_zimbraMailTrashLifetime])){ZaApp.getInstance().getCurrentController().popupErrorDialog(AjxMessageFormat.format(ZaMsg.ERROR_INVALID_VALUE_FOR,[ZaMsg.MSG_zimbraMailTrashLifetime]));
return false
}}if(ZaItem.hasWritePermission(ZaCos.A_zimbraMailSpamLifetime,e)){if(e.attrs[ZaCos.A_zimbraMailSpamLifetime]!=null&&!AjxUtil.isLifeTime(e.attrs[ZaCos.A_zimbraMailSpamLifetime])){ZaApp.getInstance().getCurrentController().popupErrorDialog(AjxMessageFormat.format(ZaMsg.ERROR_INVALID_VALUE_FOR,[ZaMsg.MSG_zimbraMailSpamLifetime]));
return false
}}if(ZaItem.hasWritePermission(ZaCos.A_zimbraPasswordLockoutDuration,e)){if(e.attrs[ZaCos.A_zimbraPasswordLockoutDuration]!=null&&!AjxUtil.isLifeTime(e.attrs[ZaCos.A_zimbraPasswordLockoutDuration])){ZaApp.getInstance().getCurrentController().popupErrorDialog(AjxMessageFormat.format(ZaMsg.ERROR_INVALID_VALUE_FOR,[ZaMsg.MSG_zimbraPasswordLockoutDuration]));
return false
}}if(ZaItem.hasWritePermission(ZaCos.A_zimbraPasswordLockoutFailureLifetime,e)){if(e.attrs[ZaCos.A_zimbraPasswordLockoutFailureLifetime]!=null&&!AjxUtil.isLifeTime(e.attrs[ZaCos.A_zimbraPasswordLockoutFailureLifetime])){ZaApp.getInstance().getCurrentController().popupErrorDialog(AjxMessageFormat.format(ZaMsg.ERROR_INVALID_VALUE_FOR,[ZaMsg.MSG_zimbraPasswordLockoutFailureLifetime]));
return false
}}if(ZaItem.hasWritePermission(ZaCos.A_zimbraEnforcePwdHistory,e)){if(e.attrs[ZaCos.A_zimbraEnforcePwdHistory]!=null&&!AjxUtil.isNonNegativeLong(e.attrs[ZaCos.A_zimbraEnforcePwdHistory])){ZaApp.getInstance().getCurrentController().popupErrorDialog(AjxMessageFormat.format(ZaMsg.ERROR_INVALID_VALUE_FOR,[ZaMsg.MSG_zimbraEnforcePwdHistory]));
return false
}}if(ZaItem.hasWritePermission(ZaCos.A_zimbraMaxMailItemsPerPage,e)&&ZaItem.hasWritePermission(ZaCos.A_zimbraPrefMailItemsPerPage,e)){var k;
if(e.attrs[ZaAccount.A_zimbraMaxMailItemsPerPage]!=null){k=parseInt(e.attrs[ZaAccount.A_zimbraMaxMailItemsPerPage])
}else{k=parseInt(e._defaultValues.attrs[ZaAccount.A_zimbraMaxMailItemsPerPage])
}var n;
if(e.attrs[ZaAccount.A_zimbraPrefMailItemsPerPage]!=null){n=parseInt(e.attrs[ZaAccount.A_zimbraPrefMailItemsPerPage])
}else{n=parseInt(e._defaultValues.attrs[ZaAccount.A_zimbraPrefMailItemsPerPage])
}if(k<n){ZaApp.getInstance().getCurrentController().popupErrorDialog(ZaMsg.ERROR_ITEMS_PER_PAGE_OVER_MAX);
return false
}}if(ZaItem.hasWritePermission(ZaCos.A_zimbraAvailableSkin,e)){if(e.attrs[ZaCos.A_zimbraAvailableSkin]!=null&&e.attrs[ZaCos.A_zimbraAvailableSkin].length>0&&e.attrs[ZaCos.A_zimbraPrefSkin]){var j=e.attrs[ZaCos.A_zimbraAvailableSkin] instanceof Array?e.attrs[ZaCos.A_zimbraAvailableSkin]:[e.attrs[ZaCos.A_zimbraAvailableSkin]];
var d=j.length;
var m=false;
for(var f=0;
f<d;
f++){if(j[f]==e.attrs[ZaCos.A_zimbraPrefSkin]){m=true;
break
}}if(!m){ZaApp.getInstance().getCurrentController().popupErrorDialog(AjxMessageFormat.format(ZaMsg.COS_WarningCurrentThemeNotAvail,[e.attrs[ZaCos.A_zimbraPrefSkin],e.attrs[ZaCos.A_zimbraPrefSkin]]));
return false
}}}return true
};
ZaCos.getRelatedList=function(c){var b=[];
var f=this.countAllAccounts();
if(f>0){var e=new ZaTreeItemData({text:ZaMsg.OVP_accounts,count:f,image:"Account",mappingId:ZaZimbraAdmin._COS_ACCOUNT_LIST_VIEW,path:c+ZaTree.SEPERATOR+this.name+ZaTree.SEPERATOR+ZaMsg.OVP_accounts});
e.setData("cosItem",this);
ZaOverviewPanelController.overviewTreeListeners[ZaZimbraAdmin._COS_ACCOUNT_LIST_VIEW]=ZaOverviewPanelController.accountListTreeListener;
b.push(e)
}f=this.countAllDomains();
if(f>0){var d=new ZaTreeItemData({text:ZaMsg.OVP_domains,count:f,image:"Domain",mappingId:ZaZimbraAdmin._COS_DOMAIN_LIST_VIEW,path:c+ZaTree.SEPERATOR+this.name+ZaTree.SEPERATOR+ZaMsg.OVP_domains});
d.setData("cosItem",this);
ZaOverviewPanelController.overviewTreeListeners[ZaZimbraAdmin._COS_DOMAIN_LIST_VIEW]=ZaOverviewPanelController.domainListTreeListener;
b.push(d)
}return b
};
ZaItem.getRelatedMethods.ZaCos.push(ZaCos.getRelatedList)
}if(AjxPackage.define("zimbraAdmin.domains.model.ZaDomain")){ZaDomain=function(){ZaItem.call(this,"ZaDomain");
this.attrs=new Object();
this.id="";
this.name="";
this.type=ZaItem.DOMAIN;
this.attrs[ZaDomain.A_zimbraGalMode]=ZaDomain.GAL_Mode_internal;
this.attrs[ZaDomain.A_AuthMech]=ZaDomain.AuthMech_zimbra;
this.attrs[ZaDomain.A_GALSyncUseGALSearch]="TRUE";
this.notebookAcls={};
this[ZaDomain.A_NotebookTemplateFolder]="Template";
this[ZaDomain.A_NotebookTemplateDir]="/opt/zimbra/wiki/Template";
this.attrs[ZaDomain.A_zimbraAuthMechAdmin]=ZaDomain.AuthMech_ad;
this.notebookAcls[ZaDomain.A_NotebookAllACLs]={r:0,w:0,i:0,d:0,a:0,x:0};
this.notebookAcls[ZaDomain.A_NotebookPublicACLs]={r:0,w:0,i:0,d:0,a:0,x:0};
this.notebookAcls[ZaDomain.A_NotebookDomainACLs]={r:1,w:1,i:1,d:1,a:0,x:0};
this.notebookAcls[ZaDomain.A_NotebookUserACLs]=[];
this.notebookAcls[ZaDomain.A_NotebookGroupACLs]=[];
this.attrs[ZaDomain.A_zimbraDomainCOSMaxAccounts]=[];
this.attrs[ZaDomain.A_zimbraDomainFeatureMaxAccounts]=[]
};
ZaDomain.DEF_WIKI_ACC="domain_wiki";
ZaDomain.WIKI_FOLDER_ID="12";
ZaDomain.RESULTSPERPAGE=ZaSettings.RESULTSPERPAGE;
ZaDomain.MAXSEARCHRESULTS=ZaSettings.MAXSEARCHRESULTS;
ZaDomain.prototype=new ZaItem;
ZaDomain.prototype.constructor=ZaDomain;
ZaDomain.ACLLabels={r:ZaMsg.ACL_R,w:ZaMsg.ACL_W,i:ZaMsg.ACL_I,a:ZaMsg.ACL_A,d:ZaMsg.ACL_D,x:ZaMsg.ACL_X};
ZaItem.loadMethods.ZaDomain=new Array();
ZaItem.initMethods.ZaDomain=new Array();
ZaItem.modifyMethods.ZaDomain=new Array();
ZaItem.modifyMethodsExt.ZaDomain=new Array();
ZaItem.createMethods.ZaDomain=new Array();
ZaItem.getRelatedMethods.ZaDomain=new Array();
ZaDomain.DOMAIN_STATUS_ACTIVE="active";
ZaDomain.DOMAIN_STATUS_MAINTENANCE="maintenance";
ZaDomain.DOMAIN_STATUS_LOCKED="locked";
ZaDomain.DOMAIN_STATUS_CLOSED="closed";
ZaDomain.DOMAIN_STATUS_SUSPENDED="suspended";
ZaDomain.DOMAIN_STATUS_SHUTDOWN="shutdown";
ZaDomain.SPNEGO_SUPPORT_UA=[".*Windows.*Firefox/3.*",".*MSIE.*Windows.*",".*Windows.*Chrome.*",".*Windows.*Safari.*",".*Macintosh.*Safari.*"];
ZaDomain._domainStatus=function(c){var b=ZaDomain._DOMAIN_STATUS[c];
return(b==null)?c:b
};
ZaDomain._DOMAIN_STATUS=new Object();
ZaDomain.initDomainStatus=function(){ZaDomain._DOMAIN_STATUS[ZaDomain.DOMAIN_STATUS_ACTIVE]=ZaMsg.domainStatus_active;
ZaDomain._DOMAIN_STATUS[ZaDomain.DOMAIN_STATUS_CLOSED]=ZaMsg.domainStatus_closed;
ZaDomain._DOMAIN_STATUS[ZaDomain.DOMAIN_STATUS_LOCKED]=ZaMsg.domainStatus_locked;
ZaDomain._DOMAIN_STATUS[ZaDomain.DOMAIN_STATUS_SUSPENDED]=ZaMsg.domainStatus_suspended;
ZaDomain._DOMAIN_STATUS[ZaDomain.DOMAIN_STATUS_MAINTENANCE]=ZaMsg.domainStatus_maintenance;
ZaDomain._DOMAIN_STATUS[ZaDomain.DOMAIN_STATUS_SHUTDOWN]=ZaMsg.domainStatus_shutdown;
ZaDomain.getDomainStatusChoices=function(){return[{value:ZaDomain.DOMAIN_STATUS_ACTIVE,label:ZaDomain._DOMAIN_STATUS[ZaDomain.DOMAIN_STATUS_ACTIVE]},{value:ZaDomain.DOMAIN_STATUS_CLOSED,label:ZaDomain._DOMAIN_STATUS[ZaDomain.DOMAIN_STATUS_CLOSED]},{value:ZaDomain.DOMAIN_STATUS_LOCKED,label:ZaDomain._DOMAIN_STATUS[ZaDomain.DOMAIN_STATUS_LOCKED]},{value:ZaDomain.DOMAIN_STATUS_MAINTENANCE,label:ZaDomain._DOMAIN_STATUS[ZaDomain.DOMAIN_STATUS_MAINTENANCE]},{value:ZaDomain.DOMAIN_STATUS_SUSPENDED,label:ZaDomain._DOMAIN_STATUS[ZaDomain.DOMAIN_STATUS_SUSPENDED]}]
};
ZaDomain.domainStatusChoices=ZaDomain.getDomainStatusChoices
};
ZaDomain.initDomainStatus();
ZaDomain.getAggregateQuotaPolicyChoices=function(){return[{label:ZaMsg.Choice_QuotaPolicy_AllAllowed,value:"ALLOWSENDRECEIVE"},{label:ZaMsg.Choice_QuotaPolicy_BlockSends,value:"BLOCKSEND"},{label:ZaMsg.Choice_QuotaPolicy_AllBlocked,value:"BLOCKSENDRECEIVE"}]
};
ZaDomain.aggregateQuotaPolicyChoices=ZaDomain.getAggregateQuotaPolicyChoices;
ZaDomain.domainTypes={alias:"alias",local:"local"};
ZaDomain.protocolChoices={http:"http",https:"https"};
ZaDomain.A_description="description";
ZaDomain.A_notes="zimbraNotes";
ZaDomain.A_domainName="zimbraDomainName";
ZaDomain.A_domainType="zimbraDomainType";
ZaDomain.A_domainDefaultCOSId="zimbraDomainDefaultCOSId";
ZaDomain.A_domainDefaultExternalUserCOSId="zimbraDomainDefaultExternalUserCOSId";
ZaDomain.A_zimbraDomainStatus="zimbraDomainStatus";
ZaDomain.A_zimbraPublicServiceHostname="zimbraPublicServiceHostname";
ZaDomain.A_zimbraPublicServicePort="zimbraPublicServicePort";
ZaDomain.A_zimbraPublicServiceProtocol="zimbraPublicServiceProtocol";
ZaDomain.A_zimbraDNSCheckHostname="zimbraDNSCheckHostname";
ZaDomain.A_zimbraBasicAuthRealm="zimbraBasicAuthRealm";
ZaDomain.A_zimbraGalMaxResults="zimbraGalMaxResults";
ZaDomain.A_zimbraGalMode="zimbraGalMode";
ZaDomain.A_GalLdapURL="zimbraGalLdapURL";
ZaDomain.A_GalLdapSearchBase="zimbraGalLdapSearchBase";
ZaDomain.A_GalLdapBindDn="zimbraGalLdapBindDn";
ZaDomain.A_GalLdapBindPassword="zimbraGalLdapBindPassword";
ZaDomain.A_GalLdapBindPasswordConfirm="zimbraGalLdapBindPasswordConfirm";
ZaDomain.A_GalLdapFilter="zimbraGalLdapFilter";
ZaDomain.A_zimbraGalAutoCompleteLdapFilter="zimbraGalAutoCompleteLdapFilter";
ZaDomain.A_zimbraGalSyncLdapURL="zimbraGalSyncLdapURL";
ZaDomain.A_zimbraGalSyncLdapSearchBase="zimbraGalSyncLdapSearchBase";
ZaDomain.A_zimbraGalSyncLdapFilter="zimbraGalSyncLdapFilter";
ZaDomain.A_zimbraGalSyncLdapAuthMech="zimbraGalSyncLdapAuthMech";
ZaDomain.A_zimbraGalSyncLdapBindDn="zimbraGalSyncLdapBindDn";
ZaDomain.A_zimbraGalSyncLdapBindPassword="zimbraGalSyncLdapBindPassword";
ZaDomain.A_zimbraGalAccountId="zimbraGalAccountId";
ZaDomain.A_zimbraFeatureCalendarReminderDeviceEmailEnabled="zimbraFeatureCalendarReminderDeviceEmailEnabled";
ZaDomain.A_mailHost="zimbraMailHost";
ZaDomain.A_AuthMech="zimbraAuthMech";
ZaDomain.A_AuthLdapURL="zimbraAuthLdapURL";
ZaDomain.A_AuthLdapUserDn="zimbraAuthLdapBindDn";
ZaDomain.A_AuthLdapSearchBase="zimbraAuthLdapSearchBase";
ZaDomain.A_AuthLdapSearchFilter="zimbraAuthLdapSearchFilter";
ZaDomain.A_AuthLdapSearchBindDn="zimbraAuthLdapSearchBindDn";
ZaDomain.A_AuthLdapSearchBindPassword="zimbraAuthLdapSearchBindPassword";
ZaDomain.A_zimbraAdminConsoleDNSCheckEnabled="zimbraAdminConsoleDNSCheckEnabled";
ZaDomain.A_zimbraAdminConsoleCatchAllAddressEnabled="zimbraAdminConsoleCatchAllAddressEnabled";
ZaDomain.A_zimbraMailCatchAllAddress="zimbraMailCatchAllAddress";
ZaDomain.A_zimbraMailCatchAllForwardingAddress="zimbraMailCatchAllForwardingAddress";
ZaDomain.A_zimbraAdminConsoleSkinEnabled="zimbraAdminConsoleSkinEnabled";
ZaDomain.A_zimbraAdminConsoleLDAPAuthEnabled="zimbraAdminConsoleLDAPAuthEnabled";
ZaDomain.A_zimbraAuthLdapStartTlsEnabled="zimbraAuthLdapStartTlsEnabled";
ZaDomain.A_zimbraAuthFallbackToLocal="zimbraAuthFallbackToLocal";
ZaDomain.A_zimbraPasswordChangeListener="zimbraPasswordChangeListener";
ZaDomain.A_domainMaxAccounts="zimbraDomainMaxAccounts";
ZaDomain.A_GALServerType="galservertype";
ZaDomain.A_GALSyncServerType="galsyncservertype";
ZaDomain.A_GALSyncUseGALSearch="galsyncusegalsearch";
ZaDomain.A_GALSearchTestMessage="galsearchtestmessage";
ZaDomain.A_GALSyncTestMessage="galsynctestmessage";
ZaDomain.A_GALSearchTestResultCode="galsearchtestresutcode";
ZaDomain.A_GALSyncTestResultCode="galsynctestresutcode";
ZaDomain.A_GALSampleQuery="samplequery";
ZaDomain.A_UseBindPassword="usebindpassword";
ZaDomain.A_SyncUseBindPassword="syncusebindpassword";
ZaDomain.A_GALTestSearchResults="galtestsearchresults";
ZaDomain.A_NotebookTemplateDir="templatedir";
ZaDomain.A_NotebookTemplateFolder="templatefolder";
ZaDomain.A_NotebookAccountPassword="noteBookAccountPassword";
ZaDomain.A_NotebookAccountPassword2="noteBookAccountPassword2";
ZaDomain.A_CreateNotebook="createNotebook";
ZaDomain.A_OverwriteTemplates="overwritetemplates";
ZaDomain.A_OverwriteNotebookACLs="overwritenotebookacls";
ZaDomain.A_NotebookPublicACLs="pub";
ZaDomain.A_NotebookAllACLs="all";
ZaDomain.A_NotebookDomainACLs="dom";
ZaDomain.A_NotebookUserACLs="usr";
ZaDomain.A_NotebookGroupACLs="grp";
ZaDomain.A_NotebookGuestACLs="guest";
ZaDomain.A_allNotebookACLS="allNotebookACLS";
ZaDomain.GAL_Mode_internal="zimbra";
ZaDomain.GAL_Mode_external="ldap";
ZaDomain.GAL_Mode_both="both";
ZaDomain.GAL_ServerType_ad="ad";
ZaDomain.GAL_ServerType_ldap="ldap";
ZaDomain.A_AuthADDomainName="zimbraAuthADDomainName";
ZaDomain.A_AuthLDAPSearchBase="zimbraAuthLDAPSearchBase";
ZaDomain.A_AuthTestUserName="authtestusername";
ZaDomain.A_AuthTestPassword="authtestpassword";
ZaDomain.A_AuthTestMessage="authtestmessage";
ZaDomain.A_AuthTestResultCode="authtestresutcode";
ZaDomain.A_AuthComputedBindDn="authcomputedbinddn";
ZaDomain.A_AuthUseBindPassword="authusebindpassword";
ZaDomain.A_AuthLdapSearchBindPasswordConfirm="authldapsearchBindpasswordconfirm";
ZaDomain.A_GalSyncLdapBindPasswordConfirm="syncldappasswordconfirm";
ZaDomain.A_zimbraVirtualHostname="zimbraVirtualHostname";
ZaDomain.A_zimbraSSLCertificate="zimbraSSLCertificate";
ZaDomain.A_zimbraSSLPrivateKey="zimbraSSLPrivateKey";
ZaDomain.AuthMech_ad="ad";
ZaDomain.AuthMech_ldap="ldap";
ZaDomain.AuthMech_zimbra="zimbra";
ZaDomain.A_zimbraNotebookAccount="zimbraNotebookAccount";
ZaDomain.A_zimbraFreebusyExchangeAuthUsername="zimbraFreebusyExchangeAuthUsername";
ZaDomain.A_zimbraFreebusyExchangeAuthPassword="zimbraFreebusyExchangeAuthPassword";
ZaDomain.A_zimbraFreebusyExchangeAuthScheme="zimbraFreebusyExchangeAuthScheme";
ZaDomain.A_zimbraFreebusyExchangeServerType="zimbraFreebusyExchangeServerType";
ZaDomain.A_zimbraFreebusyExchangeURL="zimbraFreebusyExchangeURL";
ZaDomain.A_zimbraFreebusyExchangeUserOrg="zimbraFreebusyExchangeUserOrg";
ZaDomain.A_zimbraAvailableSkin="zimbraAvailableSkin";
ZaDomain.A_zimbraZimletDomainAvailableZimlets="zimbraZimletDomainAvailableZimlets";
ZaDomain.A_zimbraDomainCOSMaxAccounts="zimbraDomainCOSMaxAccounts";
ZaDomain.A_zimbraDomainFeatureMaxAccounts="zimbraDomainFeatureMaxAccounts";
ZaDomain.A2_account_limit="account_limit";
ZaDomain.A_zimbraHelpAdminURL="zimbraHelpAdminURL";
ZaDomain.A_zimbraHelpDelegatedURL="zimbraHelpDelegatedURL";
ZaDomain.A_zimbraAdminConsoleLoginURL="zimbraAdminConsoleLoginURL";
ZaDomain.A_zimbraAdminConsoleLogoutURL="zimbraAdminConsoleLogoutURL";
ZaDomain.A_zimbraAuthKerberos5Realm="zimbraAuthKerberos5Realm";
ZaDomain.A_zimbraWebClientLoginURL="zimbraWebClientLoginURL";
ZaDomain.A_zimbraWebClientLogoutURL="zimbraWebClientLogoutURL";
ZaDomain.A_zimbraWebClientLoginURLAllowedUA="zimbraWebClientLoginURLAllowedUA";
ZaDomain.A_zimbraWebClientLogoutURLAllowedUA="zimbraWebClientLogoutURLAllowedUA";
ZaDomain.A_zimbraWebClientLoginURLAllowedIP="zimbraWebClientLoginURLAllowedIP";
ZaDomain.A_zimbraWebClientLogoutURLAllowedIP="zimbraWebClientLogoutURLAllowedIP";
ZaDomain.A_zimbraForceClearCookies="zimbraForceClearCookies";
ZaDomain.A_zimbraReverseProxyClientCertMode="zimbraReverseProxyClientCertMode";
ZaDomain.A_zimbraMailSSLClientCertPrincipalMap="zimbraMailSSLClientCertPrincipalMap";
ZaDomain.A_zimbraReverseProxyClientCertCA="zimbraReverseProxyClientCertCA";
ZaDomain.A_zimbraAutoProvMode="zimbraAutoProvMode";
ZaDomain.A_zimbraAutoProvAuthMech="zimbraAutoProvAuthMech";
ZaDomain.A_zimbraAutoProvLdapURL="zimbraAutoProvLdapURL";
ZaDomain.A_zimbraAutoProvLdapStartTlsEnabled="zimbraAutoProvLdapStartTlsEnabled";
ZaDomain.A_zimbraAutoProvLdapAdminBindDn="zimbraAutoProvLdapAdminBindDn";
ZaDomain.A_zimbraAutoProvLdapAdminBindPassword="zimbraAutoProvLdapAdminBindPassword";
ZaDomain.A_zimbraAutoProvLdapSearchBase="zimbraAutoProvLdapSearchBase";
ZaDomain.A_zimbraAutoProvLdapSearchFilter="zimbraAutoProvLdapSearchFilter";
ZaDomain.A_zimbraAutoProvLdapBindDn="zimbraAutoProvLdapBindDn";
ZaDomain.A_zimbraAutoProvAccountNameMap="zimbraAutoProvAccountNameMap";
ZaDomain.A_zimbraAutoProvAttrMap="zimbraAutoProvAttrMap";
ZaDomain.A_zimbraAutoProvNotificationFromAddress="zimbraAutoProvNotificationFromAddress";
ZaDomain.A_zimbraAutoProvBatchSize="zimbraAutoProvBatchSize";
ZaDomain.A_zimbraAutoProvLastPolledTimestamp="zimbraAutoProvLastPolledTimestamp";
ZaDomain.A2_zimbraAutoProvModeEAGEREnabled=ZaDomain.A_zimbraAutoProvMode+"_EAGER";
ZaDomain.A2_zimbraAutoProvModeLAZYEnabled=ZaDomain.A_zimbraAutoProvMode+"_LAZY";
ZaDomain.A2_zimbraAutoProvModeMANUALEnabled=ZaDomain.A_zimbraAutoProvMode+"_MANUAL";
ZaDomain.A2_zimbraAutoProvAuthMechLDAPEnabled=ZaDomain.A_zimbraAutoProvAuthMech+"_LDAP";
ZaDomain.A2_zimbraAutoProvAuthMechPREAUTHEnabled=ZaDomain.A_zimbraAutoProvAuthMech+"_PREAUTH";
ZaDomain.A2_zimbraAutoProvAuthMechKRB5Enabled=ZaDomain.A_zimbraAutoProvAuthMech+"_KRB5";
ZaDomain.A2_zimbraAutoProvAuthMechSPNEGOEnabled=ZaDomain.A_zimbraAutoProvAuthMech+"_SPNEGO";
ZaDomain.A2_zimbraAutoProvServerList="zimbraAutoProvServerList";
ZaDomain.A2_zimbraAutoProvSelectedServerList="zimbraAutoProvSelectedDomainList";
ZaDomain.A2_zimbraAutoProvPollingInterval="zimbraAutoProvPollingInterval";
ZaDomain.A2_zimbraAutoProvSearchActivated="zimbraAutoProvSearchAcctActivated";
ZaDomain.A2_zimbraAutoProvAccountPool="zimbraAutoProvAccountPool";
ZaDomain.A2_zimbraAutoProvAccountPoolPageNum="zimbraAutoProvAccountPoolPageNum";
ZaDomain.A2_zimbraAutoProvAccountSrcSelectedPool="zimbraAutoProvAccountSrcSelectedPool";
ZaDomain.A2_zimbraAutoProvAccountTargetPool="zimbraAutoProvAccountTargetPool";
ZaDomain.A2_zimbraAutoProvAccountTgtSelectedPool="zimbraAutoProvAccountTgtSelectedPool";
ZaDomain.A2_zimbraAutoProvAccountPoolPageTotal="zimbraAutoProvAccountPoolPageTotal";
ZaDomain.A2_zimbraAutoProvAccountPassword="zimbraAutoProvAccountPassword";
ZaDomain.A2_zimbraAutoProvAccountPasswordInDlg=ZaDomain.A2_zimbraAutoProvAccountPassword+"InDlg";
ZaDomain.A2_zimbraAutoProvAccountPasswordAgainInDlg=ZaDomain.A2_zimbraAutoProvAccountPassword+"AgainInDlg";
ZaDomain.A2_zimbraAutoProvAccountPasswordUnmatchedWarning=ZaDomain.A2_zimbraAutoProvAccountPassword+"UnmatchedWarning";
ZaDomain.A_zimbraSkinForegroundColor="zimbraSkinForegroundColor";
ZaDomain.A_zimbraSkinBackgroundColor="zimbraSkinBackgroundColor";
ZaDomain.A_zimbraSkinSecondaryColor="zimbraSkinSecondaryColor";
ZaDomain.A_zimbraSkinSelectionColor="zimbraSkinSelectionColor";
ZaDomain.A_zimbraSkinLogoURL="zimbraSkinLogoURL";
ZaDomain.A_zimbraSkinLogoLoginBanner="zimbraSkinLogoLoginBanner";
ZaDomain.A_zimbraSkinLogoAppBanner="zimbraSkinLogoAppBanner";
ZaDomain.A_zimbraMailDomainQuota="zimbraMailDomainQuota";
ZaDomain.A_zimbraDomainAggregateQuota="zimbraDomainAggregateQuota";
ZaDomain.A_zimbraDomainAggregateQuotaPolicy="zimbraDomainAggregateQuotaPolicy";
ZaDomain.A_zimbraDomainAggregateQuotaWarnPercent="zimbraDomainAggregateQuotaWarnPercent";
ZaDomain.A_zimbraDomainAggregateQuotaWarnEmailRecipient="zimbraDomainAggregateQuotaWarnEmailRecipient";
ZaDomain.A_zimbraMailAddressValidationRegex="zimbraMailAddressValidationRegex";
ZaDomain.A_zimbraSieveRejectMailEnabled="zimbraSieveRejectMailEnabled";
ZaDomain.A_zimbraSieveEditHeaderEnabled="zimbraSieveEditHeaderEnabled";
ZaDomain.A_zimbraAdminSieveScriptBefore="zimbraAdminSieveScriptBefore";
ZaDomain.A_zimbraAdminSieveScriptAfter="zimbraAdminSieveScriptAfter";
ZaDomain.A_zimbraAutoProvNotificationSubject="zimbraAutoProvNotificationSubject";
ZaDomain.A_zimbraAutoProvNotificationBody="zimbraAutoProvNotificationBody";
ZaDomain.A_zimbraDomainAliasTargetId="zimbraDomainAliasTargetId";
ZaDomain.A2_zimbraDomainAliasTarget="zimbraDomainAliasTargetName";
ZaDomain.A_zimbraPrefTimeZoneId="zimbraPrefTimeZoneId";
ZaDomain.A_zimbraAdminConsoleLoginMessage="zimbraAdminConsoleLoginMessage";
ZaDomain.A2_allowClearTextLDAPAuth="allowClearTextLdapAuth";
ZaDomain.A2_isTestingGAL="isTestingGAL";
ZaDomain.A2_isTestingSync="isTestingSync";
ZaDomain.A2_isTestingAuth="isTestingAuth";
ZaDomain.A2_acl_selection_cache="acl_selection_cache";
ZaDomain.A2_gal_sync_accounts="gal_sync_accounts";
ZaDomain.A2_new_gal_sync_account_name="new_gal_sync_account_name";
ZaDomain.A2_new_internal_gal_ds_name="new_internal_gal_ds_name";
ZaDomain.A2_new_external_gal_ds_name="new_external_gal_ds_name";
ZaDomain.A2_new_internal_gal_polling_interval="new_internal_gal_polling_interval";
ZaDomain.A2_new_external_gal_polling_interval="new_external_gal_polling_interval";
ZaDomain.A2_gal_sync_accounts_set="gal_sync_accounts_set";
ZaDomain.A2_create_gal_acc="create_gal_acc";
ZaDomain.A2_domain_account_quota="domain_account_quota";
ZaDomain.Check_OK="check.OK";
ZaDomain.Check_UNKNOWN_HOST="check.UNKNOWN_HOST";
ZaDomain.Check_CONNECTION_REFUSED="check.CONNECTION_REFUSED";
ZaDomain.Check_SSL_HANDSHAKE_FAILURE="check.SSL_HANDSHAKE_FAILURE";
ZaDomain.Check_COMMUNICATION_FAILURE="check.COMMUNICATION_FAILURE";
ZaDomain.Check_AUTH_FAILED="check.AUTH_FAILED";
ZaDomain.Check_AUTH_NOT_SUPPORTED="check.AUTH_NOT_SUPPORTED";
ZaDomain.Check_NAME_NOT_FOUND="check.NAME_NOT_FOUND";
ZaDomain.Check_INVALID_SEARCH_FILTER="check.INVALID_SEARCH_FILTER";
ZaDomain.Check_FAILURE="check.FAILURE";
ZaDomain.Check_FAULT="Fault";
ZaDomain.Check_SKIPPED="Skiped";
ZaDomain.AUTH_MECH_CHOICES=[ZaDomain.AuthMech_ad,ZaDomain.AuthMech_ldap,ZaDomain.AuthMech_zimbra];
ZaDomain.LOCAL_DOMAIN_QUERY="(zimbraDomainType=local)";
ZaDomain.RIGHT_LIST_DOMAIN="listDomain";
ZaDomain.RIGHT_CREATE_TOP_DOMAIN="createTopDomain";
ZaDomain.RIGHT_DELETE_DOMAIN="deleteDomain";
ZaDomain.RIGHT_RENAME_DOMAIN="renameDomain";
ZaDomain.RIGHT_CREATE_SUB_DOMAIN="createSubDomain";
ZaDomain.RIGHT_CREATE_ACCOUNT="createAccount";
ZaDomain.RIGHT_CREATE_CALRES="createCalendarResource";
ZaDomain.RIGHT_CREATE_DL="createDistributionList";
ZaDomain.RIGHT_CREATE_ALIAS="createAlias";
ZaDomain.RIGHT_ADMIN_LOGIN_AS="adminLoginAs";
ZaDomain.RIGHT_CHECK_MX_RECORD="checkDomainMXRecord";
ZaDomain.CHECK_AUTH_CONFIG="checkExchangeAuthConfig";
ZaDomain.RIGHT_GET_DOMAIN_QUOTA="getDomainQuotaUsage";
ZaDomain.RIGHT_CREATE_GROUP="createGroup";
ZaDomain.RIGHT_LIST_GROUP="listGroup";
ZaDomain.cacheCounter=0;
ZaDomain.staticDomainByNameCacheTable={};
ZaDomain.staticDomainByIdCacheTable={};
ZaDomain.putDomainToCache=function(b){if(ZaDomain.cacheCounter==100){ZaDomain.staticDomainByNameCacheTable={};
ZaDomain.staticDomainByIdCacheTable={};
ZaDomain.cacheCounter=0
}if(!ZaDomain.staticDomainByNameCacheTable[b.name]||!ZaDomain.staticDomainByIdCacheTable[b.id]){ZaDomain.cacheCounter++
}if(b.name){ZaDomain.staticDomainByNameCacheTable[b.name]=b
}if(b.id){ZaDomain.staticDomainByIdCacheTable[b.id]=b
}};
ZaDomain.compareACLs=function(c,b){if(AjxUtil.isEmpty(c.name)&&AjxUtil.isEmpty(b.name)){if(AjxUtil.isEmpty(c.gt)&&AjXUtil.isEmpty(b.gt)){return 0
}if(c.gt==b.gt){return 0
}if(c.gt<b.gt){return -1
}if(c.gt>b.gt){return 1
}}else{if(c.gt==b.gt){if(c.name==b.name){return 0
}if(c.name<b.name){return -1
}if(c.name>b.name){return 1
}}else{if(c.gt==b.gt){return 0
}if(c.gt<b.gt){return -1
}if(c.gt>b.gt){return 1
}}}};
ZaDomain.getAll=function(g,d){var e="";
if(!ZaZimbraAdmin.hasGlobalDomainListAccess()){var f=ZaApp.getInstance()._domainNameList;
if(f&&f instanceof Array){for(var c=0;
c<f.length;
c++){if(!g||f[c].indexOf(g)!=-1){e+="("+ZaDomain.A_domainName+"="+f[c]+")"
}}if(f.length>1){e="(|"+e+")"
}}}else{if(g){e="("+ZaDomain.A_domainName+"=*"+g+"*)"
}}var h={query:e,types:[ZaSearch.DOMAINS],sortBy:ZaDomain.A_domainName,offset:"0",attrs:[ZaDomain.A_domainName,ZaDomain.A_zimbraDomainStatus,ZaItem.A_zimbraId,ZaDomain.A_domainType,ZaDomain.A_AuthMech],sortAscending:"1",limit:ZaDomain.MAXSEARCHRESULTS,ignoreTooManyResultsException:true,exceptionFrom:"ZaDomain.getAll",controller:ZaApp.getInstance().getCurrentController()};
if(d){if(d.limit){h.limit=d.limit
}if(d.callback){h.callback=ZaDomain._getAllCallback.bind(window,d.callback)
}}var b=ZaSearch.searchDirectory(h);
if(b){return ZaDomain._getAllCallback(false,b)
}};
ZaDomain._getAllCallback=function(f,b){var e=b.isZmCsfeResult?b.getResponse().Body:b.Body;
var c=e&&e.SearchDirectoryResponse;
var d=new ZaItemList(ZaDomain);
if(c!=null){ZaSearch.TOO_MANY_RESULTS_FLAG=false;
d.loadFromJS(c)
}if(f){f(d)
}return d
};
ZaDomain.createMethod=function(f,h){if(f.attrs==null){ZaApp.getInstance().getCurrentController().popupErrorDialog(ZaMsg.ERROR_UNKNOWN,null);
return null
}if(f.attrs[ZaDomain.A_domainName]==null||f.attrs[ZaDomain.A_domainName].length<1){ZaApp.getInstance().getCurrentController().popupErrorDialog(ZaMsg.ERROR_DOMAIN_NAME_REQUIRED);
return null
}f.name=f.attrs[ZaDomain.A_domainName];
if(!AjxUtil.isEmpty(f.attrs[ZaDomain.A_zimbraGalMaxResults])&&!AjxUtil.isNonNegativeLong(f.attrs[ZaDomain.A_zimbraGalMaxResults])){ZaApp.getInstance().getCurrentController().popupErrorDialog(AjxMessageFormat.format(ZaMsg.ERROR_INVALID_VALUE_FOR,[ZaMsg.NAD_GalMaxResults]));
return null
}if(f.name.length>256||f.attrs[ZaDomain.A_domainName].length>256){ZaApp.getInstance().getCurrentController().popupErrorDialog(ZaMsg.ERROR_DOMAIN_NAME_TOOLONG);
return null
}if(f.attrs[ZaDomain.A_zimbraGalMode]!=ZaDomain.GAL_Mode_internal){if(!f.attrs[ZaDomain.A_GalLdapFilter]){ZaApp.getInstance().getCurrentController().popupErrorDialog(ZaMsg.ERROR_SEARCH_FILTER_REQUIRED);
return null
}if(!f.attrs[ZaDomain.A_GalLdapURL]||f.attrs[ZaDomain.A_GalLdapURL].length<1){ZaApp.getInstance().getCurrentController().popupErrorDialog(ZaMsg.ERROR_LDAP_URL_REQUIRED);
return null
}}if(f.attrs[ZaDomain.A_AuthMech]!=ZaDomain.AuthMech_zimbra){if(!f.attrs[ZaDomain.A_AuthLdapURL]){ZaApp.getInstance().getCurrentController().popupErrorDialog(ZaMsg.ERROR_LDAP_URL_REQUIRED);
return null
}}var k=AjxSoapDoc.create("CreateDomainRequest",ZaZimbraAdmin.URN,null);
k.set("name",f.attrs[ZaDomain.A_domainName]);
var j=k.set("a",f.attrs[ZaDomain.A_zimbraGalMode]);
j.setAttribute("n",ZaDomain.A_zimbraGalMode);
j=k.set("a",f.attrs[ZaDomain.A_zimbraGalMaxResults]);
j.setAttribute("n",ZaDomain.A_zimbraGalMaxResults);
j=k.set("a",f.attrs[ZaDomain.A_notes]);
j.setAttribute("n",ZaDomain.A_notes);
if(f.attrs[ZaDomain.A_zimbraHelpAdminURL]){j=k.set("a",f.attrs[ZaDomain.A_zimbraHelpAdminURL]);
j.setAttribute("n",ZaDomain.A_zimbraHelpAdminURL)
}if(f.attrs[ZaDomain.A_zimbraHelpDelegatedURL]){j=k.set("a",f.attrs[ZaDomain.A_zimbraHelpDelegatedURL]);
j.setAttribute("n",ZaDomain.A_zimbraHelpDelegatedURL)
}if(f.attrs[ZaDomain.A_zimbraAdminConsoleLoginURL]){j=k.set("a",f.attrs[ZaDomain.A_zimbraAdminConsoleLoginURL]);
j.setAttribute("n",ZaDomain.A_zimbraAdminConsoleLoginURL)
}if(f.attrs[ZaDomain.A_zimbraAdminConsoleLogoutURL]){j=k.set("a",f.attrs[ZaDomain.A_zimbraAdminConsoleLogoutURL]);
j.setAttribute("n",ZaDomain.A_zimbraAdminConsoleLogoutURL)
}if(f.attrs[ZaDomain.A_zimbraSSLCertificate]){j=k.set("a",f.attrs[ZaDomain.A_zimbraSSLCertificate]);
j.setAttribute("n",ZaDomain.A_zimbraSSLCertificate)
}if(f.attrs[ZaDomain.A_zimbraSSLPrivateKey]){j=k.set("a",f.attrs[ZaDomain.A_zimbraSSLPrivateKey]);
j.setAttribute("n",ZaDomain.A_zimbraSSLPrivateKey)
}if(f.attrs[ZaDomain.A_zimbraAuthLdapStartTlsEnabled]){j=k.set("a",f.attrs[ZaDomain.A_zimbraAuthLdapStartTlsEnabled]);
j.setAttribute("n",ZaDomain.A_zimbraAuthLdapStartTlsEnabled)
}if(f.attrs[ZaDomain.A_AuthLdapURL]){var l=f.attrs[ZaDomain.A_AuthLdapURL].join(" ");
j=k.set("a",l);
j.setAttribute("n",ZaDomain.A_AuthLdapURL);
if(f.attrs[ZaDomain.A_zimbraAuthLdapStartTlsEnabled]=="TRUE"&&f.attrs[ZaDomain.A_AuthMech]==ZaDomain.AuthMech_ldap){if(l.indexOf("ldaps://")>-1){ZaApp.getInstance().getCurrentController().popupWarningDialog(ZaMsg.Domain_WarningStartTLSIgnored)
}}}j=k.set("a",f.attrs[ZaDomain.A_description]);
j.setAttribute("n",ZaDomain.A_description);
if(f.attrs[ZaDomain.A_zimbraBasicAuthRealm]){j=k.set("a",f.attrs[ZaDomain.A_zimbraBasicAuthRealm]);
j.setAttribute("n",ZaDomain.A_zimbraBasicAuthRealm)
}if(f.attrs[ZaDomain.A_zimbraGalMode]!=ZaDomain.GAL_Mode_internal){l=f.attrs[ZaDomain.A_GalLdapURL].join(" ");
j=k.set("a",l);
j.setAttribute("n",ZaDomain.A_GalLdapURL);
j=k.set("a",f.attrs[ZaDomain.A_GalLdapSearchBase]);
j.setAttribute("n",ZaDomain.A_GalLdapSearchBase);
j=k.set("a",f.attrs[ZaDomain.A_GalLdapBindDn]);
j.setAttribute("n",ZaDomain.A_GalLdapBindDn);
j=k.set("a",f.attrs[ZaDomain.A_GalLdapBindPassword]);
j.setAttribute("n",ZaDomain.A_GalLdapBindPassword);
j=k.set("a",f.attrs[ZaDomain.A_GalLdapFilter]);
j.setAttribute("n",ZaDomain.A_GalLdapFilter);
j=k.set("a",f.attrs[ZaDomain.A_zimbraGalAutoCompleteLdapFilter]);
j.setAttribute("n",ZaDomain.A_zimbraGalAutoCompleteLdapFilter)
}if(f.attrs[ZaDomain.A_AuthMech]==ZaDomain.AuthMech_ad){j=k.set("a","%u@"+f.attrs[ZaDomain.A_AuthADDomainName]);
j.setAttribute("n",ZaDomain.A_AuthLdapUserDn)
}else{if(f.attrs[ZaDomain.A_AuthMech]==ZaDomain.AuthMech_ldap){j=k.set("a",f.attrs[ZaDomain.A_AuthLdapSearchFilter]);
j.setAttribute("n",ZaDomain.A_AuthLdapSearchFilter);
j=k.set("a",f.attrs[ZaDomain.A_AuthLdapSearchBase]);
j.setAttribute("n",ZaDomain.A_AuthLdapSearchBase);
if(f[ZaDomain.A_AuthUseBindPassword]&&f[ZaDomain.A_AuthUseBindPassword]=="TRUE"){j=k.set("a",f.attrs[ZaDomain.A_AuthLdapSearchBindDn]);
j.setAttribute("n",ZaDomain.A_AuthLdapSearchBindDn);
j=k.set("a",f.attrs[ZaDomain.A_AuthLdapSearchBindPassword]);
j.setAttribute("n",ZaDomain.A_AuthLdapSearchBindPassword)
}}}if(f.attrs[ZaDomain.A_AuthMech]!=ZaDomain.AuthMech_zimbra){if(f.attrs[ZaDomain.A_zimbraAuthFallbackToLocal]){j=k.set("a",f.attrs[ZaDomain.A_zimbraAuthFallbackToLocal]);
j.setAttribute("n",ZaDomain.A_zimbraAuthFallbackToLocal)
}if(f.attrs[ZaDomain.A_zimbraPasswordChangeListener]){j=k.set("a",f.attrs[ZaDomain.A_zimbraPasswordChangeListener]);
j.setAttribute("n",ZaDomain.A_zimbraPasswordChangeListener)
}}var j=k.set("a",f.attrs[ZaDomain.A_AuthMech]);
j.setAttribute("n",ZaDomain.A_AuthMech);
if(f.attrs[ZaDomain.A_domainDefaultCOSId]){j=k.set("a",f.attrs[ZaDomain.A_domainDefaultCOSId]);
j.setAttribute("n",ZaDomain.A_domainDefaultCOSId)
}if(f.attrs[ZaDomain.A_zimbraPublicServiceHostname]){j=k.set("a",f.attrs[ZaDomain.A_zimbraPublicServiceHostname]);
j.setAttribute("n",ZaDomain.A_zimbraPublicServiceHostname)
}if(f.attrs[ZaDomain.A_zimbraPublicServiceProtocol]){j=k.set("a",f.attrs[ZaDomain.A_zimbraPublicServiceProtocol]);
j.setAttribute("n",ZaDomain.A_zimbraPublicServiceProtocol)
}if(f.attrs[ZaDomain.A_zimbraPublicServicePort]){j=k.set("a",f.attrs[ZaDomain.A_zimbraPublicServicePort]);
j.setAttribute("n",ZaDomain.A_zimbraPublicServicePort)
}if(f.attrs[ZaDomain.A_zimbraDNSCheckHostname]){j=k.set("a",f.attrs[ZaDomain.A_zimbraDNSCheckHostname]);
j.setAttribute("n",ZaDomain.A_zimbraDNSCheckHostname)
}if(f.attrs[ZaDomain.A_zimbraAdminConsoleDNSCheckEnabled]){j=k.set("a",f.attrs[ZaDomain.A_zimbraAdminConsoleDNSCheckEnabled]);
j.setAttribute("n",ZaDomain.A_zimbraAdminConsoleDNSCheckEnabled)
}if(f.attrs[ZaDomain.A_zimbraFeatureCalendarReminderDeviceEmailEnabled]){j=k.set("a",f.attrs[ZaDomain.A_zimbraFeatureCalendarReminderDeviceEmailEnabled]);
j.setAttribute("n",ZaDomain.A_zimbraFeatureCalendarReminderDeviceEmailEnabled)
}if(f.attrs[ZaDomain.A_zimbraAdminConsoleCatchAllAddressEnabled]){j=k.set("a",f.attrs[ZaDomain.A_zimbraAdminConsoleCatchAllAddressEnabled]);
j.setAttribute("n",ZaDomain.A_zimbraAdminConsoleCatchAllAddressEnabled)
}if(f.attrs[ZaDomain.A_zimbraAdminConsoleLDAPAuthEnabled]){j=k.set("a",f.attrs[ZaDomain.A_zimbraAdminConsoleLDAPAuthEnabled]);
j.setAttribute("n",ZaDomain.A_zimbraAdminConsoleLDAPAuthEnabled)
}if(f.attrs[ZaDomain.A_zimbraDomainStatus]){j=k.set("a",f.attrs[ZaDomain.A_zimbraDomainStatus]);
j.setAttribute("n",ZaDomain.A_zimbraDomainStatus)
}if(f.attrs[ZaDomain.A_domainMaxAccounts]){j=k.set("a",f.attrs[ZaDomain.A_domainMaxAccounts]);
j.setAttribute("n",ZaDomain.A_domainMaxAccounts)
}if(f.attrs[ZaDomain.A_zimbraVirtualHostname]){if(f.attrs[ZaDomain.A_zimbraVirtualHostname] instanceof Array){var c=f.attrs[ZaDomain.A_zimbraVirtualHostname].length;
for(var d=0;
d<c;
d++){j=k.set("a",f.attrs[ZaDomain.A_zimbraVirtualHostname][d]);
j.setAttribute("n",ZaDomain.A_zimbraVirtualHostname)
}}else{j=k.set("a",f.attrs[ZaDomain.A_zimbraVirtualHostname]);
j.setAttribute("n",ZaDomain.A_zimbraVirtualHostname)
}}if(f.attrs[ZaDomain.A_zimbraMailAddressValidationRegex]){if(f.attrs[ZaDomain.A_zimbraMailAddressValidationRegex] instanceof Array){var c=f.attrs[ZaDomain.A_zimbraMailAddressValidationRegex].length;
for(var d=0;
d<c;
d++){j=k.set("a",f.attrs[ZaDomain.A_zimbraMailAddressValidationRegex][d]);
j.setAttribute("n",ZaDomain.A_zimbraMailAddressValidationRegex)
}}else{j=k.set("a",f.attrs[ZaDomain.A_zimbraMailAddressValidationRegex]);
j.setAttribute("n",ZaDomain.A_zimbraMailAddressValidationRegex)
}}if(f.attrs[ZaDomain.A_zimbraAuthKerberos5Realm]){j=k.set("a",f.attrs[ZaDomain.A_zimbraAuthKerberos5Realm]);
j.setAttribute("n",ZaDomain.A_zimbraAuthKerberos5Realm)
}if(f.attrs[ZaDomain.A_zimbraForceClearCookies]){j=k.set("a",f.attrs[ZaDomain.A_zimbraForceClearCookies]);
j.setAttribute("n",ZaDomain.A_zimbraForceClearCookies)
}if(f.attrs[ZaDomain.A_zimbraWebClientLoginURL]){j=k.set("a",f.attrs[ZaDomain.A_zimbraWebClientLoginURL]);
j.setAttribute("n",ZaDomain.A_zimbraWebClientLoginURL)
}if(f.attrs[ZaDomain.A_zimbraWebClientLogoutURL]){j=k.set("a",f.attrs[ZaDomain.A_zimbraWebClientLogoutURL]);
j.setAttribute("n",ZaDomain.A_zimbraWebClientLogoutURL)
}if(f.attrs[ZaDomain.A_zimbraReverseProxyClientCertMode]){j=k.set("a",f.attrs[ZaDomain.A_zimbraReverseProxyClientCertMode]);
j.setAttribute("n",ZaDomain.A_zimbraReverseProxyClientCertMode)
}if(f.attrs[ZaDomain.A_zimbraMailSSLClientCertPrincipalMap]){j=k.set("a",f.attrs[ZaDomain.A_zimbraMailSSLClientCertPrincipalMap]);
j.setAttribute("n",ZaDomain.A_zimbraMailSSLClientCertPrincipalMap)
}if(f.attrs[ZaDomain.A_zimbraReverseProxyClientCertCA]){j=k.set("a",f.attrs[ZaDomain.A_zimbraReverseProxyClientCertCA]);
j.setAttribute("n",ZaDomain.A_zimbraReverseProxyClientCertCA)
}if(f.attrs[ZaDomain.A_zimbraWebClientLoginURLAllowedUA]){if(f.attrs[ZaDomain.A_zimbraWebClientLoginURLAllowedUA] instanceof Array){var c=f.attrs[ZaDomain.A_zimbraWebClientLoginURLAllowedUA].length;
for(var d=0;
d<c;
d++){j=k.set("a",f.attrs[ZaDomain.A_zimbraWebClientLoginURLAllowedUA][d]);
j.setAttribute("n",ZaDomain.A_zimbraWebClientLoginURLAllowedUA)
}}else{j=k.set("a",f.attrs[ZaDomain.A_zimbraWebClientLoginURLAllowedUA]);
j.setAttribute("n",ZaDomain.A_zimbraWebClientLoginURLAllowedUA)
}}if(f.attrs[ZaDomain.A_zimbraWebClientLogoutURLAllowedUA]){if(f.attrs[ZaDomain.A_zimbraWebClientLogoutURLAllowedUA] instanceof Array){var c=f.attrs[ZaDomain.A_zimbraWebClientLogoutURLAllowedUA].length;
for(var d=0;
d<c;
d++){j=k.set("a",f.attrs[ZaDomain.A_zimbraWebClientLogoutURLAllowedUA][d]);
j.setAttribute("n",ZaDomain.A_zimbraWebClientLogoutURLAllowedUA)
}}else{j=k.set("a",f.attrs[ZaDomain.A_zimbraWebClientLogoutURLAllowedUA]);
j.setAttribute("n",ZaDomain.A_zimbraWebClientLogoutURLAllowedUA)
}}if(f.attrs[ZaDomain.A_zimbraWebClientLoginURLAllowedIP]){if(f.attrs[ZaDomain.A_zimbraWebClientLoginURLAllowedIP] instanceof Array){var c=f.attrs[ZaDomain.A_zimbraWebClientLoginURLAllowedIP].length;
for(var d=0;
d<c;
d++){j=k.set("a",f.attrs[ZaDomain.A_zimbraWebClientLoginURLAllowedIP][d]);
j.setAttribute("n",ZaDomain.A_zimbraWebClientLoginURLAllowedIP)
}}else{j=k.set("a",f.attrs[ZaDomain.A_zimbraWebClientLoginURLAllowedIP]);
j.setAttribute("n",ZaDomain.A_zimbraWebClientLoginURLAllowedIP)
}}if(f.attrs[ZaDomain.A_zimbraWebClientLogoutURLAllowedIP]){if(f.attrs[ZaDomain.A_zimbraWebClientLogoutURLAllowedIP] instanceof Array){var c=f.attrs[ZaDomain.A_zimbraWebClientLogoutURLAllowedIP].length;
for(var d=0;
d<c;
d++){j=k.set("a",f.attrs[ZaDomain.A_zimbraWebClientLogoutURLAllowedIP][d]);
j.setAttribute("n",ZaDomain.A_zimbraWebClientLogoutURLAllowedIP)
}}else{j=k.set("a",f.attrs[ZaDomain.A_zimbraWebClientLogoutURLAllowedIP]);
j.setAttribute("n",ZaDomain.A_zimbraWebClientLogoutURLAllowedIP)
}}if(f.attrs[ZaDomain.A_zimbraMailDomainQuota]){j=k.set("a",f.attrs[ZaDomain.A_zimbraMailDomainQuota]);
j.setAttribute("n",ZaDomain.A_zimbraMailDomainQuota)
}if(f.attrs[ZaDomain.A_zimbraDomainAggregateQuota]){j=k.set("a",f.attrs[ZaDomain.A_zimbraDomainAggregateQuota]);
j.setAttribute("n",ZaDomain.A_zimbraDomainAggregateQuota)
}if(f.attrs[ZaDomain.A_zimbraDomainAggregateQuotaWarnPercent]){j=k.set("a",f.attrs[ZaDomain.A_zimbraDomainAggregateQuotaWarnPercent]);
j.setAttribute("n",ZaDomain.A_zimbraDomainAggregateQuotaWarnPercent)
}if(f.attrs[ZaDomain.A_zimbraDomainAggregateQuotaWarnEmailRecipient]){j=k.set("a",f.attrs[ZaDomain.A_zimbraDomainAggregateQuotaWarnEmailRecipient]);
j.setAttribute("n",ZaDomain.A_zimbraDomainAggregateQuotaWarnEmailRecipient)
}if(f.attrs[ZaDomain.A_zimbraDomainAggregateQuotaPolicy]){j=k.set("a",f.attrs[ZaDomain.A_zimbraDomainAggregateQuotaPolicy]);
j.setAttribute("n",ZaDomain.A_zimbraDomainAggregateQuotaPolicy)
}var g=new Object();
g.soapDoc=k;
var b={controller:ZaApp.getInstance().getCurrentController(),busyMsg:ZaMsg.BUSY_CREATE_DOMAIN};
var e=ZaRequestMgr.invoke(g,b).Body.CreateDomainResponse;
h.initFromJS(e.domain[0])
};
ZaItem.createMethods.ZaDomain.push(ZaDomain.createMethod);
ZaDomain.createGalAccounts=function(c,h){if(c[ZaDomain.A2_create_gal_acc]&&c[ZaDomain.A2_create_gal_acc]=="TRUE"&&!AjxUtil.isEmpty(c[ZaDomain.A2_gal_sync_accounts_set])){for(var g in c[ZaDomain.A2_gal_sync_accounts_set]){var e=c[ZaDomain.A2_gal_sync_accounts_set][g];
if(!e){continue
}if(e[ZaDomain.A2_new_gal_sync_account_name]&&(e[ZaDomain.A2_new_internal_gal_ds_name]||e[ZaDomain.A2_new_external_gal_ds_name])){var l=AjxSoapDoc.create("BatchRequest","urn:zimbra");
l.setMethodAttribute("onerror","stop");
if(e[ZaDomain.A2_new_gal_sync_account_name].indexOf("@")<0){e[ZaDomain.A2_new_gal_sync_account_name]=[e[ZaDomain.A2_new_gal_sync_account_name],"@",c.attrs[ZaDomain.A_domainName]].join("")
}if((c.attrs[ZaDomain.A_zimbraGalMode]==ZaDomain.GAL_Mode_internal||c.attrs[ZaDomain.A_zimbraGalMode]==ZaDomain.GAL_Mode_both)&&e[ZaDomain.A2_new_gal_sync_account_name]&&e[ZaDomain.A2_new_internal_gal_ds_name]&&e[ZaDomain.A_mailHost]){var m=l.set("CreateGalSyncAccountRequest",null,null,ZaZimbraAdmin.URN);
m.setAttribute("name",e[ZaDomain.A2_new_internal_gal_ds_name]);
m.setAttribute("folder","_"+e[ZaDomain.A2_new_internal_gal_ds_name]);
m.setAttribute("type","zimbra");
m.setAttribute("domain",c.attrs[ZaDomain.A_domainName]);
m.setAttribute("server",e[ZaDomain.A_mailHost]);
l.set("account",e[ZaDomain.A2_new_gal_sync_account_name],m).setAttribute("by","name");
l.set("a",e[ZaDomain.A2_new_internal_gal_polling_interval],m).setAttribute("n",ZaDataSource.A_zimbraDataSourcePollingInterval)
}if(c.attrs[ZaDomain.A_zimbraGalMode]!=ZaDomain.GAL_Mode_internal&&e[ZaDomain.A2_new_gal_sync_account_name]&&e[ZaDomain.A2_new_external_gal_ds_name]&&e[ZaDomain.A_mailHost]){var n=l.set("CreateGalSyncAccountRequest",null,null,ZaZimbraAdmin.URN);
n.setAttribute("name",e[ZaDomain.A2_new_external_gal_ds_name]);
n.setAttribute("folder","_"+e[ZaDomain.A2_new_external_gal_ds_name]);
n.setAttribute("type","ldap");
n.setAttribute("domain",c.attrs[ZaDomain.A_domainName]);
n.setAttribute("server",e[ZaDomain.A_mailHost]);
l.set("account",e[ZaDomain.A2_new_gal_sync_account_name],n).setAttribute("by","name");
l.set("a",e[ZaDomain.A2_new_external_gal_polling_interval],n).setAttribute("n",ZaDataSource.A_zimbraDataSourcePollingInterval)
}try{var f=new Object();
f.soapDoc=l;
var d={controller:ZaApp.getInstance().getCurrentController(),busyMsg:ZaMsg.BUSY_CREATING_GALDS,showBusy:true};
var b=ZaRequestMgr.invoke(f,d);
if(b.isException&&b.isException()){ZaApp.getInstance().getCurrentController()._handleException(b.getException(),"ZaDomain.createGalAccounts",null,false);
hasError=true;
lastException=j
}else{if(b.Body.BatchResponse.Fault){var k=b.Body.BatchResponse.Fault;
if(k instanceof Array){k=k[0]
}if(k){var j=ZmCsfeCommand.faultToEx(k);
ZaApp.getInstance().getCurrentController()._handleException(j,"ZaDomain.createGalAccounts",null,false);
hasError=true;
lastException=j
}}else{var o=b.Body.BatchResponse
}}}catch(j){ZaApp.getInstance().getCurrentController()._handleException(j,"ZaDomain.createGalAccounts",null,false);
hasError=true;
lastException=j
}}}}};
ZaItem.createMethods.ZaDomain.push(ZaDomain.createGalAccounts);
ZaDomain.canConfigureAuth=function(b){return(ZaItem.hasRight(ZaDomain.CHECK_AUTH_CONFIG,b)&&ZaItem.hasWritePermission(ZaDomain.A_AuthMech,b)&&ZaItem.hasWritePermission(ZaDomain.A_AuthLdapURL,b)&&ZaItem.hasWritePermission(ZaDomain.A_AuthLdapUserDn,b)&&ZaItem.hasWritePermission(ZaDomain.A_AuthLdapSearchBase,b)&&ZaItem.hasWritePermission(ZaDomain.A_AuthLdapSearchFilter,b)&&ZaItem.hasWritePermission(ZaDomain.A_AuthLdapSearchBindDn,b)&&ZaItem.hasWritePermission(ZaDomain.A_AuthLdapSearchBindPassword,b))
};
ZaDomain.canConfigureGal=function(b){return(ZaItem.hasWritePermission(ZaDomain.A_zimbraGalAccountId,b)&&ZaItem.hasWritePermission(ZaDomain.A_zimbraGalMode,b)&&ZaItem.hasWritePermission(ZaDomain.A_GalLdapURL,b)&&ZaItem.hasWritePermission(ZaDomain.A_GalLdapSearchBase,b)&&ZaItem.hasWritePermission(ZaDomain.A_GalLdapBindDn,b)&&ZaItem.hasWritePermission(ZaDomain.A_GalLdapBindPassword,b)&&ZaItem.hasWritePermission(ZaDomain.A_GalLdapFilter,b)&&ZaItem.hasWritePermission(ZaDomain.A_zimbraGalAutoCompleteLdapFilter,b)&&ZaItem.hasWritePermission(ZaDomain.A_zimbraGalSyncLdapURL,b)&&ZaItem.hasWritePermission(ZaDomain.A_zimbraGalSyncLdapSearchBase,b)&&ZaItem.hasWritePermission(ZaDomain.A_zimbraGalSyncLdapFilter,b)&&ZaItem.hasWritePermission(ZaDomain.A_zimbraGalSyncLdapBindDn,b)&&ZaItem.hasWritePermission(ZaDomain.A_zimbraGalSyncLdapBindPassword,b))
};
ZaDomain.canConfigureAutoProv=function(b){return(ZaItem.hasRight(ZaDomain.A_zimbraAutoProvMode,b)&&ZaItem.hasWritePermission(ZaDomain.A_zimbraAutoProvAuthMech,b)&&ZaItem.hasWritePermission(ZaDomain.A_zimbraAutoProvLdapURL,b)&&ZaItem.hasWritePermission(ZaDomain.A_zimbraAutoProvLdapAdminBindDn,b)&&ZaItem.hasWritePermission(ZaDomain.A_zimbraAutoProvLdapAdminBindPassword,b)&&ZaItem.hasWritePermission(ZaDomain.A_zimbraAutoProvLdapSearchBase,b)&&ZaItem.hasWritePermission(ZaDomain.A_zimbraAutoProvLdapSearchFilter,b)&&ZaItem.hasWritePermission(ZaDomain.A_zimbraAutoProvLdapBindDn,b)&&ZaItem.hasWritePermission(ZaDomain.A_zimbraAutoProvAccountNameMap,b)&&ZaItem.hasWritePermission(ZaDomain.A_zimbraAutoProvAttrMap,b)&&ZaItem.hasWritePermission(ZaDomain.A_zimbraAutoProvNotificationFromAddress,b)&&ZaItem.hasWritePermission(ZaDomain.A_zimbraAutoProvBatchSize,b))
};
ZaDomain.testAuthSettings=function(e,h){var d=AjxSoapDoc.create("CheckAuthConfigRequest",ZaZimbraAdmin.URN,null);
var b=d.set("a",e.attrs[ZaDomain.A_AuthMech]);
b.setAttribute("n",ZaDomain.A_AuthMech);
var c=e.attrs[ZaDomain.A_AuthLdapURL].join(" ");
b=d.set("a",c);
b.setAttribute("n",ZaDomain.A_AuthLdapURL);
if(e.attrs[ZaDomain.A_AuthMech]==ZaDomain.AuthMech_ad){b=d.set("a","%u@"+e.attrs[ZaDomain.A_AuthADDomainName]);
b.setAttribute("n",ZaDomain.A_AuthLdapUserDn)
}if(e.attrs[ZaDomain.A_AuthMech]==ZaDomain.AuthMech_ldap){if(e.attrs[ZaDomain.A_zimbraAuthLdapStartTlsEnabled]){b=d.set("a",e.attrs[ZaDomain.A_zimbraAuthLdapStartTlsEnabled]);
b.setAttribute("n",ZaDomain.A_zimbraAuthLdapStartTlsEnabled)
}if(e.attrs[ZaDomain.A_zimbraAuthLdapStartTlsEnabled]=="TRUE"){if(c.indexOf("ldaps://")>-1){ZaApp.getInstance().getCurrentController().popupWarningDialog(ZaMsg.Domain_WarningStartTLSIgnored)
}}b=d.set("a",e.attrs[ZaDomain.A_AuthLdapSearchBase]);
b.setAttribute("n",ZaDomain.A_AuthLdapSearchBase);
b=d.set("a",e.attrs[ZaDomain.A_AuthLdapSearchFilter]);
b.setAttribute("n",ZaDomain.A_AuthLdapSearchFilter);
b=d.set("a",e.attrs[ZaDomain.A_AuthLdapSearchBindDn]);
b.setAttribute("n",ZaDomain.A_AuthLdapSearchBindDn);
b=d.set("a",e.attrs[ZaDomain.A_AuthLdapSearchBindPassword]);
b.setAttribute("n",ZaDomain.A_AuthLdapSearchBindPassword)
}b=d.set("name",e[ZaDomain.A_AuthTestUserName]);
b=d.set("password",e[ZaDomain.A_AuthTestPassword]);
var g=new ZmCsfeCommand();
var f=new Object();
f.soapDoc=d;
f.noAuthToken=true;
f.asyncMode=true;
f.callback=h;
g.invoke(f)
};
ZaDomain.getRevokeNotebookACLsRequest=function(f,e){var c=f.length;
for(var b=0;
b<c;
b++){var g=e.set("FolderActionRequest",null,null,"urn:zimbraMail");
var d=e.set("action","",g);
d.setAttribute("id",ZaDomain.WIKI_FOLDER_ID);
d.setAttribute("op","!grant");
d.setAttribute("zid",f[b].zid)
}};
ZaDomain.getGrantNotebookACLsRequest=function(g,e){var h=e.set("FolderActionRequest",null,null,"urn:zimbraMail");
var d=e.set("action","",h);
d.setAttribute("id",ZaDomain.WIKI_FOLDER_ID);
d.setAttribute("op","grant");
var f=e.set("grant","",d);
f.setAttribute("gt",g.gt);
if(g.name){f.setAttribute("d",g.name)
}var c="";
for(var b in g.acl){if(g.acl[b]==1){c+=b
}}f.setAttribute("perm",c)
};
ZaDomain.testSyncSettings=function(e,h){var d=AjxSoapDoc.create("CheckGalConfigRequest",ZaZimbraAdmin.URN,null);
var b=d.set("a",ZaDomain.GAL_Mode_external);
b.setAttribute("n",ZaDomain.A_zimbraGalMode);
var c=e.attrs[ZaDomain.A_GalLdapURL].join(" ");
b=d.set("a",c);
b.setAttribute("n",ZaDomain.A_GalLdapURL);
b=d.set("a",e.attrs[ZaDomain.A_GalLdapSearchBase]);
b.setAttribute("n",ZaDomain.A_GalLdapSearchBase);
b=d.set("a",e.attrs[ZaDomain.A_GalLdapFilter]);
b.setAttribute("n",ZaDomain.A_GalLdapFilter);
if(e.attrs[ZaDomain.A_GalLdapBindDn]){b=d.set("a",e.attrs[ZaDomain.A_GalLdapBindDn]);
b.setAttribute("n",ZaDomain.A_GalLdapBindDn)
}if(e.attrs[ZaDomain.A_GalLdapBindPassword]){b=d.set("a",e.attrs[ZaDomain.A_GalLdapBindPassword]);
b.setAttribute("n",ZaDomain.A_GalLdapBindPassword)
}if(e.attrs[ZaDomain.A_GALSyncUseGALSearch]=="FALSE"){if(e.attrs[ZaDomain.A_zimbraGalSyncLdapURL]){var c=e.attrs[ZaDomain.A_zimbraGalSyncLdapURL].join(" ");
b=d.set("a",c);
b.setAttribute("n",ZaDomain.A_zimbraGalSyncLdapURL)
}if(e.attrs[ZaDomain.A_zimbraGalSyncLdapSearchBase]){b=d.set("a",e.attrs[ZaDomain.A_zimbraGalSyncLdapSearchBase]);
b.setAttribute("n",ZaDomain.A_zimbraGalSyncLdapSearchBase)
}if(e.attrs[ZaDomain.A_zimbraGalSyncLdapFilter]){b=d.set("a",e.attrs[ZaDomain.A_zimbraGalSyncLdapFilter]);
b.setAttribute("n",ZaDomain.A_zimbraGalSyncLdapFilter)
}if(e.attrs[ZaDomain.A_zimbraGalSyncLdapBindDn]){b=d.set("a",e.attrs[ZaDomain.A_zimbraGalSyncLdapBindDn]);
b.setAttribute("n",ZaDomain.A_zimbraGalSyncLdapBindDn)
}if(e.attrs[ZaDomain.A_zimbraGalSyncLdapBindPassword]){b=d.set("a",e.attrs[ZaDomain.A_zimbraGalSyncLdapBindPassword]);
b.setAttribute("n",ZaDomain.A_zimbraGalSyncLdapBindPassword)
}}d.set("action","sync");
var g=new ZmCsfeCommand();
var f=new Object();
f.soapDoc=d;
f.asyncMode=true;
f.noAuthToken=true;
f.callback=h;
g.invoke(f)
};
ZaDomain.testGALSettings=function(f,j,d){var e=AjxSoapDoc.create("CheckGalConfigRequest",ZaZimbraAdmin.URN,null);
var b=e.set("a",ZaDomain.GAL_Mode_external);
b.setAttribute("n",ZaDomain.A_zimbraGalMode);
var c=f.attrs[ZaDomain.A_GalLdapURL].join(" ");
b=e.set("a",c);
b.setAttribute("n",ZaDomain.A_GalLdapURL);
b=e.set("a",f.attrs[ZaDomain.A_GalLdapSearchBase]);
b.setAttribute("n",ZaDomain.A_GalLdapSearchBase);
b=e.set("a",f.attrs[ZaDomain.A_GalLdapFilter]);
b.setAttribute("n",ZaDomain.A_GalLdapFilter);
if(f.attrs[ZaDomain.A_GalLdapBindDn]){b=e.set("a",f.attrs[ZaDomain.A_GalLdapBindDn]);
b.setAttribute("n",ZaDomain.A_GalLdapBindDn)
}if(f.attrs[ZaDomain.A_GalLdapBindPassword]){b=e.set("a",f.attrs[ZaDomain.A_GalLdapBindPassword]);
b.setAttribute("n",ZaDomain.A_GalLdapBindPassword)
}e.set("query","*"+d+"*");
e.set("action","search");
var h=new ZmCsfeCommand();
var g=new Object();
g.soapDoc=e;
g.noAuthToken=true;
g.asyncMode=true;
g.callback=j;
h.invoke(g)
};
ZaDomain.modifyGalSettings=function(u){var t=AjxSoapDoc.create("BatchRequest","urn:zimbra");
t.setMethodAttribute("onerror","stop");
if(u[ZaDomain.A2_create_gal_acc]&&u[ZaDomain.A2_create_gal_acc]=="TRUE"&&!AjxUtil.isEmpty(u[ZaDomain.A2_gal_sync_accounts_set])){for(var l in u[ZaDomain.A2_gal_sync_accounts_set]){var s=u[ZaDomain.A2_gal_sync_accounts_set][l];
if(s[ZaDomain.A2_new_gal_sync_account_name].indexOf("@")<0){s[ZaDomain.A2_new_gal_sync_account_name]=[s[ZaDomain.A2_new_gal_sync_account_name],"@",u.attrs[ZaDomain.A_domainName]].join("")
}if((u.attrs[ZaDomain.A_zimbraGalMode]==ZaDomain.GAL_Mode_internal||u.attrs[ZaDomain.A_zimbraGalMode]==ZaDomain.GAL_Mode_both)&&s[ZaDomain.A2_new_internal_gal_ds_name]&&s[ZaDomain.A_mailHost]){var h=t.set("CreateGalSyncAccountRequest",null,null,ZaZimbraAdmin.URN);
h.setAttribute("name",s[ZaDomain.A2_new_internal_gal_ds_name]);
h.setAttribute("folder","_"+s[ZaDomain.A2_new_internal_gal_ds_name]);
h.setAttribute("type","zimbra");
h.setAttribute("domain",u.attrs[ZaDomain.A_domainName]);
h.setAttribute("server",s[ZaDomain.A_mailHost]);
if(s[ZaDomain.A2_new_gal_sync_account_name]){t.set("account",s[ZaDomain.A2_new_gal_sync_account_name],h).setAttribute("by","name")
}else{if(u[ZaDomain.A2_gal_sync_accounts]&&u[ZaDomain.A2_gal_sync_accounts][l]){t.set("account",u[ZaDomain.A2_gal_sync_accounts][l].name,b).setAttribute("by","name")
}}if(s[ZaDomain.A2_new_internal_gal_polling_interval]){t.set("a",s[ZaDomain.A2_new_internal_gal_polling_interval],h).setAttribute("n",ZaDataSource.A_zimbraDataSourcePollingInterval)
}}if(u.attrs[ZaDomain.A_zimbraGalMode]!=ZaDomain.GAL_Mode_internal&&s[ZaDomain.A2_new_external_gal_ds_name]&&s[ZaDomain.A_mailHost]){var b=t.set("CreateGalSyncAccountRequest",null,null,ZaZimbraAdmin.URN);
b.setAttribute("name",s[ZaDomain.A2_new_external_gal_ds_name]);
b.setAttribute("folder","_"+s[ZaDomain.A2_new_external_gal_ds_name]);
b.setAttribute("type","ldap");
b.setAttribute("domain",u.attrs[ZaDomain.A_domainName]);
b.setAttribute("server",s[ZaDomain.A_mailHost]);
if(s[ZaDomain.A2_new_gal_sync_account_name]){t.set("account",s[ZaDomain.A2_new_gal_sync_account_name],b).setAttribute("by","name")
}else{if(u[ZaDomain.A2_gal_sync_accounts]&&u[ZaDomain.A2_gal_sync_accounts][l]){t.set("account",u[ZaDomain.A2_gal_sync_accounts][l].name,b).setAttribute("by","name")
}}if(s[ZaDomain.A2_new_external_gal_polling_interval]){t.set("a",s[ZaDomain.A2_new_external_gal_polling_interval],b).setAttribute("n",ZaDataSource.A_zimbraDataSourcePollingInterval)
}}}}if(u[ZaDomain.A2_gal_sync_accounts]&&!AjxUtil.isEmpty(u[ZaDomain.A2_gal_sync_accounts])){for(var l in u[ZaDomain.A2_gal_sync_accounts]){var r=u[ZaDomain.A2_gal_sync_accounts][l];
if(r[ZaAccount.A2_zimbra_ds]&&r[ZaAccount.A2_zimbra_ds].attrs&&this[ZaDomain.A2_gal_sync_accounts][l][ZaAccount.A2_zimbra_ds]&&this[ZaDomain.A2_gal_sync_accounts][l][ZaAccount.A2_zimbra_ds].attrs){if(this[ZaDomain.A2_gal_sync_accounts][l][ZaAccount.A2_zimbra_ds].attrs[ZaDataSource.A_zimbraDataSourcePollingInterval]!=r[ZaAccount.A2_zimbra_ds].attrs[ZaDataSource.A_zimbraDataSourcePollingInterval]){var m=t.set("ModifyDataSourceRequest",null,null,ZaZimbraAdmin.URN);
t.set("id",this[ZaDomain.A2_gal_sync_accounts][l].id,m);
var g=t.set("dataSource",null,m);
g.setAttribute("id",this[ZaDomain.A2_gal_sync_accounts][l][ZaAccount.A2_zimbra_ds].id);
var j=t.set("a",r[ZaAccount.A2_zimbra_ds].attrs[ZaDataSource.A_zimbraDataSourcePollingInterval],g);
j.setAttribute("n",ZaDataSource.A_zimbraDataSourcePollingInterval)
}}if(r[ZaAccount.A2_ldap_ds]&&r[ZaAccount.A2_ldap_ds].attrs&&this[ZaDomain.A2_gal_sync_accounts][l][ZaAccount.A2_ldap_ds]&&this[ZaDomain.A2_gal_sync_accounts][l][ZaAccount.A2_ldap_ds].attrs){if(this[ZaDomain.A2_gal_sync_accounts][l][ZaAccount.A2_ldap_ds].attrs[ZaDataSource.A_zimbraDataSourcePollingInterval]!=r[ZaAccount.A2_ldap_ds].attrs[ZaDataSource.A_zimbraDataSourcePollingInterval]){var m=t.set("ModifyDataSourceRequest",null,null,ZaZimbraAdmin.URN);
t.set("id",this[ZaDomain.A2_gal_sync_accounts][l].id,m);
var g=t.set("dataSource",null,m);
g.setAttribute("id",this[ZaDomain.A2_gal_sync_accounts][l][ZaAccount.A2_ldap_ds].id);
var j=t.set("a",r[ZaAccount.A2_ldap_ds].attrs[ZaDataSource.A_zimbraDataSourcePollingInterval],g);
j.setAttribute("n",ZaDataSource.A_zimbraDataSourcePollingInterval)
}}}}var p=t.set("ModifyDomainRequest",null,null,ZaZimbraAdmin.URN);
t.set("id",this.id,p);
var j=t.set("a",u.attrs[ZaDomain.A_zimbraGalMode],p);
j.setAttribute("n",ZaDomain.A_zimbraGalMode);
if(u.attrs[ZaDomain.A_zimbraGalMode]!=ZaDomain.GAL_Mode_internal){var o=u.attrs[ZaDomain.A_GalLdapURL].join(" ");
j=t.set("a",o,p);
j.setAttribute("n",ZaDomain.A_GalLdapURL);
j=t.set("a",u.attrs[ZaDomain.A_GalLdapSearchBase],p);
j.setAttribute("n",ZaDomain.A_GalLdapSearchBase);
j=t.set("a",u.attrs[ZaDomain.A_GalLdapBindDn],p);
j.setAttribute("n",ZaDomain.A_GalLdapBindDn);
j=t.set("a",u.attrs[ZaDomain.A_GalLdapBindPassword],p);
j.setAttribute("n",ZaDomain.A_GalLdapBindPassword);
j=t.set("a",u.attrs[ZaDomain.A_GalLdapFilter],p);
j.setAttribute("n",ZaDomain.A_GalLdapFilter);
j=t.set("a",u.attrs[ZaDomain.A_zimbraGalAutoCompleteLdapFilter],p);
j.setAttribute("n",ZaDomain.A_zimbraGalAutoCompleteLdapFilter)
}if(u.attrs[ZaDomain.A_zimbraGalMaxResults]!=u.attrs[ZaDomain.A_zimbraGalMaxResults]){j=t.set("a",u.attrs[ZaDomain.A_zimbraGalMaxResults],p);
j.setAttribute("n",ZaDomain.A_zimbraGalMaxResults)
}if(u&&u[ZaDomain.A2_gal_sync_accounts]&&u[ZaDomain.A2_gal_sync_accounts][0]){var c=this.attrs[ZaDomain.A_zimbraGalMode],d=u.attrs[ZaDomain.A_zimbraGalMode],k=u[ZaDomain.A2_gal_sync_accounts][0];
if(c===ZaDomain.GAL_Mode_internal&&d===ZaDomain.GAL_Mode_both){var b=t.set("AddGalSyncDataSourceRequest",null,null,ZaZimbraAdmin.URN);
b.setAttribute("name",k[ZaDomain.A2_new_external_gal_ds_name]);
b.setAttribute("type","ldap");
b.setAttribute("domain",u.attrs[ZaDomain.A_domainName]);
t.set("account",k.name,b).setAttribute("by","name");
t.set("a",k[ZaDomain.A2_new_external_gal_polling_interval],b).setAttribute("n",ZaDataSource.A_zimbraDataSourcePollingInterval)
}if(c===ZaDomain.GAL_Mode_external&&d===ZaDomain.GAL_Mode_both){var h=t.set("AddGalSyncDataSourceRequest",null,null,ZaZimbraAdmin.URN);
h.setAttribute("name",k[ZaDomain.A2_new_internal_gal_ds_name]);
h.setAttribute("type","zimbra");
h.setAttribute("domain",u.attrs[ZaDomain.A_domainName]);
t.set("account",k.name,h).setAttribute("by","name");
t.set("a",k[ZaDomain.A2_new_internal_gal_polling_interval],h).setAttribute("n",ZaDataSource.A_zimbraDataSourcePollingInterval)
}}try{params=new Object();
params.soapDoc=t;
var e={controller:ZaApp.getInstance().getCurrentController(),busyMsg:ZaMsg.BUSY_CREATING_GALDS,showBusy:true};
var q=ZaRequestMgr.invoke(params,e);
if(q.isException&&q.isException()){ZaApp.getInstance().getCurrentController()._handleException(q.getException(),"ZaDomain.modifyGalSettings",null,false);
hasError=true;
lastException=n
}else{if(q.Body.BatchResponse.Fault){var f=q.Body.BatchResponse.Fault;
if(f instanceof Array){f=f[0]
}if(f){var n=ZmCsfeCommand.faultToEx(f);
ZaApp.getInstance().getCurrentController()._handleException(n,"ZaDomain.modifyGalSettings",null,false);
hasError=true;
lastException=n
}}else{this.refresh(false,true);
ZaDomain.putDomainToCache(this)
}}}catch(n){ZaApp.getInstance().getCurrentController()._handleException(n,"ZaDomain.modifyGalSettings",null,false);
hasError=true;
lastException=n
}};
ZaDomain.modifyAuthSettings=function(h){var e=AjxSoapDoc.create("ModifyDomainRequest",ZaZimbraAdmin.URN,null);
e.set("id",this.id);
var b=e.set("a",h.attrs[ZaDomain.A_AuthMech]);
b.setAttribute("n",ZaDomain.A_AuthMech);
if(h.attrs[ZaDomain.A_AuthMech]==ZaDomain.AuthMech_ad){var c=h.attrs[ZaDomain.A_AuthLdapURL].join(" ");
b=e.set("a",c);
b.setAttribute("n",ZaDomain.A_AuthLdapURL);
b=e.set("a","%u@"+h.attrs[ZaDomain.A_AuthADDomainName]);
b.setAttribute("n",ZaDomain.A_AuthLdapUserDn);
if(h[ZaDomain.A_AuthUseBindPassword]&&h[ZaDomain.A_AuthUseBindPassword]=="TRUE"){b=e.set("a",h.attrs[ZaDomain.A_AuthLdapSearchBindDn]);
b.setAttribute("n",ZaDomain.A_AuthLdapSearchBindDn);
b=e.set("a",h.attrs[ZaDomain.A_AuthLdapSearchBindPassword]);
b.setAttribute("n",ZaDomain.A_AuthLdapSearchBindPassword)
}}else{if(h.attrs[ZaDomain.A_AuthMech]==ZaDomain.AuthMech_ldap){if(h.attrs[ZaDomain.A_zimbraAuthLdapStartTlsEnabled]){b=e.set("a",h.attrs[ZaDomain.A_zimbraAuthLdapStartTlsEnabled]);
b.setAttribute("n",ZaDomain.A_zimbraAuthLdapStartTlsEnabled)
}var c=h.attrs[ZaDomain.A_AuthLdapURL].join(" ");
if(h.attrs[ZaDomain.A_zimbraAuthLdapStartTlsEnabled]=="TRUE"){if(c.indexOf("ldaps://")>-1){ZaApp.getInstance().getCurrentController().popupWarningDialog(ZaMsg.Domain_WarningStartTLSIgnored)
}}b=e.set("a",c);
b.setAttribute("n",ZaDomain.A_AuthLdapURL);
b=e.set("a",h.attrs[ZaDomain.A_AuthLdapSearchFilter]);
b.setAttribute("n",ZaDomain.A_AuthLdapSearchFilter);
b=e.set("a",h.attrs[ZaDomain.A_AuthLdapSearchBase]);
b.setAttribute("n",ZaDomain.A_AuthLdapSearchBase);
if(h[ZaDomain.A_AuthUseBindPassword]&&h[ZaDomain.A_AuthUseBindPassword]=="TRUE"){b=e.set("a",h.attrs[ZaDomain.A_AuthLdapSearchBindDn]);
b.setAttribute("n",ZaDomain.A_AuthLdapSearchBindDn);
b=e.set("a",h.attrs[ZaDomain.A_AuthLdapSearchBindPassword]);
b.setAttribute("n",ZaDomain.A_AuthLdapSearchBindPassword)
}}}if(h.attrs[ZaDomain.A_AuthMech]!=ZaDomain.AuthMech_zimbra&&h[ZaDomain.A2_zimbraExternalGroupLdapEnabled]=="TRUE"){if(h.attrs[ZaDomain.A_zimbraExternalGroupLdapSearchBase]&&h.attrs[ZaDomain.A_zimbraExternalGroupLdapSearchFilter]&&h.attrs[ZaDomain.A_zimbraExternalGroupHandlerClass]){b=e.set("a",h.attrs[ZaDomain.A_zimbraExternalGroupLdapSearchBase]);
b.setAttribute("n",ZaDomain.A_zimbraExternalGroupLdapSearchBase);
b=e.set("a",h.attrs[ZaDomain.A_zimbraExternalGroupLdapSearchFilter]);
b.setAttribute("n",ZaDomain.A_zimbraExternalGroupLdapSearchFilter);
b=e.set("a",h.attrs[ZaDomain.A_zimbraExternalGroupHandlerClass]);
b.setAttribute("n",ZaDomain.A_zimbraExternalGroupHandlerClass);
b=e.set("a",h.attrs[ZaDomain.A_zimbraAuthMechAdmin]);
b.setAttribute("n",ZaDomain.A_zimbraAuthMechAdmin)
}}ZaDomain.modifySSOSettings(e,h);
var g=new Object();
g.soapDoc=e;
var d={controller:ZaApp.getInstance().getCurrentController(),busyMsg:ZaMsg.BUSY_MODIFY_DOMAIN};
var f=ZaRequestMgr.invoke(g,d).Body.ModifyDomainResponse;
this.initFromJS(f.domain[0]);
ZaDomain.putDomainToCache(this)
};
ZaDomain.modifySSOSettings=function(e,f){if(f.attrs[ZaDomain.A_zimbraVirtualHostname]){if(f.attrs[ZaDomain.A_zimbraVirtualHostname] instanceof Array){var d=f.attrs[ZaDomain.A_zimbraVirtualHostname].length;
for(var c=0;
c<d;
c++){var b=e.set("a",f.attrs[ZaDomain.A_zimbraVirtualHostname][c]);
b.setAttribute("n",ZaDomain.A_zimbraVirtualHostname)
}}else{var b=e.set("a",f.attrs[ZaDomain.A_zimbraVirtualHostname]);
b.setAttribute("n",ZaDomain.A_zimbraVirtualHostname)
}}if(f[ZaDomain.A2_zimbraSpnegoUAAllBrowsers]=="TRUE"||f[ZaDomain.A2_zimbraSpnegoUASupportedBrowsers]=="TRUE"){f.attrs[ZaDomain.A_zimbraWebClientLoginURLAllowedUA]=ZaDomain.SPNEGO_SUPPORT_UA;
f.attrs[ZaDomain.A_zimbraWebClientLogoutURLAllowedUA]=ZaDomain.SPNEGO_SUPPORT_UA
}if(f.attrs[ZaDomain.A_zimbraWebClientLoginURLAllowedUA]){if(f.attrs[ZaDomain.A_zimbraWebClientLoginURLAllowedUA] instanceof Array){var d=f.attrs[ZaDomain.A_zimbraWebClientLoginURLAllowedUA].length;
for(var c=0;
c<d;
c++){var b=e.set("a",f.attrs[ZaDomain.A_zimbraWebClientLoginURLAllowedUA][c]);
b.setAttribute("n",ZaDomain.A_zimbraWebClientLoginURLAllowedUA)
}}else{var b=e.set("a",f.attrs[ZaDomain.A_zimbraWebClientLoginURLAllowedUA]);
b.setAttribute("n",ZaDomain.A_zimbraWebClientLoginURLAllowedUA)
}}if(f.attrs[ZaDomain.A_zimbraWebClientLogoutURLAllowedUA]){if(f.attrs[ZaDomain.A_zimbraWebClientLogoutURLAllowedUA] instanceof Array){var d=f.attrs[ZaDomain.A_zimbraWebClientLogoutURLAllowedUA].length;
for(var c=0;
c<d;
c++){var b=e.set("a",f.attrs[ZaDomain.A_zimbraWebClientLogoutURLAllowedUA][c]);
b.setAttribute("n",ZaDomain.A_zimbraWebClientLogoutURLAllowedUA)
}}else{var b=e.set("a",f.attrs[ZaDomain.A_zimbraWebClientLogoutURLAllowedUA]);
b.setAttribute("n",ZaDomain.A_zimbraWebClientLogoutURLAllowedUA)
}}if(f.attrs[ZaDomain.A_zimbraWebClientLoginURLAllowedIP]){if(f.attrs[ZaDomain.A_zimbraWebClientLoginURLAllowedIP] instanceof Array){var d=f.attrs[ZaDomain.A_zimbraWebClientLoginURLAllowedIP].length;
for(var c=0;
c<d;
c++){var b=e.set("a",f.attrs[ZaDomain.A_zimbraWebClientLoginURLAllowedIP][c]);
b.setAttribute("n",ZaDomain.A_zimbraWebClientLoginURLAllowedIP)
}}else{var b=e.set("a",f.attrs[ZaDomain.A_zimbraWebClientLoginURLAllowedIP]);
b.setAttribute("n",ZaDomain.A_zimbraWebClientLoginURLAllowedIP)
}}if(f.attrs[ZaDomain.A_zimbraWebClientLogoutURLAllowedIP]){if(f.attrs[ZaDomain.A_zimbraWebClientLogoutURLAllowedIP] instanceof Array){var d=f.attrs[ZaDomain.A_zimbraWebClientLogoutURLAllowedIP].length;
for(var c=0;
c<d;
c++){var b=e.set("a",f.attrs[ZaDomain.A_zimbraWebClientLogoutURLAllowedIP][c]);
b.setAttribute("n",ZaDomain.A_zimbraWebClientLogoutURLAllowedIP)
}}else{var b=e.set("a",f.attrs[ZaDomain.A_zimbraWebClientLogoutURLAllowedIP]);
b.setAttribute("n",ZaDomain.A_zimbraWebClientLogoutURLAllowedIP)
}}};
ZaDomain.modifyAutoPovSettings=function(v){var u=AjxSoapDoc.create("BatchRequest","urn:zimbra");
u.setMethodAttribute("onerror","stop");
var r=u.set("ModifyDomainRequest",null,null,ZaZimbraAdmin.URN);
u.set("id",this.id,r);
var k;
if(v.attrs[ZaDomain.A_zimbraAutoProvMode]){if(v.attrs[ZaDomain.A_zimbraAutoProvMode] instanceof Array){var n=v.attrs[ZaDomain.A_zimbraAutoProvMode].length;
for(var o=0;
o<n;
o++){k=u.set("a",v.attrs[ZaDomain.A_zimbraAutoProvMode][o],r);
k.setAttribute("n",ZaDomain.A_zimbraAutoProvMode)
}if(n==0){k=u.set("a","",r);
k.setAttribute("n",ZaDomain.A_zimbraAutoProvMode)
}}else{k=u.set("a",v.attrs[ZaDomain.A_zimbraAutoProvMode],r);
k.setAttribute("n",ZaDomain.A_zimbraAutoProvMode)
}}if(v.attrs[ZaDomain.A_zimbraAutoProvAuthMech]){if(v.attrs[ZaDomain.A_zimbraAutoProvAuthMech] instanceof Array&&v.attrs[ZaDomain.A_zimbraAutoProvAuthMech].length>0){var n=v.attrs[ZaDomain.A_zimbraAutoProvAuthMech].length;
for(var o=0;
o<n;
o++){k=u.set("a",v.attrs[ZaDomain.A_zimbraAutoProvAuthMech][o],r);
k.setAttribute("n",ZaDomain.A_zimbraAutoProvAuthMech)
}}else{k=u.set("a",v.attrs[ZaDomain.A_zimbraAutoProvAuthMech],r);
k.setAttribute("n",ZaDomain.A_zimbraAutoProvAuthMech)
}}if(v.attrs[ZaDomain.A_zimbraAutoProvAttrMap]){if((v.attrs[ZaDomain.A_zimbraAutoProvAttrMap] instanceof Array)&&v.attrs[ZaDomain.A_zimbraAutoProvAttrMap].length>0){var n=v.attrs[ZaDomain.A_zimbraAutoProvAttrMap].length;
for(var o=0;
o<n;
o++){k=u.set("a",v.attrs[ZaDomain.A_zimbraAutoProvAttrMap][o],r);
k.setAttribute("n",ZaDomain.A_zimbraAutoProvAttrMap)
}}else{k=u.set("a",v.attrs[ZaDomain.A_zimbraAutoProvAttrMap],r);
k.setAttribute("n",ZaDomain.A_zimbraAutoProvAttrMap)
}}if(v.attrs[ZaDomain.A_zimbraAutoProvLdapURL]){k=u.set("a",v.attrs[ZaDomain.A_zimbraAutoProvLdapURL],r);
k.setAttribute("n",ZaDomain.A_zimbraAutoProvLdapURL)
}if(v.attrs[ZaDomain.A_zimbraAutoProvLdapStartTlsEnabled]){k=u.set("a",v.attrs[ZaDomain.A_zimbraAutoProvLdapStartTlsEnabled],r);
k.setAttribute("n",ZaDomain.A_zimbraAutoProvLdapStartTlsEnabled)
}if(v.attrs[ZaDomain.A_zimbraAutoProvLdapAdminBindDn]){k=u.set("a",v.attrs[ZaDomain.A_zimbraAutoProvLdapAdminBindDn],r);
k.setAttribute("n",ZaDomain.A_zimbraAutoProvLdapAdminBindDn)
}if(v.attrs[ZaDomain.A_zimbraAutoProvLdapAdminBindPassword]){k=u.set("a",v.attrs[ZaDomain.A_zimbraAutoProvLdapAdminBindPassword],r);
k.setAttribute("n",ZaDomain.A_zimbraAutoProvLdapAdminBindPassword)
}if(v.attrs[ZaDomain.A_zimbraAutoProvLdapSearchBase]){k=u.set("a",v.attrs[ZaDomain.A_zimbraAutoProvLdapSearchBase],r);
k.setAttribute("n",ZaDomain.A_zimbraAutoProvLdapSearchBase)
}if(v.attrs[ZaDomain.A_zimbraAutoProvLdapSearchFilter]){k=u.set("a",v.attrs[ZaDomain.A_zimbraAutoProvLdapSearchFilter],r);
k.setAttribute("n",ZaDomain.A_zimbraAutoProvLdapSearchFilter)
}if(v.attrs[ZaDomain.A_zimbraAutoProvLdapBindDn]){k=u.set("a",v.attrs[ZaDomain.A_zimbraAutoProvLdapBindDn],r);
k.setAttribute("n",ZaDomain.A_zimbraAutoProvLdapBindDn)
}if(v.attrs[ZaDomain.A_zimbraAutoProvAccountNameMap]){k=u.set("a",v.attrs[ZaDomain.A_zimbraAutoProvAccountNameMap],r);
k.setAttribute("n",ZaDomain.A_zimbraAutoProvAccountNameMap)
}if(v.attrs[ZaDomain.A_zimbraAutoProvNotificationFromAddress]){k=u.set("a",v.attrs[ZaDomain.A_zimbraAutoProvNotificationFromAddress],r);
k.setAttribute("n",ZaDomain.A_zimbraAutoProvNotificationFromAddress)
}if(v.attrs[ZaDomain.A_zimbraAutoProvBatchSize]){k=u.set("a",v.attrs[ZaDomain.A_zimbraAutoProvBatchSize],r);
k.setAttribute("n",ZaDomain.A_zimbraAutoProvBatchSize)
}if(v.attrs[ZaDomain.A_zimbraAutoProvLastPolledTimestamp]){k=u.set("a",v.attrs[ZaDomain.A_zimbraAutoProvLastPolledTimestamp],r);
k.setAttribute("n",ZaDomain.A_zimbraAutoProvLastPolledTimestamp)
}k=u.set("a",v.attrs[ZaDomain.A_zimbraAutoProvNotificationSubject],r);
k.setAttribute("n",ZaDomain.A_zimbraAutoProvNotificationSubject);
k=u.set("a",v.attrs[ZaDomain.A_zimbraAutoProvNotificationBody],r);
k.setAttribute("n",ZaDomain.A_zimbraAutoProvNotificationBody);
if(v[ZaDomain.A2_zimbraAutoProvSelectedServerList]&&v[ZaDomain.A2_zimbraAutoProvSelectedServerList].getArray().length>0){var c=null;
var t=v[ZaDomain.A2_zimbraAutoProvSelectedServerList].getArray();
var e=v[ZaDomain.A2_zimbraAutoProvServerList];
var n=t.length;
for(var o=0;
o<n;
o++){var h=null;
for(var m=0;
m<e.length;
m++){if(t[o]==e[m].name){h=e[m]
}}if(h){var q=h.attrs[ZaServer.A_zimbraAutoProvScheduledDomains];
c=u.set("ModifyServerRequest",null,null,ZaZimbraAdmin.URN);
u.set("id",h.id,c);
var b=false;
for(var o=0;
q&&o<q.length;
o++){k=u.set("a",q[o],c);
k.setAttribute("n",ZaServer.A_zimbraAutoProvScheduledDomains);
if(q[o]==this.name){b=true
}}if(!b){k=u.set("a",this.name,c);
k.setAttribute("n",ZaServer.A_zimbraAutoProvScheduledDomains)
}if(v[ZaDomain.A2_zimbraAutoProvPollingInterval]){k=u.set("a",v[ZaDomain.A2_zimbraAutoProvPollingInterval],c);
k.setAttribute("n",ZaServer.A_zimbraAutoProvPollingInterval)
}}}}try{params=new Object();
params.soapDoc=u;
var d={controller:ZaApp.getInstance().getCurrentController(),busyMsg:ZaMsg.BUSY_MODIFY_DOMAIN,showBusy:true};
var s=ZaRequestMgr.invoke(params,d);
if(s.isException&&s.isException()){ZaApp.getInstance().getCurrentController()._handleException(s.getException(),"ZaDomain.modifyAutoPovSettings",null,false);
hasError=true;
lastException=p
}else{if(s.Body.BatchResponse.Fault){var f=s.Body.BatchResponse.Fault;
if(f instanceof Array){f=f[0]
}if(f){var p=ZmCsfeCommand.faultToEx(f);
ZaApp.getInstance().getCurrentController()._handleException(p,"ZaDomain.modifyGalSettings",null,false);
hasError=true;
lastException=p
}}else{var l=s.Body.BatchResponse;
var g=l.ModifyDomainResponse[0];
this.initFromJS(g.domain[0])
}}}catch(p){ZaApp.getInstance().getCurrentController()._handleException(p,"ZaDomain.modifyAutoPovSettings",null,false);
hasError=true;
lastException=p
}this.refresh(false,true);
ZaDomain.putDomainToCache(this)
};
ZaDomain.prototype.setStatus=function(b){var d=AjxSoapDoc.create("ModifyDomainStatusRequest",ZaZimbraAdmin.URN,null);
d.set("id",this.id);
var f=new Object();
f.soapDoc=d;
var c={controller:ZaApp.getInstance().getCurrentController(),busyMsg:ZaMsg.BUSY_MODIFY_DOMAIN_STATUS};
var e=ZaRequestMgr.invoke(f,c).Body.ModifyDomainStatusResponse;
this.attrs[ZaDomain.A_zimbraDomainStatus]=e.domain.status
};
ZaDomain.modifyMethod=function(p,w){var v=AjxSoapDoc.create("BatchRequest","urn:zimbra");
v.setMethodAttribute("onerror","stop");
var f=p;
if(ZaItem.modifyMethodsExt.ZaDomain){var s=ZaItem.modifyMethodsExt.ZaDomain;
var m=s.length;
for(var n=0;
n<m;
n++){if(typeof(s[n])=="function"){s[n].call(this,f,w,v)
}}}var t=v.set("ModifyDomainRequest",null,null,ZaZimbraAdmin.URN);
v.set("id",this.id,t);
for(var r in f){gotSomething=true;
if(f[r] instanceof Array){var m=f[r].length;
if(m){var c=false;
for(var e=0;
e<m;
e++){var k=null;
if(f[r][e] instanceof String||AjxUtil.isString(f[r][e])){if(AjxUtil.isEmpty(f[r][e])){continue
}else{c=true
}var k=v.set("a",f[r][e].toString(),t)
}else{if(f[r][e] instanceof Object){var k=v.set("a",f[r][e].toString(),t);
c=true
}else{var k=v.set("a",f[r][e],t);
c=true
}}if(k){k.setAttribute("n",r)
}}if(!c){var k=v.set("a","",t);
k.setAttribute("n",r)
}}else{var k=v.set("a","",t);
k.setAttribute("n",r)
}}else{var k=v.set("a",f[r],t);
k.setAttribute("n",r)
}}if(w[ZaDomain.A2_gal_sync_accounts]&&!AjxUtil.isEmpty(w[ZaDomain.A2_gal_sync_accounts])){for(var n in w[ZaDomain.A2_gal_sync_accounts]){var b=w[ZaDomain.A2_gal_sync_accounts][n];
if(b){if(b[ZaAccount.A2_zimbra_ds]&&b[ZaAccount.A2_zimbra_ds].attrs&&this[ZaDomain.A2_gal_sync_accounts][n][ZaAccount.A2_zimbra_ds]&&this[ZaDomain.A2_gal_sync_accounts][n][ZaAccount.A2_zimbra_ds].attrs){if(this[ZaDomain.A2_gal_sync_accounts][n][ZaAccount.A2_zimbra_ds].attrs[ZaDataSource.A_zimbraDataSourcePollingInterval]!=b[ZaAccount.A2_zimbra_ds].attrs[ZaDataSource.A_zimbraDataSourcePollingInterval]){var o=v.set("ModifyDataSourceRequest",null,null,ZaZimbraAdmin.URN);
v.set("id",this[ZaDomain.A2_gal_sync_accounts][n].id,o);
var h=v.set("dataSource",null,o);
h.setAttribute("id",this[ZaDomain.A2_gal_sync_accounts][n][ZaAccount.A2_zimbra_ds].id);
var k=v.set("a",b[ZaAccount.A2_zimbra_ds].attrs[ZaDataSource.A_zimbraDataSourcePollingInterval],h);
k.setAttribute("n",ZaDataSource.A_zimbraDataSourcePollingInterval)
}}if(b[ZaAccount.A2_ldap_ds]&&b[ZaAccount.A2_ldap_ds].attrs&&this[ZaDomain.A2_gal_sync_accounts][n][ZaAccount.A2_ldap_ds]&&this[ZaDomain.A2_gal_sync_accounts][n][ZaAccount.A2_ldap_ds].attrs){if(this[ZaDomain.A2_gal_sync_accounts][n][ZaAccount.A2_ldap_ds].attrs[ZaDataSource.A_zimbraDataSourcePollingInterval]!=b[ZaAccount.A2_ldap_ds].attrs[ZaDataSource.A_zimbraDataSourcePollingInterval]){var o=v.set("ModifyDataSourceRequest",null,null,ZaZimbraAdmin.URN);
v.set("id",this[ZaDomain.A2_gal_sync_accounts][n].id,o);
var h=v.set("dataSource",null,o);
h.setAttribute("id",this[ZaDomain.A2_gal_sync_accounts][n][ZaAccount.A2_ldap_ds].id);
var k=v.set("a",b[ZaAccount.A2_ldap_ds].attrs[ZaDataSource.A_zimbraDataSourcePollingInterval],h);
k.setAttribute("n",ZaDataSource.A_zimbraDataSourcePollingInterval)
}}}}}try{params=new Object();
params.soapDoc=v;
var d={controller:ZaApp.getInstance().getCurrentController(),busyMsg:ZaMsg.BUSY_MODIFY_DOMAIN,showBusy:true};
var u=ZaRequestMgr.invoke(params,d);
if(u.isException&&u.isException()){ZaApp.getInstance().getCurrentController()._handleException(u.getException(),"ZaDomain.modifyGalSettings",null,false);
hasError=true;
lastException=q
}else{if(u.Body.BatchResponse.Fault){var g=u.Body.BatchResponse.Fault;
if(g instanceof Array){g=g[0]
}if(g){var q=ZmCsfeCommand.faultToEx(g);
ZaApp.getInstance().getCurrentController()._handleException(q,"ZaDomain.modifyGalSettings",null,false);
hasError=true;
lastException=q
}}else{var l=u.Body.BatchResponse;
var j=l.ModifyDomainResponse[0];
this.initFromJS(j.domain[0])
}}}catch(q){ZaApp.getInstance().getCurrentController()._handleException(q,"ZaDomain.modifyGalSettings",null,false);
hasError=true;
lastException=q
}this.refresh(false,true);
ZaDomain.putDomainToCache(this)
};
ZaItem.modifyMethods.ZaDomain.push(ZaDomain.modifyMethod);
ZaDomain.getAccountQuota=function(b,h,g,o,k,p){var m=AjxSoapDoc.create("GetQuotaUsageRequest",ZaZimbraAdmin.URN,null);
if(o==null||o==ZaAccountQuota.A2_diskUsage){o="totalUsed"
}else{if(o==ZaAccountQuota.A2_quotaUsage){o="percentUsed"
}else{if(o==ZaAccountQuota.A2_quota){o="quotaLimit"
}else{if(o==ZaAccountQuota.A2_name){o="account"
}else{o="totalUsed"
}}}}m.getMethod().setAttribute("sortBy",o);
if(k){m.getMethod().setAttribute("sortAscending",k)
}g=g?g:ZaSettings.RESULTSPERPAGE;
m.getMethod().setAttribute("offset",h);
m.getMethod().setAttribute("limit",ZaServerMBXStatsPage.MBX_DISPLAY_LIMIT);
m.getMethod().setAttribute("refresh","1");
if(b){m.getMethod().setAttribute("domain",b);
m.getMethod().setAttribute("allServers","1")
}var f=new Object();
f.soapDoc=m;
var n=p?true:false;
if(n){f.asyncMode=true;
f.callback=p
}var d={controller:ZaApp.getInstance().getCurrentController(),busyMsg:ZaMsg.BUSY_GET_QUOTA};
var e=ZaRequestMgr.invoke(f,d);
if(n){return e
}else{e=e.Body.GetQuotaUsageResponse
}var q={hasMore:false,mbxes:new Array()};
if((e.account&&e.account.length>0)&&(e.searchTotal&&e.searchTotal>0)){q.hasMore=e.more;
var c=e.account;
var l=new Array();
for(var j=0;
j<c.length;
j++){l[j]=new ZaAccountQuota(c[j])
}q.mbxes=l
}return q
};
ZaDomain.prototype.initFromJS=function(c){ZaItem.prototype.initFromJS.call(this,c);
if(!(this.attrs[ZaDomain.A_zimbraDomainCOSMaxAccounts] instanceof Array)){if(this.attrs[ZaDomain.A_zimbraDomainCOSMaxAccounts]){this.attrs[ZaDomain.A_zimbraDomainCOSMaxAccounts]=[this.attrs[ZaDomain.A_zimbraDomainCOSMaxAccounts]]
}else{this.attrs[ZaDomain.A_zimbraDomainCOSMaxAccounts]=[]
}}if(!(this.attrs[ZaDomain.A_zimbraDomainFeatureMaxAccounts] instanceof Array)){if(this.attrs[ZaDomain.A_zimbraDomainFeatureMaxAccounts]){this.attrs[ZaDomain.A_zimbraDomainFeatureMaxAccounts]=[this.attrs[ZaDomain.A_zimbraDomainFeatureMaxAccounts]]
}else{this.attrs[ZaDomain.A_zimbraDomainFeatureMaxAccounts]=[]
}}if(!(this.attrs[ZaDomain.A_zimbraVirtualHostname] instanceof Array)){if(this.attrs[ZaDomain.A_zimbraVirtualHostname]){this.attrs[ZaDomain.A_zimbraVirtualHostname]=[this.attrs[ZaDomain.A_zimbraVirtualHostname]]
}else{this.attrs[ZaDomain.A_zimbraVirtualHostname]=new Array()
}}if(!(this.attrs[ZaDomain.A_zimbraMailAddressValidationRegex] instanceof Array)){if(this.attrs[ZaDomain.A_zimbraMailAddressValidationRegex]){this.attrs[ZaDomain.A_zimbraMailAddressValidationRegex]=[this.attrs[ZaDomain.A_zimbraMailAddressValidationRegex]]
}else{this.attrs[ZaDomain.A_zimbraMailAddressValidationRegex]=new Array()
}}if(AjxUtil.isString(this.attrs[ZaDomain.A_zimbraWebClientLoginURLAllowedUA])){this.attrs[ZaDomain.A_zimbraWebClientLoginURLAllowedUA]=[this.attrs[ZaGlobalConfig.A_zimbraWebClientLoginURLAllowedUA]]
}if(AjxUtil.isString(this.attrs[ZaDomain.A_zimbraWebClientLogoutURLAllowedUA])){this.attrs[ZaDomain.A_zimbraWebClientLogoutURLAllowedUA]=[this.attrs[ZaGlobalConfig.A_zimbraWebClientLogoutURLAllowedUA]]
}if(AjxUtil.isString(this.attrs[ZaDomain.A_zimbraWebClientLoginURLAllowedIP])){this.attrs[ZaDomain.A_zimbraWebClientLoginURLAllowedIP]=[this.attrs[ZaGlobalConfig.A_zimbraWebClientLoginURLAllowedIP]]
}if(AjxUtil.isString(this.attrs[ZaDomain.A_zimbraWebClientLogoutURLAllowedIP])){this.attrs[ZaDomain.A_zimbraWebClientLogoutURLAllowedIP]=[this.attrs[ZaGlobalConfig.A_zimbraWebClientLogoutURLAllowedIP]]
}if(!this.attrs[ZaDomain.A_AuthMech]){this.attrs[ZaDomain.A_AuthMech]=ZaDomain.AuthMech_zimbra
}if(!this.attrs[ZaDomain.A_zimbraGalMode]){this.attrs[ZaDomain.A_zimbraGalMode]=ZaDomain.GAL_Mode_internal
}if(this.attrs[ZaDomain.A_AuthLdapURL]){var b=this.attrs[ZaDomain.A_AuthLdapURL];
this.attrs[ZaDomain.A_AuthLdapURL]=b.split(" ")
}else{this.attrs[ZaDomain.A_AuthLdapURL]=new Array()
}if(this.attrs[ZaDomain.A_GalLdapURL]){var b=this.attrs[ZaDomain.A_GalLdapURL];
this.attrs[ZaDomain.A_GalLdapURL]=b.split(" ")
}else{this.attrs[ZaDomain.A_GalLdapURL]=new Array()
}if(this.attrs[ZaDomain.A_zimbraGalMode]){if(this.attrs[ZaDomain.A_zimbraGalMode]=="ldap"||this.attrs[ZaDomain.A_zimbraGalMode]=="both"){if(this.attrs[ZaDomain.A_GalLdapFilter]=="ad"){this.attrs[ZaDomain.A_GALServerType]="ad"
}else{this.attrs[ZaDomain.A_GALServerType]="ldap"
}if(!this.attrs[ZaDomain.A_zimbraGalSyncLdapURL]){this.attrs[ZaDomain.A_GALSyncUseGALSearch]="TRUE"
}else{this.attrs[ZaDomain.A_GALSyncUseGALSearch]="FALSE";
if(this.attrs[ZaDomain.A_zimbraGalSyncLdapBindDn]||this.attrs[ZaDomain.A_zimbraGalSyncLdapBindPassword]){this.attrs[ZaDomain.A_SyncUseBindPassword]="TRUE"
}else{this.attrs[ZaDomain.A_SyncUseBindPassword]="FALSE"
}if(this.attrs[ZaDomain.A_zimbraGalSyncLdapFilter]=="ad"){this.attrs[ZaDomain.A_GALSyncServerType]="ad"
}else{this.attrs[ZaDomain.A_GALSyncServerType]="ldap"
}}}else{this.attrs[ZaDomain.A_GALSyncUseGALSearch]="TRUE"
}}else{this.attrs[ZaDomain.A_zimbraGalMode]="zimbra";
this.attrs[ZaDomain.A_GALSyncUseGALSearch]="TRUE"
}if(this.attrs[ZaDomain.A_GalLdapBindDn]||this.attrs[ZaDomain.A_GalLdapBindPassword]){this.attrs[ZaDomain.A_UseBindPassword]="TRUE"
}else{this.attrs[ZaDomain.A_UseBindPassword]="FALSE"
}if(!AjxUtil.isEmpty(this.attrs[ZaDomain.A_AuthLdapUserDn])){this.attrs[ZaDomain.A_AuthADDomainName]=ZaAccount.getDomain(this.attrs[ZaDomain.A_AuthLdapUserDn])
}if(this.attrs[ZaDomain.A_AuthLdapSearchBindDn]||this.attrs[ZaDomain.A_AuthLdapSearchBindPassword]){this[ZaDomain.A_AuthUseBindPassword]="TRUE"
}else{this[ZaDomain.A_AuthUseBindPassword]="FALSE"
}this[ZaDomain.A_GALSampleQuery]="john";
if(!this.attrs[ZaDomain.A_zimbraGalAutoCompleteLdapFilter]){this.attrs[ZaDomain.A_zimbraGalAutoCompleteLdapFilter]="(|(cn=%s*)(sn=%s*)(gn=%s*)(mail=%s*))"
}if(this.attrs[ZaDomain.A_zimbraFreebusyExchangeAuthPassword]&&(this.attrs[ZaDomain.A_zimbraFreebusyExchangeAuthPassword]=="VALUE-BLOCKED")){this.attrs[ZaDomain.A_zimbraFreebusyExchangeAuthPassword]=""
}};
ZaDomain.prototype.parseNotebookFolderAcls=function(h){try{if(h.isException&&h.isException()){throw (h.getException())
}var e;
if(h.getResponse){e=h.getResponse().Body.GetFolderResponse
}else{e=h.Body.GetFolderResponse
}if(e&&e.folder&&e.folder[0]&&e.folder[0].acl&&e.folder[0].acl.grant){var c=e.folder[0].acl.grant;
var g=c.length;
this[ZaDomain.A_allNotebookACLS]=[];
for(var b=0;
b<g;
b++){var d=c[b];
var j={r:d.perm.indexOf("r")>=0?1:0,w:d.perm.indexOf("w")>=0?1:0,i:d.perm.indexOf("i")>=0?1:0,d:d.perm.indexOf("d")>=0?1:0,a:d.perm.indexOf("a")>=0?1:0,x:d.perm.indexOf("x")>=0?1:0,toString:function(){return this.r+this.w+this.i+this.d+this.a+this.x
}};
this[ZaDomain.A_allNotebookACLS].push({acl:j,name:d.d,zid:d.zid,gt:d.gt,toString:function(){return(this.gt+":"+this.name+":"+this.grantObj.toString())
}})
}this[ZaDomain.A_allNotebookACLS]._version=0
}}catch(f){ZaApp.getInstance().getCurrentController()._handleException(f,"ZaDomain.prototype.parseNotebookFolderAcls",null,false)
}};
ZaDomain.prototype.getToolTip=function(){if(!this._toolTip){var c=new Array(20);
var b=0;
c[b++]="<table cellpadding='0' cellspacing='0' border='0'>";
c[b++]="<tr valign='center'><td colspan='2' align='left'>";
c[b++]="<div style='border-bottom: 1px solid black; white-space:nowrap; overflow:hidden;width:350'>";
c[b++]="<table cellpadding='0' cellspacing='0' border='0' style='width:100%;'>";
c[b++]="<tr valign='center'>";
c[b++]="<td><b>"+AjxStringUtil.htmlEncode(this.name)+"</b></td>";
c[b++]="<td align='right'>";
c[b++]=AjxImg.getImageHtml("Domain");
c[b++]="</td>";
c[b++]="</table></div></td></tr>";
c[b++]="<tr></tr>";
b=this._addAttrRow(ZaItem.A_description,c,b);
b=this._addAttrRow(ZaItem.A_zimbraId,c,b);
c[b++]="</table>";
this._toolTip=c.join("")
}return this._toolTip
};
ZaDomain.prototype.remove=function(e){var c=AjxSoapDoc.create("DeleteDomainRequest",ZaZimbraAdmin.URN,null);
c.set("id",this.id);
var d=new Object();
d.soapDoc=c;
if(e){d.asyncMode=true;
d.callback=e
}var b={controller:ZaApp.getInstance().getCurrentController(),busyMsg:ZaMsg.BUSY_DELETE_DOMAIN};
ZaRequestMgr.invoke(d,b)
};
ZaDomain.getLoginMessage=function(){var b=ZaDomain.getDomainByName(ZaSettings.myDomainName,true);
return b.attrs[ZaDomain.A_zimbraAdminConsoleLoginMessage]
};
ZaDomain.getDomainByName=function(b){if(!b){return null
}b=b.toLowerCase();
var d=ZaDomain.staticDomainByNameCacheTable[b];
if(!d){d=new ZaDomain();
try{d.load("name",b,false,true)
}catch(c){throw (c)
}ZaDomain.putDomainToCache(d)
}return d
};
ZaDomain.getDomainById=function(d){if(!d){return null
}var c=ZaDomain.staticDomainByIdCacheTable[d];
if(!c){c=new ZaDomain();
try{c.load("id",d,false,true)
}catch(b){if(b.code==ZmCsfeException.NO_SUCH_DOMAIN){return null
}else{throw (b)
}}ZaDomain.putDomainToCache(c)
}return c
};
ZaDomain.loadMethod=function(e,j){e=e?e:"name";
j=j?j:this.attrs[ZaDomain.A_domainName];
this.notebookAcls[ZaDomain.A_NotebookAllACLs]={r:0,w:0,i:0,d:0,a:0,x:0};
this.notebookAcls[ZaDomain.A_NotebookPublicACLs]={r:0,w:0,i:0,d:0,a:0,x:0};
this.notebookAcls[ZaDomain.A_NotebookDomainACLs]={r:1,w:1,i:1,d:1,a:0,x:0};
this.notebookAcls[ZaDomain.A_NotebookUserACLs]=[];
this.notebookAcls[ZaDomain.A_NotebookGroupACLs]=[];
var d=AjxSoapDoc.create("GetDomainRequest",ZaZimbraAdmin.URN,null);
d.getMethod().setAttribute("applyConfig","false");
var b=d.set("domain",j);
b.setAttribute("by",e);
if(!this.getAttrs.all&&!AjxUtil.isEmpty(this.attrsToGet)){d.setMethodAttribute("attrs",this.attrsToGet.join(","))
}var h=new Object();
h.soapDoc=d;
var c={controller:(ZaApp.getInstance()?ZaApp.getInstance().getCurrentController():null),busyMsg:ZaMsg.BUSY_GET_DOMAIN};
var g=ZaRequestMgr.invoke(h,c);
if(g.isException&&g.isException()){if(ZaApp.getInstance()&&ZaApp.getInstance().getCurrentController()){ZaApp.getInstance().getCurrentController()._handleException(g.getException(),"ZaDomain.loadMethod",null,false)
}}else{var f=g.Body.GetDomainResponse;
this.initFromJS(f.domain[0])
}};
ZaItem.loadMethods.ZaDomain.push(ZaDomain.loadMethod);
ZaDomain.loadDataSources=function(e,f){if(this.attrs[ZaDomain.A_zimbraGalAccountId]){if(!(this.attrs[ZaDomain.A_zimbraGalAccountId] instanceof Array)){this.attrs[ZaDomain.A_zimbraGalAccountId]=[this.attrs[ZaDomain.A_zimbraGalAccountId]]
}this[ZaDomain.A2_gal_sync_accounts]=[];
for(var c=0;
c<this.attrs[ZaDomain.A_zimbraGalAccountId].length;
c++){try{var d=new ZaAccount();
d.load("id",this.attrs[ZaDomain.A_zimbraGalAccountId][c],false,false);
this[ZaDomain.A2_gal_sync_accounts].push(d)
}catch(b){if(b.code==ZmCsfeException.ACCT_NO_SUCH_ACCOUNT){if(ZaApp.getInstance()&&ZaApp.getInstance().getCurrentController()){ZaApp.getInstance().getCurrentController().popupErrorDialog(AjxMessageFormat.format(ZaMsg.ERROR_GALSYNC_ACCOUNT_INVALID,[this.name,this.attrs[ZaDomain.A_zimbraGalAccountId][c]]),b,true)
}}else{if(ZaApp.getInstance()&&ZaApp.getInstance().getCurrentController()){ZaApp.getInstance().getCurrentController()._handleException(b,"ZaDomain.loadDataSources",null,false)
}}}}}};
ZaItem.loadMethods.ZaDomain.push(ZaDomain.loadDataSources);
ZaDomain.loadNotebookACLs=function(f,h){if(this.attrs[ZaDomain.A_zimbraDomainStatus]!=ZaDomain.DOMAIN_STATUS_MAINTENANCE&&this.attrs[ZaDomain.A_zimbraDomainStatus]!=ZaDomain.DOMAIN_STATUS_SUSPENDED){if(this.attrs[ZaDomain.A_zimbraNotebookAccount]){var d=AjxSoapDoc.create("GetFolderRequest","urn:zimbraMail",null);
var b=new ZmCsfeCommand();
var g=new Object();
g.soapDoc=d;
g.noAuthToken=true;
g.accountName=this.attrs[ZaDomain.A_zimbraNotebookAccount];
var e=d.set("folder","");
e.setAttribute("l",ZaDomain.WIKI_FOLDER_ID);
try{this.parseNotebookFolderAcls(b.invoke(g))
}catch(c){ZaApp.getInstance().getCurrentController()._handleException(c,"ZaDomain.loadMethod",null,false)
}}}};
ZaItem.loadMethods.ZaDomain.push(ZaDomain.loadNotebookACLs);
ZaDomain.loadCatchAll=function(){if((this.attrs[ZaDomain.A_zimbraAdminConsoleCatchAllAddressEnabled]&&this.attrs[ZaDomain.A_zimbraAdminConsoleCatchAllAddressEnabled]=="TRUE")||(AjxUtil.isEmpty(this.attrs[ZaDomain.A_zimbraAdminConsoleCatchAllAddressEnabled])&&(!AjxUtil.isEmpty(this._defaultValues.attrs[ZaDomain.A_zimbraAdminConsoleCatchAllAddressEnabled])&&this._defaultValues.attrs[ZaDomain.A_zimbraAdminConsoleCatchAllAddressEnabled]=="TRUE"))){var b=ZaAccount.getCatchAllAccount(this.name);
if(!AjxUtil.isEmpty(b)&&!AjxUtil.isEmpty(b.id)&&!AjxUtil.isEmpty(b.name)){this[ZaAccount.A_zimbraMailCatchAllAddress]=b
}else{this[ZaAccount.A_zimbraMailCatchAllAddress]=null
}}else{this[ZaAccount.A_zimbraMailCatchAllAddress]=null
}};
ZaItem.loadMethods.ZaDomain.push(ZaDomain.loadCatchAll);
ZaDomain.checkDomainMXRecord=function(e,g){var d=AjxSoapDoc.create("CheckDomainMXRecordRequest",ZaZimbraAdmin.URN,null);
var b=d.set("domain",e.id);
b.setAttribute("by","id");
var f=new Object();
f.soapDoc=d;
if(g){f.asyncMode=true;
f.callback=g
}var c={controller:(ZaApp.getInstance()?ZaApp.getInstance().getCurrentController():null),busyMsg:ZaMsg.BUSY_CHECKING_MX};
ZaRequestMgr.invoke(f,c)
};
ZaDomain.aclXModel={items:[{id:"acl",type:_OBJECT_,items:[{id:"r",type:_NUMBER_},{id:"w",type:_NUMBER_},{id:"d",type:_NUMBER_},{id:"i",type:_NUMBER_},{id:"a",type:_NUMBER_},{id:"x",type:_NUMBER_}]},{id:"name",type:_STRING_},{id:"gt",type:_STRING_}]};
ZaDomain.myXModel={items:[{id:"getAttrs",type:_LIST_},{id:"setAttrs",type:_LIST_},{id:"rights",type:_LIST_},{id:"name",type:_STRING_,ref:"name"},{id:ZaItem.A_zimbraId,type:_STRING_,ref:"attrs/"+ZaItem.A_zimbraId},{id:ZaItem.A_zimbraDomainAliasTargetId,type:_STRING_,ref:"attrs/"+ZaItem.A_zimbraDomainAliasTargetId},{id:ZaItem.A_zimbraCreateTimestamp,ref:"attrs/"+ZaItem.A_zimbraCreateTimestamp},{id:ZaDomain.A_domainName,type:_STRING_,ref:"attrs/"+ZaDomain.A_domainName,maxLength:255,constraints:{type:"method",value:function(b){b=b.replace(/(^\s*)/g,"");
return b
}}},{id:ZaDomain.A_zimbraPublicServiceHostname,type:_STRING_,ref:"attrs/"+ZaDomain.A_zimbraPublicServiceHostname,maxLength:255},{id:ZaDomain.A_zimbraPublicServiceProtocol,type:_STRING_,ref:"attrs/"+ZaDomain.A_zimbraPublicServiceProtocol,maxLength:255,defaultValue:"http"},{id:ZaDomain.A_zimbraPublicServicePort,type:_NUMBER_,ref:"attrs/"+ZaDomain.A_zimbraPublicServicePort,minInclusive:0,maxInclusive:65535,defaultValue:80},{id:ZaDomain.A_zimbraDNSCheckHostname,type:_COS_STRING_,ref:"attrs/"+ZaDomain.A_zimbraDNSCheckHostname,maxLength:255},{id:ZaDomain.A_zimbraBasicAuthRealm,type:_COS_STRING_,ref:"attrs/"+ZaDomain.A_zimbraBasicAuthRealm,maxLength:255},{id:ZaDomain.A_zimbraAdminConsoleDNSCheckEnabled,type:_COS_ENUM_,choices:ZaModel.BOOLEAN_CHOICES,ref:"attrs/"+ZaDomain.A_zimbraAdminConsoleDNSCheckEnabled},{id:ZaDomain.A_zimbraAdminConsoleCatchAllAddressEnabled,type:_COS_ENUM_,choices:ZaModel.BOOLEAN_CHOICES,ref:"attrs/"+ZaDomain.A_zimbraAdminConsoleCatchAllAddressEnabled},{id:ZaDomain.A_zimbraAdminConsoleLDAPAuthEnabled,type:_COS_ENUM_,choices:ZaModel.BOOLEAN_CHOICES,ref:"attrs/"+ZaDomain.A_zimbraAdminConsoleLDAPAuthEnabled},{id:ZaDomain.A_zimbraAdminConsoleSkinEnabled,type:_COS_ENUM_,choices:ZaModel.BOOLEAN_CHOICES,ref:"attrs/"+ZaDomain.A_zimbraAdminSkinAddressEnabled},{id:ZaDomain.A_zimbraMailAddressValidationRegex,type:_LIST_,listItem:{type:_STRING_,maxLength:512},ref:"attrs/"+ZaDomain.A_zimbraMailAddressValidationRegex},{id:ZaDomain.A_zimbraSieveRejectMailEnabled,type:_ENUM_,ref:"attrs/"+ZaDomain.A_zimbraSieveRejectMailEnabled,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaDomain.A_zimbraSieveEditHeaderEnabled,type:_ENUM_,ref:"attrs/"+ZaDomain.A_zimbraSieveEditHeaderEnabled,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaDomain.A_zimbraAdminSieveScriptBefore,type:_STRING_,ref:"attrs/"+ZaDomain.A_zimbraAdminSieveScriptBefore},{id:ZaDomain.A_zimbraAdminSieveScriptAfter,type:_STRING_,ref:"attrs/"+ZaDomain.A_zimbraAdminSieveScriptAfter},{id:ZaDomain.A_zimbraVirtualHostname,type:_LIST_,listItem:{type:_STRING_,maxLength:255},ref:"attrs/"+ZaDomain.A_zimbraVirtualHostname},ZaItem.descriptionModelItem,{id:ZaDomain.A_zimbraSSLCertificate,type:_STRING_,ref:"attrs/"+ZaDomain.A_zimbraSSLCertificate},{id:ZaDomain.A_zimbraSSLPrivateKey,type:_STRING_,ref:"attrs/"+ZaDomain.A_zimbraSSLPrivateKey},{id:ZaDomain.A_notes,type:_STRING_,ref:"attrs/"+ZaDomain.A_notes},{id:ZaDomain.A_domainDefaultCOSId,type:_STRING_,ref:"attrs/"+ZaDomain.A_domainDefaultCOSId},{id:ZaDomain.A_zimbraGalMode,type:_STRING_,ref:"attrs/"+ZaDomain.A_zimbraGalMode},{id:ZaDomain.A_mailHost,type:_STRING_,ref:"attrs/"+ZaDomain.A_mailHost},{id:ZaDomain.A_zimbraGalMaxResults,type:_NUMBER_,ref:"attrs/"+ZaDomain.A_zimbraGalMaxResults,maxInclusive:2147483647,minInclusive:1},{id:ZaDomain.A_GALServerType,type:_STRING_,ref:"attrs/"+ZaDomain.A_GALServerType},{id:ZaDomain.A_GALSyncServerType,type:_STRING_,ref:"attrs/"+ZaDomain.A_GALSyncServerType},{id:ZaDomain.A_GALSyncUseGALSearch,type:_ENUM_,choices:ZaModel.BOOLEAN_CHOICES,ref:"attrs/"+ZaDomain.A_GALSyncUseGALSearch},{id:ZaDomain.A_zimbraGalSyncLdapBindDn,type:_STRING_,ref:"attrs/"+ZaDomain.A_zimbraGalSyncLdapBindDn},{id:ZaDomain.A_zimbraGalSyncLdapBindPassword,type:_STRING_,ref:"attrs/"+ZaDomain.A_zimbraGalSyncLdapBindPassword},{id:ZaDomain.A_zimbraGalSyncLdapSearchBase,type:_STRING_,ref:"attrs/"+ZaDomain.A_zimbraGalSyncLdapSearchBase},{id:ZaDomain.A_zimbraGalSyncLdapFilter,type:_STRING_,ref:"attrs/"+ZaDomain.A_zimbraGalSyncLdapFilter,required:true},{id:ZaDomain.A_GalLdapFilter,type:_STRING_,ref:"attrs/"+ZaDomain.A_GalLdapFilter,required:true},{id:ZaDomain.A_zimbraGalAutoCompleteLdapFilter,type:_STRING_,ref:"attrs/"+ZaDomain.A_zimbraGalAutoCompleteLdapFilter},{id:ZaDomain.A_GalLdapSearchBase,type:_STRING_,ref:"attrs/"+ZaDomain.A_GalLdapSearchBase},{id:ZaDomain.A_UseBindPassword,type:_ENUM_,choices:ZaModel.BOOLEAN_CHOICES,ref:"attrs/"+ZaDomain.A_UseBindPassword},{id:ZaDomain.A_SyncUseBindPassword,type:_ENUM_,choices:ZaModel.BOOLEAN_CHOICES,ref:"attrs/"+ZaDomain.A_SyncUseBindPassword},{id:ZaDomain.A_GalLdapURL,type:_LIST_,listItem:{type:_SHORT_URL_},ref:"attrs/"+ZaDomain.A_GalLdapURL},{id:ZaDomain.A_zimbraGalSyncLdapURL,type:_LIST_,listItem:{type:_SHORT_URL_},ref:"attrs/"+ZaDomain.A_zimbraGalSyncLdapURL},{id:ZaDomain.A_GalLdapBindDn,type:_STRING_,ref:"attrs/"+ZaDomain.A_GalLdapBindDn},{id:ZaDomain.A_GalLdapBindPassword,type:_STRING_,ref:"attrs/"+ZaDomain.A_GalLdapBindPassword},{id:ZaDomain.A_GalLdapBindPasswordConfirm,type:_STRING_,ref:"attrs/"+ZaDomain.A_GalLdapBindPasswordConfirm},{id:ZaDomain.A_zimbraGalAccountId,type:_LIST_,listItem:{type:_STRING_},ref:"attrs/"+ZaDomain.A_zimbraGalAccountId},{id:ZaDomain.A2_create_gal_acc,type:_ENUM_,choices:ZaModel.BOOLEAN_CHOICES,ref:ZaDomain.A2_create_gal_acc},{id:ZaDomain.A2_gal_sync_accounts_set,type:_LIST_,ref:ZaDomain.A2_gal_sync_accounts_set,listItem:{type:_OBJECT_,ref:".",items:[{id:ZaDomain.A2_new_gal_sync_account_name,type:_STRING_,ref:ZaDomain.A2_new_gal_sync_account_name,defaultValue:"galsync"},{id:ZaDomain.A2_new_internal_gal_ds_name,type:_STRING_,ref:ZaDomain.A2_new_internal_gal_ds_name,defaultValue:"zimbra"},{id:ZaDomain.A2_new_external_gal_ds_name,type:_STRING_,ref:ZaDomain.A2_new_external_gal_ds_name,defaultValue:"ldap"},{id:ZaDomain.A2_new_internal_gal_polling_interval,type:_MINTERVAL_,ref:ZaDomain.A2_new_internal_gal_polling_interval,defaultValue:"1d"},{id:ZaDomain.A2_new_external_gal_polling_interval,type:_MINTERVAL_,ref:ZaDomain.A2_new_external_gal_polling_interval,defaultValue:"1d"}]}},{id:ZaDomain.A2_gal_sync_accounts,type:_LIST_,listItem:{type:_OBJECT_,items:ZaAccount.myXModel.items},ref:ZaDomain.A2_gal_sync_accounts},{id:ZaDomain.A_AuthLdapUserDn,type:_STRING_,ref:"attrs/"+ZaDomain.A_AuthLdapUserDn},{id:ZaDomain.A_zimbraAuthLdapStartTlsEnabled,type:_ENUM_,choices:ZaModel.BOOLEAN_CHOICES,ref:"attrs/"+ZaDomain.A_zimbraAuthLdapStartTlsEnabled},{id:ZaDomain.A_AuthLDAPSearchBase,type:_STRING_,ref:"attrs/"+ZaDomain.A_AuthLDAPSearchBase},{id:ZaDomain.A_AuthMech,type:_STRING_,ref:"attrs/"+ZaDomain.A_AuthMech},{id:ZaDomain.A_AuthLdapURL,type:_LIST_,listItem:{type:_SHORT_URL_},ref:"attrs/"+ZaDomain.A_AuthLdapURL},{id:ZaDomain.A_AuthADDomainName,type:_STRING_,ref:"attrs/"+ZaDomain.A_AuthADDomainName},{id:ZaDomain.A_AuthLdapSearchBase,type:_STRING_,ref:"attrs/"+ZaDomain.A_AuthLdapSearchBase},{id:ZaDomain.A_AuthLdapSearchFilter,type:_STRING_,ref:"attrs/"+ZaDomain.A_AuthLdapSearchFilter},{id:ZaDomain.A_AuthLdapSearchBindDn,type:_STRING_,ref:"attrs/"+ZaDomain.A_AuthLdapSearchBindDn},{id:ZaDomain.A_AuthLdapSearchBindPassword,type:_STRING_,ref:"attrs/"+ZaDomain.A_AuthLdapSearchBindPassword},{id:ZaDomain.A_zimbraDomainStatus,type:_STRING_,ref:"attrs/"+ZaDomain.A_zimbraDomainStatus},{id:ZaDomain.A_AuthTestUserName,type:_STRING_},{id:ZaDomain.A_AuthTestPassword,type:_STRING_},{id:ZaDomain.A_AuthTestMessage,type:_STRING_},{id:ZaDomain.A_AuthTestResultCode,type:_STRING_},{id:ZaDomain.A_AuthTestMessage,type:_STRING_},{id:ZaDomain.A_AuthComputedBindDn,type:_STRING_},{id:ZaDomain.A_zimbraPasswordChangeListener,type:_STRING_,ref:"attrs/"+ZaDomain.A_zimbraPasswordChangeListener},{id:ZaDomain.A_zimbraAuthFallbackToLocal,type:_ENUM_,ref:"attrs/"+ZaDomain.A_zimbraAuthFallbackToLocal,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaDomain.A_GALSearchTestMessage,type:_STRING_},{id:ZaDomain.A_GALSyncTestMessage,type:_STRING_},{id:ZaDomain.A_GALSearchTestResultCode,type:_STRING_},{id:ZaDomain.A_GALSyncTestResultCode,type:_STRING_},{id:ZaDomain.A_GALSampleQuery,type:_STRING_,required:true},{id:ZaDomain.A_AuthUseBindPassword,type:_STRING_,type:_ENUM_,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaDomain.A_AuthLdapSearchBindPasswordConfirm,type:_STRING_},{id:ZaDomain.A_zimbraAutoProvLdapURL,type:_STRING_,ref:"attrs/"+ZaDomain.A_zimbraAutoProvLdapURL,maxLength:256},{id:ZaDomain.A_zimbraAutoProvLdapStartTlsEnabled,type:_ENUM_,choices:ZaModel.BOOLEAN_CHOICES,ref:"attrs/"+ZaDomain.A_zimbraAutoProvLdapStartTlsEnabled},{id:ZaDomain.A_zimbraAutoProvLdapAdminBindDn,type:_STRING_,ref:"attrs/"+ZaDomain.A_zimbraAutoProvLdapAdminBindDn,maxLength:256},{id:ZaDomain.A_zimbraAutoProvLdapAdminBindPassword,type:_STRING_,ref:"attrs/"+ZaDomain.A_zimbraAutoProvLdapAdminBindPassword,maxLength:256},{id:ZaDomain.A_zimbraAutoProvLdapSearchBase,type:_STRING_,ref:"attrs/"+ZaDomain.A_zimbraAutoProvLdapSearchBase,maxLength:256},{id:ZaDomain.A_zimbraAutoProvLdapSearchFilter,type:_STRING_,ref:"attrs/"+ZaDomain.A_zimbraAutoProvLdapSearchFilter,maxLength:256},{id:ZaDomain.A_zimbraAutoProvLdapBindDn,type:_STRING_,ref:"attrs/"+ZaDomain.A_zimbraAutoProvLdapBindDn,maxLength:256},{id:ZaDomain.A_zimbraAutoProvAccountNameMap,type:_STRING_,ref:"attrs/"+ZaDomain.A_zimbraAutoProvAccountNameMap,maxLength:256},{id:ZaDomain.A_zimbraAutoProvNotificationFromAddress,type:_EMAIL_ADDRESS_,ref:"attrs/"+ZaDomain.A_zimbraAutoProvNotificationFromAddress,maxLength:256},{id:ZaDomain.A_zimbraAutoProvBatchSize,type:_NUMBER_,ref:"attrs/"+ZaDomain.A_zimbraAutoProvBatchSize,maxInclusive:2147483647,minInclusive:0},{id:ZaDomain.A_zimbraAutoProvLastPolledTimestamp,type:_STRING_,ref:"attrs/"+ZaDomain.A_zimbraAutoProvLastPolledTimestamp,maxLength:256},{id:ZaDomain.A_zimbraAutoProvAttrMap,type:_LIST_,listItem:{type:_STRING_,maxLength:255},ref:"attrs/"+ZaDomain.A_zimbraAutoProvAttrMap},{id:ZaDomain.A2_zimbraAutoProvModeEAGEREnabled,type:_ENUM_,choices:ZaModel.BOOLEAN_CHOICES,ref:ZaDomain.A2_zimbraAutoProvModeEAGEREnabled},{id:ZaDomain.A2_zimbraAutoProvModeLAZYEnabled,type:_ENUM_,choices:ZaModel.BOOLEAN_CHOICES,ref:ZaDomain.A2_zimbraAutoProvModeLAZYEnabled},{id:ZaDomain.A2_zimbraAutoProvModeMANUALEnabled,type:_ENUM_,choices:ZaModel.BOOLEAN_CHOICES,ref:ZaDomain.A2_zimbraAutoProvModeMANUALEnabled},{id:ZaDomain.A2_zimbraAutoProvAuthMechLDAPEnabled,type:_ENUM_,choices:ZaModel.BOOLEAN_CHOICES,ref:ZaDomain.A2_zimbraAutoProvAuthMechLDAPEnabled},{id:ZaDomain.A2_zimbraAutoProvAuthMechPREAUTHEnabled,type:_ENUM_,choices:ZaModel.BOOLEAN_CHOICES,ref:ZaDomain.A2_zimbraAutoProvAuthMechPREAUTHEnabled},{id:ZaDomain.A2_zimbraAutoProvAuthMechKRB5Enabled,type:_ENUM_,choices:ZaModel.BOOLEAN_CHOICES,ref:ZaDomain.A2_zimbraAutoProvAuthMechKRB5Enabled},{id:ZaDomain.A2_zimbraAutoProvAuthMechSPNEGOEnabled,type:_ENUM_,choices:ZaModel.BOOLEAN_CHOICES,ref:ZaDomain.A2_zimbraAutoProvAuthMechSPNEGOEnabled},{id:ZaDomain.A2_zimbraAutoProvServerList,type:_LIST_,ref:ZaDomain.A2_zimbraAutoProvServerList},{id:ZaDomain.A2_zimbraAutoProvSelectedServerList,type:_LIST_},{id:ZaDomain.A2_zimbraAutoProvPollingInterval,ref:ZaDomain.A2_zimbraAutoProvPollingInterval,type:_MINTERVAL_,minInclusive:0},{id:ZaDomain.A2_zimbraAutoProvSearchActivated,type:_ENUM_,choices:ZaModel.BOOLEAN_CHOICES,ref:ZaDomain.A2_zimbraAutoProvSearchActivated},{id:ZaDomain.A2_zimbraAutoProvAccountPool,type:_LIST_,ref:ZaDomain.A2_zimbraAutoProvAccountPool},{id:ZaDomain.A2_zimbraAutoProvAccountPoolPageNum,ref:ZaDomain.A2_zimbraAutoProvAccountPoolPageNum,type:_NUMBER_,defaultValue:1},{id:ZaDomain.A2_zimbraAutoProvAccountSrcSelectedPool,type:_LIST_,ref:ZaDomain.A2_zimbraAutoProvAccountSrcSelectedPool},{id:ZaDomain.A2_zimbraAutoProvAccountTargetPool,type:_LIST_,ref:ZaDomain.A2_zimbraAutoProvAccountTargetPool},{id:ZaDomain.A2_zimbraAutoProvAccountTgtSelectedPool,type:_LIST_,ref:ZaDomain.A2_zimbraAutoProvAccountTgtSelectedPool},{id:ZaDomain.A2_zimbraAutoProvAccountPoolPageTotal,ref:ZaDomain.A2_zimbraAutoProvAccountPoolPageTotal,type:_NUMBER_,defaultValue:1},{id:ZaDomain.A2_zimbraAutoProvAccountPassword,type:_STRING_,ref:ZaDomain.A2_zimbraAutoProvAccountPassword,maxLength:256},{id:ZaDomain.A_domainMaxAccounts,type:_INT_,ref:"attrs/"+ZaDomain.A_domainMaxAccounts,minInclusive:0},{id:ZaDomain.A_zimbraMailDomainQuota,type:_NUMBER_,ref:"attrs/"+ZaDomain.A_zimbraMailDomainQuota,minInclusive:0},{id:ZaDomain.A_zimbraDomainAggregateQuota,type:_NUMBER_,ref:"attrs/"+ZaDomain.A_zimbraDomainAggregateQuota,minInclusive:0},{id:ZaDomain.A_zimbraDomainAggregateQuotaWarnPercent,type:_NUMBER_,ref:"attrs/"+ZaDomain.A_zimbraDomainAggregateQuotaWarnPercent,maxInclusive:100,minInclusive:0},{id:ZaDomain.A_zimbraDomainAggregateQuotaWarnEmailRecipient,type:_EMAIL_ADDRESS_,ref:"attrs/"+ZaDomain.A_zimbraDomainAggregateQuotaWarnEmailRecipient},{id:ZaDomain.A_zimbraDomainAggregateQuotaPolicy,type:_ENUM_,ref:"attrs/"+ZaDomain.A_zimbraDomainAggregateQuotaPolicy,choices:ZaDomain.aggregateQuotaPolicyChoices},{id:ZaDomain.A_zimbraPrefTimeZoneId,type:_STRING_,ref:"attrs/"+ZaDomain.A_zimbraPrefTimeZoneId,choices:ZaSettings.timeZoneChoices},{id:ZaModel.currentStep,type:_NUMBER_,ref:ZaModel.currentStep,maxInclusive:2147483647},{id:ZaDomain.A2_acl_selection_cache,type:_LIST_},{id:ZaDomain.A_GALTestSearchResults,ref:ZaDomain.A_GALTestSearchResults,type:_LIST_,listItem:{type:_OBJECT_,items:[{id:"email",type:_STRING_},{id:"fullName",type:_STRING_},{id:"firstName",type:_STRING_},{id:"lastName",type:_STRING_}]}},{id:ZaDomain.A_NotebookTemplateDir,type:_STRING_,ref:ZaDomain.A_NotebookTemplateDir},{id:ZaDomain.A_NotebookTemplateFolder,type:_STRING_,ref:ZaDomain.A_NotebookTemplateFolder},{id:ZaDomain.A_NotebookAccountPassword,type:_STRING_},{id:ZaDomain.A_NotebookAccountPassword2,type:_STRING_},{id:ZaDomain.A_CreateNotebook,type:_ENUM_,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaDomain.A_OverwriteTemplates,type:_ENUM_,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaDomain.A_zimbraNotebookAccount,type:_STRING_,ref:"attrs/"+ZaDomain.A_zimbraNotebookAccount},{id:ZaDomain.A_NotebookAllACLs,ref:"notebookAcls/"+ZaDomain.A_NotebookAllACLs,type:_OBJECT_,items:[{id:"r",type:_NUMBER_},{id:"w",type:_NUMBER_},{id:"d",type:_NUMBER_},{id:"i",type:_NUMBER_},{id:"a",type:_NUMBER_},{id:"x",type:_NUMBER_}]},{id:ZaDomain.A_NotebookDomainACLs,ref:"notebookAcls/"+ZaDomain.A_NotebookDomainACLs,type:_OBJECT_,items:[{id:"r",type:_NUMBER_},{id:"w",type:_NUMBER_},{id:"d",type:_NUMBER_},{id:"i",type:_NUMBER_},{id:"a",type:_NUMBER_},{id:"x",type:_NUMBER_}]},{id:ZaDomain.A_NotebookPublicACLs,ref:"notebookAcls/"+ZaDomain.A_NotebookPublicACLs,type:_OBJECT_,items:[{id:"r",type:_NUMBER_},{id:"w",type:_NUMBER_},{id:"d",type:_NUMBER_},{id:"i",type:_NUMBER_},{id:"a",type:_NUMBER_},{id:"x",type:_NUMBER_}]},{id:ZaDomain.A_NotebookGroupACLs,ref:"notebookAcls/"+ZaDomain.A_NotebookGroupACLs,type:_LIST_,listItem:{type:_OBJECT_,items:[{id:"acl",type:_OBJECT_,items:[{id:"r",type:_NUMBER_},{id:"w",type:_NUMBER_},{id:"d",type:_NUMBER_},{id:"i",type:_NUMBER_},{id:"a",type:_NUMBER_},{id:"x",type:_NUMBER_}]},{id:"name",type:_STRING_},{id:"gt",type:_STRING_}]}},{id:ZaDomain.A_NotebookUserACLs,ref:"notebookAcls/"+ZaDomain.A_NotebookUserACLs,type:_LIST_,listItem:{type:_OBJECT_,items:[{id:"acl",type:_OBJECT_,items:[{id:"r",type:_NUMBER_},{id:"w",type:_NUMBER_},{id:"d",type:_NUMBER_},{id:"i",type:_NUMBER_},{id:"a",type:_NUMBER_},{id:"x",type:_NUMBER_}]},{id:"name",type:_STRING_},{id:"gt",type:_STRING_}]}},{id:ZaDomain.A_allNotebookACLS,ref:ZaDomain.A_allNotebookACLS,type:_LIST_,listItem:{type:_OBJECT_,items:[{id:"acl",type:_OBJECT_,items:[{id:"r",type:_NUMBER_},{id:"w",type:_NUMBER_},{id:"d",type:_NUMBER_},{id:"i",type:_NUMBER_},{id:"a",type:_NUMBER_},{id:"x",type:_NUMBER_}]},{id:"name",type:_STRING_},{id:"gt",type:_STRING_}]}},{id:ZaDomain.A_zimbraZimletDomainAvailableZimlets,type:_LIST_,ref:"attrs/"+ZaDomain.A_zimbraZimletDomainAvailableZimlets,dataType:_STRING_,outputType:_LIST_},{id:ZaAccount.A_zimbraMailCatchAllAddress,ref:ZaAccount.A_zimbraMailCatchAllAddress,type:_OBJECT_,items:[{id:"id",type:_STRING_},{id:"name",type:_STRING_}]},{id:ZaDomain.A_zimbraDomainCOSMaxAccounts,ref:"attrs/"+ZaDomain.A_zimbraDomainCOSMaxAccounts,type:_LIST_,dataType:_STRING_,outputType:_LIST_},{id:ZaDomain.A_zimbraDomainFeatureMaxAccounts,ref:"attrs/"+ZaDomain.A_zimbraDomainFeatureMaxAccounts,type:_LIST_,dataType:_STRING_,outputType:_LIST_},{id:ZaDomain.A2_domain_account_quota,ref:ZaDomain.A2_domain_account_quota,type:_LIST_,listItem:{type:_OBJECT_}},{id:ZaDomain.A_zimbraSkinForegroundColor,ref:"attrs/"+ZaDomain.A_zimbraSkinForegroundColor,type:_COS_STRING_},{id:ZaDomain.A_zimbraSkinBackgroundColor,ref:"attrs/"+ZaDomain.A_zimbraSkinBackgroundColor,type:_COS_STRING_},{id:ZaDomain.A_zimbraSkinSecondaryColor,ref:"attrs/"+ZaDomain.A_zimbraSkinSecondaryColor,type:_COS_STRING_},{id:ZaDomain.A_zimbraSkinSelectionColor,ref:"attrs/"+ZaDomain.A_zimbraSkinSelectionColor,type:_COS_STRING_},{id:ZaDomain.A_zimbraSkinLogoURL,ref:"attrs/"+ZaDomain.A_zimbraSkinLogoURL,type:_COS_STRING_},{id:ZaDomain.A_zimbraSkinLogoLoginBanner,ref:"attrs/"+ZaDomain.A_zimbraSkinLogoLoginBanner,type:_COS_STRING_},{id:ZaDomain.A_zimbraSkinLogoAppBanner,ref:"attrs/"+ZaDomain.A_zimbraSkinLogoAppBanner,type:_COS_STRING_},{id:ZaDomain.A_zimbraWebClientLoginURL,ref:"attrs/"+ZaDomain.A_zimbraWebClientLoginURL,type:_COS_STRING_},{id:ZaDomain.A_zimbraWebClientLogoutURL,ref:"attrs/"+ZaDomain.A_zimbraWebClientLogoutURL,type:_COS_STRING_},{id:ZaDomain.A_zimbraForceClearCookies,ref:"attrs/"+ZaDomain.A_zimbraForceClearCookies,type:_ENUM_,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaDomain.A_zimbraReverseProxyClientCertMode,ref:"attrs/"+ZaDomain.A_zimbraReverseProxyClientCertMode,type:_COS_STRING_,choices:["on","off","optional"]},{id:ZaDomain.A_zimbraMailSSLClientCertPrincipalMap,ref:"attrs/"+ZaDomain.A_zimbraMailSSLClientCertPrincipalMap,type:_COS_STRING_},{id:ZaDomain.A_zimbraReverseProxyClientCertCA,ref:"attrs/"+ZaDomain.A_zimbraReverseProxyClientCertCA,type:_COS_STRING_},{id:ZaDomain.A_zimbraHelpAdminURL,ref:"attrs/"+ZaDomain.A_zimbraHelpAdminURL,type:_COS_STRING_},{id:ZaDomain.A_zimbraHelpDelegatedURL,ref:"attrs/"+ZaDomain.A_zimbraHelpDelegatedURL,type:_COS_STRING_},{id:ZaDomain.A_zimbraAdminConsoleLoginURL,ref:"attrs/"+ZaDomain.A_zimbraAdminConsoleLoginURL,type:_COS_STRING_},{id:ZaDomain.A_zimbraAdminConsoleLogoutURL,ref:"attrs/"+ZaDomain.A_zimbraAdminConsoleLogoutURL,type:_COS_STRING_},{id:ZaDomain.A_zimbraWebClientLoginURLAllowedUA,type:_COS_LIST_,ref:"attrs/"+ZaDomain.A_zimbraWebClientLoginURLAllowedUA,listItem:{type:_STRING_}},{id:ZaDomain.A_zimbraWebClientLogoutURLAllowedUA,type:_COS_LIST_,ref:"attrs/"+ZaDomain.A_zimbraWebClientLogoutURLAllowedUA,listItem:{type:_STRING_}},{id:ZaDomain.A_zimbraWebClientLoginURLAllowedIP,type:_COS_LIST_,ref:"attrs/"+ZaDomain.A_zimbraWebClientLoginURLAllowedIP,listItem:{type:_STRING_}},{id:ZaDomain.A_zimbraWebClientLogoutURLAllowedIP,type:_COS_LIST_,ref:"attrs/"+ZaDomain.A_zimbraWebClientLogoutURLAllowedIP,listItem:{type:_STRING_}},{id:ZaDomain.A_zimbraAuthKerberos5Realm,type:_STRING_,ref:"attrs/"+ZaDomain.A_zimbraAuthKerberos5Realm},{id:ZaDomain.A_zimbraFreebusyExchangeAuthUsername,ref:"attrs/"+ZaDomain.A_zimbraFreebusyExchangeAuthUsername,type:_COS_STRING_},{id:ZaDomain.A_zimbraFreebusyExchangeAuthPassword,ref:"attrs/"+ZaDomain.A_zimbraFreebusyExchangeAuthPassword,type:_COS_STRING_},{id:ZaDomain.A_zimbraFreebusyExchangeAuthScheme,ref:"attrs/"+ZaDomain.A_zimbraFreebusyExchangeAuthScheme,type:_COS_ENUM_,choices:ZaSettings.authorizationScheme},{id:ZaDomain.A_zimbraFreebusyExchangeServerType,ref:"attrs/"+ZaDomain.A_zimbraFreebusyExchangeServerType,type:_COS_ENUM_,choices:ZaSettings.exchangeServerType},{id:ZaDomain.A_zimbraFreebusyExchangeURL,ref:"attrs/"+ZaDomain.A_zimbraFreebusyExchangeURL,type:_COS_STRING_},{id:ZaDomain.A_zimbraFreebusyExchangeUserOrg,ref:"attrs/"+ZaDomain.A_zimbraFreebusyExchangeUserOrg,type:_COS_STRING_},{id:ZaDomain.A2_isTestingGAL,ref:ZaDomain.A2_isTestingGAL,type:_NUMBER_},{id:ZaDomain.A2_isTestingSync,ref:ZaDomain.A2_isTestingSync,type:_NUMBER_},{id:ZaDomain.A2_isTestingAuth,ref:ZaDomain.A2_isTestingAuth,type:_NUMBER_},{id:ZaDomain.A_zimbraFeatureCalendarReminderDeviceEmailEnabled,type:_ENUM_,choices:ZaModel.BOOLEAN_CHOICES,ref:"attrs/"+ZaDomain.A_zimbraFeatureCalendarReminderDeviceEmailEnabled},{id:ZaDomain.A_zimbraAutoProvNotificationSubject,type:_COS_STRING_,ref:"attrs/"+ZaDomain.A_zimbraAutoProvNotificationSubject},{id:ZaDomain.A_zimbraAutoProvNotificationBody,type:_COS_STRING_,ref:"attrs/"+ZaDomain.A_zimbraAutoProvNotificationBody}]};
ZaDomain.prototype.getUsedDomainAccounts=function(){var e=0;
var b=this.getAccountCountsByCoses();
if(b&&b.length>0){for(var c=0;
c<b.length;
c++){var d=b[c]._content;
e+=parseInt(d)
}}return e
};
ZaDomain.prototype.getAccountCountsByCoses=function(){try{var f=AjxSoapDoc.create("CountAccountRequest",ZaZimbraAdmin.URN,null);
var c=f.set("domain",this.name);
c.setAttribute("by","name");
var h=new Object();
h.soapDoc=f;
var e={controller:ZaApp.getInstance().getCurrentController(),busyMsg:ZaMsg.BUSY_COUNT_ACCOUNTS};
var g=ZaRequestMgr.invoke(h,e);
var b=g.Body.CountAccountResponse.cos;
return b
}catch(d){ZaApp.getInstance().getCurrentController().popupErrorDialog(AjxMessageFormat.format(ZaMsg.ERROR_GET_USED_ACCOUNTS,[this.name]),d)
}};
ZaDomain.prototype.updateUsedAccounts=function(){this.updateMaxAccounts();
var b=this.getAccountCountsByCoses();
if(b&&b.length>0){for(var c=0;
c<b.length;
c++){var d=b[c].name;
if(!this[ZaDomain.A2_account_limit][d]){this[ZaDomain.A2_account_limit][d]={}
}this[ZaDomain.A2_account_limit][d].used=parseInt(b[c]._content)
}}for(d in this[ZaDomain.A2_account_limit]){if(!this[ZaDomain.A2_account_limit][d].used){this[ZaDomain.A2_account_limit][d].used=0
}}};
ZaDomain.prototype.getUsedAccounts=function(b,c){if(!this[ZaDomain.A2_account_limit]){this[ZaDomain.A2_account_limit]={}
}if(!this[ZaDomain.A2_account_limit][b]){this[ZaDomain.A2_account_limit][b]={used:null}
}if(c||(this[ZaDomain.A2_account_limit][b].used==null)){this.updateUsedAccounts()
}if(!this[ZaDomain.A2_account_limit][b]){return 0
}else{return this[ZaDomain.A2_account_limit][b].used
}};
ZaDomain.prototype.isCosLimitInDomain=function(b){if(!this[ZaDomain.A2_account_limit]||this[ZaDomain.A2_account_limit].length<1){this.updateMaxAccounts()
}if(this[ZaDomain.A2_account_limit][b]){return true
}else{return false
}};
ZaDomain.prototype.getMaxAccounts=function(b,c){if(!this[ZaDomain.A2_account_limit]){this[ZaDomain.A2_account_limit]={}
}if(!this[ZaDomain.A2_account_limit][b]){this[ZaDomain.A2_account_limit][b]={}
}if(!this[ZaDomain.A2_account_limit][b].max||c){this.updateMaxAccounts()
}if(!this[ZaDomain.A2_account_limit][b]){return 0
}else{return this[ZaDomain.A2_account_limit][b].max
}};
ZaDomain.prototype.updateMaxAccounts=function(){this[ZaDomain.A2_account_limit]={};
var c=this.attrs[ZaDomain.A_zimbraDomainCOSMaxAccounts];
for(var b=0;
b<c.length;
b++){var e=c[b].split(":");
var d=ZaCos.getCosById(e[0]);
if(d==null){ZaApp.getInstance().getCurrentController.popupErrorDialog(AjxMessageFormat.format(ZaMsg.ERROR_INVALID_ACCOUNT_TYPE,[e[0]]));
return
}var f=d.name;
this[ZaDomain.A2_account_limit][f]={};
this[ZaDomain.A2_account_limit][f].max=e[1]
}};
ZaDomain.prototype.getAvailableAccounts=function(c,e){if(!this[ZaDomain.A2_account_limit][c]){this[ZaDomain.A2_account_limit][c]={}
}var d=this.getUsedAccounts(c,e);
var b=this.getMaxAccounts(c,e);
if(!this[ZaDomain.A2_account_limit][c]){return 0
}else{this[ZaDomain.A2_account_limit][c].available=b-d;
return this[ZaDomain.A2_account_limit][c].available
}};
ZaDomain.prototype.getAccountTypes=function(){var d=[];
var c=this.attrs[ZaDomain.A_zimbraDomainCOSMaxAccounts];
if(c&&c.length>0){for(var b=0;
b<c.length;
b++){var e=c[b].split(":");
d.push(e[0])
}}return d
};
ZaDomain.getTotalLimitsPerAccountTypes=function(c){var d=0;
if(c&&c.length>0){for(var b=0;
b<c.length;
b++){var e=c[b].split(":");
d+=new Number(e[1])
}}return d
};
ZaDomain.searchAccountsInDomain=function(e){if(e){var b=ZaApp.getInstance().getSearchListController();
var g=Dwt.getNextId();
var h=new AjxCallback(b,b.searchCallback,{limit:b.RESULTSPERPAGE,show:true,busyId:g});
b._currentQuery="";
var d=[ZaSearch.ACCOUNTS,ZaSearch.DLS,ZaSearch.ALIASES,ZaSearch.RESOURCES];
if(b.setSearchTypes){b.setSearchTypes(d)
}b._currentDomain=e;
b.fetchAttrs=AjxBuffer.concat(ZaAlias.searchAttributes,",",ZaDistributionList.searchAttributes,",",ZaResource.searchAttributes,",",ZaSearch.standardAttributes);
b._currentPageNum=1;
var f={query:b._currentQuery,domain:b._currentDomain,types:d,attrs:b.fetchAttrs,callback:h,controller:b,showBusy:true,busyId:g,busyMsg:ZaMsg.BUSY_SEARCHING,skipCallbackIfCancelled:false,isInitialRequest:true};
b.scrollSearchParams={query:b._currentQuery,domain:b._currentDomain,types:d,attrs:b.fetchAttrs,controller:b,showBusy:true,busyMsg:ZaMsg.BUSY_SEARCHING,skipCallbackIfCancelled:false};
ZaSearch.searchDirectory(f)
}else{var c=ZaApp.getInstance().getCurrentController();
c.popupErrorDialog(ZaMsg.ERROR_NO_DOMAIN_NAME)
}};
ZaDomain.prototype.createDomainAlias=function(b){var p=b.getInstance();
var n=p.attrs[ZaDomain.A_domainName];
var g=p[ZaDomain.A2_zimbraDomainAliasTarget];
try{var k=ZaDomain.getTargetDomainByName(g);
if(k==null){ZaApp.getInstance().getCurrentController().popupErrorDialog(AjxMessageFormat.format(ZaMsg.ERROR_TARGET_DOMAIN_NOT_EXIST,[g]));
return
}else{if(k.attrs[ZaDomain.A_domainType]!=ZaDomain.domainTypes.local){ZaApp.getInstance().getCurrentController().popupErrorDialog(AjxMessageFormat.format(ZaMsg.ERROR_TARGET_DOMAIN_IS_ALIAS,[g]));
return
}else{if(n==null){ZaApp.getInstance().getCurrentController().popupErrorDialog(ZaMsg.ERROR_DOMAIN_ALIAS_NOT_EXIST);
return
}}}if(!this.attrs){this.attrs={}
}this.attrs[ZaDomain.A_domainName]=n;
this.attrs[ZaDomain.A_domainType]=ZaDomain.domainTypes.alias;
this.attrs[ZaDomain.A_zimbraDomainAliasTargetId]=k.id;
this.attrs[ZaDomain.A_description]=AjxMessageFormat.format(ZaMsg.DESC_targetDomain,[g]);
this.attrs[ZaDomain.A_zimbraMailCatchAllAddress]="@"+n;
this.attrs[ZaDomain.A_zimbraMailCatchAllForwardingAddress]="@"+g;
var o=AjxSoapDoc.create("CreateDomainRequest",ZaZimbraAdmin.URN,null);
o.set("name",this.attrs[ZaDomain.A_domainName]);
var f=[ZaDomain.A_domainType,ZaDomain.A_zimbraDomainAliasTargetId,ZaDomain.A_description,ZaDomain.A_zimbraMailCatchAllAddress,ZaDomain.A_zimbraMailCatchAllForwardingAddress];
for(var h=0;
h<f.length;
h++){var m=f[h];
if(this.attrs[m]!=null){var j=o.set("a",this.attrs[m]);
j.setAttribute("n",m)
}}var e=new Object();
e.soapDoc=o;
var c={controller:ZaApp.getInstance().getCurrentController(),busyMsg:ZaMsg.BUSY_CREATE_DOMAIN};
var d=ZaRequestMgr.invoke(e,c).Body.CreateDomainResponse;
ZaApp.getInstance().getDomainListController().fireCreationEvent(this);
b.parent.popdown()
}catch(l){if(l.code==ZmCsfeException.DOMAIN_EXISTS){ZaApp.getInstance().getCurrentController().popupErrorDialog(AjxMessageFormat.format(ZaMsg.ERROR_DOMAIN_ALIAS_EXIST,[n]))
}else{ZaApp.getInstance().getCurrentController()._handleException(l,"ZaDomain.prototype.createDomainAlias",null,false)
}}};
ZaDomain.prototype.modifyDomainAlias=function(b){var n=b.getInstance();
var g=n[ZaDomain.A2_zimbraDomainAliasTarget];
if(g!=null&&(("@"+g)!=this.attrs[ZaDomain.A_zimbraMailCatchAllForwardingAddress])){var k=ZaDomain.getTargetDomainByName(g);
if(k==null){ZaApp.getInstance().getCurrentController().popupErrorDialog(AjxMessageFormat.format(ZaMsg.ERROR_TARGET_DOMAIN_NOT_EXIST,[g]));
return
}else{if(k.attrs[ZaDomain.A_domainType]!=ZaDomain.domainTypes.local){ZaApp.getInstance().getCurrentController().popupErrorDialog(AjxMessageFormat.format(ZaMsg.ERROR_TARGET_DOMAIN_IS_ALIAS,[g]));
return
}}if(!this.attrs){this.attrs={}
}this.attrs[ZaDomain.A_zimbraDomainAliasTargetId]=k.id;
this.attrs[ZaDomain.A_description]=AjxMessageFormat.format(ZaMsg.DESC_targetDomain,[g]);
this.attrs[ZaDomain.A_zimbraMailCatchAllForwardingAddress]="@"+g;
var m=AjxSoapDoc.create("ModifyDomainRequest",ZaZimbraAdmin.URN,null);
m.set("id",this.id);
var f=[ZaDomain.A_zimbraDomainAliasTargetId,ZaDomain.A_description,ZaDomain.A_zimbraMailCatchAllForwardingAddress];
for(var h=0;
h<f.length;
h++){var l=f[h];
if(this.attrs[l]!=null){var j=m.set("a",this.attrs[l]);
j.setAttribute("n",l)
}}var e=new Object();
e.soapDoc=m;
var c={controller:ZaApp.getInstance().getCurrentController(),busyMsg:ZaMsg.BUSY_MODIFY_DOMAIN};
var d=ZaRequestMgr.invoke(e,c).Body.ModifyDomainResponse;
this.oldItem=n;
ZaApp.getInstance().getDomainListController().fireChangeEvent(this)
}b.parent.popdown()
};
ZaDomain.getTargetDomainByName=function(c){var e=ZaDomain.getAll(c).getArray();
for(var b=0;
b<e.length;
b++){var d=e[b];
if(c==d.name){return d
}}return null
};
ZaDomain.globalRights={};
ZaDomain.getEffectiveDomainList=function(n){var p=AjxSoapDoc.create("GetAllEffectiveRightsRequest",ZaZimbraAdmin.URN,null);
var d=p.set("grantee",n);
d.setAttribute("type","usr");
d.setAttribute("by","id");
var e={};
e.soapDoc=p;
e.asyncMode=false;
var b={controller:ZaApp.getInstance().getCurrentController(),busyMsg:ZaMsg.BUSY_GET_EFFICIENT_DOMAIN_LIST};
var g=[];
try{var f=ZaRequestMgr.invoke(e,b);
if(!f||f.Body.GetAllEffectiveRightsResponse.Fault){return g
}var m=f.Body.GetAllEffectiveRightsResponse.target;
for(var l=0;
l<m.length;
l++){if(m[l].type!=ZaItem.DOMAIN){continue
}if(!m[l].entries&&!m[l].all){continue
}if(m[l].entries){for(var h=0;
h<m[l].entries.length;
h++){var q=m[l].entries[h].entry;
for(var c=0;
c<q.length;
c++){g.push(q[c].name)
}}}if(m[l].all){if(m[l].all.length&&m[l].all[0]&&m[l].all[0].right&&m[l].all[0].right.length){for(var h=0;
h<m[l].all[0].right.length;
h++){ZaDomain.globalRights[m[l].all[0].right[h].n]=true
}}}break
}return g
}catch(o){ZaApp.getInstance().getCurrentController()._handleException(o,"ZaDomain.getEffectiveDomainList",null,false)
}};
ZaDomain.prototype.countAllAccounts=function(){var e=AjxSoapDoc.create("SearchDirectoryRequest",ZaZimbraAdmin.URN,null);
e.getMethod().setAttribute("maxResults","0");
e.getMethod().setAttribute("limit","-1");
var f="";
var c=[ZaSearch.ACCOUNTS,ZaSearch.DLS,ZaSearch.ALIASES,ZaSearch.RESOURCES];
e.set("query",f);
e.set("types",c.toString());
e.set("domain",this.name);
var h=new ZmCsfeCommand();
var d=new Object();
d.soapDoc=e;
d.noAuthToken=true;
try{var g=h.invoke(d).Body.SearchDirectoryResponse;
if(g.searchTotal){return g.searchTotal
}else{return 0
}}catch(b){throw (b)
}return 0
};
ZaDomain.prototype.countAllAliases=function(){var e=AjxSoapDoc.create("SearchDirectoryRequest",ZaZimbraAdmin.URN,null);
e.getMethod().setAttribute("limit","1");
var f="("+ZaDomain.A_zimbraDomainAliasTargetId+"="+this.id+")";
var c=[ZaSearch.DOMAINS];
e.set("query",f);
e.set("types",c.toString());
var h=new ZmCsfeCommand();
var d=new Object();
d.soapDoc=e;
d.noAuthToken=true;
try{var g=h.invoke(d).Body.SearchDirectoryResponse;
if(g.searchTotal){return g.searchTotal
}else{return 0
}}catch(b){throw (b)
}return 0
};
ZaDomain.getRelatedList=function(c){var b=[];
var e=this.countAllAccounts();
if(e>0){var d=new ZaTreeItemData({text:ZaMsg.OVP_accounts,count:e,image:"Account",mappingId:ZaZimbraAdmin._DOMAIN_ACCOUNT_LIST_VIEW,path:c+ZaTree.SEPERATOR+this.name+ZaTree.SEPERATOR+ZaMsg.OVP_accounts});
d.setData("domainItem",this);
ZaOverviewPanelController.overviewTreeListeners[ZaZimbraAdmin._DOMAIN_ACCOUNT_LIST_VIEW]=ZaOverviewPanelController.accountListInDomainTreeListener;
b.push(d)
}e=this.countAllAliases();
if(e>0){var f=new ZaTreeItemData({text:ZaMsg.TABT_Aliases,count:e,image:"DomainAlias",mappingId:ZaZimbraAdmin._DOMAIN_ALIAS_LIST_VIEW,path:c+ZaTree.SEPERATOR+this.name+ZaTree.SEPERATOR+ZaMsg.OVP_accounts});
f.setData("domainItem",this);
ZaOverviewPanelController.overviewTreeListeners[ZaZimbraAdmin._DOMAIN_ALIAS_LIST_VIEW]=ZaOverviewPanelController.domainListTreeListener;
b.push(f)
}return b
};
ZaItem.getRelatedMethods.ZaDomain.push(ZaDomain.getRelatedList)
}if(AjxPackage.define("zimbraAdmin.search.model.ZaSearch")){ZaSearch=function(){this[ZaSearch.A_selected]=null;
this[ZaSearch.A_query]="";
this[ZaSearch.A_fAliases]="TRUE";
this[ZaSearch.A_fAccounts]="TRUE";
this[ZaSearch.A_fdistributionlists]="TRUE";
this[ZaSearch.A_fResources]="TRUE";
this[ZaSearch.A_fDomains]="TRUE";
this[ZaSearch.A_fCoses]="TRUE";
this[ZaSearch.A_pagenum]=1
};
ZaSearch.ALIASES="aliases";
ZaSearch.DLS="distributionlists";
ZaSearch.DDLS="dynamicgroups";
ZaSearch.ACCOUNTS="accounts";
ZaSearch.RESOURCES="resources";
ZaSearch.DOMAINS="domains";
ZaSearch.COSES="coses";
ZaSearch.BEST_MATCH_LIMIT=5;
ZaSearch.TYPES=new Object();
ZaSearch.TYPES[ZaItem.ALIAS]=ZaSearch.ALIASES;
ZaSearch.TYPES[ZaItem.DL]=ZaSearch.DLS;
ZaSearch.TYPES[ZaItem.ACCOUNT]=ZaSearch.ACCOUNTS;
ZaSearch.TYPES[ZaItem.RESOURCE]=ZaSearch.RESOURCES;
ZaSearch.TYPES[ZaItem.DOMAIN]=ZaSearch.DOMAINS;
ZaSearch.TYPES[ZaItem.COS]=ZaSearch.COSES;
ZaSearch.A_query="query";
ZaSearch.A_selected="selected";
ZaSearch.A_pagenum="pagenum";
ZaSearch.A_fAliases="f_aliases";
ZaSearch.A_fAccounts="f_accounts";
ZaSearch.A_fDomains="f_domains";
ZaSearch.A_fCoses="f_coses";
ZaSearch.A_fdistributionlists="f_distributionlists";
ZaSearch.A_fResources="f_resources";
ZaSearch.A_ResultMsg="resultMsg";
ZaSearch._currentQuery=null;
ZaSearch._domain=null;
ZaSearch._savedSearchToBeUpdated=true;
ZaSearch.getPredefinedSavedSearchesForAdminOnly=function(){return[{name:ZaMsg.ss_admin_account,query:"(|(zimbraIsAdminAccount=TRUE)(zimbraIsDelegatedAdminAccount=TRUE))"}]
};
ZaSearch.getPredefinedSavedSearches=function(){return[{name:ZaMsg.ss_external_accounts,query:"(zimbraIsExternalVirtualAccount=TRUE)"},{name:ZaMsg.ss_locked_out_accounts,query:"(zimbraAccountStatus=*lockout*)"},{name:ZaMsg.ss_closed_accounts,query:"(zimbraAccountStatus=*closed*)"},{name:ZaMsg.ss_maintenance_accounts,query:"(zimbraAccountStatus=*maintenance*)"},{name:ZaMsg.ss_non_active_accounts,query:"(!(zimbraAccountStatus=*active*))"},{name:ZaMsg.ss_inactive_accounts_30,query:"(zimbraLastLogonTimestamp<=###JSON:{func: ZaSearch.getTimestampByDays, args:[-30]}###)"},{name:ZaMsg.ss_inactive_accounts_90,query:"(zimbraLastLogonTimestamp<=###JSON:{func: ZaSearch.getTimestampByDays, args:[-90]}###)"}]
};
ZaSearch.getAll=function(){return ZaSearch.search("",[ZaSearch.ALIASES,ZaSearch.DLS,ZaSearch.ACCOUNTS,ZaSearch.RESOURCES,ZaSearch.DOMAINS,ZaSearch.COSES],1,ZaAccount.A_uid,true)
};
ZaSearch.standardAttributes=[ZaAccount.A_displayname,ZaItem.A_zimbraId,ZaAlias.A_AliasTargetId,ZaAccount.A_accountName,ZaAccount.A_lastName,ZaAccount.A_mailHost,ZaAccount.A_uid,ZaAccount.A_COSId,ZaAccount.A_accountStatus,ZaAccount.A_zimbraLastLogonTimestamp,ZaAccount.A_description,ZaAccount.A_zimbraIsSystemAccount,ZaAccount.A_zimbraIsDelegatedAdminAccount,ZaAccount.A_zimbraIsAdminAccount,ZaAccount.A_zimbraIsSystemResource,ZaAccount.A_zimbraAuthTokenValidityValue,ZaAccount.A_zimbraIsExternalVirtualAccount,ZaDistributionList.A_mailStatus,ZaDistributionList.A_isAdminGroup,ZaResource.A_zimbraCalResType,ZaDomain.A_domainType,ZaDomain.A_domainName,ZaDomain.A_zimbraDomainStatus].join();
ZaSearch.searchDirectory=function(b){var g=AjxSoapDoc.create("SearchDirectoryRequest",ZaZimbraAdmin.URN,null);
if(b.query){g.set("query",b.query);
ZaSearch._currentQuery=b.query
}else{g.set("query","");
ZaSearch._currentQuery=""
}var h;
if(b.isInitialRequest){var k=1+Math.floor((document.documentElement.clientHeight-100)/1000);
h=k*(b.limit||ZaAccount.RESULTSPERPAGE)
}var j=(b.sortBy!=undefined)?b.sortBy:ZaAccount.A_name;
var c=h||(b.limit!=undefined?b.limit:ZaAccount.RESULTSPERPAGE);
var d=(b.offset!=undefined)?b.offset:"0";
var e=(b.sortAscending!=null)?b.sortAscending:"1";
g.getMethod().setAttribute("offset",d);
g.getMethod().setAttribute("limit",c);
g.getMethod().setAttribute("sortBy",j);
g.getMethod().setAttribute("sortAscending",e);
if(b.applyCos){g.getMethod().setAttribute("applyCos",b.applyCos)
}else{g.getMethod().setAttribute("applyCos",false)
}if(b.applyConfig){g.getMethod().setAttribute("applyConfig",b.applyConfig)
}else{g.getMethod().setAttribute("applyConfig","false")
}if(b.domain){g.getMethod().setAttribute("domain",b.domain);
ZaSearch._domain=b.domain
}else{ZaSearch._domain=null
}if(b.attrs&&b.attrs.length>0){g.getMethod().setAttribute("attrs",b.attrs.toString())
}if(b.types&&b.types.length>0){g.getMethod().setAttribute("types",ZaSearch.checkDynamicGroupType(b.types).toString())
}if(b.maxResults){g.getMethod().setAttribute("maxResults",b.maxResults.toString())
}var l=new Object();
l.soapDoc=g;
if(b.callback){l.asyncMode=true;
l.callback=b.callback;
l.skipCallbackIfCancelled=b.skipCallbackIfCancelled
}try{return ZaRequestMgr.invoke(l,b)
}catch(f){if(b.ignoreTooManyResultsException){ZaSearch.handleTooManyResultsException(f,l.exceptionFrom||"ZaSearch.searchDirectory");
return null
}else{throw (f)
}}};
ZaSearch.checkDynamicGroupType=function(c){for(var b=0;
b<c.length;
b++){if(c[b]==ZaSearch.DLS){c.push(ZaSearch.DDLS);
return c
}}return c
};
ZaSearch.TOO_MANY_RESULTS_FLAG=false;
ZaSearch.handleTooManyResultsException=function(b,c){if(b.code==ZmCsfeException.TOO_MANY_SEARCH_RESULTS){ZaSearch.TOO_MANY_RESULTS_FLAG=true
}else{throw (b)
}};
ZaSearch.findAccount=function(f,j){var c=AjxSoapDoc.create("SearchDirectoryRequest",ZaZimbraAdmin.URN,null);
c.getMethod().setAttribute("limit","1");
var e=["(",f,"=",j,")"].join("");
c.set("query",e);
var h=new ZmCsfeCommand();
var b=new Object();
b.soapDoc=c;
b.noAuthToken=true;
var g=h.invoke(b).Body.SearchDirectoryResponse;
var d=new ZaItemList(ZaAccount);
d.loadFromJS(g);
return d.getArray()[0]
};
ZaSearch.prototype.dynSelectDataCallback=function(f,e){var g=f.callback;
if(f.busyId){ZaApp.getInstance().getAppCtxt().getShell().setBusy(false,f.busyId)
}if(!g){return
}try{if(!e){throw (new AjxException(ZaMsg.ERROR_EMPTY_RESPONSE_ARG,AjxException.UNKNOWN,"ZaListViewController.prototype.dynSelectDataCallback"))
}if(e.isException()){throw (e.getException())
}else{var b=e.getResponse().Body.SearchDirectoryResponse;
var d=new ZaItemList(null);
d.loadFromJS(b);
g.run(d.getArray(),b.more,b.searchTotal)
}}catch(c){ZaApp.getInstance().getCurrentController()._handleException(c,"ZaSearch.prototype.dynSelectDataCallback")
}};
ZaSearch.prototype.dynSelectSearchCosesCallback=function(f,e){var h=f.callback;
if(f.busyId){ZaApp.getInstance().getAppCtxt().getShell().setBusy(false,f.busyId)
}if(!h){return
}try{if(!e){throw (new AjxException(ZaMsg.ERROR_EMPTY_RESPONSE_ARG,AjxException.UNKNOWN,"ZaListViewController.prototype.dynSelectSearchCosesCallback"))
}if(e.isException()){throw (e.getException())
}else{var b=e.getResponse().Body.SearchDirectoryResponse;
var d=new ZaItemList(null);
d.loadFromJS(b);
var g=new XFormChoices([],XFormChoices.OBJECT_LIST,"id","name");
g.setChoices(d.getArray());
h.run(d.getArray(),b.more,b.searchTotal)
}}catch(c){ZaApp.getInstance().getCurrentController()._handleException(c,"ZaSearch.prototype.dynSelectSearchCosesCallback")
}};
ZaSearch.prototype.dynSelectSearch=function(f){try{var e=f.value;
var d=f.event;
var j=f.callback;
var h=Dwt.getNextId();
var g=new Object();
var c=new AjxCallback(this,this.dynSelectDataCallback,{callback:j,busyId:h});
g.types=f.types?f.types:[ZaSearch.ACCOUNTS,ZaSearch.DLS];
if(!AjxUtil.isEmpty(f.attrs)){g.attrs=f.attrs
}g.callback=c;
g.sortBy=ZaAccount.A_name;
if(f.needCategorized){g.limit=ZaSearch.BEST_MATCH_LIMIT;
g.query=ZaSearch.getBestMatchSearchByNameQuery(e,g.types)
}else{g.query=ZaSearch.getSearchByNameQuery(e,g.types)
}g.controller=ZaApp.getInstance().getCurrentController();
g.showBusy=true;
g.busyId=h;
g.busyMsg=ZaMsg.BUSY_SEARCHING;
g.skipCallbackIfCancelled=false;
if(f.domain){g.domain=f.domain
}ZaSearch.searchDirectory(g)
}catch(b){ZaApp.getInstance().getCurrentController()._handleException(b,"ZaSearch.prototype.dynSelectSearch")
}};
ZaSearch.prototype.dynSearchField=function(c){var b={};
b.value=c.value;
b.event=c.event;
b.callback=c.callback;
b.needCategorized=true;
b.types=ZaApp.getInstance().getSearchListController()._searchField.getSearchTypes();
ZaSearch.prototype.dynSelectSearch.call(this,b)
};
ZaSearch.prototype.dynSelectSearchGroups=function(f){try{var j=f.value;
var b=f.event;
var k=f.callback;
var c=f.extraLdapQuery;
var e=Dwt.getNextId();
var d=new Object();
var g=new AjxCallback(this,this.dynSelectDataCallback,{callback:k,busyId:e});
d.types=[ZaSearch.DLS];
d.callback=g;
d.sortBy=ZaAccount.A_name;
d.query=ZaSearch.getSearchByNameQuery(j,d.types);
if(c){d.query="(&"+c+d.query+")"
}d.controller=ZaApp.getInstance().getCurrentController();
d.busyId=e;
d.showBusy=true;
d.busyMsg=ZaMsg.BUSY_SEARCHING;
d.skipCallbackIfCancelled=false;
ZaSearch.searchDirectory(d)
}catch(h){ZaApp.getInstance().getCurrentController()._handleException(h,"ZaSearch.prototype.dynSelectSearchGroups")
}};
ZaSearch.prototype.dynSelectSearchDomains=function(g){try{var l=g.value;
var b=g.event;
var m=g.callback;
var j=g.applyConfig;
var f=Dwt.getNextId();
var d=new Object();
var h=new AjxCallback(this,this.dynSelectDataCallback,{callback:m,busyId:f});
d.types=[ZaSearch.DOMAINS];
d.callback=h;
d.sortBy=ZaDomain.A_domainName;
d.query="";
if(!ZaZimbraAdmin.hasGlobalDomainListAccess()){var c=ZaApp.getInstance()._domainNameList;
if(c&&c instanceof Array){for(var e=0;
e<c.length;
e++){if(!l||c[e].indexOf(l)!=-1){d.query+="("+ZaDomain.A_domainName+"="+c[e]+")"
}}if(c.length>1){d.query="(|"+d.query+")"
}}}else{d.query=ZaSearch.getSearchDomainByNameQuery(l)
}d.controller=ZaApp.getInstance().getCurrentController();
d.showBusy=true;
d.busyId=f;
d.applyConfig=j;
d.busyMsg=ZaMsg.BUSY_SEARCHING_DOMAINS;
d.skipCallbackIfCancelled=false;
d.attrs=[ZaDomain.A_domainName,ZaDomain.A_zimbraDomainStatus,ZaItem.A_zimbraId,ZaDomain.A_domainType,ZaDomain.A_zimbraMailAddressValidationRegex];
ZaSearch.searchDirectory(d)
}catch(k){ZaApp.getInstance().getCurrentController()._handleException(k,"ZaSearch.prototype.dynSelectSearchDomains")
}};
ZaSearch.prototype.dynSelectSearchOnlyDomains=function(f){try{var e=f.value;
var d=f.event;
var j=f.callback;
var h=Dwt.getNextId();
var g=new Object();
var c=new AjxCallback(this,this.dynSelectDataCallback,{callback:j,busyId:h});
g.types=[ZaSearch.DOMAINS];
g.callback=c;
g.sortBy=ZaDomain.A_domainName;
g.query=ZaSearch.getSearchOnlyDomainByNameQuery(e);
g.controller=ZaApp.getInstance().getCurrentController();
g.showBusy=true;
g.busyId=h;
g.busyMsg=ZaMsg.BUSY_SEARCHING_DOMAINS;
g.skipCallbackIfCancelled=false;
g.attrs=[ZaDomain.A_domainName,ZaDomain.A_zimbraDomainStatus,ZaItem.A_zimbraId,ZaDomain.A_domainType];
ZaSearch.searchDirectory(g)
}catch(b){ZaApp.getInstance().getCurrentController()._handleException(b,"ZaSearch.prototype.dynSelectSearchOnlyDomains")
}};
ZaSearch.prototype.dynSelectSearchCoses=function(f){try{var k=f.value;
var b=f.event;
var l=f.callback;
var e=Dwt.getNextId();
var c=new Object();
var g=new AjxCallback(this,this.dynSelectSearchCosesCallback,{callback:l,busyId:e});
c.types=[ZaSearch.COSES];
c.callback=g;
c.sortBy=ZaCos.A_name;
c.query="";
if(!ZaZimbraAdmin.hasGlobalCOSSListAccess()){var j=ZaApp.getInstance()._cosNameList;
if(j&&(j instanceof Array)&&j.length==0){for(var d=0;
d<j.length;
d++){query+="("+ZaCos.A_name+"="+j[d]+")"
}if(j.length>1){query="(|"+query+")"
}}else{c.query=ZaSearch.getSearchCosByNameQuery(k)
}}else{c.query=ZaSearch.getSearchCosByNameQuery(k)
}c.controller=ZaApp.getInstance().getCurrentController();
c.showBusy=true;
c.busyId=e;
c.busyMsg=ZaMsg.BUSY_SEARCHING_COSES;
c.skipCallbackIfCancelled=false;
ZaSearch.searchDirectory(c)
}catch(h){ZaApp.getInstance().getCurrentController()._handleException(h,"ZaSearch.prototype.dynSelectSearchCoses")
}};
ZaSearch.search=function(p,l,o,n,b,q,g,d,j){if(!n){n=ZaAccount.A_name
}var k="1";
if(!b){k="0"
}g=(g!=null)?g:ZaAccount.RESULTSPERPAGE;
var h=(o-1)*g;
q=(q!=null)?q:ZaSearch.standardAttributes;
var f={query:p,offset:h,limit:g,applyCos:"0",attrs:q,sortBy:n,sortAscending:k};
if(d!=null){f.domain=d
}if(l!=null&&l.length>0){f.types=l.toString()
}if(j){f.maxResults=j.toString()
}f.controller=ZaApp.getInstance().getCurrentController();
var e=ZaSearch.searchDirectory(f).Body.SearchDirectoryResponse;
var m=new ZaItemList(null);
m.loadFromJS(e);
var r=e.searchTotal;
var c=Math.ceil(r/g);
return{list:m,numPages:c,searchTotal:r}
};
ZaSearch.searchByDomain=function(f,e,b,g,h,d,c){return ZaSearch.search("",e,b,g,h,d,c,f)
};
ZaSearch.getObjectCountsCalback=function(h,g){var j=h.callback;
if(!j){return
}try{if(!g){throw (new AjxException(ZaMsg.ERROR_EMPTY_RESPONSE_ARG,AjxException.UNKNOWN,"ZaSearch.getObjectCountsCalback"))
}if(g.isException()){throw (g.getException())
}else{var e;
e={};
e[ZaItem.ACCOUNT]=0;
e[ZaItem.ALIAS]=0;
e[ZaItem.RESOURCE]=0;
e[ZaItem.DL]=0;
e[ZaItem.DOMAIN]=0;
e[ZaItem.SERVER]=0;
var f=g.getResponse().Body.BatchResponse;
if(f.CountObjectsResponse){for(var c=0;
c<f.CountObjectsResponse.length;
c++){g=f.CountObjectsResponse[c];
var d=g.type;
if(d=="userAccount"){d=ZaItem.ACCOUNT
}e[d]=g.num
}}j.run(e)
}}catch(b){ZaApp.getInstance().getCurrentController()._handleException(b,"ZaSearch.getObjectCountsCalback")
}};
ZaSearch.getObjectCounts=function(e,k){var d=new AjxCallback(ZaSearch.getObjectCountsCalback,{callback:k});
var j=AjxSoapDoc.create("BatchRequest","urn:zimbra");
j.setMethodAttribute("onerror","continue");
for(var c=0;
c<e.length;
c++){var g=e[c];
var h=j.set("CountObjectsRequest",null,null,ZaZimbraAdmin.URN);
if(g==ZaItem.ACCOUNT){g="userAccount"
}h.setAttribute("type",g);
if(ZaZimbraAdmin.isGlobalAdmin()===false&&g==ZaItem.DOMAIN&&ZaZimbraAdmin.currentAdminAccount.attrs[ZaAccount.A_zimbraIsDelegatedAdminAccount]==="TRUE"){h.setAttribute("onlyRelated","true")
}}try{var b=new ZmCsfeCommand();
var l=new Object();
l.noAuthToken=true;
l.soapDoc=j;
l.asyncMode=true;
l.callback=d;
b.invoke(l)
}catch(f){ZaApp.getInstance().getCurrentController()._handleException(f,"ZaSearch.getObjectCounts",null,false)
}};
ZaSearch.getSearchCosByNameQuery=function(b){if(b==null||b==""){return""
}else{b=ZaSearch.escapeLdapQuery(b);
return("(|(uid=*"+b+"*)(cn=*"+b+"*)(sn=*"+b+"*)(gn=*"+b+"*)(zimbraId="+b+"))")
}};
ZaSearch.getSearchDomainByNameQuery=function(b){if(b==null||b==""){return""
}else{b=ZaSearch.escapeLdapQuery(b);
return("(|(uid=*"+b+"*)(cn=*"+b+"*)(sn=*"+b+"*)(gn=*"+b+"*)(zimbraId="+b+")(zimbraDomainName=*"+b+"*))")
}};
ZaSearch.getSearchOnlyDomainByNameQuery=function(b){if(b==null||b==""){return""
}else{b=ZaSearch.escapeLdapQuery(b);
return("(&(|(uid=*"+b+"*)(cn=*"+b+"*)(sn=*"+b+"*)(gn=*"+b+"*)(zimbraId="+b+")(zimbraDomainName=*"+b+"*))(zimbraDomainType=local))")
}};
ZaSearch.getSearchByNameQuery=function(j,e,b){b=b?b:false;
var g=[];
if(b){g.push("(&(!(zimbraAccountStatus=closed))")
}if(!AjxUtil.isEmpty(j)){g.push("(|");
j=ZaSearch.escapeLdapQuery(j);
if(!e){e=[ZaSearch.ALIASES,ZaSearch.ACCOUNTS,ZaSearch.DLS,ZaSearch.RESOURCES,ZaSearch.DOMAINS,ZaSearch.COSES]
}var f=false;
var h=false;
var c=false;
for(var d=0;
d<e.length;
d++){if(e[d]=="domains"){g.push("(zimbraDomainName=*"+j+"*)")
}else{if(e[d]==ZaSearch.COSES){g.push("(cn=*"+j+"*)")
}else{if(e[d]==ZaSearch.ALIASES){g.push("(zimbraDomainName=*"+j+"*)(uid=*"+j+"*)")
}else{if(!f){g.push("(mail=*"+j+"*)(cn=*"+j+"*)(sn=*"+j+"*)(gn=*"+j+"*)(displayName=*"+j+"*)");
f=true
}if(!h&&(e[d]=="accounts"||e[d]=="resources")){g.push("(zimbraMailDeliveryAddress=*"+j+"*)");
h=true
}else{if(!c&&(e[d]=="distributionlists"||e[d]=="aliases")){g.push("(zimbraMailAlias=*"+j+"*)(uid=*"+j+"*)");
c=true
}}}}}}}if(b){g.push(")")
}if(!AjxUtil.isEmpty(j)){g.push(")")
}return g.join("")
};
ZaSearch.searchAliasByNameQuery=function(j,e,b){b=b?b:false;
var g=[];
if(b){g.push("(&(!(zimbraAccountStatus=closed))")
}if(!AjxUtil.isEmpty(j)){g.push("(|");
j=ZaSearch.escapeLdapQuery(j);
if(!e){e=[ZaSearch.ALIASES,ZaSearch.ACCOUNTS,ZaSearch.DLS,ZaSearch.RESOURCES,ZaSearch.DOMAINS,ZaSearch.COSES]
}var f=false;
var h=false;
var c=false;
for(var d=0;
d<e.length;
d++){if(e[d]=="domains"){g.push("(zimbraDomainName="+j+")")
}else{if(e[d]==ZaSearch.COSES){g.push("(cn="+j+")")
}else{if(e[d]==ZaSearch.ALIASES){g.push("(zimbraDomainName="+j+")(uid="+j+")")
}else{if(!f){g.push("(mail="+j+")(cn="+j+")(sn="+j+")(gn="+j+")(displayName="+j+")");
f=true
}if(!h&&(e[d]=="accounts"||e[d]=="resources")){g.push("(zimbraMailDeliveryAddress="+j+")");
h=true
}else{if(!c&&(e[d]=="distributionlists"||e[d]=="aliases")){g.push("(zimbraMailAlias="+j+")(uid="+j+")");
c=true
}}}}}}}if(b){g.push(")")
}if(!AjxUtil.isEmpty(j)){g.push(")")
}return g.join("")
};
ZaSearch.getBestMatchSearchByNameQuery=function(j,d){var f=ZaSearch.getSearchByNameQuery(j,d);
j=ZaSearch.escapeLdapQuery(j);
var h=new RegExp("\\*"+j+"\\*","g");
var e=new RegExp("^\\s*\\(\\s*\\|");
var b=new RegExp("\\)\\s*$");
var g=f.replace(h,j+"*");
g=g.replace(e,"");
g=g.replace(b,"");
var c=f.replace(h,"*"+j);
c=c.replace(e,"");
c=c.replace(b,"");
return"(|"+g+c+")"
};
ZaSearch.getSearchByDisplayNameQuery=function(b){if(b==null||b==""){return""
}else{b=String(b).replace(/([\\\\\\*\\(\\)])/g,"\\$1");
return("(displayName=*"+b+"*)")
}};
ZaSearch.searchByQueryHolder=function(c,b,d,e){if(c.isByDomain){return ZaSearch.searchByDomain(c.byValAttr,c.types,b,d,e)
}else{return ZaSearch.search(c.queryString,c.types,b,d,e,c.fetchAttrs,c.limit)
}};
ZaSearch.getSearchFromQuery=function(d){var b=new ZaSearch();
b[ZaSearch.A_selected]=null;
b[ZaSearch.A_query]=d.queryString;
b[ZaSearch.A_fAliases]="FALSE";
b[ZaSearch.A_fAccounts]="FALSE";
b[ZaSearch.A_fdistributionlists]="FALSE";
b[ZaSearch.A_fResources]="FALSE";
b[ZaSearch.A_fDomains]="FALSE";
b[ZaSearch.A_fCoses]="FALSE";
if(d.types!=null){for(var c=0;
c<d.types.length;
++c){if(d.types[c]==ZaSearch.ALIASES){b[ZaSearch.A_fAliases]="TRUE"
}if(d.types[c]==ZaSearch.ACCOUNTS){b[ZaSearch.A_fAccounts]="TRUE"
}if(d.types[c]==ZaSearch.DLS){b[ZaSearch.A_fdistributionlists]="TRUE"
}if(d.types[c]==ZaSearch.RESOURCES){b[ZaSearch.A_fResources]="TRUE"
}if(d.types[c]==ZaSearch.DOMAINS){b[ZaSearch.A_fDomains]="TRUE"
}if(d.types[c]==ZaSearch.COSES){b[ZaSearch.A_fCoses]="TRUE"
}}}return b
};
ZaSearch.myXModel={items:[{id:ZaSearch.A_query,type:_OBJECT_},{id:ZaSearch.A_selected,type:_OBJECT_,items:ZaAccount.myXModel},{id:ZaSearch.A_fAliases,type:_ENUM_,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaSearch.A_fdistributionlists,type:_ENUM_,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaSearch.A_fAccounts,type:_ENUM_,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaSearch.A_pagenum,type:_NUMBER_},{id:ZaSearch.A_ResultMsg,type:_STRING_}]};
ZaSearchQuery=function(g,d,c,f,e,b){this.queryString=g;
this.isByDomain=c;
this.byValAttr=f;
this.types=d;
this.fetchAttrs=(e!=null)?e:ZaSearch.standardAttributes;
this.limit=(b!=null)?b:ZaAccount.RESULTSPERPAGE
};
ZaSearch.searchResultCountsView=function(d,b){d[ZaOperation.SEP]=new ZaOperation(ZaOperation.SEP);
d[ZaOperation.LABEL]=new ZaOperation(ZaOperation.LABEL,AjxMessageFormat.format(ZaMsg.searchResultCount,[0,0]),null,null,null,null,null,null,"ZaSearchResultCountLabel",ZaOperation.SEARCH_RESULT_COUNT);
d[ZaOperation.SEP]=new ZaOperation(ZaOperation.SEP);
for(var c=0;
c<b.length;
c++){if(b[c]==ZaOperation.PAGE_BACK){b.splice(c+1,0,ZaOperation.SEP,ZaOperation.LABEL,ZaOperation.SEP);
break
}}};
ZaSearch.isAccountExist=function(j){var b=ZaApp.getInstance().getCurrentController();
var c=j.name;
var g=j.popupError?true:false;
if(!c){b.popupErrorDialog(ZaMsg.error_account_missing);
return true
}var j={query:["(mail=",c,")"].join(""),limit:2,applyCos:0,types:[ZaSearch.DLS,ZaSearch.ALIASES,ZaSearch.ACCOUNTS,ZaSearch.RESOURCES],controller:b};
try{var h=ZaSearch.searchDirectory(j).Body.SearchDirectoryResponse
}catch(d){b._handleException(d,"ZaSearch.isAccountExist",null,false)
}var f=new ZaItemList(null);
f.loadFromJS(h);
if(f.size()>0){if(g){var e=f.getArray()[0];
if(e.type==ZaItem.ALIAS){ZaApp.getInstance().getCurrentController().popupErrorDialog(ZaMsg.ERROR_aliasWithThisNameExists)
}else{if(e.type==ZaItem.RESOURCE){ZaApp.getInstance().getCurrentController().popupErrorDialog(ZaMsg.ERROR_resourceWithThisNameExists)
}else{if(e.type==ZaItem.DL){ZaApp.getInstance().getCurrentController().popupErrorDialog(ZaMsg.ERROR_dlWithThisNameExists)
}else{ZaApp.getInstance().getCurrentController().popupErrorDialog(ZaMsg.ERROR_accountWithThisNameExists)
}}}}}else{return false
}return true
};
ZaSearch.modifySavedSearches=function(b,j){if(ZaSearchField.canSaveSearch()){var g=AjxSoapDoc.create("ModifyAdminSavedSearchesRequest",ZaZimbraAdmin.URN,null);
for(var c=0;
c<b.length;
c++){var f=b[c];
var e=g.set("search",f.query);
e.setAttribute("name",f.name)
}var h=new ZmCsfeCommand();
var d=new Object();
d.soapDoc=g;
d.noAuthToken=true;
if(j){d.asyncMode=true;
d.callback=j
}h.invoke(d)
}};
ZaSearch.getSavedSearches=function(b,h){if(ZaSearchField.canViewSavedSearch()){var f=AjxSoapDoc.create("GetAdminSavedSearchesRequest",ZaZimbraAdmin.URN,null);
if(b){for(var c=0;
c<b.length;
c++){var e=f.set("search","");
e.setAttribute("name",b[c])
}}var g=new ZmCsfeCommand();
var d=new Object();
d.soapDoc=f;
d.noAuthToken=true;
if(h){d.asyncMode=true;
d.callback=h
}return g.invoke(d)
}};
ZaSearch.updateSavedSearch=function(e){ZaSearch.SAVED_SEARCHES=[];
if(e!=null){var d=e._data||e;
var c=d.Body.GetAdminSavedSearchesResponse.search;
if(c){for(var b=0;
b<c.length;
b++){ZaSearch.SAVED_SEARCHES.push({name:c[b].name,query:c[b]._content})
}}}ZaSearch._savedSearchToBeUpdated=false
};
ZaSearch.loadPredefinedSearch=function(){if(ZaSearchField.canViewSavedSearch()){var d=ZaApp.getInstance().getSavedSearchList();
if((!AjxUtil.isEmpty(d))&&(ZaSearchField.canSaveSearch())){var j=[];
for(var e=0;
e<d.length;
e++){var c=d[e].name;
var f=d[e].query;
if(f&&f.search(/zimbraIsDomainAdminAccount/)!=-1){f=f.replace(/zimbraIsDomainAdminAccount/g,"zimbraIsDelegatedAdminAccount");
j.push({name:c,query:f})
}}if(j.length!=0){ZaSearch.modifySavedSearches(j);
ZaSearch.SAVED_SEARCHES=h;
ZaSearch._savedSearchToBeUpdated=false
}}if((AjxUtil.isEmpty(d))&&(ZaSearchField.canSaveSearch())){var h=[];
for(var b=0;
b<ZaSearch.getPredefinedSavedSearchesForAdminOnly().length;
b++){h.push(ZaSearch.getPredefinedSavedSearchesForAdminOnly()[b])
}for(var g=0;
g<ZaSearch.getPredefinedSavedSearches().length;
g++){h.push(ZaSearch.getPredefinedSavedSearches()[g])
}ZaSearch.modifySavedSearches(h);
ZaSearch.SAVED_SEARCHES=h;
ZaSearch._savedSearchToBeUpdated=false
}}};
ZaSearch.parseSavedSearchQuery=function(query){if(query==null||query.length<=0){return
}var regEx=/^(.+)#{3}JSON:(.+)#{3}(.+)$/;
var results=query.match(regEx);
if(results!=null){query=results[1];
eval("var jsonObj = "+results[2]);
query+=jsonObj.func(jsonObj.args);
query+=results[3]
}return query
};
ZaSearch.getTimestampByDays=function(f){var e=parseInt(f);
var b=new Date();
var c=b.getTime();
b.setTime(c+e*86400*1000);
return ZaUtil.getAdminServerDateTime(b,true)
};
ZaSearch.SAVED_SEARCHES=[];
ZaSearch.escapeLdapQuery=function(b){b=String(b);
b=b.replace(/\\/g,"\\5C");
b=b.replace(/\(/g,"\\28");
b=b.replace(/\)/g,"\\29");
b=b.replace(/\*/g,"\\2A");
return b
}
}if(AjxPackage.define("zimbraAdmin.search.model.ZaSearchOption")){ZaSearchOption=function(){};
ZaSearchOption.ID=100;
ZaSearchOption.BASIC_TYPE_ID=ZaSearchOption.ID++;
ZaSearchOption.OBJECT_TYPE_ID=ZaSearchOption.ID++;
ZaSearchOption.DOMAIN_ID=ZaSearchOption.ID++;
ZaSearchOption.SERVER_ID=ZaSearchOption.ID++;
ZaSearchOption.ADVANCED_ID=ZaSearchOption.ID++;
ZaSearchOption.COS_ID=ZaSearchOption.ID++;
ZaSearchOption.BASIC_FILTER_ID=ZaSearchOption.ID++;
ZaSearchOption.STATUS_FILTER_ID=ZaSearchOption.ID++;
ZaSearchOption.LASTER_LOGIN_TIME_FILTER_ID=ZaSearchOption.ID++;
ZaSearchOption.EXT_EMAIL_ADDRESS_FILTER_ID=ZaSearchOption.ID++;
ZaSearchOption.COS_FILTER_ID=ZaSearchOption.ID++;
ZaSearchOption.SERVER_FILTER_ID=ZaSearchOption.ID++;
ZaSearchOption.DOMAIN_FILTER_ID=ZaSearchOption.ID++;
ZaSearchOption.A_basic_uid=ZaAccount.A_uid;
ZaSearchOption.A_basic_sn="sn";
ZaSearchOption.A_basic_displayName=ZaAccount.A_displayname;
ZaSearchOption.A_basic_zimbraId=ZaItem.A_zimbraId;
ZaSearchOption.A_basic_status=ZaAccount.A_accountStatus;
ZaSearchOption.A_objTypeAccount="option_"+ZaSearch.ACCOUNTS;
ZaSearchOption.A_objTypeAccountAdmin=ZaAccount.A_zimbraIsAdminAccount;
ZaSearchOption.A_objTypeSystemAccount=ZaAccount.A_zimbraIsSystemAccount;
ZaSearchOption.A_enableAccountLastLoginTime_From="enable_"+ZaAccount.A_zimbraLastLogonTimestamp+"_From";
ZaSearchOption.A_enableAccountLastLoginTime_To="enable_"+ZaAccount.A_zimbraLastLogonTimestamp+"_To";
ZaSearchOption.A_includeNeverLoginedAccounts="include_never_login_accounts";
ZaSearchOption.A_accountLastLoginTime_From=ZaAccount.A_zimbraLastLogonTimestamp+"_From";
ZaSearchOption.A_accountLastLoginTime_To=ZaAccount.A_zimbraLastLogonTimestamp+"_To";
ZaSearchOption.A_accountLastLoginTime=ZaAccount.A_zimbraLastLogonTimestamp;
ZaSearchOption.A_zimbraMailForwardingAddress=ZaAccount.A_zimbraMailForwardingAddress;
ZaSearchOption.A_zimbraPrefMailForwardingAddress=ZaAccount.A_zimbraPrefMailForwardingAddress;
ZaSearchOption.A_objTypeDl="option_"+ZaSearch.DLS;
ZaSearchOption.A_objTypeAlias="option_"+ZaSearch.ALIASES;
ZaSearchOption.A_objTypeResource="option_"+ZaSearch.RESOURCES;
ZaSearchOption.A_domainFilter="option_domain_filter";
ZaSearchOption.A_domainList="option_domain_list";
ZaSearchOption.A_domainListChecked="option_domain_list_checked";
ZaSearchOption.A_serverList="option_server_list";
ZaSearchOption.A_serverListChecked="option_server_list_checked";
ZaSearchOption.A_cosFilter="option_cos_filter";
ZaSearchOption.A_cosList="option_cos_list";
ZaSearchOption.A_cosListChecked="option_cos_list_checked";
ZaSearchOption.A2_cosNotSet="option_not_set_cosid";
ZaSearchOption.A2_status_active="status_active";
ZaSearchOption.A2_status_closed="status_closed";
ZaSearchOption.A2_status_locked="status_locked";
ZaSearchOption.A2_status_lockout="status_lockout";
ZaSearchOption.A2_status_pending="status_pending";
ZaSearchOption.A2_status_maintenance="status_maintenance";
ZaSearchOption.A2_status_list="status_list";
ZaSearchOption.getObjectTypeXModel=function(j){var g={items:[]};
var b=[{id:ZaSearchOption.A_basic_uid,ref:"options/"+ZaSearchOption.A_basic_uid,type:_STRING_},{id:ZaSearchOption.A_objTypeAccountAdmin,ref:"options/"+ZaSearchOption.A_objTypeAccountAdmin,type:_STRING_},{id:ZaSearchOption.A_objTypeSystemAccount,ref:"options/"+ZaSearchOption.A_objTypeSystemAccount,type:_STRING_},{id:ZaSearchOption.A_basic_sn,ref:"options/"+ZaSearchOption.A_basic_sn,type:_STRING_},{id:ZaSearchOption.A_basic_displayName,ref:"options/"+ZaSearchOption.A_basic_displayName,type:_STRING_},{id:ZaSearchOption.A_basic_zimbraId,ref:"options/"+ZaSearchOption.A_basic_zimbraId,type:_STRING_},{id:ZaSearchOption.A_basic_status,ref:"options/"+ZaSearchOption.A_basic_status,type:_STRING_}];
if(ZaSearchOption.A_objTypeAccountDomainAdmin){b.push({id:ZaSearchOption.A_objTypeAccountDomainAdmin,ref:"options/"+ZaSearchOption.A_objTypeAccountDomainAdmin,type:_STRING_})
}var d=[{id:ZaSearchOption.A_objTypeAccount,ref:"options/"+ZaSearchOption.A_objTypeAccount,type:_STRING_},{id:ZaSearchOption.A_objTypeDl,ref:"options/"+ZaSearchOption.A_objTypeDl,type:_STRING_},{id:ZaSearchOption.A_objTypeAlias,ref:"options/"+ZaSearchOption.A_objTypeAlias,type:_STRING_},{id:ZaSearchOption.A_objTypeResource,ref:"options/"+ZaSearchOption.A_objTypeResource,type:_STRING_},{id:ZaSearchOption.A_objTypeDomain,ref:"options/"+ZaSearchOption.A_objTypeDomain,type:_STRING_}];
var e=[{id:ZaSearchOption.A_domainFilter,ref:"options/"+ZaSearchOption.A_domainFilter,type:_STRING_},{id:ZaSearchOption.A_domainListChecked,ref:"options/"+ZaSearchOption.A_domainListChecked,type:_LIST_},{id:ZaSearchOption.A_domainList,ref:"options/"+ZaSearchOption.A_domainList,type:_LIST_}];
var h=[{id:ZaSearchOption.A_serverListChecked,ref:"options/"+ZaSearchOption.A_serverListChecked,type:_LIST_},{id:ZaSearchOption.A_serverList,ref:"options/"+ZaSearchOption.A_serverList,type:_LIST_}];
var c=[{id:ZaSearchOption.A_enableAccountLastLoginTime_From,ref:ZaSearchOption.A_enableAccountLastLoginTime_From,type:_STRING_},{id:ZaSearchOption.A_enableAccountLastLoginTime_To,ref:ZaSearchOption.A_enableAccountLastLoginTime_To,type:_STRING_},{id:ZaSearchOption.A_includeNeverLoginedAccounts,ref:ZaSearchOption.A_includeNeverLoginedAccounts,type:_STRING_},{id:ZaSearchOption.A_accountLastLoginTime_From,ref:"options/"+ZaSearchOption.A_accountLastLoginTime_From,type:_DATETIME_},{id:ZaSearchOption.A_accountLastLoginTime_To,ref:"options/"+ZaSearchOption.A_accountLastLoginTime_To,type:_DATETIME_},{id:ZaSearchOption.A_zimbraMailForwardingAddress,ref:"options/"+ZaSearchOption.A_zimbraMailForwardingAddress,type:_STRING_}];
var f=[{id:ZaSearchOption.A_cosFilter,ref:"options/"+ZaSearchOption.A_cosFilter,type:_STRING_},{id:ZaSearchOption.A_cosListChecked,ref:"options/"+ZaSearchOption.A_cosListChecked,type:_LIST_},{id:ZaSearchOption.A2_cosNotSet,ref:ZaSearchOption.A2_cosNotSet,type:_ENUM_,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaSearchOption.A_cosList,ref:"options/"+ZaSearchOption.A_cosList,type:_LIST_}];
if(j==ZaSearchOption.OBJECT_TYPE_ID){g.items=d
}else{if(j==ZaSearchOption.DOMAIN_ID){g.items=e
}else{if(j==ZaSearchOption.SERVER_ID){g.items=h
}else{if(j==ZaSearchOption.BASIC_TYPE_ID){g.items=b
}else{if(j==ZaSearchOption.ADVANCED_ID){g.items=c
}else{if(j==ZaSearchOption.COS_ID){g.items=f
}}}}}}return g
};
ZaSearchOption.getNewObjectTypeXModel=function(g){var d={items:[]};
var e=[{id:ZaSearchOption.A_basic_uid,ref:"options/"+ZaSearchOption.A_basic_uid,type:_STRING_,minLength:3},{id:ZaSearchOption.A_objTypeAccountAdmin,ref:"options/"+ZaSearchOption.A_objTypeAccountAdmin,type:_STRING_},{id:ZaSearchOption.A_objTypeSystemAccount,ref:"options/"+ZaSearchOption.A_objTypeSystemAccount,type:_STRING_},{id:ZaSearchOption.A_basic_sn,ref:"options/"+ZaSearchOption.A_basic_sn,type:_STRING_,minLength:3},{id:ZaSearchOption.A_basic_displayName,ref:"options/"+ZaSearchOption.A_basic_displayName,type:_STRING_,minLength:3},{id:ZaSearchOption.A_basic_zimbraId,ref:"options/"+ZaSearchOption.A_basic_zimbraId,type:_STRING_,minLength:3}];
if(ZaSearchOption.A_objTypeAccountDomainAdmin){e.push({id:ZaSearchOption.A_objTypeAccountDomainAdmin,ref:"options/"+ZaSearchOption.A_objTypeAccountDomainAdmin,type:_STRING_})
}var c=[{id:ZaSearchOption.A_domainFilter,ref:"options/"+ZaSearchOption.A_domainFilter,type:_STRING_,minLength:3},{id:ZaSearchOption.A_domainListChecked,ref:"options/"+ZaSearchOption.A_domainListChecked,type:_LIST_},{id:ZaSearchOption.A_domainList,ref:"options/"+ZaSearchOption.A_domainList,type:_LIST_}];
var f=[{id:ZaSearchOption.A_serverListChecked,ref:"options/"+ZaSearchOption.A_serverListChecked,type:_LIST_},{id:ZaSearchOption.A_serverList,ref:"options/"+ZaSearchOption.A_serverList,type:_LIST_}];
var k=[{id:ZaSearchOption.A_enableAccountLastLoginTime_From,ref:ZaSearchOption.A_enableAccountLastLoginTime_From,type:_STRING_},{id:ZaSearchOption.A_enableAccountLastLoginTime_To,ref:ZaSearchOption.A_enableAccountLastLoginTime_To,type:_STRING_},{id:ZaSearchOption.A_includeNeverLoginedAccounts,ref:ZaSearchOption.A_includeNeverLoginedAccounts,type:_STRING_},{id:ZaSearchOption.A_accountLastLoginTime_From,ref:"options/"+ZaSearchOption.A_accountLastLoginTime_From,type:_DATETIME_},{id:ZaSearchOption.A_accountLastLoginTime_To,ref:"options/"+ZaSearchOption.A_accountLastLoginTime_To,type:_DATETIME_}];
var b=[{id:ZaSearchOption.A_cosFilter,ref:"options/"+ZaSearchOption.A_cosFilter,type:_STRING_,minLength:3},{id:ZaSearchOption.A_cosListChecked,ref:"options/"+ZaSearchOption.A_cosListChecked,type:_LIST_},{id:ZaSearchOption.A2_cosNotSet,ref:ZaSearchOption.A2_cosNotSet,type:_ENUM_,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaSearchOption.A_cosList,ref:"options/"+ZaSearchOption.A_cosList,type:_LIST_}];
var h=[{id:ZaSearchOption.A_zimbraMailForwardingAddress,ref:"options/"+ZaSearchOption.A_zimbraMailForwardingAddress,type:_STRING_,minLength:3}];
var j=[{id:ZaSearchOption.A2_status_active,ref:"options/"+ZaSearchOption.A2_status_active,type:_STRING_},{id:ZaSearchOption.A2_status_closed,ref:"options/"+ZaSearchOption.A2_status_closed,type:_STRING_},{id:ZaSearchOption.A2_status_locked,ref:"options/"+ZaSearchOption.A2_status_locked,type:_STRING_},{id:ZaSearchOption.A2_status_lockout,ref:"options/"+ZaSearchOption.A2_status_lockout,type:_STRING_},{id:ZaSearchOption.A2_status_pending,ref:"options/"+ZaSearchOption.A2_status_pending,type:_STRING_},{id:ZaSearchOption.A2_status_maintenance,ref:"options/"+ZaSearchOption.A2_status_maintenance,type:_STRING_},{id:ZaSearchOption.A2_status_list,ref:"options/"+ZaSearchOption.A2_status_list,type:_LIST_}];
if(g==ZaSearchOption.BASIC_FILTER_ID){d.items=e
}else{if(g==ZaSearchOption.SERVER_FILTER_ID){d.items=f
}else{if(g==ZaSearchOption.COS_FILTER_ID){d.items=b
}else{if(g==ZaSearchOption.DOMAIN_FILTER_ID){d.items=c
}else{if(g==ZaSearchOption.EXT_EMAIL_ADDRESS_FILTER_ID){d.items=h
}else{if(g==ZaSearchOption.LASTER_LOGIN_TIME_FILTER_ID){d.items=k
}else{if(g==ZaSearchOption.STATUS_FILTER_ID){d.items=j
}}}}}}}return d
};
ZaSearchOption.getObjectTypeXForm=function(l,r){var e=ZaSearchOptionView.HEADER_HEIGHT+8;
var m=[{value:ZaAccount.ACCOUNT_STATUS_ACTIVE,label:ZaAccount.getAccountStatusMsg(ZaAccount.ACCOUNT_STATUS_ACTIVE)},{value:ZaAccount.ACCOUNT_STATUS_CLOSED,label:ZaAccount.getAccountStatusMsg(ZaAccount.ACCOUNT_STATUS_CLOSED)},{value:ZaAccount.ACCOUNT_STATUS_LOCKED,label:ZaAccount.getAccountStatusMsg(ZaAccount.ACCOUNT_STATUS_LOCKED)},{value:ZaAccount.ACCOUNT_STATUS_LOCKOUT,label:ZaAccount.getAccountStatusMsg(ZaAccount.ACCOUNT_STATUS_LOCKOUT)},{value:ZaAccount.ACCOUNT_STATUS_PENDING,label:ZaAccount.getAccountStatusMsg(ZaAccount.ACCOUNT_STATUS_PENDING)},{value:ZaAccount.ACCOUNT_STATUS_MAINTENANCE,label:ZaAccount.getAccountStatusMsg(ZaAccount.ACCOUNT_STATUS_MAINTENANCE)}];
var q={numCols:2,width:150,cssClass:"ZaSearchOptionOverview",cssStyle:"",items:[]};
var j=[{type:_TEXTFIELD_,ref:ZaSearchOption.A_basic_uid,label:ZaMsg.search_option_uid,align:_LEFT_,width:100,onChange:ZaSearchBuilderController.handleOptions,toolTipContent:ZaMsg.tt_search_option_uid,enableDisableChecks:[],visibilityChecks:[]},{type:_TEXTFIELD_,ref:ZaSearchOption.A_basic_sn,label:ZaMsg.search_option_sn,align:_LEFT_,width:100,onChange:ZaSearchBuilderController.handleOptions,enableDisableChecks:[],visibilityChecks:[]},{type:_TEXTFIELD_,ref:ZaSearchOption.A_basic_displayName,label:ZaMsg.search_option_displayName,align:_LEFT_,width:100,onChange:ZaSearchBuilderController.handleOptions,enableDisableChecks:[],visibilityChecks:[]},{type:_TEXTFIELD_,ref:ZaSearchOption.A_basic_zimbraId,label:ZaMsg.search_option_zimbraId,align:_LEFT_,width:100,onChange:ZaSearchBuilderController.handleOptions,enableDisableChecks:[],visibilityChecks:[]},{type:_OSELECT1_,ref:ZaSearchOption.A_basic_status,editable:false,msgName:ZaMsg.NAD_AccountStatus,label:ZaMsg.NAD_AccountStatus,labelLocation:_LEFT_,choices:m,onChange:ZaSearchBuilderController.handleOptions,enableDisableChecks:[],visibilityChecks:[]},{type:_GROUP_,name:"special search cases",colSpan:"2",numCols:2,width:150,items:[]}];
var o=j.length;
var d={type:_CHECKBOX_,ref:ZaSearchOption.A_objTypeAccountAdmin,trueValue:"TRUE",falseValue:"FALSE",label:ZaMsg.SearchFilter_Accounts_admin,align:_LEFT_,labelLocation:_RIGHT_,onChange:ZaSearchBuilderController.handleOptions,bmolsnr:true,enableDisableChecks:[],visibilityChecks:[]};
j[o-1].items.push(d);
if(ZaSearchOption.A_objTypeAccountDomainAdmin){var h={type:_CHECKBOX_,ref:ZaSearchOption.A_objTypeAccountDomainAdmin,trueValue:"TRUE",falseValue:"FALSE",label:ZaMsg.SearchFilter_Accounts_domainadmin,align:_LEFT_,labelLocation:_RIGHT_,onChange:ZaSearchBuilderController.handleOptions,bmolsnr:true,enableDisableChecks:[],visibilityChecks:[],labelWrap:true};
j[o-1].items.push(h)
}var f={type:_CHECKBOX_,ref:ZaSearchOption.A_objTypeSystemAccount,trueValue:"TRUE",falseValue:"FALSE",label:ZaMsg.SearchFilter_System_Accounts,align:_LEFT_,labelLocation:_RIGHT_,onChange:ZaSearchBuilderController.handleOptions,bmolsnr:true,enableDisableChecks:[],visibilityChecks:[]};
j[o-1].items.push(f);
var b=[{type:_CHECKBOX_,ref:ZaSearchOption.A_objTypeAccount,trueValue:"TRUE",falseValue:"FALSE",label:ZaMsg.SearchFilter_Accounts,align:_LEFT_,labelLocation:_RIGHT_,onChange:ZaSearchBuilderController.handleOptions,enableDisableChecks:[],visibilityChecks:["(ZaSettings.ENABLED_UI_COMPONENTS[ZaSettings.ACCOUNT_LIST_VIEW] || ZaSettings.ENABLED_UI_COMPONENTS[ZaSettings.CARTE_BLANCHE_UI])"]},{type:_CHECKBOX_,ref:ZaSearchOption.A_objTypeDl,trueValue:"TRUE",falseValue:"FALSE",label:ZaMsg.SearchFilter_DLs,align:_LEFT_,labelLocation:_RIGHT_,onChange:ZaSearchBuilderController.handleOptions,enableDisableChecks:[],visibilityChecks:["(ZaSettings.ENABLED_UI_COMPONENTS[ZaSettings.DL_LIST_VIEW] || ZaSettings.ENABLED_UI_COMPONENTS[ZaSettings.CARTE_BLANCHE_UI])"]},{type:_CHECKBOX_,ref:ZaSearchOption.A_objTypeAlias,trueValue:"TRUE",falseValue:"FALSE",label:ZaMsg.SearchFilter_Aliases,align:_LEFT_,labelLocation:_RIGHT_,onChange:ZaSearchBuilderController.handleOptions,enableDisableChecks:[],visibilityChecks:["(ZaSettings.ENABLED_UI_COMPONENTS[ZaSettings.ALIAS_LIST_VIEW] || ZaSettings.ENABLED_UI_COMPONENTS[ZaSettings.CARTE_BLANCHE_UI])"]},{type:_CHECKBOX_,ref:ZaSearchOption.A_objTypeResource,trueValue:"TRUE",falseValue:"FALSE",label:ZaMsg.SearchFilter_Resources,align:_RIGHT_,labelLocation:_RIGHT_,onChange:ZaSearchBuilderController.handleOptions,enableDisableChecks:[],visibilityChecks:["(ZaSettings.ENABLED_UI_COMPONENTS[ZaSettings.RESOURCE_LIST_VIEW] || ZaSettings.ENABLED_UI_COMPONENTS[ZaSettings.CARTE_BLANCHE_UI])"]}];
var k=50;
var n=[{type:_TEXTFIELD_,ref:ZaSearchOption.A_domainFilter,label:ZaMsg.search_option_filter,align:_LEFT_,width:ZaSearchOptionView.DOMAIN_OPTION_WIDTH-k,inputHelp:ZaMsg.search_option_filter_input_help_domain,toolTipContent:ZaMsg.tt_domain_search_option_filter,onChange:ZaSearchBuilderController.filterDomains,enableDisableChecks:[],visibilityChecks:[]},{type:_OUTPUT_,value:ZaMsg.no_domain_found_msg,colSpan:"*",cssStyle:"white-space: normal",visibilityChecks:[[XForm.checkInstanceValueEmty,ZaSearchOption.A_domainList]]},{type:_GROUP_,width:ZaSearchOptionView.WIDTH,colSpan:"*",height:r-30-25-5,cssStyle:"overflow:auto; position:absolute;margin-top: 5px;",visibilityChecks:[[XForm.checkInstanceValueNotEmty,ZaSearchOption.A_domainList]],items:[{type:_DWT_LIST_,ref:ZaSearchOption.A_domainList,width:ZaSearchOptionView.WIDTH-2,height:r-30-25,forceUpdate:true,widgetClass:ZaOptionList,multiselect:true,preserveSelection:false,bmolsnr:true,onSelection:ZaSearchBuilderController.filterSelectionListener}]}];
var p=[{type:_GROUP_,width:ZaSearchOptionView.WIDTH,colSpan:"*",height:r-30,cssStyle:"overflow:auto; position:absolute;",items:[{type:_DWT_LIST_,ref:ZaSearchOption.A_serverList,width:ZaSearchOptionView.WIDTH-2,height:r-30,forceUpdate:true,widgetClass:ZaOptionList,multiselect:true,preserveSelection:false,bmolsnr:true,onSelection:ZaSearchBuilderController.filterSelectionListener}]}];
var c=[{type:_TEXTFIELD_,ref:ZaSearchOption.A_cosFilter,label:ZaMsg.search_option_filter,align:_LEFT_,width:ZaSearchOptionView.COS_OPTION_WIDTH-k,inputHelp:ZaMsg.search_option_filter_input_help_cos,toolTipContent:ZaMsg.tt_cos_search_option_filter,onChange:ZaSearchBuilderController.filterCOSES,enableDisableChecks:[],visibilityChecks:[]},{type:_GROUP_,colSpan:"2",numCols:2,width:150,items:[{ref:ZaSearchOption.A2_cosNotSet,type:_CHECKBOX_,msgName:ZaMsg.search_includeObjectWithoutCosId,label:ZaMsg.search_includeObjectWithoutCosId,labelLocation:_RIGHT_,trueValue:"TRUE",falseValue:"FALSE",align:_LEFT_,onChange:ZaSearchBuilderController.handleOptions,enableDisableChecks:[],visibilityChecks:[]}]},{type:_OUTPUT_,value:ZaMsg.no_cos_found_msg,colSpan:"*",cssStyle:"white-space: normal",visibilityChecks:[[XForm.checkInstanceValueEmty,ZaSearchOption.A_cosList]]},{type:_GROUP_,width:ZaSearchOptionView.WIDTH,colSpan:"*",height:r-30-25-5,cssStyle:"overflow:auto; position:absolute;margin-top: 5px;",visibilityChecks:[[XForm.checkInstanceValueNotEmty,ZaSearchOption.A_cosList]],items:[{type:_DWT_LIST_,ref:ZaSearchOption.A_cosList,width:ZaSearchOptionView.WIDTH-2,height:r-30-25,forceUpdate:true,widgetClass:ZaOptionList,multiselect:true,preserveSelection:false,bmolsnr:true,onSelection:ZaSearchBuilderController.filterSelectionListener}]}];
var g=[{type:_GROUP_,numCols:2,items:[{type:_OUTPUT_,colSpan:"*",cssClass:"ZaSearchOptionViewSubHeader",value:ZaMsg.search_option_lastAccessTime,width:280},{type:_GROUP_,numCols:5,colSpan:"*",items:[{type:_CELL_SPACER_,width:40},{type:_CHECKBOX_,ref:ZaSearchOption.A_enableAccountLastLoginTime_From,label:ZaMsg.enable_search_option_label_from,trueValue:"TRUE",falseValue:"FALSE",align:_LEFT_,labelLocation:_RIGHT_,onChange:ZaSearchBuilderController.handleOptions,enableDisableChecks:[],visibilityChecks:[]},{type:_CHECKBOX_,ref:ZaSearchOption.A_enableAccountLastLoginTime_To,label:ZaMsg.enable_search_option_label_to,trueValue:"TRUE",falseValue:"FALSE",align:_LEFT_,labelLocation:_RIGHT_,onChange:ZaSearchBuilderController.handleOptions,enableDisableChecks:[],visibilityChecks:[]}]},{type:_GROUP_,numCols:3,colSpan:"*",items:[{type:_CELL_SPACER_,width:40},{type:_CHECKBOX_,ref:ZaSearchOption.A_includeNeverLoginedAccounts,label:ZaMsg.includeNeverLoginedAccounts,trueValue:"TRUE",falseValue:"FALSE",align:_LEFT_,labelLocation:_RIGHT_,onChange:ZaSearchBuilderController.handleOptions,enableDisableChecks:[],visibilityChecks:[],labelWrap:true}]},{type:_GROUP_,colSpan:"*",numCols:2,colSize:["60px","auto"],items:[{ref:ZaSearchOption.A_accountLastLoginTime_From,colSpan:"*",type:_DWT_DATETIME_,onChange:ZaSearchBuilderController.handleOptions,visibilityChecks:[[XForm.checkInstanceValue,ZaSearchOption.A_enableAccountLastLoginTime_From,"TRUE"]],bmolsnr:true,firstDayOfWeek:ZaZimbraAdmin.FIRST_DAY_OF_WEEK,visibilityChangeEventSources:[ZaSearchOption.A_enableAccountLastLoginTime_From],label:ZaMsg.search_option_label_from,labelLocation:_LEFT_},{ref:ZaSearchOption.A_accountLastLoginTime_To,colSpan:"*",type:_DWT_DATETIME_,onChange:ZaSearchBuilderController.handleOptions,visibilityChecks:[[XForm.checkInstanceValue,ZaSearchOption.A_enableAccountLastLoginTime_To,"TRUE"]],visibilityChangeEventSources:[ZaSearchOption.A_enableAccountLastLoginTime_To],bmolsnr:true,firstDayOfWeek:ZaZimbraAdmin.FIRST_DAY_OF_WEEK,label:ZaMsg.search_option_label_to,labelLocation:_LEFT_}]},{type:_SPACER_},{type:_TEXTFIELD_,ref:ZaSearchOption.A_zimbraMailForwardingAddress,label:ZaMsg.LB_External_mail,align:_LEFT_,width:150,onChange:ZaSearchBuilderController.handleOptions,toolTipContent:ZaMsg.LB_External_mail_tt,enableDisableChecks:[],visibilityChecks:[]}]}];
if(l==ZaSearchOption.OBJECT_TYPE_ID){q.items=b
}else{if(l==ZaSearchOption.DOMAIN_ID){q.items=n
}else{if(l==ZaSearchOption.SERVER_ID){q.items=p
}else{if(l==ZaSearchOption.BASIC_TYPE_ID){q.items=j;
q.width=ZaSearchOptionView.BASIC_OPTION_WIDTH
}else{if(l==ZaSearchOption.ADVANCED_ID){q.items=g;
q.width=ZaSearchOptionView.ADVANCED_OPTION_WIDTH
}else{if(l==ZaSearchOption.COS_ID){q.items=c
}}}}}}return q
};
ZaSearchOption.getNewObjectTypeXForm=function(l,p){var n={numCols:2,cssClass:"ZaSearchOptionOverview",items:[]};
var o=[{type:_GROUP_,colSizes:["90px","120px"],items:[{type:_TEXTFIELD_,ref:ZaSearchOption.A_basic_uid,label:ZaMsg.search_option_uid,align:_LEFT_,width:100,toolTipContent:ZaMsg.tt_search_option_uid,enableDisableChecks:[],visibilityChecks:[]},{type:_CELL_SPACER_,height:10,colSpan:"*"},{type:_TEXTFIELD_,ref:ZaSearchOption.A_basic_sn,label:ZaMsg.search_option_sn,align:_LEFT_,width:100,enableDisableChecks:[],visibilityChecks:[]},{type:_CELL_SPACER_,height:10,colSpan:"*"},{type:_TEXTFIELD_,ref:ZaSearchOption.A_basic_displayName,label:ZaMsg.search_option_displayName,align:_LEFT_,width:100,enableDisableChecks:[],visibilityChecks:[]},{type:_CELL_SPACER_,height:10,colSpan:"*"},{type:_TEXTFIELD_,ref:ZaSearchOption.A_basic_zimbraId,label:ZaMsg.search_option_zimbraId,align:_LEFT_,width:100,enableDisableChecks:[],visibilityChecks:[]},{type:_CELL_SPACER_,height:10,colSpan:"*"},{type:_GROUP_,name:"special search cases",colSpan:"2",numCols:2,colSizes:["30px","180px"],items:[]}]}];
var m=o[0].items.length;
var c={type:_WIZ_CHECKBOX_,ref:ZaSearchOption.A_objTypeAccountAdmin,trueValue:"TRUE",falseValue:"FALSE",valign:_TOP_,label:ZaMsg.SearchFilter_Accounts_admin,onChange:ZaSearchBuilderController.newHandleOptions,bmolsnr:true,enableDisableChecks:[],visibilityChecks:[]};
o[0].items[m-1].items.push(c);
if(ZaSearchOption.A_objTypeAccountDomainAdmin){var k={type:_WIZ_CHECKBOX_,ref:ZaSearchOption.A_objTypeAccountDomainAdmin,trueValue:"TRUE",falseValue:"FALSE",valign:_TOP_,onChange:ZaSearchBuilderController.newHandleOptions,label:ZaMsg.SearchFilter_Accounts_domainadmin,bmolsnr:true,enableDisableChecks:[],visibilityChecks:[],labelWrap:true};
o[0].items[m-1].items.push(k)
}var h={type:_WIZ_CHECKBOX_,ref:ZaSearchOption.A_objTypeSystemAccount,trueValue:"TRUE",falseValue:"FALSE",valign:_TOP_,onChange:ZaSearchBuilderController.newHandleOptions,label:ZaMsg.SearchFilter_System_Accounts,bmolsnr:true,enableDisableChecks:[],visibilityChecks:[]};
o[0].items[m-1].items.push(h);
var g=[{type:_TEXTFIELD_,ref:ZaSearchOption.A_domainFilter,label:ZaMsg.search_option_filter,align:_LEFT_,width:ZaSearchOptionView.WIDTH-35,inputHelp:ZaMsg.search_option_filter_input_help_domain,toolTipContent:ZaMsg.tt_domain_search_option_filter,labelCssStyle:"white-space:nowrap",onChange:ZaSearchBuilderController.filterDomains,enableDisableChecks:[],visibilityChecks:[]},{type:_OUTPUT_,value:ZaMsg.no_domain_found_msg,colSpan:"*",cssStyle:"white-space: normal",visibilityChecks:[[XForm.checkInstanceValueEmty,ZaSearchOption.A_domainList]]},{type:_GROUP_,width:ZaSearchOptionView.WIDTH,colSpan:"*",height:p-30-25-5,cssStyle:"overflow:auto; margin-top: 5px;",visibilityChecks:[[XForm.checkInstanceValueNotEmty,ZaSearchOption.A_domainList]],items:[{type:_DWT_LIST_,ref:ZaSearchOption.A_domainList,width:ZaSearchOptionView.WIDTH-2,height:p-30-25,forceUpdate:true,widgetClass:ZaOptionList,multiselect:true,preserveSelection:true,onSelection:ZaSearchBuilderController.filterSelectionListener}]}];
var j=[{type:_GROUP_,width:ZaSearchOptionView.WIDTH,colSpan:"*",height:p-30,cssStyle:"overflow:auto;",items:[{type:_DWT_LIST_,ref:ZaSearchOption.A_serverList,width:ZaSearchOptionView.WIDTH-2,height:p-30,forceUpdate:true,widgetClass:ZaOptionList,multiselect:true,preserveSelection:true,onSelection:ZaSearchBuilderController.filterSelectionListener}]}];
var f=[{type:_TEXTFIELD_,ref:ZaSearchOption.A_cosFilter,label:ZaMsg.search_option_filter,align:_LEFT_,width:ZaSearchOptionView.WIDTH-50,inputHelp:ZaMsg.search_option_filter_input_help_cos,toolTipContent:ZaMsg.tt_cos_search_option_filter,onChange:ZaSearchBuilderController.filterCOSES,labelCssStyle:"white-space:nowrap",enableDisableChecks:[],visibilityChecks:[]},{type:_GROUP_,colSpan:"2",numCols:2,items:[{ref:ZaSearchOption.A2_cosNotSet,type:_CHECKBOX_,msgName:ZaMsg.search_includeObjectWithoutCosId,label:ZaMsg.search_includeObjectWithoutCosId,labelLocation:_RIGHT_,trueValue:"TRUE",falseValue:"FALSE",align:_LEFT_,onChange:ZaSearchBuilderController.handleOptions,enableDisableChecks:[],visibilityChecks:[]}]},{type:_OUTPUT_,value:ZaMsg.no_cos_found_msg,colSpan:"*",cssStyle:"white-space: normal",visibilityChecks:[[XForm.checkInstanceValueEmty,ZaSearchOption.A_cosList]]},{type:_GROUP_,width:ZaSearchOptionView.WIDTH,colSpan:"*",height:p-30-25-5,cssStyle:"overflow:auto; margin-top: 5px;",visibilityChecks:[[XForm.checkInstanceValueNotEmty,ZaSearchOption.A_cosList]],items:[{type:_DWT_LIST_,ref:ZaSearchOption.A_cosList,width:ZaSearchOptionView.WIDTH-2,height:p-30-25,forceUpdate:true,widgetClass:ZaOptionList,multiselect:true,preserveSelection:true,onSelection:ZaSearchBuilderController.filterSelectionListener}]}];
var b=[{type:_GROUP_,numCols:2,items:[{type:_GROUP_,numCols:5,colSpan:"*",items:[{type:_CELL_SPACER_,width:40},{type:_CHECKBOX_,ref:ZaSearchOption.A_enableAccountLastLoginTime_From,label:ZaMsg.enable_search_option_label_from,trueValue:"TRUE",falseValue:"FALSE",subLabel:"",align:_LEFT_,labelLocation:_RIGHT_,onChange:ZaSearchBuilderController.newHandleOptions,enableDisableChecks:[],visibilityChecks:[]},{type:_CHECKBOX_,ref:ZaSearchOption.A_enableAccountLastLoginTime_To,label:ZaMsg.enable_search_option_label_to,trueValue:"TRUE",falseValue:"FALSE",subLabel:"",align:_LEFT_,labelLocation:_RIGHT_,onChange:ZaSearchBuilderController.newHandleOptions,enableDisableChecks:[],visibilityChecks:[]}]},{type:_GROUP_,numCols:3,colSpan:"*",items:[{type:_CELL_SPACER_,width:40},{type:_CHECKBOX_,ref:ZaSearchOption.A_includeNeverLoginedAccounts,label:ZaMsg.includeNeverLoginedAccounts,subLabel:"",trueValue:"TRUE",falseValue:"FALSE",align:_LEFT_,labelLocation:_RIGHT_,onChange:ZaSearchBuilderController.newHandleOptions,enableDisableChecks:[],visibilityChecks:[],labelWrap:true}]},{type:_GROUP_,colSpan:"*",numCols:2,colSize:["60px","auto"],items:[{ref:ZaSearchOption.A_accountLastLoginTime_From,colSpan:"*",type:_DWT_DATETIME_,visibilityChecks:[[XForm.checkInstanceValue,ZaSearchOption.A_enableAccountLastLoginTime_From,"TRUE"]],bmolsnr:true,firstDayOfWeek:ZaZimbraAdmin.FIRST_DAY_OF_WEEK,visibilityChangeEventSources:[ZaSearchOption.A_enableAccountLastLoginTime_From],label:ZaMsg.search_option_label_from,labelLocation:_LEFT_},{ref:ZaSearchOption.A_accountLastLoginTime_To,colSpan:"*",type:_DWT_DATETIME_,visibilityChecks:[[XForm.checkInstanceValue,ZaSearchOption.A_enableAccountLastLoginTime_To,"TRUE"]],visibilityChangeEventSources:[ZaSearchOption.A_enableAccountLastLoginTime_To],bmolsnr:true,firstDayOfWeek:ZaZimbraAdmin.FIRST_DAY_OF_WEEK,label:ZaMsg.search_option_label_to,labelLocation:_LEFT_}]}]}];
var d=[{type:_OUTPUT_,value:ZaMsg.LBL_New_External_mail,colSpan:2},{type:_TEXTFIELD_,colSpan:2,ref:ZaSearchOption.A_zimbraMailForwardingAddress,enableDisableChecks:[],visibilityChecks:[]}];
var e=[{type:_CHECKBOX_,ref:ZaSearchOption.A2_status_active,subLabel:"",label:ZaAccount.getAccountStatusMsg(ZaAccount.ACCOUNT_STATUS_ACTIVE),trueValue:"TRUE",falseValue:"FALSE",align:_LEFT_,labelLocation:_RIGHT_,onChange:ZaSearchBuilderController.newHandleOptions,enableDisableChecks:[],visibilityChecks:[],labelWrap:true},{type:_CHECKBOX_,ref:ZaSearchOption.A2_status_closed,subLabel:"",label:ZaAccount.getAccountStatusMsg(ZaAccount.ACCOUNT_STATUS_CLOSED),trueValue:"TRUE",falseValue:"FALSE",align:_LEFT_,labelLocation:_RIGHT_,onChange:ZaSearchBuilderController.newHandleOptions,enableDisableChecks:[],visibilityChecks:[],labelWrap:true},{type:_CHECKBOX_,ref:ZaSearchOption.A2_status_locked,subLabel:"",label:ZaAccount.getAccountStatusMsg(ZaAccount.ACCOUNT_STATUS_LOCKED),trueValue:"TRUE",falseValue:"FALSE",align:_LEFT_,labelLocation:_RIGHT_,onChange:ZaSearchBuilderController.newHandleOptions,enableDisableChecks:[],visibilityChecks:[],labelWrap:true},{type:_CHECKBOX_,ref:ZaSearchOption.A2_status_lockout,subLabel:"",label:ZaAccount.getAccountStatusMsg(ZaAccount.ACCOUNT_STATUS_LOCKOUT),trueValue:"TRUE",falseValue:"FALSE",align:_LEFT_,labelLocation:_RIGHT_,onChange:ZaSearchBuilderController.newHandleOptions,enableDisableChecks:[],visibilityChecks:[],labelWrap:true},{type:_CHECKBOX_,ref:ZaSearchOption.A2_status_pending,subLabel:"",label:ZaAccount.getAccountStatusMsg(ZaAccount.ACCOUNT_STATUS_PENDING),trueValue:"TRUE",falseValue:"FALSE",align:_LEFT_,labelLocation:_RIGHT_,onChange:ZaSearchBuilderController.newHandleOptions,enableDisableChecks:[],visibilityChecks:[],labelWrap:true},{type:_CHECKBOX_,ref:ZaSearchOption.A2_status_maintenance,subLabel:"",label:ZaAccount.getAccountStatusMsg(ZaAccount.ACCOUNT_STATUS_MAINTENANCE),trueValue:"TRUE",falseValue:"FALSE",align:_LEFT_,labelLocation:_RIGHT_,onChange:ZaSearchBuilderController.newHandleOptions,enableDisableChecks:[],visibilityChecks:[],labelWrap:true}];
if(l==ZaSearchOption.BASIC_FILTER_ID){n.items=o
}else{if(l==ZaSearchOption.SERVER_FILTER_ID){n.items=j
}else{if(l==ZaSearchOption.COS_FILTER_ID){n.items=f
}else{if(l==ZaSearchOption.DOMAIN_FILTER_ID){n.items=g
}else{if(l==ZaSearchOption.EXT_EMAIL_ADDRESS_FILTER_ID){n.items=d
}else{if(l==ZaSearchOption.LASTER_LOGIN_TIME_FILTER_ID){n.items=b
}else{if(l==ZaSearchOption.STATUS_FILTER_ID){n.items=e
}}}}}}}return n
};
ZaSearchOption.getDefaultInstance=function(c){var b={};
b.options={};
if(c==ZaSearchOption.OBJECT_TYPE_ID){b.options[ZaSearchOption.A_objTypeAccount]="TRUE";
b.options[ZaSearchOption.A_objTypeAlias]="TRUE";
b.options[ZaSearchOption.A_objTypeDl]="TRUE";
b.options[ZaSearchOption.A_objTypeResource]="TRUE"
}else{if(c==ZaSearchOption.DOMAIN_ID){}else{if(c==ZaSearchOption.SERVER_ID){}else{if(c==ZaSearchOption.BASIC_TYPE_ID){}else{if(c==ZaSearchOption.COS_ID){b[ZaSearchOption.A2_cosNotSet]="FALSE"
}else{if(c==ZaSearchOption.ADVANCED_ID){b[ZaSearchOption.A_enableAccountLastLoginTime_From]="FALSE";
b[ZaSearchOption.A_enableAccountLastLoginTime_To]="FALSE";
b[ZaSearchOption.A_includeNeverLoginedAccounts]="FALSE"
}}}}}}return b
};
ZaSearchOption.getDefaultObjectTypes=function(){var b=[];
b[0]=[ZaSearch.ACCOUNTS,ZaSearch.ALIASES,ZaSearch.DLS,ZaSearch.RESOURCES];
return b
};
ZaOptionList=function(c,b){DwtListView.call(this,c,null,Dwt.STATIC_STYLE)
};
ZaOptionList.prototype=new DwtListView;
ZaOptionList.prototype.constructor=ZaOptionList;
ZaOptionList.prototype.toString=function(){return"ZaOptionList"
};
ZaOptionList.prototype._createItemHtml=function(d){var c=new Array(10);
var e=document.createElement("div");
e[DwtListView._STYLE_CLASS]="Row";
e[DwtListView._SELECTED_STYLE_CLASS]=e[DwtListView._STYLE_CLASS]+"-"+DwtCssStyle.SELECTED;
e.className=e[DwtListView._STYLE_CLASS];
this.associateItemWithElement(d,e,DwtListView.TYPE_LIST_ITEM);
var b=0;
c[b++]="<table width='100%' cellspacing='0' cellpadding='0'><tr><td width=20>";
c[b++]="<input type=checkbox value='"+d+"' /></td>";
c[b++]="<td>"+d+"</td></tr></table>";
e.innerHTML=c.join("");
return e
}
}if(AjxPackage.define("zimbraAdmin.servers.model.ZaServer")){ZaServer=function(){ZaItem.call(this,"ZaServer");
this._init();
this.type=ZaItem.SERVER
};
ZaServer.modelExtensions=[];
ZaServer.prototype=new ZaItem;
ZaServer.prototype.constructor=ZaServer;
ZaItem.loadMethods.ZaServer=new Array();
ZaItem.initMethods.ZaServer=new Array();
ZaItem.modifyMethodsExt.ZaServer=new Array();
ZaItem.modifyMethods.ZaServer=new Array();
ZaItem.modelExtensions.ZaServer=new Array();
ZaServer.A_name="cn";
ZaServer.A_description="description";
ZaServer.A_notes="zimbraNotes";
ZaServer.A_Service="zimbraService";
ZaServer.A_ServiceHostname="zimbraServiceHostname";
ZaServer.A_zimbraMailPort="zimbraMailPort";
ZaServer.A_zimbraMailSSLPort="zimbraMailSSLPort";
ZaServer.A_zimbraMailMode="zimbraMailMode";
ZaServer.A_zimbraMailReferMode="zimbraMailReferMode";
ZaServer.A_zimbraServiceInstalled="zimbraServiceInstalled";
ZaServer.A_zimbraLdapServiceInstalled="_"+ZaServer.A_zimbraServiceInstalled+"_ldap";
ZaServer.A_zimbraMailboxServiceInstalled="_"+ZaServer.A_zimbraServiceInstalled+"_mailbox";
ZaServer.A_zimbraMtaServiceInstalled="_"+ZaServer.A_zimbraServiceInstalled+"_mta";
ZaServer.A_zimbraSnmpServiceInstalled="_"+ZaServer.A_zimbraServiceInstalled+"_snmp";
ZaServer.A_zimbraAntiVirusServiceInstalled="_"+ZaServer.A_zimbraServiceInstalled+"_antivirus";
ZaServer.A_zimbraAntiSpamServiceInstalled="_"+ZaServer.A_zimbraServiceInstalled+"_antispam";
ZaServer.A_zimbraOpenDKIMServiceInstalled="_"+ZaServer.A_zimbraServiceInstalled+"_opendkim";
ZaServer.A_zimbraSpellServiceInstalled="_"+ZaServer.A_zimbraServiceInstalled+"_spell";
ZaServer.A_zimbraLoggerServiceInstalled="_"+ZaServer.A_zimbraServiceInstalled+"_logger";
ZaServer.A_zimbraMailProxyServiceInstalled="_"+ZaServer.A_zimbraServiceInstalled+"_proxy";
ZaServer.A_zimbraVmwareHAServiceInstalled="_"+ZaServer.A_zimbraServiceInstalled+"_vmwareha";
ZaServer.A_zimbraPolicydServiceInstalled="_"+ZaServer.A_zimbraServiceInstalled+"_cbpolicyd";
ZaServer.A_zimbraReverseProxyHttpEnabled="zimbraReverseProxyHttpEnabled";
ZaServer.A_zimbraServiceEnabled="zimbraServiceEnabled";
ZaServer.A_zimbraPolicydServiceEnabled="_"+ZaServer.A_zimbraServiceEnabled+"_cbpolicyd";
ZaServer.A_zimbraLdapServiceEnabled="_"+ZaServer.A_zimbraServiceEnabled+"_ldap";
ZaServer.A_zimbraMailboxServiceEnabled="_"+ZaServer.A_zimbraServiceEnabled+"_mailbox";
ZaServer.A_zimbraMtaServiceEnabled="_"+ZaServer.A_zimbraServiceEnabled+"_mta";
ZaServer.A_zimbraSnmpServiceEnabled="_"+ZaServer.A_zimbraServiceEnabled+"_snmp";
ZaServer.A_zimbraAntiVirusServiceEnabled="_"+ZaServer.A_zimbraServiceEnabled+"_antivirus";
ZaServer.A_zimbraAntiSpamServiceEnabled="_"+ZaServer.A_zimbraServiceEnabled+"_antispam";
ZaServer.A_zimbraOpenDKIMServiceEnabled="_"+ZaServer.A_zimbraServiceEnabled+"_opendkim";
ZaServer.A_zimbraSpellServiceEnabled="_"+ZaServer.A_zimbraServiceEnabled+"_spell";
ZaServer.A_zimbraLoggerServiceEnabled="_"+ZaServer.A_zimbraServiceEnabled+"_logger";
ZaServer.A_zimbraMailProxyServiceEnabled="_"+ZaServer.A_zimbraServiceEnabled+"_proxy";
ZaServer.A_zimbraVmwareHAServiceEnabled="_"+ZaServer.A_zimbraServiceEnabled+"_vmwareha";
ZaServer.A_zimbraWebClientServiceEnabled="_"+ZaServer.A_zimbraServiceEnabled+"_zimbra";
ZaServer.A_zimbraAdminClientServiceEnabled="_"+ZaServer.A_zimbraServiceEnabled+"_zimbraAdmin";
ZaServer.A_zimbraMailClientServiceEnabled="_"+ZaServer.A_zimbraServiceEnabled+"_service";
ZaServer.A_zimbraZimletServiceEnabled="_"+ZaServer.A_zimbraServiceEnabled+"_zimlet";
ZaServer.servlets=["zimbra","zimbraAdmin","service","zimlet"];
ZaServer.A_zimbraMtaSaslAuthEnable="zimbraMtaSaslAuthEnable";
ZaServer.A_zimbraMtaSmtpDnsSupportLevel="zimbraMtaSmtpDnsSupportLevel";
ZaServer.A_zimbraMtaRelayHost="zimbraMtaRelayHost";
ZaServer.A_zimbraMtaFallbackRelayHost="zimbraMtaFallbackRelayHost";
ZaServer.A_zimbraMtaTlsAuthOnly="zimbraMtaTlsAuthOnly";
ZaServer.A_zimbraMtaMyNetworks="zimbraMtaMyNetworks";
ZaServer.A_zimbraMilterBindPort="zimbraMilterBindPort";
ZaServer.A_zimbraMilterBindAddress="zimbraMilterBindAddress";
ZaServer.A_zimbraMilterServerEnabled="zimbraMilterServerEnabled";
ZaServer.A_zimbraSmtpHostname="zimbraSmtpHostname";
ZaServer.A_SmtpPort="zimbraSmtpPort";
ZaServer.A_SmtpTimeout="zimbraSmtpTimeout";
ZaServer.A_LmtpAdvertisedName="zimbraLmtpAdvertisedName";
ZaServer.A_LmtpBindAddress="zimbraLmtpBindAddress";
ZaServer.A_LmtpBindPort="zimbraLmtpBindPort";
ZaServer.A_zimbraPop3NumThreads="zimbraPop3NumThreads";
ZaServer.A_Pop3AdvertisedName="zimbraPop3AdvertisedName";
ZaServer.A_Pop3BindAddress="zimbraPop3BindAddress";
ZaServer.A_zimbraPop3BindPort="zimbraPop3BindPort";
ZaServer.A_zimbraPop3SSLBindPort="zimbraPop3SSLBindPort";
ZaServer.A_Pop3SSLServerEnabled="zimbraPop3SSLServerEnabled";
ZaServer.A_Pop3ServerEnabled="zimbraPop3ServerEnabled";
ZaServer.A_Pop3CleartextLoginEnabled="zimbraPop3CleartextLoginEnabled";
ZaServer.A_zimbraImapNumThreads="zimbraImapNumThreads";
ZaServer.A_zimbraImapBindPort="zimbraImapBindPort";
ZaServer.A_ImapServerEnabled="zimbraImapServerEnabled";
ZaServer.A_ImapSSLBindPort="zimbraImapSSLBindPort";
ZaServer.A_ImapSSLServerEnabled="zimbraImapSSLServerEnabled";
ZaServer.A_ImapCleartextLoginEnabled="zimbraImapCleartextLoginEnabled";
ZaServer.A_zimbraReverseProxyLookupTarget="zimbraReverseProxyLookupTarget";
ZaServer.A_RedologEnabled="zimbraRedologEnabled";
ZaServer.A_RedologLogPath="zimbraRedologLogPath";
ZaServer.A_RedologArchiveDir="zimbraRedologArchiveDir";
ZaServer.A_RedologBacklogDir="zimbraRedologBacklogDir";
ZaServer.A_RedologRolloverFileSizeKB="zimbraRedologRolloverFileSizeKB";
ZaServer.A_RedologFsyncIntervalMS="zimbraRedologFsyncIntervalMS";
ZaServer.A_MasterRedologClientConnections="zimbraMasterRedologClientConnections";
ZaServer.A_MasterRedologClientTimeoutSec="zimbraMasterRedologClientTimeoutSec";
ZaServer.A_MasterRedologClientTcpNoDelay="zimbraMasterRedologClientTcpNoDelay";
ZaServer.A_zimbraUserServicesEnabled="zimbraUserServicesEnabled";
ZaServer.A_RemovedVolumes="removed_volumes";
ZaServer.A_Volumes="volumes";
ZaServer.A_VolumeId="id";
ZaServer.A_VolumeName="name";
ZaServer.A_VolumeRootPath="rootpath";
ZaServer.A_VolumeCompressBlobs="compressBlobs";
ZaServer.A_VolumeCompressionThreshold="compressionThreshold";
ZaServer.A_VolumeType="type";
ZaServer.A_CurrentIndexVolumeId="current_index_volume_id";
ZaServer.A_CurrentMsgVolumeId="current_msg_volume_id";
ZaServer.A_isCurrent="isCurrent";
ZaServer.LBL_VolumeRootPath=ZaMsg.VM_VolumeRootPath;
ZaServer.A_zimbraApplianceVendor="zimbraApplianceVendor";
ZaServer.A_zimbraApplianceName="zimbraApplianceName";
ZaServer.A_zimbraApplianceVersion="zimbraApplianceVersion";
ZaServer.A_zimbraApplianceFullVersion="zimbraApplianceFullVersion";
ZaServer.A_zimbraApplianceDetails="zimbraApplianceDetails";
ZaServer.A_zimbraApplianceDefaultRepUrl="zimbraApplianceDefaultRepUrl";
ZaServer.A_zimbraApplianceCustomRepUrl="zimbraApplianceCustomRepUrl";
ZaServer.A_zimbraApplianceCustomRepUrlUser="zimbraApplianceCustomRepUrlUser";
ZaServer.A_zimbraApplianceCustomRepUrlPass="zimbraApplianceCustomRepUrlPass";
ZaServer.A_zimbraApplianceUpdateOption="zimbraApplianceUpdateOption";
ZaServer.A_zimbraApplianceUpdateType="zimbraApplianceUpdateType";
ZaServer.A_zimbraApplianceUpdatehourofrun="zimbraApplianceUpdatehourofrun";
ZaServer.A_zimbraMailBindAddress="zimbraMailBindAddress";
ZaServer.A_zimbraMailSSLBindAddress="zimbraMailSSLBindAddress";
ZaServer.A_zimbraMailSSLClientCertBindAddress="zimbraMailSSLClientCertBindAddress";
ZaServer.A_zimbraAdminBindAddress="zimbraAdminBindAddress";
ZaServer.A_zimbraSpnegoAuthPrincipal="zimbraSpnegoAuthPrincipal";
ZaServer.A_zimbraSpnegoAuthTargetName="zimbraSpnegoAuthTargetName";
ZaServer.A_zimbraAutoProvPollingInterval="zimbraAutoProvPollingInterval";
ZaServer.A_zimbraAutoProvScheduledDomains="zimbraAutoProvScheduledDomains";
ZaServer.A_zimbraMailSSLClientCertMode="zimbraMailSSLClientCertMode";
ZaServer.A_zimbraMailSSLClientCertPort="zimbraMailSSLClientCertPort";
ZaServer.A_zimbraMailSSLProxyClientCertPort="zimbraMailSSLProxyClientCertPort";
ZaServer.A_zimbraReverseProxyMailMode="zimbraReverseProxyMailMode";
ZaServer.A_zimbraReverseProxyClientCertMode="zimbraReverseProxyClientCertMode";
ZaServer.A_zimbraReverseProxyClientCertCA="zimbraReverseProxyClientCertCA";
ZaServer.A_zimbraScheduledTaskNumThreads="zimbraScheduledTaskNumThreads";
ZaServer.A_zimbraMailPurgeSleepInterval="zimbraMailPurgeSleepInterval";
ZaServer.A_zimbraIsMonitorHost="zimbraIsMonitorHost";
ZaServer.A_showVolumes="show_volumes";
ZaServer.A_zimbraLogHostname="zimbraLogHostname";
ZaServer.A_isCurrentVolume="isCurrentVolume";
ZaServer.STANDALONE="standalone";
ZaServer.MASTER="master";
ZaServer.SLAVE="slave";
ZaServer.A2_volume_selection_cache="volume_selection_cache";
ZaServer.MSG=1;
ZaServer.INDEX=10;
ZaServer.currentkeys={};
ZaServer.currentkeys[ZaServer.MSG]=ZaServer.A_CurrentMsgVolumeId;
ZaServer.currentkeys[ZaServer.INDEX]=ZaServer.A_CurrentIndexVolumeId;
ZaServer.volumeTypes=[ZaServer.MSG,ZaServer.INDEX];
ZaServer.updateoptions={};
ZaServer.updateoptions[0]=ZaMsg.NONE=111;
ZaServer.updateoptions[2]=ZaMsg.EVERYDAY=112;
ZaServer.updateoptions[3]=ZaMsg.EVERYSUNDAY=113;
ZaServer.updateoptions[4]=ZaMsg.EVERYMONDAY=114;
ZaServer.updateoptions[5]=ZaMsg.EVERYTUESDAY=115;
ZaServer.updateoptions[6]=ZaMsg.EVERYWEDNESDAY=116;
ZaServer.updateoptions[7]=ZaMsg.EVERYTHURSDAY=117;
ZaServer.updateoptions[8]=ZaMsg.EVERYFRIDAY=118;
ZaServer.updateoptions[9]=ZaMsg.EVERYSATURDAY=119;
ZaServer.updatehourofrun={};
ZaServer.updatehourofrun[0]=ZaMsg.ONEAM=201;
ZaServer.updatehourofrun[1]=ZaMsg.TWOAM=202;
ZaServer.updatehourofrun[2]=ZaMsg.THREEAM=203;
ZaServer.updatehourofrun[3]=ZaMsg.FOURAM=204;
ZaServer.updatehourofrun[4]=ZaMsg.FIVEAM=205;
ZaServer.updatehourofrun[5]=ZaMsg.SIXAM=206;
ZaServer.updatehourofrun[6]=ZaMsg.SEVENAM=207;
ZaServer.updatehourofrun[7]=ZaMsg.EIGHTAM=208;
ZaServer.updatehourofrun[8]=ZaMsg.NINEAM=209;
ZaServer.updatehourofrun[9]=ZaMsg.TENAM=210;
ZaServer.updatehourofrun[10]=ZaMsg.ELEVENAM=211;
ZaServer.updatehourofrun[11]=ZaMsg.TWELVEAM=212;
ZaServer.updatehourofrun[12]=ZaMsg.TWELVEPM=312;
ZaServer.updatehourofrun[13]=ZaMsg.ELEVENPM=311;
ZaServer.updatehourofrun[14]=ZaMsg.TENPM=310;
ZaServer.updatehourofrun[15]=ZaMsg.NINEPM=309;
ZaServer.updatehourofrun[16]=ZaMsg.EIGHTPM=308;
ZaServer.updatehourofrun[17]=ZaMsg.SEVENPM=307;
ZaServer.updatehourofrun[18]=ZaMsg.SIXPM=306;
ZaServer.updatehourofrun[19]=ZaMsg.FIVEPM=305;
ZaServer.updatehourofrun[20]=ZaMsg.FOURPM=304;
ZaServer.updatehourofrun[21]=ZaMsg.THREEPM=303;
ZaServer.updatehourofrun[22]=ZaMsg.TWOPM=302;
ZaServer.updatehourofrun[23]=ZaMsg.ONEPM=301;
ZaServer.APPLIANCEUPDATE_CD=2;
ZaServer.APPLIANCEUPDATE_DEFAULTREP=1;
ZaServer.APPLIANCEUPDATE_CUSTOMREP=3;
ZaServer.DEFAULT_IMAP_PORT=143;
ZaServer.DEFAULT_IMAP_SSL_PORT=993;
ZaServer.DEFAULT_POP3_PORT=110;
ZaServer.DEFAULT_POP3_SSL_PORT=995;
ZaServer.DEFAULT_IMAP_PORT_ZCS=7143;
ZaServer.DEFAULT_IMAP_SSL_PORT_ZCS=7993;
ZaServer.DEFAULT_POP3_PORT_ZCS=7110;
ZaServer.DEFAULT_POP3_SSL_PORT_ZCS=7995;
ZaServer.ERR_NOT_CIDR=1;
ZaServer.ERR_NOT_STARTING_ADDR=2;
ZaServer.DOT_TO_CIDR={};
ZaServer.DOT_TO_CIDR["0x80000000"]=ZaServer.DOT_TO_CIDR["128.0.0.0"]=1;
ZaServer.DOT_TO_CIDR["0xc0000000"]=ZaServer.DOT_TO_CIDR["192.0.0.0"]=2;
ZaServer.DOT_TO_CIDR["0xe0000000"]=ZaServer.DOT_TO_CIDR["224.0.0.0"]=3;
ZaServer.DOT_TO_CIDR["0xf0000000"]=ZaServer.DOT_TO_CIDR["240.0.0.0"]=4;
ZaServer.DOT_TO_CIDR["0xf8000000"]=ZaServer.DOT_TO_CIDR["248.0.0.0"]=5;
ZaServer.DOT_TO_CIDR["0xfc000000"]=ZaServer.DOT_TO_CIDR["252.0.0.0"]=6;
ZaServer.DOT_TO_CIDR["0xfe000000"]=ZaServer.DOT_TO_CIDR["254.0.0.0"]=7;
ZaServer.DOT_TO_CIDR["0xff000000"]=ZaServer.DOT_TO_CIDR["255.0.0.0"]=8;
ZaServer.DOT_TO_CIDR["0xff800000"]=ZaServer.DOT_TO_CIDR["255.128.0.0"]=9;
ZaServer.DOT_TO_CIDR["0xffc00000"]=ZaServer.DOT_TO_CIDR["255.192.0.0"]=10;
ZaServer.DOT_TO_CIDR["0xffe00000"]=ZaServer.DOT_TO_CIDR["255.224.0.0"]=11;
ZaServer.DOT_TO_CIDR["0xfff00000"]=ZaServer.DOT_TO_CIDR["255.240.0.0"]=12;
ZaServer.DOT_TO_CIDR["0xfff80000"]=ZaServer.DOT_TO_CIDR["255.248.0.0"]=13;
ZaServer.DOT_TO_CIDR["0xfffc0000"]=ZaServer.DOT_TO_CIDR["255.252.0.0"]=14;
ZaServer.DOT_TO_CIDR["0xfffe0000"]=ZaServer.DOT_TO_CIDR["255.254.0.0"]=15;
ZaServer.DOT_TO_CIDR["0xffff0000"]=ZaServer.DOT_TO_CIDR["255.255.0.0"]=16;
ZaServer.DOT_TO_CIDR["0xffff8000"]=ZaServer.DOT_TO_CIDR["255.255.128.0"]=17;
ZaServer.DOT_TO_CIDR["0xffffc000"]=ZaServer.DOT_TO_CIDR["255.255.192.0"]=16;
ZaServer.DOT_TO_CIDR["0xffffe000"]=ZaServer.DOT_TO_CIDR["255.255.224.0"]=19;
ZaServer.DOT_TO_CIDR["0xfffff000"]=ZaServer.DOT_TO_CIDR["255.255.240.0"]=20;
ZaServer.DOT_TO_CIDR["0xfffff800"]=ZaServer.DOT_TO_CIDR["255.255.248.0"]=21;
ZaServer.DOT_TO_CIDR["0xfffffc00"]=ZaServer.DOT_TO_CIDR["255.255.252.0"]=22;
ZaServer.DOT_TO_CIDR["0xfffffe00"]=ZaServer.DOT_TO_CIDR["255.255.254.0"]=23;
ZaServer.DOT_TO_CIDR["0xffffff00"]=ZaServer.DOT_TO_CIDR["255.255.255.0"]=24;
ZaServer.DOT_TO_CIDR["0xffffff80"]=ZaServer.DOT_TO_CIDR["255.255.255.128"]=25;
ZaServer.DOT_TO_CIDR["0xffffffc0"]=ZaServer.DOT_TO_CIDR["255.255.255.192"]=26;
ZaServer.DOT_TO_CIDR["0xffffffe0"]=ZaServer.DOT_TO_CIDR["255.255.255.224"]=27;
ZaServer.DOT_TO_CIDR["0xfffffff0"]=ZaServer.DOT_TO_CIDR["255.255.255.240"]=28;
ZaServer.DOT_TO_CIDR["0xfffffff8"]=ZaServer.DOT_TO_CIDR["255.255.255.248"]=29;
ZaServer.DOT_TO_CIDR["0xfffffffc"]=ZaServer.DOT_TO_CIDR["255.255.255.252"]=30;
ZaServer.DOT_TO_CIDR["0xfffffffe"]=ZaServer.DOT_TO_CIDR["255.255.255.254"]=31;
ZaServer.DOT_TO_CIDR["0xffffffff"]=ZaServer.DOT_TO_CIDR["255.255.255.255"]=32;
ZaServer.FLUSH_CACHE_RIGHT="flushCache";
ZaServer.MANAGE_VOLUME_RIGHT="manageVolume";
ZaServer.RIGHT_GET_SESSIONS="getSessions";
ZaServer.isValidPostfixSubnetString=function(l){var f=l.indexOf("/");
var g=l.lastIndexOf("/");
if(f==-1||f!=g){return ZaServer.ERR_NOT_CIDR
}var e=parseInt(l.substr(g+1,(l.length-g-1)));
if(isNaN(e)||e==""||e==null||e<1){return ZaServer.ERR_NOT_CIDR
}var h=l.substr(0,g);
var d=ZaServer.octetsToLong(h);
if(d<0){return ZaServer.ERR_NOT_CIDR
}var k=0;
var c=32-e;
for(var b=31;
b>=c;
b--){k+=Math.pow(2,b)
}if(d!=ZaServer.applyMask(d,k)){return ZaServer.ERR_NOT_STARTING_ADDR
}return 0
};
ZaServer.iGetNumNetBits=function(b){var e=b.indexOf("/");
var d=b.lastIndexOf("/");
var c=parseInt(b.substr(d+1,(b.length-d-1)));
return c
};
ZaServer.oGetStartingAddress=function(b){return ZaServer.longToOctets(ZaServer.lGetStartingAddress(b))
};
ZaServer.lGetStartingAddress=function(l){var f=ZaServer.iGetNumNetBits(l);
var g=l.lastIndexOf("/");
var h=l.substr(0,g);
var e=ZaServer.octetsToLong(h);
var k=0;
var d=32-f;
for(var b=31;
b>=d;
b--){k+=Math.pow(2,b)
}var c=ZaServer.applyMask(e,k);
return c
};
ZaServer.lGetEndingAddress=function(b,d){var c=b+Math.pow(2,(32-d))-1;
return c
};
ZaServer.applyMask=function(c,b){var d=(c&b);
if(d>=0){return d
}else{return(4294967296+d)
}};
ZaServer.octetsToLong=function(k){var h=/^[A-Fa-f0-9:.]+$/;
if(h.test(k)){var d=k.indexOf(".");
var c=k.indexOf(":");
var b=k.indexOf("::");
if(b!=-1){var l=k.split("::");
if(l.length!=2){return -1
}else{if(d==-1&&c>-1){octetsub0=l[0].split(":");
octetsub1=l[1].split(":");
if(octetsub0.length+octetsub1.length>7){return -1
}else{for(var e=0;
e<octetsub0.length;
e++){if(octetsub0[e].length>4){return -1
}}for(var e=0;
e<octetsub1.length;
e++){if(octetsub1[e].length>4){return -1
}}}}else{if((d>-1)){if(l[0]!=""){return -1
}else{octetsub=l[1].split(".");
for(var e=0;
e<octetsub.length;
e++){if(octetsub[e]>parseInt("255")){return -1
}}}}}}return 0
}if(d!=-1){var l=k.split(".");
if(l.length!=4){return -1
}else{for(var f=0;
f<l.length;
f++){var e=l[f];
if(e>parseInt("255")){return -1
}}var g=Math.pow(256,3)*parseInt(l[0])+Math.pow(256,2)*parseInt(l[1])+Math.pow(256,1)*parseInt(l[2])+parseInt(l[3]);
return g
}}if(c!=-1){var l=k.split(":");
if(l.length!=8){return -1
}else{for(var f=0;
f<l.length;
f++){if(l[f].length>4){return -1
}}return 0
}}}return -1
};
ZaServer.longToOctets=function(b){var f=Math.floor(b/Math.pow(256,3));
var e=Math.floor((b%Math.pow(256,3))/Math.pow(256,2));
var d=Math.floor(((b%Math.pow(256,3))%Math.pow(256,2))/Math.pow(256,1));
var c=Math.floor((((b%Math.pow(256,3))%Math.pow(256,2))%Math.pow(256,1))/Math.pow(256,0));
return[f,e,d,c].join(".")
};
ZaServer.volumeTypeChoices=new XFormChoices({1:ZaMsg.VM_VOLUME_Msg,10:ZaMsg.VM_VOLUME_Index},XFormChoices.HASH);
ZaServer.volumeObjModel={items:[{id:ZaServer.A_isCurrentVolume,type:_ENUM_,choices:[false,true]},{id:ZaServer.A_VolumeId,type:_NUMBER_},{id:ZaServer.A_VolumeName,type:_STRING_},{id:ZaServer.A_VolumeType,type:_ENUM_,choices:ZaServer.volumeTypes,defaultValue:ZaServer.MSG},{id:ZaServer.A_VolumeRootPath,type:_STRING_},{id:ZaServer.A_VolumeCompressBlobs,type:_ENUM_,choices:[false,true],defaultValue:true},{id:ZaServer.A_VolumeCompressionThreshold,type:_NUMBER_,defaultValue:4096},{id:"_index",type:_NUMBER_}],type:_OBJECT_};
ZaServer.myXModel={items:[{id:ZaItem.A_zimbraId,type:_STRING_,ref:"attrs/"+ZaItem.A_zimbraId},{id:ZaItem.A_zimbraCreateTimestamp,ref:"attrs/"+ZaItem.A_zimbraCreateTimestamp},{id:ZaServer.A_name,ref:"attrs/"+ZaServer.A_name,type:_STRING_},ZaItem.descriptionModelItem,{id:ZaServer.A_notes,ref:"attrs/"+ZaServer.A_notes,type:_STRING_,maxLength:1024},{id:ZaServer.A_Service,ref:"attrs/"+ZaServer.A_Service,type:_STRING_,maxLength:256},{id:ZaServer.A_ServiceHostname,ref:"attrs/"+ZaServer.A_ServiceHostname,type:_HOSTNAME_OR_IP_,maxLength:256},{id:ZaServer.A_zimbraPolicydServiceEnabled,ref:"attrs/"+ZaServer.A_zimbraPolicydServiceEnabled,type:_ENUM_,choices:[false,true]},{id:ZaServer.A_zimbraLdapServiceEnabled,ref:"attrs/"+ZaServer.A_zimbraLdapServiceEnabled,type:_ENUM_,choices:[false,true]},{id:ZaServer.A_zimbraMailboxServiceEnabled,ref:"attrs/"+ZaServer.A_zimbraMailboxServiceEnabled,type:_ENUM_,choices:[false,true]},{id:ZaServer.A_zimbraWebClientServiceEnabled,ref:"attrs/"+ZaServer.A_zimbraWebClientServiceEnabled,type:_ENUM_,choices:[false,true]},{id:ZaServer.A_zimbraAdminClientServiceEnabled,ref:"attrs/"+ZaServer.A_zimbraAdminClientServiceEnabled,type:_ENUM_,choices:[false,true]},{id:ZaServer.A_zimbraMailClientServiceEnabled,ref:"attrs/"+ZaServer.A_zimbraMailClientServiceEnabled,type:_ENUM_,choices:[false,true]},{id:ZaServer.A_zimbraZimletServiceEnabled,ref:"attrs/"+ZaServer.A_zimbraZimletServiceEnabled,type:_ENUM_,choices:[false,true]},{id:ZaServer.A_zimbraMtaServiceEnabled,ref:"attrs/"+ZaServer.A_zimbraMtaServiceEnabled,type:_ENUM_,choices:[false,true]},{id:ZaServer.A_zimbraSnmpServiceEnabled,ref:"attrs/"+ZaServer.A_zimbraSnmpServiceEnabled,type:_ENUM_,choices:[false,true]},{id:ZaServer.A_zimbraAntiVirusServiceEnabled,ref:"attrs/"+ZaServer.A_zimbraAntiVirusServiceEnabled,type:_ENUM_,choices:[false,true]},{id:ZaServer.A_zimbraAntiSpamServiceEnabled,ref:"attrs/"+ZaServer.A_zimbraAntiSpamServiceEnabled,type:_ENUM_,choices:[false,true]},{id:ZaServer.A_zimbraOpenDKIMServiceEnabled,ref:"attrs/"+ZaServer.A_zimbraOpenDKIMServiceEnabled,type:_ENUM_,choices:[false,true]},{id:ZaServer.A_zimbraSpellServiceEnabled,ref:"attrs/"+ZaServer.A_zimbraSpellServiceEnabled,type:_ENUM_,choices:[false,true]},{id:ZaServer.A_zimbraLoggerServiceEnabled,ref:"attrs/"+ZaServer.A_zimbraLoggerServiceEnabled,type:_ENUM_,choices:[false,true]},{id:ZaServer.A_zimbraVmwareHAServiceEnabled,ref:"attrs/"+ZaServer.A_zimbraVmwareHAServiceEnabled,type:_ENUM_,choices:[false,true]},{id:ZaServer.A_zimbraMailProxyServiceEnabled,ref:"attrs/"+ZaServer.A_zimbraMailProxyServiceEnabled,type:_ENUM_,choices:[false,true]},{id:ZaServer.A_zimbraReverseProxyLookupTarget,ref:"attrs/"+ZaServer.A_zimbraReverseProxyLookupTarget,type:_COS_ENUM_,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaServer.A_zimbraLdapServiceInstalled,ref:"attrs/"+ZaServer.A_zimbraLdapServiceInstalled,type:_ENUM_,choices:[false,true]},{id:ZaServer.A_zimbraMailboxServiceInstalled,ref:"attrs/"+ZaServer.A_zimbraMailboxServiceInstalled,type:_ENUM_,choices:[false,true]},{id:ZaServer.A_zimbraMtaServiceInstalled,ref:"attrs/"+ZaServer.A_zimbraMtaServiceInstalled,type:_ENUM_,choices:[false,true]},{id:ZaServer.A_zimbraSnmpServiceInstalled,ref:"attrs/"+ZaServer.A_zimbraSnmpServiceInstalled,type:_ENUM_,choices:[false,true]},{id:ZaServer.A_zimbraAntiVirusServiceInstalled,ref:"attrs/"+ZaServer.A_zimbraAntiVirusServiceInstalled,type:_ENUM_,choices:[false,true]},{id:ZaServer.A_zimbraAntiSpamServiceInstalled,ref:"attrs/"+ZaServer.A_zimbraAntiSpamServiceInstalled,type:_ENUM_,choices:[false,true]},{id:ZaServer.A_zimbraOpenDKIMServiceInstalled,ref:"attrs/"+ZaServer.A_zimbraOpenDKIMServiceInstalled,type:_ENUM_,choices:[false,true]},{id:ZaServer.A_zimbraSpellServiceInstalled,ref:"attrs/"+ZaServer.A_zimbraSpellServiceInstalled,type:_ENUM_,choices:[false,true]},{id:ZaServer.A_zimbraLoggerServiceInstalled,ref:"attrs/"+ZaServer.A_zimbraLoggerServiceInstalled,type:_ENUM_,choices:[false,true]},{id:ZaServer.A_zimbraMailProxyServiceInstalled,ref:"attrs/"+ZaServer.A_zimbraMailProxyServiceInstalled,type:_ENUM_,choices:[false,true]},{id:ZaServer.A_zimbraVmwareHAServiceInstalled,ref:"attrs/"+ZaServer.A_zimbraVmwareHAServiceInstalled,type:_ENUM_,choices:[false,true]},{id:ZaServer.A_zimbraPolicydServiceInstalled,ref:"attrs/"+ZaServer.A_zimbraPolicydServiceInstalled,type:_ENUM_,choices:[false,true]},{id:ZaServer.A_zimbraMtaSaslAuthEnable,ref:"attrs/"+ZaServer.A_zimbraMtaSaslAuthEnable,type:_COS_ENUM_,choices:["yes","no"]},{id:ZaServer.A_zimbraMtaTlsAuthOnly,ref:"attrs/"+ZaServer.A_zimbraMtaTlsAuthOnly,type:_COS_ENUM_,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaServer.A_zimbraMtaRelayHost,ref:"attrs/"+ZaServer.A_zimbraMtaRelayHost,type:_COS_HOSTNAME_OR_IP_,maxLength:256},{id:ZaServer.A_zimbraMtaFallbackRelayHost,ref:"attrs/"+ZaServer.A_zimbraMtaFallbackRelayHost,type:_COS_HOSTNAME_OR_IP_,maxLength:256},{id:ZaServer.A_zimbraMtaMyNetworks,ref:"attrs/"+ZaServer.A_zimbraMtaMyNetworks,type:_COS_STRING_,maxLength:10240},{id:ZaServer.A_zimbraMtaSmtpDnsSupportLevel,ref:"attrs/"+ZaServer.A_zimbraMtaSmtpDnsSupportLevel,type:_COS_ENUM_,choices:ZaSettings.smtpDnsSupportLevel},{id:ZaServer.A_zimbraMilterBindAddress,ref:"attrs/"+ZaServer.A_zimbraMilterBindAddress,type:_LIST_,listItem:{type:_HOSTNAME_OR_IP_,maxLength:128}},{id:ZaServer.A_zimbraMilterBindPort,ref:"attrs/"+ZaServer.A_zimbraMilterBindPort,type:_COS_PORT_},{id:ZaServer.A_zimbraMilterServerEnabled,ref:"attrs/"+ZaServer.A_zimbraMilterServerEnabled,type:_COS_ENUM_,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaServer.A_zimbraSpnegoAuthTargetName,ref:"attrs/"+ZaServer.A_zimbraSpnegoAuthTargetName,type:_STRING_},{id:ZaServer.A_zimbraSpnegoAuthPrincipal,ref:"attrs/"+ZaServer.A_zimbraSpnegoAuthPrincipal,type:_STRING_},{id:ZaServer.A_zimbraMailSSLClientCertMode,ref:"attrs/"+ZaServer.A_zimbraMailSSLClientCertMode,type:_COS_STRING_,choices:["Disabled","NeedClientAuth","WantClientAuth"]},{id:ZaServer.A_zimbraMailSSLClientCertPort,ref:"attrs/"+ZaServer.A_zimbraMailSSLClientCertPort,type:_COS_PORT_},{id:ZaServer.A_zimbraMailSSLProxyClientCertPort,ref:"attrs/"+ZaServer.A_zimbraMailSSLProxyClientCertPort,type:_COS_PORT_},{id:ZaServer.A_zimbraReverseProxyMailMode,ref:"attrs/"+ZaServer.A_zimbraReverseProxyMailMode,type:_COS_STRING_,choices:["http","https","both","mixed","redirect"]},{id:ZaServer.A_zimbraReverseProxyClientCertMode,ref:"attrs/"+ZaServer.A_zimbraReverseProxyClientCertMode,type:_COS_STRING_,choices:["on","off","optional"]},{id:ZaServer.A_zimbraReverseProxyClientCertCA,ref:"attrs/"+ZaServer.A_zimbraReverseProxyClientCertCA,type:_STRING_},{id:ZaServer.A_zimbraSmtpHostname,ref:"attrs/"+ZaServer.A_zimbraSmtpHostname,type:_COS_LIST_,listItem:{type:_HOSTNAME_OR_IP_,maxLength:256}},{id:ZaServer.A_SmtpPort,ref:"attrs/"+ZaServer.A_SmtpPort,type:_COS_PORT_},{id:ZaServer.A_SmtpTimeout,ref:"attrs/"+ZaServer.A_SmtpTimeout,type:_COS_NUMBER_,minInclusive:0,maxInclusive:2147483647},{id:ZaServer.A_LmtpAdvertisedName,ref:"attrs/"+ZaServer.A_LmtpAdvertisedName,type:_STRING_,maxLength:128},{id:ZaServer.A_LmtpBindAddress,ref:"attrs/"+ZaServer.A_LmtpBindAddress,type:_HOSTNAME_OR_IP_,maxLength:256},{id:ZaServer.A_LmtpBindPort,ref:"attrs/"+ZaServer.A_LmtpBindPort,type:_COS_PORT_},{id:ZaServer.A_zimbraScheduledTaskNumThreads,ref:"attrs/"+ZaServer.A_zimbraScheduledTaskNumThreads,type:_COS_INT_,minInclusive:1,maxInclusive:2147483647},{id:ZaServer.A_zimbraMailPurgeSleepInterval,ref:"attrs/"+ZaServer.A_zimbraMailPurgeSleepInterval,type:_COS_MLIFETIME_,minInclusive:0,maxInclusive:2147483647},{id:ZaServer.A_zimbraPop3NumThreads,ref:"attrs/"+ZaServer.A_zimbraPop3NumThreads,type:_COS_INT_,minInclusive:0,maxInclusive:2147483647},{id:ZaServer.A_zimbraImapNumThreads,ref:"attrs/"+ZaServer.A_zimbraImapNumThreads,type:_COS_INT_,minInclusive:0,maxInclusive:2147483647},{id:ZaServer.A_Pop3AdvertisedName,ref:"attrs/"+ZaServer.A_Pop3AdvertisedName,type:_STRING_,maxLength:128},{id:ZaServer.A_Pop3BindAddress,ref:"attrs/"+ZaServer.A_Pop3BindAddress,type:_HOSTNAME_OR_IP_,maxLength:128},{id:ZaServer.A_Pop3AdvertisedName,ref:"attrs/"+ZaServer.A_Pop3AdvertisedName,type:_STRING_,maxLength:128},{id:ZaServer.A_Pop3BindAddress,ref:"attrs/"+ZaServer.A_Pop3BindAddress,type:_HOSTNAME_OR_IP_,maxLength:128},{id:ZaServer.A_zimbraPop3BindPort,ref:"attrs/"+ZaServer.A_zimbraPop3BindPort,type:_COS_PORT_},{id:ZaServer.A_zimbraPop3SSLBindPort,ref:"attrs/"+ZaServer.A_zimbraPop3SSLBindPort,type:_COS_PORT_},{id:ZaServer.A_Pop3SSLServerEnabled,ref:"attrs/"+ZaServer.A_Pop3SSLServerEnabled,type:_COS_ENUM_,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaServer.A_Pop3ServerEnabled,ref:"attrs/"+ZaServer.A_Pop3ServerEnabled,type:_COS_ENUM_,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaServer.A_Pop3CleartextLoginEnabled,ref:"attrs/"+ZaServer.A_Pop3CleartextLoginEnabled,type:_COS_ENUM_,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaServer.A_zimbraImapBindPort,ref:"attrs/"+ZaServer.A_zimbraImapBindPort,type:_COS_PORT_},{id:ZaServer.A_ImapServerEnabled,ref:"attrs/"+ZaServer.A_ImapServerEnabled,type:_COS_ENUM_,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaServer.A_ImapSSLBindPort,ref:"attrs/"+ZaServer.A_ImapSSLBindPort,type:_COS_PORT_},{id:ZaServer.A_ImapSSLServerEnabled,ref:"attrs/"+ZaServer.A_ImapSSLServerEnabled,type:_COS_ENUM_,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaServer.A_zimbraMailBindAddress,ref:"attrs/"+ZaServer.A_zimbraMailBindAddress,type:_IP_},{id:ZaServer.A_zimbraMailSSLBindAddress,ref:"attrs/"+ZaServer.A_zimbraMailSSLBindAddress,type:_IP_},{id:ZaServer.A_zimbraMailSSLClientCertBindAddress,ref:"attrs/"+ZaServer.A_zimbraMailSSLClientCertBindAddress,type:_IP_},{id:ZaServer.A_zimbraAdminBindAddress,ref:"attrs/"+ZaServer.A_zimbraAdminBindAddress,type:_IP_},{id:ZaServer.A_zimbraAutoProvPollingInterval,ref:"attrs/"+ZaServer.A_zimbraAutoProvPollingInterval,type:_COS_MLIFETIME_,minInclusive:0},{id:ZaServer.A_zimbraAutoProvScheduledDomains,ref:"attrs/"+ZaServer.A_zimbraAutoProvScheduledDomains,type:_LIST_,listItem:{type:_STRING_,maxLength:256}},{id:ZaServer.A_ImapCleartextLoginEnabled,ref:"attrs/"+ZaServer.A_ImapCleartextLoginEnabled,type:_COS_ENUM_,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaServer.A_RedologEnabled,ref:"attrs/"+ZaServer.A_RedologEnabled,type:_ENUM_,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaServer.A_RedologLogPath,ref:"attrs/"+ZaServer.A_RedologLogPath,type:_STRING_},{id:ZaServer.A_RedologArchiveDir,ref:"attrs/"+ZaServer.A_RedologArchiveDir,type:_STRING_},{id:ZaServer.A_RedologBacklogDir,ref:"attrs/"+ZaServer.A_RedologBacklogDir,type:_STRING_},{id:ZaServer.A_RedologRolloverFileSizeKB,ref:"attrs/"+ZaServer.A_RedologRolloverFileSizeKB,type:_NUMBER_,minInclusive:0,maxInclusive:2147483647},{id:ZaServer.A_RedologFsyncIntervalMS,ref:"attrs/"+ZaServer.A_RedologFsyncIntervalMS,type:_NUMBER_,minInclusive:0,maxInclusive:2147483647},{id:ZaServer.A_MasterRedologClientConnections,ref:"attrs/"+ZaServer.A_MasterRedologClientConnections,type:_STRING_},{id:ZaServer.A_MasterRedologClientTimeoutSec,ref:"attrs/"+ZaServer.A_MasterRedologClientTimeoutSec,type:_STRING_},{id:ZaServer.A_MasterRedologClientTcpNoDelay,ref:"attrs/"+ZaServer.A_MasterRedologClientTcpNoDelay,type:_STRING_},{id:ZaServer.A_zimbraUserServicesEnabled,ref:"attrs/"+ZaServer.A_zimbraUserServicesEnabled,type:_ENUM_,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaServer.A_Volumes,ref:ZaServer.A_Volumes,type:_LIST_,listItem:ZaServer.volumeObjModel},{id:ZaServer.A_showVolumes,ref:ZaServer.A_showVolumes,type:_ENUM_,choices:[false,true]},{id:ZaServer.A2_volume_selection_cache,ref:ZaServer.A2_volume_selection_cache,type:_LIST_},{id:ZaServer.A_CurrentIndexVolumeId,ref:ZaServer.A_CurrentIndexVolumeId,type:_NUMBER_},{id:ZaServer.A_CurrentMsgVolumeId,ref:ZaServer.A_CurrentMsgVolumeId,type:_NUMBER_},{id:ZaServer.A_zimbraApplianceVendor,ref:"attrs/"+ZaServer.A_zimbraApplianceVendor,type:_STRING_,maxLength:256},{id:ZaServer.A_zimbraApplianceName,ref:"attrs/"+ZaServer.A_zimbraApplianceName,type:_STRING_,maxLength:256},{id:ZaServer.A_zimbraApplianceVersion,ref:"attrs/"+ZaServer.A_zimbraApplianceVersion,type:_STRING_,maxLength:256},{id:ZaServer.A_zimbraApplianceFullVersion,ref:"attrs/"+ZaServer.A_zimbraApplianceFullVersion,type:_STRING_,maxLength:256},{id:ZaServer.A_zimbraApplianceDetails,ref:"attrs/"+ZaServer.A_zimbraApplianceDetails,type:_STRING_,maxLength:256},{id:ZaServer.A_zimbraApplianceDefaultRepUrl,ref:"attrs/"+ZaServer.A_zimbraApplianceDefaultRepUrl,type:_STRING_,maxLength:256},{id:ZaServer.A_zimbraApplianceCustomRepUrl,ref:"attrs/"+ZaServer.A_zimbraApplianceCustomRepUrl,type:_STRING_,maxLength:256},{id:ZaServer.A_zimbraApplianceCustomRepUrlUser,ref:"attrs/"+ZaServer.A_zimbraApplianceCustomRepUrlUser,type:_STRING_,maxLength:256},{id:ZaServer.A_zimbraApplianceCustomRepUrlPass,ref:"attrs/"+ZaServer.A_zimbraApplianceCustomRepUrlPass,type:_STRING_,maxLength:256},{id:ZaServer.A_zimbraApplianceUpdateOption,ref:"attrs/"+ZaServer.A_zimbraApplianceUpdateOption,type:_LIST_},{id:ZaServer.A_zimbraApplianceUpdateType,ref:"attrs/"+ZaServer.A_zimbraApplianceUpdateType,type:_LIST_},{id:ZaServer.A_zimbraApplianceUpdatehourofrun,ref:"attrs/"+ZaServer.A_zimbraApplianceUpdatehourofrun,type:_LIST_}]};
ZaServer.prototype.toString=function(){return this.name
};
ZaServer.staticServerByNameCacheTable=[];
ZaServer.getServerByName=function(d){if(!d){return null
}var c=ZaServer.staticServerByNameCacheTable[d];
if(!c){c=new ZaServer();
try{c.load("name",d,false,true)
}catch(b){throw (b)
}ZaServer.staticServerByNameCacheTable[d]=c
}return c
};
ZaServer.staticServerByIdCacheTable=[];
ZaServer.getServerById=function(b){if(!b){return null
}var d=ZaServer.staticServerByIdCacheTable[b];
if(!d){d=new ZaServer();
try{d.load("id",b,false,true)
}catch(c){throw (c)
}ZaServer.staticServerByIdCacheTable[b]=d
}return d
};
ZaServer.getAllMBSs=function(b,h){var d=AjxSoapDoc.create("GetAllServersRequest",ZaZimbraAdmin.URN,null);
d.getMethod().setAttribute("service","mailbox");
d.getMethod().setAttribute("applyConfig","false");
var g=new Object();
g.soapDoc=d;
g.asyncMode=h?true:false;
g.callback=h?h:null;
if(b){d.setMethodAttribute("attrs",b.join(","))
}var c={controller:ZaApp.getInstance().getCurrentController(),busyMsg:ZaMsg.BUSY_GET_ALL_SERVER};
if(h){ZaRequestMgr.invoke(g,c)
}else{var f=ZaRequestMgr.invoke(g,c).Body.GetAllServersResponse;
var e=new ZaItemList(ZaServer);
e.loadFromJS(f);
return e
}};
ZaServer.getAll=function(b){var d=AjxSoapDoc.create("GetAllServersRequest",ZaZimbraAdmin.URN,null);
d.getMethod().setAttribute("applyConfig","false");
var g=new Object();
g.soapDoc=d;
g.asyncMode=false;
if(b){d.setMethodAttribute("attrs",b.join(","))
}var c={controller:ZaApp.getInstance().getCurrentController(),busyMsg:ZaMsg.BUSY_GET_ALL_SERVER};
var f=ZaRequestMgr.invoke(g,c).Body.GetAllServersResponse;
var e=new ZaItemList(ZaServer);
e.loadFromJS(f);
return e
};
ZaServer.modifyMethod=function(B){if(B.attrs==null){return
}if(ZaItem.hasWritePermission(ZaServer.A_zimbraServiceEnabled,B)){var c=AjxUtil.isString(B.attrs[ZaServer.A_zimbraServiceInstalled])?[B.attrs[ZaServer.A_zimbraServiceInstalled]]:B.attrs[ZaServer.A_zimbraServiceInstalled];
if(c){var l=[];
for(var s=0;
s<c.length;
s++){var A=c[s];
if(A=="vmware-ha"){if(B.attrs["_"+ZaServer.A_zimbraServiceEnabled+"_vmwareha"]){l.push("vmware-ha")
}continue
}if(B.attrs["_"+ZaServer.A_zimbraServiceEnabled+"_"+A]){l.push(A)
}}for(var s=0;
s<ZaServer.servlets.length;
s++){var A=ZaServer.servlets[s];
if(this.attrs["_"+ZaServer.A_zimbraServiceEnabled+"_"+A]){l.push(A)
}}var j=false;
if(this.attrs[ZaServer.A_zimbraServiceEnabled]){var d=AjxUtil.isString(this.attrs[ZaServer.A_zimbraServiceEnabled])?[this.attrs[ZaServer.A_zimbraServiceEnabled]]:this.attrs[ZaServer.A_zimbraServiceEnabled];
j=(l.length!=d.length);
if(!j){for(var s=0;
s<d.length;
s++){var A=d[s];
if(A=="vmware-ha"){if(!B.attrs["_"+ZaServer.A_zimbraServiceEnabled+"_vmware"]){j=true;
break
}else{continue
}}if(!B.attrs["_"+ZaServer.A_zimbraServiceEnabled+"_"+A]){j=true;
break
}}}}if(j){B.attrs[ZaServer.A_zimbraServiceEnabled]=l
}}}if(this.attrs[ZaServer.A_zimbraMailClientServiceEnabled]&&ZaItem.hasRight(ZaServer.MANAGE_VOLUME_RIGHT,this)){if(B[ZaServer.A_RemovedVolumes]){var r=B[ZaServer.A_RemovedVolumes].length;
for(var s=0;
s<r;
s++){if(B[ZaServer.A_RemovedVolumes][s][ZaServer.A_VolumeId]>0){this.deleteVolume(B[ZaServer.A_RemovedVolumes][s][ZaServer.A_VolumeId])
}}}if(B[ZaServer.A_Volumes]){var t=new Array();
var r=B[ZaServer.A_Volumes].length;
for(var s=0;
s<r;
s++){t.push(B[ZaServer.A_Volumes][s])
}r=t.length;
for(var s=0;
s<r;
s++){if(!(t[s][ZaServer.A_VolumeId]>0)&&t[s][ZaServer.A_VolumeName]&&(t[s][ZaServer.A_VolumeRootPath]||t[s][ZaServer.A_VolumePrefix])){var m=this.createVolume(t[s]);
if(m>0){for(var z in ZaServer.currentkeys){if(B[ZaServer.currentkeys[z]]==t[s][ZaServer.A_VolumeId]){B[ZaServer.currentkeys[z]]=m
}}}}}r--;
var b=this[ZaServer.A_Volumes].length;
for(var s=r;
s>=0;
s--){var v=t[s];
var n;
for(var f=0;
f<b;
f++){n=this[ZaServer.A_Volumes][f];
if(n[ZaServer.A_VolumeId]==v[ZaServer.A_VolumeId]){var h=false;
for(var p in n){if(n[p]!=v[p]){h=true;
break
}}if(h){this.modifyVolume(t[s])
}t.splice(s,1)
}}}}for(var z in ZaServer.currentkeys){if(B[ZaServer.currentkeys[z]]&&(!this[ZaServer.currentkeys[z]]||(this[ZaServer.currentkeys[z]]!=B[ZaServer.currentkeys[z]]))){this.setCurrentVolume(B[ZaServer.currentkeys[z]],z)
}}}if(ZaItem.modifyMethodsExt.ZaServer){var u=ZaItem.modifyMethodsExt.ZaServer;
var r=u.length;
for(var s=0;
s<r;
s++){if(typeof(u[s])=="function"){u[s].call(this,B,y)
}}}var q=false;
var y=AjxSoapDoc.create("ModifyServerRequest",ZaZimbraAdmin.URN,null);
y.set("id",this.id);
var g=new Object();
for(var x in B.attrs){if(x==ZaItem.A_objectClass||/^_/.test(x)||x==ZaServer.A_zimbraServiceInstalled||x==ZaItem.A_zimbraACE){continue
}if(!ZaItem.hasWritePermission(x,this)){continue
}q=true;
if(this.attrs[x]!=B.attrs[x]){if(B.attrs[x] instanceof Array){if(!this.attrs[x]){this.attrs[x]=[]
}if(!(this.attrs[x] instanceof Array)){this.attrs[x]=[this.attrs[x]]
}if(B.attrs[x].join(",").valueOf()!=this.attrs[x].join(",").valueOf()){var k=B.attrs[x];
if(k.length>0){for(var s=0;
s<k.length;
s++){var p=y.set("a",k[s]);
p.setAttribute("n",x)
}}else{var p=y.set("a");
p.setAttribute("n",x)
}}}else{var p=y.set("a",B.attrs[x]);
p.setAttribute("n",x)
}}}if(q){var w=new Object();
w.soapDoc=y;
var e={controller:ZaApp.getInstance().getCurrentController(),busyMsg:ZaMsg.BUSY_MODIFY_SERVER};
var o=ZaRequestMgr.invoke(w,e).Body.ModifyServerResponse;
this.initFromJS(o.server[0])
}};
ZaItem.modifyMethods.ZaServer.push(ZaServer.modifyMethod);
ZaServer.prototype.getToolTip=function(){if(!this._toolTip){var c=new Array(20);
var b=0;
c[b++]="<table cellpadding='0' cellspacing='0' border='0'>";
c[b++]="<tr valign='center'><td colspan='2' align='left'>";
c[b++]="<div style='border-bottom: 1px solid black; white-space:nowrap; overflow:hidden;width:350'>";
c[b++]="<table cellpadding='0' cellspacing='0' border='0' style='width:100%;'>";
c[b++]="<tr valign='center'>";
c[b++]="<td><b>"+AjxStringUtil.htmlEncode(this.name)+"</b></td>";
c[b++]="<td align='right'>";
c[b++]=AjxImg.getImageHtml("Server");
c[b++]="</td>";
c[b++]="</table></div></td></tr>";
c[b++]="<tr></tr>";
b=this._addAttrRow(ZaItem.A_description,c,b);
b=this._addAttrRow(ZaItem.A_zimbraId,c,b);
c[b++]="</table>";
this._toolTip=c.join("")
}return this._toolTip
};
ZaServer.loadMethod=function(n,c){var f=n?n:"id";
var j=c?c:this.id;
var o=AjxSoapDoc.create("GetServerRequest",ZaZimbraAdmin.URN,null);
var q=o.set("server",j);
q.setAttribute("by",f);
o.setMethodAttribute("applyConfig","false");
if(!this.getAttrs.all&&!AjxUtil.isEmpty(this.attrsToGet)){o.setMethodAttribute("attrs",this.attrsToGet.join(","))
}var g=new Object();
g.soapDoc=o;
g.asyncMode=false;
var d={controller:ZaApp.getInstance().getCurrentController(),busyMsg:ZaMsg.BUSY_GET_SERVER};
resp=ZaRequestMgr.invoke(g,d);
this.initFromJS(resp.Body.GetServerResponse.server[0]);
o=AjxSoapDoc.create("BatchRequest","urn:zimbra");
o.setMethodAttribute("onerror","continue");
if(this.attrs[ZaServer.A_zimbraMailClientServiceEnabled]&&ZaItem.hasRight(ZaServer.MANAGE_VOLUME_RIGHT,this)){var h=o.set("GetAllVolumesRequest",null,null,ZaZimbraAdmin.URN);
var k=o.set("GetCurrentVolumesRequest",null,null,ZaZimbraAdmin.URN)
}var h=o.set("GetServerNIfsRequest",null,null,ZaZimbraAdmin.URN);
h.setAttribute("type","both");
var e=o.set("server",j,h);
e.setAttribute("by",f);
try{g=new Object();
g.soapDoc=o;
g.asyncMode=false;
if(this.attrs&&this.attrs[ZaServer.A_zimbraMailClientServiceEnabled]){g.targetServer=this.id
}var d={controller:ZaApp.getInstance().getCurrentController(),busyMsg:ZaMsg.BUSY_GET_SERVER};
var b=ZaRequestMgr.invoke(g,d);
this[ZaServer.A_Volumes]=new Array();
if(b.isException&&b.isException()){ZaApp.getInstance().getCurrentController()._handleException(b.getException(),"ZaServer.loadMethod",null,false)
}if(b.Body.BatchResponse){if(b.Body.BatchResponse.Fault){var m=b.Body.BatchResponse.Fault;
if(m instanceof Array){m=m[0]
}if(m){var l=ZmCsfeCommand.faultToEx(m);
ZaApp.getInstance().getCurrentController()._handleException(l,"ZaServer.loadMethod",null,false)
}}var p=b.Body.BatchResponse;
if(p.GetAllVolumesResponse){resp=p.GetAllVolumesResponse[0];
this.parseMyVolumes(resp)
}if(p.GetCurrentVolumesResponse){resp=p.GetCurrentVolumesResponse[0];
this.parseCurrentVolumesResponse(resp)
}if(p.GetServerNIfsResponse){resp=p.GetServerNIfsResponse[0];
this.parseNIFsResponse(resp)
}}}catch(l){ZaApp.getInstance().getCurrentController()._handleException(l,"ZaServer.loadMethod",null,false)
}};
ZaItem.loadMethods.ZaServer.push(ZaServer.loadMethod);
ZaServer.prototype.parseNIFsResponse=function(f){if(f&&f.ni){var e=f.ni;
var d=e.length;
this.nifs=[];
for(var c=0;
c<d;
c++){var b={};
ZaItem.prototype.initFromJS.call(b,e[c]);
this.nifs.push(b)
}}};
ZaServer.prototype.initFromJS=function(f){ZaItem.prototype.initFromJS.call(this,f);
var e=this.attrs[ZaServer.A_zimbraServiceInstalled];
if(e){if(AjxUtil.isString(e)){e=[e]
}for(var d=0;
d<e.length;
d++){var b=e[d];
if(b=="vmware-ha"){this.attrs["_"+ZaServer.A_zimbraServiceInstalled+"_vmwareha"]=true;
this.attrs["_"+ZaServer.A_zimbraServiceEnabled+"_vmwareha"]=false;
continue
}this.attrs["_"+ZaServer.A_zimbraServiceInstalled+"_"+b]=true;
this.attrs["_"+ZaServer.A_zimbraServiceEnabled+"_"+b]=false
}}var c=this.attrs[ZaServer.A_zimbraServiceEnabled];
if(c){if(AjxUtil.isString(c)){c=[c]
}for(var d=0;
d<c.length;
d++){var b=c[d];
if(b=="vmware-ha"){this.attrs["_"+ZaServer.A_zimbraServiceEnabled+"_vmwareha"]=true;
continue
}this.attrs["_"+ZaServer.A_zimbraServiceEnabled+"_"+b]=true
}}this[ZaServer.A_ServiceHostname]=this.attrs[ZaServer.A_ServiceHostname];
this[ZaServer.A_showVolumes]=this.attrs[ZaServer.A_zimbraMailClientServiceEnabled];
if(this.attrs[ZaServer.A_zimbraSmtpHostname]&&!(this.attrs[ZaServer.A_zimbraSmtpHostname] instanceof Array)){this.attrs[ZaServer.A_zimbraSmtpHostname]=[this.attrs[ZaServer.A_zimbraSmtpHostname]]
}if(this._defaultValues&&this._defaultValues.attrs[ZaServer.A_zimbraSmtpHostname]&&!(this._defaultValues.attrs[ZaServer.A_zimbraSmtpHostname] instanceof Array)){this._defaultValues.attrs[ZaServer.A_zimbraSmtpHostname]=[this._defaultValues.attrs[ZaServer.A_zimbraSmtpHostname]]
}if(this.attrs[ZaServer.A_zimbraMilterBindAddress]&&!(this.attrs[ZaServer.A_zimbraMilterBindAddress] instanceof Array)){this.attrs[ZaServer.A_zimbraMilterBindAddress]=[this.attrs[ZaServer.A_zimbraMilterBindAddress]]
}if(this._defaultValues&&this._defaultValues.attrs[ZaServer.A_zimbraMilterBindAddress]&&!(this._defaultValues.attrs[ZaServer.A_zimbraMilterBindAddress] instanceof Array)){this._defaultValues.attrs[ZaServer.A_zimbraMilterBindAddress]=[this._defaultValues.attrs[ZaServer.A_zimbraMilterBindAddress]]
}if(this.attrs[ZaServer.A_zimbraAutoProvScheduledDomains]&&!(this.attrs[ZaServer.A_zimbraAutoProvScheduledDomains] instanceof Array)){this.attrs[ZaServer.A_zimbraAutoProvScheduledDomains]=[this.attrs[ZaServer.A_zimbraAutoProvScheduledDomains]]
}};
ZaServer.prototype.parseCurrentVolumesResponse=function(g){var f=g.volume;
if(f){var d=f.length;
for(var c=0;
c<d;
c++){var e=f[c];
for(var b in ZaServer.currentkeys){if(e[ZaServer.A_VolumeType]==b){this[ZaServer.currentkeys[b]]=e[ZaServer.A_VolumeId]
}}}}};
ZaServer.prototype.parseMyVolumes=function(e){var d=e.volume;
if(d){var c=d.length;
for(var b=0;
b<c;
b++){this[ZaServer.A_Volumes].push(d[b])
}}};
ZaServer.compareVolumesByName=function(d,c){if(d[ZaServer.A_VolumeName]>c[ZaServer.A_VolumeName]){return 1
}if(d[ZaServer.A_VolumeName]<c[ZaServer.A_VolumeName]){return -1
}return 0
};
ZaServer.prototype.loadVolumes=function(e){var c=AjxSoapDoc.create("GetAllVolumesRequest",ZaZimbraAdmin.URN,null);
var d={soapDoc:c,targetServer:this.id,asyncMode:e?true:false,callback:e?e:null};
var b={controller:ZaApp.getInstance().getCurrentController(),busyMsg:ZaMsg.BUSY_LOADING_VOL};
ZaRequestMgr.invoke(d,b)
};
ZaServer.prototype.deleteVolume=function(f,e){if(!f){return false
}var c=AjxSoapDoc.create("DeleteVolumeRequest",ZaZimbraAdmin.URN,null);
c.getMethod().setAttribute(ZaServer.A_VolumeId,f);
var d={soapDoc:c,targetServer:this.id,asyncMode:e?true:false,callback:e?e:null};
var b={controller:ZaApp.getInstance().getCurrentController(),busyMsg:ZaMsg.BUSY_DELETE_VOL};
ZaRequestMgr.invoke(d,b)
};
ZaServer.prototype.createVolume=function(e){if(!e){return false
}var d=AjxSoapDoc.create("CreateVolumeRequest",ZaZimbraAdmin.URN,null);
var f=d.set("volume",null);
f.setAttribute("type",e[ZaServer.A_VolumeType]);
f.setAttribute("name",e[ZaServer.A_VolumeName]);
f.setAttribute("rootpath",e[ZaServer.A_VolumeRootPath]);
f.setAttribute("compressBlobs",e[ZaServer.A_VolumeCompressBlobs]);
f.setAttribute("compressionThreshold",e[ZaServer.A_VolumeCompressionThreshold]);
var g={soapDoc:d,targetServer:this.id,asyncMode:false};
var c={controller:ZaApp.getInstance().getCurrentController(),busyMsg:ZaMsg.BUSY_CREATE_VOL};
var b=ZaRequestMgr.invoke(g,c);
if(b.Body&&b.Body.CreateVolumeResponse&&b.Body.CreateVolumeResponse.volume){return b.Body.CreateVolumeResponse.volume[0][ZaServer.A_VolumeId]
}};
ZaServer.prototype.modifyVolume=function(d){if(!d){return false
}var c=AjxSoapDoc.create("ModifyVolumeRequest",ZaZimbraAdmin.URN,null);
c.getMethod().setAttribute(ZaServer.A_VolumeId,d[ZaServer.A_VolumeId]);
var e=c.set("volume",null);
e.setAttribute("name",d[ZaServer.A_VolumeName]);
if(!d[ZaServer.A_VolumeStoreType]||d[ZaServer.A_VolumeStoreType]===ZaServer.A_VolumeStoreTypeInternal){e.setAttribute("type",d[ZaServer.A_VolumeType]);
e.setAttribute("rootpath",d[ZaServer.A_VolumeRootPath]);
e.setAttribute("compressBlobs",d[ZaServer.A_VolumeCompressBlobs]);
e.setAttribute("compressionThreshold",d[ZaServer.A_VolumeCompressionThreshold])
}var f={soapDoc:c,targetServer:this.id,asyncMode:false};
var b={controller:ZaApp.getInstance().getCurrentController(),busyMsg:ZaMsg.BUSY_MODIFY_VOL};
ZaRequestMgr.invoke(f,b)
};
ZaServer.prototype.setCurrentVolume=function(f,d){if(!f||!d){return false
}var c=AjxSoapDoc.create("SetCurrentVolumeRequest",ZaZimbraAdmin.URN,null);
c.getMethod().setAttribute(ZaServer.A_VolumeType,d);
c.getMethod().setAttribute(ZaServer.A_VolumeId,f);
var e={soapDoc:c,targetServer:this.id,asyncMode:false};
var b={controller:ZaApp.getInstance().getCurrentController(),busyMsg:ZaMsg.BUSY_SET_VOL};
ZaRequestMgr.invoke(e,b)
};
ZaServer.initMethod=function(){this.attrs=new Object();
this.id="";
this.name=""
};
ZaItem.initMethods.ZaServer.push(ZaServer.initMethod);
ZaServer.flushCache=function(g){var f=AjxSoapDoc.create("FlushCacheRequest",ZaZimbraAdmin.URN,null);
var c=f.set("cache",null);
var e=[];
if(g.flushSkin){e.push("skin")
}if(g.flushLocale){e.push("locale")
}if(g.flushZimlet){e.push("zimlet")
}c.setAttribute("type",e.join(","));
var d={controller:ZaApp.getInstance().getCurrentController(),busyMsg:g.busyMsg?g.busyMsg:ZaMsg.BUSY_FLUSH_CACHE,busyId:g.busyId};
var b={soapDoc:f,targetServer:g.serverId?g.serverId:g.serverList[g.ix].attrs[ZaItem.A_zimbraId],asyncMode:g.callback?true:false,callback:g.callback?g.callback:null};
ZaRequestMgr.invoke(b,d)
}
}if(AjxPackage.define("zimbraAdmin.zimlets.model.ZaZimlet")){ZaZimlet=function(){ZaItem.call(this,"ZaZimlet");
this.label="";
this.type=ZaItem.ZIMLET;
this[ZaModel.currentStep]=1
};
ZaZimlet.prototype=new ZaItem;
ZaZimlet.prototype.constructor=ZaZimlet;
ZaItem.loadMethods.ZaZimlet=new Array();
ZaItem.initMethods.ZaZimlet=new Array();
ZaZimlet.NULL_ZIMLET="com_zimbra_noop";
ZaZimlet.A_name="name";
ZaZimlet.A_zimbraZimletEnabled="zimbraZimletEnabled";
ZaZimlet.A_zimbraZimletPriority="zimbraZimletPriority";
ZaZimlet.A_zimbraZimletIsExtension="zimbraZimletIsExtension";
ZaZimlet.A_zimbraZimletKeyword="zimbraZimletKeyword";
ZaZimlet.A_zimbraZimletVersion="zimbraZimletVersion";
ZaZimlet.A_zimbraZimletDescription="zimbraZimletDescription";
ZaZimlet.A_zimbraZimletIndexingEnabled="zimbraZimletIndexingEnabled";
ZaZimlet.A_zimbraZimletStoreMatched="zimbraZimletStoreMatched";
ZaZimlet.A_zimbraZimletHandlerClass="zimbraZimletHandlerClass";
ZaZimlet.A_zimbraZimletHandlerConfig="zimbraZimletHandlerConfig";
ZaZimlet.A_zimbraZimletContentObject="zimbraZimletContentObject";
ZaZimlet.A_zimbraZimletPanelItem="zimbraZimletPanelItem";
ZaZimlet.A_zimbraCreateTimestamp="zimbraCreateTimestamp";
ZaZimlet.A_zimbraZimletScript="zimbraZimletScript";
ZaZimlet.A_zimbraZimletServerIndexRegex="zimbraZimletServerIndexRegex";
ZaZimlet.A_zimbraAdminExtDisableUIUndeploy="zimbraAdminExtDisableUIUndeploy";
ZaZimlet.A_attachmentId="attId";
ZaZimlet.A_uploadStatus="uploadStatus";
ZaZimlet.A_deployStatus="deployStatus";
ZaZimlet.A_uploadStatusMsg="uploadStatusMsg";
ZaZimlet.A_deployStatusMsg="deployStatusMsg";
ZaZimlet.A_statusMsg="statusMsg";
ZaZimlet.EXCLUDE_MAIL="mail";
ZaZimlet.EXCLUDE_EXTENSIONS="extension";
ZaZimlet.EXCLUDE_NONE="none";
ZaZimlet.STATUS_FAILED="failed";
ZaZimlet.STATUS_SUCCEEDED="succeeded";
ZaZimlet.STATUS_PENDING="pending";
ZaZimlet.ACTION_DEPLOY_ALL="deployAll";
ZaZimlet.ACTION_DEPLOY_LOCAL="deployLocal";
ZaZimlet.ACTION_DEPLOY_STATUS="status";
ZaZimlet.A_progress="progress";
ZaZimlet.A_flushCache="flushCache";
ZaZimlet.prototype.toString=function(){return this.name
};
ZaZimlet.getAll=function(c,h){var b=c?c:"none";
var e=AjxSoapDoc.create("GetAllZimletsRequest",ZaZimbraAdmin.URN,null);
e.getMethod().setAttribute("exclude",b);
var g={soapDoc:e,asyncMode:Boolean(h),callback:h&&new AjxCallback(ZaZimlet._handleGetAllResponse,[h])};
var d={controller:ZaApp.getInstance().getCurrentController(),busyMsg:ZaMsg.BUSY_GET_ZIMLET};
var f=ZaRequestMgr.invoke(g,d);
return f&&ZaZimlet._handleGetAllResponse(null,f)
};
ZaZimlet._handleGetAllResponse=function(m,d){var g=new ZaItemList(ZaZimlet);
d=d instanceof ZmCsfeResult?d.getResponse():d;
g.loadFromJS(d.Body.GetAllZimletsResponse);
if(ZaZimlet.zimlets==null){ZaZimlet.zimlets=new Object()
}var h=new Object();
var c=g.getVector()._array;
for(var f in c){var k=c[f];
h[k[ZaZimlet.A_name]]=k
}var n;
n=new ZaItemList(ZaZimlet);
for(var l in h){var b=ZaZimlet.zimlets[l];
var e=h[l];
if(!b){ZaZimlet.zimlets[l]=e;
n.add(e)
}else{if(e.attrs[ZaZimlet.A_zimbraCreateTimestamp]!=b.attrs[ZaZimlet.A_zimbraCreateTimestamp]){ZaZimlet.zimlets[l]=e;
n.add(e)
}}}if(m){var j=m.args;
j=j?(j instanceof Array?j:[j]):[];
m=new AjxCallback(m.obj,m.func,j.concat(g));
if(n.size()==0){m.run()
}else{ZaZimlet._handleGetAllResources(n,m)
}}else{if(n.size()>0){ZaZimlet._handleGetAllResources(n)
}}return g
};
ZaZimlet._handleGetAllResources=function(e,h){var d=[];
for(var g in e.getIdHash()){var b=e.getItemById(g);
d.push({src:["/res/",b.name,".js?v=",appVers,ZaZimbraAdmin.LOCALE_QS].join(""),id:"res_"+b.name})
}var f=appContextPath;
var c=null;
AjxInclude(d,f,h,c)
};
ZaZimlet.prototype.isEnabled=function(){var b=this.attrs[ZaZimlet.A_zimbraZimletEnabled];
if(b!=null&&b=="TRUE"){return true
}else{return false
}};
ZaZimlet.__RE_MSG=/\$\{msg\.(.*?)\}/g;
ZaZimlet.prototype.getDescription=function(){var c=null;
var b=null;
if(this.attrs&&this.attrs[ZaZimlet.A_zimbraZimletDescription]){b=this[ZaZimlet.A_name];
c=this.attrs[ZaZimlet.A_zimbraZimletDescription];
c=(c||"").replace(ZaZimlet.__RE_MSG,function(e,d){var f=window[b];
return(f&&f[d])||e
})
}return c
};
ZaZimlet.prototype.getDisplayName=function(){var c=this[ZaZimlet.A_name];
var d=window[c];
var b=(d&&(d.label||d.zimletLabel))||"";
return b
};
ZaZimlet.prototype.getLabel=function(){var c=null;
var b=this[ZaZimlet.A_name];
if(this.label){c=this.label;
c=(c||"").replace(ZaZimlet.__RE_MSG,function(f,e){var g=window[b];
return(g&&g[e])||f
})
}if(!c){var d=window[b];
c=(d&&(d.label||d.zimletLabel))||b
}return c
};
ZaZimlet.prototype.enable=function(b,h){var e=AjxSoapDoc.create("ModifyZimletRequest",ZaZimbraAdmin.URN,null);
var g=e.set("zimlet","");
g.setAttribute("name",this.name);
var d=e.set("status","",g);
if(b){d.setAttribute("value","enabled");
this.attrs[ZaZimlet.A_zimbraZimletEnabled]="TRUE"
}else{d.setAttribute("value","disabled");
this.attrs[ZaZimlet.A_zimbraZimletEnabled]="FALSE"
}var f=new Object();
f.soapDoc=e;
if(h){f.asyncMode=true;
f.callback=h
}var c={controller:ZaApp.getInstance().getCurrentController(),busyMsg:ZaMsg.BUSY_MODIFY_ZIMLET};
ZaRequestMgr.invoke(f,c)
};
ZaZimlet.prototype.modify=function(b){};
ZaZimlet.prototype.getToolTip=function(){if(!this._toolTip){var c=new Array(20);
var b=0;
c[b++]="<table cellpadding='0' cellspacing='0' border='0'>";
c[b++]="<tr valign='center'><td colspan='2' align='left'>";
c[b++]="<div style='border-bottom: 1px solid black; white-space:nowrap; overflow:hidden;width:350'>";
c[b++]="<table cellpadding='0' cellspacing='0' border='0' style='width:100%;'>";
c[b++]="<tr valign='center'>";
c[b++]="<td><b>"+AjxStringUtil.htmlEncode(this.name)+"</b></td>";
c[b++]="<td align='right'>";
c[b++]=AjxImg.getImageHtml("ZaZimlet");
c[b++]="</td>";
c[b++]="</table></div></td></tr>";
c[b++]="<tr></tr>";
b=this._addAttrRow(ZaItem.A_description,c,b);
b=this._addAttrRow(ZaItem.A_zimbraId,c,b);
c[b++]="</table>";
this._toolTip=c.join("")
}return this._toolTip
};
ZaZimlet.prototype.remove=function(){var c=AjxSoapDoc.create("UndeployZimletRequest",ZaZimbraAdmin.URN,null);
c.getMethod().setAttribute("name",this.name);
var e=new Object();
e.soapDoc=c;
var b={controller:ZaApp.getInstance().getCurrentController(),busyMsg:ZaMsg.BUSY_UNDEPLOY_ZIMLET};
var d=ZaRequestMgr.invoke(e,b)
};
ZaZimlet.prototype.refresh=function(){this.load()
};
ZaZimlet.deploy=function(h,j){var f=h.action?h.action:ZaZimlet.ACTION_DEPLOY_ALL;
var b=h.attId?h.attId:null;
var g=h.flushCache?h.flushCache:"0";
var e=AjxSoapDoc.create("DeployZimletRequest",ZaZimbraAdmin.URN,null);
e.getMethod().setAttribute("action",f);
if(f!=ZaZimlet.ACTION_DEPLOY_STATUS){e.getMethod().setAttribute("flush",g)
}var d=e.set("content","");
if(b){d.setAttribute("aid",b)
}var h=new Object();
h.soapDoc=e;
if(j){h.asyncMode=true;
h.callback=j
}var c={controller:ZaApp.getInstance().getCurrentController(),busyMsg:ZaMsg.BUSY_DEPLOY_ZIMLET};
ZaRequestMgr.invoke(h,c)
};
ZaZimlet.loadMethod=function(e,g){var h=g?g:this.name;
var d=AjxSoapDoc.create("GetZimletRequest",ZaZimbraAdmin.URN,null);
var b=d.set("zimlet","");
b.setAttribute("name",h);
if(!this.getAttrs.all&&!AjxUtil.isEmpty(this.attrsToGet)){d.setMethodAttribute("attrs",this.attrsToGet.join(","))
}var f={};
f.soapDoc=d;
f.asyncMode=false;
var c={controller:ZaApp.getInstance().getCurrentController(),busyMsg:ZaMsg.BUSY_GET_ZIMLET};
resp=ZaRequestMgr.invoke(f,c);
this.initFromJS(resp.Body.GetZimletResponse.zimlet[0])
};
ZaItem.loadMethods.ZaZimlet.push(ZaZimlet.loadMethod);
ZaZimlet.myXModel={items:[{id:ZaZimlet.A_name,ref:ZaZimlet.A_name,type:_STRING_},{id:ZaItem.A_zimbraId,type:_STRING_,ref:"attrs/"+ZaItem.A_zimbraId},{id:ZaItem.A_zimbraCreateTimestamp,ref:"attrs/"+ZaItem.A_zimbraCreateTimestamp},{id:ZaZimlet.A_flushCache,ref:ZaZimlet.A_flushCache,type:_ENUM_,choices:ZaModel.BOOLEAN_CHOICES2},{id:ZaZimlet.A_zimbraZimletDescription,ref:"attrs/"+ZaZimlet.A_zimbraZimletDescription,type:_STRING_},{id:ZaZimlet.A_zimbraZimletEnabled,ref:"attrs/"+ZaZimlet.A_zimbraZimletEnabled,type:_ENUM_,choices:ZaModel.BOOLEAN_CHOICES}]}
}if(AjxPackage.define("zimbraAdmin.rp.model.ZaRetentionPolicy")){ZaRetentionPolicy=function(c,f,b,d){this.id=f;
this.name=c;
if(!b){this.lifetime="1d"
}else{var e=b.substr(0,b.length-1);
if(e%ZaRetentionPolicy.YEAR==0){this.lifetime=(e/ZaRetentionPolicy.YEAR)+"y"
}else{if(e%ZaRetentionPolicy.MONTH==0){this.lifetime=(e/ZaRetentionPolicy.MONTH)+"m"
}else{if(e%ZaRetentionPolicy.WEEK==0){this.lifetime=(e/ZaRetentionPolicy.WEEK)+"w"
}else{this.lifetime=b
}}}}this.type=d?d:ZaRetentionPolicy.TYPE_KEEP
};
ZaRetentionPolicy.prototype=new ZaItem;
ZaRetentionPolicy.prototype.constructor=ZaRetentionPolicy;
ZaRetentionPolicy.POLICY_CUSTOM="custom";
ZaRetentionPolicy.prototype.toString=function(){return this.name
};
ZaRetentionPolicy.prototype.toDays=function(){var c=this.lifetime.substr(0,this.lifetime.length-1);
var b=this.lifetime.substr(this.lifetime.length-1,1);
if(b=="y"){return c*ZaRetentionPolicy.YEAR+"d"
}if(b=="m"){return c*ZaRetentionPolicy.MONTH+"d"
}if(b=="w"){return c*ZaRetentionPolicy.WEEK+"d"
}return this.lifetime
};
ZaRetentionPolicy.YEAR=366;
ZaRetentionPolicy.MONTH=31;
ZaRetentionPolicy.WEEK=7;
ZaRetentionPolicy.TYPE_KEEP="keep";
ZaRetentionPolicy.TYPE_PURGE="purge";
ZaRetentionPolicy.A2_name="name";
ZaRetentionPolicy.A2_id="id";
ZaRetentionPolicy.A2_lifetime="lifetime";
ZaRetentionPolicy.A2_type="type";
ZaRetentionPolicy.myXModel={items:[{id:ZaRetentionPolicy.A2_id,type:_STRING_,ref:ZaRetentionPolicy.A2_id},{id:ZaRetentionPolicy.A2_name,type:_STRING_,ref:ZaRetentionPolicy.A2_name,required:true},{id:ZaRetentionPolicy.A2_lifetime,type:_MLIFETIME_,ref:ZaRetentionPolicy.A2_lifetime,minInclusive:1},{id:ZaRetentionPolicy.A2_type,type:_STRING_,ref:ZaRetentionPolicy.A2_type}]};
ZaRetentionPolicy.getRetentionPolicies=function(p,e){var r=AjxSoapDoc.create("GetSystemRetentionPolicyRequest","urn:zimbraAdmin",null);
if(p&&e){var d=r.set("cos",e);
d.setAttribute("by",p)
}var h=new Object();
h.soapDoc=r;
try{var f={controller:ZaApp.getInstance().getCurrentController(),busyMsg:ZaMsg.BUSY_GET_RETENTION_POLICIES};
var s={};
s[ZaRetentionPolicy.TYPE_KEEP]=[];
s[ZaRetentionPolicy.TYPE_PURGE]=[];
var k=ZaRequestMgr.invoke(h,f).Body.GetSystemRetentionPolicyResponse;
if(k.retentionPolicy&&k.retentionPolicy.length==1){var b=k.retentionPolicy[0];
var g=b.keep[0].policy;
var q=b.purge[0].policy;
if(g){for(var n=0;
n<g.length;
n++){if(g[n].id){var m=new ZaRetentionPolicy(g[n].name,g[n].id,g[n].lifetime,ZaRetentionPolicy.TYPE_KEEP);
s[ZaRetentionPolicy.TYPE_KEEP].push(m)
}}}if(q){for(var l=0;
l<q.length;
l++){if(q[l].id){var c=new ZaRetentionPolicy(q[l].name,q[l].id,q[l].lifetime,ZaRetentionPolicy.TYPE_PURGE);
s[ZaRetentionPolicy.TYPE_PURGE].push(c)
}}}}return s
}catch(o){throw o;
return null
}};
ZaRetentionPolicy.prototype.createPolicy=function(k,d){var l=AjxSoapDoc.create("CreateSystemRetentionPolicyRequest","urn:zimbraAdmin",null);
if(k&&d){var c=l.set("cos",d);
c.setAttribute("by",k)
}if(this[ZaRetentionPolicy.A2_type]!==ZaRetentionPolicy.TYPE_KEEP&&this[ZaRetentionPolicy.A2_type]!==ZaRetentionPolicy.TYPE_PURGE){return
}var b=l.set(this[ZaRetentionPolicy.A2_type],null);
var j=l.set("policy",null,b,"urn:zimbraMail");
j.setAttribute("name",this[ZaRetentionPolicy.A2_name]);
j.setAttribute("lifetime",this.toDays());
var g=new Object();
g.soapDoc=l;
try{var e={controller:ZaApp.getInstance().getCurrentController(),busyMsg:ZaMsg.BUSY_CREATE_RETENTION_POLICIES};
var f=ZaRequestMgr.invoke(g,e).Body.CreateSystemRetentionPolicyResponse;
if(f.policy&&f.policy[0]){this.id=f.policy[0].id
}return this
}catch(h){throw h;
return null
}};
ZaRetentionPolicy.checkLifeTime=function(b){if(!b||b.length<1){return false
}var c=b.substr(0,b.length-1);
if(!c){return false
}return AjxUtil.isPositiveInt(c)
};
ZaRetentionPolicy.checkValues=function(e,d){if(!e){return false
}var b=AjxStringUtil.trim(e[ZaRetentionPolicy.A2_name]);
if(AjxUtil.isEmpty(b)){ZaApp.getInstance().getCurrentController().popupErrorDialog(ZaMsg.ERROR_EmptyRPName);
return false
}if(ZaRetentionPolicy.POLICY_CUSTOM==b.toLowerCase()){ZaApp.getInstance().getCurrentController().popupErrorDialog(AjxMessageFormat.format(ZaMsg.ERROR_RPNameCustomDisallowed,[b]));
return false
}if(!ZaRetentionPolicy.checkLifeTime(e[ZaRetentionPolicy.A2_lifetime])){ZaApp.getInstance().getCurrentController().popupErrorDialog(ZaMsg.ERROR_InvalidRPLifetime);
return false
}if(d&&AjxUtil.isArray(d)){for(var c=0;
c<d.length;
c++){if(d[c][ZaRetentionPolicy.A2_name]==e[ZaRetentionPolicy.A2_name]&&d[c]!=e){ZaApp.getInstance().getCurrentController().popupErrorDialog(AjxMessageFormat.format(ZaMsg.ERROR_RPExists,[e[ZaRetentionPolicy.A2_name]]));
return false
}}}return true
};
ZaRetentionPolicy.prototype.modifyPolicy=function(f,j){var e=AjxSoapDoc.create("ModifySystemRetentionPolicyRequest","urn:zimbraAdmin",null);
if(f&&j){var d=e.set("cos",j);
d.setAttribute("by",f)
}var h=e.set("policy",null,null,"urn:zimbraMail");
h.setAttribute("name",this[ZaRetentionPolicy.A2_name]);
h.setAttribute("id",this[ZaRetentionPolicy.A2_id]);
h.setAttribute("lifetime",this.toDays());
h.setAttribute("type","system");
var g=new Object();
g.soapDoc=e;
g.skipAuthCheck=false;
try{var c={controller:ZaApp.getInstance().getCurrentController(),busyMsg:ZaMsg.BUSY_MODIFY_RETENTION_POLICIES};
ZaRequestMgr.invoke(g,c).Body.ModifySystemRetentionPolicyResponse
}catch(b){throw b;
return null
}};
ZaRetentionPolicy.prototype.deletePolicy=function(j,c){var k=AjxSoapDoc.create("DeleteSystemRetentionPolicyRequest","urn:zimbraAdmin",null);
if(j&&c){var b=k.set("cos",c);
b.setAttribute("by",j)
}var h=k.set("policy",null,null,"urn:zimbraMail");
h.setAttribute("id",this.id);
var e=new Object();
e.soapDoc=k;
e.skipAuthCheck=false;
try{var d={controller:ZaApp.getInstance().getCurrentController(),busyMsg:ZaMsg.BUSY_DELETE_RETENTION_POLICIES};
var f=ZaRequestMgr.invoke(e,d).Body.DeleteSystemRetentionPolicyResponse
}catch(g){throw g;
return null
}}
}if(AjxPackage.define("zimbraAdmin.globalconfig.model.ZaGlobalConfig")){ZaGlobalConfig=function(){ZaItem.call(this,"ZaGlobalConfig");
this.attrs=new Object();
this.type=ZaItem.GLOBAL_CONFIG;
this.load()
};
ZaGlobalConfig.prototype=new ZaItem;
ZaGlobalConfig.prototype.constructor=ZaGlobalConfig;
ZaItem.loadMethods.ZaGlobalConfig=new Array();
ZaItem.modifyMethods.ZaGlobalConfig=new Array();
ZaItem.modifyMethodsExt.ZaGlobalConfig=new Array();
ZaGlobalConfig.MTA_RESTRICTIONS=["reject_invalid_helo_hostname","reject_non_fqdn_helo_hostname","reject_non_fqdn_sender","reject_unknown_client_hostname","reject_unknown_reverse_client_hostname","reject_unknown_sender_domain","reject_unknown_helo_hostname"];
ZaGlobalConfig.A_zimbraLastLogonTimestampFrequency="zimbraLastLogonTimestampFrequency";
ZaGlobalConfig.A_zimbraDefaultDomainName="zimbraDefaultDomainName";
ZaGlobalConfig.A_zimbraScheduledTaskNumThreads="zimbraScheduledTaskNumThreads";
ZaGlobalConfig.A_zimbraMailPurgeSleepInterval="zimbraMailPurgeSleepInterval";
ZaGlobalConfig.A_zimbraAttachmentsBlocked="zimbraAttachmentsBlocked";
ZaGlobalConfig.A_zimbraMtaBlockedExtensionWarnRecipient="zimbraMtaBlockedExtensionWarnRecipient";
ZaGlobalConfig.A_zimbraMtaBlockedExtension="zimbraMtaBlockedExtension";
ZaGlobalConfig.A_zimbraMtaCommonBlockedExtension="zimbraMtaCommonBlockedExtension";
ZaGlobalConfig.A_zimbraMtaSaslAuthEnable="zimbraMtaSaslAuthEnable";
ZaGlobalConfig.A_zimbraMtaTlsAuthOnly="zimbraMtaTlsAuthOnly";
ZaGlobalConfig.A_zimbraMtaSmtpDnsSupportLevel="zimbraMtaSmtpDnsSupportLevel";
ZaGlobalConfig.A_zimbraMtaMaxMessageSize="zimbraMtaMaxMessageSize";
ZaGlobalConfig.A_zimbraMtaRelayHost="zimbraMtaRelayHost";
ZaGlobalConfig.A_zimbraMtaFallbackRelayHost="zimbraMtaFallbackRelayHost";
ZaGlobalConfig.A_zimbraMtaMyNetworks="zimbraMtaMyNetworks";
ZaGlobalConfig.A_zimbraComponentAvailable="zimbraComponentAvailable";
ZaGlobalConfig.A_zimbraSmtpSendAddOriginatingIP="zimbraSmtpSendAddOriginatingIP";
ZaGlobalConfig.A_zimbraDNSCheckHostname="zimbraDNSCheckHostname";
ZaGlobalConfig.A_zimbraBasicAuthRealm="zimbraBasicAuthRealm";
ZaGlobalConfig.A_zimbraAdminConsoleDNSCheckEnabled="zimbraAdminConsoleDNSCheckEnabled";
ZaGlobalConfig.A_zimbraAdminConsoleCatchAllAddressEnabled="zimbraAdminConsoleCatchAllAddressEnabled";
ZaGlobalConfig.A_zimbraAdminConsoleSkinEnabled="zimbraAdminConsoleSkinEnabled";
ZaGlobalConfig.A_zimbraAdminConsoleLDAPAuthEnabled="zimbraAdminConsoleLDAPAuthEnabled";
ZaGlobalConfig.A_zimbraMilterBindPort="zimbraMilterBindPort";
ZaGlobalConfig.A_zimbraMilterServerEnabled="zimbraMilterServerEnabled";
ZaGlobalConfig.A_zimbraMtaRestriction="zimbraMtaRestriction";
ZaGlobalConfig.A_zimbraMtaPolicyService="_"+ZaGlobalConfig.A_zimbraMtaRestriction+"_policy_service";
ZaGlobalConfig.A_zimbraMtaRejectInvalidHeloHostname="_"+ZaGlobalConfig.A_zimbraMtaRestriction+"_reject_invalid_helo_hostname";
ZaGlobalConfig.A_zimbraMtaRejectNonFqdnHeloHostname="_"+ZaGlobalConfig.A_zimbraMtaRestriction+"_reject_non_fqdn_helo_hostname";
ZaGlobalConfig.A_zimbraMtaRejectNonFqdnSender="_"+ZaGlobalConfig.A_zimbraMtaRestriction+"_reject_non_fqdn_sender";
ZaGlobalConfig.A_zimbraMtaRejectUnknownClientHostname="_"+ZaGlobalConfig.A_zimbraMtaRestriction+"_reject_unknown_client_hostname";
ZaGlobalConfig.A_zimbraMtaRejectUnknownReverseClientHostname="_"+ZaGlobalConfig.A_zimbraMtaRestriction+"_reject_unknown_reverse_client_hostname";
ZaGlobalConfig.A_zimbraMtaRejectUnknownSenderDomain="_"+ZaGlobalConfig.A_zimbraMtaRestriction+"_reject_unknown_sender_domain";
ZaGlobalConfig.A_zimbraMtaRejectUnknownHeloHostname="_"+ZaGlobalConfig.A_zimbraMtaRestriction+"_reject_unknown_helo_hostname";
ZaGlobalConfig.A_zimbraMtaRejectRblClient="_"+ZaGlobalConfig.A_zimbraMtaRestriction+"_reject_rbl_client";
ZaGlobalConfig.A_zimbraMtaRejectRHSblClient="_"+ZaGlobalConfig.A_zimbraMtaRestriction+"_reject_rhsbl_client";
ZaGlobalConfig.A_zimbraMtaRejectRHSblReverseClient="_"+ZaGlobalConfig.A_zimbraMtaRestriction+"_reject_rhsbl_reverse_client";
ZaGlobalConfig.A_zimbraMtaRejectRHSblSender="_"+ZaGlobalConfig.A_zimbraMtaRestriction+"_reject_rhsbl_sender";
ZaGlobalConfig.A_zimbraGalLdapFilterDef="zimbraGalLdapFilterDef";
ZaGlobalConfig.A_zimbraGalMaxResults="zimbraGalMaxResults";
ZaGlobalConfig.A_zimbraNotebookAccount="zimbraNotebookAccount";
ZaGlobalConfig.A_zimbraLmtpNumThreads="zimbraLmtpNumThreads";
ZaGlobalConfig.A_zimbraLmtpBindPort="zimbraLmtpBindPort";
ZaGlobalConfig.A_zimbraPop3NumThreads="zimbraPop3NumThreads";
ZaGlobalConfig.A_zimbraPop3BindPort="zimbraPop3BindPort";
ZaGlobalConfig.A_zimbraRedologEnabled="zimbraRedologEnabled";
ZaGlobalConfig.A_zimbraRedologLogPath="zimbraRedologLogPath";
ZaGlobalConfig.A_zimbraRedologArchiveDir="zimbraRedologArchiveDir";
ZaGlobalConfig.A_zimbraRedologBacklogDir="zimbraRedologBacklogDir";
ZaGlobalConfig.A_zimbraRedologRolloverFileSizeKB="zimbraRedologRolloverFileSizeKB";
ZaGlobalConfig.A_zimbraRedologFsyncIntervalMS="zimbraRedologFsyncIntervalMS";
ZaGlobalConfig.A_zimbraFileUploadMaxSize="zimbraFileUploadMaxSize";
ZaGlobalConfig.A_zimbraSmtpHostname="zimbraSmtpHostname";
ZaGlobalConfig.A_zimbraSmtpPort="zimbraSmtpPort";
ZaGlobalConfig.A_zimbraSmtpTimeout="zimbraSmtpTimeout";
ZaGlobalConfig.A_zimbraPop3BindPort="zimbraPop3BindPort";
ZaGlobalConfig.A_zimbraPop3ServerEnabled="zimbraPop3ServerEnabled";
ZaGlobalConfig.A_zimbraPop3SSLBindPort="zimbraPop3SSLBindPort";
ZaGlobalConfig.A_zimbraPop3SSLServerEnabled="zimbraPop3SSLServerEnabled";
ZaGlobalConfig.A_zimbraPop3CleartextLoginEnabled="zimbraPop3CleartextLoginEnabled";
ZaGlobalConfig.A_zimbraImapBindPort="zimbraImapBindPort";
ZaGlobalConfig.A_zimbraImapServerEnabled="zimbraImapServerEnabled";
ZaGlobalConfig.A_zimbraImapNumThreads="zimbraImapNumThreads";
ZaGlobalConfig.A_zimbraImapSSLBindPort="zimbraImapSSLBindPort";
ZaGlobalConfig.A_zimbraImapSSLServerEnabled="zimbraImapSSLServerEnabled";
ZaGlobalConfig.A_zimbraImapCleartextLoginEnabled="zimbraImapCleartextLoginEnabled";
ZaGlobalConfig.A_zimbraSpamKillPercent="zimbraSpamKillPercent";
ZaGlobalConfig.A_zimbraSpamTagPercent="zimbraSpamTagPercent";
ZaGlobalConfig.A_zimbraSpamSubjectTag="zimbraSpamSubjectTag";
ZaGlobalConfig.A_zimbraSpamAccount="zimbraSpamIsSpamAccount";
ZaGlobalConfig.A_zimbraHamAccount="zimbraSpamIsNotSpamAccount";
ZaGlobalConfig.A_zimbraWikiAccount="zimbraNotebookAccount";
ZaGlobalConfig.A_zimbraAmavisQAccount="zimbraAmavisQuarantineAccount";
ZaGlobalConfig.A_zimbraVirusWarnRecipient="zimbraVirusWarnRecipient";
ZaGlobalConfig.A_zimbraVirusWarnAdmin="zimbraVirusWarnAdmin";
ZaGlobalConfig.A_zimbraVirusDefinitionsUpdateFrequency="zimbraVirusDefinitionsUpdateFrequency";
ZaGlobalConfig.A_zimbraVirusBlockEncryptedArchive="zimbraVirusBlockEncryptedArchive";
ZaGlobalConfig.A_zimbraAccountClientAttr="zimbraAccountClientAttr";
ZaGlobalConfig.A_zimbraServerInheritedAttr="zimbraServerInheritedAttr";
ZaGlobalConfig.A_zimbraDomainInheritedAttr="zimbraDomainInheritedAttr";
ZaGlobalConfig.A_zimbraCOSInheritedAttr="zimbraCOSInheritedAttr";
ZaGlobalConfig.A_zimbraGalLdapAttrMap="zimbraGalLdapAttrMap";
ZaGlobalConfig.A_zimbraGalLdapFilterDef="zimbraGalLdapFilterDef";
ZaGlobalConfig.A_zimbraMailMode="zimbraMailMode";
ZaGlobalConfig.A_zimbraImapProxyBindPort="zimbraImapProxyBindPort";
ZaGlobalConfig.A_zimbraImapSSLProxyBindPort="zimbraImapSSLProxyBindPort";
ZaGlobalConfig.A_zimbraPop3ProxyBindPort="zimbraPop3ProxyBindPort";
ZaGlobalConfig.A_zimbraPop3SSLProxyBindPort="zimbraPop3SSLProxyBindPort";
ZaGlobalConfig.A_zimbraReverseProxyLookupTarget="zimbraReverseProxyLookupTarget";
ZaGlobalConfig.A_zimbraMailAddressValidationRegex="zimbraMailAddressValidationRegex";
ZaGlobalConfig.A_zimbraInstalledSkin="zimbraInstalledSkin";
ZaGlobalConfig.A_zimbraNewExtension="_zimbraNewExtension";
ZaGlobalConfig.A_originalMonitorHost="_originalMonitorHost";
ZaGlobalConfig.A_currentMonitorHost="_currentMonitorHost";
ZaGlobalConfig.A_zimbraFreebusyExchangeAuthUsername="zimbraFreebusyExchangeAuthUsername";
ZaGlobalConfig.A_zimbraFreebusyExchangeAuthPassword="zimbraFreebusyExchangeAuthPassword";
ZaGlobalConfig.A_zimbraFreebusyExchangeAuthScheme="zimbraFreebusyExchangeAuthScheme";
ZaGlobalConfig.A_zimbraFreebusyExchangeServerType="zimbraFreebusyExchangeServerType";
ZaGlobalConfig.A_zimbraFreebusyExchangeURL="zimbraFreebusyExchangeURL";
ZaGlobalConfig.A_zimbraFreebusyExchangeUserOrg="zimbraFreebusyExchangeUserOrg";
ZaGlobalConfig.A_zimbraSpnegoAuthEnabled="zimbraSpnegoAuthEnabled";
ZaGlobalConfig.A_zimbraSpnegoAuthRealm="zimbraSpnegoAuthRealm";
ZaGlobalConfig.A_zimbraSpnegoAuthErrorURL="zimbraSpnegoAuthErrorURL";
ZaGlobalConfig.A_zimbraWebClientLoginURL="zimbraWebClientLoginURL";
ZaGlobalConfig.A_zimbraWebClientLogoutURL="zimbraWebClientLogoutURL";
ZaGlobalConfig.A_zimbraWebClientLoginURLAllowedUA="zimbraWebClientLoginURLAllowedUA";
ZaGlobalConfig.A_zimbraWebClientLogoutURLAllowedUA="zimbraWebClientLogoutURLAllowedUA";
ZaGlobalConfig.A_zimbraWebClientLoginURLAllowedIP="zimbraWebClientLoginURLAllowedIP";
ZaGlobalConfig.A_zimbraWebClientLogoutURLAllowedIP="zimbraWebClientLogoutURLAllowedIP";
ZaGlobalConfig.A_zimbraForceClearCookies="zimbraForceClearCookies";
ZaGlobalConfig.A_zimbraAutoProvBatchSize="zimbraAutoProvBatchSize";
ZaGlobalConfig.A_zimbraAutoProvPollingInterval="zimbraAutoProvPollingInterval";
ZaGlobalConfig.A_zimbraMailSSLClientCertMode="zimbraMailSSLClientCertMode";
ZaGlobalConfig.A_zimbraMailSSLClientCertPort="zimbraMailSSLClientCertPort";
ZaGlobalConfig.A_zimbraMailSSLClientCertPrincipalMap="zimbraMailSSLClientCertPrincipalMap";
ZaGlobalConfig.A_zimbraReverseProxyClientCertMode="zimbraReverseProxyClientCertMode";
ZaGlobalConfig.A_zimbraMailSSLProxyClientCertPort="zimbraMailSSLProxyClientCertPort";
ZaGlobalConfig.A_zimbraReverseProxyMailMode="zimbraReverseProxyMailMode";
ZaGlobalConfig.A_zimbraReverseProxyAdminIPAddress="zimbraReverseProxyAdminIPAddress";
ZaGlobalConfig.A_zimbraReverseProxyClientCertCA="zimbraReverseProxyClientCertCA";
ZaGlobalConfig.A_zimbraAutoProvNotificationSubject="zimbraAutoProvNotificationSubject";
ZaGlobalConfig.A_zimbraAutoProvNotificationBody="zimbraAutoProvNotificationBody";
ZaGlobalConfig.A_zimbraSkinForegroundColor="zimbraSkinForegroundColor";
ZaGlobalConfig.A_zimbraSkinBackgroundColor="zimbraSkinBackgroundColor";
ZaGlobalConfig.A_zimbraSkinSecondaryColor="zimbraSkinSecondaryColor";
ZaGlobalConfig.A_zimbraSkinSelectionColor="zimbraSkinSelectionColor";
ZaGlobalConfig.A_zimbraSkinLogoURL="zimbraSkinLogoURL";
ZaGlobalConfig.A_zimbraSkinLogoLoginBanner="zimbraSkinLogoLoginBanner";
ZaGlobalConfig.A_zimbraSkinLogoAppBanner="zimbraSkinLogoAppBanner";
ZaGlobalConfig.A2_blocked_extension_selection="blocked_extension_selection";
ZaGlobalConfig.A2_common_extension_selection="common_extension_selection";
ZaGlobalConfig.A2_retentionPoliciesKeep="retentionPolicyKeep";
ZaGlobalConfig.A2_retentionPoliciesPurge="retentionPolicyPurge";
ZaGlobalConfig.A2_retentionPoliciesKeep_Selection="retentionPoliciesKeep_Selection";
ZaGlobalConfig.A2_retentionPoliciesPurge_Selection="retentionPoliciesPurge_Selection";
ZaGlobalConfig.A2_registeredDevice="registeredDevice";
ZaGlobalConfig.A2_registeredDevice_Selection="registeredDevice_Selection";
ZaGlobalConfig.A_zimbraHelpAdminURL="zimbraHelpAdminURL";
ZaGlobalConfig.A_zimbraHelpDelegatedURL="zimbraHelpDelegatedURL";
ZaGlobalConfig.A_zimbraEphemeralBackendURL="zimbraEphemeralBackendURL";
ZaGlobalConfig.__configInstance=null;
ZaGlobalConfig.isDirty=true;
ZaGlobalConfig.CHECK_EXCHANGE_AUTH_CONFIG_RIGHT="checkExchangeAuthConfig";
ZaGlobalConfig.getInstance=function(b){if(b||ZaGlobalConfig.isDirty||!ZaGlobalConfig.__configInstance){ZaGlobalConfig.__configInstance=new ZaGlobalConfig();
ZaGlobalConfig.isDirty=false
}return ZaGlobalConfig.__configInstance
};
ZaGlobalConfig.loadMethod=function(d,g){var c=AjxSoapDoc.create("GetAllConfigRequest",ZaZimbraAdmin.URN,null);
if(!this.getAttrs.all&&!AjxUtil.isEmpty(this.attrsToGet)){c.setMethodAttribute("attrs",this.attrsToGet.join(","))
}var f=new Object();
f.soapDoc=c;
f.noAuthToken=true;
var b={controller:ZaApp.getInstance().getCurrentController(),busyMsg:ZaMsg.BUSY_GET_ALL_CONFIG};
var e=ZaRequestMgr.invoke(f,b).Body.GetAllConfigResponse;
this.initFromJS(e)
};
ZaItem.loadMethods.ZaGlobalConfig.push(ZaGlobalConfig.loadMethod);
ZaGlobalConfig.prototype.initFromJS=function(g){ZaItem.prototype.initFromJS.call(this,g);
if(AjxUtil.isString(this.attrs[ZaGlobalConfig.A_zimbraMtaBlockedExtension])){this.attrs[ZaGlobalConfig.A_zimbraMtaBlockedExtension]=[this.attrs[ZaGlobalConfig.A_zimbraMtaBlockedExtension]]
}if(AjxUtil.isString(this.attrs[ZaGlobalConfig.A_zimbraMtaCommonBlockedExtension])){this.attrs[ZaGlobalConfig.A_zimbraMtaCommonBlockedExtension]=[this.attrs[ZaGlobalConfig.A_zimbraMtaCommonBlockedExtension]]
}if(AjxUtil.isString(this.attrs[ZaGlobalConfig.A_zimbraSmtpHostname])){this.attrs[ZaGlobalConfig.A_zimbraSmtpHostname]=[this.attrs[ZaGlobalConfig.A_zimbraSmtpHostname]]
}if(AjxUtil.isString(this.attrs[ZaGlobalConfig.A_zimbraMailAddressValidationRegex])){this.attrs[ZaGlobalConfig.A_zimbraMailAddressValidationRegex]=[this.attrs[ZaGlobalConfig.A_zimbraMailAddressValidationRegex]]
}if(AjxUtil.isString(this.attrs[ZaGlobalConfig.A_zimbraReverseProxyAdminIPAddress])){this.attrs[ZaGlobalConfig.A_zimbraReverseProxyAdminIPAddress]=[this.attrs[ZaGlobalConfig.A_zimbraReverseProxyAdminIPAddress]]
}if(AjxUtil.isString(this.attrs[ZaGlobalConfig.A_zimbraWebClientLoginURLAllowedUA])){this.attrs[ZaGlobalConfig.A_zimbraWebClientLoginURLAllowedUA]=[this.attrs[ZaGlobalConfig.A_zimbraWebClientLoginURLAllowedUA]]
}if(AjxUtil.isString(this.attrs[ZaGlobalConfig.A_zimbraWebClientLogoutURLAllowedUA])){this.attrs[ZaGlobalConfig.A_zimbraWebClientLogoutURLAllowedUA]=[this.attrs[ZaGlobalConfig.A_zimbraWebClientLogoutURLAllowedUA]]
}if(AjxUtil.isString(this.attrs[ZaGlobalConfig.A_zimbraWebClientLoginURLAllowedIP])){this.attrs[ZaGlobalConfig.A_zimbraWebClientLoginURLAllowedIP]=[this.attrs[ZaGlobalConfig.A_zimbraWebClientLoginURLAllowedIP]]
}if(AjxUtil.isString(this.attrs[ZaGlobalConfig.A_zimbraWebClientLogoutURLAllowedIP])){this.attrs[ZaGlobalConfig.A_zimbraWebClientLogoutURLAllowedIP]=[this.attrs[ZaGlobalConfig.A_zimbraWebClientLogoutURLAllowedIP]]
}var f=this.attrs[ZaGlobalConfig.A_zimbraComponentAvailable];
if(f){if(AjxUtil.isString(f)){f=[f]
}for(var d=0;
d<f.length;
d++){var c=f[d];
this.attrs["_"+ZaGlobalConfig.A_zimbraComponentAvailable+"_"+c]=true
}}this.attrs[ZaGlobalConfig.A_zimbraMtaRejectRblClient]=[];
this.attrs[ZaGlobalConfig.A_zimbraMtaRejectRHSblClient]=[];
this.attrs[ZaGlobalConfig.A_zimbraMtaRejectRHSblReverseClient]=[];
this.attrs[ZaGlobalConfig.A_zimbraMtaRejectRHSblSender]=[];
this.attrs[ZaGlobalConfig.A_zimbraMtaPolicyService]=[];
var e=this.attrs[ZaGlobalConfig.A_zimbraMtaRestriction];
if(e){if(AjxUtil.isString(e)){e=[e]
}for(var d=0;
d<e.length;
d++){if(e[d].indexOf("reject_rbl_client")>-1){var b=e[d];
var h=b.split(" ");
if(h&&h.length>0){this.attrs[ZaGlobalConfig.A_zimbraMtaRejectRblClient].push(h[1])
}}else{if(e[d].indexOf("reject_rhsbl_client")>-1){var b=e[d];
var h=b.split(" ");
if(h&&h.length>0){this.attrs[ZaGlobalConfig.A_zimbraMtaRejectRHSblClient].push(h[1])
}}else{if(e[d].indexOf("reject_rhsbl_reverse_client")>-1){var b=e[d];
var h=b.split(" ");
if(h&&h.length>0){this.attrs[ZaGlobalConfig.A_zimbraMtaRejectRHSblReverseClient].push(h[1])
}}else{if(e[d].indexOf("reject_rhsbl_sender")>-1){var b=e[d];
var h=b.split(" ");
if(h&&h.length>0){this.attrs[ZaGlobalConfig.A_zimbraMtaRejectRHSblSender].push(h[1])
}}else{if(e[d].indexOf("check_policy_service")>-1){var b=e[d];
var h=b.split(" ");
if(h&&h.length>0){this.attrs[ZaGlobalConfig.A_zimbraMtaPolicyService].push(h[1])
}}else{var b=e[d];
this.attrs["_"+ZaGlobalConfig.A_zimbraMtaRestriction+"_"+b]=true
}}}}}}}if(this.attrs[ZaGlobalConfig.A_zimbraInstalledSkin]!=null&&!(this.attrs[ZaGlobalConfig.A_zimbraInstalledSkin] instanceof Array)){this.attrs[ZaGlobalConfig.A_zimbraInstalledSkin]=[this.attrs[ZaGlobalConfig.A_zimbraInstalledSkin]]
}if(this.attrs[ZaDomain.A_zimbraFreebusyExchangeAuthPassword]&&(this.attrs[ZaDomain.A_zimbraFreebusyExchangeAuthPassword]=="VALUE-BLOCKED")){this.attrs[ZaDomain.A_zimbraFreebusyExchangeAuthPassword]=""
}};
ZaGlobalConfig.modifyMethod=function(n,h){var m=AjxSoapDoc.create("BatchRequest","urn:zimbra");
m.setMethodAttribute("onerror","stop");
var o=n;
if(ZaItem.modifyMethodsExt.ZaGlobalConfig){var e=ZaItem.modifyMethodsExt.ZaGlobalConfig;
var c=e.length;
for(var j=0;
j<c;
j++){if(typeof(e[j])=="function"){e[j].call(this,o,h,m)
}}}var b=m.set("ModifyConfigRequest",null,null,ZaZimbraAdmin.URN);
for(var l in o){if(o[l] instanceof Array){var c=o[l].length;
if(c>0){for(var d=0;
d<c;
d++){if(o[l][d] instanceof String){var k=m.set("a",o[l][d].toString(),b)
}else{if(o[l][d] instanceof Object){var k=m.set("a",o[l][d].toString(),b)
}else{var k=m.set("a",o[l][d],b)
}}k.setAttribute("n",l)
}}else{var k=m.set("a","",b);
k.setAttribute("n",l)
}}else{if((typeof ZaLicense=="function")&&(ZaSettings.LICENSE_ENABLED)){if(ZaUtil.findValueInObjArrByPropertyName(ZaLicense.myXModel.items,l,"id")>-1){continue
}}var k=m.set("a",o[l],b);
k.setAttribute("n",l)
}}var g=new ZmCsfeCommand();
var f=new Object();
f.soapDoc=m;
f.noAuthToken=true;
g.invoke(f);
ZaGlobalConfig.isDirty=true
};
ZaItem.modifyMethods.ZaGlobalConfig.push(ZaGlobalConfig.modifyMethod);
LifetimeNumber_XFormItem=function(){};
XModelItemFactory.createItemType("_LIFETIME_NUMBER_","lifetime_number",LifetimeNumber_XFormItem,Number_XModelItem);
LifetimeNumber_XFormItem.prototype.validateType=function(c){var b=c.substring(0,c.length-1);
this.validateNumber(b);
return c
};
ZaGlobalConfig.myXModel={items:[{id:ZaGlobalConfig.A_zimbraGalMaxResults,ref:"attrs/"+ZaGlobalConfig.A_zimbraGalMaxResults,type:_NUMBER_,minInclusive:0,maxInclusive:2147483647,defaultValue:100},{id:ZaGlobalConfig.A_zimbraDefaultDomainName,ref:"attrs/"+ZaGlobalConfig.A_zimbraDefaultDomainName,type:_STRING_,maxLength:256},{id:ZaGlobalConfig.A_zimbraScheduledTaskNumThreads,ref:"attrs/"+ZaGlobalConfig.A_zimbraScheduledTaskNumThreads,type:_NUMBER_,minInclusive:1},{id:ZaGlobalConfig.A_zimbraMailPurgeSleepInterval,type:_MINTERVAL_,ref:"attrs/"+ZaGlobalConfig.A_zimbraMailPurgeSleepInterval},{id:ZaGlobalConfig.A_currentMonitorHost,ref:"attrs/"+ZaGlobalConfig.A_currentMonitorHost,type:_STRING_},{id:ZaGlobalConfig.A_zimbraAttachmentsBlocked,ref:"attrs/"+ZaGlobalConfig.A_zimbraAttachmentsBlocked,type:_ENUM_,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaGlobalConfig.A_zimbraMtaBlockedExtensionWarnRecipient,ref:"attrs/"+ZaGlobalConfig.A_zimbraMtaBlockedExtensionWarnRecipient,type:_ENUM_,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaGlobalConfig.A_zimbraMtaBlockedExtension,ref:"attrs/"+ZaGlobalConfig.A_zimbraMtaBlockedExtension,type:_LIST_,dataType:_STRING_},{id:ZaGlobalConfig.A_zimbraMtaCommonBlockedExtension,ref:"attrs/"+ZaGlobalConfig.A_zimbraMtaCommonBlockedExtension,type:_LIST_,dataType:_STRING_},{id:ZaGlobalConfig.A_zimbraMtaSaslAuthEnable,ref:"attrs/"+ZaGlobalConfig.A_zimbraMtaSaslAuthEnable,type:_ENUM_,choices:["yes","no"]},{id:ZaGlobalConfig.A_zimbraMtaTlsAuthOnly,ref:"attrs/"+ZaGlobalConfig.A_zimbraMtaTlsAuthOnly,type:_ENUM_,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaGlobalConfig.A_zimbraMailAddressValidationRegex,ref:"attrs/"+ZaGlobalConfig.A_zimbraMailAddressValidationRegex,type:_LIST_,listItem:{type:_STRING_,maxLength:512}},{id:ZaGlobalConfig.A_zimbraSmtpHostname,ref:"attrs/"+ZaGlobalConfig.A_zimbraSmtpHostname,type:_LIST_,listItem:{type:_HOSTNAME_OR_IP_,maxLength:256}},{id:ZaGlobalConfig.A_zimbraSmtpPort,ref:"attrs/"+ZaGlobalConfig.A_zimbraSmtpPort,type:_PORT_},{id:ZaGlobalConfig.A_zimbraMtaMaxMessageSize,ref:"attrs/"+ZaGlobalConfig.A_zimbraMtaMaxMessageSize,type:_FILE_SIZE_,units:AjxUtil.SIZE_KILOBYTES,required:true},{id:ZaGlobalConfig.A_zimbraFileUploadMaxSize,ref:"attrs/"+ZaGlobalConfig.A_zimbraFileUploadMaxSize,type:_FILE_SIZE_,units:AjxUtil.SIZE_KILOBYTES},{id:ZaGlobalConfig.A_zimbraMtaMyNetworks,ref:"attrs/"+ZaGlobalConfig.A_zimbraMtaMyNetworks,type:_STRING_,maxLength:10240},{id:ZaGlobalConfig.A_zimbraMtaRelayHost,ref:"attrs/"+ZaGlobalConfig.A_zimbraMtaRelayHost,type:_HOSTNAME_OR_IP_,maxLength:256},{id:ZaGlobalConfig.A_zimbraMtaFallbackRelayHost,ref:"attrs/"+ZaGlobalConfig.A_zimbraMtaFallbackRelayHost,type:_HOSTNAME_OR_IP_,maxLength:256},{id:ZaGlobalConfig.A_zimbraSmtpSendAddOriginatingIP,ref:"attrs/"+ZaGlobalConfig.A_zimbraSmtpSendAddOriginatingIP,type:_ENUM_,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaGlobalConfig.A_zimbraMtaSmtpDnsSupportLevel,ref:"attrs/"+ZaGlobalConfig.A_zimbraMtaSmtpDnsSupportLevel,type:_ENUM_,choices:ZaSettings.smtpDnsSupportLevel},{id:ZaGlobalConfig.A_zimbraMilterServerEnabled,ref:"attrs/"+ZaGlobalConfig.A_zimbraMilterServerEnabled,type:_ENUM_,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaGlobalConfig.A_zimbraMilterBindPort,ref:"attrs/"+ZaGlobalConfig.A_zimbraMilterBindPort,type:_PORT_},{id:ZaGlobalConfig.A_zimbraMtaRejectInvalidHeloHostname,ref:"attrs/"+ZaGlobalConfig.A_zimbraMtaRejectInvalidHeloHostname,type:_ENUM_,choices:[false,true]},{id:ZaGlobalConfig.A_zimbraMtaRejectNonFqdnHeloHostname,ref:"attrs/"+ZaGlobalConfig.A_zimbraMtaRejectNonFqdnHeloHostname,type:_ENUM_,choices:[false,true]},{id:ZaGlobalConfig.A_zimbraMtaRejectNonFqdnSender,ref:"attrs/"+ZaGlobalConfig.A_zimbraMtaRejectNonFqdnSender,type:_ENUM_,choices:[false,true]},{id:ZaGlobalConfig.A_zimbraMtaRejectUnknownClientHostname,ref:"attrs/"+ZaGlobalConfig.A_zimbraMtaRejectUnknownClientHostname,type:_ENUM_,choices:[false,true]},{id:ZaGlobalConfig.A_zimbraMtaRejectUnknownReverseClientHostname,ref:"attrs/"+ZaGlobalConfig.A_zimbraMtaRejectUnknownReverseClientHostname,type:_ENUM_,choices:[false,true]},{id:ZaGlobalConfig.A_zimbraMtaRejectUnknownSenderDomain,ref:"attrs/"+ZaGlobalConfig.A_zimbraMtaRejectUnknownSenderDomain,type:_ENUM_,choices:[false,true]},{id:ZaGlobalConfig.A_zimbraMtaRejectUnknownHeloHostname,ref:"attrs/"+ZaGlobalConfig.A_zimbraMtaRejectUnknownHeloHostname,type:_ENUM_,choices:[false,true]},{id:ZaGlobalConfig.A_zimbraDNSCheckHostname,type:_STRING_,ref:"attrs/"+ZaGlobalConfig.A_zimbraDNSCheckHostname,maxLength:255},{id:ZaGlobalConfig.A_zimbraBasicAuthRealm,type:_STRING_,ref:"attrs/"+ZaGlobalConfig.A_zimbraBasicAuthRealm,maxLength:255},{id:ZaGlobalConfig.A_zimbraAdminConsoleDNSCheckEnabled,type:_ENUM_,choices:ZaModel.BOOLEAN_CHOICES,ref:"attrs/"+ZaGlobalConfig.A_zimbraAdminConsoleDNSCheckEnabled},{id:ZaGlobalConfig.A_zimbraAdminConsoleCatchAllAddressEnabled,type:_ENUM_,choices:ZaModel.BOOLEAN_CHOICES,ref:"attrs/"+ZaGlobalConfig.A_zimbraAdminConsoleCatchAllAddressEnabled},{id:ZaGlobalConfig.A_zimbraAdminConsoleSkinEnabled,type:_ENUM_,choices:ZaModel.BOOLEAN_CHOICES,ref:"attrs/"+ZaGlobalConfig.A_zimbraAdminConsoleSkinEnabled},{id:ZaGlobalConfig.A_zimbraAdminConsoleLDAPAuthEnabled,type:_ENUM_,choices:ZaModel.BOOLEAN_CHOICES,ref:"attrs/"+ZaGlobalConfig.A_zimbraAdminConsoleLDAPAuthEnabled},{id:ZaGlobalConfig.A_zimbraMtaPolicyService,ref:"attrs/"+ZaGlobalConfig.A_zimbraMtaPolicyService,type:_LIST_,listItem:{type:_STRING_}},{id:ZaGlobalConfig.A_zimbraMtaRejectRblClient,ref:"attrs/"+ZaGlobalConfig.A_zimbraMtaRejectRblClient,type:_LIST_,listItem:{type:_STRING_}},{id:ZaGlobalConfig.A_zimbraMtaRejectRHSblClient,ref:"attrs/"+ZaGlobalConfig.A_zimbraMtaRejectRHSblClient,type:_LIST_,listItem:{type:_STRING_}},{id:ZaGlobalConfig.A_zimbraMtaRejectRHSblReverseClient,ref:"attrs/"+ZaGlobalConfig.A_zimbraMtaRejectRHSblReverseClient,type:_LIST_,listItem:{type:_STRING_}},{id:ZaGlobalConfig.A_zimbraMtaRejectRHSblSender,ref:"attrs/"+ZaGlobalConfig.A_zimbraMtaRejectRHSblSender,type:_LIST_,listItem:{type:_STRING_}},{id:ZaGlobalConfig.A_zimbraSmtpTimeout,ref:"attrs/"+ZaGlobalConfig.A_zimbraSmtpTimeout,type:_NUMBER_,minInclusive:0},{id:ZaGlobalConfig.A_zimbraPop3ServerEnabled,ref:"attrs/"+ZaGlobalConfig.A_zimbraPop3ServerEnabled,type:_ENUM_,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaGlobalConfig.A_zimbraPop3SSLServerEnabled,ref:"attrs/"+ZaGlobalConfig.A_zimbraPop3SSLServerEnabled,type:_ENUM_,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaGlobalConfig.A_zimbraPop3CleartextLoginEnabled,ref:"attrs/"+ZaGlobalConfig.A_zimbraPop3CleartextLoginEnabled,type:_ENUM_,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaGlobalConfig.A_zimbraPop3BindPort,ref:"attrs/"+ZaGlobalConfig.A_zimbraPop3BindPort,type:_PORT_},{id:ZaGlobalConfig.A_zimbraPop3SSLBindPort,ref:"attrs/"+ZaGlobalConfig.A_zimbraPop3SSLBindPort,type:_PORT_},{id:ZaGlobalConfig.A_zimbraImapServerEnabled,ref:"attrs/"+ZaGlobalConfig.A_zimbraImapServerEnabled,type:_ENUM_,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaGlobalConfig.A_zimbraImapSSLServerEnabled,ref:"attrs/"+ZaGlobalConfig.A_zimbraImapSSLServerEnabled,type:_ENUM_,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaGlobalConfig.A_zimbraImapCleartextLoginEnabled,ref:"attrs/"+ZaGlobalConfig.A_zimbraImapCleartextLoginEnabled,type:_ENUM_,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaGlobalConfig.A_zimbraImapNumThreads,ref:"attrs/"+ZaGlobalConfig.A_zimbraImapNumThreads,type:_INT_,minInclusive:0,maxInclusive:2147483647},{id:ZaGlobalConfig.A_zimbraImapBindPort,ref:"attrs/"+ZaGlobalConfig.A_zimbraImapBindPort,type:_PORT_},{id:ZaGlobalConfig.A_zimbraImapSSLBindPort,ref:"attrs/"+ZaGlobalConfig.A_zimbraImapSSLBindPort,type:_PORT_},{id:ZaGlobalConfig.A_zimbraSpamCheckEnabled,ref:"attrs/"+ZaGlobalConfig.A_zimbraSpamCheckEnabled,type:_ENUM_,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaGlobalConfig.A_zimbraSpamKillPercent,ref:"attrs/"+ZaGlobalConfig.A_zimbraSpamKillPercent,type:_PERCENT_,fractionDigits:0},{id:ZaGlobalConfig.A_zimbraSpamTagPercent,ref:"attrs/"+ZaGlobalConfig.A_zimbraSpamTagPercent,type:_PERCENT_,fractionDigits:0},{id:ZaGlobalConfig.A_zimbraSpamSubjectTag,ref:"attrs/"+ZaGlobalConfig.A_zimbraSpamSubjectTag,type:_STRING_,whiteSpace:"collapse",maxLength:32},{id:ZaGlobalConfig.A_zimbraVirusCheckEnabled,ref:"attrs/"+ZaGlobalConfig.A_zimbraVirusCheckEnabled,type:_ENUM_,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaGlobalConfig.A_zimbraVirusDefinitionsUpdateFrequency,ref:"attrs/"+ZaGlobalConfig.A_zimbraVirusDefinitionsUpdateFrequency,type:_STRING_,whiteSpace:"collapse"},{id:ZaGlobalConfig.A_zimbraVirusBlockEncryptedArchive,ref:"attrs/"+ZaGlobalConfig.A_zimbraVirusBlockEncryptedArchive,type:_ENUM_,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaGlobalConfig.A_zimbraVirusWarnAdmin,ref:"attrs/"+ZaGlobalConfig.A_zimbraVirusWarnAdmin,type:_ENUM_,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaGlobalConfig.A_zimbraVirusWarnRecipient,ref:"attrs/"+ZaGlobalConfig.A_zimbraVirusWarnRecipient,type:_ENUM_,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaGlobalConfig.A_zimbraImapProxyBindPort,ref:"attrs/"+ZaGlobalConfig.A_zimbraImapProxyBindPort,type:_PORT_},{id:ZaGlobalConfig.A_zimbraImapSSLProxyBindPort,ref:"attrs/"+ZaGlobalConfig.A_zimbraImapSSLProxyBindPort,type:_PORT_},{id:ZaGlobalConfig.A_zimbraPop3ProxyBindPort,ref:"attrs/"+ZaGlobalConfig.A_zimbraPop3ProxyBindPort,type:_PORT_},{id:ZaGlobalConfig.A_zimbraPop3SSLProxyBindPort,ref:"attrs/"+ZaGlobalConfig.A_zimbraPop3SSLProxyBindPort,type:_PORT_},{id:ZaGlobalConfig.A_zimbraLmtpBindPort,ref:"attrs/"+ZaGlobalConfig.A_zimbraLmtpBindPort,type:_PORT_},{id:ZaGlobalConfig.A_zimbraPop3NumThreads,ref:"attrs/"+ZaGlobalConfig.A_zimbraPop3NumThreads,type:_INT_,minInclusive:0,maxInclusive:2147483647},{id:ZaGlobalConfig.A_zimbraInstalledSkin,ref:"attrs/"+ZaGlobalConfig.A_zimbraInstalledSkin,type:_LIST_,listItem:{type:_STRING_}},{id:ZaGlobalConfig.A_zimbraSpnegoAuthEnabled,ref:"attrs/"+ZaGlobalConfig.A_zimbraSpnegoAuthEnabled,type:_ENUM_,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaGlobalConfig.A_zimbraSpnegoAuthRealm,ref:"attrs/"+ZaGlobalConfig.A_zimbraSpnegoAuthRealm,type:_STRING_},{id:ZaGlobalConfig.A_zimbraSpnegoAuthErrorURL,ref:"attrs/"+ZaGlobalConfig.A_zimbraSpnegoAuthErrorURL,type:_STRING_},{id:ZaGlobalConfig.A_zimbraWebClientLoginURL,ref:"attrs/"+ZaGlobalConfig.A_zimbraWebClientLoginURL,type:_STRING_,maxLength:255},{id:ZaGlobalConfig.A_zimbraWebClientLogoutURL,ref:"attrs/"+ZaGlobalConfig.A_zimbraWebClientLogoutURL,type:_STRING_,maxLength:255},{id:ZaGlobalConfig.A_zimbraWebClientLoginURLAllowedUA,ref:"attrs/"+ZaGlobalConfig.A_zimbraWebClientLoginURLAllowedUA,type:_LIST_,listItem:{type:_STRING_}},{id:ZaGlobalConfig.A_zimbraWebClientLogoutURLAllowedUA,ref:"attrs/"+ZaGlobalConfig.A_zimbraWebClientLogoutURLAllowedUA,type:_LIST_,listItem:{type:_STRING_}},{id:ZaGlobalConfig.A_zimbraWebClientLoginURLAllowedIP,ref:"attrs/"+ZaGlobalConfig.A_zimbraWebClientLoginURLAllowedIP,type:_LIST_,listItem:{type:_STRING_}},{id:ZaGlobalConfig.A_zimbraWebClientLogoutURLAllowedIP,ref:"attrs/"+ZaGlobalConfig.A_zimbraWebClientLogoutURLAllowedIP,type:_LIST_,listItem:{type:_STRING_}},{id:ZaGlobalConfig.A_zimbraForceClearCookies,ref:"attrs/"+ZaGlobalConfig.A_zimbraForceClearCookies,type:_ENUM_,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaGlobalConfig.A_zimbraMailSSLClientCertMode,ref:"attrs/"+ZaGlobalConfig.A_zimbraMailSSLClientCertMode,type:_STRING_,choices:["Disabled","NeedClientAuth","WantClientAuth"]},{id:ZaGlobalConfig.A_zimbraMailSSLClientCertPort,ref:"attrs/"+ZaGlobalConfig.A_zimbraMailSSLClientCertPort,type:_PORT_},{id:ZaGlobalConfig.A_zimbraMailSSLProxyClientCertPort,ref:"attrs/"+ZaGlobalConfig.A_zimbraMailSSLProxyClientCertPort,type:_PORT_},{id:ZaGlobalConfig.A_zimbraReverseProxyMailMode,ref:"attrs/"+ZaGlobalConfig.A_zimbraReverseProxyMailMode,type:_STRING_,choices:["http","https","both","mixed","redirect"]},{id:ZaGlobalConfig.A_zimbraReverseProxyClientCertMode,ref:"attrs/"+ZaGlobalConfig.A_zimbraReverseProxyClientCertMode,type:_STRING_,choices:["on","off","optional"]},{id:ZaGlobalConfig.A_zimbraMailSSLClientCertPrincipalMap,ref:"attrs/"+ZaGlobalConfig.A_zimbraMailSSLClientCertPrincipalMap,type:_STRING_},{id:ZaGlobalConfig.A_zimbraReverseProxyAdminIPAddress,ref:"attrs/"+ZaGlobalConfig.A_zimbraReverseProxyAdminIPAddress,type:_LIST_,listItem:{type:_STRING_}},{id:ZaGlobalConfig.A_zimbraReverseProxyClientCertCA,ref:"attrs/"+ZaGlobalConfig.A_zimbraReverseProxyClientCertCA,type:_STRING_},{id:ZaGlobalConfig.A_zimbraSkinForegroundColor,ref:"attrs/"+ZaGlobalConfig.A_zimbraSkinForegroundColor,type:_STRING_},{id:ZaGlobalConfig.A_zimbraSkinBackgroundColor,ref:"attrs/"+ZaGlobalConfig.A_zimbraSkinBackgroundColor,type:_STRING_},{id:ZaGlobalConfig.A_zimbraSkinSecondaryColor,ref:"attrs/"+ZaGlobalConfig.A_zimbraSkinSecondaryColor,type:_STRING_},{id:ZaGlobalConfig.A_zimbraSkinSelectionColor,ref:"attrs/"+ZaGlobalConfig.A_zimbraSkinSelectionColor,type:_STRING_},{id:ZaGlobalConfig.A_zimbraSkinLogoURL,ref:"attrs/"+ZaGlobalConfig.A_zimbraSkinLogoURL,type:_STRING_},{id:ZaGlobalConfig.A_zimbraSkinLogoLoginBanner,ref:"attrs/"+ZaGlobalConfig.A_zimbraSkinLogoLoginBanner,type:_STRING_},{id:ZaGlobalConfig.A_zimbraSkinLogoAppBanner,ref:"attrs/"+ZaGlobalConfig.A_zimbraSkinLogoAppBanner,type:_STRING_},{id:ZaGlobalConfig.A_zimbraAutoProvBatchSize,type:_NUMBER_,ref:"attrs/"+ZaGlobalConfig.A_zimbraAutoProvBatchSize,maxInclusive:2147483647,minInclusive:0},{id:ZaGlobalConfig.A_zimbraAutoProvPollingInterval,ref:"attrs/"+ZaGlobalConfig.A_zimbraAutoProvPollingInterval,type:_LIFETIME_NUMBER_,minInclusive:0,fractionDigits:0},{id:ZaGlobalConfig.A_zimbraAutoProvNotificationSubject,ref:"attrs/"+ZaGlobalConfig.A_zimbraAutoProvNotificationSubject,type:_STRING_},{id:ZaGlobalConfig.A_zimbraAutoProvNotificationBody,ref:"attrs/"+ZaGlobalConfig.A_zimbraAutoProvNotificationBody,type:_STRING_},{id:ZaGlobalConfig.A_zimbraHelpAdminURL,ref:"attrs/"+ZaGlobalConfig.A_zimbraHelpAdminURL,type:_STRING_},{id:ZaGlobalConfig.A_zimbraHelpDelegatedURL,ref:"attrs/"+ZaGlobalConfig.A_zimbraHelpDelegatedURL,type:_STRING_},{id:ZaGlobalConfig.A_zimbraFreebusyExchangeAuthUsername,ref:"attrs/"+ZaGlobalConfig.A_zimbraFreebusyExchangeAuthUsername,type:_STRING_},{id:ZaGlobalConfig.A_zimbraFreebusyExchangeAuthPassword,ref:"attrs/"+ZaGlobalConfig.A_zimbraFreebusyExchangeAuthPassword,type:_STRING_},{id:ZaGlobalConfig.A_zimbraFreebusyExchangeAuthScheme,ref:"attrs/"+ZaGlobalConfig.A_zimbraFreebusyExchangeAuthScheme,type:_ENUM_,choices:ZaSettings.authorizationScheme},{id:ZaGlobalConfig.A_zimbraFreebusyExchangeServerType,ref:"attrs/"+ZaGlobalConfig.A_zimbraFreebusyExchangeServerType,type:_ENUM_,choices:ZaSettings.exchangeServerType},{id:ZaGlobalConfig.A_zimbraFreebusyExchangeURL,ref:"attrs/"+ZaGlobalConfig.A_zimbraFreebusyExchangeURL,type:_STRING_},{id:ZaGlobalConfig.A_zimbraFreebusyExchangeUserOrg,ref:"attrs/"+ZaGlobalConfig.A_zimbraFreebusyExchangeUserOrg,type:_STRING_},{id:ZaGlobalConfig.A2_blocked_extension_selection,type:_LIST_},{id:ZaGlobalConfig.A2_common_extension_selection,type:_LIST_},{id:ZaGlobalConfig.A2_retentionPoliciesKeep,type:_LIST_},{id:ZaGlobalConfig.A2_retentionPoliciesPurge,type:_LIST_},{id:ZaGlobalConfig.A2_retentionPoliciesKeep_Selection,type:_LIST_},{id:ZaGlobalConfig.A2_retentionPoliciesPurge_Selection,type:_LIST_},{id:ZaGlobalConfig.A2_registeredDevice,type:_LIST_},{id:ZaGlobalConfig.A2_registeredDevice_Selection,type:_LIST_},{id:ZaGlobalConfig.A_zimbraEphemeralBackendURL,ref:"attrs/"+ZaGlobalConfig.A_zimbraEphemeralBackendURL,type:_STRING_,maxLength:128}]}
}if(AjxPackage.define("zimbraAdmin.status.model.ZaStatus")){ZaStatus=function(){ZaItem.call(this,"ZaStatus");
this._init()
};
ZaStatus.prototype=new ZaItem;
ZaStatus.prototype.constructor=ZaStatus;
ZaItem.loadMethods.ZaStatus=new Array();
ZaItem.initMethods.ZaStatus=new Array();
ZaStatus.A_server="server";
ZaStatus.A_service="service";
ZaStatus.A_timestamp="t";
ZaStatus.PRFX_Server="status_server";
ZaStatus.PRFX_Service="status_service";
ZaStatus.PRFX_Time="status_time";
ZaStatus.PRFX_Status="status_status";
ZaStatus.SVC_SPELL="spell";
ZaStatus.SVC_LOGGER="logger";
ZaStatus.SVC_MTA="mta";
ZaStatus.SVC_LDAP="ldap";
ZaStatus.SVC_MEMCACHED="memcached";
ZaStatus.SVC_MAILBOX="mailbox";
ZaStatus.SVC_CONVERTD="convertd";
ZaStatus.SVC_IMAPPROXY="proxy";
ZaStatus.SVC_STATS="stats";
ZaStatus.SVC_SNMP="snmp";
ZaStatus.SVC_AS="antispam";
ZaStatus.SVC_AV="antivirus";
ZaStatus.prototype.load=function(b,c){ZaItem.prototype.load.call(this,b,c,true,false)
};
ZaStatus.loadMethod=function(){try{var c=ZaApp.getInstance().getGlobalConfig().attrs[ZaServer.A_zimbraLogHostname];
if(c){var d=AjxSoapDoc.create("GetServiceStatusRequest",ZaZimbraAdmin.URN,null);
var g=new ZmCsfeCommand();
var f=new Object();
f.noAuthToken=true;
f.soapDoc=d;
var e=g.invoke(f).Body.GetServiceStatusResponse;
this.initFromJS(e)
}}catch(b){ZaApp.getInstance().getStatusViewController()._handleException(b,"ZaStatus.loadMethod",null,false)
}};
ZaItem.loadMethods.ZaStatus.push(ZaStatus.loadMethod);
ZaStatus.initMethod=function(){this.serverMap=new Object();
this.statusVector=new AjxVector();
this.id=Dwt.getNextId()
};
ZaItem.initMethods.ZaStatus.push(ZaStatus.initMethod);
ZaStatus.prototype.initFromJS=function(g){var j=g.timezone[0].id;
if(g.status&&g.status instanceof Array){var n=g.status;
var f=n.length;
var o=AjxDateFormat.getDateTimeInstance(AjxDateFormat.MEDIUM,AjxDateFormat.SHORT);
for(var h=0;
h<f;
h++){var c=n[h].server;
if(!this.serverMap[c]){this.serverMap[c]=new Object();
this.serverMap[c].name=c;
this.serverMap[c].id=Dwt.getNextId();
this.serverMap[c].serviceMap=null;
this.serverMap[c].status=1;
this.statusVector.add(this.serverMap[c])
}var k=n[h].service;
if(k){if(!this.serverMap[c].serviceMap){this.serverMap[c].serviceMap=new Object()
}var m=Number(n[h].t);
var b=m*1000;
var e=m-AjxTimezone.getOffset(AjxTimezone.DEFAULT_RULE)*60;
var l=e+AjxTimezone.getOffset(j,(new Date(b)))*60;
this.serverMap[c].serviceMap[k]=new Object();
this.serverMap[c].serviceMap[k].status=n[h]._content;
this.serverMap[c].serviceMap[k].timestamp=b;
var d=l*1000;
this.serverMap[c].serviceMap[k].time=o.format(new Date(d));
if(this.serverMap[c].serviceMap[k].status!=1){this.serverMap[c].status=0
}}}}};
ZaStatus.prototype.getStatusVector=function(){return this.statusVector
};
ZaStatus.compare=function(d,c){return(d.serverName<c.serverName)?-1:((d.serverName>c.serverName)?1:0)
}
}if(AjxPackage.define("zimbraAdmin.mta.model.ZaMTA")){ZaMTA=function(){ZaItem.call(this,"ZaMTA");
this._init()
};
ZaMTA.prototype=new ZaItem;
ZaMTA.prototype.constructor=ZaMTA;
ZaItem.loadMethods.ZaMTA=new Array();
ZaItem.initMethods.ZaMTA=new Array();
ZaMTA.RESULTSPERPAGE=25;
ZaMTA.POLL_INTERVAL=1000;
ZaMTA.STATUS_IDLE=0;
ZaMTA.STATUS_SCANNING=1;
ZaMTA.STATUS_SCAN_COMPLETE=2;
ZaMTA.STATUS_STALE=3;
ZaMTA.ID_ALL="ALL";
ZaMTA.SCANNER_STATUS_CHOICES=[{value:ZaMTA.STATUS_IDLE,label:ZaMsg.PQ_ScannerIdle},{value:ZaMTA.STATUS_SCANNING,label:ZaMsg.PQ_ScannerScanning},{value:ZaMTA.STATUS_SCAN_COMPLETE,label:ZaMsg.PQ_ScannerScanComplete},{value:ZaMTA.STATUS_STALE,label:ZaMsg.PQ_ScannerStaleData}];
ZaMTA.A_Servername="servername";
ZaMTA.A_Status="status";
ZaMTA.A_Stale="stale";
ZaMTA.A_LastError="lasterror";
ZaMTA.A_MTAName="mtaname";
ZaMTA.A_refreshTime="time";
ZaMTA.A_totalComplete="total";
ZaMTA.A_DeferredQ="deferred";
ZaMTA.A_IncomingQ="incoming";
ZaMTA.A_ActiveQ="active";
ZaMTA.A_CorruptQ="corrupt";
ZaMTA.A_HoldQ="hold";
ZaMTA.A_rdomain="todomain";
ZaMTA.A_sdomain="fromdomain";
ZaMTA.A_origip="received";
ZaMTA.A_raddress="to";
ZaMTA.A_saddress="from";
ZaMTA.A_error="reason";
ZaMTA.A_host="host";
ZaMTA.A_messages="messages";
ZaMTA.A_pageNum="pagenum";
ZaMTA.A_name="name";
ZaMTA.A_count="n";
ZaMTA.A_Qid="qid";
ZaMTA.A_query="query";
ZaMTA.A_more="more";
ZaMTA.A_scan="scan";
ZaMTA.A_selection_cache="_selection_cache";
ZaMTA.A_queue_filter_name="_queue_filter_name";
ZaMTA.A_queue_filter_value="_queue_filter_value";
ZaMTA.MsgIDS="message_ids";
ZaMTA._quecountsArr=new Array();
ZaMTA.threashHold;
ZaMTA.ActionRequeue="requeue";
ZaMTA.ActionDelete="delete";
ZaMTA.ActionHold="hold";
ZaMTA.ActionRelease="release";
ZaMTA.MANAGE_MAIL_QUEUE_RIGHT="manageMailQueue";
ZaMTA.prototype.getTabToolTip=function(){return ZaMsg.tt_tab_MTA+" "+this.type+" "+this.name
};
ZaMTA.prototype.getTabIcon=function(){return"Queue"
};
ZaMTA.prototype.QCountsCallback=function(f){try{if(!f){var e=new ZmCsfeException(ZMsg.errorEmptyResponse,ZmCsfeException.CSFE_SVC_ERROR,"ZaMTA.prototype.QCountsCallback");
throw e
}if(f.isException&&f.isException()){var d={obj:this,qName:null,poll:false};
ZaApp.getInstance().getMTAController(this._viewInternalId).fireChangeEvent(d);
throw (f.getException())
}var c=f.getResponse();
var b=c.Body;
if(b&&b.GetMailQueueInfoResponse.server&&b.GetMailQueueInfoResponse.server[0]){this.initFromJS(b.GetMailQueueInfoResponse.server[0],true);
ZaMTA._quecountsArr.sort();
ZaMTA.threashHold=ZaMTA._quecountsArr[Math.round(ZaMTA._quecountsArr.length/2)];
var d={obj:this,qName:null,poll:false};
ZaApp.getInstance().getMTAController(this._viewInternalId).fireChangeEvent(d)
}else{var e=new ZmCsfeException(ZMsg["service.UNKNOWN_DOCUMENT"],ZmCsfeException.SVC_UNKNOWN_DOCUMENT,"ZaMTA.prototype.QCountsCallback");
throw (e)
}}catch(e){this[ZaMTA.A_DeferredQ]={n:ZaMsg.PQ_Error};
this[ZaMTA.A_IncomingQ]={n:ZaMsg.PQ_Error};
this[ZaMTA.A_ActiveQ]={n:ZaMsg.PQ_Error};
this[ZaMTA.A_HoldQ]={n:ZaMsg.PQ_Error};
this[ZaMTA.A_CorruptQ]={n:ZaMsg.PQ_Error};
this[ZaMTA.A_DeferredQ][ZaMTA.A_refreshTime]=ZaMsg.PQ_Error;
this[ZaMTA.A_IncomingQ][ZaMTA.A_refreshTime]=ZaMsg.PQ_Error;
this[ZaMTA.A_ActiveQ][ZaMTA.A_refreshTime]=ZaMsg.PQ_Error;
this[ZaMTA.A_HoldQ][ZaMTA.A_refreshTime]=ZaMsg.PQ_Error;
this[ZaMTA.A_CorruptQ][ZaMTA.A_refreshTime]=ZaMsg.PQ_Error;
var d={obj:this,qName:null,poll:false};
ZaApp.getInstance().getMTAController(this._viewInternalId).fireChangeEvent(d);
ZaApp.getInstance().getCurrentController()._handleException(e,"ZaMTA.prototype.QCountsCallback")
}};
ZaMTA.getAll=function(l){var j=AjxSoapDoc.create("GetAllServersRequest",ZaZimbraAdmin.URN,null);
j.getMethod().setAttribute("service","mta");
j.getMethod().setAttribute("applyConfig","false");
var e=new Object();
e.asyncMode=l?true:false;
e.callback=l?l:null;
e.soapDoc=j;
j.setMethodAttribute("attrs",[ZaServer.A_ServiceHostname,ZaServer.A_description,ZaServer.A_zimbraServiceEnabled,ZaServer.A_zimbraServiceInstalled,ZaItem.A_zimbraId].join(","));
var d={controller:ZaApp.getInstance().getCurrentController(),busyMsg:ZaMsg.BUSY_GET_ALL_SERVER};
if(l){ZaRequestMgr.invoke(e,d)
}else{var f=ZaRequestMgr.invoke(e,d).Body.GetAllServersResponse;
var h=new ZaItemList(ZaMTA);
var b=new ZaItemList(ZaMTA);
h.loadFromJS(f);
var k=h.getArray();
var c=k.length;
for(var g=0;
g<c;
g++){if(ZaItem.hasRight(ZaMTA.MANAGE_MAIL_QUEUE_RIGHT,k[g])){b.add(k[g])
}}b.loadedRights=h.loadedRights;
return b
}};
ZaMTA.prototype.refresh=function(){this.load()
};
ZaMTA.prototype.initFromJS=function(h,r){if(h.a){ZaItem.prototype.initFromJS.call(this,h)
}var e=100;
if(h.queue){var c=h.queue.length;
for(var d=0;
d<c;
d++){var n=h.queue[d];
var p=n.name;
if(!this[p]){this[p]=new Object()
}if(n[ZaMTA.A_count]!=undefined){this[p][ZaMTA.A_count]=n[ZaMTA.A_count];
ZaMTA._quecountsArr.push(n[ZaMTA.A_count])
}if(n[ZaMTA.A_refreshTime]!=undefined){this[p][ZaMTA.A_refreshTime]=AjxDateUtil.computeDateStr(new Date(),parseInt(n[ZaMTA.A_refreshTime]))
}if(r){continue
}this[p][ZaMTA.MsgIDS]=null;
try{if(n[ZaMTA.A_totalComplete]!=undefined){this[p][ZaMTA.A_totalComplete]=parseInt(n[ZaMTA.A_totalComplete])
}}catch(q){this[p][ZaMTA.A_totalComplete]=0
}if(n[ZaMTA.A_scan]!=undefined){if(n[ZaMTA.A_scan]){this[p][ZaMTA.A_Status]=ZaMTA.STATUS_SCANNING
}else{this[p][ZaMTA.A_Status]=ZaMTA.STATUS_SCAN_COMPLETE;
this[p][ZaMTA.A_count]=this[p][ZaMTA.A_totalComplete]
}}if(n[ZaMTA.A_Stale]){this[p][ZaMTA.A_Status]=ZaMTA.STATUS_STALE
}this[p][ZaMTA.A_more]=n[ZaMTA.A_more];
this[p][ZaMTA.A_rdomain]=[];
this[p][ZaMTA.A_sdomain]=[];
this[p][ZaMTA.A_origip]=[];
this[p][ZaMTA.A_raddress]=[];
this[p][ZaMTA.A_saddress]=[];
this[p][ZaMTA.A_error]=[];
this[p][ZaMTA.A_host]=[];
this[p][ZaMTA.A_messages]=[];
if(n.qs){var s=h.queue[d].qs;
var o=s.length;
for(var g=0;
g<o;
g++){if(!this[p][s[g].type]){this[p][s[g].type]=[]
}if(s[g].qsi){var t=s[g].qsi;
var m=t.length;
for(var f=0;
f<m;
f++){t[f].prototype=new ZaMTAQSummaryItem;
t[f].getToolTip=ZaMTAQSummaryItem.prototype.getToolTip;
t[f].toString=ZaMTAQSummaryItem.prototype.toString;
t[f].id=e++
}this[p][s[g].type]=t
}}}this[p][ZaMTA.A_messages]=[];
if(n.qi){var b=h.queue[d].qi;
var l=b.length;
for(var g=0;
g<l;
g++){b[g].prototype=new ZaMTAQMsgItem;
b[g].getToolTip=ZaMTAQMsgItem.prototype.getToolTip;
b[g].toString=ZaMTAQMsgItem.prototype.toString
}this[p][ZaMTA.A_messages]=b
}}}};
ZaMTA.loadMethod=function(d,g){var c=AjxSoapDoc.create("GetMailQueueInfoRequest",ZaZimbraAdmin.URN,null);
var b=c.set("server","");
b.setAttribute("name",this.name);
var f=new ZmCsfeCommand();
var e=new Object();
e.soapDoc=c;
e.noAuthToken=true;
e.asyncMode=true;
var h=new AjxCallback(this,this.QCountsCallback);
e.callback=h;
f.invoke(e)
};
ZaItem.loadMethods.ZaMTA.push(ZaMTA.loadMethod);
ZaMTA.luceneEscape=function(b){return String(b).replace(/([\-\+\&\\!\(\)\{\}\[\]\^\"\~\*\?\:\\])/g,"\\$1")
};
ZaMTA.prototype.getMailQStatus=function(q,h,j,o,d){if(d){var m=this[q].n;
this[q]={n:m}
}o=(o!=null)?o:ZaMTA.RESULTSPERPAGE;
j=(j!=null)?j:"0";
var s=AjxSoapDoc.create("GetMailQueueRequest",ZaZimbraAdmin.URN,null);
var b=s.set("server","");
b.setAttribute("name",this.name);
var l=s.getDoc().createElement("queue");
l.setAttribute("name",q);
if(d){l.setAttribute("scan",1);
this[q][ZaMTA.A_Status]=ZaMTA.STATUS_SCANNING
}b.appendChild(l);
var t=s.getDoc().createElement("query");
if(!AjxUtil.isEmpty(h)){for(var r in h){var c=h[r];
if(c){var m=c.length;
if(m){var e=s.getDoc().createElement("field");
e.setAttribute("name",r);
for(var n=0;
n<m;
n++){var k=s.getDoc().createElement("match");
k.setAttribute("value",c[n][ZaMTAQSummaryItem.A_text]);
e.appendChild(k)
}t.appendChild(e)
}}}}if(j!=null){t.setAttribute("offset",j)
}if(o!=null){t.setAttribute("limit",o)
}l.appendChild(t);
var f=new ZmCsfeCommand();
var p=new Object();
p.soapDoc=s;
p.noAuthToken=true;
p.asyncMode=true;
var g=new AjxCallback(this,this.mailQStatusCallback,{qName:q,query:h,offset:j,limit:o,force:d});
p.callback=g;
f.invoke(p)
};
ZaMTA.prototype.mailQStatusCallback=function(c,j){var h=c.qName;
if(!j){var g=new ZmCsfeException(ZMsg.errorEmptyResponse,ZmCsfeException.CSFE_SVC_ERROR,"ZaMTA.prototype.mailQStatusCallback");
ZaApp.getInstance().getCurrentController()._handleException(g,"ZaMTA.prototype.mailQStatusCallback");
return
}if(j.isException&&j.isException()){if(j.getException().code==ZmCsfeException.SVC_ALREADY_IN_PROGRESS){var f={obj:this,qName:h,poll:true};
ZaApp.getInstance().getMTAController(this._viewInternalId).fireChangeEvent(f)
}else{if(j.getException().code==ZmCsfeException.SVC_TEMPORARILY_UNAVAILABLE){ZaApp.getInstance().getCurrentController().popupMsgDialog(ZaMsg.ERROR_PQ_SERVICE_UNAVAILABLE)
}else{ZaApp.getInstance().getCurrentController()._handleException(j.getException(),"ZaMTA.prototype.mailQStatusCallback")
}}return
}var e=j.getResponse();
var b=e.Body;
if(b&&b.GetMailQueueResponse.server&&b.GetMailQueueResponse.server[0]){this.initFromJS(b.GetMailQueueResponse.server[0],false);
var f={obj:this,poll:true};
for(var d in c){f[d]=c[d]
}ZaApp.getInstance().getMTAController(this._viewInternalId).fireChangeEvent(f)
}else{var g=new ZmCsfeException(ZMsg["service.UNKNOWN_DOCUMENT"],ZmCsfeException.SVC_UNKNOWN_DOCUMENT,"ZaMTA.prototype.mailQStatusCallback");
ZaApp.getInstance().getCurrentController()._handleException(g,"ZaMTA.prototype.mailQStatusCallback");
return
}};
ZaMTA.prototype.mailQueueAction=function(p,k,n,t){var r=AjxSoapDoc.create("MailQueueActionRequest",ZaZimbraAdmin.URN,null);
var b=r.set("server","");
b.setAttribute("name",this.name);
var j=r.getDoc().createElement("queue");
j.setAttribute("name",p);
b.appendChild(j);
var d;
if(n=="id"){d=r.set("action",t,j)
}else{d=r.getDoc().createElement("action");
var s=r.getDoc().createElement("query");
if(t!=null){for(var q in t){var c=t[q];
if(c){var l=c.length;
if(l){var e=r.getDoc().createElement("field");
e.setAttribute("name",q);
for(var m=0;
m<l;
m++){var h=r.getDoc().createElement("match");
h.setAttribute("value",c[m][ZaMTAQSummaryItem.A_text]);
e.appendChild(h)
}s.appendChild(e)
}}}}d.appendChild(s);
j.appendChild(d)
}d.setAttribute("op",k);
d.setAttribute("by",n);
var f=new ZmCsfeCommand();
var o=new Object();
o.soapDoc=r;
o.asyncMode=true;
o.noAuthToken=true;
var g=new AjxCallback(this,this.mailQueueActionClbck,p);
o.callback=g;
f.invoke(o)
};
ZaMTA.prototype.mailQueueActionClbck=function(c,d){this[c][ZaMTA.A_DeferredQ]=ZaMTA.STATUS_STALE;
this[c][ZaMTA.A_IncomingQ]=ZaMTA.STATUS_STALE;
this[c][ZaMTA.A_ActiveQ]=ZaMTA.STATUS_STALE;
this[c][ZaMTA.A_CorruptQ]=ZaMTA.STATUS_STALE;
this[c][ZaMTA.A_HoldQ]=ZaMTA.STATUS_STALE;
if(d.isException&&d.isException()){if(d.getException().code==ZmCsfeException.SVC_ALREADY_IN_PROGRESS){var b={obj:this,qName:c};
ZaApp.getInstance().getMTAController(this._viewInternalId).fireChangeEvent(b)
}else{if(d.getException().code==ZmCsfeException.SVC_TEMPORARILY_UNAVAILABLE){ZaApp.getInstance().getCurrentController().popupMsgDialog(ZaMsg.ERROR_PQ_SERVICE_UNAVAILABLE)
}else{ZaApp.getInstance().getCurrentController()._handleException(d.getException(),"ZaMTA.prototype.mailQueueActionClbck")
}}}else{this.getMailQStatus(c)
}};
ZaMTA.prototype.flushQueues=function(){var c=AjxSoapDoc.create("MailQueueFlushRequest",ZaZimbraAdmin.URN,null);
var e=c.set("server","");
e.setAttribute("name",this.name);
var d=new Object();
d.soapDoc=c;
d.asyncMode=false;
var b={controller:ZaApp.getInstance().getCurrentController(),busyMsg:ZaMsg.BUSY_FLUSH_QUEUE};
ZaRequestMgr.invoke(d,b)
};
ZaMTA.initMethod=function(){this.attrs=new Object();
this.id="";
this.name="";
this[ZaItem.A_zimbraId]="000";
this[ZaMTA.A_DeferredQ]={n:ZaMsg.PQ_Loading};
this[ZaMTA.A_IncomingQ]={n:ZaMsg.PQ_Loading};
this[ZaMTA.A_ActiveQ]={n:ZaMsg.PQ_Loading};
this[ZaMTA.A_HoldQ]={n:ZaMsg.PQ_Loading};
this[ZaMTA.A_CorruptQ]={n:ZaMsg.PQ_Loading};
this[ZaMTA.A_DeferredQ][ZaMTA.A_refreshTime]=ZaMsg.PQ_Loading;
this[ZaMTA.A_IncomingQ][ZaMTA.A_refreshTime]=ZaMsg.PQ_Loading;
this[ZaMTA.A_ActiveQ][ZaMTA.A_refreshTime]=ZaMsg.PQ_Loading;
this[ZaMTA.A_HoldQ][ZaMTA.A_refreshTime]=ZaMsg.PQ_Loading;
this[ZaMTA.A_CorruptQ][ZaMTA.A_refreshTime]=ZaMsg.PQ_Loading;
this[ZaMTA.A_DeferredQ][ZaMTA.A_pageNum]=0;
this[ZaMTA.A_IncomingQ][ZaMTA.A_pageNum]=0;
this[ZaMTA.A_ActiveQ][ZaMTA.A_pageNum]=0;
this[ZaMTA.A_HoldQ][ZaMTA.A_pageNum]=0;
this[ZaMTA.A_CorruptQ][ZaMTA.A_pageNum]=0;
this[ZaMTA.A_DeferredQ][ZaMTA.A_Status]=ZaMTA.STATUS_IDLE;
this[ZaMTA.A_IncomingQ][ZaMTA.A_Status]=ZaMTA.STATUS_IDLE;
this[ZaMTA.A_ActiveQ][ZaMTA.A_Status]=ZaMTA.STATUS_IDLE;
this[ZaMTA.A_HoldQ][ZaMTA.A_Status]=ZaMTA.STATUS_IDLE;
this[ZaMTA.A_CorruptQ][ZaMTA.A_Status]=ZaMTA.STATUS_IDLE
};
ZaItem.initMethods.ZaMTA.push(ZaMTA.initMethod);
ZaMTAQSummaryItem=function(c,b,e){if(arguments.length==0){return
}ZaItem.call(this,"ZaMTAQSummaryItem");
this._init();
if(c){this[ZaMTAQSummaryItem.A_description]=c
}if(b){this[ZaMTAQSummaryItem.A_text]=b
}if(e){this[ZaMTAQSummaryItem.A_count]=e
}};
ZaMTAQSummaryItem.A_text="t";
ZaMTAQSummaryItem.A_text_col="textColumn";
ZaMTAQSummaryItem.A_description="d";
ZaMTAQSummaryItem.A_count="n";
ZaMTAQSummaryItem.A_count_col="countColumn";
ZaMTAQSummaryItem.prototype=new ZaItem;
ZaMTAQSummaryItem.prototype.constructor=ZaMTAQSummaryItem;
ZaItem.loadMethods.ZaMTAQSummaryItem=new Array();
ZaItem.initMethods.ZaMTAQSummaryItem=new Array();
ZaMTAQSummaryItem.prototype.toString=function(){return this[ZaMTAQSummaryItem.A_text]+this[ZaMTAQSummaryItem.A_count]
};
ZaMTAQSummaryItem.prototype.getToolTip=function(){if(!this._toolTip){var c=new Array(20);
var b=0;
c[b++]=AjxStringUtil.trimHtml(AjxStringUtil.wordWrap({text:AjxStringUtil.htmlEncode(this[ZaMTAQSummaryItem.A_text]),prefix:"<br/>&nbsp;&nbsp;&nbsp;"})).replace(/^&nbsp;&nbsp;&nbsp;/,"");
c[b++]="<br>";
c[b++]=this[ZaMTAQSummaryItem.A_count];
c[b++]=" ";
c[b++]=ZaMsg.PQV_Messages;
this._toolTip=c.join("")
}return this._toolTip
};
ZaMTAQMsgItem=function(){if(arguments.length==0){return
}ZaItem.call(this,"ZaMTAQMsgItem");
this._init()
};
ZaMTAQMsgItem.A_time="time";
ZaMTAQMsgItem.A_content_filter="filter";
ZaMTAQMsgItem.A_origin_host="host";
ZaMTAQMsgItem.A_sender="from";
ZaMTAQMsgItem.A_fromdomain="fromdomain";
ZaMTAQMsgItem.A_todomain="todomain";
ZaMTAQMsgItem.A_id="id";
ZaMTAQMsgItem.A_recipients="to";
ZaMTAQMsgItem.A_size="size";
ZaMTAQMsgItem.A_origin_ip="received";
ZaMTAQMsgItem.A_error="reason";
ZaMTAQMsgItem.prototype=new ZaItem;
ZaMTAQMsgItem.prototype.constructor=ZaMTAQMsgItem;
ZaItem.loadMethods.ZaMTAQMsgItem=new Array();
ZaItem.initMethods.ZaMTAQMsgItem=new Array();
ZaMTAQMsgItem.prototype.toString=function(){return this[ZaMTAQMsgItem.A_id]
};
ZaMTAQMsgItem.prototype.initFromJS=function(b){this[ZaMTAQMsgItem.A_time]=b[ZaMTAQMsgItem.A_time];
this[ZaMTAQMsgItem.A_content_filter]=b[ZaMTAQMsgItem.A_content_filter];
this[ZaMTAQMsgItem.A_origin_host]=b[ZaMTAQMsgItem.A_origin_host];
this[ZaMTAQMsgItem.A_sender]=b[ZaMTAQMsgItem.A_sender];
this[ZaMTAQMsgItem.A_id]=b[ZaMTAQMsgItem.A_id];
this[ZaMTAQMsgItem.A_recipients]=b[ZaMTAQMsgItem.A_recipients];
this[ZaMTAQMsgItem.A_origin_ip]=b[ZaMTAQMsgItem.A_origin_ip]
};
ZaMTAQMsgItem.prototype.getToolTip=function(){if(!this._toolTip){var d=new Array(20);
var c=0;
d[c++]=AjxStringUtil.htmlEncode(ZaMsg.PQ_Sender+" "+this[ZaMTAQMsgItem.A_sender]);
d[c++]="<br/>";
d[c++]=AjxStringUtil.htmlEncode(ZaMsg.PQ_OriginHost+" "+this[ZaMTAQMsgItem.A_origin_host]);
d[c++]="<br/>";
d[c++]=AjxStringUtil.htmlEncode(ZaMsg.PQ_OriginDomain+" "+this[ZaMTAQMsgItem.A_fromdomain]);
d[c++]="<br/>";
d[c++]=AjxStringUtil.htmlEncode(ZaMsg.PQ_OriginIP+" "+this[ZaMTAQMsgItem.A_origin_ip]);
d[c++]="<br/>";
d[c++]=AjxStringUtil.htmlEncode(ZaMsg.PQ_Recipients+" "+this[ZaMTAQMsgItem.A_recipients]);
d[c++]="<br/>";
var b=this[ZaMTAQMsgItem.A_todomain] instanceof Array?this[ZaMTAQMsgItem.A_todomain]:[this[ZaMTAQMsgItem.A_todomain]];
d[c++]=AjxStringUtil.htmlEncode(ZaMsg.PQ_DestinationDomain+" "+ZaUtil.getUniqueArrayElements(b));
d[c++]="<br/>";
d[c++]=AjxStringUtil.htmlEncode(ZaMsg.PQ_ContentFilter+" "+this[ZaMTAQMsgItem.A_content_filter]);
d[c++]="<br/>";
d[c++]=AjxStringUtil.htmlEncode(ZaMsg.PQ_Size+" "+this[ZaMTAQMsgItem.A_size]);
d[c++]="<br/>";
if(this[ZaMTAQMsgItem.A_error]!=null&&this[ZaMTAQMsgItem.A_error]!=undefined&&this[ZaMTAQMsgItem.A_error].length>0){d[c++]=AjxStringUtil.trimHtml(AjxStringUtil.wordWrap({text:AjxStringUtil.htmlEncode(ZaMsg.PQ_Reason+" "+this[ZaMTAQMsgItem.A_error]),prefix:"<br/>&nbsp;&nbsp;&nbsp;"})).replace(/^&nbsp;&nbsp;&nbsp;/,"")
}this._toolTip=d.join("")
}return this._toolTip
};
PostQSummary_XModelItem=function(){};
XModelItemFactory.createItemType("_POSTQSUMMARY_","postqsummary",PostQSummary_XModelItem);
PostQSummary_XModelItem.prototype.items=[{id:ZaMTA.A_count,type:_NUMBER_},{id:ZaMTA.A_pageNum,type:_NUMBER_},{id:ZaMTA.A_query,type:_STRING_},{id:ZaMTA.A_Status,type:_NUMBER_,choices:ZaMTA.SCANNER_STATUS_CHOICES},{id:ZaMTA.A_refreshTime,type:_STRING_}];
ZaMTA.myXModel={items:[{id:ZaMTA.A_Status,type:_STRING_,ref:ZaMTA.A_Status},{id:ZaMTA.A_MTAName,type:_STRING_,ref:ZaMTA.A_MTAName},{id:ZaMTA.A_LastError,type:_STRING_,ref:ZaMTA.A_LastError},{id:ZaMTA.A_DeferredQ,type:_POSTQSUMMARY_},{id:ZaMTA.A_IncomingQ,type:_POSTQSUMMARY_},{id:ZaMTA.A_ActiveQ,type:_POSTQSUMMARY_},{id:ZaMTA.A_CorruptQ,type:_POSTQSUMMARY_},{id:ZaMTA.A_HoldQ,type:_POSTQSUMMARY_}]}
}if(AjxPackage.define("zimbraAdmin.task.model.ZaTask")){ZaTask=function(b){if(b){return
}ZaItem.call(this,"ZaTask");
this._init();
this.type="Task"
};
ZaTask.prototype=new ZaItem;
ZaTask.prototype.constructor=ZaTask;
ZaItem.loadMethods.ZaTask=new Array();
ZaItem.initMethods.ZaTask=new Array();
ZaTask.A_workingInProcess="workingInProcess";
ZaTask.A_runningTask="runningTask";
ZaTask.A2_isExpanded="expanded";
ZaTask.A2_isWIPExpanded="WIPExpanded";
ZaTask.A2_isRTExpanded="RTExpaneded";
ZaTask.A2_isServerExpaned="ServerExpaned";
ZaTask.A2_notificationCount="notificationCount";
ZaTask.postLoadDataFunction=new Array();
ZaTask.loadMethod=function(b,c){this.attrs=new Object();
this.attrs[ZaTask.A_workingInProcess]=[];
this.attrs[ZaTask.A_runningTask]=[];
this.schedulePostLoading()
};
ZaItem.loadMethods.ZaTask.push(ZaTask.loadMethod);
ZaTask.initMethod=function(){this[ZaTask.A2_isExpanded]=false;
this[ZaTask.A2_isWIPExpanded]=true;
this[ZaTask.A2_isRTExpanded]=true;
this[ZaTask.A2_isServerExpaned]=true
};
ZaItem.initMethods.ZaTask.push(ZaTask.initMethod);
ZaTask.myXModel={items:[{id:ZaTask.A_workingInProcess,ref:"attrs/"+ZaTask.A_workingInProcess,type:_LIST_,listItem:{type:_OBJECT_}},{id:ZaTask.A_runningTask,ref:"attrs/"+ZaTask.A_runningTask,type:_LIST_},{id:ZaTask.A2_isExpanded,ref:ZaTask.A2_isExpanded,type:_ENUM_,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaTask.A2_isWIPExpanded,ref:ZaTask.A2_isWIPExpanded,type:_ENUM_,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaTask.A2_isRTExpanded,ref:ZaTask.A2_isRTExpanded,type:_ENUM_,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaTask.A2_isServerExpaned,ref:ZaTask.A2_isServerExpaned,type:_ENUM_,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaTask.A2_notificationCount,ref:ZaTask.A2_notificationCount,type:_NUMBER_,defaultValue:0}]};
ZaTaskItem=function(d,e,h,b,c,f,j,m,g,k,l){this.viewForPopup=d;
this.cacheName=e;
this._title=h;
this.data=b;
this.position=c;
this.type=f||1;
this.displayName=j;
this.finishCallback=m;
this.cacheDialog=g
};
ZaTaskItem.minDisplayName=new Object();
ZaTaskItem.prototype.getMinDisplayName=function(c){var b;
if(!ZaTaskItem.minDisplayName[c]){ZaTaskItem.minDisplayName[c]=1;
b=c
}else{b=c+" "+ZaTaskItem.minDisplayName[c];
ZaTaskItem.minDisplayName[c]++
}return b
};
ZaTaskItem.prototype.toString=function(){if(!this.displayName){this.displayName=this.getMinDisplayName(this._title)
}return this.displayName
};
ZaTaskItem.prototype.getData=function(){return this.data._uuid
};
ZaTask.prototype.schedulePostLoading=function(){var b=new AjxTimedAction(this,ZaTask.prototype.startPostLoading);
AjxTimedAction.scheduleAction(b,100)
};
ZaTask.prototype.startPostLoading=function(){for(var b=0;
b<ZaTask.postLoadDataFunction.length;
b++){ZaTask.postLoadDataFunction[b].call(this)
}}
}if(AjxPackage.define("zimbraAdmin.home.view.ZaHomeXFormView")){ZaHomeXFormView=function(b,c){ZaTabView.call(this,{parent:b,cssClassName:"ZaHomeTabView DwtTabView",iKeyName:"ZaHomeXFormView",contextId:ZaId.VIEW_HOME});
this.initForm(ZaHome.myXModel,this.getMyXForm(c),null);
this._localXForm.setController(ZaApp.getInstance())
};
ZaHomeXFormView.prototype=new ZaTabView();
ZaHomeXFormView.prototype.constructor=ZaHomeXFormView;
ZaTabView.XFormModifiers.ZaHomeXFormView=new Array();
ZaHomeXFormView.prototype.setObject=function(d){this._containedObject=new Object();
this._containedObject.attrs=new Object();
for(var b in d.attrs){var c=this._localXForm.getModel().getItem(b);
if((c!=null&&c.type==_LIST_)||(d.attrs[b]!=null&&d.attrs[b] instanceof Array)){this._containedObject.attrs[b]=ZaItem.deepCloneListItem(d.attrs[b])
}else{this._containedObject.attrs[b]=d.attrs[b]
}}this._containedObject.name=d.name;
this._containedObject.type=d.type;
if(d.rights){this._containedObject.rights=d.rights
}if(d.setAttrs){this._containedObject.setAttrs=d.setAttrs
}if(d.getAttrs){this._containedObject.getAttrs=d.getAttrs
}if(d._defaultValues){this._containedObject._defaultValues=d._defaultValues
}if(d.id){this._containedObject.id=d.id
}if(!d[ZaModel.currentTab]){this._containedObject[ZaModel.currentTab]="1"
}else{this._containedObject[ZaModel.currentTab]=d[ZaModel.currentTab]
}this._localXForm.setInstance(this._containedObject)
};
ZaHomeXFormView.onCreateDomain=function(c){var b=ZaApp.getInstance().getDomainListController();
ZaDomainListController.prototype._newButtonListener.call(b,c)
};
ZaHomeXFormView.onConfigGAL=function(d){var e=ZaApp.getInstance().getDomainList();
if(e.size()>0){var c=e.getVector().getLast();
var b=ZaApp.getInstance().getDomainListController();
ZaDomainListController.prototype._openConfigGAL.call(b,c)
}};
ZaHomeXFormView.canConfigGAL=function(f){var g=ZaApp.getInstance().getDomainList();
var b=false;
if(g.size()>0){var e;
var c=g.getVector();
for(var d=c.size()-1;
d>=0;
d--){e=c.get(d);
if(ZaDomain.canConfigureGal(e)){b=true;
break
}}}return b
};
ZaHomeXFormView.onConfigAuth=function(d){var e=ZaApp.getInstance().getDomainList();
if(e.size()>0){var c=e.getVector().getLast();
var b=ZaApp.getInstance().getDomainListController();
ZaDomainListController.prototype._openAuthWiz.call(b,c)
}};
ZaHomeXFormView.canConfigAuth=function(b){var d=ZaApp.getInstance().getDomainList();
var c=false;
if(d.size()>0){c=ZaDomain.canConfigureAuth(d.getVector().getLast())
}return c
};
ZaHomeXFormView.onConfigDefaultCos=function(){var f=ZaApp.getInstance().getCosList();
if(f.size()>0){var b=f.getVector();
var e;
for(var d=0;
d<b.size();
d++){e=b.get(d);
if(e.name=="default"){break
}}if(d!=b.size()){ZaApp.getInstance().getCosController().show(e);
var c=ZaTree.getPathByArray([ZaMsg.OVP_home,ZaMsg.OVP_configure,ZaMsg.OVP_cos]);
ZaZimbraAdmin.getInstance().getOverviewPanelController().addObjectItem(c,e.name,null,true,false,e)
}}};
ZaHomeXFormView.onCreateAccount=function(b){ZaAccountListController.prototype._newAccountListener.call(ZaApp.getInstance().getAccountListController(),b)
};
ZaHomeXFormView.onManageAccount=function(c){var b=ZaZimbraAdmin.getInstance().getOverviewPanelController().getOverviewPanel().getFolderTree();
var d=ZaTree.getPathByArray([ZaMsg.OVP_home,ZaMsg.OVP_manageAccounts]);
b.setSelectionByPath(d,false)
};
ZaHomeXFormView.onViewService=function(c){var b=ZaZimbraAdmin.getInstance().getOverviewPanelController().getOverviewPanel().getFolderTree();
var d=ZaTree.getPathByArray([ZaMsg.OVP_home,ZaMsg.OVP_monitor,ZaMsg.OVP_status]);
b.setSelectionByPath(d,false)
};
ZaHomeXFormView.onSearchZimbraHelp=function(c){var b="http://support.zimbra.com/help/index.php";
window.open(b,"_blank")
};
ZaHomeXFormView.onDownloadGuide=function(b){ZaZimbraAdmin.prototype._dwListener.call(ZaZimbraAdmin.getInstance())
};
ZaHomeXFormView.onHelpLink=function(b){ZaZimbraAdmin.prototype._helpListener.call(ZaZimbraAdmin.getInstance())
};
ZaHomeXFormView.onCloseSetup=function(d){var c=this.getForm();
var b=c.getItemById(c.getId()+"_homeSetupGroup");
b.hide()
};
ZaHomeXFormView.getWarningPanelItem=function(b){return b.items[0].items[0].items[0]
};
ZaHomeXFormView.getHomeMaintenanceItem=function(b){return b.items[0].items[0].items[1].items[1]
};
ZaHomeXFormView.getHomeSetupItem=function(b){return b.items[0].items[0].items[2].items[0].items[1]
};
ZaHomeXFormView.getWarningPanelCol=function(){return["20px","*","120px"]
};
ZaHomeXFormView.showStatusInfo=function(){return(ZaSettings.ENABLED_UI_COMPONENTS[ZaSettings.GLOBAL_STATUS_VIEW]||ZaSettings.ENABLED_UI_COMPONENTS[ZaSettings.CARTE_BLANCHE_UI])
};
ZaHomeXFormView.showStaticsInfo=function(){return(ZaSettings.ENABLED_UI_COMPONENTS[ZaSettings.SERVER_STATS_VIEW]||ZaSettings.ENABLED_UI_COMPONENTS[ZaSettings.CARTE_BLANCHE_UI])
};
ZaHomeXFormView.showRunTime=function(){return(ZaHomeXFormView.showStatusInfo()||ZaHomeXFormView.showStaticsInfo())
};
ZaHomeXFormView.showMT=function(){var b=this.getInstanceValue(ZaHome.A2_maintenanceItemNum);
return b>1
};
ZaHomeXFormView.myXFormModifier=function(f,h){var k=[];
var e=[];
var d=[];
e.push(ZaMsg.LBL_HomeGetStared);
d.push([]);
var c=d[d.length-1];
c.push({});
c.push({});
c.push({});
c.push({});
if(ZaSettings.ENABLED_UI_COMPONENTS[ZaSettings.COS_LIST_VIEW]||ZaSettings.ENABLED_UI_COMPONENTS[ZaSettings.CARTE_BLANCHE_UI]){c[3]={value:ZaMsg.LBL_HomeConfigureCos,onClick:ZaHomeXFormView.onConfigDefaultCos}
}if(ZaSettings.ENABLED_UI_COMPONENTS[ZaSettings.DOMAIN_LIST_VIEW]||ZaSettings.ENABLED_UI_COMPONENTS[ZaSettings.CARTE_BLANCHE_UI]){var b=[];
if(ZaZimbraAdmin.canCreateTopDomain()){b.push({value:ZaMsg.LBL_HomeCreateDomain,onClick:ZaHomeXFormView.onCreateDomain})
}if(ZaHomeXFormView.canConfigGAL()){b.push({value:ZaMsg.LBL_HomeConfigureGAL,onClick:ZaHomeXFormView.onConfigGAL})
}if(ZaHomeXFormView.canConfigAuth()){b.push({value:ZaMsg.LBL_HomeCOnfigureAuth,onClick:ZaHomeXFormView.onConfigAuth})
}if(b.length>0){e.push(ZaMsg.LBL_HomeSetupDomain);
d.push(b)
}}if(ZaSettings.ENABLED_UI_COMPONENTS[ZaSettings.ACCOUNT_LIST_VIEW]||ZaSettings.ENABLED_UI_COMPONENTS[ZaSettings.CARTE_BLANCHE_UI]){var j=[];
if(ZaZimbraAdmin.canCreateAccount()){e.push(ZaMsg.LBL_HomeAddAccounts);
j.push({value:ZaMsg.LBL_HomeAddAccount,onClick:ZaHomeXFormView.onCreateAccount})
}else{if(ZaZimbraAdmin.canListAccounts()){e.push(ZaMsg.LBL_HomeManageAccount)
}}if(ZaZimbraAdmin.canListAccounts()){j.push({value:ZaMsg.LBL_HomeManageAccount,onClick:ZaHomeXFormView.onManageAccount})
}if(j.length>0){d.push(j)
}}var g={type:_ZATABCASE_,numCols:3,colSizes:["37%","34%","29%"],caseKey:1,paddingStyle:"",width:"100%",items:[{type:_GROUP_,colSpan:"*",numCols:1,containerCssClass:"ZaHomeWarningPanel",visibilityChecks:[[XForm.checkInstanceValue,ZaHome.A2_showWarningPanel,true]],visibilityChangeEventSources:[ZaHome.A2_showWarningPanel],items:[{type:_GROUP_,numCols:3,width:"100%",colSizes:ZaHomeXFormView.getWarningPanelCol(),containerCssClass:"ZaHomeWarningItem",visibilityChecks:[[XForm.checkInstanceValueNot,ZaHome.A2_serviceStatus,true],[ZaHomeXFormView.showStatusInfo]],visibilityChangeEventSources:[ZaHome.A2_serviceStatus],items:[{type:_OUTPUT_,ref:ZaHome.A2_serviceStatus,bmolsnr:true,getDisplayValue:function(l){if(this.getInstanceValue(ZaHome.A2_serviceDetailedMessage)==ZaMsg.MSG_HomeLoading){return""
}if(l===undefined){return AjxImg.getImageHtml("UnKnownStatus")
}else{if(l===false){return AjxImg.getImageHtml("Critical")
}else{return AjxImg.getImageHtml("Check")
}}},valueChangeEventSources:[ZaHome.A2_serviceDetailedMessage]},{type:_OUTPUT_,ref:ZaHome.A2_serviceDetailedMessage,bmolsnr:true},{type:_OUTPUT_,value:ZaMsg.LBL_HomeLinkServerStatus,containerCssClass:"ZaLinkedItem",onClick:ZaHomeXFormView.onViewService}]}]},{type:_GROUP_,colSpan:"*",numCols:3,width:"100%",colSizes:["33%","34%","33%"],containerCssClass:"ZaHomeInfoPanel",items:[{type:_GROUP_,containerCssClass:"ZaHomePanelPage",cssStyle:"overflow:hidden",colSizes:["auto"],items:[{type:_OUTPUT_,colSpan:"2",value:ZaMsg.LBL_HomeSummary,cssClass:"ZaHomeInfoTitle"},{type:_OUTPUT_,label:ZabMsg.LBL_HomeZimbraVersion,cssStyle:"word-wrap:break-word;word-break:break-all;",ref:ZaHome.A2_version},{type:_OUTPUT_,label:ZaMsg.LBL_HomeServerNum,ref:ZaHome.A2_serverNum,bmolsnr:true,visibilityChecks:["(ZaSettings.ENABLED_UI_COMPONENTS[ZaSettings.SERVER_LIST_VIEW] || ZaSettings.ENABLED_UI_COMPONENTS[ZaSettings.CARTE_BLANCHE_UI]);"]},{type:_OUTPUT_,label:ZaMsg.LBL_HomeAccountNum,ref:ZaHome.A2_accountNum,bmolsnr:true,visibilityChecks:["(ZaSettings.ENABLED_UI_COMPONENTS[ZaSettings.ACCOUNT_LIST_VIEW] || ZaSettings.ENABLED_UI_COMPONENTS[ZaSettings.CARTE_BLANCHE_UI]);"]},{type:_OUTPUT_,label:ZaMsg.LBL_HomeDomainNum,ref:ZaHome.A2_domainNum,bmolsnr:true,visibilityChecks:["(ZaSettings.ENABLED_UI_COMPONENTS[ZaSettings.DOMAIN_LIST_VIEW] || ZaSettings.ENABLED_UI_COMPONENTS[ZaSettings.CARTE_BLANCHE_UI]);"]},{type:_OUTPUT_,label:ZaMsg.LBL_HomeCosNum,ref:ZaHome.A2_cosNum,bmolsnr:true,visibilityChecks:["(ZaSettings.ENABLED_UI_COMPONENTS[ZaSettings.COS_LIST_VIEW] || ZaSettings.ENABLED_UI_COMPONENTS[ZaSettings.CARTE_BLANCHE_UI]);"]}]},{type:_GROUP_,id:"maintenance_grp",containerCssClass:"ZaHomePanelPage",items:[{type:_OUTPUT_,colSpan:"*",value:ZaMsg.LBL_HomeMaintenance,cssClass:"ZaHomeInfoTitle",visibilityChangeEventSources:[ZaHome.A2_maintenanceItemNum],visibilityChecks:[[ZaHomeXFormView.showMT]]}]},{type:_GROUP_,containerCssClass:"ZaHomePanelPage",visibilityChecks:[[ZaHomeXFormView.showRunTime]],items:[{type:_OUTPUT_,colSpan:"2",value:ZaMsg.LBL_HomeRuntime,cssClass:"ZaHomeInfoTitle"},{type:_OUTPUT_,label:ZaMsg.LBL_HomeService,ref:ZaHome.A2_serviceStatus,bmolsnr:true,visibilityChecks:[[ZaHomeXFormView.showStatusInfo]],valueChangeEventSources:[ZaHome.A2_serviceStatusMessage],cssStyle:"position:relative;",getDisplayValue:function(o){var n="";
var p=this.getInstanceValue(ZaHome.A2_serviceStatusMessage);
var m;
if(p!=ZaMsg.MSG_HomeLoading){m="position:absolute;left:0px;";
if(o===undefined){n=AjxImg.getImageHtml("UnKnownStatus",m)
}else{if(o===false){n=AjxImg.getImageHtml("Critical",m)
}else{n=AjxImg.getImageHtml("Check",m)
}}}var l="";
if(p!=""){l=["<span style='margin-left:16px;'>",p,"</span>"].join("")
}return n+l
}},{type:_OUTPUT_,label:ZaMsg.LBL_HomeActiveSession,align:_LEFT_,ref:ZaHome.A2_activeSession,bmolsnr:true,visibilityChecks:[[ZaHomeXFormView.showStaticsInfo]]},{type:_OUTPUT_,label:ZaMsg.LBL_HomeQueueLength,ref:ZaHome.A2_queueLength,bmolsnr:true,visibilityChecks:[[ZaHomeXFormView.showStaticsInfo]]}]}]},{type:_GROUP_,colSpan:"*",id:"homeSetupGroup",containerCssClass:"ZaHomeSetupPanelContainer",cssClass:"ZaHomeSetupPanel",numCols:1,items:[{type:_GROUP_,colSpan:"*",numCols:3,width:"100%",colSizes:["37%","34%","29%"],containerCssClass:"ZaHomeSetupPanelContent",items:[{type:_GROUP_,colSpan:"*",width:"100%",numCols:2,colSizes:["100%","20px"],items:[{type:_CELL_SPACER_},{type:_DWT_IMAGE_,value:"ImgRemoveLineUp",containerCssStyle:"cursor: pointer;",cssStyle:"position:static;display:none;",onClick:ZaHomeXFormView.onCloseSetup}]},{type:_SETUPGROUP_,colSpan:"*",headerLabels:e,contentItems:d}]}]}]};
k.push(g);
f.tableCssStyle="width:100%;";
f.items=[{type:_SWITCH_,align:_LEFT_,valign:_TOP_,items:k}]
};
ZaTabView.XFormModifiers.ZaHomeXFormView.push(ZaHomeXFormView.myXFormModifier);
ZaHomeXFormView.prototype.getBarImage=function(){return"Home"
}
}if(AjxPackage.define("zimbraAdmin.accounts.view.ZaAccountXFormView")){ZaAccountXFormView=function(b,c){ZaTabView.call(this,{parent:b,iKeyName:"ZaAccountXFormView",contextId:ZaId.TAB_ACCT_EDIT});
this.accountStatusChoices=[{value:ZaAccount.ACCOUNT_STATUS_ACTIVE,label:ZaAccount.getAccountStatusMsg(ZaAccount.ACCOUNT_STATUS_ACTIVE)},{value:ZaAccount.ACCOUNT_STATUS_CLOSED,label:ZaAccount.getAccountStatusMsg(ZaAccount.ACCOUNT_STATUS_CLOSED)},{value:ZaAccount.ACCOUNT_STATUS_LOCKED,label:ZaAccount.getAccountStatusMsg(ZaAccount.ACCOUNT_STATUS_LOCKED)},{value:ZaAccount.ACCOUNT_STATUS_LOCKOUT,label:ZaAccount.getAccountStatusMsg(ZaAccount.ACCOUNT_STATUS_LOCKOUT),visible:false},{value:ZaAccount.ACCOUNT_STATUS_PENDING,label:ZaAccount.getAccountStatusMsg(ZaAccount.ACCOUNT_STATUS_PENDING)},{value:ZaAccount.ACCOUNT_STATUS_MAINTENANCE,label:ZaAccount.getAccountStatusMsg(ZaAccount.ACCOUNT_STATUS_MAINTENANCE)}];
this.cosChoices=new XFormChoices([],XFormChoices.OBJECT_LIST,"id","name");
this.TAB_INDEX=0;
this._domains={};
this.initForm(ZaAccount.myXModel,this.getMyXForm(c),null);
this._localXForm._setAllowSelection()
};
ZaAccountXFormView.prototype=new ZaTabView();
ZaAccountXFormView.prototype.constructor=ZaAccountXFormView;
ZaTabView.XFormModifiers.ZaAccountXFormView=new Array();
ZaTabView.ObjectModifiers.ZaAccountXFormView=[];
ZaAccountXFormView.zimletChoices=new XFormChoices([],XFormChoices.SIMPLE_LIST);
ZaAccountXFormView.themeChoices=new XFormChoices([],XFormChoices.OBJECT_LIST);
ZaAccountXFormView.prototype.getTabIcon=function(){if(this._containedObject&&this._containedObject.attrs){var b;
var c=this._containedObject;
if(c.attrs[ZaAccount.A_zimbraIsAdminAccount]=="TRUE"){b="AdminUser"
}else{if(c.attrs[ZaAccount.A_zimbraIsDelegatedAdminAccount]=="TRUE"){b="DomainAdminUser"
}else{if(c.attrs[ZaAccount.A_zimbraIsSystemResource]=="TRUE"){b="SystemResource"
}else{b="Account"
}}}return b
}else{return"Account"
}};
ZaAccountXFormView.prototype.setObject=function(n){n.manageSpecialAttrs();
n.modifyObject();
this._containedObject=new ZaAccount();
this._containedObject.attrs=new Object();
for(var m in n.attrs){var j=this._localXForm.getModel().getItem(m);
if((j!=null&&j.type==_LIST_)||(n.attrs[m]!=null&&n.attrs[m] instanceof Array)){this._containedObject.attrs[m]=ZaItem.deepCloneListItem(n.attrs[m])
}else{this._containedObject.attrs[m]=n.attrs[m]
}}this._containedObject.name=n.name;
this._containedObject.type=n.type;
if(n.rights){this._containedObject.rights=n.rights
}if(n.setAttrs){this._containedObject.setAttrs=n.setAttrs
}else{this._containedObject.setAttrs={}
}if(n.getAttrs){this._containedObject.getAttrs=n.getAttrs
}if(n._defaultValues){this._containedObject._defaultValues=n._defaultValues
}if(n.id){this._containedObject.id=n.id
}for(var m in n.attrs){var j=this._localXForm.getModel().getItem(m);
if((j!=null&&j.type==_LIST_)||(n.attrs[m]!=null&&n.attrs[m] instanceof Array)){this._containedObject.attrs[m]=ZaItem.deepCloneListItem(n.attrs[m])
}else{this._containedObject.attrs[m]=n.attrs[m]
}}this._containedObject[ZaAccount.A2_memberOf]=ZaAccountMemberOfListView.cloneMemberOf(n);
this._containedObject[ZaAccount.A2_directMemberList+"_offset"]=n[ZaAccount.A2_directMemberList+"_offset"];
this._containedObject[ZaAccount.A2_directMemberList+"_more"]=n[ZaAccount.A2_directMemberList+"_more"];
this._containedObject[ZaAccount.A2_indirectMemberList+"_offset"]=n[ZaAccount.A2_indirectMemberList+"_offset"];
this._containedObject[ZaAccount.A2_indirectMemberList+"_more"]=n[ZaAccount.A2_indirectMemberList+"_more"];
this._containedObject[ZaAccount.A2_nonMemberList+"_offset"]=n[ZaAccount.A2_nonMemberList+"_offset"];
this._containedObject[ZaAccount.A2_nonMemberList+"_more"]=n[ZaAccount.A2_nonMemberList+"_more"];
if(ZaTabView.isTAB_ENABLED(n,ZaAccountXFormView.ALIASES_TAB_ATTRS,ZaAccountXFormView.ALIASES_TAB_RIGHTS)){if(this._containedObject.attrs[ZaAccount.A_zimbraMailAlias]){if(!this._containedObject.attrs[ZaAccount.A_zimbraMailAlias] instanceof Array){this._containedObject.attrs[ZaAccount.A_zimbraMailAlias]=[this._containedObject.attrs[ZaAccount.A_zimbraMailAlias]]
}}}if(ZaTabView.isTAB_ENABLED(n,ZaAccountXFormView.FORWARDING_TAB_ATTRS,ZaAccountXFormView.FORWARDING_TAB_RIGHTS)){if(this._containedObject.attrs[ZaAccount.A_zimbraMailForwardingAddress]){if(!this._containedObject.attrs[ZaAccount.A_zimbraMailForwardingAddress] instanceof Array){this._containedObject.attrs[ZaAccount.A_zimbraMailForwardingAddress]=[this._containedObject.attrs[ZaAccount.A_zimbraMailForwardingAddress]]
}}}if(this._containedObject.attrs[ZaAccount.A_COSId]){this._containedObject[ZaAccount.A2_autoCos]="FALSE"
}if(!this._containedObject.attrs[ZaAccount.A_COSId]){this._containedObject[ZaAccount.A2_autoCos]="TRUE"
}if(this._containedObject.attrs[ZaAccount.A_manager]){this._containedObject.attrs[ZaAccount.A_manager]=ZaAccountXFormView.getEmailFromUid(this._containedObject.attrs[ZaAccount.A_manager])
}if(this._containedObject.setAttrs[ZaAccount.A_COSId]){var o=ZaCos.getCosById(this._containedObject.attrs[ZaAccount.A_COSId]);
this.cosChoices.setChoices([o]);
this.cosChoices.dirtyChoices()
}this._containedObject[ZaAccount.A2_autodisplayname]=n[ZaAccount.A2_autodisplayname];
this._containedObject[ZaAccount.A2_confirmPassword]=n[ZaAccount.A2_confirmPassword];
if(!n[ZaModel.currentTab]){this._containedObject[ZaModel.currentTab]="1"
}else{this._containedObject[ZaModel.currentTab]=n[ZaModel.currentTab]
}var f=ZaAccount.getDomain(this._containedObject.name);
var p=ZaDomain.getDomainByName(f);
this._containedObject[ZaAccount.A2_accountTypes]=p.getAccountTypes();
this._containedObject[ZaAccount.A2_currentAccountType]=n[ZaAccount.A2_currentAccountType];
if(!n.getAttrs||n.getAttrs[ZaAccount.A_zimbraAvailableSkin]||n.getAttrs.all){var k=ZaApp.getInstance().getInstalledSkins();
if(AjxUtil.isEmpty(k)){if(p&&p.attrs&&!AjxUtil.isEmpty(p.attrs[ZaDomain.A_zimbraAvailableSkin])){k=p.attrs[ZaDomain.A_zimbraAvailableSkin]
}else{if(n._defaultValues&&n._defaultValues.attrs&&!AjxUtil.isEmpty(n._defaultValues.attrs[ZaAccount.A_zimbraAvailableSkin])){k=n._defaultValues.attrs[ZaAccount.A_zimbraAvailableSkin]
}else{k=[]
}}}else{if(AjxUtil.isString(k)){k=[k]
}}var h=ZaApp.getInstance().getSkinChoices(k);
ZaAccountXFormView.themeChoices.setChoices(h);
ZaAccountXFormView.themeChoices.dirtyChoices()
}if(!n.getAttrs||n.getAttrs[ZaAccount.A_zimbraZimletAvailableZimlets]||n.getAttrs.all){var d=ZaZimlet.getAll("extension");
if(!AjxUtil.isEmpty(d)&&d instanceof ZaItemList||d instanceof AjxVector){d=d.getArray()
}if(AjxUtil.isEmpty(d)){if(p&&p.attrs&&!AjxUtil.isEmpty(p.attrs[ZaDomain.A_zimbraZimletDomainAvailableZimlets])){d=p.attrs[ZaDomain.A_zimbraZimletDomainAvailableZimlets]
}else{if(n._defaultValues&&n._defaultValues.attrs&&!AjxUtil.isEmpty(n._defaultValues.attrs[ZaAccount.A_zimbraZimletAvailableZimlets])){d=n._defaultValues.attrs[ZaAccount.A_zimbraZimletAvailableZimlets]
}else{d=[]
}}ZaAccountXFormView.zimletChoices.setChoices(d);
ZaAccountXFormView.zimletChoices.dirtyChoices()
}else{var e=d.length;
var l=[];
for(var g=0;
g<e;
g++){var b=d[g];
l.push(b.name)
}ZaAccountXFormView.zimletChoices.setChoices(l);
ZaAccountXFormView.zimletChoices.dirtyChoices()
}}if(p&&p.attrs&&p.attrs[ZaDomain.A_AuthMech]&&(p.attrs[ZaDomain.A_AuthMech]!=ZaDomain.AuthMech_zimbra)){this._containedObject[ZaAccount.A2_isExternalAuth]=true
}else{this._containedObject[ZaAccount.A2_isExternalAuth]=false
}if(ZaItem.modelExtensions.ZaAccount){for(var g=0;
g<ZaItem.modelExtensions.ZaAccount.length;
g++){var c=ZaItem.modelExtensions.ZaAccount[g];
if(n[c]){if(n[c] instanceof Array){this._containedObject[c]=ZaItem.deepCloneListItem(n[c]);
if(n[c]._version){this._containedObject[c]._version=n[c]._version
}}else{this._containedObject[c]={};
for(var m in n[c]){var j=this._localXForm.getModel().getItem(m);
if((j!=null&&j.type==_LIST_)||(n[c][m]!=null&&n[c][m] instanceof Array)){this._containedObject[c][m]=ZaItem.deepCloneListItem(n[c][m])
}else{this._containedObject[c][m]=n[c][m]
}}}}}}this.modifyContainedObject();
this._localXForm.setInstance(this._containedObject);
this.formDirtyLsnr=new AjxListener(ZaApp.getInstance().getCurrentController(),ZaXFormViewController.prototype.handleXFormChange);
this._localXForm.addListener(DwtEvent.XFORMS_FORM_DIRTY_CHANGE,this.formDirtyLsnr);
this._localXForm.addListener(DwtEvent.XFORMS_VALUE_ERROR,this.formDirtyLsnr)
};
ZaAccountXFormView.gotNoSkins=function(){return !ZaAccountXFormView.gotSkins.call(this)
};
ZaAccountXFormView.gotSkins=function(){return(((ZaApp.getInstance()!=null)&&(ZaApp.getInstance().getInstalledSkins()!=null)&&(ZaApp.getInstance().getInstalledSkins().length>0))||!AjxUtil.isEmpty(this.getInstanceValue(ZaAccount.A_zimbraAvailableSkin))||!AjxUtil.isEmpty(this.getInstance()._defaultValues.attrs[ZaAccount.A_zimbraAvailableSkin]))
};
ZaAccountXFormView.preProcessCOS=function(d,b){var e=d;
if(ZaItem.ID_PATTERN.test(d)){e=d
}else{var c=ZaCos.getCosByName(d);
if(c){e=c.id
}}return e
};
ZaAccountXFormView.accountTypeItemId="account_type_output_"+Dwt.getNextId();
ZaAccountXFormView.prototype.updateAccountType=function(){var b=this._localXForm.getItemsById(ZaAccountXFormView.accountTypeItemId)[0];
b.updateElement(ZaAccount.getAccountTypeOutput.call(b,true))
};
ZaAccountXFormView.cosGroupItemId="cos_grouper_"+Dwt.getNextId();
ZaAccountXFormView.prototype.updateCosGrouper=function(){var b=this._localXForm.getItemsById(ZaAccountXFormView.cosGroupItemId)[0];
b.items[0].setElementEnabled(true);
b.updateElement()
};
ZaAccountXFormView.isSendingFromAnyAddressDisAllowed=function(){return(this.getInstanceValue(ZaAccount.A_zimbraAllowAnyFromAddress)!="TRUE")
};
ZaAccountXFormView.aliasSelectionListener=function(c){var b=this.widget.getSelection();
if(b&&b.length){b.sort();
b=AjxUtil.htmlDecode(b);
this.getModel().setInstanceValue(this.getInstance(),ZaAccount.A2_alias_selection_cache,b)
}else{this.getModel().setInstanceValue(this.getInstance(),ZaAccount.A2_alias_selection_cache,null)
}if(c.detail==DwtListView.ITEM_DBL_CLICKED){ZaAccountXFormView.editAliasButtonListener.call(this)
}};
ZaAccountXFormView.nonMemberOfSelectionListener=function(c){var b=this.widget.getSelection();
if(b&&b.length){b.sort();
this.getModel().setInstanceValue(this.getInstance(),ZaAccount.A2_nonMemberListSelected,b)
}else{this.getModel().setInstanceValue(this.getInstance(),ZaAccount.A2_nonMemberListSelected,null)
}if(c.detail==DwtListView.ITEM_DBL_CLICKED){ZaAccountMemberOfListView._addSelectedLists(this.getForm(),b)
}};
ZaAccountXFormView.directMemberOfSelectionListener=function(c){var b=this.widget.getSelection();
if(b&&b.length){b.sort();
this.getModel().setInstanceValue(this.getInstance(),ZaAccount.A2_directMemberListSelected,b)
}else{this.getModel().setInstanceValue(this.getInstance(),ZaAccount.A2_directMemberListSelected,null)
}if(c.detail==DwtListView.ITEM_DBL_CLICKED){ZaAccountMemberOfListView._removeSelectedLists(this.getForm(),b)
}};
ZaAccountXFormView.indirectMemberOfSelectionListener=function(c){var b=this.widget.getSelection();
if(b&&b.length){b.sort();
this.getModel().setInstanceValue(this.getInstance(),ZaAccount.A2_indirectMemberListSelected,b)
}else{this.getModel().setInstanceValue(this.getInstance(),ZaAccount.A2_indirectMemberListSelected,null)
}};
ZaAccountXFormView.isEditAliasEnabled=function(){return(!AjxUtil.isEmpty(this.getInstanceValue(ZaAccount.A2_alias_selection_cache))&&this.getInstanceValue(ZaAccount.A2_alias_selection_cache).length==1)
};
ZaAccountXFormView.isDeleteAliasEnabled=function(){return(!AjxUtil.isEmpty(this.getInstanceValue(ZaAccount.A2_alias_selection_cache)))
};
ZaAccountXFormView.deleteAliasButtonListener=function(){var b=this.getInstance();
if(b[ZaAccount.A2_alias_selection_cache]!=null){var f=b[ZaAccount.A2_alias_selection_cache].length;
if(f&&b.attrs[ZaAccount.A_zimbraMailAlias]){var d=b.attrs[ZaAccount.A_zimbraMailAlias];
for(var e=0;
e<f;
e++){var g=d.length-1;
for(var c=g;
c>=0;
c--){if(d[c]==b[ZaAccount.A2_alias_selection_cache][e]){d.splice(c,1);
break
}}}this.getModel().setInstanceValue(b,ZaAccount.A_zimbraMailAlias,d)
}}this.getModel().setInstanceValue(b,ZaAccount.A2_alias_selection_cache,[]);
this.getForm().parent.setDirty(true)
};
ZaAccountXFormView.editAliasButtonListener=function(){var b=this.getInstance();
if(b.alias_selection_cache&&b.alias_selection_cache[0]){var f=this.getForm().parent;
if(!f.editAliasDlg){f.editAliasDlg=new ZaEditAliasXDialog(ZaApp.getInstance().getAppCtxt().getShell(),"550px","150px",ZaMsg.Edit_Alias_Title);
f.editAliasDlg.registerCallback(DwtDialog.OK_BUTTON,ZaAccountXFormView.updateAlias,this.getForm(),null)
}var e={};
e[ZaAccount.A_name]=b[ZaAccount.A2_alias_selection_cache][0];
var d=b.attrs[ZaAccount.A_zimbraMailAlias].length;
for(var c=0;
c<d;
c++){if(b[ZaAccount.A2_alias_selection_cache][0]==b.attrs[ZaAccount.A_zimbraMailAlias][c]){e[ZaAlias.A_index]=c;
break
}}f.editAliasDlg.setObject(e);
f.editAliasDlg.popup()
}};
ZaAccountXFormView.updateAlias=function(){if(this.parent.editAliasDlg){this.parent.editAliasDlg.popdown();
var e=this.parent.editAliasDlg.getObject();
var k=this.getInstance();
var f=k.attrs[ZaAccount.A_zimbraMailAlias];
if(e[ZaAlias.A_index]>=0&&f[e[ZaAlias.A_index]]!=e[ZaAccount.A_name]){var d;
var c=ZaAccount.getDomain(e[ZaAccount.A_name]);
try{d=ZaDomain.getDomainByName(c)
}catch(h){}if(!d||!ZaItem.hasRight(ZaDomain.RIGHT_CREATE_ALIAS,d)){ZaApp.getInstance().getCurrentController().popupErrorDialog(AjxMessageFormat.format(ZaMsg.ERROR_NO_PERMISSION_CREATE_ALIAS,[c]))
}else{var b=null;
b=ZaApp.getInstance().getControllerById(this.parent.__internalId);
var g=null;
if(b){g=b._findAlias(e[ZaAccount.A_name])
}if(g){var j=null;
switch(g.type){case ZaItem.DL:if(g.name==e[ZaAccount.A_name]){j=AjxMessageFormat.format(ZaMsg.WARNING_EACH_ALIAS3,[g.name])
}else{j=AjxMessageFormat.format(ZaMsg.WARNING_EACH_ALIAS4,[g.name,e[ZaAccount.A_name]])
}break;
case ZaItem.ACCOUNT:if(g.name==e[ZaAccount.A_name]){j=AjxMessageFormat.format(ZaMsg.WARNING_EACH_ALIAS2,[g.name])
}else{j=AjxMessageFormat.format(ZaMsg.WARNING_EACH_ALIAS1,[g.name,e[ZaAccount.A_name]])
}break;
case ZaItem.RESOURCE:if(g.name==e[ZaAccount.A_name]){j=AjxMessageFormat.format(ZaMsg.WARNING_EACH_ALIAS5,[g.name])
}else{j=AjxMessageFormat.format(ZaMsg.WARNING_EACH_ALIAS6,[g.name,e[ZaAccount.A_name]])
}break;
default:j=AjxMessageFormat.format(ZaMsg.WARNING_EACH_ALIAS0,[e[ZaAccount.A_name]]);
break
}ZaApp.getInstance().getCurrentController().popupErrorDialog(j)
}else{f[e[ZaAlias.A_index]]=e[ZaAccount.A_name];
this.getModel().setInstanceValue(this.getInstance(),ZaAccount.A_zimbraMailAlias,f);
this.getModel().setInstanceValue(this.getInstance(),ZaAccount.A2_alias_selection_cache,new Array());
this.parent.setDirty(true)
}}}}};
ZaAccountXFormView.addAliasButtonListener=function(){var b=this.getInstance();
var d=this.getForm().parent;
if(!d.addAliasDlg){d.addAliasDlg=new ZaEditAliasXDialog(ZaApp.getInstance().getAppCtxt().getShell(),"550px","150px",ZaMsg.Add_Alias_Title);
d.addAliasDlg.registerCallback(DwtDialog.OK_BUTTON,ZaAccountXFormView.addAlias,this.getForm(),null)
}var c={};
c[ZaAccount.A_name]="";
c[ZaAlias.A_index]=-1;
d.addAliasDlg.setObject(c);
d.addAliasDlg.popup()
};
ZaAccountXFormView.addAlias=function(){if(this.parent.addAliasDlg){this.parent.addAliasDlg.popdown();
var e=this.parent.addAliasDlg.getObject();
if(e[ZaAccount.A_name]&&e[ZaAccount.A_name].length>1){var d;
var c=ZaAccount.getDomain(e[ZaAccount.A_name]);
try{d=ZaDomain.getDomainByName(c)
}catch(h){}if(!d||!ZaItem.hasRight(ZaDomain.RIGHT_CREATE_ALIAS,d)){ZaApp.getInstance().getCurrentController().popupErrorDialog(AjxMessageFormat.format(ZaMsg.ERROR_NO_PERMISSION_CREATE_ALIAS,[c]))
}else{var b=null;
b=ZaApp.getInstance().getControllerById(this.parent.__internalId);
var g=null;
if(b){g=b._findAlias(e[ZaAccount.A_name])
}if(g){var j=null;
switch(g.type){case ZaItem.DL:if(g.name==e[ZaAccount.A_name]){j=AjxMessageFormat.format(ZaMsg.WARNING_EACH_ALIAS3,[g.name])
}else{j=AjxMessageFormat.format(ZaMsg.WARNING_EACH_ALIAS4,[g.name,e[ZaAccount.A_name]])
}break;
case ZaItem.ACCOUNT:if(g.name==e[ZaAccount.A_name]){j=AjxMessageFormat.format(ZaMsg.WARNING_EACH_ALIAS2,[g.name])
}else{j=AjxMessageFormat.format(ZaMsg.WARNING_EACH_ALIAS1,[g.name,e[ZaAccount.A_name]])
}break;
case ZaItem.RESOURCE:if(g.name==e[ZaAccount.A_name]){j=AjxMessageFormat.format(ZaMsg.WARNING_EACH_ALIAS5,[g.name])
}else{j=AjxMessageFormat.format(ZaMsg.WARNING_EACH_ALIAS6,[g.name,e[ZaAccount.A_name]])
}break;
default:j=AjxMessageFormat.format(ZaMsg.WARNING_EACH_ALIAS0,[e[ZaAccount.A_name]]);
break
}ZaApp.getInstance().getCurrentController().popupErrorDialog(j)
}else{var k=this.getInstance();
var f=k.attrs[ZaAccount.A_zimbraMailAlias];
f.push(e[ZaAccount.A_name]);
this.getModel().setInstanceValue(this.getInstance(),ZaAccount.A_zimbraMailAlias,f);
this.getModel().setInstanceValue(this.getInstance(),ZaAccount.A2_alias_selection_cache,new Array());
this.parent.setDirty(true)
}}}}};
ZaAccountXFormView.isAuthfromInternal=function(e){var d=true;
var c=null;
var f=e.split("@");
if(f.length==2){c=f[1]
}else{c=f[0]
}if(c){var b=ZaDomain.getDomainByName(c);
if(b.attrs[ZaDomain.A_AuthMech]!=ZaDomain.AuthMech_zimbra){d=false
}if(!d&&b.attrs[ZaDomain.A_zimbraAuthFallbackToLocal]=="TRUE"){d=true
}}return d
};
ZaAccountXFormView.isAuthfromInternalSync=function(d,c){var e=null;
if(c){var b=this.getInstance();
if(b){e=this.getInstanceValue(c)
}}if(!e){e=d
}return ZaAccountXFormView.isAuthfromInternal(e)
};
ZaAccountXFormView.isEditFwdAddrEnabled=function(){return(!AjxUtil.isEmpty(this.getInstanceValue(ZaAccount.A2_fwdAddr_selection_cache))&&this.getInstanceValue(ZaAccount.A2_fwdAddr_selection_cache).length==1)
};
ZaAccountXFormView.isDeleteFwdAddrEnabled=function(){return(!AjxUtil.isEmpty(this.getInstanceValue(ZaAccount.A2_fwdAddr_selection_cache)))
};
ZaAccountXFormView.isEditCalFwdAddrEnabled=function(){return(!AjxUtil.isEmpty(this.getInstanceValue(ZaAccount.A2_calFwdAddr_selection_cache))&&this.getInstanceValue(ZaAccount.A2_calFwdAddr_selection_cache).length==1)
};
ZaAccountXFormView.isDeleteCalFwdAddrEnabled=function(){return(!AjxUtil.isEmpty(this.getInstanceValue(ZaAccount.A2_calFwdAddr_selection_cache)))
};
ZaAccountXFormView.deleteFwdAddrButtonListener=function(){var c=this.getInstance();
if(c[ZaAccount.A2_fwdAddr_selection_cache]!=null){var f=c[ZaAccount.A2_fwdAddr_selection_cache].length;
if(f&&c.attrs[ZaAccount.A_zimbraMailForwardingAddress]){var b=c.attrs[ZaAccount.A_zimbraMailForwardingAddress];
for(var e=0;
e<f;
e++){var g=b.length-1;
for(var d=g;
d>=0;
d--){if(b[d]==c[ZaAccount.A2_fwdAddr_selection_cache][e]){b.splice(d,1);
break
}}}this.getModel().setInstanceValue(c,ZaAccount.A_zimbraMailForwardingAddress,b);
this.getModel().setInstanceValue(c,ZaAccount.A2_fwdAddr_selection_cache,[])
}}this.getForm().parent.setDirty(true)
};
ZaAccountXFormView.deleteCalFwdAddrButtonListener=function(){var c=this.getInstance();
if(c[ZaAccount.A2_calFwdAddr_selection_cache]!=null){var f=c[ZaAccount.A2_calFwdAddr_selection_cache].length;
if(f&&c.attrs[ZaAccount.A_zimbraPrefCalendarForwardInvitesTo]){var b=c.attrs[ZaAccount.A_zimbraPrefCalendarForwardInvitesTo];
for(var e=0;
e<f;
e++){var g=b.length-1;
for(var d=g;
d>=0;
d--){if(b[d]==c[ZaAccount.A2_calFwdAddr_selection_cache][e]){b.splice(d,1);
break
}}}this.getModel().setInstanceValue(c,ZaAccount.A_zimbraPrefCalendarForwardInvitesTo,b);
this.getModel().setInstanceValue(c,ZaAccount.A2_calFwdAddr_selection_cache,[])
}}this.getForm().parent.setDirty(true)
};
ZaAccountXFormView.fwdAddrSelectionListener=function(c){var b=this.widget.getSelection();
if(b&&b.length){b.sort();
b=AjxUtil.htmlDecode(b);
this.getModel().setInstanceValue(this.getInstance(),ZaAccount.A2_fwdAddr_selection_cache,b)
}else{this.getModel().setInstanceValue(this.getInstance(),ZaAccount.A2_fwdAddr_selection_cache,[])
}if(c.detail==DwtListView.ITEM_DBL_CLICKED){ZaAccountXFormView.editFwdAddrButtonListener.call(this)
}};
ZaAccountXFormView.calFwdAddrSelectionListener=function(c){var b=this.widget.getSelection();
if(b&&b.length){b.sort();
b=AjxUtil.htmlDecode(b);
this.getModel().setInstanceValue(this.getInstance(),ZaAccount.A2_calFwdAddr_selection_cache,b)
}else{this.getModel().setInstanceValue(this.getInstance(),ZaAccount.A2_calFwdAddr_selection_cache,[])
}if(c.detail==DwtListView.ITEM_DBL_CLICKED){ZaAccountXFormView.editCalFwdAddrButtonListener.call(this)
}};
ZaAccountXFormView.editFwdAddrButtonListener=function(){var b=this.getInstance();
if(b[ZaAccount.A2_fwdAddr_selection_cache]&&b[ZaAccount.A2_fwdAddr_selection_cache][0]){var f=this.getForm().parent;
if(!f.editFwdAddrDlg){f.editFwdAddrDlg=new ZaEditFwdAddrXDialog(ZaApp.getInstance().getAppCtxt().getShell(),"400px","150px",ZaMsg.Edit_FwdAddr_Title);
f.editFwdAddrDlg.registerCallback(DwtDialog.OK_BUTTON,ZaAccountXFormView.updateFwdAddr,this.getForm(),null)
}var e={};
e[ZaAccount.A_name]=b[ZaAccount.A2_fwdAddr_selection_cache][0];
var d=b.attrs[ZaAccount.A_zimbraMailForwardingAddress].length;
for(var c=0;
c<d;
c++){if(b.fwdAddr_selection_cache[0]==b.attrs[ZaAccount.A_zimbraMailForwardingAddress][c]){e[ZaAlias.A_index]=c;
break
}}f.editFwdAddrDlg.setObject(e);
f.editFwdAddrDlg.popup()
}};
ZaAccountXFormView.editCalFwdAddrButtonListener=function(){var b=this.getInstance();
if(b[ZaAccount.A2_calFwdAddr_selection_cache]&&b[ZaAccount.A2_calFwdAddr_selection_cache][0]){var f=this.getForm().parent;
if(!f.editCalFwdAddrDlg){f.editCalFwdAddrDlg=new ZaEditFwdAddrXDialog(ZaApp.getInstance().getAppCtxt().getShell(),"400px","150px",ZaMsg.Edit_FwdAddr_Title);
f.editCalFwdAddrDlg.registerCallback(DwtDialog.OK_BUTTON,ZaAccountXFormView.updateCalFwdAddr,this.getForm(),null)
}var e={};
e[ZaAccount.A_name]=b[ZaAccount.A2_calFwdAddr_selection_cache][0];
var d=b.attrs[ZaAccount.A_zimbraPrefCalendarForwardInvitesTo].length;
for(var c=0;
c<d;
c++){if(b[ZaAccount.A2_calFwdAddr_selection_cache][0]==b.attrs[ZaAccount.A_zimbraPrefCalendarForwardInvitesTo][c]){e[ZaAlias.A_index]=c;
break
}}f.editCalFwdAddrDlg.setObject(e);
f.editCalFwdAddrDlg.popup()
}};
ZaAccountXFormView.updateFwdAddr=function(){if(this.parent.editFwdAddrDlg){this.parent.editFwdAddrDlg.popdown();
var d=this.parent.editFwdAddrDlg.getObject();
var c=this.getInstance();
var b=c.attrs[ZaAccount.A_zimbraMailForwardingAddress];
if(d[ZaAlias.A_index]>=0&&b[d[ZaAlias.A_index]]!=d[ZaAccount.A_name]){this.getModel().setInstanceValue(this.getInstance(),ZaAccount.A2_fwdAddr_selection_cache,[]);
b[d[ZaAlias.A_index]]=d[ZaAccount.A_name];
this.getModel().setInstanceValue(c,ZaAccount.A_zimbraMailForwardingAddress,b);
this.parent.setDirty(true)
}}};
ZaAccountXFormView.updateCalFwdAddr=function(){if(this.parent.editCalFwdAddrDlg){this.parent.editCalFwdAddrDlg.popdown();
var d=this.parent.editCalFwdAddrDlg.getObject();
var c=this.getInstance();
var b=c.attrs[ZaAccount.A_zimbraPrefCalendarForwardInvitesTo];
if(d[ZaAlias.A_index]>=0&&b[d[ZaAlias.A_index]]!=d[ZaAccount.A_name]){this.getModel().setInstanceValue(this.getInstance(),ZaAccount.A2_calFwdAddr_selection_cache,[]);
b[d[ZaAlias.A_index]]=d[ZaAccount.A_name];
this.getModel().setInstanceValue(c,ZaAccount.A_zimbraPrefCalendarForwardInvitesTo,b);
this.parent.setDirty(true)
}}};
ZaAccountXFormView.addFwdAddrButtonListener=function(){var b=this.getInstance();
var d=this.getForm().parent;
if(!d.addFwdAddrDlg){d.addFwdAddrDlg=new ZaEditFwdAddrXDialog(ZaApp.getInstance().getAppCtxt().getShell(),"400px","150px",ZaMsg.Add_FwdAddr_Title);
d.addFwdAddrDlg.registerCallback(DwtDialog.OK_BUTTON,ZaAccountXFormView.addFwdAddr,this.getForm(),null)
}var c={};
c[ZaAccount.A_name]="";
c[ZaAlias.A_index]=-1;
d.addFwdAddrDlg.setObject(c);
d.addFwdAddrDlg.popup()
};
ZaAccountXFormView.addCalFwdAddrButtonListener=function(){var b=this.getInstance();
var d=this.getForm().parent;
if(!d.addCalFwdAddrDlg){d.addCalFwdAddrDlg=new ZaEditFwdAddrXDialog(ZaApp.getInstance().getAppCtxt().getShell(),"400px","150px",ZaMsg.Add_FwdAddr_Title);
d.addCalFwdAddrDlg.registerCallback(DwtDialog.OK_BUTTON,ZaAccountXFormView.addCalFwdAddr,this.getForm(),null)
}var c={};
c[ZaAccount.A_name]="";
c[ZaAlias.A_index]=-1;
d.addCalFwdAddrDlg.setObject(c);
d.addCalFwdAddrDlg.popup()
};
ZaAccountXFormView.addFwdAddr=function(){if(this.parent.addFwdAddrDlg){this.parent.addFwdAddrDlg.popdown();
var c=this.parent.addFwdAddrDlg.getObject();
if(c[ZaAccount.A_name]&&c[ZaAccount.A_name].length>1){var b=this.getInstance().attrs[ZaAccount.A_zimbraMailForwardingAddress];
b.push(c[ZaAccount.A_name]);
this.getModel().setInstanceValue(this.getInstance(),ZaAccount.A_zimbraMailForwardingAddress,b);
this.getModel().setInstanceValue(this.getInstance(),ZaAccount.A2_fwdAddr_selection_cache,[]);
this.parent.setDirty(true)
}}};
ZaAccountXFormView.addCalFwdAddr=function(){if(this.parent.addCalFwdAddrDlg){this.parent.addCalFwdAddrDlg.popdown();
var c=this.parent.addCalFwdAddrDlg.getObject();
if(c[ZaAccount.A_name]&&c[ZaAccount.A_name].length>1){var b=this.getInstance().attrs[ZaAccount.A_zimbraPrefCalendarForwardInvitesTo];
b.push(c[ZaAccount.A_name]);
this.getModel().setInstanceValue(this.getInstance(),ZaAccount.A_zimbraPrefCalendarForwardInvitesTo,b);
this.getModel().setInstanceValue(this.getInstance(),ZaAccount.A2_calFwdAddr_selection_cache,[]);
this.parent.setDirty(true)
}}};
ZaAccountXFormView.fpSelectionListener=function(c){var b=this.widget.getSelection();
if(b&&b.length){b.sort();
b=AjxUtil.htmlDecode(b);
this.getModel().setInstanceValue(this.getInstance(),ZaAccount.A2_fp_selection_cache,b)
}else{this.getModel().setInstanceValue(this.getInstance(),ZaAccount.A2_fp_selection_cache,[])
}if(c.detail==DwtListView.ITEM_DBL_CLICKED){ZaAccountXFormView.editFpButtonListener.call(this)
}};
ZaAccountXFormView.isEditFpEnabled=function(){return(!AjxUtil.isEmpty(this.getInstanceValue(ZaAccount.A2_fp_selection_cache))&&this.getInstanceValue(ZaAccount.A2_fp_selection_cache).length==1&&!AjxUtil.isEmpty(this.getInstanceValue(ZaAccount.A_zimbraForeignPrincipal)))
};
ZaAccountXFormView.isDeleteFpEnabled=function(){return(!AjxUtil.isEmpty(this.getInstanceValue(ZaAccount.A2_fp_selection_cache)))
};
ZaAccountXFormView.isPushFpEnabled=function(){return(!AjxUtil.isEmpty(this.getInstanceValue(ZaAccount.A_zimbraForeignPrincipal)))
};
ZaAccountXFormView.deleteFpButtonListener=function(){var c=this.getInstance();
if(!AjxUtil.isEmpty(c.fp_selection_cache)){var f=c.fp_selection_cache.length;
var b=c.attrs[ZaAccount.A_zimbraForeignPrincipal];
if(f&&!AjxUtil.isEmpty(b)){for(var e=0;
e<f;
e++){var g=b.length-1;
for(var d=g;
d>=0;
d--){if(b[d]==c.fp_selection_cache[e]){b.splice(d,1);
break
}}}this.getModel().setInstanceValue(c,ZaAccount.A_zimbraForeignPrincipal,b);
this.getModel().setInstanceValue(c,ZaAccount.A2_fp_selection_cache,[])
}}this.getForm().parent.setDirty(true)
};
ZaAccountXFormView.editFpButtonListener=function(){var b=this.getInstance();
if(b.fp_selection_cache&&b.fp_selection_cache[0]){var f=this.getForm().parent;
if(!f.editFpDlg){f.editFpDlg=new ZaEditFpXDialog(ZaApp.getInstance().getAppCtxt().getShell(),"550px","150px",ZaMsg.Edit_Fp_Title);
f.editFpDlg.registerCallback(DwtDialog.OK_BUTTON,ZaAccountXFormView.updateFp,this.getForm(),null)
}var e=ZaFp.getObject(b.fp_selection_cache[0]);
var d=b.attrs[ZaAccount.A_zimbraForeignPrincipal].length;
for(var c=0;
c<d;
c++){if(b.fp_selection_cache[0]==b.attrs[ZaAccount.A_zimbraForeignPrincipal][c]){e[ZaFp.A_index]=c;
break
}}f.editFpDlg.setObject(e);
f.editFpDlg.popup()
}};
ZaAccountXFormView.pushFpButtonListener=function(){var b=this.getInstance();
if(this.getForm().parent.isDirty()){ZaApp.getInstance().getCurrentController().popupMsgDialog(ZaMsg.DIRTY_SAVE_ACCT,true)
}else{if(b.attrs[ZaAccount.A_zimbraForeignPrincipal].length>0){ZaFp.push(b.id)
}}};
ZaAccountXFormView.updateFp=function(){if(this.parent.editFpDlg){this.parent.editFpDlg.popdown();
var c=this.parent.editFpDlg.getObject();
var b=this.getInstance().attrs[ZaAccount.A_zimbraForeignPrincipal];
if(c[ZaFp.A_index]>=0&&b[c[ZaFp.A_index]]!=ZaFp.getEntry(c)){this.getModel().setInstanceValue(this.getInstance(),ZaAccount.A2_fp_selection_cache,[]);
b[c[ZaFp.A_index]]=ZaFp.getEntry(c);
this.getModel().setInstanceValue(this.getInstance(),ZaAccount.A_zimbraForeignPrincipal,b);
this.parent.setDirty(true)
}}};
ZaAccountXFormView.addFpButtonListener=function(){var b=this.getInstance();
var d=this.getForm().parent;
if(!d.addFpDlg){d.addFpDlg=new ZaEditFpXDialog(ZaApp.getInstance().getAppCtxt().getShell(),"550px","150px",ZaMsg.Add_Fp_Title);
d.addFpDlg.registerCallback(DwtDialog.OK_BUTTON,ZaAccountXFormView.addFp,this.getForm(),null)
}var c={};
c[ZaFp.A_prefix]="";
c[ZaFp.A_name]="";
c[ZaFp.A_index]=-1;
d.addFpDlg.setObject(c);
d.addFpDlg.popup()
};
ZaAccountXFormView.addFp=function(){if(this.parent.addFpDlg){var c=this.parent.addFpDlg.getObject();
var d=this.parent._app;
var b=this.getInstance().attrs[ZaAccount.A_zimbraForeignPrincipal];
if(ZaFp.findDupPrefixFp(b,c[ZaFp.A_prefix])){ZaApp.getInstance().getCurrentController().popupErrorDialog(ZaMsg.ERROR_ONE_FP_PREFIX_ALLOWED,null)
}else{this.parent.addFpDlg.popdown();
if(ZaFp.getEntry(c).length>0){b.push(ZaFp.getEntry(c));
this.getModel().setInstanceValue(this.getInstance(),ZaAccount.A_zimbraForeignPrincipal,b);
this.getModel().setInstanceValue(this.getInstance(),ZaAccount.A2_fp_selection_cache,[]);
this.parent.setDirty(true)
}}}};
ZaAccountXFormView.isDomainLeftAccountsAlertVisible=function(){var c=this.getInstanceValue(ZaAccount.A2_domainLeftAccounts);
var b=this.getInstanceValue(ZaAccount.A2_accountTypes);
return(!AjxUtil.isEmpty(c)&&AjxUtil.isEmpty(b))
};
ZaAccountXFormView.isAccountTypeGrouperVisible=function(){return !AjxUtil.isEmpty(this.getInstanceValue(ZaAccount.A2_accountTypes))
};
ZaAccountXFormView.isAccountsTypeAlertInvisible=function(){var b=this.getInstanceValue(ZaAccount.A2_showAccountTypeMsg);
return(AjxUtil.isEmpty(b))
};
ZaAccountXFormView.isAccountTypeSet=function(){return !ZaAccount.isAccountTypeSet(this.getInstance())
};
ZaAccountXFormView.isAttributeDefined=function(b){return this.getInstanceValue(b)!=undefined
};
ZaAccountXFormView.CONTACT_TAB_ATTRS=[ZaAccount.A_telephoneNumber,ZaAccount.A_homePhone,ZaAccount.A_mobile,ZaAccount.A_pager,ZaAccount.A_company,ZaAccount.A_title,ZaAccount.A_manager,ZaAccount.A_orgUnit,ZaAccount.A_office,ZaAccount.A_facsimileTelephoneNumber,ZaAccount.A_street,ZaAccount.A_city,ZaAccount.A_state,ZaAccount.A_zip,ZaAccount.A_country];
ZaAccountXFormView.CONTACT_TAB_RIGHTS=[];
ZaAccountXFormView.ACCOUNT_NAME_GROUP_ATTRS=[ZaAccount.A_name,ZaAccount.A_firstName,ZaAccount.A_initials,ZaAccount.A_lastName,ZaAccount.A_displayname,ZaAccount.A_zimbraHideInGal];
ZaAccountXFormView.MEMBEROF_TAB_ATTRS=[];
ZaAccountXFormView.MEMBEROF_TAB_RIGHTS=[ZaAccount.GET_ACCOUNT_MEMBERSHIP_RIGHT];
ZaAccountXFormView.FEATURE_TAB_ATTRS=[ZaAccount.A_zimbraFeatureManageZimlets,ZaAccount.A_zimbraFeatureReadReceiptsEnabled,ZaAccount.A_zimbraFeatureMailEnabled,ZaAccount.A_zimbraFeatureContactsEnabled,ZaAccount.A_zimbraFeatureDistributionListFolderEnabled,ZaAccount.A_zimbraFeatureCalendarEnabled,ZaAccount.A_zimbraFeatureTasksEnabled,ZaAccount.A_zimbraFeatureBriefcasesEnabled,ZaAccount.A_zimbraFeatureOptionsEnabled,ZaAccount.A_zimbraFeatureTaggingEnabled,ZaAccount.A_zimbraFeatureSharingEnabled,ZaAccount.A_zimbraExternalSharingEnabled,ZaAccount.A_zimbraSharingEnabled,ZaAccount.A_zimbraFeatureChangePasswordEnabled,ZaAccount.A_zimbraFeatureSkinChangeEnabled,ZaAccount.A_zimbraFeatureHtmlComposeEnabled,ZaAccount.A_zimbraFeatureGalEnabled,ZaAccount.A_zimbraFeatureMAPIConnectorEnabled,ZaAccount.A_zimbraFeatureEwsEnabled,ZaAccount.A_zimbraFeatureTouchClientEnabled,ZaAccount.A_zimbraFeatureWebClientOfflineAccessEnabled,ZaAccount.A_zimbraFeatureGalAutoCompleteEnabled,ZaAccount.A_zimbraFeatureMailPriorityEnabled,ZaAccount.A_zimbraFeatureFlaggingEnabled,ZaAccount.A_zimbraImapEnabled,ZaAccount.A_zimbraPop3Enabled,ZaAccount.A_zimbraFeatureWebClientEnabled,ZaAccount.A_zimbraFeatureImapDataSourceEnabled,ZaAccount.A_zimbraFeaturePop3DataSourceEnabled,ZaAccount.A_zimbraFeatureMailSendLaterEnabled,ZaAccount.A_zimbraFeatureConversationsEnabled,ZaAccount.A_zimbraFeatureFiltersEnabled,ZaAccount.A_zimbraFeatureOutOfOfficeReplyEnabled,ZaAccount.A_zimbraFeatureNewMailNotificationEnabled,ZaAccount.A_zimbraFeatureIdentitiesEnabled,ZaAccount.A_zimbraFeatureGroupCalendarEnabled,ZaAccount.A_zimbraFeaturePeopleSearchEnabled,ZaAccount.A_zimbraFeatureAdvancedSearchEnabled,ZaAccount.A_zimbraFeatureSavedSearchesEnabled,ZaAccount.A_zimbraFeatureInitialSearchPreferenceEnabled,ZaAccount.A_zimbraFeatureImportFolderEnabled,ZaAccount.A_zimbraFeatureExportFolderEnabled,ZaAccount.A_zimbraFeatureDocumentEditingEnabled,ZaAccount.A_zimbraDumpsterEnabled,ZaAccount.A_zimbraDumpsterPurgeEnabled,ZaAccount.A_zimbraFeatureSMIMEEnabled,ZaAccount.A_zimbraFeatureCalendarReminderDeviceEmailEnabled];
ZaAccountXFormView.FEATURE_TAB_RIGHTS=[];
ZaAccountXFormView.PREFERENCES_TAB_ATTRS=[ZaAccount.A_zimbraPrefReadReceiptsToAddress,ZaAccount.A_zimbraPrefMailSendReadReceipts,ZaAccount.A_zimbraPrefUseTimeZoneListInCalendar,ZaAccount.A_zimbraPrefCalendarUseQuickAdd,ZaAccount.A_zimbraPrefCalendarAlwaysShowMiniCal,ZaAccount.A_zimbraPrefCalendarApptReminderWarningTime,ZaAccount.A_zimbraPrefTimeZoneId,ZaAccount.A_zimbraPrefGalAutoCompleteEnabled,ZaAccount.A_zimbraPrefAutoAddAddressEnabled,ZaAccount.A_zimbraPrefMailSignature,ZaAccount.A_zimbraMailSignatureMaxLength,ZaAccount.A_zimbraPrefMailSignatureEnabled,ZaAccount.A_zimbraPrefForwardReplyInOriginalFormat,ZaAccount.A_zimbraPrefHtmlEditorDefaultFontColor,ZaAccount.A_zimbraPrefHtmlEditorDefaultFontFamily,ZaAccount.A_zimbraPrefHtmlEditorDefaultFontSize,ZaAccount.A_zimbraPrefComposeFormat,ZaAccount.A_zimbraPrefComposeInNewWindow,ZaAccount.A_zimbraAllowFromAddress,ZaAccount.A_zimbraAllowAnyFromAddress,ZaAccount.A_zimbraPrefSaveToSent,ZaAccount.A_zimbraPrefOutOfOfficeReply,ZaAccount.A_zimbraPrefNewMailNotificationAddress,ZaAccount.A_zimbraPrefNewMailNotificationEnabled,ZaAccount.A_zimbraMailMinPollingInterval,ZaAccount.A_zimbraPrefMailPollingInterval,ZaAccount.A_zimbraPrefAutoSaveDraftInterval,ZaAccount.A_zimbraPrefMailSoundsEnabled,ZaAccount.A_zimbraPrefMailFlashIcon,ZaAccount.A_zimbraPrefMailFlashTitle,ZaAccount.A_zimbraPrefMailDefaultCharset,ZaAccount.A_zimbraMaxMailItemsPerPage,ZaAccount.A_zimbraPrefMailItemsPerPage,ZaAccount.A_zimbraPrefGroupMailBy,ZaAccount.A_zimbraPrefDisplayExternalImages,ZaAccount.A_zimbraPrefMessageViewHtmlPreferred,ZaAccount.A_zimbraPrefLocale,ZaAccount.A_zimbraJunkMessagesIndexingEnabled,ZaAccount.A_zimbraPrefShowSelectionCheckbox,ZaAccount.A_zimbraPrefWarnOnExit,ZaAccount.A_zimbraPrefAdminConsoleWarnOnExit,ZaAccount.A_zimbraPrefUseKeyboardShortcuts,ZaAccount.A_zimbraPrefImapSearchFoldersEnabled,ZaAccount.A_zimbraPrefShowSearchString,ZaAccount.A_zimbraPrefMailInitialSearch,ZaAccount.A_zimbraPrefClientType,ZaAccount.A_zimbraPrefCalendarInitialView,ZaAccount.A_zimbraPrefCalendarFirstDayOfWeek,ZaAccount.A_zimbraPrefCalendarNotifyDelegatedChanges,ZaAccount.A_zimbraPrefCalendarApptVisibility,ZaAccount.A_zimbraPrefCalendarAutoAddInvites,ZaAccount.A_zimbraPrefCalendarReminderSoundsEnabled,ZaAccount.A_zimbraPrefCalendarReminderFlashTitle,ZaAccount.A_zimbraPrefCalendarAllowForwardedInvite,ZaAccount.A_zimbraPrefCalendarAllowPublishMethodInvite,ZaAccount.A_zimbraPrefCalendarAllowCancelEmailToSelf,ZaAccount.A_zimbraPrefCalendarToasterEnabled,ZaAccount.A_zimbraPrefCalendarShowPastDueReminders,ZaAccount.A_zimbraPrefAppleIcalDelegationEnabled,ZaAccount.A_zimbraPrefMandatorySpellCheckEnabled,ZaAccount.A_zimbraPrefImapEnabled,ZaAccount.A_zimbraPrefPop3Enabled];
ZaAccountXFormView.PREFERENCES_TAB_RIGHTS=[];
ZaAccountXFormView.ALIASES_TAB_ATTRS=[ZaAccount.A_zimbraMailAlias];
ZaAccountXFormView.ALIASES_TAB_RIGHTS=[ZaAccount.ADD_ACCOUNT_ALIAS_RIGHT,ZaAccount.REMOVE_ACCOUNT_ALIAS_RIGHT];
ZaAccountXFormView.FORWARDING_TAB_ATTRS=[ZaAccount.A_zimbraFeatureMailForwardingEnabled,ZaAccount.A_zimbraPrefMailLocalDeliveryDisabled,ZaAccount.A_zimbraMailForwardingAddress,ZaAccount.A_zimbraPrefCalendarForwardInvitesTo];
ZaAccountXFormView.FORWARDING_TAB_RIGHTS=[];
ZaAccountXFormView.INTEROP_TAB_ATTRS=[ZaAccount.A_zimbraForeignPrincipal];
ZaAccountXFormView.INTEROP_TAB_RIGHTS=[];
ZaAccountXFormView.SKIN_TAB_ATTRS=[ZaAccount.A_zimbraPrefSkin,ZaAccount.A_zimbraAvailableSkin];
ZaAccountXFormView.SKIN_TAB_RIGHTS=[];
ZaAccountXFormView.ZIMLET_TAB_ATTRS=[ZaAccount.A_zimbraZimletAvailableZimlets];
ZaAccountXFormView.ZIMLET_TAB_RIGHTS=[];
ZaAccountXFormView.ADVANCED_TAB_ATTRS=[ZaAccount.A_zimbraAttachmentsBlocked,ZaAccount.A_zimbraMailQuota,ZaAccount.A_zimbraContactMaxNumEntries,ZaAccount.A_zimbraQuotaWarnPercent,ZaAccount.A_zimbraQuotaWarnInterval,ZaAccount.A_zimbraQuotaWarnMessage,ZaAccount.A_zimbraPasswordLocked,ZaAccount.A_zimbraPasswordBlockCommonEnabled,ZaAccount.A_zimbraMinPwdLength,ZaAccount.A_zimbraMaxPwdLength,ZaAccount.A_zimbraPasswordMinUpperCaseChars,ZaAccount.A_zimbraPasswordMinLowerCaseChars,ZaAccount.A_zimbraPasswordMinPunctuationChars,ZaAccount.A_zimbraPasswordMinNumericChars,ZaAccount.A_zimbraPasswordMinDigitsOrPuncs,ZaAccount.A_zimbraMinPwdAge,ZaAccount.A_zimbraMaxPwdAge,ZaAccount.A_zimbraEnforcePwdHistory,ZaAccount.A_zimbraPasswordLockoutEnabled,ZaAccount.A_zimbraPasswordLockoutMaxFailures,ZaAccount.A_zimbraPasswordLockoutDuration,ZaAccount.A_zimbraPasswordLockoutFailureLifetime,ZaAccount.A_zimbraAdminAuthTokenLifetime,ZaAccount.A_zimbraAuthTokenLifetime,ZaAccount.A_zimbraMailIdleSessionTimeout,ZaAccount.A_zimbraMailMessageLifetime,ZaAccount.A_zimbraMailTrashLifetime,ZaAccount.A_zimbraMailSpamLifetime,ZaAccount.A_zimbraDumpsterUserVisibleAge,ZaAccount.A_zimbraMailDumpsterLifetime,ZaAccount.A_zimbraFreebusyExchangeUserOrg,ZaAccount.A_zimbraMailCanonicalAddress,ZaAccount.A_zimbraMailTransport,ZaAccount.A_zimbraInterceptAddress,ZaAccount.A_zimbraInterceptSendHeadersOnly];
ZaAccountXFormView.ADVANCED_TAB_RIGHTS=[];
ZaAccountXFormView.addressItemsPool=null;
ZaAccountXFormView.addressItemsPoolForDialog=null;
ZaAccountXFormView.getAddressFormItem=function(){if(AjxUtil.isEmpty(ZaAccountXFormView.addressItemsPool)){ZaAccountXFormView.addressItemsPool=new Object();
ZaAccountXFormView.addressItemsPool[ZaAccount.A_zip]={ref:ZaAccount.A_zip,type:_TEXTFIELD_,msgName:ZaMsg.NAD_zip,label:ZaMsg.NAD_zip,labelLocation:_LEFT_,width:100};
ZaAccountXFormView.addressItemsPool[ZaAccount.A_state]={ref:ZaAccount.A_state,type:_TEXTFIELD_,msgName:ZaMsg.NAD_state,label:ZaMsg.NAD_state,labelLocation:_LEFT_,width:250};
ZaAccountXFormView.addressItemsPool[ZaAccount.A_street]={ref:ZaAccount.A_street,type:_TEXTAREA_,msgName:ZaMsg.NAD_street,label:ZaMsg.NAD_street,labelLocation:_LEFT_,width:250};
ZaAccountXFormView.addressItemsPool[ZaAccount.A_city]={ref:ZaAccount.A_city,type:_TEXTFIELD_,msgName:ZaMsg.NAD_city,label:ZaMsg.NAD_city,labelLocation:_LEFT_,width:250};
ZaAccountXFormView.addressItemsPool[ZaAccount.A_country]={ref:ZaAccount.A_country,type:_TEXTFIELD_,msgName:ZaMsg.NAD_country,label:ZaMsg.NAD_country,labelLocation:_LEFT_,width:250}
}var b=new Array();
var d=new Array();
if(ZaZimbraAdmin.isLanguage("ja")){d=[ZaAccount.A_zip,ZaAccount.A_state,ZaAccount.A_city,ZaAccount.A_street,ZaAccount.A_country]
}else{d=[ZaAccount.A_street,ZaAccount.A_city,ZaAccount.A_state,ZaAccount.A_zip,ZaAccount.A_country]
}for(var c=0;
c<d.length;
c++){b.push(ZaAccountXFormView.addressItemsPool[d[c]])
}return b
};
ZaAccountXFormView.getAddressFormItemForDialog=function(){if(AjxUtil.isEmpty(ZaAccountXFormView.addressItemsPoolForDialog)){ZaAccountXFormView.addressItemsPoolForDialog=new Object();
ZaAccountXFormView.addressItemsPoolForDialog[ZaAccount.A_zip]={ref:ZaAccount.A_zip,type:_TEXTFIELD_,msgName:ZaMsg.NAD_zip,label:ZaMsg.NAD_zip,labelLocation:_LEFT_,width:100};
ZaAccountXFormView.addressItemsPoolForDialog[ZaAccount.A_state]={ref:ZaAccount.A_state,type:_TEXTFIELD_,msgName:ZaMsg.NAD_state,label:ZaMsg.NAD_state,labelLocation:_LEFT_,width:250};
ZaAccountXFormView.addressItemsPoolForDialog[ZaAccount.A_street]={ref:ZaAccount.A_street,type:_TEXTAREA_,msgName:ZaMsg.NAD_street,label:ZaMsg.NAD_street,labelLocation:_LEFT_,width:250};
ZaAccountXFormView.addressItemsPoolForDialog[ZaAccount.A_city]={ref:ZaAccount.A_city,type:_TEXTFIELD_,msgName:ZaMsg.NAD_city,label:ZaMsg.NAD_city,labelLocation:_LEFT_,width:250};
ZaAccountXFormView.addressItemsPoolForDialog[ZaAccount.A_country]={ref:ZaAccount.A_country,type:_TEXTFIELD_,msgName:ZaMsg.NAD_country,label:ZaMsg.NAD_country,labelLocation:_LEFT_,width:250}
}var b=new Array();
var d=new Array();
if(ZaZimbraAdmin.isLanguage("ja")){d=[ZaAccount.A_zip,ZaAccount.A_state,ZaAccount.A_city,ZaAccount.A_street,ZaAccount.A_country]
}else{d=[ZaAccount.A_street,ZaAccount.A_city,ZaAccount.A_state,ZaAccount.A_zip,ZaAccount.A_country]
}for(var c=0;
c<d.length;
c++){b.push(ZaAccountXFormView.addressItemsPoolForDialog[d[c]])
}return b
};
ZaAccountXFormView.accountNameInfoPool=null;
ZaAccountXFormView.getAccountNameInfoItem=function(){if(AjxUtil.isEmpty(ZaAccountXFormView.accountNameInfoPool)){ZaAccountXFormView.accountNameInfoPool=new Object();
ZaAccountXFormView.accountNameInfoPool[ZaAccount.A_name]={ref:ZaAccount.A_name,type:_EMAILADDR_,msgName:ZaMsg.NAD_AccountName,label:ZaMsg.NAD_AccountName,bmolsnr:false,getDisplayValue:AjxUtil.htmlEncode,labelLocation:_LEFT_,onChange:ZaAccount.setDomainChanged,forceUpdate:true,enableDisableChecks:[[ZaItem.hasRight,ZaAccount.RENAME_ACCOUNT_RIGHT]],visibilityChecks:[],domainPartWidth:"100%",domainContainerWidth:"100%"},ZaAccountXFormView.accountNameInfoPool[ZaAccount.A_firstName]={ref:ZaAccount.A_firstName,type:_TEXTFIELD_,msgName:ZaMsg.NAD_FirstName,label:ZaMsg.NAD_FirstName,labelLocation:_LEFT_,cssClass:"admin_xform_name_input",width:150,elementChanged:function(g,f,e){if(this.getInstance()[ZaAccount.A2_autodisplayname]=="TRUE"){ZaAccount.generateDisplayName.call(this,this.getInstance(),g,this.getInstance().attrs[ZaAccount.A_lastName],this.getInstance().attrs[ZaAccount.A_initials])
}this.getForm().itemChanged(this,g,e)
}};
ZaAccountXFormView.accountNameInfoPool[ZaAccount.A_initials]={ref:ZaAccount.A_initials,type:_TEXTFIELD_,msgName:ZaMsg.NAD_Initials,label:ZaMsg.NAD_Initials,labelLocation:_LEFT_,cssClass:"admin_xform_name_input",width:50,elementChanged:function(g,f,e){if(this.getInstance()[ZaAccount.A2_autodisplayname]=="TRUE"){ZaAccount.generateDisplayName.call(this,this.getInstance(),this.getInstanceValue(ZaAccount.A_firstName),this.getInstanceValue(ZaAccount.A_lastName),g)
}this.getForm().itemChanged(this,g,e)
}};
ZaAccountXFormView.accountNameInfoPool[ZaAccount.A_lastName]={ref:ZaAccount.A_lastName,type:_TEXTFIELD_,msgName:ZaMsg.NAD_LastName,label:ZaMsg.NAD_LastName,labelLocation:_LEFT_,cssClass:"admin_xform_name_input",width:150,elementChanged:function(g,f,e){if(this.getInstance()[ZaAccount.A2_autodisplayname]=="TRUE"){ZaAccount.generateDisplayName.call(this,this.getInstance(),this.getInstanceValue(ZaAccount.A_firstName),g,this.getInstanceValue(ZaAccount.A_initials))
}this.getForm().itemChanged(this,g,e)
}};
ZaAccountXFormView.accountNameInfoPool.ZaAccountDisplayInfoGroup={type:_GROUP_,numCols:3,nowrap:true,attributeName:ZaAccount.A_displayname,width:200,msgName:ZaMsg.NAD_DisplayName,label:ZaMsg.NAD_DisplayName,labelLocation:_LEFT_,visibilityChecks:[[ZaItem.hasReadPermission,ZaAccount.A_displayname]],items:[{ref:ZaAccount.A_displayname,type:_TEXTFIELD_,label:null,cssClass:"admin_xform_name_input",width:150,enableDisableChecks:[[XForm.checkInstanceValue,ZaAccount.A2_autodisplayname,"FALSE"],ZaItem.hasWritePermission],enableDisableChangeEventSources:[ZaAccount.A2_autodisplayname],bmolsnr:true,visibilityChecks:[]},{ref:ZaAccount.A2_autodisplayname,type:_CHECKBOX_,msgName:ZaMsg.NAD_Auto,label:ZaMsg.NAD_Auto,labelLocation:_RIGHT_,trueValue:"TRUE",falseValue:"FALSE",subLabel:"",helpTooltip:false,elementChanged:function(g,f,e){if(g=="TRUE"){if(ZaAccount.generateDisplayName.call(this,this.getInstance(),this.getInstanceValue(ZaAccount.A_firstName),this.getInstanceValue(ZaAccount.A_lastName),this.getInstanceValue(ZaAccount.A_initials))){this.getForm().parent.setDirty(true)
}}this.getForm().itemChanged(this,g,e)
},enableDisableChecks:[[ZaItem.hasWritePermission,ZaAccount.A_displayname]],visibilityChecks:[[ZaItem.hasWritePermission,ZaAccount.A_displayname]]}]},ZaAccountXFormView.accountNameInfoPool[ZaAccount.A_zimbraHideInGal]={ref:ZaAccount.A_zimbraHideInGal,type:_CHECKBOX_,msgName:ZaMsg.LBL_zimbraHideInGal,label:ZaMsg.LBL_zimbraHideInGal,trueValue:"TRUE",falseValue:"FALSE"},ZaAccountXFormView.accountNameInfoPool[ZaAccount.A_zimbraPhoneticFirstName]={ref:ZaAccount.A_zimbraPhoneticFirstName,type:_TEXTFIELD_,msgName:ZaMsg.NAD_zimbraPhoneticFirstName,label:ZaMsg.NAD_zimbraPhoneticFirstName,labelLocation:_LEFT_,cssClass:"admin_xform_name_input",width:150};
ZaAccountXFormView.accountNameInfoPool[ZaAccount.A_zimbraPhoneticLastName]={ref:ZaAccount.A_zimbraPhoneticLastName,type:_TEXTFIELD_,msgName:ZaMsg.NAD_zimbraPhoneticLastName,label:ZaMsg.NAD_zimbraPhoneticLastName,labelLocation:_LEFT_,cssClass:"admin_xform_name_input",width:150}
}var c=new Array();
var d=new Array();
if(ZaZimbraAdmin.isLanguage("ja")){d=[ZaAccount.A_name,ZaAccount.A_zimbraPhoneticLastName,ZaAccount.A_lastName,ZaAccount.A_initials,ZaAccount.A_zimbraPhoneticFirstName,ZaAccount.A_firstName,"ZaAccountDisplayInfoGroup",ZaAccount.A_zimbraHideInGal]
}else{d=[ZaAccount.A_name,ZaAccount.A_firstName,ZaAccount.A_initials,ZaAccount.A_lastName,"ZaAccountDisplayInfoGroup",ZaAccount.A_zimbraHideInGal]
}for(var b=0;
b<d.length;
b++){c.push(ZaAccountXFormView.accountNameInfoPool[d[b]])
}return c
};
ZaAccountXFormView.validatePollingInterval=function(h,b,c){var k=c.getInstance();
this.setInstanceValue(h);
var d=k.attrs[ZaAccount.A_zimbraPrefMailPollingInterval];
if(!d){d=k._defaultValues.attrs[ZaAccount.A_zimbraPrefMailPollingInterval]
}var j=k.attrs[ZaAccount.A_zimbraMailMinPollingInterval];
if(!j){j=k._defaultValues.attrs[ZaAccount.A_zimbraMailMinPollingInterval]
}var m=c.getItemsById(ZaAccount.A_zimbraPrefMailPollingInterval)[0];
try{var l=parseInt(ZaUtil.getLifeTimeInSeconds(d));
var g=parseInt(ZaUtil.getLifeTimeInSeconds(j));
if(l<g){m.setError(ZaMsg.tt_mailPollingIntervalError+j);
c.parent.setDirty(false)
}else{m.clearError();
c.parent.setDirty(true)
}}catch(f){m.setError(f.message);
c.parent.setDirty(false)
}};
ZaAccountXFormView.myXFormModifier=function(x,e){var k;
try{k=ZaApp.getInstance().getGlobalConfig().attrs[ZaGlobalConfig.A_zimbraDefaultDomainName];
if(!k&&ZaApp.getInstance().getDomainList().size()>0){k=ZaApp.getInstance().getDomainList().getArray()[0].name
}}catch(C){k=ZaSettings.myDomainName;
if(C.code!=ZmCsfeException.SVC_PERM_DENIED){throw (C)
}}var j=" @"+k;
var f=[{type:_AJX_IMAGE_,src:"Person_32",label:null,rowSpan:3,cssStyle:"margin:auto;"},{type:_OUTPUT_,ref:ZaAccount.A_displayname,label:null,cssClass:"AdminTitle",height:"auto",width:350,rowSpan:3,cssStyle:"word-wrap:break-word;overflow:hidden;",visibilityChecks:[ZaItem.hasReadPermission],getDisplayValue:function(G){return AjxStringUtil.htmlEncode(G)
}}];
if(ZaItem.hasReadPermission(ZaItem.A_zimbraId,e)){f.push({type:_OUTPUT_,ref:ZaItem.A_zimbraId,label:ZaMsg.NAD_ZimbraID})
}if(ZaItem.hasReadPermission(ZaItem.A_zimbraCreateTimestamp,e)){f.push({type:_OUTPUT_,ref:ZaItem.A_zimbraCreateTimestamp,label:ZaMsg.LBL_zimbraCreateTimestamp,labelLocation:_LEFT_,getDisplayValue:function(){var G=ZaItem.formatServerTime(this.getInstanceValue());
if(!G){return ZaMsg.Server_Time_NA
}else{return G
}}})
}if(!e.isExternal&&ZaItem.hasReadPermission(ZaAccount.A_mailHost,e)){f.push({type:_OUTPUT_,ref:ZaAccount.A_mailHost,labelLocation:_LEFT_,label:ZabMsg.attrDesc_mailHost})
}else{if(e.isExternal&&ZaItem.hasReadPermission(ZaAccount.A_zimbraMailTransport,e)){f.push({type:_OUTPUT_,ref:ZaAccount.A_zimbraMailTransport,labelLocation:_LEFT_,label:ZabMsg.attrDesc_mailHost})
}}if(AjxUtil.isEmailAddress(e[ZaAccount.A_name],false)){f.push({type:_OUTPUT_,ref:ZaAccount.A_name,label:ZaMsg.NAD_Email,labelLocation:_LEFT_,required:false,cssStyle:"word-wrap:break-word;overflow:hidden;",getDisplayValue:AjxUtil.htmlEncode})
}if(ZaItem.hasReadPermission(ZaAccount.A_accountStatus,e)){f.push({type:_OUTPUT_,ref:ZaAccount.A_accountStatus,label:ZaMsg.NAD_AccountStatus,labelLocation:_LEFT_,choices:this.accountStatusChoices})
}if(!e.isExternal){if(ZaItem.hasReadPermission(ZaAccount.A_zimbraMailQuota,e)&&ZaItem.hasRight(ZaAccount.GET_MAILBOX_INFO_RIGHT,e)){f.push({type:_OUTPUT_,ref:ZaAccount.A2_mbxsize,label:ZaMsg.LBL_quota,getDisplayValue:function(){var G=this.getInstanceValue();
var I=AjxNumberFormat.getNumberInstance();
if(!G){G="0"
}else{G=Number(G/1048576).toFixed(3);
G=I.format(G)
}var H=this.getInstanceValue(ZaAccount.A_zimbraMailQuota);
if(!H||H=="0"){H=ZaMsg.Unlimited
}else{H=I.format(H)
}if(H==ZaMsg.Unlimited){return AjxMessageFormat.format(ZaMsg.unlimitedQuotaValueTemplate,[G,H])
}else{return AjxMessageFormat.format(ZaMsg.quotaValueTemplate,[G,H])
}},valueChangeEventSources:[ZaAccount.A_zimbraMailQuota,ZaAccount.A2_mbxsize]})
}else{if(ZaItem.hasReadPermission(ZaAccount.A_zimbraMailQuota,e)){f.push({type:_OUTPUT_,ref:ZaAccount.A_zimbraMailQuota,label:ZaMsg.LBL_assignedQuota,getDisplayValue:function(){var G=this.getInstanceValue();
if(!G||G=="0"){G=ZaMsg.Unlimited
}if(G==ZaMsg.Unlimited){return AjxMessageFormat.format(ZaMsg.unlimitedAssignedQuotaValueTemplate,[G])
}else{return AjxMessageFormat.format(ZaMsg.assignedQuotaTemplate,[G])
}},bmolsnr:true})
}else{if(ZaItem.hasRight(ZaAccount.GET_MAILBOX_INFO_RIGHT,e)){f.push({type:_OUTPUT_,ref:ZaAccount.A2_mbxsize,label:ZaMsg.LBL_usedQuota,getDisplayValue:function(){var G=this.getInstanceValue();
if(!G){G="0"
}else{G=Number(G/1048576).toFixed(3)
}return AjxMessageFormat.format(ZaMsg.usedQuotaTemplate,[G])
},bmolsnr:true})
}}}}if(ZaItem.hasReadPermission(ZaAccount.A_zimbraLastLogonTimestamp,e)){f.push({type:_OUTPUT_,ref:ZaAccount.A_zimbraLastLogonTimestamp,label:ZaMsg.LBL_Last_Login,labelLocation:_LEFT_,getDisplayValue:function(){var G=this.getInstanceValue();
return ZaAccount.getLastLoginTime(G)
}})
}this.tabChoices=new Array();
var F,E,D,A,z,y,w,v,u,o,m;
this.helpMap={};
F=++this.TAB_INDEX;
this.tabChoices.push({value:F,label:ZaMsg.TABT_GeneralPage});
this.helpMap[F]=[location.pathname,ZaUtil.HELP_URL,"managing_accounts/user_interface_features.htm","?locid=",AjxEnv.DEFAULT_LOCALE].join("");
if(ZaTabView.isTAB_ENABLED(e,ZaAccountXFormView.CONTACT_TAB_ATTRS,ZaAccountXFormView.CONTACT_TAB_RIGHTS)){E=++this.TAB_INDEX;
this.tabChoices.push({value:E,label:ZaMsg.TABT_ContactInfo});
this.helpMap[E]=[location.pathname,ZaUtil.HELP_URL,"managing_accounts/user_interface_features.htm","?locid=",AjxEnv.DEFAULT_LOCALE].join("")
}if(ZaTabView.isTAB_ENABLED(e,ZaAccountXFormView.MEMBEROF_TAB_ATTRS,ZaAccountXFormView.MEMBEROF_TAB_RIGHTS)){D=++this.TAB_INDEX;
this.tabChoices.push({value:D,label:ZaMsg.TABT_MemberOf});
this.helpMap[D]=[location.pathname,ZaUtil.HELP_URL,"managing_accounts/adding_distribution_lists_to_an_account.htm","?locid=",AjxEnv.DEFAULT_LOCALE].join("")
}if(ZaTabView.isTAB_ENABLED(e,ZaAccountXFormView.FEATURE_TAB_ATTRS,ZaAccountXFormView.FEATURE_TAB_RIGHTS)){A=++this.TAB_INDEX;
this.tabChoices.push({value:A,label:ZaMsg.TABT_Features});
this.helpMap[A]=[location.pathname,ZaUtil.HELP_URL,"managing_accounts/user_interface_features.htm","?locid=",AjxEnv.DEFAULT_LOCALE].join("")
}if(ZaTabView.isTAB_ENABLED(e,ZaAccountXFormView.PREFERENCES_TAB_ATTRS,ZaAccountXFormView.PREFERENCES_TAB_RIGHTS)){z=++this.TAB_INDEX;
this.tabChoices.push({value:z,label:ZaMsg.TABT_Preferences});
this.helpMap[z]=[location.pathname,ZaUtil.HELP_URL,"managing_accounts/preferences.htm","?locid=",AjxEnv.DEFAULT_LOCALE].join("")
}if(ZaTabView.isTAB_ENABLED(e,ZaAccountXFormView.ALIASES_TAB_ATTRS,ZaAccountXFormView.ALIASES_TAB_RIGHTS)){y=++this.TAB_INDEX;
this.tabChoices.push({value:y,label:ZaMsg.TABT_Aliases});
this.helpMap[y]=[location.pathname,ZaUtil.HELP_URL,"managing_accounts/user_interface_features.htm","?locid=",AjxEnv.DEFAULT_LOCALE].join("")
}if(ZaTabView.isTAB_ENABLED(e,ZaAccountXFormView.FORWARDING_TAB_ATTRS,ZaAccountXFormView.FORWARDING_TAB_RIGHTS)){w=++this.TAB_INDEX;
this.tabChoices.push({value:w,label:ZaMsg.TABT_Forwarding});
this.helpMap[w]=[location.pathname,ZaUtil.HELP_URL,"managing_accounts/forwarding_mail.htm","?locid=",AjxEnv.DEFAULT_LOCALE].join("")
}if(ZaTabView.isTAB_ENABLED(e,ZaAccountXFormView.INTEROP_TAB_ATTRS,ZaAccountXFormView.INTEROP_TAB_RIGHTS)){v=++this.TAB_INDEX;
this.tabChoices.push({value:v,label:ZaMsg.TABT_Interop});
this.helpMap[v]=[location.pathname,ZaUtil.HELP_URL,"managing_accounts/manage_account_free_busy_email_address.htm","?locid=",AjxEnv.DEFAULT_LOCALE].join("")
}if(ZaTabView.isTAB_ENABLED(e,ZaAccountXFormView.SKIN_TAB_ATTRS,ZaAccountXFormView.SKIN_TAB_RIGHTS)){u=++this.TAB_INDEX;
this.tabChoices.push({value:u,label:ZaMsg.TABT_Themes});
this.helpMap[u]=[location.pathname,ZaUtil.HELP_URL,"ui_themes/defining_theme_for_the_zimbra_web_client_ui.htm","?locid=",AjxEnv.DEFAULT_LOCALE].join("")
}if(ZaTabView.isTAB_ENABLED(e,ZaAccountXFormView.ZIMLET_TAB_ATTRS,ZaAccountXFormView.ZIMLET_TAB_RIGHTS)){o=++this.TAB_INDEX;
this.tabChoices.push({value:o,label:ZaMsg.TABT_Zimlets});
this.helpMap[o]=[location.pathname,ZaUtil.HELP_URL,"zimlets/about_zimlets.htm","?locid=",AjxEnv.DEFAULT_LOCALE].join("")
}if(ZaTabView.isTAB_ENABLED(e,ZaAccountXFormView.ADVANCED_TAB_ATTRS,ZaAccountXFormView.ADVANCED_TAB_RIGHTS)){m=++this.TAB_INDEX;
this.tabChoices.push({value:m,label:ZaMsg.TABT_Advanced});
this.helpMap[m]=[location.pathname,ZaUtil.HELP_URL,"managing_accounts/account_advanced_features.htm","?locid=",AjxEnv.DEFAULT_LOCALE].join("")
}var d=[];
var q={type:_ZATABCASE_,caseKey:F,paddingStyle:"padding-left:15px;",width:"98%",cellpadding:2,numCols:1};
var t=[{type:_DWT_ALERT_,ref:ZaAccount.A2_domainLeftAccounts,visibilityChecks:[ZaAccountXFormView.isDomainLeftAccountsAlertVisible],visibilityChangeEventSources:[ZaAccount.A2_domainLeftAccounts,ZaAccount.A_name,ZaAccount.A2_accountTypes],containerCssStyle:"width:400px;",bmolsnr:true,style:DwtAlert.WARNING,iconVisible:false},{type:_TOP_GROUPER_,label:ZaMsg.NAD_AccountTypeGrouper,id:"account_type_group",colSpan:"*",numCols:1,colSizes:["100%"],visibilityChecks:[ZaAccountXFormView.isAccountTypeGrouperVisible,ZaAccount.isShowAccountType],visibilityChangeEventSources:[ZaAccount.A2_accountTypes,ZaAccount.A_COSId,ZaAccount.A_name,ZaAccount.A2_showAccountTypeMsg],items:[{type:_DWT_ALERT_,visibilityChecks:[ZaAccountXFormView.isAccountTypeSet,ZaAccountXFormView.isAccountsTypeAlertInvisible],visibilityChangeEventSources:[ZaAccount.A2_accountTypes,ZaAccount.A_COSId,ZaAccount.A_name,ZaAccount.A2_showAccountTypeMsg],containerCssStyle:"width:400px;",style:DwtAlert.CRITICAL,iconVisible:false,content:ZaMsg.ERROR_ACCOUNT_TYPE_NOT_SET},{type:_DWT_ALERT_,ref:ZaAccount.A2_showAccountTypeMsg,visibilityChecks:[[XForm.checkInstanceValueNotEmty,ZaAccount.A2_showAccountTypeMsg]],visibilityChangeEventSources:[ZaAccount.A2_showAccountTypeMsg,ZaAccount.A_name],bmolsnr:true,containerCssStyle:"width:400px;",style:DwtAlert.WARNING,iconVisible:false},{type:_OUTPUT_,id:ZaAccountXFormView.accountTypeItemId,getDisplayValue:ZaAccount.getAccountTypeOutput,cssStyle:"margin-left:auto;margin-right:auto;width:600px;"}]},{type:_TOP_GROUPER_,label:ZaMsg.NAD_AccountNameGrouper,id:"account_form_name_group",colSizes:["275px","*"],numCols:2,visibilityChecks:[[ZATopGrouper_XFormItem.isGroupVisible,ZaAccountXFormView.ACCOUNT_NAME_GROUP_ATTRS]],items:ZaAccountXFormView.getAccountNameInfoItem()}];
var h={type:_TOP_GROUPER_,label:ZaMsg.NAD_AccountSetupGrouper,id:"account_form_setup_group",colSizes:["275px","*"],numCols:2,items:[{ref:ZaAccount.A_accountStatus,type:_OSELECT1_,msgName:ZaMsg.NAD_AccountStatus,label:ZaMsg.NAD_AccountStatus,bmolsnr:true,labelLocation:_LEFT_,choices:this.accountStatusChoices}],visibilityChecks:[[ZATopGrouper_XFormItem.isGroupVisible,[ZaAccount.A_accountStatus,ZaAccount.A_COSId,ZaAccount.A_zimbraIsAdminAccount]]]};
h.items.push({type:_GROUP_,numCols:3,colSizes:["156px","22px","100px"],nowrap:true,label:ZaMsg.NAD_ClassOfService,labelLocation:_LEFT_,visibilityChecks:[[ZaItem.hasReadPermission,ZaAccount.A_COSId]],attributeName:ZaAccount.A_COSId,id:ZaAccountXFormView.cosGroupItemId,items:[{ref:ZaAccount.A_COSId,type:_INPUT_,onChange:ZaAccount.setCosChanged,enableDisableChecks:[[ZaNewAccountXWizard.isAutoCos],[ZaItem.hasWritePermission,ZaAccount.A_COSId]],enableDisableChangeEventSources:[ZaAccount.A2_autoCos],getDisplayValue:function(H){this.createDataList(ZaApp.getInstance().getCosListName());
if(H){var G=ZaCos.getCosById(H);
return G&&G.name
}}},{ref:ZaAccount.A2_autoCos,type:_CHECKBOX_,visibilityChecks:[],subLabel:"",enableDisableChecks:[[ZaItem.hasWritePermission,ZaAccount.A_COSId]],msgName:ZaMsg.NAD_Auto,label:ZaMsg.NAD_Auto,labelLocation:_RIGHT_,trueValue:"TRUE",falseValue:"FALSE",helpTooltip:false,elementChanged:function(J,H,G){this.getForm().parent.setDirty(true);
if(J=="TRUE"){var I=ZaCos.getDefaultCos4Account(this.getInstance()[ZaAccount.A_name],this.getInstance().attrs[ZaAccount.A_zimbraIsExternalVirtualAccount]=="TRUE");
if(I&&I.id){this.getInstance()._defaultValues=I;
this.getModel().setInstanceValue(this.getInstance(),ZaAccount.A_COSId,I.id)
}this.getParentItem().getItems()[0].updateElement(null)
}this.getForm().itemChanged(this,J,G)
}}]});
h.items.push({ref:ZaAccount.A_zimbraIsAdminAccount,type:_CHECKBOX_,msgName:ZaMsg.NAD_IsSystemAdminAccount,label:ZaMsg.NAD_IsSystemAdminAccount,bmolsnr:true,trueValue:"TRUE",falseValue:"FALSE",visibilityChecks:[[XForm.checkInstanceValueNot,ZaAccount.A_zimbraIsExternalVirtualAccount,"TRUE"],[ZaItem.hasReadPermission,ZaAccount.A_zimbraIsAdminAccount]],visibilityChangeEventSources:[ZaAccount.A_zimbraIsExternalVirtualAccount,ZaAccount.A_zimbraIsAdminAccount]});
t.push(h);
var g={type:_TOP_GROUPER_,label:ZaMsg.NAD_PasswordGrouper,id:"account_form_password_group",visibilityChecks:[[ZaItem.hasAnyRight,[ZaAccount.SET_PASSWORD_RIGHT,ZaAccount.CHANGE_PASSWORD_RIGHT]],[XForm.checkInstanceValueNot,ZaAccount.A2_isExternalAuth,true]],visibilityChangeEventSources:[ZaAccount.A2_isExternalAuth],colSizes:["275px","*"],numCols:2,items:[{type:_DWT_ALERT_,containerCssStyle:"padding-bottom:0;",style:DwtAlert.INFO,iconVisible:false,content:ZaMsg.Alert_InternalPassword},{ref:ZaAccount.A_password,type:_SECRET_,msgName:ZaMsg.NAD_Password,label:ZaMsg.NAD_Password,labelLocation:_LEFT_,visibilityChecks:[],enableDisableChecks:[[ZaAccountXFormView.isAuthfromInternalSync,e.name,ZaAccount.A_name]],cssClass:"admin_xform_name_input"},{ref:ZaAccount.A2_confirmPassword,type:_SECRET_,msgName:ZaMsg.NAD_ConfirmPassword,label:ZaMsg.NAD_ConfirmPassword,labelLocation:_LEFT_,visibilityChecks:[],enableDisableChecks:[[ZaAccountXFormView.isAuthfromInternalSync,e.name,ZaAccount.A_name]],cssClass:"admin_xform_name_input"},{ref:ZaAccount.A_zimbraPasswordMustChange,type:_CHECKBOX_,msgName:ZaMsg.NAD_MustChangePwd,label:ZaMsg.NAD_MustChangePwd,trueValue:"TRUE",falseValue:"FALSE",visibilityChecks:[],enableDisableChecks:[[ZaAccountXFormView.isAuthfromInternalSync,e.name,ZaAccount.A_name]]}]};
t.push(g);
var b={type:_TOP_GROUPER_,label:ZaMsg.NAD_ExternalAuthGrouper,id:"account_form_ext_auth_group",visibilityChecks:[[XForm.checkInstanceValue,ZaAccount.A2_isExternalAuth,true],[ZaItem.hasReadPermission,ZaAccount.A_zimbraAuthLdapExternalDn]],visibilityChangeEventSources:[ZaAccount.A2_isExternalAuth],colSizes:["275px","*"],numCols:2,items:[{ref:ZaAccount.A_zimbraAuthLdapExternalDn,type:_TEXTFIELD_,width:256,msgName:ZaMsg.NAD_AuthLdapExternalDn,label:ZaMsg.NAD_AuthLdapExternalDn,labelLocation:_LEFT_,align:_LEFT_,toolTipContent:ZaMsg.tt_AuthLdapExternalDn}]};
t.push(b);
var c={type:_TOP_GROUPER_,label:ZaMsg.NAD_NotesGrouper,id:"account_form_notes_group",colSizes:["275px","*"],numCols:2,visibilityChecks:[[ZATopGrouper_XFormItem.isGroupVisible,[ZaAccount.A_notes,ZaAccount.A_description]]],items:[ZaItem.descriptionXFormItem,{ref:ZaAccount.A_notes,type:_TEXTAREA_,msgName:ZaMsg.NAD_Notes,label:ZaMsg.NAD_Notes,labelLocation:_LEFT_,labelCssStyle:"vertical-align:top;",width:"30em"}]};
t.push(c);
q.items=t;
d.push(q);
if(E){var n={type:_ZATABCASE_,numCols:1,caseKey:E,paddingStyle:"padding-left:15px;",width:"98%",cellpadding:2,align:_CENTER_,items:[{type:_ZA_TOP_GROUPER_,label:ZaMsg.LBL_phone,id:"contact_form_phone_group",width:"100%",numCols:2,colSizes:["275px","100%"],items:[{ref:ZaAccount.A_telephoneNumber,type:_TEXTFIELD_,msgName:ZaMsg.NAD_telephoneNumber,label:ZaMsg.NAD_telephoneNumber,labelLocation:_LEFT_,width:250},{ref:ZaAccount.A_homePhone,type:_TEXTFIELD_,msgName:ZaMsg.NAD_homePhone,label:ZaMsg.NAD_homePhone,labelLocation:_LEFT_,width:250},{ref:ZaAccount.A_mobile,type:_TEXTFIELD_,msgName:ZaMsg.NAD_mobile,label:ZaMsg.NAD_mobile,labelLocation:_LEFT_,width:250},{ref:ZaAccount.A_pager,type:_TEXTFIELD_,msgName:ZaMsg.NAD_pager,label:ZaMsg.NAD_pager,labelLocation:_LEFT_,width:250},{ref:ZaAccount.A_facsimileTelephoneNumber,type:_TEXTFIELD_,msgName:ZaMsg.NAD_facsimileTelephoneNumber,label:ZaMsg.NAD_facsimileTelephoneNumber,labelLocation:_LEFT_,width:250}]},{type:_ZA_TOP_GROUPER_,label:ZaMsg.LBL_company,id:"contact_form_company_group",width:"100%",numCols:2,colSizes:["275px","100%"],items:[{ref:ZaAccount.A_zimbraPhoneticCompany,type:_TEXTFIELD_,msgName:ZaMsg.NAD_zimbraPhoneticCompany,label:ZaMsg.NAD_zimbraPhoneticCompany,labelLocation:_LEFT_,width:250,visibilityChecks:[[ZaZimbraAdmin.isLanguage,"ja"]]},{ref:ZaAccount.A_company,type:_TEXTFIELD_,msgName:ZaMsg.NAD_company,label:ZaMsg.NAD_company,labelLocation:_LEFT_,width:250},{ref:ZaAccount.A_title,type:_TEXTFIELD_,msgName:ZaMsg.NAD_title,label:ZaMsg.NAD_title,labelLocation:_LEFT_,width:250},{type:_DYNSELECT_,ref:ZaAccount.A_manager,dataFetcherClass:ZaSearch,dataFetcherMethod:ZaSearch.prototype.dynSelectSearch,dataFetcherTypes:[ZaSearch.ACCOUNTS,ZaSearch.RESOURCES,ZaSearch.DLS],dataFetcherAttrs:[ZaItem.A_zimbraId,ZaItem.A_cn,ZaAccount.A_name,ZaAccount.A_displayname,ZaAccount.A_mail],label:ZaMsg.NAD_manager,labelLocation:_LEFT_,width:"100%",inputWidth:"250px",editable:true,forceUpdate:true,choices:new XFormChoices([],XFormChoices.OBJECT_LIST,"name","name"),visibilityChecks:[],enableDisableChecks:[],onChange:function(I,H,G){if(I instanceof ZaItem){this.setInstanceValue(I.name)
}else{this.setInstanceValue(I)
}},autoCompleteEnabled:true},{ref:ZaAccount.A_orgUnit,type:_TEXTFIELD_,msgName:ZaMsg.NAD_orgUnit,label:ZaMsg.NAD_orgUnit,labelLocation:_LEFT_,width:250},{ref:ZaAccount.A_office,type:_TEXTFIELD_,msgName:ZaMsg.NAD_office,label:ZaMsg.NAD_office,labelLocation:_LEFT_,width:250}]},{type:_ZA_TOP_GROUPER_,label:ZaMsg.LBL_address,id:"contact_form_address_group",width:"100%",numCols:2,colSizes:["275px","100%"],items:ZaAccountXFormView.getAddressFormItem()}]};
d.push(n)
}var B=new ZaAccountMemberOfsourceHeaderList(ZaAccountMemberOfsourceHeaderList.DIRECT);
var r=new ZaAccountMemberOfsourceHeaderList(ZaAccountMemberOfsourceHeaderList.INDIRECT);
var p=new ZaAccountMemberOfsourceHeaderList(ZaAccountMemberOfsourceHeaderList.NON);
if(D){var l={type:_ZATABCASE_,numCols:2,caseKey:D,colSizes:["390px","390px"],paddingStyle:"padding-left:15px;",cellpadding:2,items:[{type:_SPACER_,height:"10"},{type:_GROUP_,width:"98%",numCols:1,items:[{type:_ZALEFT_GROUPER_,numCols:1,width:"100%",label:ZaMsg.Account_DirectGroupLabel,containerCssStyle:"padding-top:5px;",items:[{ref:ZaAccount.A2_directMemberList,type:_S_DWT_LIST_,width:"98%",height:200,cssClass:"DLSource",widgetClass:ZaAccountMemberOfListView,headerList:B,defaultColumnSortable:0,onSelection:ZaAccountXFormView.directMemberOfSelectionListener,forceUpdate:true},{type:_SPACER_,height:"5"},{type:_GROUP_,width:"100%",numCols:8,colSizes:[85,5,85,"100%",80,5,80,5],items:[{type:_DWT_BUTTON_,label:ZaMsg.DLXV_ButtonRemoveAll,width:80,enableDisableChecks:[[ZaAccountMemberOfListView.shouldEnableAllButton,ZaAccount.A2_directMemberList]],enableDisableChangeEventSources:[ZaAccount.A2_directMemberList],onActivate:"ZaAccountMemberOfListView.removeAllGroups.call(this,event, ZaAccount.A2_directMemberList)"},{type:_CELLSPACER_,height:"100%"},{type:_DWT_BUTTON_,label:ZaMsg.DLXV_ButtonRemove,width:80,id:"removeButton",enableDisableChecks:[[ZaAccountMemberOfListView.shouldEnableAddRemoveButton,ZaAccount.A2_directMemberList]],enableDisableChangeEventSources:[ZaAccount.A2_directMemberListSelected],onActivate:"ZaAccountMemberOfListView.removeGroups.call(this,event, ZaAccount.A2_directMemberList)"},{type:_CELLSPACER_,height:"100%"},{type:_DWT_BUTTON_,label:ZaMsg.Previous,width:75,id:"backButton",icon:"LeftArrow",disIcon:"LeftArrowDis",onActivate:"ZaAccountMemberOfListView.backButtonHndlr.call(this,event, ZaAccount.A2_directMemberList)",enableDisableChecks:[[ZaAccountMemberOfListView.shouldEnableBackButton,ZaAccount.A2_directMemberList]],enableDisableChangeEventSources:[ZaAccount.A2_directMemberList+"_offset"]},{type:_CELLSPACER_,height:"100%"},{type:_DWT_BUTTON_,label:ZaMsg.Next,width:75,id:"fwdButton",icon:"RightArrow",disIcon:"RightArrowDis",onActivate:"ZaAccountMemberOfListView.fwdButtonHndlr.call(this,event, ZaAccount.A2_directMemberList)",enableDisableChecks:[[ZaAccountMemberOfListView.shouldEnableForwardButton,ZaAccount.A2_directMemberList]],enableDisableChangeEventSources:[ZaAccount.A2_directMemberList+"_more"]},{type:_CELLSPACER_,height:"100%"}]}]},{type:_SPACER_,height:"10"},{type:_ZALEFT_GROUPER_,numCols:1,width:"100%",label:ZaMsg.Account_IndirectGroupLabel,containerCssStyle:"padding-top:5px;",items:[{ref:ZaAccount.A2_indirectMemberList,type:_S_DWT_LIST_,width:"98%",height:200,cssClass:"DLSource",widgetClass:ZaAccountMemberOfListView,headerList:r,defaultColumnSortable:0,onSelection:ZaAccountXFormView.indirectMemberOfSelectionListener,forceUpdate:true},{type:_SPACER_,height:"5"},{type:_GROUP_,width:"100%",numCols:8,colSizes:[85,5,85,"100%",80,5,80,5],items:[{type:_CELLSPACER_,height:"100%"},{type:_CELLSPACER_,height:"100%"},{type:_CELLSPACER_,height:"100%"},{type:_CELLSPACER_,height:"100%"},{type:_DWT_BUTTON_,label:ZaMsg.Previous,width:75,id:"backButton",icon:"LeftArrow",disIcon:"LeftArrowDis",onActivate:"ZaAccountMemberOfListView.backButtonHndlr.call(this,event, ZaAccount.A2_indirectMemberList)",enableDisableChecks:[[ZaAccountMemberOfListView.shouldEnableBackButton,ZaAccount.A2_indirectMemberList]],enableDisableChangeEventSources:[ZaAccount.A2_indirectMemberList+"_offset"]},{type:_CELLSPACER_,height:"100%"},{type:_DWT_BUTTON_,label:ZaMsg.Next,width:75,id:"fwdButton",icon:"RightArrow",disIcon:"RightArrowDis",onActivate:"ZaAccountMemberOfListView.fwdButtonHndlr.call(this,event, ZaAccount.A2_indirectMemberList)",enableDisableChecks:[[ZaAccountMemberOfListView.shouldEnableForwardButton,ZaAccount.A2_indirectMemberList]],enableDisableChangeEventSources:[ZaAccount.A2_indirectMemberList+"_more"]},{type:_CELLSPACER_,height:"100%"}]}]}]},{type:_ZARIGHT_GROUPER_,numCols:1,width:"100%",label:ZaMsg.Account_NonGroupLabel,containerCssStyle:"padding-top:5px;",items:[{type:_GROUP_,numCols:5,colSizes:[55,"auto",10,80,120,20],width:"100%",items:[{type:_OUTPUT_,value:ZaMsg.DLXV_LabelFind,nowrap:true},{ref:"query",type:_TEXTFIELD_,width:"100%",label:null,elementChanged:function(J,I,H){var G=H.charCode;
if(G==13||G==3){ZaAccountMemberOfListView.prototype.srchButtonHndlr.call(this)
}else{this.getForm().itemChanged(this,J,H)
}},visibilityChecks:[],enableDisableChecks:[]},{type:_CELLSPACER_},{type:_DWT_BUTTON_,label:ZaMsg.DLXV_ButtonSearch,width:80,onActivate:ZaAccountMemberOfListView.prototype.srchButtonHndlr},{ref:ZaAccount.A2_showSameDomain,type:_CHECKBOX_,align:_RIGHT_,msgName:ZaMsg.NAD_SearchSameDomain,label:AjxMessageFormat.format(ZaMsg.NAD_SearchSameDomain),subLabel:"",labelCssClass:"xform_label",labelLocation:_LEFT_,trueValue:"TRUE",falseValue:"FALSE",enableDisableChecks:[],visibilityChecks:[]}]},{type:_SPACER_,height:"5"},{ref:ZaAccount.A2_nonMemberList,type:_S_DWT_LIST_,width:"98%",height:455,cssClass:"DLSource",widgetClass:ZaAccountMemberOfListView,headerList:p,defaultColumnSortable:0,onSelection:ZaAccountXFormView.nonMemberOfSelectionListener,forceUpdate:true},{type:_SPACER_,height:"5"},{type:_GROUP_,width:"100%",numCols:8,colSizes:[85,5,85,"100%",80,5,80,5],items:[{type:_DWT_BUTTON_,label:ZaMsg.DLXV_ButtonAddFromList,width:80,enableDisableChecks:[[ZaAccountMemberOfListView.shouldEnableAddRemoveButton,ZaAccount.A2_nonMemberList]],enableDisableChangeEventSources:[ZaAccount.A2_nonMemberListSelected],onActivate:"ZaAccountMemberOfListView.addGroups.call(this,event, ZaAccount.A2_nonMemberList)"},{type:_CELLSPACER_,height:"100%"},{type:_DWT_BUTTON_,label:ZaMsg.DLXV_ButtonAddAll,width:80,enableDisableChangeEventSources:[ZaAccount.A2_nonMemberList],enableDisableChecks:[[ZaAccountMemberOfListView.shouldEnableAllButton,ZaAccount.A2_nonMemberList]],onActivate:"ZaAccountMemberOfListView.addAllGroups.call(this,event, ZaAccount.A2_nonMemberList)"},{type:_CELLSPACER_,height:"100%"},{type:_DWT_BUTTON_,label:ZaMsg.Previous,width:75,id:"backButton",icon:"LeftArrow",disIcon:"LeftArrowDis",enableDisableChangeEventSources:[ZaAccount.A2_nonMemberList+"_offset"],enableDisableChecks:[[ZaAccountMemberOfListView.shouldEnableBackButton,ZaAccount.A2_nonMemberList]],onActivate:"ZaAccountMemberOfListView.backButtonHndlr.call(this,event, ZaAccount.A2_nonMemberList)"},{type:_CELLSPACER_,height:"100%"},{type:_DWT_BUTTON_,label:ZaMsg.Next,width:75,id:"fwdButton",icon:"RightArrow",disIcon:"RightArrowDis",enableDisableChangeEventSources:[ZaAccount.A2_nonMemberList+"_more"],enableDisableChecks:[[ZaAccountMemberOfListView.shouldEnableForwardButton,ZaAccount.A2_nonMemberList]],onActivate:"ZaAccountMemberOfListView.fwdButtonHndlr.call(this,event, ZaAccount.A2_nonMemberList)"},{type:_CELLSPACER_,height:"100%"}]}]},{type:_GROUP_,width:"100%",items:[{type:_CELLSPACER_}]}]};
d.push(l)
}if(A){d.push({type:_ZATABCASE_,id:"account_form_features_tab",numCols:1,width:"100%",caseKey:A,paddingStyle:"padding-left:15px;",width:"98%",cellpadding:2,items:[{type:_DWT_ALERT_,containerCssStyle:"padding-top:20px;width:400px;",style:DwtAlert.INFO,iconVisible:false,content:ZaMsg.NAD_CheckFeaturesInfo},{type:_ZA_TOP_GROUPER_,label:ZaMsg.NAD_zimbraMajorFeature,id:"account_form_features_major",colSizes:["auto"],numCols:1,visibilityChecks:[[ZATopGrouper_XFormItem.isGroupVisible,[ZaAccount.A_zimbraFeatureMailEnabled,ZaAccount.A_zimbraFeatureContactsEnabled,ZaAccount.A_zimbraFeatureCalendarEnabled,ZaAccount.A_zimbraFeatureTasksEnabled,ZaAccount.A_zimbraFeatureBriefcasesEnabled,ZaAccount.A_zimbraFeatureOptionsEnabled]]],items:[{ref:ZaAccount.A_zimbraFeatureMailEnabled,type:_SUPER_CHECKBOX_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_zimbraFeatureMailEnabled,checkBoxLabel:ZaMsg.LBL_zimbraFeatureMailEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaAccount.A_zimbraFeatureContactsEnabled,type:_SUPER_CHECKBOX_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_zimbraFeatureContactsEnabled,checkBoxLabel:ZaMsg.LBL_zimbraFeatureContactsEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaAccount.A_zimbraFeatureCalendarEnabled,type:_SUPER_CHECKBOX_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_zimbraFeatureCalendarEnabled,checkBoxLabel:ZaMsg.LBL_zimbraFeatureCalendarEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaAccount.A_zimbraFeatureTasksEnabled,type:_SUPER_CHECKBOX_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_zimbraFeatureTaskEnabled,checkBoxLabel:ZaMsg.LBL_zimbraFeatureTaskEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaAccount.A_zimbraFeatureBriefcasesEnabled,type:_SUPER_CHECKBOX_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_zimbraFeatureBriefcasesEnabled,checkBoxLabel:ZaMsg.LBL_zimbraFeatureBriefcasesEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaAccount.A_zimbraFeatureOptionsEnabled,type:_SUPER_CHECKBOX_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_zimbraFeatureOptionsEnabled,checkBoxLabel:ZaMsg.LBL_zimbraFeatureOptionsEnabled,trueValue:"TRUE",falseValue:"FALSE"}]},{type:_ZA_TOP_GROUPER_,label:ZaMsg.NAD_zimbraGeneralFeature,id:"account_form_features_general",colSizes:["auto"],numCols:1,visibilityChecks:[[ZATopGrouper_XFormItem.isGroupVisible,[ZaAccount.A_zimbraFeatureTaggingEnabled,ZaAccount.A_zimbraFeatureSharingEnabled,ZaAccount.A_zimbraFeatureChangePasswordEnabled,ZaAccount.A_zimbraFeatureSkinChangeEnabled,ZaAccount.A_zimbraFeatureManageZimlets,ZaAccount.A_zimbraFeatureHtmlComposeEnabled,ZaAccount.A_zimbraFeatureGalEnabled,ZaAccount.A_zimbraFeatureMAPIConnectorEnabled,ZaAccount.A_zimbraFeatureEwsEnabled,ZaAccount.A_zimbraFeatureTouchClientEnabled,ZaAccount.A_zimbraFeatureWebClientOfflineAccessEnabled,ZaAccount.A_zimbraFeatureBriefcasesEnabled,ZaAccount.A_zimbraFeatureGalAutoCompleteEnabled,ZaAccount.A_zimbraFeatureImportFolderEnabled,ZaAccount.A_zimbraFeatureExportFolderEnabled,ZaAccount.A_zimbraDumpsterEnabled,ZaAccount.A_zimbraDumpsterPurgeEnabled,ZaAccount.A_zimbraFeatureDocumentEditingEnabled]]],items:[{ref:ZaAccount.A_zimbraFeatureTaggingEnabled,type:_SUPER_CHECKBOX_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_zimbraFeatureTaggingEnabled,checkBoxLabel:ZaMsg.LBL_zimbraFeatureTaggingEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaAccount.A_zimbraFeatureSharingEnabled,type:_SUPER_CHECKBOX_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_zimbraFeatureSharingEnabled,checkBoxLabel:ZaMsg.LBL_zimbraFeatureSharingEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaAccount.A_zimbraExternalSharingEnabled,type:_SUPER_CHECKBOX_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_zimbraExternalSharingEnabled,checkBoxLabel:ZaMsg.LBL_zimbraExternalSharingEnabled,trueValue:"TRUE",falseValue:"FALSE",visibilityChecks:[[ZaItem.hasReadPermission],[XForm.checkInstanceValue,ZaAccount.A_zimbraFeatureSharingEnabled,"TRUE"]],visibilityChangeEventSources:[ZaAccount.A_zimbraFeatureSharingEnabled]},{ref:ZaAccount.A_zimbraPublicSharingEnabled,type:_SUPER_CHECKBOX_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_zimbraPublicSharingEnabled,checkBoxLabel:ZaMsg.LBL_zimbraPublicSharingEnabled,trueValue:"TRUE",falseValue:"FALSE",visibilityChecks:[[ZaItem.hasReadPermission],[XForm.checkInstanceValue,ZaAccount.A_zimbraFeatureSharingEnabled,"TRUE"]],visibilityChangeEventSources:[ZaAccount.A_zimbraFeatureSharingEnabled]},{ref:ZaAccount.A_zimbraFeatureChangePasswordEnabled,type:_SUPER_CHECKBOX_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_zimbraFeatureChangePasswordEnabled,checkBoxLabel:ZaMsg.LBL_zimbraFeatureChangePasswordEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaAccount.A_zimbraFeatureSkinChangeEnabled,type:_SUPER_CHECKBOX_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_zimbraFeatureSkinChangeEnabled,checkBoxLabel:ZaMsg.LBL_zimbraFeatureSkinChangeEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaAccount.A_zimbraFeatureManageZimlets,type:_SUPER_CHECKBOX_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_zimbraFeatureManageZimlets,checkBoxLabel:ZaMsg.LBL_zimbraFeatureManageZimlets,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaAccount.A_zimbraFeatureHtmlComposeEnabled,type:_SUPER_CHECKBOX_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_zimbraFeatureHtmlComposeEnabled,checkBoxLabel:ZaMsg.LBL_zimbraFeatureHtmlComposeEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaAccount.A_zimbraFeatureGalEnabled,type:_SUPER_CHECKBOX_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_zimbraFeatureGalEnabled,checkBoxLabel:ZaMsg.LBL_zimbraFeatureGalEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaAccount.A_zimbraFeatureMAPIConnectorEnabled,type:_SUPER_CHECKBOX_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_zimbraFeatureMAPIConnectorEnabled,checkBoxLabel:ZaMsg.LBL_zimbraFeatureMAPIConnectorEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaAccount.A_zimbraFeatureEwsEnabled,type:_SUPER_CHECKBOX_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_zimbraFeatureEwsEnabled,checkBoxLabel:ZaMsg.LBL_zimbraFeatureEwsEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaAccount.A_zimbraFeatureTouchClientEnabled,type:_SUPER_CHECKBOX_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_zimbraFeatureTouchClientEnabled,checkBoxLabel:ZaMsg.LBL_zimbraFeatureTouchClientEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaAccount.A_zimbraFeatureWebClientOfflineAccessEnabled,type:_SUPER_CHECKBOX_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_zimbraFeatureWebClientOfflineAccessEnabled,checkBoxLabel:ZaMsg.LBL_zimbraFeatureWebClientOfflineAccessEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaAccount.A_zimbraFeatureGalAutoCompleteEnabled,type:_SUPER_CHECKBOX_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_zimbraFeatureGalAutoCompleteEnabled,checkBoxLabel:ZaMsg.LBL_zimbraFeatureGalAutoCompleteEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaAccount.A_zimbraFeatureImportFolderEnabled,type:_SUPER_CHECKBOX_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_zimbraFeatureImportFolderEnabled,checkBoxLabel:ZaMsg.LBL_zimbraFeatureImportFolderEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaAccount.A_zimbraFeatureExportFolderEnabled,type:_SUPER_CHECKBOX_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_zimbraFeatureExportFolderEnabled,checkBoxLabel:ZaMsg.LBL_zimbraFeatureExportFolderEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaAccount.A_zimbraDumpsterEnabled,type:_SUPER_CHECKBOX_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.MSG_zimbraDumpsterEnabled,checkBoxLabel:ZaMsg.LBL_zimbraDumpsterEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaAccount.A_zimbraDumpsterPurgeEnabled,type:_SUPER_CHECKBOX_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.MSG_zimbraDumpsterPurgeEnabled,checkBoxLabel:ZaMsg.LBL_zimbraDumpsterPurgeEnabled,trueValue:"TRUE",falseValue:"FALSE",visibilityChecks:[[ZaItem.hasReadPermission],[XForm.checkInstanceValue,ZaAccount.A_zimbraDumpsterEnabled,"TRUE"]],visibilityChangeEventSources:[ZaAccount.A_zimbraDumpsterEnabled]},{ref:ZaAccount.A_zimbraFeatureDocumentEditingEnabled,type:_SUPER_CHECKBOX_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_zimbraFeatureDocumentEditingEnabled,checkBoxLabel:ZaMsg.LBL_zimbraFeatureDocumentEditingEnabled,trueValue:"TRUE",falseValue:"FALSE"}]},{type:_ZA_TOP_GROUPER_,label:ZaMsg.NAD_zimbraMailFeature,id:"account_form_features_mail",colSizes:["auto"],numCols:1,visibilityChecks:[[ZATopGrouper_XFormItem.isGroupVisible,[ZaAccount.A_zimbraFeatureMailPriorityEnabled,ZaAccount.A_zimbraFeatureFlaggingEnabled,ZaAccount.A_zimbraImapEnabled,ZaAccount.A_zimbraPop3Enabled,ZaAccount.A_zimbraFeatureWebClientEnabled,ZaAccount.A_zimbraFeatureImapDataSourceEnabled,ZaAccount.A_zimbraFeaturePop3DataSourceEnabled,ZaAccount.A_zimbraFeatureMailSendLaterEnabled,ZaAccount.A_zimbraFeatureConversationsEnabled,ZaAccount.A_zimbraFeatureFiltersEnabled,ZaAccount.A_zimbraFeatureOutOfOfficeReplyEnabled,ZaAccount.A_zimbraFeatureNewMailNotificationEnabled,ZaAccount.A_zimbraFeatureIdentitiesEnabled,ZaAccount.A_zimbraFeatureReadReceiptsEnabled]]],enableDisableChecks:[[XForm.checkInstanceValue,ZaAccount.A_zimbraFeatureMailEnabled,"TRUE"]],enableDisableChangeEventSources:[ZaAccount.A_zimbraFeatureMailEnabled,ZaAccount.A_COSId],items:[{ref:ZaAccount.A_zimbraFeatureMailPriorityEnabled,type:_SUPER_CHECKBOX_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_zimbraFeatureMailPriorityEnabled,checkBoxLabel:ZaMsg.LBL_zimbraFeatureMailPriorityEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaAccount.A_zimbraFeatureFlaggingEnabled,type:_SUPER_CHECKBOX_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_zimbraFeatureFlaggingEnabled,checkBoxLabel:ZaMsg.LBL_zimbraFeatureFlaggingEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaAccount.A_zimbraImapEnabled,type:_SUPER_CHECKBOX_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_zimbraImapEnabled,checkBoxLabel:ZaMsg.LBL_zimbraImapEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaAccount.A_zimbraPop3Enabled,type:_SUPER_CHECKBOX_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_zimbraPop3Enabled,checkBoxLabel:ZaMsg.LBL_zimbraPop3Enabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaAccount.A_zimbraFeatureWebClientEnabled,type:_SUPER_CHECKBOX_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_zimbraFeatureWebClientEnabled,checkBoxLabel:ZaMsg.LBL_zimbraFeatureWebClientEnabled,trueValue:"TRUE",falseValue:"FALSE",visibilityChecks:[function(){return ZaAccountXFormView.isAttributeDefined.call(this,ZaAccount.A_zimbraFeatureWebClientEnabled)
}]},{ref:ZaAccount.A_zimbraFeatureImapDataSourceEnabled,type:_SUPER_CHECKBOX_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_zimbraExternalImapEnabled,checkBoxLabel:ZaMsg.LBL_zimbraExternalImapEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaAccount.A_zimbraFeaturePop3DataSourceEnabled,type:_SUPER_CHECKBOX_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_zimbraExternalPop3Enabled,checkBoxLabel:ZaMsg.LBL_zimbraExternalPop3Enabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaAccount.A_zimbraFeatureMailSendLaterEnabled,type:_SUPER_CHECKBOX_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_zimbraFeatureMailSendLaterEnabled,checkBoxLabel:ZaMsg.LBL_zimbraFeatureMailSendLaterEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaAccount.A_zimbraFeatureConversationsEnabled,type:_SUPER_CHECKBOX_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_zimbraFeatureConversationsEnabled,checkBoxLabel:ZaMsg.LBL_zimbraFeatureConversationsEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaAccount.A_zimbraFeatureFiltersEnabled,type:_SUPER_CHECKBOX_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_zimbraFeatureFiltersEnabled,checkBoxLabel:ZaMsg.LBL_zimbraFeatureFiltersEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaAccount.A_zimbraFeatureOutOfOfficeReplyEnabled,type:_SUPER_CHECKBOX_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_zimbraFeatureOutOfOfficeReplyEnabled,checkBoxLabel:ZaMsg.LBL_zimbraFeatureOutOfOfficeReplyEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaAccount.A_zimbraFeatureNewMailNotificationEnabled,type:_SUPER_CHECKBOX_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_zimbraFeatureNewMailNotificationEnabled,checkBoxLabel:ZaMsg.LBL_zimbraFeatureNewMailNotificationEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaAccount.A_zimbraFeatureIdentitiesEnabled,type:_SUPER_CHECKBOX_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_zimbraFeatureIdentitiesEnabled,checkBoxLabel:ZaMsg.LBL_zimbraFeatureIdentitiesEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaAccount.A_zimbraFeatureReadReceiptsEnabled,type:_SUPER_CHECKBOX_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,checkBoxLabel:ZaMsg.LBL_zimbraFeatureReadReceiptsEnabled,trueValue:"TRUE",falseValue:"FALSE"}]},{type:_ZA_TOP_GROUPER_,label:ZaMsg.NAD_zimbraContactFeature,id:"account_form_features_contact",enableDisableChecks:[[XForm.checkInstanceValue,ZaAccount.A_zimbraFeatureContactsEnabled,"TRUE"]],enableDisableChangeEventSources:[ZaAccount.A_zimbraFeatureContactsEnabled,ZaAccount.A_COSId],visibilityChecks:[[ZATopGrouper_XFormItem.isGroupVisible,[ZaAccount.A_zimbraFeatureDistributionListFolderEnabled]]],items:[{ref:ZaAccount.A_zimbraFeatureDistributionListFolderEnabled,type:_SUPER_CHECKBOX_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.MSG_zimbraFeatureDistributionListFolderEnabled,checkBoxLabel:ZaMsg.LBL_zimbraFeatureDistributionListFolderEnabled,trueValue:"TRUE",falseValue:"FALSE"}]},{type:_ZA_TOP_GROUPER_,label:ZaMsg.NAD_zimbraCalendarFeature,id:"account_form_features_calendar",colSizes:["auto"],numCols:1,visibilityChecks:[[ZATopGrouper_XFormItem.isGroupVisible,[ZaAccount.A_zimbraFeatureGroupCalendarEnabled,ZaAccount.A_zimbraFeatureCalendarReminderDeviceEmailEnabled]]],enableDisableChecks:[[XForm.checkInstanceValue,ZaAccount.A_zimbraFeatureCalendarEnabled,"TRUE"]],enableDisableChangeEventSources:[ZaAccount.A_zimbraFeatureCalendarEnabled,ZaAccount.A_COSId],items:[{ref:ZaAccount.A_zimbraFeatureGroupCalendarEnabled,type:_SUPER_CHECKBOX_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_zimbraFeatureGroupCalendarEnabled,checkBoxLabel:ZaMsg.LBL_zimbraFeatureGroupCalendarEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaAccount.A_zimbraFeatureCalendarReminderDeviceEmailEnabled,type:_SUPER_CHECKBOX_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_zimbraFeatureCalendarReminderDeviceEmailEnabled,checkBoxLabel:ZaMsg.LBL_zimbraFeatureCalendarReminderDeviceEmailEnabled,trueValue:"TRUE",falseValue:"FALSE"}]},{type:_ZA_TOP_GROUPER_,label:ZaMsg.NAD_zimbraSearchFeature,id:"account_form_features_search",colSizes:["auto"],numCols:1,visibilityChecks:[[ZATopGrouper_XFormItem.isGroupVisible,[ZaAccount.A_zimbraFeatureAdvancedSearchEnabled,ZaAccount.A_zimbraFeatureSavedSearchesEnabled,ZaAccount.A_zimbraFeatureInitialSearchPreferenceEnabled,ZaAccount.A_zimbraFeaturePeopleSearchEnabled]]],items:[{ref:ZaAccount.A_zimbraFeatureAdvancedSearchEnabled,type:_SUPER_CHECKBOX_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_zimbraFeatureAdvancedSearchEnabled,checkBoxLabel:ZaMsg.LBL_zimbraFeatureAdvancedSearchEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaAccount.A_zimbraFeatureSavedSearchesEnabled,type:_SUPER_CHECKBOX_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_zimbraFeatureSavedSearchesEnabled,checkBoxLabel:ZaMsg.LBL_zimbraFeatureSavedSearchesEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaAccount.A_zimbraFeatureInitialSearchPreferenceEnabled,type:_SUPER_CHECKBOX_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_zimbraFeatureInitialSearchPreferenceEnabled,checkBoxLabel:ZaMsg.LBL_zimbraFeatureInitialSearchPreferenceEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaAccount.A_zimbraFeaturePeopleSearchEnabled,type:_SUPER_CHECKBOX_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_zimbraFeaturePeopleSearchEnabled,checkBoxLabel:ZaMsg.LBL_zimbraFeaturePeopleSearchEnabled,trueValue:"TRUE",falseValue:"FALSE"}]},{type:_ZA_TOP_GROUPER_,label:ZaMsg.NAD_zimbraSMIMEFeature,id:"account_form_features_smime",colSizes:["auto"],numCols:1,visibilityChecks:[[ZATopGrouper_XFormItem.isGroupVisible,[ZaAccount.A_zimbraFeatureSMIMEEnabled]]],items:[{ref:ZaAccount.A_zimbraFeatureSMIMEEnabled,type:_SUPER_CHECKBOX_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_zimbraFeatureSMIMEEnabled,checkBoxLabel:ZaMsg.LBL_zimbraFeatureSMIMEEnabled,trueValue:"TRUE",falseValue:"FALSE"}]}]})
}if(z){var s=[{type:_ZA_TOP_GROUPER_,id:"account_prefs_general",colSizes:["275px","auto"],numCols:2,label:ZaMsg.NAD_GeneralOptions,visibilityChecks:[[ZATopGrouper_XFormItem.isGroupVisible,[ZaAccount.A_zimbraPrefClientType,ZaAccount.A_zimbraPrefMailInitialSearch,ZaAccount.A_zimbraPrefShowSearchString,ZaAccount.A_zimbraPrefImapSearchFoldersEnabled,ZaAccount.A_zimbraPrefUseKeyboardShortcuts,ZaAccount.A_zimbraPrefWarnOnExit,ZaAccount.A_zimbraPrefAdminConsoleWarnOnExit,ZaAccount.A_zimbraPrefShowSelectionCheckbox,ZaAccount.A_zimbraJunkMessagesIndexingEnabled,ZaAccount.A_zimbraPrefLocale]]],items:[{ref:ZaAccount.A_zimbraPrefClientType,type:_SUPER_SELECT1_,colSpan:2,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.MSG_zimbraPrefClientType,label:ZaMsg.LBL_zimbraPrefClientType,labelLocation:_LEFT_},{ref:ZaAccount.A_zimbraPrefMailInitialSearch,type:_SUPER_TEXTFIELD_,msgName:ZaMsg.LBL_zimbraPrefMailInitialSearch,txtBoxLabel:ZaMsg.LBL_zimbraPrefMailInitialSearch,labelCssClass:"gridGroupBodyLabel",labelCssStyle:"border-right:1px solid;",labelLocation:_LEFT_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS},{ref:ZaAccount.A_zimbraPrefShowSearchString,type:_SUPER_CHECKBOX_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_zimbraPrefShowSearchString,checkBoxLabel:ZaMsg.LBL_zimbraPrefShowSearchString,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaAccount.A_zimbraPrefImapSearchFoldersEnabled,type:_SUPER_CHECKBOX_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_zimbraPrefImapSearchFoldersEnabled,checkBoxLabel:ZaMsg.LBL_zimbraPrefImapSearchFoldersEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaAccount.A_zimbraPrefUseKeyboardShortcuts,type:_SUPER_CHECKBOX_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,checkBoxLabel:ZaMsg.LBL_zimbraPrefUseKeyboardShortcuts,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaAccount.A_zimbraPrefWarnOnExit,type:_SUPER_CHECKBOX_,nowrap:false,labelWrap:true,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,checkBoxLabel:ZaMsg.LBL_zimbraPrefWarnOnExit,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaAccount.A_zimbraPrefAdminConsoleWarnOnExit,type:_SUPER_CHECKBOX_,nowrap:false,labelWrap:true,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,checkBoxLabel:ZabMsg.LBL_zimbraPrefAdminConsoleWarnOnExit,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaAccount.A_zimbraPrefShowSelectionCheckbox,type:_SUPER_CHECKBOX_,labelWrap:true,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,checkBoxLabel:ZaMsg.LBL_zimbraPrefShowSelectionCheckbox,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaAccount.A_zimbraJunkMessagesIndexingEnabled,type:_SUPER_CHECKBOX_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_zimbraJunkMessagesIndexingEnabled,checkBoxLabel:ZaMsg.LBL_zimbraJunkMessagesIndexingEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaAccount.A_zimbraPrefLocale,type:_SUPER_SELECT1_,colSpan:2,choices:ZaSettings.getLocaleChoices(),msgName:ZaMsg.LBL_zimbraPrefLocale,label:ZaMsg.LBL_zimbraPrefLocale,labelLocation:_LEFT_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS}]},{type:_ZA_TOP_GROUPER_,id:"account_prefs_standard_client",colSizes:["275px","auto"],numCols:2,label:ZaMsg.NAD_MailOptionsStandardClient,visibilityChecks:[[ZATopGrouper_XFormItem.isGroupVisible,[ZaAccount.A_zimbraMaxMailItemsPerPage,ZaAccount.A_zimbraPrefMailItemsPerPage]]],items:[{ref:ZaAccount.A_zimbraMaxMailItemsPerPage,type:_SUPER_SELECT1_,editable:true,inputSize:4,choices:[10,25,50,100,250,500,1000],msgName:ZaMsg.MSG_zimbraMaxMailItemsPerPage,label:ZaMsg.LBL_zimbraMaxMailItemsPerPage,labelLocation:_LEFT_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,valueLabel:null},{ref:ZaAccount.A_zimbraPrefMailItemsPerPage,type:_SUPER_SELECT1_,editable:false,msgName:ZaMsg.MSG_zimbraPrefMailItemsPerPage,label:ZaMsg.LBL_zimbraPrefMailItemsPerPage,labelLocation:_LEFT_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,valueLabel:null}]},{type:_ZA_TOP_GROUPER_,id:"account_prefs_mail_general",label:ZaMsg.NAD_MailOptions,visibilityChecks:[[ZATopGrouper_XFormItem.isGroupVisible,[ZaAccount.A_zimbraPrefMessageViewHtmlPreferred,ZaAccount.A_zimbraPrefDisplayExternalImages,ZaAccount.A_zimbraPrefGroupMailBy,ZaAccount.A_zimbraPrefMailDefaultCharset,ZaAccount.A_zimbraPrefMailToasterEnabled,ZaAccount.A_zimbraPrefMessageIdDedupingEnabled,ZaAccount.A_zimbraPrefItemsPerVirtualPage]]],items:[{ref:ZaAccount.A_zimbraPrefMessageViewHtmlPreferred,type:_SUPER_CHECKBOX_,colSpan:2,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_zimbraPrefMessageViewHtmlPreferred,checkBoxLabel:ZaMsg.LBL_zimbraPrefMessageViewHtmlPreferred,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaAccount.A_zimbraPrefDisplayExternalImages,type:_SUPER_CHECKBOX_,colSpan:2,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_zimbraPrefDisplayExternalImages,checkBoxLabel:ZaMsg.LBL_zimbraPrefDisplayExternalImages,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaAccount.A_zimbraPrefGroupMailBy,type:_SUPER_SELECT1_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_zimbraPrefGroupMailBy,label:ZaMsg.LBL_zimbraPrefGroupMailBy,labelLocation:_LEFT_},{ref:ZaAccount.A_zimbraPrefMailDefaultCharset,type:_SUPER_SELECT1_,msgName:ZaMsg.LBL_zimbraPrefMailDefaultCharset,label:ZaMsg.LBL_zimbraPrefMailDefaultCharset,labelLocation:_LEFT_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS},{ref:ZaAccount.A_zimbraPrefMailToasterEnabled,type:_SUPER_CHECKBOX_,colSpan:2,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.MSG_zimbraPrefMailToasterEnabled,checkBoxLabel:ZaMsg.LBL_zimbraPrefMailToasterEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaAccount.A_zimbraPrefMessageIdDedupingEnabled,type:_SUPER_CHECKBOX_,colSpan:2,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.MSG_zimbraPrefMessageIdDedupingEnabled,checkBoxLabel:ZaMsg.LBL_zimbraPrefMessageIdDedupingEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaAccount.A_zimbraPrefItemsPerVirtualPage,type:_SUPER_TEXTFIELD_,colSizes:["275px","275px","*"],colSpan:2,msgName:ZaMsg.LBL_zimbraPrefItemsPerVirtualPage,txtBoxLabel:ZaMsg.LBL_zimbraPrefItemsPerVirtualPage,labelLocation:_LEFT_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,textFieldCssClass:"admin_xform_number_input"}]},{type:_ZA_TOP_GROUPER_,colSizes:["275px","100%"],id:"account_prefs_mail_receiving",numCols:2,label:ZaMsg.NAD_MailOptionsReceiving,visibilityChecks:[[ZATopGrouper_XFormItem.isGroupVisible,[ZaAccount.A_zimbraPrefMailPollingInterval,ZaAccount.A_zimbraMailMinPollingInterval,ZaAccount.A_zimbraPrefMailSoundsEnabled,ZaAccount.A_zimbraPrefMailFlashIcon,ZaAccount.A_zimbraPrefMailFlashTitle,ZaAccount.A_zimbraPrefNewMailNotificationEnabled,ZaAccount.A_zimbraPrefNewMailNotificationAddress,ZaAccount.A_zimbraPrefOutOfOfficeReplyEnabled,ZaAccount.A_zimbraPrefOutOfOfficeCacheDuration,ZaAccount.A_zimbraPrefOutOfOfficeReply,ZaAccount.A_zimbraPrefMailSendReadReceipts,ZaAccount.A_zimbraPrefReadReceiptsToAddress]]],items:[{ref:ZaAccount.A_zimbraPrefMailPollingInterval,type:_SUPER_SELECT1_,labelCssClass:"gridGroupBodyLabel",msgName:ZaMsg.MSG_zimbraPrefMailPollingInterval,label:ZaMsg.LBL_zimbraPrefMailPollingInterval,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,onChange:ZaAccountXFormView.validatePollingInterval,nowrap:false,labelWrap:true},{ref:ZaAccount.A_zimbraMailMinPollingInterval,labelCssClass:"gridGroupBodyLabel",type:_SUPER_LIFETIME_,msgName:ZaMsg.MSG_zimbraMailMinPollingInterval,txtBoxLabel:ZaMsg.LBL_zimbraMailMinPollingInterval,onChange:ZaAccountXFormView.validatePollingInterval,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,colSpan:2},{ref:ZaAccount.A_zimbraPrefMailSoundsEnabled,type:_SUPER_CHECKBOX_,colSpan:2,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_playSound,checkBoxLabel:ZaMsg.LBL_playSound,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaAccount.A_zimbraPrefMailFlashIcon,type:_SUPER_CHECKBOX_,colSpan:2,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_flashIcon,checkBoxLabel:ZaMsg.LBL_flashIcon,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaAccount.A_zimbraPrefMailFlashTitle,type:_SUPER_CHECKBOX_,colSpan:2,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_flashTitle,checkBoxLabel:ZaMsg.LBL_flashTitle,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaAccount.A_zimbraPrefNewMailNotificationEnabled,type:_ZA_CHECKBOX_,msgName:ZaMsg.LBL_zimbraPrefNewMailNotificationEnabled,label:ZaMsg.LBL_zimbraPrefNewMailNotificationEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaAccount.A_zimbraPrefNewMailNotificationAddress,type:_TEXTFIELD_,msgName:ZaMsg.LBL_zimbraPrefNewMailNotificationAddress,label:ZaMsg.LBL_zimbraPrefNewMailNotificationAddress,labelLocation:_LEFT_,enableDisableChecks:[[XForm.checkInstanceValue,ZaAccount.A_zimbraPrefNewMailNotificationEnabled,"TRUE"],[ZaItem.hasWritePermission,ZaAccount.A_zimbraPrefNewMailNotificationAddress]],enableDisableChangeEventSources:[ZaAccount.A_zimbraPrefNewMailNotificationEnabled],nowrap:false,labelWrap:true},{ref:ZaAccount.A_zimbraPrefOutOfOfficeReplyEnabled,type:_ZA_CHECKBOX_,msgName:ZaMsg.LBL_zimbraPrefOutOfOfficeReplyEnabled,label:ZaMsg.LBL_zimbraPrefOutOfOfficeReplyEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaAccount.A_zimbraPrefOutOfOfficeCacheDuration,type:_SUPER_LIFETIME_,msgName:ZaMsg.MSG_zimbraPrefOutOfOfficeCacheDuration,txtBoxLabel:ZaMsg.LBL_zimbraPrefOutOfOfficeCacheDuration,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,colSpan:2},{ref:ZaAccount.A_zimbraPrefOutOfOfficeReply,type:_TEXTAREA_,msgName:ZaMsg.LBL_zimbraPrefOutOfOfficeReply,label:ZaMsg.LBL_zimbraPrefOutOfOfficeReply,labelLocation:_LEFT_,labelCssStyle:"vertical-align:top;",width:"30em",enableDisableChecks:[[XForm.checkInstanceValue,ZaAccount.A_zimbraPrefOutOfOfficeReplyEnabled,"TRUE"],[ZaItem.hasWritePermission,ZaAccount.A_zimbraPrefOutOfOfficeReply]],enableDisableChangeEventSources:[ZaAccount.A_zimbraPrefOutOfOfficeReplyEnabled]},{ref:ZaAccount.A_zimbraPrefMailSendReadReceipts,type:_SUPER_SELECT1_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,label:ZaMsg.LBL_zimbraPrefMailSendReadReceipts,enableDisableChecks:[[XForm.checkInstanceValue,ZaAccount.A_zimbraFeatureReadReceiptsEnabled,"TRUE"],[ZaItem.hasWritePermission,ZaAccount.A_zimbraPrefMailSendReadReceipts]],enableDisableChangeEventSources:[ZaAccount.A_zimbraFeatureReadReceiptsEnabled]},{ref:ZaAccount.A_zimbraPrefReadReceiptsToAddress,type:_TEXTFIELD_,msgName:ZaMsg.MSG_zimbraPrefReadReceiptsToAddress,label:ZaMsg.LBL_zimbraPrefReadReceiptsToAddress,labelLocation:_LEFT_,enableDisableChecks:[[XForm.checkInstanceValue,ZaAccount.A_zimbraFeatureReadReceiptsEnabled,"TRUE"],[ZaItem.hasWritePermission,ZaAccount.A_zimbraPrefReadReceiptsToAddress]],enableDisableChangeEventSources:[ZaAccount.A_zimbraFeatureReadReceiptsEnabled],nowrap:false,labelWrap:true}]},{type:_ZA_TOP_GROUPER_,colSizes:["275px","100%"],id:"account_prefs_mail_sending",borderCssClass:"LowPaddedTopGrouperBorder",label:ZaMsg.NAD_MailOptionsSending,visibilityChecks:[[ZATopGrouper_XFormItem.isGroupVisible,[ZaAccount.A_zimbraPrefSaveToSent,ZaAccount.A_zimbraAllowAnyFromAddress,ZaAccount.A_zimbraAllowFromAddress]]],items:[{ref:ZaAccount.A_zimbraPrefSaveToSent,colSpan:2,type:_SUPER_CHECKBOX_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_zimbraPrefSaveToSent,checkBoxLabel:ZaMsg.LBL_zimbraPrefSaveToSent,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaAccount.A_zimbraAllowAnyFromAddress,colSpan:2,type:_SUPER_CHECKBOX_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_zimbraAllowAnyFromAddress,checkBoxLabel:ZaMsg.LBL_zimbraAllowAnyFromAddress,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaAccount.A_zimbraAllowFromAddress,type:_REPEAT_,nowrap:false,labelWrap:true,label:ZaMsg.LBL_zimbraAllowFromAddress,msgName:ZaMsg.MSG_zimbraAllowFromAddress,labelLocation:_LEFT_,addButtonLabel:ZaMsg.NAD_AddAddress,align:_LEFT_,repeatInstance:j,showAddButton:true,showRemoveButton:true,showAddOnNextRow:true,removeButtonLabel:ZaMsg.NAD_RemoveAddress,items:[{ref:".",type:_TEXTFIELD_,label:null,width:"200px",enableDisableChecks:[[ZaItem.hasWritePermission,ZaAccount.A_zimbraAllowFromAddress]],visibilityChecks:[[ZaItem.hasReadPermission,ZaAccount.A_zimbraAllowFromAddress]]}],visibilityChecks:[ZaAccountXFormView.isSendingFromAnyAddressDisAllowed,[ZaItem.hasReadPermission,ZaAccount.A_zimbraAllowFromAddress]],visibilityChangeEventSources:[ZaAccount.A_zimbraAllowAnyFromAddress,ZaAccount.A_zimbraAllowFromAddress,ZaAccount.A_COSId]}]},{type:_ZA_TOP_GROUPER_,colSizes:["275px","100%"],id:"account_prefs_mail_composing",borderCssClass:"LowPaddedTopGrouperBorder",label:ZaMsg.NAD_MailOptionsComposing,visibilityChecks:[[ZATopGrouper_XFormItem.isGroupVisible,[ZaAccount.A_zimbraPrefComposeInNewWindow,ZaAccount.A_zimbraPrefComposeFormat,ZaAccount.A_zimbraPrefHtmlEditorDefaultFontSize,ZaAccount.A_zimbraPrefHtmlEditorDefaultFontFamily,ZaAccount.A_zimbraPrefHtmlEditorDefaultFontColor,ZaAccount.A_zimbraPrefForwardReplyInOriginalFormat,ZaAccount.A_zimbraPrefMandatorySpellCheckEnabled,ZaAccount.A_zimbraMailSignatureMaxLength,ZaAccount.A_zimbraPrefMailSignature,ZaAccount.A_zimbraPrefAutoSaveDraftInterval]]],items:[{ref:ZaAccount.A_zimbraPrefComposeInNewWindow,colSpan:2,type:_SUPER_CHECKBOX_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_zimbraPrefComposeInNewWindow,checkBoxLabel:ZaMsg.LBL_zimbraPrefComposeInNewWindow,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaAccount.A_zimbraPrefComposeFormat,type:_SUPER_SELECT1_,nowrap:false,labelWrap:true,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_zimbraPrefComposeFormat,label:ZaMsg.LBL_zimbraPrefComposeFormat},{ref:ZaAccount.A_zimbraPrefHtmlEditorDefaultFontSize,type:_SUPER_SELECT1_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_zimbraPrefHtmlEditorDefaultFontSize,label:ZaMsg.LBL_zimbraPrefHtmlEditorDefaultFontSize},{ref:ZaAccount.A_zimbraPrefHtmlEditorDefaultFontFamily,type:_SUPER_SELECT1_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_zimbraPrefHtmlEditorDefaultFontFamily,label:ZaMsg.LBL_zimbraPrefHtmlEditorDefaultFontFamily},{ref:ZaAccount.A_zimbraPrefHtmlEditorDefaultFontColor,type:_SUPER_DWT_COLORPICKER_,labelCssStyle:"width:269px;",msgName:ZaMsg.LBL_zimbraPrefHtmlEditorDefaultFontColor,label:ZaMsg.LBL_zimbraPrefHtmlEditorDefaultFontColor,labelLocation:_LEFT_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS},{ref:ZaAccount.A_zimbraPrefForwardReplyInOriginalFormat,colSpan:2,type:_SUPER_CHECKBOX_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_zimbraPrefForwardReplyInOriginalFormat,checkBoxLabel:ZaMsg.LBL_zimbraPrefForwardReplyInOriginalFormat,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaAccount.A_zimbraPrefMandatorySpellCheckEnabled,colSpan:2,type:_SUPER_CHECKBOX_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_zimbraPrefMandatorySpellCheckEnabled,checkBoxLabel:ZaMsg.LBL_zimbraPrefMandatorySpellCheckEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaAccount.A_zimbraPrefMailSignatureEnabled,type:_ZA_CHECKBOX_,msgName:ZaMsg.LBL_zimbraPrefMailSignatureEnabled,label:ZaMsg.LBL_zimbraPrefMailSignatureEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaAccount.A_zimbraMailSignatureMaxLength,colSpan:2,type:_SUPER_TEXTFIELD_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,labelLocation:_LEFT_,msgName:ZaMsg.MSG_zimbraMailSignatureMaxLength,txtBoxLabel:ZaMsg.LBL_zimbraMailSignatureMaxLength,textFieldCssClass:"admin_xform_number_input"},{ref:ZaAccount.A_zimbraPrefMailSignature,type:_TEXTAREA_,msgName:ZaMsg.MSG_zimbraPrefMailSignature,label:ZaMsg.LBL_zimbraPrefMailSignature,labelLocation:_LEFT_,labelCssStyle:"vertical-align:top;",width:"30em",enableDisableChangeEventSources:[ZaAccount.A_zimbraPrefMailSignatureEnabled],enableDisableChecks:[[XForm.checkInstanceValue,ZaAccount.A_zimbraPrefMailSignatureEnabled,"TRUE"]]},{ref:ZaAccount.A_zimbraPrefAutoSaveDraftInterval,type:_SUPER_LIFETIME_,msgName:ZaMsg.MSG_zimbraPrefAutoSaveDraftInterval,txtBoxLabel:ZaMsg.LBL_zimbraPrefAutoSaveDraftInterval,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,colSpan:2,nowrap:false,labelWrap:true}]},{type:_ZA_TOP_GROUPER_,id:"account_prefs_pop_imap",label:ZaMsg.NAD_PopImapOptions,visibilityChecks:[function(){return(ZaAccountXFormView.isAttributeDefined.call(this,ZaAccount.A_zimbraPrefImapEnabled)||ZaAccountXFormView.isAttributeDefined.call(this,ZaAccount.A_zimbraPrefPop3Enabled))
}],items:[{ref:ZaAccount.A_zimbraPrefImapEnabled,type:_SUPER_CHECKBOX_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_zimbraPrefImapEnabled,checkBoxLabel:ZaMsg.LBL_zimbraPrefImapEnabled,trueValue:"TRUE",falseValue:"FALSE",colSpan:2,visibilityChecks:[function(){return ZaAccountXFormView.isAttributeDefined.call(this,ZaAccount.A_zimbraPrefImapEnabled)
}]},{ref:ZaAccount.A_zimbraPrefPop3Enabled,colSpan:2,type:_SUPER_CHECKBOX_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_zimbraPrefPop3Enabled,checkBoxLabel:ZaMsg.LBL_zimbraPrefPop3Enabled,trueValue:"TRUE",falseValue:"FALSE",visibilityChecks:[function(){return ZaAccountXFormView.isAttributeDefined.call(this,ZaAccount.A_zimbraPrefPop3Enabled)
}]}]},{type:_ZA_TOP_GROUPER_,id:"account_prefs_contacts_general",label:ZaMsg.NAD_ContactsOptions,visibilityChecks:[[ZATopGrouper_XFormItem.isGroupVisible,[ZaAccount.A_zimbraPrefAutoAddAddressEnabled,ZaAccount.A_zimbraPrefGalAutoCompleteEnabled]]],items:[{ref:ZaAccount.A_zimbraPrefAutoAddAddressEnabled,type:_SUPER_CHECKBOX_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_zimbraPrefAutoAddAddressEnabled,checkBoxLabel:ZaMsg.LBL_zimbraPrefAutoAddAddressEnabled,trueValue:"TRUE",falseValue:"FALSE",colSpan:2},{ref:ZaAccount.A_zimbraPrefGalAutoCompleteEnabled,colSpan:2,type:_SUPER_CHECKBOX_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_zimbraPrefGalAutoCompleteEnabled,checkBoxLabel:ZaMsg.LBL_zimbraPrefGalAutoCompleteEnabled,trueValue:"TRUE",falseValue:"FALSE"}]},{type:_ZA_TOP_GROUPER_,id:"account_prefs_calendar_general",label:ZaMsg.NAD_CalendarOptions,visibilityChecks:[[ZATopGrouper_XFormItem.isGroupVisible,[ZaAccount.A_zimbraPrefTimeZoneId,ZaAccount.A_zimbraPrefCalendarApptReminderWarningTime,ZaAccount.A_zimbraPrefCalendarInitialView,ZaAccount.A_zimbraPrefCalendarFirstDayOfWeek,ZaAccount.A_zimbraPrefCalendarApptVisibility,ZaAccount.A_zimbraPrefAppleIcalDelegationEnabled,ZaAccount.A_zimbraPrefCalendarShowPastDueReminders,ZaAccount.A_zimbraPrefCalendarToasterEnabled,ZaAccount.A_zimbraPrefCalendarAllowCancelEmailToSelf,ZaAccount.A_zimbraPrefCalendarAllowPublishMethodInvite,ZaAccount.A_zimbraPrefCalendarAllowForwardedInvite,ZaAccount.A_zimbraPrefCalendarReminderFlashTitle,ZaAccount.A_zimbraPrefCalendarReminderSoundsEnabled,ZaAccount.A_zimbraPrefCalendarSendInviteDeniedAutoReply,ZaAccount.A_zimbraPrefCalendarAutoAddInvites,ZaAccount.A_zimbraPrefCalendarNotifyDelegatedChanges,ZaAccount.A_zimbraPrefCalendarAlwaysShowMiniCal,ZaAccount.A_zimbraPrefCalendarUseQuickAdd,ZaAccount.A_zimbraPrefUseTimeZoneListInCalendar]]],items:[{ref:ZaAccount.A_zimbraPrefTimeZoneId,type:_SUPER_SELECT1_,valueWidth:"220px",msgName:ZaMsg.MSG_zimbraPrefTimeZoneId,label:ZaMsg.LBL_zimbraPrefTimeZoneId,labelLocation:_LEFT_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS},{ref:ZaAccount.A_zimbraPrefCalendarApptReminderWarningTime,type:_SUPER_SELECT1_,msgName:ZaMsg.MSG_zimbraPrefCalendarApptReminderWarningTime,label:ZaMsg.LBL_zimbraPrefCalendarApptReminderWarningTime,labelLocation:_LEFT_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS},{ref:ZaAccount.A_zimbraPrefCalendarInitialView,type:_SUPER_SELECT1_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.MSG_zimbraPrefCalendarInitialView,label:ZaMsg.LBL_zimbraPrefCalendarInitialView,labelLocation:_LEFT_},{ref:ZaAccount.A_zimbraPrefCalendarFirstDayOfWeek,type:_SUPER_SELECT1_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.MSG_zimbraPrefCalendarFirstDayOfWeek,label:ZaMsg.LBL_zimbraPrefCalendarFirstDayOfWeek,labelLocation:_LEFT_},{ref:ZaAccount.A_zimbraPrefCalendarApptVisibility,type:_SUPER_SELECT1_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.MSG_zimbraPrefCalendarApptVisibility,label:ZaMsg.LBL_zimbraPrefCalendarApptVisibility,labelLocation:_LEFT_},{ref:ZaAccount.A_zimbraPrefAppleIcalDelegationEnabled,type:_SUPER_CHECKBOX_,colSpan:2,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.MSG_zimbraPrefAppleIcalDelegationEnabled,checkBoxLabel:ZaMsg.LBL_zimbraPrefAppleIcalDelegationEnabled,trueValue:"TRUE",falseValue:"FALSE",nowrap:false,labelWrap:true},{ref:ZaAccount.A_zimbraPrefCalendarShowPastDueReminders,type:_SUPER_CHECKBOX_,colSpan:2,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.MSG_zimbraPrefCalendarShowPastDueReminders,checkBoxLabel:ZaMsg.LBL_zimbraPrefCalendarShowPastDueReminders,trueValue:"TRUE",falseValue:"FALSE",nowrap:false,labelWrap:true},{ref:ZaAccount.A_zimbraPrefCalendarToasterEnabled,type:_SUPER_CHECKBOX_,colSpan:2,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.MSG_zimbraPrefCalendarToasterEnabled,checkBoxLabel:ZaMsg.LBL_zimbraPrefCalendarToasterEnabled,trueValue:"TRUE",falseValue:"FALSE",nowrap:false,labelWrap:true},{ref:ZaAccount.A_zimbraPrefCalendarAllowCancelEmailToSelf,type:_SUPER_CHECKBOX_,colSpan:2,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.MSG_zimbraPrefCalendarAllowCancelEmailToSelf,checkBoxLabel:ZaMsg.LBL_zimbraPrefCalendarAllowCancelEmailToSelf,trueValue:"TRUE",falseValue:"FALSE",nowrap:false,labelWrap:true},{ref:ZaAccount.A_zimbraPrefCalendarAllowPublishMethodInvite,type:_SUPER_CHECKBOX_,colSpan:2,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.MSG_zimbraPrefCalendarAllowPublishMethodInvite,checkBoxLabel:ZaMsg.LBL_zimbraPrefCalendarAllowPublishMethodInvite,trueValue:"TRUE",falseValue:"FALSE",nowrap:false,labelWrap:true},{ref:ZaAccount.A_zimbraPrefCalendarAllowForwardedInvite,type:_SUPER_CHECKBOX_,colSpan:2,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.MSG_zimbraPrefCalendarAllowForwardedInvite,checkBoxLabel:ZaMsg.LBL_zimbraPrefCalendarAllowForwardedInvite,trueValue:"TRUE",falseValue:"FALSE",nowrap:false,labelWrap:true},{ref:ZaAccount.A_zimbraPrefCalendarReminderFlashTitle,type:_SUPER_CHECKBOX_,colSpan:2,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.MSG_zimbraPrefCalendarReminderFlashTitle,checkBoxLabel:ZaMsg.LBL_zimbraPrefCalendarReminderFlashTitle,trueValue:"TRUE",falseValue:"FALSE",nowrap:false,labelWrap:true},{ref:ZaAccount.A_zimbraPrefCalendarReminderSoundsEnabled,type:_SUPER_CHECKBOX_,colSpan:2,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_zimbraPrefCalendarReminderSoundsEnabled,checkBoxLabel:ZaMsg.LBL_zimbraPrefCalendarReminderSoundsEnabled,trueValue:"TRUE",falseValue:"FALSE",nowrap:false,labelWrap:true},{ref:ZaAccount.A_zimbraPrefCalendarSendInviteDeniedAutoReply,type:_SUPER_CHECKBOX_,colSpan:2,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_zimbraPrefCalendarSendInviteDeniedAutoReply,checkBoxLabel:ZaMsg.LBL_zimbraPrefCalendarSendInviteDeniedAutoReply,trueValue:"TRUE",falseValue:"FALSE",nowrap:false,labelWrap:true},{ref:ZaAccount.A_zimbraPrefCalendarAutoAddInvites,type:_SUPER_CHECKBOX_,colSpan:2,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_zimbraPrefCalendarAutoAddInvites,checkBoxLabel:ZaMsg.LBL_zimbraPrefCalendarAutoAddInvites,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaAccount.A_zimbraPrefCalendarNotifyDelegatedChanges,type:_SUPER_CHECKBOX_,colSpan:2,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_zimbraPrefCalendarNotifyDelegatedChanges,checkBoxLabel:ZaMsg.LBL_zimbraPrefCalendarNotifyDelegatedChanges,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaAccount.A_zimbraPrefCalendarAlwaysShowMiniCal,type:_SUPER_CHECKBOX_,colSpan:2,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_zimbraPrefCalendarAlwaysShowMiniCal,checkBoxLabel:ZaMsg.LBL_zimbraPrefCalendarAlwaysShowMiniCal,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaAccount.A_zimbraPrefCalendarUseQuickAdd,colSpan:2,type:_SUPER_CHECKBOX_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_zimbraPrefCalendarUseQuickAdd,checkBoxLabel:ZaMsg.LBL_zimbraPrefCalendarUseQuickAdd,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaAccount.A_zimbraPrefUseTimeZoneListInCalendar,colSpan:2,type:_SUPER_CHECKBOX_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_zimbraPrefUseTimeZoneListInCalendar,checkBoxLabel:ZaMsg.LBL_zimbraPrefUseTimeZoneListInCalendar,trueValue:"TRUE",falseValue:"FALSE"}]}];
d.push({type:_ZATABCASE_,id:"account_form_prefs_tab",numCols:1,paddingStyle:"padding-left:15px;",width:"98%",cellpadding:2,caseKey:z,items:s})
}if(y){d.push({type:_ZATABCASE_,id:"account_form_aliases_tab",width:"100%",numCols:1,colSizes:["auto"],paddingStyle:"padding-left:15px;",width:"98%",cellpadding:2,caseKey:y,items:[{type:_ZA_TOP_GROUPER_,id:"account_form_aliases_group",borderCssClass:"LowPaddedTopGrouperBorder",width:"100%",numCols:1,colSizes:["auto"],label:ZaMsg.NAD_EditAliasesGroup,items:[{ref:ZaAccount.A_zimbraMailAlias,type:_DWT_LIST_,height:"200",width:"350px",forceUpdate:true,preserveSelection:false,multiselect:true,cssClass:"DLSource",headerList:null,onSelection:ZaAccountXFormView.aliasSelectionListener,getDisplayValue:AjxUtil.htmlEncode},{type:_GROUP_,numCols:5,width:"350px",colSizes:["100px","auto","100px","auto","100px"],cssStyle:"margin:10px;padding-bottom:0;",items:[{type:_DWT_BUTTON_,label:ZaMsg.TBB_Delete,width:"100px",onActivate:"ZaAccountXFormView.deleteAliasButtonListener.call(this);",id:"deleteAliasButton",enableDisableChecks:[ZaAccountXFormView.isDeleteAliasEnabled,[ZaItem.hasRight,ZaAccount.REMOVE_ACCOUNT_ALIAS_RIGHT]],enableDisableChangeEventSources:[ZaAccount.A2_alias_selection_cache]},{type:_CELLSPACER_},{type:_DWT_BUTTON_,label:ZaMsg.TBB_Edit,width:"100px",onActivate:"ZaAccountXFormView.editAliasButtonListener.call(this);",id:"editAliasButton",enableDisableChangeEventSources:[ZaAccount.A2_alias_selection_cache],enableDisableChecks:[ZaAccountXFormView.isEditAliasEnabled,[ZaItem.hasRight,ZaAccount.ADD_ACCOUNT_ALIAS_RIGHT],[ZaItem.hasRight,ZaAccount.REMOVE_ACCOUNT_ALIAS_RIGHT]]},{type:_CELLSPACER_},{type:_DWT_BUTTON_,label:ZaMsg.NAD_Add,width:"100px",enableDisableChecks:[[ZaItem.hasRight,ZaAccount.ADD_ACCOUNT_ALIAS_RIGHT]],enableDisableChangeEventSources:[ZaAccount.A2_alias_selection_cache],onActivate:"ZaAccountXFormView.addAliasButtonListener.call(this);"}]}]}]})
}if(w){d.push({type:_ZATABCASE_,id:"account_form_forwarding_tab",width:"100%",numCols:1,colSizes:["auto"],caseKey:w,paddingStyle:"padding-left:15px;",width:"98%",cellpadding:2,items:[{type:_ZA_TOP_GROUPER_,label:ZaMsg.NAD_EditFwdTopGroupGrouper,id:"account_form_user_forwarding_addr",colSizes:["275px","100%"],visibilityChecks:[[ZATopGrouper_XFormItem.isGroupVisible,[ZaAccount.A_zimbraFeatureMailForwardingEnabled]]],items:[{ref:ZaAccount.A_zimbraFeatureMailForwardingEnabled,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,type:_SUPER_CHECKBOX_,colSpan:2,colSizes:["275","275","*"],checkBoxLabel:ZaMsg.LBL_zimbraFeatureMailForwardingEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaAccount.A_zimbraPrefMailLocalDeliveryDisabled,type:_ZA_CHECKBOX_,msgName:ZaMsg.LBL_zimbraPrefMailLocalDeliveryDisabled,label:ZaMsg.LBL_zimbraPrefMailLocalDeliveryDisabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaAccount.A_zimbraPrefMailForwardingAddress,type:_TEXTFIELD_,width:"350px",labelCssClass:"xform_label",cssClass:"admin_xform_name_input",label:ZaMsg.LBL_zimbraPrefMailForwardingAddress,msgName:ZaMsg.LBL_zimbraPrefMailForwardingAddressMsg,nowrap:false,labelWrap:true,labelLocation:_LEFT_,labelCssStyle:"text-align:left;",align:_LEFT_,visibilityChecks:[ZaItem.hasReadPermission],enableDisableChecks:[[XForm.checkInstanceValue,ZaAccount.A_zimbraFeatureMailForwardingEnabled,"TRUE"]],enableDisableChangeEventSources:[ZaAccount.A_zimbraFeatureMailForwardingEnabled,ZaAccount.A_COSId]},{type:_GROUP_,colSizes:["275px","*"],numCols:2,width:"100%",colSpan:2,items:[{ref:ZaAccount.A_zimbraPrefCalendarForwardInvitesTo,type:_DWT_LIST_,height:"100",width:"350px",getDisplayValue:AjxUtil.htmlEncode,forceUpdate:true,preserveSelection:false,multiselect:true,cssClass:"DLSource",nowrap:false,labelWrap:true,headerList:null,onSelection:ZaAccountXFormView.calFwdAddrSelectionListener,label:ZaMsg.zimbraPrefCalendarForwardInvitesTo,labelCssClass:"gridGroupBodyLabel",labelCssStyle:"text-align:left;border-right:1px solid;",visibilityChecks:[ZaItem.hasReadPermission]},{type:_GROUP_,numCols:6,width:"625px",colSizes:["275","100px","auto","100px","auto","100px"],colSpan:2,visibilityChecks:[[ZaItem.hasWritePermission,ZaAccount.A_zimbraPrefCalendarForwardInvitesTo]],cssStyle:"margin:10px;padding-bottom:0;",items:[{type:_CELLSPACER_},{type:_DWT_BUTTON_,label:ZaMsg.TBB_Delete,width:"100px",onActivate:"ZaAccountXFormView.deleteCalFwdAddrButtonListener.call(this);",enableDisableChecks:[ZaAccountXFormView.isDeleteCalFwdAddrEnabled,[ZaItem.hasWritePermission,ZaAccount.A_zimbraPrefCalendarForwardInvitesTo]],enableDisableChangeEventSources:[ZaAccount.A2_calFwdAddr_selection_cache]},{type:_CELLSPACER_},{type:_DWT_BUTTON_,label:ZaMsg.TBB_Edit,width:"100px",onActivate:"ZaAccountXFormView.editCalFwdAddrButtonListener.call(this);",enableDisableChecks:[ZaAccountXFormView.isEditCalFwdAddrEnabled,[ZaItem.hasWritePermission,ZaAccount.A_zimbraPrefCalendarForwardInvitesTo]],enableDisableChangeEventSources:[ZaAccount.A2_calFwdAddr_selection_cache]},{type:_CELLSPACER_},{type:_DWT_BUTTON_,label:ZaMsg.NAD_Add,width:"100px",enableDisableChecks:[[ZaItem.hasWritePermission,ZaAccount.A_zimbraPrefCalendarForwardInvitesTo]],onActivate:"ZaAccountXFormView.addCalFwdAddrButtonListener.call(this);"}]},{type:_DWT_ALERT_,colSpan:2,containerCssStyle:"padding:0 10px 10px;width:100%;",style:DwtAlert.WARNING,iconVisible:true,content:ZaMsg.Alert_Bouncing_Reveal_Hidden_Adds},{ref:ZaAccount.A_zimbraMailForwardingAddress,type:_DWT_LIST_,height:"100",width:"350px",getDisplayValue:AjxUtil.htmlEncode,forceUpdate:true,preserveSelection:false,multiselect:true,cssClass:"DLSource",headerList:null,onSelection:ZaAccountXFormView.fwdAddrSelectionListener,label:ZaMsg.NAD_EditFwdGroup,labelCssClass:"gridGroupBodyLabel",nowrap:false,labelWrap:true,labelCssStyle:"text-align:left;border-right:1px solid;",visibilityChecks:[ZaItem.hasReadPermission]},{type:_GROUP_,numCols:6,width:"625px",colSizes:["275","100px","auto","100px","auto","100px"],colSpan:2,cssStyle:"margin:10px;padding-bottom:0;",items:[{type:_CELLSPACER_},{type:_DWT_BUTTON_,label:ZaMsg.TBB_Delete,width:"100px",onActivate:"ZaAccountXFormView.deleteFwdAddrButtonListener.call(this);",enableDisableChecks:[ZaAccountXFormView.isDeleteFwdAddrEnabled,[ZaItem.hasWritePermission,ZaAccount.A_zimbraMailForwardingAddress]],enableDisableChangeEventSources:[ZaAccount.A2_fwdAddr_selection_cache]},{type:_CELLSPACER_},{type:_DWT_BUTTON_,label:ZaMsg.TBB_Edit,width:"100px",onActivate:"ZaAccountXFormView.editFwdAddrButtonListener.call(this);",enableDisableChecks:[ZaAccountXFormView.isEditFwdAddrEnabled,[ZaItem.hasWritePermission,ZaAccount.A_zimbraMailForwardingAddress]],enableDisableChangeEventSources:[ZaAccount.A2_fwdAddr_selection_cache]},{type:_CELLSPACER_},{type:_DWT_BUTTON_,label:ZaMsg.NAD_Add,width:"100px",enableDisableChecks:[[ZaItem.hasWritePermission,ZaAccount.A_zimbraMailForwardingAddress]],onActivate:"ZaAccountXFormView.addFwdAddrButtonListener.call(this);"}]}]}]}]})
}if(v){d.push({type:_ZATABCASE_,id:"account_form_interop_tab",width:"100%",numCols:1,colSizes:["auto"],paddingStyle:"padding-left:15px;",width:"98%",cellpadding:2,caseKey:v,items:[{type:_ZA_TOP_GROUPER_,id:"account_form_interop_group",borderCssClass:"LowPaddedTopGrouperBorder",width:"100%",numCols:1,colSizes:["auto"],label:ZaMsg.NAD_EditFpGroup,items:[{ref:ZaAccount.A_zimbraForeignPrincipal,type:_DWT_LIST_,height:"200",width:"350px",forceUpdate:true,preserveSelection:false,multiselect:true,cssClass:"DLSource",headerList:null,onSelection:ZaAccountXFormView.fpSelectionListener,getDisplayValue:AjxUtil.htmlEncode},{type:_GROUP_,numCols:7,width:"350px",colSizes:["100px","auto","100px","auto","100px","auto","100px"],cssStyle:"margin:10px;padding-bottom:0;",items:[{type:_DWT_BUTTON_,label:ZaMsg.TBB_Push,width:"100px",onActivate:"ZaAccountXFormView.pushFpButtonListener.call(this);",enableDisableChecks:[ZaAccountXFormView.isPushFpEnabled,[ZaItem.hasWritePermission,ZaAccount.A_zimbraForeignPrincipal]],enableDisableChangeEventSources:[ZaAccount.A_zimbraForeignPrincipal]},{type:_CELLSPACER_},{type:_DWT_BUTTON_,label:ZaMsg.TBB_Delete,width:"100px",onActivate:"ZaAccountXFormView.deleteFpButtonListener.call(this);",enableDisableChecks:[ZaAccountXFormView.isDeleteFpEnabled,[ZaItem.hasWritePermission,ZaAccount.A_zimbraForeignPrincipal]],enableDisableChangeEventSources:[ZaAccount.A2_fp_selection_cache]},{type:_CELLSPACER_},{type:_DWT_BUTTON_,label:ZaMsg.TBB_Edit,width:"100px",onActivate:"ZaAccountXFormView.editFpButtonListener.call(this);",enableDisableChecks:[ZaAccountXFormView.isEditFpEnabled,[ZaItem.hasWritePermission,ZaAccount.A_zimbraForeignPrincipal]],enableDisableChangeEventSources:[ZaAccount.A2_fp_selection_cache]},{type:_CELLSPACER_},{type:_DWT_BUTTON_,label:ZaMsg.NAD_Add,width:"100px",enableDisableChecks:[[ZaItem.hasWritePermission,ZaAccount.A_zimbraForeignPrincipal]],onActivate:"ZaAccountXFormView.addFpButtonListener.call(this);"}]}]}]})
}if(u){d.push({type:_ZATABCASE_,id:"account_form_themes_tab",numCols:1,caseKey:u,items:[{type:_SPACER_},{type:_GROUP_,items:[{ref:ZaAccount.A_zimbraPrefSkin,type:_SUPER_SELECT1_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_zimbraPrefSkin,label:ZaMsg.LBL_zimbraPrefSkin,labelLocation:_LEFT_,choices:ZaAccountXFormView.themeChoices,visibilityChecks:[ZaAccountXFormView.gotSkins]},{type:_OUTPUT_,ref:ZaAccount.A_zimbraPrefSkin,label:ZaMsg.LBL_zimbraPrefSkin,labelLocation:_LEFT_,visibilityChecks:[ZaAccountXFormView.gotNoSkins]}]},{type:_SPACER_},{type:_SUPER_SELECT_CHECK_,selectRef:ZaAccount.A_zimbraAvailableSkin,ref:ZaAccount.A_zimbraAvailableSkin,choices:ZaAccountXFormView.themeChoices,visibilityChecks:[Case_XFormItem.prototype.isCurrentTab,ZaAccountXFormView.gotSkins],visibilityChangeEventSources:[ZaModel.currentTab],caseKey:u,caseVarRef:ZaModel.currentTab,limitLabel:ZaMsg.NAD_LimitThemesTo},{type:_DWT_ALERT_,colSpan:2,style:DwtAlert.WARNING,iconVisible:true,visibilityChecks:[ZaAccountXFormView.gotNoSkins],value:ZaMsg.ERROR_CANNOT_FIND_SKINS_FOR_ACCOUNT}]})
}if(o){d.push({type:_ZATABCASE_,id:"account_form_zimlets_tab",numCols:1,caseKey:o,items:[{type:_GROUP_,numCols:1,colSizes:["auto"],items:[{type:_SUPER_ZIMLET_SELECT_,selectRef:ZaAccount.A_zimbraZimletAvailableZimlets,ref:ZaAccount.A_zimbraZimletAvailableZimlets,choices:ZaAccountXFormView.zimletChoices,visibilityChecks:[Case_XFormItem.prototype.isCurrentTab],visibilityChangeEventSources:[ZaModel.currentTab],caseKey:o,caseVarRef:ZaModel.currentTab,limitLabel:ZaMsg.NAD_LimitZimletsTo},{type:_DWT_ALERT_,containerCssStyle:"padding-bottom:0",style:DwtAlert.INFO,iconVisible:false,content:ZaMsg.Zimlet_Note}]}]})
}if(m){d.push({type:_ZATABCASE_,id:"account_form_advanced_tab",numCols:1,paddingStyle:"padding-left:15px;",width:"98%",cellpadding:2,caseKey:m,items:[{type:_ZA_TOP_GROUPER_,id:"account_attachment_settings",colSizes:["auto"],numCols:1,label:ZaMsg.NAD_AttachmentsGrouper,visibilityChecks:[[ZATopGrouper_XFormItem.isGroupVisible,[ZaAccount.A_zimbraAttachmentsBlocked]]],items:[{ref:ZaAccount.A_zimbraAttachmentsBlocked,type:_SUPER_CHECKBOX_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.NAD_RemoveAllAttachments,checkBoxLabel:ZaMsg.NAD_RemoveAllAttachments,trueValue:"TRUE",falseValue:"FALSE"}]},{type:_ZA_TOP_GROUPER_,id:"account_quota_settings",colSizes:["auto"],numCols:1,label:ZaMsg.NAD_QuotaGrouper,visibilityChecks:[[ZATopGrouper_XFormItem.isGroupVisible,[ZaAccount.A_zimbraMailForwardingAddressMaxLength,ZaAccount.A_zimbraMailForwardingAddressMaxNumAddrs,ZaAccount.A_zimbraMailQuota,ZaAccount.A_zimbraContactMaxNumEntries,ZaAccount.A_zimbraQuotaWarnPercent,ZaAccount.A_zimbraQuotaWarnInterval,ZaAccount.A_zimbraQuotaWarnMessage]],[XForm.checkInstanceValueNot,ZaAccount.A_zimbraIsExternalVirtualAccount,"TRUE"]],items:[{ref:ZaAccount.A_zimbraMailForwardingAddressMaxLength,type:_SUPER_TEXTFIELD_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.MSG_zimbraMailForwardingAddressMaxLength,colSpan:1,txtBoxLabel:ZaMsg.LBL_zimbraMailForwardingAddressMaxLength,labelLocation:_LEFT_,textFieldCssClass:"admin_xform_number_input"},{ref:ZaAccount.A_zimbraMailForwardingAddressMaxNumAddrs,type:_SUPER_TEXTFIELD_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.MSG_zimbraMailForwardingAddressMaxNumAddrs,colSpan:1,txtBoxLabel:ZaMsg.LBL_zimbraMailForwardingAddressMaxNumAddrs,labelLocation:_LEFT_,textFieldCssClass:"admin_xform_number_input"},{ref:ZaAccount.A_zimbraMailQuota,type:_SUPER_TEXTFIELD_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,colSpan:1,txtBoxLabel:ZaMsg.LBL_zimbraMailQuota,msgName:ZaMsg.MSG_zimbraMailQuota,labelLocation:_LEFT_,textFieldCssClass:"admin_xform_number_input",resetToSuperLabel:ZaMsg.NAD_ResetToCOS},{ref:ZaAccount.A_zimbraContactMaxNumEntries,type:_SUPER_TEXTFIELD_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.MSG_zimbraContactMaxNumEntries,colSpan:1,txtBoxLabel:ZaMsg.LBL_zimbraContactMaxNumEntries,labelLocation:_LEFT_,textFieldCssClass:"admin_xform_number_input"},{ref:ZaAccount.A_zimbraQuotaWarnPercent,type:_SUPER_TEXTFIELD_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,txtBoxLabel:ZaMsg.LBL_zimbraQuotaWarnPercent,colSpan:1,msgName:ZaMsg.MSG_zimbraQuotaWarnPercent,labelLocation:_LEFT_,textFieldCssClass:"admin_xform_number_input",resetToSuperLabel:ZaMsg.NAD_ResetToCOS},{ref:ZaAccount.A_zimbraQuotaWarnInterval,type:_SUPER_LIFETIME_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,colSpan:1,txtBoxLabel:ZaMsg.LBL_zimbraQuotaWarnInterval,msgName:ZaMsg.MSG_zimbraQuotaWarnInterval,labelLocation:_LEFT_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS},{ref:ZaAccount.A_zimbraQuotaWarnMessage,type:_SUPER_TEXTAREA_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,txtBoxLabel:ZaMsg.MSG_zimbraQuotaWarnMessage,msgName:ZaMsg.LBL_zimbraQuotaWarnMessage,colSpan:1,labelCssStyle:"vertical-align:top;",textAreaWidth:"250px",resetToSuperLabel:ZaMsg.NAD_ResetToCOS}]},{type:_ZA_TOP_GROUPER_,id:"account_datasourcepolling_settings",colSizes:["auto"],numCols:1,label:ZaMsg.NAD_DataSourcePolling,visibilityChecks:[[ZATopGrouper_XFormItem.isGroupVisible,[ZaAccount.A_zimbraDataSourceMinPollingInterval,ZaAccount.A_zimbraDataSourcePop3PollingInterval,ZaAccount.A_zimbraDataSourceImapPollingInterval,ZaAccount.A_zimbraDataSourceCalendarPollingInterval,ZaAccount.A_zimbraDataSourceRssPollingInterval,ZaAccount.A_zimbraDataSourceCaldavPollingInterval]]],items:[{ref:ZaAccount.A_zimbraDataSourceMinPollingInterval,type:_SUPER_LIFETIME_,msgName:ZaMsg.MSG_zimbraDataSourceMinPollingInterval,txtBoxLabel:ZaMsg.LBL_zimbraDataSourceMinPollingInterval,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,colSpan:1,nowrap:false,labelWrap:true},{ref:ZaAccount.A_zimbraDataSourcePop3PollingInterval,type:_SUPER_LIFETIME_,sgName:ZaMsg.MSG_zimbraDataSourcePop3PollingInterval,txtBoxLabel:ZaMsg.LBL_zimbraDataSourcePop3PollingInterval,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,colSpan:1,nowrap:false,labelWrap:true},{ref:ZaAccount.A_zimbraDataSourceImapPollingInterval,type:_SUPER_LIFETIME_,msgName:ZaMsg.MSG_zimbraDataSourceImapPollingInterval,txtBoxLabel:ZaMsg.LBL_zimbraDataSourceImapPollingInterval,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,colSpan:1,nowrap:false,labelWrap:true},{ref:ZaAccount.A_zimbraDataSourceCalendarPollingInterval,type:_SUPER_LIFETIME_,msgName:ZaMsg.MSG_zimbraDataSourceCalendarPollingInterval,txtBoxLabel:ZaMsg.LBL_zimbraDataSourceCalendarPollingInterval,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,colSpan:1,nowrap:false,labelWrap:true},{ref:ZaAccount.A_zimbraDataSourceRssPollingInterval,type:_SUPER_LIFETIME_,msgName:ZaMsg.MSG_zimbraDataSourceRssPollingInterval,txtBoxLabel:ZaMsg.LBL_zimbraDataSourceRssPollingInterval,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,colSpan:1,nowrap:false,labelWrap:true},{ref:ZaAccount.A_zimbraDataSourceCaldavPollingInterval,type:_SUPER_LIFETIME_,msgName:ZaMsg.MSG_zimbraDataSourceCaldavPollingInterval,txtBoxLabel:ZaMsg.LBL_zimbraDataSourceCaldavPollingInterval,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,colSpan:1,nowrap:false,labelWrap:true}]},{type:_ZA_TOP_GROUPER_,id:"account_proxyalloweddomain_settings",label:ZaMsg.NAD_ProxyAllowedDomains,visibilityChecks:[[ZATopGrouper_XFormItem.isGroupVisible,[ZaAccount.A_zimbraProxyAllowedDomains]]],items:[{ref:ZaAccount.A_zimbraProxyAllowedDomains,label:ZaMsg.LBL_zimbraProxyAllowedDomains,labelCssStyle:"vertical-align:top;",type:_SUPER_REPEAT_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,repeatInstance:"",colSizes:["275px","*"],addButtonLabel:ZaMsg.NAD_ProxyAddAllowedDomain,removeButtonLabel:ZaMsg.NAD_ProxyRemoveAllowedDomain,showAddButton:true,showRemoveButton:true,showAddOnNextRow:true,repeatItems:[{ref:".",type:_TEXTFIELD_,enableDisableChecks:[ZaItem.hasWritePermission],visibilityChecks:[[ZaItem.hasReadPermission,ZaAccount.A_zimbraProxyAllowedDomains]],enableDisableChecks:[[ZaItem.hasWritePermission,ZaAccount.A_zimbraProxyAllowedDomains]],width:"15em"}]}]},{type:_ZA_TOP_GROUPER_,id:"account_password_settings",colSizes:["auto"],numCols:1,label:ZaMsg.NAD_PasswordGrouper,visibilityChecks:[[ZATopGrouper_XFormItem.isGroupVisible,[ZaAccount.A_zimbraPasswordLocked,ZaAccount.A_zimbraMinPwdLength,ZaAccount.A_zimbraMaxPwdLength,ZaAccount.A_zimbraPasswordMinUpperCaseChars,ZaAccount.A_zimbraPasswordMinLowerCaseChars,ZaAccount.A_zimbraPasswordMinPunctuationChars,ZaAccount.A_zimbraPasswordMinNumericChars,ZaAccount.A_zimbraPasswordMinDigitsOrPuncs,ZaAccount.A_zimbraMinPwdAge,ZaAccount.A_zimbraMaxPwdAge,ZaAccount.A_zimbraEnforcePwdHistory,ZaAccount.A_zimbraPasswordBlockCommonEnabled]]],items:[{type:_DWT_ALERT_,containerCssStyle:"padding-bottom:0;",colSpan:3,style:DwtAlert.INFO,iconVisible:(!ZaAccountXFormView.isAuthfromInternal(e.name)),content:((ZaAccountXFormView.isAuthfromInternal(e.name))?ZaMsg.Alert_InternalPassword:ZaMsg.Alert_ExternalPassword)},{ref:ZaAccount.A_zimbraPasswordLocked,type:_SUPER_CHECKBOX_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.NAD_PwdLocked,checkBoxLabel:ZaMsg.NAD_PwdLocked,trueValue:"TRUE",falseValue:"FALSE",visibilityChecks:[],enableDisableChecks:[[ZaAccountXFormView.isAuthfromInternalSync,e.name,ZaAccount.A_name]]},{ref:ZaAccount.A_zimbraMinPwdLength,type:_SUPER_TEXTFIELD_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.MSG_zimbraMinPwdLength,txtBoxLabel:ZaMsg.LBL_zimbraMinPwdLength,labelLocation:_LEFT_,textFieldCssClass:"admin_xform_number_input",visibilityChecks:[],enableDisableChecks:[[ZaAccountXFormView.isAuthfromInternalSync,e.name,ZaAccount.A_name]]},{ref:ZaAccount.A_zimbraMaxPwdLength,type:_SUPER_TEXTFIELD_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.MSG_zimbraMaxPwdLength,txtBoxLabel:ZaMsg.LBL_zimbraMaxPwdLength,labelLocation:_LEFT_,textFieldCssClass:"admin_xform_number_input",visibilityChecks:[],enableDisableChecks:[[ZaAccountXFormView.isAuthfromInternalSync,e.name,ZaAccount.A_name]]},{ref:ZaAccount.A_zimbraPasswordMinUpperCaseChars,type:_SUPER_TEXTFIELD_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.MSG_zimbraPasswordMinUpperCaseChars,txtBoxLabel:ZaMsg.LBL_zimbraPasswordMinUpperCaseChars,labelLocation:_LEFT_,textFieldCssClass:"admin_xform_number_input",visibilityChecks:[],enableDisableChecks:[[ZaAccountXFormView.isAuthfromInternalSync,e.name,ZaAccount.A_name]]},{ref:ZaAccount.A_zimbraPasswordMinLowerCaseChars,type:_SUPER_TEXTFIELD_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.MSG_zimbraPasswordMinLowerCaseChars,txtBoxLabel:ZaMsg.LBL_zimbraPasswordMinLowerCaseChars,labelLocation:_LEFT_,textFieldCssClass:"admin_xform_number_input",visibilityChecks:[],enableDisableChecks:[[ZaAccountXFormView.isAuthfromInternalSync,e.name,ZaAccount.A_name]]},{ref:ZaAccount.A_zimbraPasswordMinPunctuationChars,type:_SUPER_TEXTFIELD_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.MSG_zimbraPasswordMinPunctuationChars,txtBoxLabel:ZaMsg.LBL_zimbraPasswordMinPunctuationChars,labelLocation:_LEFT_,textFieldCssClass:"admin_xform_number_input",visibilityChecks:[],enableDisableChecks:[[ZaAccountXFormView.isAuthfromInternalSync,e.name,ZaAccount.A_name]]},{ref:ZaAccount.A_zimbraPasswordMinNumericChars,type:_SUPER_TEXTFIELD_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.MSG_zimbraPasswordMinNumericChars,txtBoxLabel:ZaMsg.LBL_zimbraPasswordMinNumericChars,labelLocation:_LEFT_,textFieldCssClass:"admin_xform_number_input",visibilityChecks:[],enableDisableChecks:[[ZaAccountXFormView.isAuthfromInternalSync,e.name,ZaAccount.A_name]]},{ref:ZaAccount.A_zimbraPasswordMinDigitsOrPuncs,type:_SUPER_TEXTFIELD_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.MSG_zimbraPasswordMinDigitsOrPuncs,txtBoxLabel:ZaMsg.LBL_zimbraPasswordMinDigitsOrPuncs,labelLocation:_LEFT_,textFieldCssClass:"admin_xform_number_input",visibilityChecks:[],enableDisableChecks:[[ZaAccountXFormView.isAuthfromInternalSync,e.name,ZaAccount.A_name]]},{ref:ZaAccount.A_zimbraMinPwdAge,type:_SUPER_TEXTFIELD_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.MSG_passMinAge,txtBoxLabel:ZaMsg.LBL_passMinAge,labelLocation:_LEFT_,textFieldCssClass:"admin_xform_number_input",visibilityChecks:[],enableDisableChecks:[[ZaAccountXFormView.isAuthfromInternalSync,e.name,ZaAccount.A_name]]},{ref:ZaAccount.A_zimbraMaxPwdAge,type:_SUPER_TEXTFIELD_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.MSG_passMaxAge,txtBoxLabel:ZaMsg.LBL_passMaxAge,labelLocation:_LEFT_,textFieldCssClass:"admin_xform_number_input",visibilityChecks:[],enableDisableChecks:[[ZaAccountXFormView.isAuthfromInternalSync,e.name,ZaAccount.A_name]]},{ref:ZaAccount.A_zimbraEnforcePwdHistory,type:_SUPER_TEXTFIELD_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.MSG_zimbraEnforcePwdHistory,txtBoxLabel:ZaMsg.LBL_zimbraEnforcePwdHistory,labelLocation:_LEFT_,textFieldCssClass:"admin_xform_number_input",visibilityChecks:[],enableDisableChecks:[[ZaAccountXFormView.isAuthfromInternalSync,e.name,ZaAccount.A_name]]},{ref:ZaAccount.A_zimbraPasswordBlockCommonEnabled,type:_SUPER_CHECKBOX_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.NAD_RejectCommonPwd,checkBoxLabel:ZaMsg.NAD_RejectCommonPwd,trueValue:"TRUE",falseValue:"FALSE",visibilityChecks:[],enableDisableChecks:[[ZaAccountXFormView.isAuthfromInternalSync,e.name,ZaAccount.A_name]]}]},{type:_ZA_TOP_GROUPER_,id:"password_lockout_settings",colSizes:["auto"],numCols:1,label:ZaMsg.NAD_FailedLoginGrouper,visibilityChecks:[[ZATopGrouper_XFormItem.isGroupVisible,[ZaAccount.A_zimbraPasswordLockoutEnabled,ZaAccount.A_zimbraPasswordLockoutMaxFailures,ZaAccount.A_zimbraPasswordLockoutDuration,ZaAccount.A_zimbraPasswordLockoutFailureLifetime]]],items:[{ref:ZaAccount.A_zimbraPasswordLockoutEnabled,type:_SUPER_CHECKBOX_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_zimbraPasswordLockoutEnabled,colSpan:1,checkBoxLabel:ZaMsg.LBL_zimbraPasswordLockoutEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaAccount.A_zimbraPasswordLockoutMaxFailures,type:_SUPER_TEXTFIELD_,enableDisableChecks:[[XForm.checkInstanceValue,ZaAccount.A_zimbraPasswordLockoutEnabled,"TRUE"]],enableDisableChangeEventSources:[ZaAccount.A_zimbraPasswordLockoutEnabled,ZaAccount.A_COSId],txtBoxLabel:ZaMsg.LBL_zimbraPasswordLockoutMaxFailures,toolTipContent:ZaMsg.TTP_zimbraPasswordLockoutMaxFailuresSub,msgName:ZaMsg.MSG_zimbraPasswordLockoutMaxFailures,labelLocation:_LEFT_,colSpan:1,textFieldCssClass:"admin_xform_number_input",resetToSuperLabel:ZaMsg.NAD_ResetToCOS},{ref:ZaAccount.A_zimbraPasswordLockoutDuration,type:_SUPER_LIFETIME_,colSpan:1,enableDisableChecks:[[XForm.checkInstanceValue,ZaAccount.A_zimbraPasswordLockoutEnabled,"TRUE"]],enableDisableChangeEventSources:[ZaAccount.A_zimbraPasswordLockoutEnabled,ZaAccount.A_COSId],txtBoxLabel:ZaMsg.LBL_zimbraPasswordLockoutDuration,toolTipContent:ZaMsg.TTP_zimbraPasswordLockoutDurationSub,msgName:ZaMsg.MSG_zimbraPasswordLockoutDuration,textFieldCssClass:"admin_xform_number_input",resetToSuperLabel:ZaMsg.NAD_ResetToCOS},{ref:ZaAccount.A_zimbraPasswordLockoutFailureLifetime,type:_SUPER_LIFETIME_,colSpan:1,enableDisableChecks:[[XForm.checkInstanceValue,ZaAccount.A_zimbraPasswordLockoutEnabled,"TRUE"]],enableDisableChangeEventSources:[ZaAccount.A_zimbraPasswordLockoutEnabled,ZaAccount.A_COSId],txtBoxLabel:ZaMsg.LBL_zimbraPasswordLockoutFailureLifetime,toolTipContent:ZaMsg.TTP_zimbraPasswordLockoutFailureLifetimeSub,msgName:ZaMsg.MSG_zimbraPasswordLockoutFailureLifetime,textFieldCssClass:"admin_xform_number_input",resetToSuperLabel:ZaMsg.NAD_ResetToCOS,labelCssStyle:"white-space:normal;border-right:1px solid;",nowrap:false,labelWrap:true}]},{type:_ZA_TOP_GROUPER_,colSizes:["auto"],numCols:1,label:ZaMsg.NAD_TimeoutGrouper,id:"timeout_settings",visibilityChecks:[[ZATopGrouper_XFormItem.isGroupVisible,[ZaAccount.A_zimbraAdminAuthTokenLifetime,ZaAccount.A_zimbraAuthTokenLifetime,ZaAccount.A_zimbraMailIdleSessionTimeout,ZaAccount.A_zimbraDumpsterUserVisibleAge]]],items:[{ref:ZaAccount.A_zimbraAdminAuthTokenLifetime,type:_SUPER_LIFETIME_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.MSG_zimbraAdminAuthTokenLifetime,txtBoxLabel:ZaMsg.LBL_zimbraAdminAuthTokenLifetime,enableDisableChecks:[ZaAccount.isAdminAccount],enableDisableChangeEventSources:[ZaAccount.A_zimbraIsAdminAccount,ZaAccount.A_zimbraIsDelegatedAdminAccount]},{ref:ZaAccount.A_zimbraAuthTokenLifetime,type:_SUPER_LIFETIME_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.MSG_zimbraAuthTokenLifetime,txtBoxLabel:ZaMsg.LBL_zimbraAuthTokenLifetime},{ref:ZaAccount.A_zimbraMailIdleSessionTimeout,type:_SUPER_LIFETIME_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.MSG_zimbraMailIdleSessionTimeout,txtBoxLabel:ZaMsg.LBL_zimbraMailIdleSessionTimeout},{ref:ZaAccount.A_zimbraDumpsterUserVisibleAge,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,type:_SUPER_LIFETIME_,msgName:ZaMsg.MSG_zimbraDumpsterUserVisibleAge,txtBoxLabel:ZaMsg.LBL_zimbraDumpsterUserVisibleAge,visibilityChecks:[[ZaItem.hasReadPermission],[XForm.checkInstanceValue,ZaAccount.A_zimbraDumpsterEnabled,"TRUE"]],visibilityChangeEventSources:[ZaAccount.A_zimbraDumpsterEnabled]}]},{type:_ZA_TOP_GROUPER_,colSizes:["auto"],numCols:1,visibilityChecks:[[ZATopGrouper_XFormItem.isGroupVisible,[ZaAccount.A_zimbraMailMessageLifetime,ZaAccount.A_zimbraMailTrashLifetime,ZaAccount.A_zimbraMailSpamLifetime,ZaAccount.A_zimbraMailDumpsterLifetime]],[XForm.checkInstanceValueNot,ZaAccount.A_zimbraIsExternalVirtualAccount,"TRUE"],[ZaAccount.isEmailRetentionPolicyEnabled]],label:ZaMsg.NAD_MailRetentionGrouper,id:"mailretention_settings",items:[{type:_DWT_ALERT_,containerCssStyle:"padding:0 10px 10px;width:100%;",style:DwtAlert.INFO,iconVisible:false,content:ZaMsg.Alert_EnableMailRetention},{ref:ZaAccount.A_zimbraMailMessageLifetime,type:_SUPER_LIFETIME2_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.MSG_zimbraMailMessageLifetime,txtBoxLabel:ZaMsg.LBL_zimbraMailMessageLifetime,visibilityChecks:[[ZaItem.hasReadPermission],[ZaAccount.isEmailRetentionPolicyEnabled]],visibilityChangeEventSources:[ZaAccount.A_mailHost],labelCssStyle:"border-right:1px solid;",labelCssClass:"gridGroupBodyLabel"},{ref:ZaAccount.A_zimbraMailTrashLifetime,type:_SUPER_LIFETIME1_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.MSG_zimbraMailTrashLifetime,txtBoxLabel:ZaMsg.LBL_zimbraMailTrashLifetime,visibilityChecks:[[ZaItem.hasReadPermission],[ZaAccount.isEmailRetentionPolicyEnabled]],visibilityChangeEventSources:[ZaAccount.A_mailHost],labelCssStyle:"padding-left:10px; text-align:left; border-right:1px solid;",labelCssClass:"gridGroupBodyLabel"},{ref:ZaAccount.A_zimbraMailSpamLifetime,type:_SUPER_LIFETIME1_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.MSG_zimbraMailSpamLifetime,txtBoxLabel:ZaMsg.LBL_zimbraMailSpamLifetime,visibilityChecks:[[ZaItem.hasReadPermission],[ZaAccount.isEmailRetentionPolicyEnabled]],visibilityChangeEventSources:[ZaAccount.A_mailHost],labelCssStyle:"padding-left:10px; text-align:left; border-right:1px solid;",labelCssClass:"gridGroupBodyLabel"},{ref:ZaAccount.A_zimbraMailDumpsterLifetime,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,type:_SUPER_LIFETIME1_,msgName:ZaMsg.MSG_zimbraMailDumpsterLifetime,txtBoxLabel:ZaMsg.LBL_zimbraMailDumpsterLifetime,labelCssStyle:"padding-left:10px; text-align:left;border-right:1px solid;",labelCssClass:"gridGroupBodyLabel",visibilityChecks:[[ZaItem.hasReadPermission],[ZaAccount.isEmailRetentionPolicyEnabled],[XForm.checkInstanceValue,ZaAccount.A_zimbraDumpsterEnabled,"TRUE"],[XForm.checkInstanceValue,ZaAccount.A_zimbraDumpsterPurgeEnabled,"TRUE"]],visibilityChangeEventSources:[ZaAccount.A_zimbraDumpsterEnabled,ZaAccount.A_zimbraDumpsterPurgeEnabled]}]},{type:_ZA_TOP_GROUPER_,label:ZaMsg.NAD_InteropGrouper,id:"interop_settings",visibilityChecks:[[ZATopGrouper_XFormItem.isGroupVisible,[ZaAccount.A_zimbraFreebusyExchangeUserOrg]]],items:[{ref:ZaAccount.A_zimbraFreebusyExchangeUserOrg,type:_SUPER_TEXTFIELD_,textFieldWidth:"220px",resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_zimbraFreebusyExchangeUserOrg,txtBoxLabel:ZaMsg.LBL_zimbraFreebusyExchangeUserOrg,labelLocation:_LEFT_,textFieldCssClass:"admin_xform_number_input"}]},{type:_ZA_TOP_GROUPER_,label:ZaMsg.NAD_MailTransportGrouper,id:"mailtransport_setting",colSizes:["275px","*"],numCols:2,visibilityChecks:[[ZATopGrouper_XFormItem.isGroupVisible,[ZaAccount.A_zimbraMailTransport,ZaAccount.A_zimbraMailCanonicalAddress]]],items:[{type:_OUTPUT_,ref:".",label:"",labelLocation:_LEFT_,value:ZaMsg.MSG_MailTransportMessage},{ref:ZaAccount.A_zimbraMailTransport,type:_TEXTFIELD_,msgName:ZaMsg.NAD_MailTransport,label:ZaMsg.NAD_MailTransport,labelLocation:_LEFT_,cssClass:"admin_xform_name_input",width:220},{type:_DWT_ALERT_,content:ZaMsg.CannonicalWarning,visibilityChecks:[[ZaItem.hasWritePermission,ZaAccount.A_zimbraMailCanonicalAddress]],visibilityChangeEventSources:[ZaAccount.A_zimbraMailCanonicalAddress],containerCssStyle:"width:400px;",style:DwtAlert.WARNING,iconVisible:true},{ref:ZaAccount.A_zimbraMailCanonicalAddress,type:_TEXTFIELD_,msgName:ZaMsg.NAD_CanonicalFrom,label:ZaMsg.NAD_CanonicalFrom,labelLocation:_LEFT_,cssClass:"admin_xform_name_input",width:220}]},{type:_ZA_TOP_GROUPER_,label:ZaMsg.NAD_LegalInterceptGrouper,id:"legalintercept_setting",colSizes:["275px","*"],numCols:2,visibilityChecks:[[ZATopGrouper_XFormItem.isGroupVisible,[ZaAccount.A_zimbraInterceptAddress,ZaAccount.A_zimbraInterceptSendHeadersOnly]]],items:[{ref:ZaAccount.A_zimbraInterceptAddress,type:_TEXTFIELD_,labelLocation:_LEFT_,cssClass:"admin_xform_name_input",width:220,label:ZaMsg.LBL_zimbraInterceptAddress,visibilityChecks:[[ZaItem.hasWritePermission,ZaAccount.A_zimbraInterceptAddress]]},{ref:ZaAccount.A_zimbraInterceptSendHeadersOnly,type:_ZA_CHECKBOX_,label:ZaMsg.LBL_zimbraInterceptSendHeadersOnly,trueValue:"TRUE",falseValue:"FALSE"}]},{type:_SPACER_,height:"10px"}]})
}x.tableCssStyle="width:100%;";
x.items=[{type:_GROUP_,cssClass:"ZmSelectedHeaderBg",colSpan:"*",id:"xform_header",items:[{type:_GROUP_,numCols:4,width:"100%",colSizes:["60px","*","80px","*"],items:f}]},{type:_TAB_BAR_,ref:ZaModel.currentTab,choices:this.tabChoices,cssClass:"ZaTabBar",cssStyle:"display:none;",id:"xform_tabbar"},{type:_SWITCH_,align:_LEFT_,valign:_TOP_,items:d}]
};
ZaTabView.XFormModifiers.ZaAccountXFormView.push(ZaAccountXFormView.myXFormModifier);
ZaAccountXFormView.prototype.getTabChoices=function(){return this.tabChoices
};
ZaAccountXFormView.getEmailFromUid=function(b){if(b){let email="";
let managerLdapArray=b.split(",");
const c=managerLdapArray[0].split("uid=");
if(c.length!==2){return""
}email=c[1];
managerLdapArray=managerLdapArray.filter(function(d){return d.includes("dc=")
});
managerLdapArray=managerLdapArray.map(function(d){const e=d.split("=");
return e.length===2?d.split("=")[1]:""
});
email=email+"@"+managerLdapArray.join(".");
return email
}}
}if(AjxPackage.define("zimbraAdmin.accounts.view.ZaAccChangePwdXDlg")){ZaAccChangePwdXDlg=function(d,b,c){if(arguments.length==0){return
}this._standardButtons=[DwtDialog.CANCEL_BUTTON,DwtDialog.OK_BUTTON];
ZaXDialog.call(this,d,null,ZaMsg.CHNP_Title,b,c,"ZaAccChangePwdXDlg");
this.initForm(ZaAccount.myXModel,this.getMyXForm());
this._helpURL=[location.pathname,ZaUtil.HELP_URL,ZaAccChangePwdXDlg.helpURL,"?locid=",AjxEnv.DEFAULT_LOCALE].join("")
};
ZaAccChangePwdXDlg.prototype=new ZaXDialog;
ZaAccChangePwdXDlg.prototype.constructor=ZaAccChangePwdXDlg;
ZaAccChangePwdXDlg.helpURL="passwords/setting_passwords.htm";
ZaAccChangePwdXDlg.prototype.getPassword=function(){return this._localXForm.getInstance().attrs[ZaAccount.A_password]
};
ZaAccChangePwdXDlg.prototype.getConfirmPassword=function(){return this._localXForm.getInstance()[ZaAccount.A2_confirmPassword]
};
ZaAccChangePwdXDlg.prototype.getMustChangePassword=function(){return this._localXForm.getInstance().attrs[ZaAccount.A_zimbraPasswordMustChange]
};
ZaAccChangePwdXDlg.prototype.getMyXForm=function(){var b={numCols:2,items:[{type:_GROUP_,isTabGroup:true,items:[{ref:ZaAccount.A_password,type:_SECRET_,msgName:ZaMsg.NAD_Password,label:ZaMsg.NAD_Password,labelLocation:_LEFT_,cssClass:"admin_xform_name_input",visibilityChecks:[],enableDisableChecks:[]},{ref:ZaAccount.A2_confirmPassword,type:_SECRET_,msgName:ZaMsg.NAD_ConfirmPassword,label:ZaMsg.NAD_ConfirmPassword,labelLocation:_LEFT_,cssClass:"admin_xform_name_input",visibilityChecks:[],enableDisableChecks:[]},{ref:ZaAccount.A_zimbraPasswordMustChange,type:_WIZ_CHECKBOX_,msgName:ZaMsg.NAD_MustChangePwd,label:ZaMsg.NAD_MustChangePwd,trueValue:"TRUE",falseValue:"FALSE"}]}]};
return b
}
}if(AjxPackage.define("zimbraAdmin.accounts.view.ZaEditAliasXDialog")){ZaEditAliasXDialog=function(d,b,c,e){if(arguments.length==0){return
}this._standardButtons=[DwtDialog.OK_BUTTON,DwtDialog.CANCEL_BUTTON];
ZaXDialog.call(this,d,null,e,b,c,null,ZaId.DLG_EDIT_ALIAS);
this._containedObject={};
this.initForm(ZaAlias.myXModel,this.getMyXForm());
this._helpURL=ZaEditAliasXDialog.helpURL
};
ZaEditAliasXDialog.prototype=new ZaXDialog;
ZaEditAliasXDialog.prototype.constructor=ZaEditAliasXDialog;
ZaEditAliasXDialog.helpURL=location.pathname+ZaUtil.HELP_URL+"managing_accounts/creating_a_mail_aliases.htm?locid="+AjxEnv.DEFAULT_LOCALE;
ZaEditAliasXDialog.prototype.getMyXForm=function(){var b={numCols:1,items:[{type:_GROUP_,isTabGroup:true,items:[{ref:ZaAccount.A_name,type:_EMAILADDR_,label:null,visibilityChecks:[],enableDisableChecks:[]}]}]};
return b
};
ZaNewAliasXDialog=function(d,b,c,e){if(arguments.length==0){return
}this._standardButtons=[DwtDialog.OK_BUTTON,DwtDialog.CANCEL_BUTTON];
ZaXDialog.call(this,d,null,e,b,c,null,ZaId.DLG_NEW_ALIAS);
this._containedObject={};
this.initForm(ZaAlias.myXModel,this.getMyXForm());
this._helpURL=ZaNewAliasXDialog.helpURL
};
ZaNewAliasXDialog.prototype=new ZaXDialog;
ZaNewAliasXDialog.prototype.constructor=ZaNewAliasXDialog;
ZaNewAliasXDialog.prototype.supportMinimize=true;
ZaNewAliasXDialog.helpURL=location.pathname+ZaUtil.HELP_URL+"managing_accounts/creating_a_mail_aliases.htm?locid="+AjxEnv.DEFAULT_LOCALE;
ZaNewAliasXDialog.prototype.getCacheName=function(){return"newAliasDialog"
};
ZaNewAliasXDialog.prototype.setObject=function(b){this._containedObject=b;
this._containedObject._uuid=this._containedObject._uuid||ZaUtil.getItemUUid();
this._localXForm.setInstance(this._containedObject)
};
ZaNewAliasXDialog.prototype.getMyXForm=function(){var b={numCols:1,items:[{type:_GROUP_,isTabGroup:true,items:[{ref:ZaAccount.A_name,type:_EMAILADDR_,label:ZaMsg.Alias_Dlg_label_alias,visibilityChecks:[],enableDisableChecks:[]},{type:_DYNSELECT_,ref:ZaAlias.A_targetAccount,dataFetcherClass:ZaSearch,dataFetcherMethod:ZaSearch.prototype.dynSelectSearch,dataFetcherTypes:[ZaSearch.ACCOUNTS,ZaSearch.RESOURCES,ZaSearch.DLS],dataFetcherAttrs:[ZaItem.A_zimbraId,ZaItem.A_cn,ZaAccount.A_name,ZaAccount.A_displayname,ZaAccount.A_mail],label:ZaMsg.Alias_Dlg_label_target_acct,labelLocation:_LEFT_,width:"100%",inputWidth:"100%",editable:true,forceUpdate:true,choices:new XFormChoices([],XFormChoices.OBJECT_REFERENCE_LIST,"name","name"),visibilityChecks:[],enableDisableChecks:[],onChange:function(e,d,c){if(e instanceof ZaItem){this.setInstanceValue(e.name)
}else{this.setInstanceValue(e)
}},autoCompleteEnabled:true}]}]};
return b
}
}if(AjxPackage.define("zimbraAdmin.accounts.view.ZaEditFwdAddrXDialog")){ZaEditFwdAddrXDialog=function(d,b,c,e){if(arguments.length==0){return
}this._standardButtons=[DwtDialog.OK_BUTTON,DwtDialog.CANCEL_BUTTON];
ZaXDialog.call(this,d,null,e,b,c);
this._helpURL=location.pathname+ZaUtil.HELP_URL+"managing_accounts/forwarding_mail.htm?locid="+AjxEnv.DEFAULT_LOCALE;
this._containedObject={};
this.initForm(ZaAlias.myXModel,this.getMyXForm())
};
ZaEditFwdAddrXDialog.prototype=new ZaXDialog;
ZaEditFwdAddrXDialog.prototype.constructor=ZaEditFwdAddrXDialog;
ZaEditFwdAddrXDialog.prototype.getMyXForm=function(){var b={numCols:1,items:[{type:_GROUP_,isTabGroup:true,items:[{ref:ZaAccount.A_name,type:_TEXTFIELD_,label:ZaMsg.Enter_EmailAddr,width:230,visibilityChecks:[],enableDisableChecks:[]}]}]};
return b
}
}if(AjxPackage.define("zimbraAdmin.accounts.view.ZaEditFpXDialog")){ZaEditFpXDialog=function(d,b,c,e){if(arguments.length==0){return
}this._standardButtons=[DwtDialog.OK_BUTTON,DwtDialog.CANCEL_BUTTON];
ZaXDialog.call(this,d,null,e,b,c);
this._helpURL=location.pathname+ZaUtil.HELP_URL+"managing_global_settings/making_free_busy_view__available_.htm?locid="+AjxEnv.DEFAULT_LOCALE;
ZaFp.getProviders();
this._containedObject={};
this.initForm(ZaFp.getXModel(),this.getMyXForm())
};
ZaEditFpXDialog.prototype=new ZaXDialog;
ZaEditFpXDialog.prototype.constructor=ZaEditFpXDialog;
ZaEditFpXDialog.prototype.getMyXForm=function(){var b={numCols:1,items:[{type:_GROUP_,isTabGroup:true,items:[{ref:ZaFp.A_prefix,type:_OSELECT1_,choices:ZaFp.INTEROP_PROVIDER_CHOICES,label:ZaMsg.Select_Interop_Provider,width:230,visibilityChecks:[],enableDisableChecks:[]},{ref:ZaFp.A_name,type:_TEXTFIELD_,label:ZaMsg.Enter_ForeignAccount,width:230,visibilityChecks:[],enableDisableChecks:[]}]}]};
return b
}
}if(AjxPackage.define("zimbraAdmin.accounts.view.ZaAccountListView")){ZaAccountListView=function(g,f){var e=null;
var d=DwtControl.ABSOLUTE_STYLE;
this._listType=f;
var c=this._getHeaderList();
var b;
if(!this._listType||this._listType==ZaItem.ACCOUNT){b=ZaId.TAB_ACCT_MANAGE
}else{if(this._listType==ZaItem.ALIAS){b=ZaId.TAB_ALIAS_MANAGE
}else{if(this._listType==ZaItem.DL){b=ZaId.TAB_DL_MANAGE
}else{if(this._listType==ZaItem.RESOURCE){b=ZaId.TAB_RES_MANAGE
}else{b=ZaId.TAB_UNDEF
}}}}ZaListView.call(this,{parent:g,className:e,posStyle:d,headerList:c,id:b,scrollLoading:true});
this._appCtxt=this.shell.getData(ZaAppCtxt.LABEL);
this._domains={}
};
ZaAccountListView.prototype=new ZaListView;
ZaAccountListView.prototype.constructor=ZaAccountListView;
ZaAccountListView.prototype.toString=function(){return"ZaAccountListView"
};
ZaAccountListView.prototype.getTitle=function(){var b=ZaMsg.Addresses_view_title;
var c=ZaApp.getInstance().getControllerById(this.__internalId);
switch(c._defaultType){case ZaItem.DL:b=ZaMsg.DL_view_title;
break;
case ZaItem.ALIAS:b=ZaMsg.Aliases_view_title;
break;
case ZaItem.RESOURCE:b=ZaMsg.Resourse_view_title;
break;
default:b=ZaMsg.Accounts_view_title
}return b
};
ZaAccountListView.prototype.getTabIcon=function(){var b=null;
var c=ZaApp.getInstance().getControllerById(this.__internalId);
switch(c._defaultType){case ZaItem.DL:b="DistributionList";
break;
case ZaItem.ALIAS:b="AccountAlias";
break;
case ZaItem.RESOURCE:b="Resource";
break;
default:b="Account"
}return b
};
ZaAccountListView.prototype._createItemHtml=function(m,d,j){var l=new Array(50);
var c=document.createElement("div");
c[DwtListView._STYLE_CLASS]="Row";
c[DwtListView._SELECTED_STYLE_CLASS]=c[DwtListView._STYLE_CLASS]+"-"+DwtCssStyle.SELECTED;
c.className=c[DwtListView._STYLE_CLASS];
this.associateItemWithElement(m,c,DwtListView.TYPE_LIST_ITEM);
var p=0;
l[p++]="<table width='100%' cellspacing='0' cellpadding='0'>";
l[p++]="<tr>";
var e=this._headerList.length;
var n=Dwt.getNextId();
var g=this._listType;
for(var k=0;
k<e;
k++){var o=this._headerList[k]._field;
var f=this._getCellWidth(k,{});
if(o=="type"){l[p++]='<td id="'+g+"_data_type_"+n+'" width='+f+">";
switch(m.type){case ZaItem.ACCOUNT:if(m.attrs[ZaAccount.A_zimbraIsAdminAccount]=="TRUE"){l[p++]=AjxImg.getImageHtml("AdminUser")
}else{if(m.attrs[ZaAccount.A_zimbraIsDelegatedAdminAccount]=="TRUE"){l[p++]=AjxImg.getImageHtml("DomainAdminUser")
}else{if(m.attrs[ZaAccount.A_zimbraIsSystemAccount]=="TRUE"){l[p++]=AjxImg.getImageHtml("SpecialAccount")
}else{if(m.attrs[ZaAccount.A_zimbraIsSystemResource]=="TRUE"){l[p++]=AjxImg.getImageHtml("SystemResource")
}else{if(m.attrs[ZaAccount.A_zimbraIsExternalVirtualAccount]=="TRUE"){l[p++]=AjxImg.getImageHtml("AccountExternalVirtual")
}else{if(m.isExternal){l[p++]=AjxImg.getImageHtml("AccountIMAP")
}else{l[p++]=AjxImg.getImageHtml("Account")
}}}}}}break;
case ZaItem.DL:if(m.attrs[ZaDistributionList.A_isAdminGroup]=="TRUE"){l[p++]=AjxImg.getImageHtml("DistributionListGroup")
}else{l[p++]=AjxImg.getImageHtml("DistributionList")
}break;
case ZaItem.ALIAS:l[p++]=AjxImg.getImageHtml("AccountAlias");
break;
case ZaItem.RESOURCE:if(m.attrs[ZaResource.A_zimbraCalResType]==ZaResource.RESOURCE_TYPE_LOCATION){l[p++]=AjxImg.getImageHtml("Location")
}else{l[p++]=AjxImg.getImageHtml("Resource")
}break;
default:l[p++]=m.type;
break
}l[p++]="</td>"
}else{if(o==ZaAccount.A_name){l[p++]='<td id="'+g+"_data_emailaddress_"+n+'" nowrap width='+f+"><nobr>";
l[p++]=AjxStringUtil.htmlEncode(m.name);
l[p++]="</nobr></td>"
}else{if(o==ZaAccount.A_displayname){l[p++]='<td id="'+g+"_data_displayname_"+n+'" nowrap width='+f+"><nobr>";
l[p++]=AjxStringUtil.htmlEncode(m.attrs[ZaAccount.A_displayname]);
l[p++]="</nobr></td>"
}else{if(o==ZaAccount.A_accountStatus){l[p++]='<td id="'+g+"_data_status_"+n+'" width='+f+"><nobr>";
var h="";
if(m.type==ZaItem.ACCOUNT){h=ZaAccount._accountStatus(m.attrs[ZaAccount.A_accountStatus])
}else{if(m.type==ZaItem.DL){h=ZaDistributionList.getDLStatus(m.attrs.zimbraMailStatus)
}else{if(m.type==ZaItem.RESOURCE){h=ZaResource.getAccountStatusLabel(m.attrs[ZaAccount.A_accountStatus])
}}}l[p++]=h;
l[p++]="</nobr></td>"
}else{if(o==ZaAccount.A_zimbraLastLogonTimestamp){l[p++]='<td id="'+g+"_data_lastlogontime_"+n+'" nowrap width='+f+"><nobr>";
l[p++]=AjxStringUtil.htmlEncode(ZaAccount.getLastLoginTime(m.attrs[ZaAccount.A_zimbraLastLogonTimestamp]));
l[p++]="</nobr></td>"
}else{if(o==ZaAccount.A_description){l[p++]='<td id="'+g+"_data_description_"+n+'" width='+f+"><nobr>";
l[p++]=AjxStringUtil.htmlEncode(ZaItem.getDescriptionValue(m.attrs[ZaAccount.A_description]));
l[p++]="</nobr></td>"
}else{if(o=="target"+ZaAlias.A_targetType){l[p++]='<td id="'+g+"_data_targettype_"+n+'" width='+f+"><nobr>";
var b=m.attrs[ZaAlias.A_targetType];
var q;
if(b==ZaItem.ACCOUNT){q=ZaMsg.aliasTargetTypeAccount
}else{if(b==ZaItem.DL){q=ZaMsg.aliasTargetTypeDL
}else{if(b=ZaItem.RESOURCE){q=ZaMsg.aliasTargetTypeResource
}}}l[p++]=AjxStringUtil.htmlEncode(q);
l[p++]="</nobr></td>"
}else{if(o==ZaAlias.A_targetAccount){l[p++]='<td id="'+g+"_data_targetaccount_"+n+'" width='+f+"><nobr>";
l[p++]=AjxStringUtil.htmlEncode(m.attrs[ZaAlias.A_targetAccount]);
l[p++]="</nobr></td>"
}}}}}}}}}l[p++]="</tr></table>";
c.innerHTML=l.join("");
return c
};
ZaAccountListView.prototype._getHeaderList=function(d){var b=new Array();
var e=1;
var c=0;
b[c++]=new ZaListHeaderItem("type",null,null,"22px",null,"objectClass",false,true);
this._defaultColumnSortable=e;
b[c++]=new ZaListHeaderItem(ZaAccount.A_name,ZaMsg.ALV_Name_col,null,"210px",e++,ZaAccount.A_name,true,true);
if(this._listType){if(this._listType==ZaItem.ALIAS){b[c++]=new ZaListHeaderItem(ZaAlias.A_targetAccount,ZaMsg.ALV_TargetName_col,null,"210px",e++,ZaAlias.A_targetAccount,true,true);
b[c++]=new ZaListHeaderItem("target"+ZaAlias.A_targetType,ZaMsg.ALV_TargetType_col,null,"200px",e++,ZaAlias.A_targetType,true,true)
}else{b[c++]=new ZaListHeaderItem(ZaAccount.A_displayname,ZaMsg.ALV_DspName_col,null,"210px",e++,ZaAccount.A_displayname,true,true);
if(this._listType==ZaItem.DL){b[c++]=new ZaListHeaderItem(ZaAccount.A_accountStatus,ZaMsg.ALV_Status_col,null,"120px",null,ZaAccount.A_accountStatus,true,true)
}else{b[c++]=new ZaListHeaderItem(ZaAccount.A_accountStatus,ZaMsg.ALV_Status_col,null,"120px",e++,ZaAccount.A_accountStatus,true,true)
}b[c++]=new ZaListHeaderItem(ZaAccount.A_zimbraLastLogonTimestamp,ZaMsg.ALV_Last_Login,null,"195px",e++,ZaAccount.A_zimbraLastLogonTimestamp,true,true)
}}else{b[c++]=new ZaListHeaderItem(ZaAccount.A_displayname,ZaMsg.ALV_DspName_col,null,"210px",e++,ZaAccount.A_displayname,true,true);
b[c++]=new ZaListHeaderItem(ZaAccount.A_accountStatus,ZaMsg.ALV_Status_col,null,"120px",e++,ZaAccount.A_accountStatus,true,true);
b[c++]=new ZaListHeaderItem(ZaAccount.A_zimbraLastLogonTimestamp,ZaMsg.ALV_Last_Login,null,"195px",e++,ZaAccount.A_zimbraLastLogonTimestamp,true,true)
}b[c++]=new ZaListHeaderItem(ZaAccount.A_description,ZaMsg.ALV_Description_col,null,"auto",null,null,false,true);
return b
};
ZaAccountListView.prototype._sortColumn=function(d,e){try{if(this._listType==ZaItem.DL){viewId=ZaZimbraAdmin._DISTRIBUTION_LISTS_LIST_VIEW
}else{if(this._listType==ZaItem.RESOURCE){viewId=ZaZimbraAdmin._RESOURCE_LIST_VIEW
}else{if(this._listType==ZaItem.ALIAS){viewId=ZaZimbraAdmin._ALIASES_LIST_VIEW
}else{viewId=ZaZimbraAdmin._ACCOUNTS_LIST_VIEW
}}}var c=ZaApp.getInstance().getAccountListController(viewId);
c.setSortOrder(e);
c.setSortField(d.getSortField());
c.show()
}catch(b){ZaApp.getInstance().getCurrentController()._handleException(b)
}}
}if(AjxPackage.define("zimbraAdmin.accounts.view.ZaNewAccountXWizard")){ZaNewAccountXWizard=function(b,c){ZaXWizardDialog.call(this,b,null,ZaMsg.NCD_NewAccTitle,"720px","300px","ZaNewAccountXWizard",null,ZaId.DLG_NEW_ACCT);
this.accountStatusChoices=[{value:ZaAccount.ACCOUNT_STATUS_ACTIVE,label:ZaAccount.getAccountStatusMsg(ZaAccount.ACCOUNT_STATUS_ACTIVE)},{value:ZaAccount.ACCOUNT_STATUS_CLOSED,label:ZaAccount.getAccountStatusMsg(ZaAccount.ACCOUNT_STATUS_CLOSED)},{value:ZaAccount.ACCOUNT_STATUS_LOCKED,label:ZaAccount.getAccountStatusMsg(ZaAccount.ACCOUNT_STATUS_LOCKED)},{value:ZaAccount.ACCOUNT_STATUS_PENDING,label:ZaAccount.getAccountStatusMsg(ZaAccount.ACCOUNT_STATUS_PENDING)},{value:ZaAccount.ACCOUNT_STATUS_MAINTENANCE,label:ZaAccount.getAccountStatusMsg(ZaAccount.ACCOUNT_STATUS_MAINTENANCE)}];
this.initForm(ZaAccount.myXModel,this.getMyXForm(c),null);
this._localXForm.setController();
this._localXForm.addListener(DwtEvent.XFORMS_FORM_DIRTY_CHANGE,new AjxListener(this,ZaNewAccountXWizard.prototype.handleXFormChange));
this._localXForm.addListener(DwtEvent.XFORMS_VALUE_ERROR,new AjxListener(this,ZaNewAccountXWizard.prototype.handleXFormChange));
this._helpURL=ZaNewAccountXWizard.helpURL;
this._domains={}
};
ZaNewAccountXWizard.zimletChoices=new XFormChoices([],XFormChoices.SIMPLE_LIST);
ZaNewAccountXWizard.themeChoices=new XFormChoices([],XFormChoices.OBJECT_LIST);
ZaNewAccountXWizard.prototype=new ZaXWizardDialog;
ZaNewAccountXWizard.prototype.constructor=ZaNewAccountXWizard;
ZaNewAccountXWizard.prototype.toString=function(){return"ZaNewAccountXWizard"
};
ZaXDialog.XFormModifiers.ZaNewAccountXWizard=new Array();
ZaNewAccountXWizard.helpURL=location.pathname+ZaUtil.HELP_URL+"managing_accounts/create_an_account.htm?locid="+AjxEnv.DEFAULT_LOCALE;
ZaNewAccountXWizard.prototype.handleXFormChange=function(){if(this._localXForm.hasErrors()){var c=true;
if(this._containedObject[ZaModel.currentStep]==ZaNewAccountXWizard.ALIASES_STEP){var b=arguments[0];
if(b&&b.formItem&&(b.formItem.type=="emailaddr")){c=!b.formItem.clearNameNullError()
}}if(c){this._button[DwtWizardDialog.FINISH_BUTTON].setEnabled(false);
this._button[DwtWizardDialog.NEXT_BUTTON].setEnabled(false);
this._button[DwtWizardDialog.PREV_BUTTON].setEnabled(false)
}}else{if(this._containedObject.attrs[ZaAccount.A_lastName]&&this._containedObject[ZaAccount.A_name].indexOf("@")>0&&ZaAccount.isAccountTypeSet(this._containedObject)){this._button[DwtWizardDialog.FINISH_BUTTON].setEnabled(true);
if(this._containedObject[ZaModel.currentStep]!=this._lastStep){this._button[DwtWizardDialog.NEXT_BUTTON].setEnabled(true)
}if(this._containedObject[ZaModel.currentStep]!=ZaNewAccountXWizard.GENERAL_STEP){this._button[DwtWizardDialog.PREV_BUTTON].setEnabled(true)
}}}};
ZaNewAccountXWizard.accountTypeItemId="account_type_output_"+Dwt.getNextId();
ZaNewAccountXWizard.prototype.updateAccountType=function(){var b=this._localXForm.getItemsById(ZaNewAccountXWizard.accountTypeItemId)[0];
b.updateElement(ZaAccount.getAccountTypeOutput.call(b,true))
};
ZaNewAccountXWizard.cosGroupItemId="cos_grouper_"+Dwt.getNextId();
ZaNewAccountXWizard.prototype.updateCosGrouper=function(){var b=this._localXForm.getItemsById(ZaNewAccountXWizard.cosGroupItemId)[0];
b.items[0].setElementEnabled(true);
b.updateElement()
};
ZaNewAccountXWizard.prototype.popup=function(b){ZaXWizardDialog.prototype.popup.call(this,b);
this._button[DwtWizardDialog.NEXT_BUTTON].setEnabled(false);
this._button[DwtWizardDialog.FINISH_BUTTON].setEnabled(false);
this._button[DwtWizardDialog.PREV_BUTTON].setEnabled(false)
};
ZaNewAccountXWizard.prototype.createDomainAndAccount=function(c){try{var e=new ZaDomain();
e.name=c;
e.attrs[ZaDomain.A_domainName]=c;
var d=ZaItem.create(e,ZaDomain,"ZaDomain");
if(d!=null){ZaApp.getInstance().getCurrentController().closeCnfrmDelDlg();
this.finishWizard()
}}catch(b){ZaApp.getInstance().getCurrentController()._handleException(b,"ZaNewAccountXWizard.prototype.createDomainAndAccount",null,false)
}};
ZaNewAccountXWizard.prototype.finishWizard=function(){try{if(this._containedObject.attrs[ZaAccount.A_password]){if(this._containedObject.attrs[ZaAccount.A_password]!=this._containedObject[ZaAccount.A2_confirmPassword]){ZaApp.getInstance().getCurrentController().popupErrorDialog(ZaMsg.ERROR_PASSWORD_MISMATCH);
return false
}}if(AjxUtil.isEmailAddress(this._containedObject.attrs[ZaAccount.A_manager],false)){this._containedObject.attrs[ZaAccount.A_manager]=ZaApp.getInstance().getAccountViewController()._getLDAPAttr(this._containedObject.attrs[ZaAccount.A_manager])
}if(!ZaAccount.checkValues(this._containedObject)){return false
}var c=ZaItem.create(this._containedObject,ZaAccount,"ZaAccount");
if(c!=null){ZaApp.getInstance().getAccountListController().fireCreationEvent(c);
this.popdown();
ZaApp.getInstance().getAppCtxt().getAppController().setActionStatusMsg(AjxMessageFormat.format(ZaMsg.AccountCreated,[c.name]))
}}catch(b){switch(b.code){case ZmCsfeException.ACCT_EXISTS:ZaApp.getInstance().getCurrentController().popupErrorDialog(ZaMsg.ERROR_ACCOUNT_EXISTS);
break;
case ZmCsfeException.NO_SUCH_COS:ZaApp.getInstance().getCurrentController().popupErrorDialog(AjxMessageFormat.format(ZaMsg.ERROR_NO_SUCH_COS,[this._containedObject.attrs[ZaAccount.A_COSId]]),b);
break;
case ZmCsfeException.ACCT_INVALID_PASSWORD:ZaApp.getInstance().getCurrentController().popupErrorDialog(ZaMsg.ERROR_PASSWORD_INVALID,b);
ZaApp.getInstance().getAppCtxt().getErrorDialog().showDetail(true);
break;
case ZmCsfeException.NO_SUCH_DOMAIN:ZaApp.getInstance().dialogs.confirmMessageDialog2.setMessage(AjxMessageFormat.format(ZaMsg.CreateDomain_q,[ZaAccount.getDomain(this._containedObject.name)]),DwtMessageDialog.WARNING_STYLE);
ZaApp.getInstance().dialogs.confirmMessageDialog2.registerCallback(DwtDialog.YES_BUTTON,this.createDomainAndAccount,this,[ZaAccount.getDomain(this._containedObject.name)]);
ZaApp.getInstance().dialogs.confirmMessageDialog2.registerCallback(DwtDialog.NO_BUTTON,ZaController.prototype.closeCnfrmDelDlg,ZaApp.getInstance().getCurrentController(),null);
ZaApp.getInstance().dialogs.confirmMessageDialog2.popup();
break;
default:ZaApp.getInstance().getCurrentController()._handleException(b,"ZaNewAccountXWizard.prototype.finishWizard",null,false);
break
}}};
ZaNewAccountXWizard.prototype.goNext=function(){if(this._containedObject[ZaModel.currentStep]==1){if(this._containedObject.attrs[ZaAccount.A_password]){if(this._containedObject.attrs[ZaAccount.A_password]!=this._containedObject[ZaAccount.A2_confirmPassword]){ZaApp.getInstance().getCurrentController().popupErrorDialog(ZaMsg.ERROR_PASSWORD_MISMATCH);
return false
}}if(ZaSearch.isAccountExist.call(this,{name:this._containedObject[ZaAccount.A_name],popupError:true})){return false
}this._button[DwtWizardDialog.PREV_BUTTON].setEnabled(true)
}this.goPage(this._containedObject[ZaModel.currentStep]+1);
if(this._containedObject[ZaModel.currentStep]==this._lastStep){this._button[DwtWizardDialog.NEXT_BUTTON].setEnabled(false)
}};
ZaNewAccountXWizard.prototype.goPrev=function(){if(this._containedObject[ZaModel.currentStep]==2){this._button[DwtWizardDialog.PREV_BUTTON].setEnabled(false);
this._button[DwtWizardDialog.NEXT_BUTTON].setEnabled(true)
}else{if(this._containedObject[ZaModel.currentStep]==this._lastStep){this._button[DwtWizardDialog.NEXT_BUTTON].setEnabled(true)
}}this.goPage(this._containedObject[ZaModel.currentStep]-1)
};
ZaNewAccountXWizard.prototype.setObject=function(n){this._containedObject=new ZaAccount();
this._containedObject.attrs=new Object();
for(var m in n.attrs){this._containedObject.attrs[m]=n.attrs[m]
}this._containedObject.name=n.name||"";
if(n._uuid){this._containedObject._uuid=n._uuid
}if(n.rights){this._containedObject.rights=n.rights
}else{this._containedObject.rights=[]
}if(this._containedObject.rights[ZaAccount.RENAME_ACCOUNT_RIGHT]===undefined){this._containedObject.rights[ZaAccount.RENAME_ACCOUNT_RIGHT]=true
}if(n.setAttrs){this._containedObject.setAttrs=n.setAttrs
}if(n.getAttrs){this._containedObject.getAttrs=n.getAttrs
}if(n._defaultValues){this._containedObject._defaultValues=n._defaultValues
}this._containedObject.id=n.id||null;
this.cosChoices.setChoices([this._containedObject.cos]);
this.cosChoices.dirtyChoices();
this._containedObject.attrs[ZaAccount.A_accountStatus]=ZaAccount.ACCOUNT_STATUS_ACTIVE;
this._containedObject[ZaAccount.A2_autodisplayname]=n[ZaAccount.A2_autodisplayname]||"TRUE";
this._containedObject[ZaAccount.A2_autoMailServer]=n[ZaAccount.A2_autoMailServer]||"TRUE";
this._containedObject[ZaAccount.A2_autoCos]=n[ZaAccount.A2_autoCos]||"TRUE";
this._containedObject[ZaAccount.A2_confirmPassword]=n[ZaAccount.A2_confirmPassword]||null;
this._containedObject[ZaModel.currentStep]=n[ZaModel.currentStep]||1;
this._containedObject.attrs[ZaAccount.A_zimbraMailAlias]=n.attrs[ZaAccount.A_zimbraMailAlias]||new Array();
this._containedObject[ZaAccount.A2_errorMessage]=n[ZaAccount.A2_errorMessage]||"";
var f;
if(!f){try{f=ZaApp.getInstance().getGlobalConfig().attrs[ZaGlobalConfig.A_zimbraDefaultDomainName]
}catch(k){if(k.code!=ZmCsfeException.SVC_PERM_DENIED){throw (k)
}}}if(!f){f=ZaSettings.myDomainName
}this._containedObject[ZaAccount.A_name]="@"+f;
if(n[ZaAccount.A_name]){this._containedObject[ZaAccount.A_name]=n[ZaAccount.A_name]
}EmailAddr_XFormItem.domainChoices.setChoices([]);
EmailAddr_XFormItem.domainChoices.dirtyChoices();
var f=ZaAccount.getDomain(this._containedObject.name);
try{var o=ZaDomain.getDomainByName(f);
this._containedObject[ZaAccount.A2_accountTypes]=o.getAccountTypes()
}catch(k){if(k.code==ZmCsfeException.SVC_PERM_DENIED){this._containedObject[ZaAccount.A2_errorMessage]=AjxMessageFormat.format(ZaMsg.CANNOT_CREATE_ACCOUNTS_IN_THIS_DOMAIN,[f])
}else{this._containedObject[ZaAccount.A2_errorMessage]="";
throw (k)
}}this._containedObject[ZaAccount.A2_memberOf]=ZaAccountMemberOfListView.cloneMemberOf(n);
this._containedObject[ZaAccount.A2_directMemberList+"_offset"]=n[ZaAccount.A2_directMemberList+"_offset"];
this._containedObject[ZaAccount.A2_directMemberList+"_more"]=n[ZaAccount.A2_directMemberList+"_more"];
this._containedObject[ZaAccount.A2_indirectMemberList+"_offset"]=n[ZaAccount.A2_indirectMemberList+"_offset"];
this._containedObject[ZaAccount.A2_indirectMemberList+"_more"]=n[ZaAccount.A2_indirectMemberList+"_more"];
this._containedObject[ZaAccount.A2_nonMemberList+"_offset"]=n[ZaAccount.A2_nonMemberList+"_offset"];
this._containedObject[ZaAccount.A2_nonMemberList+"_more"]=n[ZaAccount.A2_nonMemberList+"_more"];
if(n.getAttrs[ZaAccount.A_zimbraAvailableSkin]||n.getAttrs.all){var j=ZaApp.getInstance().getInstalledSkins();
if(AjxUtil.isEmpty(j)){if(n._defaultValues&&n._defaultValues.attrs&&!AjxUtil.isEmpty(n._defaultValues.attrs[ZaAccount.A_zimbraAvailableSkin])){j=n._defaultValues.attrs[ZaAccount.A_zimbraAvailableSkin]
}else{j=[]
}}else{if(AjxUtil.isString(j)){j=[j]
}}var h=ZaApp.getInstance().getSkinChoices(j);
ZaNewAccountXWizard.themeChoices.setChoices(h);
ZaNewAccountXWizard.themeChoices.dirtyChoices()
}if(n.getAttrs[ZaAccount.A_zimbraZimletAvailableZimlets]||n.getAttrs.all){var d=ZaZimlet.getAll("extension");
if(!AjxUtil.isEmpty(d)&&d instanceof ZaItemList||d instanceof AjxVector){d=d.getArray()
}if(AjxUtil.isEmpty(d)){if(n._defaultValues&&n._defaultValues.attrs&&!AjxUtil.isEmpty(n._defaultValues.attrs[ZaAccount.A_zimbraZimletAvailableZimlets])){d=n._defaultValues.attrs[ZaAccount.A_zimbraZimletAvailableZimlets]
}else{d=[]
}ZaNewAccountXWizard.zimletChoices.setChoices(d);
ZaNewAccountXWizard.zimletChoices.dirtyChoices()
}else{var e=d.length;
var l=[];
for(var g=0;
g<e;
g++){var c=d[g];
l.push(c.name)
}ZaNewAccountXWizard.zimletChoices.setChoices(l);
ZaNewAccountXWizard.zimletChoices.dirtyChoices()
}}if(o&&o.attrs&&o.attrs[ZaDomain.A_AuthMech]&&(o.attrs[ZaDomain.A_AuthMech]!=ZaDomain.AuthMech_zimbra)){this._containedObject[ZaAccount.A2_isExternalAuth]=true
}else{this._containedObject[ZaAccount.A2_isExternalAuth]=false
}this._localXForm.setInstance(this._containedObject);
var b=this._localXForm.getItemsById(ZaAccount.A_name);
if(!AjxUtil.isEmpty(b)&&b[0]&&b[0].resetEditedState){b[0].resetEditedState()
}};
ZaNewAccountXWizard.isAuthfromInternal=function(d,c){var e=null;
if(c){var b=this.getInstance();
if(b){e=this.getInstanceValue(c)
}}if(!e){e=d
}return ZaAccountXFormView.isAuthfromInternal(e)
};
ZaNewAccountXWizard.isDomainLeftAccountsAlertVisible=function(){var c=this.getInstanceValue(ZaAccount.A2_domainLeftAccounts);
var b=this.getInstanceValue(ZaAccount.A2_accountTypes);
return(!AjxUtil.isEmpty(c)&&AjxUtil.isEmpty(b))
};
ZaNewAccountXWizard.isAccountsTypeAlertInvisible=function(){var b=this.getInstanceValue(ZaAccount.A2_showAccountTypeMsg);
return(AjxUtil.isEmpty(b))
};
ZaNewAccountXWizard.isAccountTypeGrouperVisible=function(){return !AjxUtil.isEmpty(this.getInstanceValue(ZaAccount.A2_accountTypes))
};
ZaNewAccountXWizard.isAccountTypeSet=function(){return !ZaAccount.isAccountTypeSet(this.getInstance())
};
ZaNewAccountXWizard.isAutoDisplayname=function(){return(this.getInstanceValue(ZaAccount.A2_autodisplayname)=="FALSE")
};
ZaNewAccountXWizard.isAutoCos=function(){return(this.getInstanceValue(ZaAccount.A2_autoCos)=="FALSE")
};
ZaNewAccountXWizard.isContactsFeatureEnabled=function(){return this.getInstanceValue(ZaAccount.A_zimbraFeatureDistributionListFolderEnabled)=="TRUE"
};
ZaNewAccountXWizard.isCalendarFeatureEnabled=function(){return this.getInstanceValue(ZaAccount.A_zimbraFeatureCalendarEnabled)=="TRUE"
};
ZaNewAccountXWizard.isMailForwardingEnabled=function(){return(this.getInstanceValue(ZaAccount.A_zimbraFeatureMailForwardingEnabled)=="TRUE")
};
ZaNewAccountXWizard.onCOSChanged=function(d,c,b){if(ZaItem.ID_PATTERN.test(d)){b.getInstance()._defaultValues=ZaCos.getCosById(d,b.parent._app);
this.setInstanceValue(d)
}else{b.getInstance()._defaultValues=ZaCos.getCosByName(d,b.parent._app);
if(b.getInstance().cos){d=b.getInstance()._defaultValues.id
}}this.setInstanceValue(d);
b.parent._isCosChanged=true;
b.parent.updateAccountType();
return d
};
ZaNewAccountXWizard.getAccountNameInfoItem=function(){if(AjxUtil.isEmpty(ZaNewAccountXWizard.accountNameInfoPool)){ZaNewAccountXWizard.accountNameInfoPool=new Object();
ZaNewAccountXWizard.accountNameInfoPool[ZaAccount.A_name]={ref:ZaAccount.A_name,type:_EMAILADDR_,msgName:ZaMsg.NAD_AccountName,label:ZaMsg.NAD_AccountName,bmolsnr:false,domainPartWidth:"100%",labelLocation:_LEFT_,onChange:ZaAccount.setDomainChanged,forceUpdate:true,enableDisableChecks:[],visibilityChecks:[]},ZaNewAccountXWizard.accountNameInfoPool[ZaAccount.A_firstName]={ref:ZaAccount.A_firstName,type:_TEXTFIELD_,msgName:ZaMsg.NAD_FirstName,label:ZaMsg.NAD_FirstName,labelLocation:_LEFT_,cssClass:"admin_xform_name_input",width:150,elementChanged:function(g,f,e){if(this.getInstance()[ZaAccount.A2_autodisplayname]=="TRUE"){ZaAccount.generateDisplayName.call(this,this.getInstance(),g,this.getInstance().attrs[ZaAccount.A_lastName],this.getInstance().attrs[ZaAccount.A_initials])
}this.getForm().itemChanged(this,g,e)
}};
ZaNewAccountXWizard.accountNameInfoPool[ZaAccount.A_initials]={ref:ZaAccount.A_initials,type:_TEXTFIELD_,msgName:ZaMsg.NAD_Initials,label:ZaMsg.NAD_Initials,labelLocation:_LEFT_,cssClass:"admin_xform_name_input",width:50,elementChanged:function(g,f,e){if(this.getInstance()[ZaAccount.A2_autodisplayname]=="TRUE"){ZaAccount.generateDisplayName.call(this,this.getInstance(),this.getInstanceValue(ZaAccount.A_firstName),this.getInstanceValue(ZaAccount.A_lastName),g)
}this.getForm().itemChanged(this,g,e)
}};
ZaNewAccountXWizard.accountNameInfoPool[ZaAccount.A_lastName]={ref:ZaAccount.A_lastName,type:_TEXTFIELD_,msgName:ZaMsg.NAD_LastName,label:ZaMsg.NAD_LastName,labelLocation:_LEFT_,cssClass:"admin_xform_name_input",width:150,elementChanged:function(g,f,e){if(this.getInstance()[ZaAccount.A2_autodisplayname]=="TRUE"){ZaAccount.generateDisplayName.call(this,this.getInstance(),this.getInstanceValue(ZaAccount.A_firstName),g,this.getInstanceValue(ZaAccount.A_initials))
}this.getForm().itemChanged(this,g,e)
}};
ZaNewAccountXWizard.accountNameInfoPool.ZaAccountDisplayInfoGroup={type:_GROUP_,numCols:3,nowrap:true,width:200,msgName:ZaMsg.NAD_DisplayName,label:ZaMsg.NAD_DisplayName,labelLocation:_LEFT_,visibilityChecks:[[ZaItem.hasReadPermission,ZaAccount.A_displayname]],items:[{ref:ZaAccount.A_displayname,type:_TEXTFIELD_,label:null,cssClass:"admin_xform_name_input",width:150,enableDisableChecks:[[XForm.checkInstanceValue,ZaAccount.A2_autodisplayname,"FALSE"],ZaItem.hasWritePermission],enableDisableChangeEventSources:[ZaAccount.A2_autodisplayname],bmolsnr:true,visibilityChecks:[]},{ref:ZaAccount.A2_autodisplayname,type:_WIZ_CHECKBOX_,msgName:ZaMsg.NAD_Auto,label:ZaMsg.NAD_Auto,labelLocation:_RIGHT_,trueValue:"TRUE",falseValue:"FALSE",subLabel:"",elementChanged:function(g,f,e){if(g=="TRUE"){if(ZaAccount.generateDisplayName.call(this,this.getInstance(),this.getInstanceValue(ZaAccount.A_firstName),this.getInstanceValue(ZaAccount.A_lastName),this.getInstanceValue(ZaAccount.A_initials))){this.getForm().parent.setDirty(true)
}}this.getForm().itemChanged(this,g,e)
},enableDisableChecks:[[ZaItem.hasWritePermission,ZaAccount.A_displayname]],visibilityChecks:[[ZaItem.hasWritePermission,ZaAccount.A_displayname]]}]},ZaNewAccountXWizard.accountNameInfoPool[ZaAccount.A_zimbraHideInGal]={ref:ZaAccount.A_zimbraHideInGal,type:_WIZ_CHECKBOX_,msgName:ZaMsg.LBL_zimbraHideInGal,subLabel:"",labelLocation:_RIGHT_,align:_RIGHT_,label:ZaMsg.LBL_zimbraHideInGal,trueValue:"TRUE",falseValue:"FALSE"},ZaNewAccountXWizard.accountNameInfoPool[ZaAccount.A_zimbraPhoneticFirstName]={ref:ZaAccount.A_zimbraPhoneticFirstName,type:_TEXTFIELD_,msgName:ZaMsg.NAD_zimbraPhoneticFirstName,label:ZaMsg.NAD_zimbraPhoneticFirstName,labelLocation:_LEFT_,cssClass:"admin_xform_name_input",width:150};
ZaNewAccountXWizard.accountNameInfoPool[ZaAccount.A_zimbraPhoneticLastName]={ref:ZaAccount.A_zimbraPhoneticLastName,type:_TEXTFIELD_,msgName:ZaMsg.NAD_zimbraPhoneticLastName,label:ZaMsg.NAD_zimbraPhoneticLastName,labelLocation:_LEFT_,cssClass:"admin_xform_name_input",width:150}
}var c=new Array();
var d=new Array();
if(ZaZimbraAdmin.isLanguage("ja")){d=[ZaAccount.A_name,ZaAccount.A_zimbraPhoneticLastName,ZaAccount.A_lastName,ZaAccount.A_initials,ZaAccount.A_zimbraPhoneticFirstName,ZaAccount.A_firstName,"ZaAccountDisplayInfoGroup",ZaAccount.A_zimbraHideInGal]
}else{d=[ZaAccount.A_name,ZaAccount.A_firstName,ZaAccount.A_initials,ZaAccount.A_lastName,"ZaAccountDisplayInfoGroup",ZaAccount.A_zimbraHideInGal]
}for(var b=0;
b<d.length;
b++){c.push(ZaNewAccountXWizard.accountNameInfoPool[d[b]])
}return c
};
ZaNewAccountXWizard.myXFormModifier=function(t,e){var k=ZaSettings.myDomainName;
var j="@"+k;
var d=new Array();
this.stepChoices=[];
this.TAB_INDEX=0;
ZaNewAccountXWizard.GENERAL_STEP=++this.TAB_INDEX;
this.stepChoices.push({value:ZaNewAccountXWizard.GENERAL_STEP,label:ZaMsg.TABT_GeneralPage});
this.cosChoices=new XFormChoices([],XFormChoices.OBJECT_LIST,"id","name");
var o={type:_CASE_,tabGroupKey:ZaNewAccountXWizard.GENERAL_STEP,caseKey:ZaNewAccountXWizard.GENERAL_STEP,numCols:1,align:_LEFT_,valign:_TOP_};
var r=[{type:_DWT_ALERT_,ref:ZaAccount.A2_domainLeftAccounts,visibilityChecks:[ZaNewAccountXWizard.isDomainLeftAccountsAlertVisible],visibilityChangeEventSources:[ZaAccount.A2_domainLeftAccounts,ZaAccount.A2_accountTypes,ZaAccount.A_name],bmolsnr:true,containerCssStyle:"width:400px;",style:DwtAlert.WARNING,iconVisible:false},{type:_DWT_ALERT_,ref:ZaAccount.A2_warningMessage,visibilityChecks:[[XForm.checkInstanceValueNotEmty,ZaAccount.A2_warningMessage]],visibilityChangeEventSources:[ZaAccount.A2_warningMessage],bmolsnr:true,containerCssStyle:"width:400px;",style:DwtAlert.WARNING,iconVisible:false},{type:_DWT_ALERT_,ref:ZaAccount.A2_errorMessage,visibilityChecks:[[XForm.checkInstanceValueNotEmty,ZaAccount.A2_errorMessage]],visibilityChangeEventSources:[ZaAccount.A2_errorMessage],bmolsnr:true,containerCssStyle:"width:400px;",style:DwtAlert.CRITICAL,iconVisible:false},{type:_ZAWIZ_TOP_GROUPER_,label:ZaMsg.NAD_AccountTypeGrouper,id:"account_wiz_type_group",colSpan:"*",numCols:1,colSizes:["100%"],visibilityChecks:[ZaNewAccountXWizard.isAccountTypeGrouperVisible,ZaAccount.isShowAccountType],visibilityChangeEventSources:[ZaAccount.A2_accountTypes,ZaAccount.A_COSId,ZaAccount.A_name,ZaAccount.A2_showAccountTypeMsg],items:[{type:_DWT_ALERT_,visibilityChecks:[ZaNewAccountXWizard.isAccountTypeSet,ZaNewAccountXWizard.isAccountsTypeAlertInvisible],visibilityChangeEventSources:[ZaAccount.A2_accountTypes,ZaAccount.A_COSId,ZaAccount.A_name,ZaAccount.A2_showAccountTypeMsg],containerCssStyle:"width:400px;",style:DwtAlert.CRITICAL,iconVisible:false,content:ZaMsg.ERROR_ACCOUNT_TYPE_NOT_SET},{type:_DWT_ALERT_,ref:ZaAccount.A2_showAccountTypeMsg,visibilityChecks:[[XForm.checkInstanceValueNotEmty,ZaAccount.A2_showAccountTypeMsg]],visibilityChangeEventSources:[ZaAccount.A2_showAccountTypeMsg,ZaAccount.A_name],bmolsnr:true,containerCssStyle:"width:400px;",style:DwtAlert.WARNING,iconVisible:false},{type:_OUTPUT_,id:ZaNewAccountXWizard.accountTypeItemId,getDisplayValue:ZaAccount.getAccountTypeOutput,valueChangeEventSources:[ZaAccount.A_name,ZaAccount.A_COSId,ZaAccount.A2_accountTypes,ZaAccount.A2_currentAccountType],cssStyle:"margin-left:auto;margin-right:auto;width:600px;"}]},{type:_ZAWIZ_TOP_GROUPER_,label:ZaMsg.NAD_AccountNameGrouper,id:"account_wiz_name_group",numCols:2,items:ZaNewAccountXWizard.getAccountNameInfoItem(),displayLabelItem:true,headerLabelWidth:"100px",headerItems:[{ref:ZaAccount.A_name,type:_EMAILADDR_,msgName:ZaMsg.NAD_AccountName,labelLocation:_LEFT_,onChange:ZaAccount.setDomainChanged,forceUpdate:true,enableDisableChecks:[[ZaItem.hasRight,ZaAccount.RENAME_ACCOUNT_RIGHT]],visibilityChecks:[]}]}];
if(ZAWizTopGrouper_XFormItem.isGroupVisible(e,[ZaAccount.A_accountStatus,ZaAccount.A_COSId,ZaAccount.A_zimbraIsAdminAccount,ZaAccount.A_mailHost],[])){var h={type:_ZAWIZ_TOP_GROUPER_,label:ZaMsg.NAD_AccountSetupGrouper,id:"account_wiz_setup_group",numCols:2,colSizes:["200px","400px"],items:[{ref:ZaAccount.A_accountStatus,type:_OSELECT1_,msgName:ZaMsg.NAD_AccountStatus,label:ZaMsg.NAD_AccountStatus,labelLocation:_LEFT_,choices:this.accountStatusChoices}],headerItems:[{ref:ZaAccount.A_accountStatus,type:_OSELECT1_,bmolsnr:true,labelLocation:_LEFT_,choices:this.accountStatusChoices}],displayLabelItem:true,headerLabelWidth:"100px"};
h.items.push({type:_GROUP_,numCols:3,nowrap:true,label:ZaMsg.NAD_ClassOfService,labelLocation:_LEFT_,visibilityChecks:[[ZaItem.hasWritePermission,ZaAccount.A_COSId]],id:ZaNewAccountXWizard.cosGroupItemId,items:[{ref:ZaAccount.A_COSId,label:null,type:_INPUT_,onChange:ZaAccount.setCosChanged,enableDisableChecks:[[ZaNewAccountXWizard.isAutoCos],[ZaItem.hasWritePermission,ZaAccount.A_COSId]],enableDisableChangeEventSources:[ZaAccount.A2_autoCos],getDisplayValue:function(x){if(x){var w=ZaCos.getCosById(x);
return w&&w.name
}}},{ref:ZaAccount.A2_autoCos,type:_WIZ_CHECKBOX_,msgName:ZaMsg.NAD_Auto,label:ZaMsg.NAD_Auto,labelLocation:_RIGHT_,trueValue:"TRUE",falseValue:"FALSE",subLabel:"",elementChanged:function(A,y,x){var z=this.getParentItem().getItems()[0];
var w=this.getForm();
if(A=="TRUE"){z.updateElement(null);
ZaAccount.setDefaultCos(this.getInstance(),w.parent._app)
}else{z.createDataList(ZaApp.getInstance().getCosListName())
}w.itemChanged(this,A,x)
},enableDisableChecks:[[ZaItem.hasWritePermission,ZaAccount.A_COSId]],visibilityChecks:[]}]});
h.items.push({ref:ZaAccount.A_zimbraIsAdminAccount,type:_WIZ_CHECKBOX_,labelLocation:_RIGHT_,align:_RIGHT_,subLabel:"",visibilityChecks:[[ZaItem.hasWritePermission,ZaAccount.A_zimbraIsAdminAccount]],msgName:ZaMsg.NAD_IsSystemAdminAccount,label:ZaMsg.NAD_IsSystemAdminAccount,bmolsnr:true,trueValue:"TRUE",falseValue:"FALSE"});
h.items.push({type:_GROUP_,numCols:3,nowrap:true,label:ZabMsg.attrDesc_mailHost,labelLocation:_LEFT_,visibilityChecks:[[ZaItem.hasWritePermission,ZaAccount.A_mailHost]],items:[{ref:ZaAccount.A_mailHost,type:_OSELECT1_,label:null,editable:false,choices:ZaApp.getInstance().getServerListChoices(),enableDisableChecks:[ZaAccount.isAutoMailServer],enableDisableChangeEventSources:[ZaAccount.A2_autoMailServer],visibilityChecks:[],tableCssStyle:"height:15px;"},{ref:ZaAccount.A2_autoMailServer,type:_WIZ_CHECKBOX_,msgName:ZaMsg.NAD_Auto,label:ZaMsg.NAD_Auto,labelLocation:_RIGHT_,trueValue:"TRUE",falseValue:"FALSE",visibilityChecks:[],labelLocation:_RIGHT_,align:_RIGHT_,subLabel:"",enableDisableChecks:[]}]});
r.push(h)
}var g={type:_ZAWIZ_TOP_GROUPER_,label:ZaMsg.NAD_PasswordGrouper,id:"account_wiz_password_group",numCols:2,visibilityChecks:[[ZaItem.adminHasAnyRight,[ZaAccount.SET_PASSWORD_RIGHT,ZaAccount.CHANGE_PASSWORD_RIGHT]],[XForm.checkInstanceValueNot,ZaAccount.A2_isExternalAuth,true]],visibilityChangeEventSources:[ZaAccount.A2_isExternalAuth],items:[{type:_DWT_ALERT_,containerCssStyle:"padding-bottom:0;",style:DwtAlert.WARNING,iconVisible:false,content:ZaMsg.Alert_InternalPassword},{ref:ZaAccount.A_password,type:_SECRET_,msgName:ZaMsg.NAD_Password,label:ZaMsg.NAD_Password,labelLocation:_LEFT_,visibilityChecks:[],enableDisableChecks:[[ZaNewAccountXWizard.isAuthfromInternal,k,ZaAccount.A_name]],cssClass:"admin_xform_name_input"},{ref:ZaAccount.A2_confirmPassword,type:_SECRET_,msgName:ZaMsg.NAD_ConfirmPassword,label:ZaMsg.NAD_ConfirmPassword,labelLocation:_LEFT_,visibilityChecks:[],enableDisableChecks:[[ZaNewAccountXWizard.isAuthfromInternal,k,ZaAccount.A_name]],cssClass:"admin_xform_name_input"},{ref:ZaAccount.A_zimbraPasswordMustChange,type:_WIZ_CHECKBOX_,labelLocation:_RIGHT_,align:_RIGHT_,subLabel:"",msgName:ZaMsg.NAD_MustChangePwd,label:ZaMsg.NAD_MustChangePwd,trueValue:"TRUE",falseValue:"FALSE",visibilityChecks:[],enableDisableChecks:[[ZaNewAccountXWizard.isAuthfromInternal,k,ZaAccount.A_name]]}]};
r.push(g);
var b={type:_ZAWIZ_TOP_GROUPER_,label:ZaMsg.NAD_ExternalAuthGrouper,id:"account_wiz_ext_auth_group",numCols:2,visibilityChecks:[[XForm.checkInstanceValue,ZaAccount.A2_isExternalAuth,true],[ZaItem.hasReadPermission,ZaAccount.A_zimbraAuthLdapExternalDn]],visibilityChangeEventSources:[ZaAccount.A2_isExternalAuth],items:[{ref:ZaAccount.A_zimbraAuthLdapExternalDn,type:_TEXTFIELD_,width:256,msgName:ZaMsg.NAD_AuthLdapExternalDn,label:ZaMsg.NAD_AuthLdapExternalDn,labelLocation:_LEFT_,align:_LEFT_,toolTipContent:ZaMsg.tt_AuthLdapExternalDn}]};
r.push(b);
var s={type:_ZAWIZ_TOP_GROUPER_,label:ZaMsg.NAD_TimezoneGrouper,id:"account_wiz_timezone_group",visibilityChecks:[[ZaItem.hasWritePermission,ZaAccount.A_zimbraPrefTimeZoneId]],numCols:2,items:[{ref:ZaAccount.A_zimbraPrefTimeZoneId,type:_SELECT1_,msgName:ZaMsg.LBL_zimbraPrefTimeZoneId,label:ZaMsg.LBL_zimbraPrefTimeZoneId,labelLocation:_LEFT_}]};
r.push(s);
if(ZAWizTopGrouper_XFormItem.isGroupVisible(e,[ZaAccount.A_description,ZaAccount.A_notes],[])){var c={type:_ZAWIZ_TOP_GROUPER_,label:ZaMsg.NAD_NotesGrouper,id:"account_wiz_notes_group",numCols:2,items:[{ref:ZaAccount.A_description,type:_INPUT_,msgName:ZaMsg.NAD_Description,label:ZaMsg.NAD_Description,labelLocation:_LEFT_,cssClass:"admin_xform_name_input",visibilityChecks:[[ZaItem.hasWritePermission,ZaAccount.A_description]],enableDisableChecks:[]},{ref:ZaAccount.A_notes,type:_TEXTAREA_,msgName:ZaMsg.NAD_Notes,label:ZaMsg.NAD_Notes,labelLocation:_LEFT_,labelCssStyle:"vertical-align:top;",width:"30em",visibilityChecks:[[ZaItem.hasWritePermission,ZaAccount.A_notes]],enableDisableChecks:[]}]};
r.push(c)
}o.items=r;
d.push(o);
if(ZaTabView.isTAB_ENABLED(e,ZaAccountXFormView.CONTACT_TAB_ATTRS,ZaAccountXFormView.CONTACT_TAB_RIGHTS)&&!ZaSettings.isOctopus()){ZaNewAccountXWizard.CONTACT_STEP=++this.TAB_INDEX;
this.stepChoices.push({value:ZaNewAccountXWizard.CONTACT_STEP,label:ZaMsg.TABT_ContactInfo});
var l={type:_CASE_,caseKey:ZaNewAccountXWizard.CONTACT_STEP,tabGroupKey:ZaNewAccountXWizard.CONTACT_STEP,numCols:1,items:[{type:_ZAWIZGROUP_,items:[{ref:ZaAccount.A_telephoneNumber,type:_TEXTFIELD_,msgName:ZaMsg.NAD_telephoneNumber,label:ZaMsg.NAD_telephoneNumber,labelLocation:_LEFT_,width:250},{ref:ZaAccount.A_homePhone,type:_TEXTFIELD_,msgName:ZaMsg.NAD_homePhone,label:ZaMsg.NAD_homePhone,labelLocation:_LEFT_,width:250},{ref:ZaAccount.A_mobile,type:_TEXTFIELD_,msgName:ZaMsg.NAD_mobile,label:ZaMsg.NAD_mobile,labelLocation:_LEFT_,width:250},{ref:ZaAccount.A_pager,type:_TEXTFIELD_,msgName:ZaMsg.NAD_pager,label:ZaMsg.NAD_pager,labelLocation:_LEFT_,width:250},{ref:ZaAccount.A_facsimileTelephoneNumber,type:_TEXTFIELD_,msgName:ZaMsg.NAD_facsimileTelephoneNumber,label:ZaMsg.NAD_facsimileTelephoneNumber,labelLocation:_LEFT_,width:250}]},{type:_ZAWIZGROUP_,items:[{ref:ZaAccount.A_zimbraPhoneticCompany,type:_TEXTFIELD_,msgName:ZaMsg.NAD_zimbraPhoneticCompany,label:ZaMsg.NAD_zimbraPhoneticCompany,labelLocation:_LEFT_,width:250,visibilityChecks:[[ZaZimbraAdmin.isLanguage,"ja"]]},{ref:ZaAccount.A_company,type:_TEXTFIELD_,msgName:ZaMsg.NAD_company,label:ZaMsg.NAD_company,labelLocation:_LEFT_,width:250},{ref:ZaAccount.A_title,type:_TEXTFIELD_,msgName:ZaMsg.NAD_title,label:ZaMsg.NAD_title,labelLocation:_LEFT_,width:250},{type:_DYNSELECT_,ref:ZaAccount.A_manager,dataFetcherClass:ZaSearch,dataFetcherMethod:ZaSearch.prototype.dynSelectSearch,dataFetcherTypes:[ZaSearch.ACCOUNTS,ZaSearch.RESOURCES,ZaSearch.DLS],dataFetcherAttrs:[ZaItem.A_zimbraId,ZaItem.A_cn,ZaAccount.A_name,ZaAccount.A_displayname,ZaAccount.A_mail],label:ZaMsg.NAD_manager,labelLocation:_LEFT_,width:"100%",inputWidth:"250px",editable:true,forceUpdate:true,choices:new XFormChoices([],XFormChoices.OBJECT_LIST,"name","name"),visibilityChecks:[],enableDisableChecks:[],onChange:function(y,x,w){if(y instanceof ZaItem){this.setInstanceValue(y.name)
}else{this.setInstanceValue(y)
}},autoCompleteEnabled:true},{ref:ZaAccount.A_orgUnit,type:_TEXTFIELD_,msgName:ZaMsg.NAD_orgUnit,label:ZaMsg.NAD_orgUnit,labelLocation:_LEFT_,width:250},{ref:ZaAccount.A_office,type:_TEXTFIELD_,msgName:ZaMsg.NAD_office,label:ZaMsg.NAD_office,labelLocation:_LEFT_,width:250}]},{type:_ZAWIZGROUP_,items:ZaAccountXFormView.getAddressFormItemForDialog()}]};
d.push(l)
}if(ZaTabView.isTAB_ENABLED(e,ZaAccountXFormView.ALIASES_TAB_ATTRS,ZaAccountXFormView.ALIASES_TAB_RIGHTS)){ZaNewAccountXWizard.ALIASES_STEP=++this.TAB_INDEX;
this.stepChoices.push({value:ZaNewAccountXWizard.ALIASES_STEP,label:ZaMsg.TABT_Aliases});
d.push({type:_CASE_,tabGroupKey:ZaNewAccountXWizard.ALIASES_STEP,caseKey:ZaNewAccountXWizard.ALIASES_STEP,numCols:1,items:[{type:_OUTPUT_,value:ZaMsg.NAD_AccountAliases},{ref:ZaAccount.A_zimbraMailAlias,type:_REPEAT_,label:null,repeatInstance:j,showAddButton:true,showRemoveButton:true,addButtonLabel:ZaMsg.NAD_AddAlias,showAddOnNextRow:true,removeButtonLabel:ZaMsg.NAD_RemoveAlias,removeButtonCSSStyle:"margin-left:50px;",visibilityChecks:[[ZaItem.hasWritePermission,ZaAccount.A_zimbraMailAlias]],items:[{ref:".",type:_EMAILADDR_,label:null,enableDisableChecks:[],visibilityChecks:[[ZaItem.hasWritePermission,ZaAccount.A_zimbraMailAlias]]}]}]})
}if(ZaTabView.isTAB_ENABLED(e,ZaAccountXFormView.MEMBEROF_TAB_ATTRS,ZaAccountXFormView.MEMBEROF_TAB_RIGHTS)){var u=new ZaAccountMemberOfsourceHeaderList(ZaAccountMemberOfsourceHeaderList.DIRECT);
var p=new ZaAccountMemberOfsourceHeaderList(ZaAccountMemberOfsourceHeaderList.INDIRECT,150);
var n=new ZaAccountMemberOfsourceHeaderList(ZaAccountMemberOfsourceHeaderList.NON);
ZaNewAccountXWizard.MEMBEROF_STEP=++this.TAB_INDEX;
this.stepChoices.push({value:ZaNewAccountXWizard.MEMBEROF_STEP,label:ZaMsg.TABT_MemberOf});
var f={type:_CASE_,caseKey:ZaNewAccountXWizard.MEMBEROF_STEP,tabGroupKey:ZaNewAccountXWizard.MEMBEROF_STEP,numCols:2,colSizes:["50%","50%"],id:"memberof_step",items:[{type:_GROUP_,width:"98%",numCols:1,items:[{type:_ZALEFT_GROUPER_,numCols:1,width:"100%",label:ZaMsg.Account_DirectGroupLabel,containerCssStyle:"padding-top:5px;",items:[{ref:ZaAccount.A2_directMemberList,type:_S_DWT_LIST_,width:"98%",height:208,cssClass:"DLSource",widgetClass:ZaAccountMemberOfListView,headerList:u,defaultColumnSortable:0,onSelection:ZaAccountXFormView.directMemberOfSelectionListener,forceUpdate:true},{type:_SPACER_,height:"5"},{type:_GROUP_,width:"100%",numCols:8,colSizes:[90,5,90,"auto",30,5,30,5],items:[{type:_DWT_BUTTON_,label:ZaMsg.DLXV_ButtonRemoveAll,width:90,enableDisableChecks:[[ZaAccountMemberOfListView.shouldEnableAllButton,ZaAccount.A2_directMemberList]],enableDisableChangeEventSources:[ZaAccount.A2_directMemberList],onActivate:"ZaAccountMemberOfListView.removeAllGroups.call(this,event, ZaAccount.A2_directMemberList)"},{type:_CELLSPACER_,height:"100%"},{type:_DWT_BUTTON_,label:ZaMsg.DLXV_ButtonRemove,width:90,id:"removeButton",enableDisableChecks:[[ZaAccountMemberOfListView.shouldEnableAddRemoveButton,ZaAccount.A2_directMemberList]],enableDisableChangeEventSources:[ZaAccount.A2_directMemberListSelected],onActivate:"ZaAccountMemberOfListView.removeGroups.call(this,event, ZaAccount.A2_directMemberList)"},{type:_CELLSPACER_,height:"100%"},{type:_DWT_BUTTON_,label:"",width:30,id:"backButton",icon:"LeftArrow",disIcon:"LeftArrowDis",onActivate:"ZaAccountMemberOfListView.backButtonHndlr.call(this,event, ZaAccount.A2_directMemberList)",enableDisableChecks:[[ZaAccountMemberOfListView.shouldEnableBackButton,ZaAccount.A2_directMemberList]],enableDisableChangeEventSources:[ZaAccount.A2_directMemberList+"_offset"]},{type:_CELLSPACER_,height:"100%"},{type:_DWT_BUTTON_,label:"",width:30,id:"fwdButton",icon:"RightArrow",disIcon:"RightArrowDis",onActivate:"ZaAccountMemberOfListView.fwdButtonHndlr.call(this,event, ZaAccount.A2_directMemberList)",enableDisableChecks:[[ZaAccountMemberOfListView.shouldEnableForwardButton,ZaAccount.A2_directMemberList]],enableDisableChangeEventSources:[ZaAccount.A2_directMemberList+"_more"]},{type:_CELLSPACER_,height:"100%"}]}]},{type:_SPACER_,height:"5"},{type:_ZALEFT_GROUPER_,numCols:1,width:"100%",label:ZaMsg.Account_IndirectGroupLabel,containerCssStyle:"padding-top:5px;",items:[{ref:ZaAccount.A2_indirectMemberList,type:_S_DWT_LIST_,width:"98%",height:208,cssClass:"DLSource",widgetClass:ZaAccountMemberOfListView,headerList:p,defaultColumnSortable:0,onSelection:ZaAccountXFormView.indirectMemberOfSelectionListener,forceUpdate:true},{type:_SPACER_,height:"5"},{type:_GROUP_,width:"100%",numCols:5,colSizes:["auto",30,5,30,5],items:[{type:_CELLSPACER_,height:"100%"},{type:_DWT_BUTTON_,label:"",width:30,id:"backButton",icon:"LeftArrow",disIcon:"LeftArrowDis",onActivate:"ZaAccountMemberOfListView.backButtonHndlr.call(this,event, ZaAccount.A2_indirectMemberList)",enableDisableChecks:[[ZaAccountMemberOfListView.shouldEnableBackButton,ZaAccount.A2_indirectMemberList]],enableDisableChangeEventSources:[ZaAccount.A2_indirectMemberList+"_offset"]},{type:_CELLSPACER_,height:"100%"},{type:_DWT_BUTTON_,label:"",width:30,id:"fwdButton",icon:"RightArrow",disIcon:"RightArrowDis",onActivate:"ZaAccountMemberOfListView.fwdButtonHndlr.call(this,event, ZaAccount.A2_indirectMemberList)",enableDisableChecks:[[ZaAccountMemberOfListView.shouldEnableForwardButton,ZaAccount.A2_indirectMemberList]],enableDisableChangeEventSources:[ZaAccount.A2_indirectMemberList+"_more"]},{type:_CELLSPACER_,height:"100%"}]}]}]},{type:_GROUP_,width:"98%",numCols:1,items:[{type:_ZARIGHT_GROUPER_,numCols:1,width:"100%",label:ZaMsg.Account_NonGroupLabel,containerCssStyle:"padding-top:5px;",items:[{type:_GROUP_,numCols:3,colSizes:["40","auto","80"],width:"98%",items:[{ref:"query",type:_TEXTFIELD_,width:"100%",cssClass:"admin_xform_name_input",nowrap:false,labelWrap:true,label:ZaMsg.DLXV_LabelFind,visibilityChecks:[],enableDisableChecks:[],elementChanged:function(z,y,x){var w=x.charCode;
if(w==13||w==3){ZaAccountMemberOfListView.prototype.srchButtonHndlr.call(this)
}else{this.getForm().itemChanged(this,z,x)
}}},{type:_DWT_BUTTON_,label:ZaMsg.DLXV_ButtonSearch,width:80,onActivate:ZaAccountMemberOfListView.prototype.srchButtonHndlr},{ref:ZaAccount.A2_showSameDomain,type:_WIZ_CHECKBOX_,labelLocation:_RIGHT_,align:_RIGHT_,subLabel:"",label:null,labelLocation:_NONE_,trueValue:"TRUE",falseValue:"FALSE",visibilityChecks:[]},{type:_OUTPUT_,value:ZaMsg.NAD_SearchSameDomain,colSpan:2}]},{ref:ZaAccount.A2_nonMemberList,type:_S_DWT_LIST_,width:"98%",height:460,cssClass:"DLSource",widgetClass:ZaAccountMemberOfListView,headerList:n,defaultColumnSortable:0,onSelection:ZaAccountXFormView.nonMemberOfSelectionListener,forceUpdate:true},{type:_SPACER_,height:"5"},{type:_GROUP_,width:"100%",numCols:8,colSizes:[90,5,90,"auto",30,5,30,5],items:[{type:_DWT_BUTTON_,label:ZaMsg.DLXV_ButtonAddFromList,width:90,enableDisableChecks:[[ZaAccountMemberOfListView.shouldEnableAddRemoveButton,ZaAccount.A2_nonMemberList]],enableDisableChangeEventSources:[ZaAccount.A2_nonMemberListSelected],onActivate:"ZaAccountMemberOfListView.addGroups.call(this,event, ZaAccount.A2_nonMemberList)"},{type:_CELLSPACER_,height:"100%"},{type:_DWT_BUTTON_,label:ZaMsg.DLXV_ButtonAddAll,width:90,enableDisableChangeEventSources:[ZaAccount.A2_nonMemberList],enableDisableChecks:[[ZaAccountMemberOfListView.shouldEnableAllButton,ZaAccount.A2_nonMemberList]],onActivate:"ZaAccountMemberOfListView.addAllGroups.call(this,event, ZaAccount.A2_nonMemberList)"},{type:_CELLSPACER_,height:"100%"},{type:_DWT_BUTTON_,label:"",width:30,id:"backButton",icon:"LeftArrow",disIcon:"LeftArrowDis",enableDisableChangeEventSources:[ZaAccount.A2_nonMemberList+"_offset"],enableDisableChecks:[[ZaAccountMemberOfListView.shouldEnableBackButton,ZaAccount.A2_nonMemberList]],onActivate:"ZaAccountMemberOfListView.backButtonHndlr.call(this,event, ZaAccount.A2_nonMemberList)"},{type:_CELLSPACER_,height:"100%"},{type:_DWT_BUTTON_,label:"",width:30,id:"fwdButton",icon:"RightArrow",disIcon:"RightArrowDis",enableDisableChangeEventSources:[ZaAccount.A2_nonMemberList+"_more"],enableDisableChecks:[[ZaAccountMemberOfListView.shouldEnableForwardButton,ZaAccount.A2_nonMemberList]],onActivate:"ZaAccountMemberOfListView.fwdButtonHndlr.call(this,event, ZaAccount.A2_nonMemberList)"},{type:_CELLSPACER_,height:"100%"}]}]}]},{type:_GROUP_,width:"100%",items:[{type:_CELLSPACER_}]}]};
d.push(f)
}var v={ref:ZaAccount.A_zimbraFeatureMailForwardingEnabled,msgName:ZaMsg.LBL_zimbraFeatureMailForwardingEnabled,trueValue:"TRUE",falseValue:"FALSE"};
if(ZaTabView.isTAB_ENABLED(e,ZaAccountXFormView.FORWARDING_TAB_ATTRS,ZaAccountXFormView.FORWARDING_TAB_RIGHTS)){ZaNewAccountXWizard.FORWARDING_STEP=++this.TAB_INDEX;
this.stepChoices.push({value:ZaNewAccountXWizard.FORWARDING_STEP,label:ZaMsg.TABT_Forwarding});
d.push({type:_CASE_,caseKey:ZaNewAccountXWizard.FORWARDING_STEP,tabGroupKey:ZaNewAccountXWizard.FORWARDING_STEP,numCols:2,colSizes:["250px","auto"],id:"account_form_forwarding_step",items:[{ref:ZaAccount.A_zimbraFeatureMailForwardingEnabled,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,type:_SUPER_WIZ_CHECKBOX_,colSpan:2,checkBoxLabel:ZaMsg.LBL_zimbraFeatureMailForwardingEnabled,trueValue:"TRUE",falseValue:"FALSE",colSizes:["250px","250px","auto"]},{ref:ZaAccount.A_zimbraPrefMailLocalDeliveryDisabled,type:_WIZ_CHECKBOX_,msgName:ZaMsg.LBL_zimbraPrefMailLocalDeliveryDisabled,label:ZaMsg.LBL_zimbraPrefMailLocalDeliveryDisabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaAccount.A_zimbraPrefMailForwardingAddress,width:250,labelCssClass:"xform_label",type:_TEXTFIELD_,msgName:ZaMsg.LBL_zimbraPrefMailForwardingAddress,label:ZaMsg.LBL_zimbraPrefMailForwardingAddress,labelLocation:_LEFT_,cssClass:"admin_xform_name_input",nowrap:false,labelWrap:true,enableDisableChecks:[ZaAccountXFormView.isMailForwardingEnabled],enableDisableChangeEventSources:[ZaAccount.A_zimbraFeatureMailForwardingEnabled,ZaAccount.A_COSId]},{type:_SEPARATOR_,colSpan:2},{type:_DWT_ALERT_,colSpan:2,containerCssStyle:"padding:0 10px 10px;width:100%;",style:DwtAlert.WARNING,iconVisible:true,content:ZaMsg.Alert_Bouncing_Reveal_Hidden_Adds},{ref:ZaAccount.A_zimbraMailForwardingAddress,type:_REPEAT_,label:ZaMsg.NAD_EditFwdGroup,labelLocation:_LEFT_,labelCssClass:"xform_label",repeatInstance:j,showAddButton:true,showRemoveButton:true,addButtonLabel:ZaMsg.NAD_AddAddress,showAddOnNextRow:true,removeButtonLabel:ZaMsg.NAD_RemoveAddress,nowrap:false,labelWrap:true,items:[{ref:".",type:_TEXTFIELD_,label:null,width:250,enableDisableChecks:[],visibilityChecks:[[ZaItem.hasWritePermission,ZaAccount.A_zimbraMailForwardingAddress]]}]},{ref:ZaAccount.A_zimbraPrefCalendarForwardInvitesTo,type:_REPEAT_,label:ZaMsg.zimbraPrefCalendarForwardInvitesTo,labelLocation:_LEFT_,labelCssClass:"xform_label",repeatInstance:j,showAddButton:true,showRemoveButton:true,addButtonLabel:ZaMsg.NAD_AddAddress,showAddOnNextRow:true,removeButtonLabel:ZaMsg.NAD_RemoveAddress,nowrap:false,labelWrap:true,items:[{ref:".",type:_TEXTFIELD_,label:null,width:250,enableDisableChecks:[],visibilityChecks:[[ZaItem.hasWritePermission,ZaAccount.A_zimbraPrefCalendarForwardInvitesTo]]}]}]})
}if(ZaTabView.isTAB_ENABLED(e,ZaAccountXFormView.FEATURE_TAB_ATTRS,ZaAccountXFormView.FEATURE_TAB_RIGHTS)&&!ZaSettings.isOctopus()){ZaNewAccountXWizard.FEATURES_STEP=++this.TAB_INDEX;
this.stepChoices.push({value:ZaNewAccountXWizard.FEATURES_STEP,label:ZaMsg.TABT_Features});
var m={type:_CASE_,caseKey:ZaNewAccountXWizard.FEATURES_STEP,tabGroupKey:ZaNewAccountXWizard.FEATURES_STEP,id:"account_form_features_step",numCols:1,width:"100%",items:[{type:_DWT_ALERT_,containerCssStyle:"padding-top:20px;width:400px;",style:DwtAlert.WARNING,iconVisible:false,content:ZaMsg.NAD_CheckFeaturesInfo}]};
if(ZAWizTopGrouper_XFormItem.isGroupVisible(e,[ZaAccount.A_zimbraFeatureMailEnabled,ZaAccount.A_zimbraFeatureContactsEnabled,ZaAccount.A_zimbraFeatureCalendarEnabled,ZaAccount.A_zimbraFeatureTasksEnabled,ZaAccount.A_zimbraFeatureTasksEnabled,ZaAccount.A_zimbraFeatureBriefcasesEnabled,ZaAccount.A_zimbraFeatureOptionsEnabled],[])){m.items.push({type:_ZAWIZ_TOP_GROUPER_,label:ZaMsg.NAD_zimbraMajorFeature,id:"account_wiz_features_major",colSizes:["auto"],numCols:1,items:[{ref:ZaAccount.A_zimbraFeatureMailEnabled,type:_SUPER_WIZ_CHECKBOX_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_zimbraFeatureMailEnabled,checkBoxLabel:ZaMsg.LBL_zimbraFeatureMailEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaAccount.A_zimbraFeatureContactsEnabled,type:_SUPER_WIZ_CHECKBOX_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_zimbraFeatureContactsEnabled,checkBoxLabel:ZaMsg.LBL_zimbraFeatureContactsEnabled,labelLocation:_LEFT_,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaAccount.A_zimbraFeatureCalendarEnabled,type:_SUPER_WIZ_CHECKBOX_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_zimbraFeatureCalendarEnabled,checkBoxLabel:ZaMsg.LBL_zimbraFeatureCalendarEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaAccount.A_zimbraFeatureTasksEnabled,type:_SUPER_WIZ_CHECKBOX_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_zimbraFeatureTaskEnabled,checkBoxLabel:ZaMsg.LBL_zimbraFeatureTaskEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaAccount.A_zimbraFeatureBriefcasesEnabled,type:_SUPER_WIZ_CHECKBOX_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_zimbraFeatureBriefcasesEnabled,checkBoxLabel:ZaMsg.LBL_zimbraFeatureBriefcasesEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaAccount.A_zimbraFeatureOptionsEnabled,type:_SUPER_WIZ_CHECKBOX_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_zimbraFeatureOptionsEnabled,checkBoxLabel:ZaMsg.LBL_zimbraFeatureOptionsEnabled,trueValue:"TRUE",falseValue:"FALSE"}]})
}if(ZAWizTopGrouper_XFormItem.isGroupVisible(e,[ZaAccount.A_zimbraFeatureTaggingEnabled,ZaAccount.A_zimbraFeatureSharingEnabled,ZaAccount.A_zimbraFeatureChangePasswordEnabled,ZaAccount.A_zimbraFeatureSkinChangeEnabled,ZaAccount.A_zimbraFeatureManageZimlets,ZaAccount.A_zimbraFeatureGalEnabled,ZaAccount.A_zimbraFeatureMAPIConnectorEnabled,ZaAccount.A_zimbraFeatureEwsEnabled,ZaAccount.A_zimbraFeatureTouchClientEnabled,ZaAccount.A_zimbraFeatureWebClientOfflineAccessEnabled,ZaAccount.A_zimbraFeatureGalAutoCompleteEnabled,ZaAccount.A_zimbraFeatureImportFolderEnabled,ZaAccount.A_zimbraFeatureExportFolderEnabled,ZaAccount.A_zimbraFeatureDocumentEditingEnabled,ZaAccount.A_zimbraDumpsterEnabled],[])){m.items.push({type:_ZAWIZ_TOP_GROUPER_,label:ZaMsg.NAD_zimbraGeneralFeature,id:"account_wiz_features_general",colSizes:["auto"],numCols:1,items:[{ref:ZaAccount.A_zimbraFeatureTaggingEnabled,type:_SUPER_WIZ_CHECKBOX_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_zimbraFeatureTaggingEnabled,checkBoxLabel:ZaMsg.LBL_zimbraFeatureTaggingEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaAccount.A_zimbraFeatureSharingEnabled,type:_SUPER_WIZ_CHECKBOX_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_zimbraFeatureSharingEnabled,checkBoxLabel:ZaMsg.LBL_zimbraFeatureSharingEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaAccount.A_zimbraExternalSharingEnabled,type:_SUPER_WIZ_CHECKBOX_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_zimbraExternalSharingEnabled,checkBoxLabel:ZaMsg.LBL_zimbraExternalSharingEnabled,trueValue:"TRUE",falseValue:"FALSE",visibilityChecks:[[ZaItem.hasReadPermission],[XForm.checkInstanceValue,ZaAccount.A_zimbraFeatureSharingEnabled,"TRUE"]],visibilityChangeEventSources:[ZaAccount.A_zimbraFeatureSharingEnabled]},{ref:ZaAccount.A_zimbraPublicSharingEnabled,type:_SUPER_WIZ_CHECKBOX_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_zimbraPublicSharingEnabled,checkBoxLabel:ZaMsg.LBL_zimbraPublicSharingEnabled,trueValue:"TRUE",falseValue:"FALSE",visibilityChecks:[[ZaItem.hasReadPermission],[XForm.checkInstanceValue,ZaAccount.A_zimbraFeatureSharingEnabled,"TRUE"]],visibilityChangeEventSources:[ZaAccount.A_zimbraFeatureSharingEnabled]},{ref:ZaAccount.A_zimbraFeatureChangePasswordEnabled,type:_SUPER_WIZ_CHECKBOX_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_zimbraFeatureChangePasswordEnabled,checkBoxLabel:ZaMsg.LBL_zimbraFeatureChangePasswordEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaAccount.A_zimbraFeatureSkinChangeEnabled,type:_SUPER_WIZ_CHECKBOX_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_zimbraFeatureSkinChangeEnabled,checkBoxLabel:ZaMsg.LBL_zimbraFeatureSkinChangeEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaAccount.A_zimbraFeatureManageZimlets,type:_SUPER_WIZ_CHECKBOX_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_zimbraFeatureManageZimlets,checkBoxLabel:ZaMsg.LBL_zimbraFeatureManageZimlets,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaAccount.A_zimbraFeatureHtmlComposeEnabled,type:_SUPER_WIZ_CHECKBOX_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_zimbraFeatureHtmlComposeEnabled,checkBoxLabel:ZaMsg.LBL_zimbraFeatureHtmlComposeEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaAccount.A_zimbraFeatureGalEnabled,type:_SUPER_WIZ_CHECKBOX_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_zimbraFeatureGalEnabled,checkBoxLabel:ZaMsg.LBL_zimbraFeatureGalEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaAccount.A_zimbraFeatureMAPIConnectorEnabled,type:_SUPER_WIZ_CHECKBOX_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_zimbraFeatureMAPIConnectorEnabled,checkBoxLabel:ZaMsg.LBL_zimbraFeatureMAPIConnectorEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaAccount.A_zimbraFeatureEwsEnabled,type:_SUPER_WIZ_CHECKBOX_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_zimbraFeatureEwsEnabled,checkBoxLabel:ZaMsg.LBL_zimbraFeatureEwsEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaAccount.A_zimbraFeatureTouchClientEnabled,type:_SUPER_WIZ_CHECKBOX_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_zimbraFeatureTouchClientEnabled,checkBoxLabel:ZaMsg.LBL_zimbraFeatureTouchClientEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaAccount.A_zimbraFeatureWebClientOfflineAccessEnabled,type:_SUPER_WIZ_CHECKBOX_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_zimbraFeatureWebClientOfflineAccessEnabled,checkBoxLabel:ZaMsg.LBL_zimbraFeatureWebClientOfflineAccessEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaAccount.A_zimbraFeatureGalAutoCompleteEnabled,type:_SUPER_WIZ_CHECKBOX_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_zimbraFeatureGalAutoCompleteEnabled,checkBoxLabel:ZaMsg.LBL_zimbraFeatureGalAutoCompleteEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaAccount.A_zimbraFeatureImportFolderEnabled,type:_SUPER_WIZ_CHECKBOX_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_zimbraFeatureImportFolderEnabled,checkBoxLabel:ZaMsg.LBL_zimbraFeatureImportFolderEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaAccount.A_zimbraFeatureExportFolderEnabled,type:_SUPER_WIZ_CHECKBOX_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_zimbraFeatureExportFolderEnabled,checkBoxLabel:ZaMsg.LBL_zimbraFeatureExportFolderEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaAccount.A_zimbraDumpsterEnabled,type:_SUPER_WIZ_CHECKBOX_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.MSG_zimbraDumpsterEnabled,checkBoxLabel:ZaMsg.LBL_zimbraDumpsterEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaAccount.A_zimbraDumpsterPurgeEnabled,type:_SUPER_WIZ_CHECKBOX_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.MSG_zimbraDumpsterPurgeEnabled,checkBoxLabel:ZaMsg.LBL_zimbraDumpsterPurgeEnabled,trueValue:"TRUE",falseValue:"FALSE",visibilityChecks:[[ZaItem.hasReadPermission],[XForm.checkInstanceValue,ZaAccount.A_zimbraDumpsterEnabled,"TRUE"]],visibilityChangeEventSources:[ZaAccount.A_zimbraDumpsterEnabled]},{ref:ZaAccount.A_zimbraFeatureDocumentEditingEnabled,type:_SUPER_WIZ_CHECKBOX_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_zimbraFeatureDocumentEditingEnabled,checkBoxLabel:ZaMsg.LBL_zimbraFeatureDocumentEditingEnabled,trueValue:"TRUE",falseValue:"FALSE"}]})
}if(ZAWizTopGrouper_XFormItem.isGroupVisible(e,[ZaAccount.A_zimbraFeatureMailPriorityEnabled,ZaAccount.A_zimbraFeatureFlaggingEnabled,ZaAccount.A_zimbraImapEnabled,ZaAccount.A_zimbraPop3Enabled,ZaAccount.A_zimbraFeatureWebClientEnabled,ZaAccount.A_zimbraFeatureImapDataSourceEnabled,ZaAccount.A_zimbraFeaturePop3DataSourceEnabled,ZaAccount.A_zimbraFeatureConversationsEnabled,ZaAccount.A_zimbraFeatureFiltersEnabled,ZaAccount.A_zimbraFeatureOutOfOfficeReplyEnabled,ZaAccount.A_zimbraFeatureNewMailNotificationEnabled,ZaAccount.A_zimbraFeatureMailSendLaterEnabled,ZaAccount.A_zimbraFeatureIdentitiesEnabled,ZaAccount.A_zimbraFeatureReadReceiptsEnabled],[])){m.items.push({type:_ZAWIZ_TOP_GROUPER_,label:ZaMsg.NAD_zimbraMailFeature,id:"account_wiz_features_mail",colSizes:["auto"],numCols:1,enableDisableChecks:[ZaAccountXFormView.isMailFeatureEnabled],enableDisableChangeEventSources:[ZaAccount.A_zimbraFeatureMailEnabled,ZaAccount.A_COSId],items:[{ref:ZaAccount.A_zimbraFeatureMailPriorityEnabled,type:_SUPER_WIZ_CHECKBOX_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_zimbraFeatureMailPriorityEnabled,checkBoxLabel:ZaMsg.LBL_zimbraFeatureMailPriorityEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaAccount.A_zimbraFeatureFlaggingEnabled,type:_SUPER_WIZ_CHECKBOX_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_zimbraFeatureFlaggingEnabled,checkBoxLabel:ZaMsg.LBL_zimbraFeatureFlaggingEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaAccount.A_zimbraImapEnabled,type:_SUPER_WIZ_CHECKBOX_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_zimbraImapEnabled,checkBoxLabel:ZaMsg.LBL_zimbraImapEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaAccount.A_zimbraPop3Enabled,type:_SUPER_WIZ_CHECKBOX_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_zimbraPop3Enabled,checkBoxLabel:ZaMsg.LBL_zimbraPop3Enabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaAccount.A_zimbraFeatureWebClientEnabled,type:_SUPER_WIZ_CHECKBOX_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_zimbraFeatureWebClientEnabled,checkBoxLabel:ZaMsg.LBL_zimbraFeatureWebClientEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaAccount.A_zimbraFeatureImapDataSourceEnabled,type:_SUPER_WIZ_CHECKBOX_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_zimbraExternalImapEnabled,checkBoxLabel:ZaMsg.LBL_zimbraExternalImapEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaAccount.A_zimbraFeaturePop3DataSourceEnabled,type:_SUPER_WIZ_CHECKBOX_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_zimbraExternalPop3Enabled,checkBoxLabel:ZaMsg.LBL_zimbraExternalPop3Enabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaAccount.A_zimbraFeatureMailSendLaterEnabled,type:_SUPER_WIZ_CHECKBOX_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_zimbraFeatureMailSendLaterEnabled,checkBoxLabel:ZaMsg.LBL_zimbraFeatureMailSendLaterEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaAccount.A_zimbraFeatureConversationsEnabled,type:_SUPER_WIZ_CHECKBOX_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_zimbraFeatureConversationsEnabled,checkBoxLabel:ZaMsg.LBL_zimbraFeatureConversationsEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaAccount.A_zimbraFeatureFiltersEnabled,type:_SUPER_WIZ_CHECKBOX_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_zimbraFeatureFiltersEnabled,checkBoxLabel:ZaMsg.LBL_zimbraFeatureFiltersEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaAccount.A_zimbraFeatureOutOfOfficeReplyEnabled,type:_SUPER_WIZ_CHECKBOX_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_zimbraFeatureOutOfOfficeReplyEnabled,checkBoxLabel:ZaMsg.LBL_zimbraFeatureOutOfOfficeReplyEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaAccount.A_zimbraFeatureNewMailNotificationEnabled,type:_SUPER_WIZ_CHECKBOX_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_zimbraFeatureNewMailNotificationEnabled,checkBoxLabel:ZaMsg.LBL_zimbraFeatureNewMailNotificationEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaAccount.A_zimbraFeatureIdentitiesEnabled,type:_SUPER_WIZ_CHECKBOX_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_zimbraFeatureIdentitiesEnabled,checkBoxLabel:ZaMsg.LBL_zimbraFeatureIdentitiesEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaAccount.A_zimbraFeatureReadReceiptsEnabled,type:_SUPER_WIZ_CHECKBOX_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,checkBoxLabel:ZaMsg.LBL_zimbraFeatureReadReceiptsEnabled,trueValue:"TRUE",falseValue:"FALSE"}]})
}if(ZAWizTopGrouper_XFormItem.isGroupVisible(e,[ZaAccount.A_zimbraFeatureContactsEnabled,ZaAccount.A_zimbraFeatureDistributionListFolderEnabled],[])){m.items.push({type:_ZAWIZ_TOP_GROUPER_,label:ZaMsg.NAD_zimbraContactFeature,id:"account_wiz_features_contact",enableDisableChecks:[ZaNewAccountXWizard.isContactsFeatureEnabled],enableDisableChangeEventSources:[ZaAccount.A_zimbraFeatureContactsEnabled,ZaAccount.A_COSId],items:[{ref:ZaAccount.A_zimbraFeatureDistributionListFolderEnabled,type:_SUPER_WIZ_CHECKBOX_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.MSG_zimbraFeatureDistributionListFolderEnabled,checkBoxLabel:ZaMsg.LBL_zimbraFeatureDistributionListFolderEnabled,trueValue:"TRUE",falseValue:"FALSE"}]})
}if(ZAWizTopGrouper_XFormItem.isGroupVisible(e,[ZaAccount.A_zimbraFeatureGroupCalendarEnabled,ZaAccount.A_zimbraFeatureCalendarReminderDeviceEmailEnabled],[])){m.items.push({type:_ZAWIZ_TOP_GROUPER_,label:ZaMsg.NAD_zimbraCalendarFeature,id:"account_wiz_features_calendar",colSizes:["auto"],numCols:1,enableDisableChecks:[ZaAccountXFormView.isCalendarFeatureEnabled],enableDisableChangeEventSources:[ZaAccount.A_zimbraFeatureCalendarEnabled,ZaAccount.A_COSId],items:[{ref:ZaAccount.A_zimbraFeatureGroupCalendarEnabled,type:_SUPER_WIZ_CHECKBOX_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_zimbraFeatureGroupCalendarEnabled,checkBoxLabel:ZaMsg.LBL_zimbraFeatureGroupCalendarEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaAccount.A_zimbraFeatureCalendarReminderDeviceEmailEnabled,type:_SUPER_WIZ_CHECKBOX_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_zimbraFeatureCalendarReminderDeviceEmailEnabled,checkBoxLabel:ZaMsg.LBL_zimbraFeatureCalendarReminderDeviceEmailEnabled,trueValue:"TRUE",falseValue:"FALSE"}]})
}if(ZAWizTopGrouper_XFormItem.isGroupVisible(e,[ZaAccount.A_zimbraFeatureAdvancedSearchEnabled,ZaAccount.A_zimbraFeatureSavedSearchesEnabled,ZaAccount.A_zimbraFeatureInitialSearchPreferenceEnabled,ZaAccount.A_zimbraFeaturePeopleSearchEnabled],[])){m.items.push({type:_ZAWIZ_TOP_GROUPER_,label:ZaMsg.NAD_zimbraSearchFeature,id:"account_wiz_features_search",colSizes:["auto"],numCols:1,items:[{ref:ZaAccount.A_zimbraFeatureAdvancedSearchEnabled,type:_SUPER_WIZ_CHECKBOX_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_zimbraFeatureAdvancedSearchEnabled,checkBoxLabel:ZaMsg.LBL_zimbraFeatureAdvancedSearchEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaAccount.A_zimbraFeatureSavedSearchesEnabled,type:_SUPER_WIZ_CHECKBOX_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_zimbraFeatureSavedSearchesEnabled,checkBoxLabel:ZaMsg.LBL_zimbraFeatureSavedSearchesEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaAccount.A_zimbraFeatureInitialSearchPreferenceEnabled,type:_SUPER_WIZ_CHECKBOX_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_zimbraFeatureInitialSearchPreferenceEnabled,checkBoxLabel:ZaMsg.LBL_zimbraFeatureInitialSearchPreferenceEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaAccount.A_zimbraFeaturePeopleSearchEnabled,type:_SUPER_WIZ_CHECKBOX_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_zimbraFeaturePeopleSearchEnabled,checkBoxLabel:ZaMsg.LBL_zimbraFeaturePeopleSearchEnabled,trueValue:"TRUE",falseValue:"FALSE"}]})
}if(ZAWizTopGrouper_XFormItem.isGroupVisible(e,[ZaAccount.A_zimbraFeatureSMIMEEnabled],[])){m.items.push({type:_ZAWIZ_TOP_GROUPER_,label:ZaMsg.NAD_zimbraSMIMEFeature,id:"account_wiz_features_smime",colSizes:["auto"],numCols:1,items:[{ref:ZaAccount.A_zimbraFeatureSMIMEEnabled,type:_SUPER_WIZ_CHECKBOX_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_zimbraFeatureSMIMEEnabled,checkBoxLabel:ZaMsg.LBL_zimbraFeatureSMIMEEnabled,trueValue:"TRUE",falseValue:"FALSE"}]})
}d.push(m)
}if(ZaTabView.isTAB_ENABLED(e,ZaAccountXFormView.PREFERENCES_TAB_ATTRS,ZaAccountXFormView.PREFERENCES_TAB_RIGHTS)){ZaNewAccountXWizard.PREFS_STEP=++this.TAB_INDEX;
this.stepChoices.push({value:ZaNewAccountXWizard.PREFS_STEP,label:ZaMsg.TABT_Preferences});
var q=[];
if(ZAWizTopGrouper_XFormItem.isGroupVisible(e,[ZaAccount.A_zimbraPrefImapSearchFoldersEnabled,ZaAccount.A_zimbraPrefShowSearchString,ZaAccount.A_zimbraPrefUseKeyboardShortcuts,ZaAccount.A_zimbraPrefMailInitialSearch,ZaAccount.A_zimbraPrefWarnOnExit,ZaAccount.A_zimbraPrefAdminConsoleWarnOnExit,ZaAccount.A_zimbraPrefShowSelectionCheckbox,ZaAccount.A_zimbraJunkMessagesIndexingEnabled,ZaAccount.A_zimbraPrefLocale],[])){q.push({type:_ZAWIZ_TOP_GROUPER_,id:"account_prefs_general",label:ZaMsg.NAD_GeneralOptions,items:[{ref:ZaAccount.A_zimbraPrefImapSearchFoldersEnabled,type:_SUPER_WIZ_CHECKBOX_,colSpan:2,colSizes:["200px","300px","*"],resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_zimbraPrefImapSearchFoldersEnabled,checkBoxLabel:ZaMsg.LBL_zimbraPrefImapSearchFoldersEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaAccount.A_zimbraPrefShowSearchString,type:_SUPER_WIZ_CHECKBOX_,colSpan:2,colSizes:["200px","300px","*"],resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_zimbraPrefShowSearchString,checkBoxLabel:ZaMsg.LBL_zimbraPrefShowSearchString,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaAccount.A_zimbraPrefUseKeyboardShortcuts,type:_SUPER_WIZ_CHECKBOX_,colSpan:2,colSizes:["200px","300px","*"],resetToSuperLabel:ZaMsg.NAD_ResetToCOS,checkBoxLabel:ZaMsg.LBL_zimbraPrefUseKeyboardShortcuts,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaAccount.A_zimbraPrefClientType,type:_SUPERWIZ_SELECT1_,colSizes:["300px","*"],msgName:ZaMsg.MSG_zimbraPrefClientType,label:ZaMsg.LBL_zimbraPrefClientType,labelLocation:_LEFT_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS},{ref:ZaAccount.A_zimbraPrefMailInitialSearch,type:_SUPERWIZ_TEXTFIELD_,colSpan:2,colSizes:["200px","300px","*"],msgName:ZaMsg.LBL_zimbraPrefMailInitialSearch,txtBoxLabel:ZaMsg.LBL_zimbraPrefMailInitialSearch,labelLocation:_LEFT_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS},{ref:ZaAccount.A_zimbraPrefWarnOnExit,type:_SUPER_WIZ_CHECKBOX_,colSpan:2,colSizes:["200px","300px","*"],resetToSuperLabel:ZaMsg.NAD_ResetToCOS,checkBoxLabel:ZaMsg.LBL_zimbraPrefWarnOnExit,labelWrap:true,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaAccount.A_zimbraPrefAdminConsoleWarnOnExit,type:_SUPER_WIZ_CHECKBOX_,colSpan:2,colSizes:["200px","300px","*"],resetToSuperLabel:ZaMsg.NAD_ResetToCOS,checkBoxLabel:ZabMsg.LBL_zimbraPrefAdminConsoleWarnOnExit,labelWrap:true,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaAccount.A_zimbraPrefShowSelectionCheckbox,type:_SUPER_WIZ_CHECKBOX_,colSpan:2,colSizes:["200px","300px","*"],resetToSuperLabel:ZaMsg.NAD_ResetToCOS,checkBoxLabel:ZaMsg.LBL_zimbraPrefShowSelectionCheckbox,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaAccount.A_zimbraJunkMessagesIndexingEnabled,type:_SUPER_WIZ_CHECKBOX_,colSpan:2,colSizes:["200px","300px","*"],resetToSuperLabel:ZaMsg.NAD_ResetToCOS,checkBoxLabel:ZaMsg.LBL_zimbraJunkMessagesIndexingEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaAccount.A_zimbraPrefLocale,type:_SUPERWIZ_SELECT1_,msgName:ZaMsg.LBL_zimbraPrefMailLocale,choices:ZaSettings.getLocaleChoices(),colSizes:["300px","*"],label:ZaMsg.LBL_zimbraPrefLocale,labelLocation:_LEFT_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS}]})
}if(ZAWizTopGrouper_XFormItem.isGroupVisible(e,[ZaAccount.A_zimbraPrefMailItemsPerPage,ZaAccount.A_zimbraMaxMailItemsPerPage],[])){q.push({type:_ZAWIZ_TOP_GROUPER_,id:"account_prefs_standard_client",borderCssClass:"LowPaddedTopGrouperBorder",label:ZaMsg.NAD_MailOptionsStandardClient,items:[{ref:ZaAccount.A_zimbraMaxMailItemsPerPage,type:_SUPERWIZ_SELECT1_,colSizes:["300px","*"],editable:true,inputSize:4,choices:[10,25,50,100,250,500,1000],msgName:ZaMsg.MSG_zimbraMaxMailItemsPerPage,label:ZaMsg.LBL_zimbraMaxMailItemsPerPage,labelLocation:_LEFT_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,valueLabel:null},{ref:ZaAccount.A_zimbraPrefMailItemsPerPage,type:_SUPERWIZ_SELECT1_,colSizes:["300px","*"],msgName:ZaMsg.MSG_zimbraPrefMailItemsPerPage,label:ZaMsg.LBL_zimbraPrefMailItemsPerPage,labelLocation:_LEFT_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,valueLabel:null}]});
q.push({type:_SPACER_,height:"10px"})
}if(ZAWizTopGrouper_XFormItem.isGroupVisible(e,[ZaAccount.A_zimbraPrefMessageViewHtmlPreferred,ZaAccount.A_zimbraPrefDisplayExternalImages,ZaAccount.A_zimbraPrefMailToasterEnabled,ZaAccount.A_zimbraPrefMessageIdDedupingEnabled,ZaAccount.A_zimbraPrefGroupMailBy,ZaAccount.A_zimbraPrefMailDefaultCharset,ZaAccount.A_zimbraPrefItemsPerVirtualPage],[])){q.push({type:_ZAWIZ_TOP_GROUPER_,id:"account_prefs_mail_general",label:ZaMsg.NAD_MailOptions,items:[{ref:ZaAccount.A_zimbraPrefMessageViewHtmlPreferred,type:_SUPER_WIZ_CHECKBOX_,colSpan:2,colSizes:["200px","300px","*"],resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_zimbraPrefMessageViewHtmlPreferred,checkBoxLabel:ZaMsg.LBL_zimbraPrefMessageViewHtmlPreferred,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaAccount.A_zimbraPrefDisplayExternalImages,type:_SUPER_WIZ_CHECKBOX_,colSpan:2,colSizes:["200px","300px","*"],resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_zimbraPrefDisplayExternalImages,checkBoxLabel:ZaMsg.LBL_zimbraPrefDisplayExternalImages,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaAccount.A_zimbraPrefGroupMailBy,type:_SUPERWIZ_SELECT1_,colSizes:["300px","*"],resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_zimbraPrefGroupMailBy,label:ZaMsg.LBL_zimbraPrefGroupMailBy,labelLocation:_LEFT_},{ref:ZaAccount.A_zimbraPrefMailDefaultCharset,type:_SUPERWIZ_SELECT1_,colSizes:["300px","*"],msgName:ZaMsg.LBL_zimbraPrefMailDefaultCharset,label:ZaMsg.LBL_zimbraPrefMailDefaultCharset,labelLocation:_LEFT_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS},{ref:ZaAccount.A_zimbraPrefMailToasterEnabled,type:_SUPER_WIZ_CHECKBOX_,colSpan:2,colSizes:["200px","300px","*"],resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.MSG_zimbraPrefMailToasterEnabled,checkBoxLabel:ZaMsg.LBL_zimbraPrefMailToasterEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaAccount.A_zimbraPrefMessageIdDedupingEnabled,type:_SUPER_WIZ_CHECKBOX_,colSpan:2,colSizes:["200px","300px","*"],resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.MSG_zimbraPrefMessageIdDedupingEnabled,checkBoxLabel:ZaMsg.LBL_zimbraPrefMessageIdDedupingEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaAccount.A_zimbraPrefItemsPerVirtualPage,type:_SUPERWIZ_TEXTFIELD_,colSizes:["200px","*"],colSpan:2,nowrap:false,labelWrap:true,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_zimbraPrefItemsPerVirtualPage,txtBoxLabel:ZaMsg.LBL_zimbraPrefItemsPerVirtualPage}]})
}if(ZAWizTopGrouper_XFormItem.isGroupVisible(e,[ZaAccount.A_zimbraPrefMailPollingInterval,ZaAccount.A_zimbraMailMinPollingInterval,ZaAccount.A_zimbraPrefNewMailNotificationEnabled,ZaAccount.A_zimbraPrefNewMailNotificationAddress,ZaAccount.A_zimbraPrefOutOfOfficeReplyEnabled,ZaAccount.A_zimbraPrefOutOfOfficeReplyEnabled,ZaAccount.A_zimbraPrefOutOfOfficeCacheDuration,ZaAccount.A_zimbraPrefOutOfOfficeReply,ZaAccount.A_zimbraPrefReadReceiptsToAddress,ZaAccount.A_zimbraPrefMailSendReadReceipts],[])){q.push({type:_ZAWIZ_TOP_GROUPER_,id:"account_prefs_mail_receiving",label:ZaMsg.NAD_MailOptionsReceiving,items:[{ref:ZaAccount.A_zimbraPrefMailPollingInterval,type:_SUPERWIZ_SELECT1_,colSizes:["300px","*"],msgName:ZaMsg.MSG_zimbraPrefMailPollingInterval,label:ZaMsg.LBL_zimbraPrefMailPollingInterval,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,onChange:ZaAccountXFormView.validatePollingInterval,nowrap:false,labelWrap:true},{ref:ZaAccount.A_zimbraMailMinPollingInterval,type:_SUPERWIZ_LIFETIME_,colSizes:["200px","130px","170px","*"],msgName:ZaMsg.MSG_zimbraMailMinPollingInterval,txtBoxLabel:ZaMsg.LBL_zimbraMailMinPollingInterval,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,onChange:ZaAccountXFormView.validatePollingInterval,colSpan:2,nowrap:false,labelWrap:true},{ref:ZaAccount.A_zimbraPrefNewMailNotificationEnabled,type:_WIZ_CHECKBOX_,msgName:ZaMsg.LBL_zimbraPrefNewMailNotificationEnabled,label:ZaMsg.LBL_zimbraPrefNewMailNotificationEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaAccount.A_zimbraPrefNewMailNotificationAddress,type:_TEXTFIELD_,msgName:ZaMsg.MSG_zimbraPrefNewMailNotificationAddress,label:ZaMsg.LBL_zimbraPrefNewMailNotificationAddress,labelLocation:_LEFT_,enableDisableChecks:[ZaAccountXFormView.isMailNotificationAddressEnabled],enableDisableChangeEventSources:[ZaAccount.A_zimbraPrefNewMailNotificationEnabled]},{ref:ZaAccount.A_zimbraPrefOutOfOfficeReplyEnabled,type:_WIZ_CHECKBOX_,msgName:ZaMsg.LBL_zimbraPrefOutOfOfficeReplyEnabled,label:ZaMsg.LBL_zimbraPrefOutOfOfficeReplyEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaAccount.A_zimbraPrefOutOfOfficeCacheDuration,type:_SUPERWIZ_LIFETIME_,colSizes:["200px","130px","170px","*"],msgName:ZaMsg.LBL_zimbraPrefOutOfOfficeCacheDuration,txtBoxLabel:ZaMsg.LBL_zimbraPrefOutOfOfficeCacheDuration,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,colSpan:2,nowrap:false,labelWrap:true},{ref:ZaAccount.A_zimbraPrefOutOfOfficeReply,type:_TEXTAREA_,msgName:ZaMsg.LBL_zimbraPrefOutOfOfficeReply,label:ZaMsg.LBL_zimbraPrefOutOfOfficeReply,labelLocation:_LEFT_,labelCssStyle:"vertical-align:top;",width:"30em",enableDisableChecks:[ZaAccountXFormView.isOutOfOfficeReplyEnabled],enableDisableChangeEventSources:[ZaAccount.A_zimbraPrefOutOfOfficeReplyEnabled]},{ref:ZaAccount.A_zimbraPrefMailSendReadReceipts,type:_SUPERWIZ_SELECT1_,colSizes:["300px","*"],resetToSuperLabel:ZaMsg.NAD_ResetToCOS,label:ZaMsg.LBL_zimbraPrefMailSendReadReceipts,nowrap:false,labelWrap:true,enableDisableChecks:[[XForm.checkInstanceValue,ZaAccount.A_zimbraFeatureReadReceiptsEnabled,"TRUE"],[ZaItem.hasWritePermission,ZaAccount.A_zimbraPrefMailSendReadReceipts]],enableDisableChangeEventSources:[ZaAccount.A_zimbraFeatureReadReceiptsEnabled]},{ref:ZaAccount.A_zimbraPrefReadReceiptsToAddress,type:_TEXTFIELD_,label:ZaMsg.LBL_zimbraPrefReadReceiptsToAddress,nowrap:false,labelWrap:true,msgName:ZaMsg.LBL_zimbraPrefReadReceiptsToAddress,labelLocation:_LEFT_,cssClass:"admin_xform_name_input",width:150,enableDisableChecks:[[XForm.checkInstanceValue,ZaAccount.A_zimbraFeatureReadReceiptsEnabled,"TRUE"],[ZaItem.hasWritePermission,ZaAccount.A_zimbraPrefReadReceiptsToAddress]],enableDisableChangeEventSources:[ZaAccount.A_zimbraFeatureReadReceiptsEnabled]}]})
}if(ZAWizTopGrouper_XFormItem.isGroupVisible(e,[ZaAccount.A_prefSaveToSent,ZaAccount.A_zimbraAllowAnyFromAddress,ZaAccount.A_zimbraAllowFromAddress],[])){q.push({type:_ZAWIZ_TOP_GROUPER_,id:"account_prefs_mail_sending",borderCssClass:"LowPaddedTopGrouperBorder",label:ZaMsg.NAD_MailOptionsSending,items:[{ref:ZaAccount.A_zimbraPrefSaveToSent,colSpan:2,colSizes:["200px","300px","*"],type:_SUPER_WIZ_CHECKBOX_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_zimbraPrefSaveToSent,checkBoxLabel:ZaMsg.LBL_zimbraPrefSaveToSent,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaAccount.A_zimbraAllowAnyFromAddress,colSpan:2,colSizes:["200px","300px","*"],type:_SUPER_WIZ_CHECKBOX_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_zimbraAllowAnyFromAddress,checkBoxLabel:ZaMsg.LBL_zimbraAllowAnyFromAddress,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaAccount.A_zimbraAllowFromAddress,type:_REPEAT_,label:ZaMsg.LBL_zimbraAllowFromAddress,labelLocation:_LEFT_,addButtonLabel:ZaMsg.NAD_AddAddress,align:_LEFT_,repeatInstance:j,showAddButton:true,showRemoveButton:true,showAddOnNextRow:true,removeButtonLabel:ZaMsg.NAD_RemoveAddress,items:[{ref:".",type:_TEXTFIELD_,label:null,width:"200px",enableDisableChecks:[],visibilityChecks:[]}],nowrap:false,labelWrap:true,enableDisableChecks:[],visibilityChecks:[ZaAccountXFormView.isSendingFromAnyAddressDisAllowed,[ZaItem.hasWritePermission,ZaAccount.A_zimbraAllowFromAddress]],visibilityChangeEventSources:[ZaAccount.A_zimbraAllowAnyFromAddress,ZaAccount.A_zimbraAllowFromAddress,ZaAccount.A_COSId]}]})
}if(ZAWizTopGrouper_XFormItem.isGroupVisible(e,[ZaAccount.A_zimbraPrefComposeInNewWindow,ZaAccount.A_zimbraPrefComposeFormat,ZaAccount.A_zimbraPrefHtmlEditorDefaultFontFamily,ZaAccount.A_zimbraPrefHtmlEditorDefaultFontSize,ZaAccount.A_zimbraPrefHtmlEditorDefaultFontColor,ZaAccount.A_zimbraPrefForwardReplyInOriginalFormat,ZaAccount.A_zimbraPrefMailSignatureEnabled,ZaAccount.A_zimbraMailSignatureMaxLength,ZaAccount.A_zimbraPrefMailSignature,ZaAccount.A_zimbraPrefMandatorySpellCheckEnabled,ZaAccount.A_zimbraPrefAutoSaveDraftInterval],[])){q.push({type:_ZAWIZ_TOP_GROUPER_,id:"account_prefs_mail_composing",borderCssClass:"LowPaddedTopGrouperBorder",label:ZaMsg.NAD_MailOptionsComposing,items:[{ref:ZaAccount.A_zimbraPrefComposeInNewWindow,colSpan:2,type:_SUPER_WIZ_CHECKBOX_,colSizes:["200px","300px","*"],resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_zimbraPrefComposeInNewWindow,checkBoxLabel:ZaMsg.LBL_zimbraPrefComposeInNewWindow,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaAccount.A_zimbraPrefComposeFormat,type:_SUPERWIZ_SELECT1_,colSizes:["300px","*"],resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_zimbraPrefComposeFormat,label:ZaMsg.LBL_zimbraPrefComposeFormat},{ref:ZaAccount.A_zimbraPrefHtmlEditorDefaultFontFamily,type:_SUPERWIZ_SELECT1_,colSizes:["300px","*"],msgName:ZaMsg.LBL_zimbraPrefHtmlEditorDefaultFontFamily,label:ZaMsg.LBL_zimbraPrefHtmlEditorDefaultFontFamily,labelLocation:_LEFT_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,valueLabel:null},{ref:ZaAccount.A_zimbraPrefHtmlEditorDefaultFontSize,type:_SUPERWIZ_SELECT1_,colSizes:["300px","*"],msgName:ZaMsg.LBL_zimbraPrefHtmlEditorDefaultFontSize,label:ZaMsg.LBL_zimbraPrefHtmlEditorDefaultFontSize,labelLocation:_LEFT_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,valueLabel:null},{ref:ZaAccount.A_zimbraPrefHtmlEditorDefaultFontColor,type:_SUPERWIZ_DWT_COLORPICKER_,msgName:ZaMsg.LBL_zimbraPrefHtmlEditorDefaultFontColor,label:ZaMsg.LBL_zimbraPrefHtmlEditorDefaultFontColor,labelLocation:_LEFT_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS},{ref:ZaAccount.A_zimbraPrefForwardReplyInOriginalFormat,colSpan:2,type:_SUPER_WIZ_CHECKBOX_,colSizes:["200px","300px","*"],resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_zimbraPrefForwardReplyInOriginalFormat,checkBoxLabel:ZaMsg.LBL_zimbraPrefForwardReplyInOriginalFormat,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaAccount.A_zimbraPrefMandatorySpellCheckEnabled,colSpan:2,type:_SUPER_WIZ_CHECKBOX_,colSizes:["200px","300px","*"],resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_zimbraPrefMandatorySpellCheckEnabled,checkBoxLabel:ZaMsg.LBL_zimbraPrefMandatorySpellCheckEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaAccount.A_zimbraPrefMailSignatureEnabled,colSizes:["200px","300px","*"],type:_WIZ_CHECKBOX_,msgName:ZaMsg.LBL_zimbraPrefMailSignatureEnabled,label:ZaMsg.LBL_zimbraPrefMailSignatureEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaAccount.A_zimbraMailSignatureMaxLength,type:_SUPERWIZ_TEXTFIELD_,colSpan:2,colSizes:["200px","300px","*"],txtBoxLabel:ZaMsg.LBL_zimbraMailSignatureMaxLength,msgName:ZaMsg.MSG_zimbraMailSignatureMaxLength,labelLocation:_LEFT_,textFieldCssClass:"admin_xform_number_input",resetToSuperLabel:ZaMsg.NAD_ResetToCOS},{ref:ZaAccount.A_zimbraPrefMailSignature,type:_TEXTAREA_,colSizes:["200px","300px","*"],msgName:ZaMsg.MSG_zimbraPrefMailSignature,label:ZaMsg.LBL_zimbraPrefMailSignature,labelLocation:_LEFT_,labelCssStyle:"vertical-align:top;",width:"30em",enableDisableChangeEventSources:[ZaAccount.A_zimbraPrefMailSignatureEnabled],enableDisableChecks:[ZaAccountXFormView.isMailSignatureEnabled]},{ref:ZaAccount.A_zimbraPrefAutoSaveDraftInterval,type:_SUPERWIZ_LIFETIME_,colSizes:["200px","80px","220px","*"],msgName:ZaMsg.MSG_zimbraPrefAutoSaveDraftInterval,txtBoxLabel:ZaMsg.LBL_zimbraPrefAutoSaveDraftInterval,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,colSpan:2,nowrap:false,labelWrap:true}]})
}if(ZAWizTopGrouper_XFormItem.isGroupVisible(e,[ZaAccount.A_zimbraPrefImapEnabled,ZaAccount.A_zimbraPrefPop3Enabled],[])){q.push({type:_ZAWIZ_TOP_GROUPER_,id:"account_prefs_pop_imap",label:ZaMsg.NAD_PopImapOptions,items:[{ref:ZaAccount.A_zimbraPrefImapEnabled,type:_SUPER_WIZ_CHECKBOX_,colSpan:2,colSizes:["200px","300px","*"],resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_zimbraPrefImapEnabled,checkBoxLabel:ZaMsg.LBL_zimbraPrefImapEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaAccount.A_zimbraPrefPop3Enabled,type:_SUPER_WIZ_CHECKBOX_,colSpan:2,colSizes:["200px","300px","*"],resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_zimbraPrefPop3Enabled,checkBoxLabel:ZaMsg.LBL_zimbraPrefPop3Enabled,trueValue:"TRUE",falseValue:"FALSE"}]})
}if(ZAWizTopGrouper_XFormItem.isGroupVisible(e,[ZaAccount.A_zimbraPrefAutoAddAddressEnabled,ZaAccount.A_zimbraPrefGalAutoCompleteEnabled],[])){q.push({type:_ZAWIZ_TOP_GROUPER_,id:"account_prefs_contacts_general",label:ZaMsg.NAD_ContactsOptions,items:[{ref:ZaAccount.A_zimbraPrefAutoAddAddressEnabled,type:_SUPER_WIZ_CHECKBOX_,colSpan:2,colSizes:["200px","300px","*"],resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_zimbraPrefAutoAddAddressEnabled,checkBoxLabel:ZaMsg.LBL_zimbraPrefAutoAddAddressEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaAccount.A_zimbraPrefGalAutoCompleteEnabled,type:_SUPER_WIZ_CHECKBOX_,colSpan:2,colSizes:["200px","300px","*"],resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_zimbraPrefGalAutoCompleteEnabled,checkBoxLabel:ZaMsg.LBL_zimbraPrefGalAutoCompleteEnabled,trueValue:"TRUE",falseValue:"FALSE"}]})
}if(ZAWizTopGrouper_XFormItem.isGroupVisible(e,[ZaAccount.A_zimbraPrefTimeZoneId,ZaAccount.A_zimbraPrefCalendarApptReminderWarningTime,ZaAccount.A_zimbraPrefCalendarAlwaysShowMiniCal,ZaAccount.A_zimbraPrefCalendarUseQuickAdd,ZaAccount.A_zimbraPrefUseTimeZoneListInCalendar,ZaAccount.A_zimbraPrefCalendarInitialView,ZaAccount.A_zimbraPrefCalendarFirstDayOfWeek,ZaAccount.A_zimbraPrefCalendarNotifyDelegatedChanges,ZaAccount.A_zimbraPrefCalendarApptVisibility,ZaAccount.A_zimbraPrefCalendarReminderSoundsEnabled,ZaAccount.A_zimbraPrefCalendarSendInviteDeniedAutoReply,ZaAccount.A_zimbraPrefCalendarAutoAddInvites,ZaAccount.A_zimbraPrefCalendarAllowForwardedInvite,ZaAccount.A_zimbraPrefCalendarReminderFlashTitle,ZaAccount.A_zimbraPrefCalendarAllowCancelEmailToSelf,ZaAccount.A_zimbraPrefCalendarToasterEnabled,ZaAccount.A_zimbraPrefCalendarShowPastDueReminders,ZaAccount.A_zimbraPrefAppleIcalDelegationEnabled],[])){q.push({type:_ZAWIZ_TOP_GROUPER_,id:"account_prefs_calendar_general",label:ZaMsg.NAD_CalendarOptions,items:[{ref:ZaAccount.A_zimbraPrefTimeZoneId,type:_SUPERWIZ_SELECT1_,msgName:ZaMsg.LBL_zimbraPrefTimeZoneId,valueWidth:"280px",colSizes:["300px","*"],label:ZaMsg.LBL_zimbraPrefTimeZoneId,labelLocation:_LEFT_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS},{ref:ZaAccount.A_zimbraPrefCalendarApptReminderWarningTime,type:_SUPERWIZ_SELECT1_,colSizes:["300px","*"],msgName:ZaMsg.LBL_zimbraPrefCalendarApptReminderWarningTime,label:ZaMsg.LBL_zimbraPrefCalendarApptReminderWarningTime,labelLocation:_LEFT_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS},{ref:ZaAccount.A_zimbraPrefCalendarInitialView,type:_SUPERWIZ_SELECT1_,colSizes:["300px","*"],msgName:ZaMsg.MSG_zimbraPrefCalendarInitialView,label:ZaMsg.LBL_zimbraPrefCalendarInitialView,labelLocation:_LEFT_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS},{ref:ZaAccount.A_zimbraPrefCalendarFirstDayOfWeek,type:_SUPERWIZ_SELECT1_,colSizes:["300px","*"],msgName:ZaMsg.LBL_zimbraPrefCalendarFirstDayOfWeek,label:ZaMsg.LBL_zimbraPrefCalendarFirstDayOfWeek,labelLocation:_LEFT_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS},{ref:ZaAccount.A_zimbraPrefCalendarApptVisibility,type:_SUPERWIZ_SELECT1_,colSizes:["300px","*"],msgName:ZaMsg.LBL_zimbraPrefCalendarApptVisibility,label:ZaMsg.LBL_zimbraPrefCalendarApptVisibility,labelLocation:_LEFT_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS},{ref:ZaAccount.A_zimbraPrefAppleIcalDelegationEnabled,type:_SUPER_WIZ_CHECKBOX_,colSpan:2,colSizes:["200px","300px","*"],resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.MSG_zimbraPrefAppleIcalDelegationEnabled,checkBoxLabel:ZaMsg.LBL_zimbraPrefAppleIcalDelegationEnabled,trueValue:"TRUE",falseValue:"FALSE",nowrap:false,labelWrap:true},{ref:ZaAccount.A_zimbraPrefCalendarShowPastDueReminders,type:_SUPER_WIZ_CHECKBOX_,colSpan:2,colSizes:["200px","300px","*"],resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.MSG_zimbraPrefCalendarShowPastDueReminders,checkBoxLabel:ZaMsg.LBL_zimbraPrefCalendarShowPastDueReminders,trueValue:"TRUE",falseValue:"FALSE",nowrap:false,labelWrap:true},{ref:ZaAccount.A_zimbraPrefCalendarToasterEnabled,type:_SUPER_WIZ_CHECKBOX_,colSpan:2,colSizes:["200px","300px","*"],resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.MSG_zimbraPrefCalendarToasterEnabled,checkBoxLabel:ZaMsg.LBL_zimbraPrefCalendarToasterEnabled,trueValue:"TRUE",falseValue:"FALSE",nowrap:false,labelWrap:true},{ref:ZaAccount.A_zimbraPrefCalendarAllowCancelEmailToSelf,type:_SUPER_WIZ_CHECKBOX_,colSpan:2,colSizes:["200px","300px","*"],resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.MSG_zimbraPrefCalendarAllowCancelEmailToSelf,checkBoxLabel:ZaMsg.LBL_zimbraPrefCalendarAllowCancelEmailToSelf,trueValue:"TRUE",falseValue:"FALSE",nowrap:false,labelWrap:true},{ref:ZaAccount.A_zimbraPrefCalendarAllowPublishMethodInvite,type:_SUPER_WIZ_CHECKBOX_,colSpan:2,colSizes:["200px","300px","*"],resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.MSG_zimbraPrefCalendarAllowPublishMethodInvite,checkBoxLabel:ZaMsg.LBL_zimbraPrefCalendarAllowPublishMethodInvite,trueValue:"TRUE",falseValue:"FALSE",nowrap:false,labelWrap:true},{ref:ZaAccount.A_zimbraPrefCalendarAllowForwardedInvite,type:_SUPER_WIZ_CHECKBOX_,colSpan:2,colSizes:["200px","300px","*"],resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.MSG_zimbraPrefCalendarAllowForwardedInvite,checkBoxLabel:ZaMsg.LBL_zimbraPrefCalendarAllowForwardedInvite,trueValue:"TRUE",falseValue:"FALSE",nowrap:false,labelWrap:true},{ref:ZaAccount.A_zimbraPrefCalendarReminderFlashTitle,type:_SUPER_WIZ_CHECKBOX_,colSpan:2,colSizes:["200px","300px","*"],resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.MSG_zimbraPrefCalendarReminderFlashTitle,checkBoxLabel:ZaMsg.LBL_zimbraPrefCalendarReminderFlashTitle,trueValue:"TRUE",falseValue:"FALSE",nowrap:false,labelWrap:true},{ref:ZaAccount.A_zimbraPrefCalendarReminderSoundsEnabled,type:_SUPER_WIZ_CHECKBOX_,colSpan:2,colSizes:["200px","300px","*"],resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_zimbraPrefCalendarReminderSoundsEnabled,checkBoxLabel:ZaMsg.LBL_zimbraPrefCalendarReminderSoundsEnabled,trueValue:"TRUE",falseValue:"FALSE",nowrap:false,labelWrap:true},{ref:ZaAccount.A_zimbraPrefCalendarSendInviteDeniedAutoReply,type:_SUPER_WIZ_CHECKBOX_,colSpan:2,colSizes:["200px","300px","*"],resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_zimbraPrefCalendarSendInviteDeniedAutoReply,checkBoxLabel:ZaMsg.LBL_zimbraPrefCalendarSendInviteDeniedAutoReply,trueValue:"TRUE",falseValue:"FALSE",nowrap:false,labelWrap:true},{ref:ZaAccount.A_zimbraPrefCalendarAutoAddInvites,type:_SUPER_WIZ_CHECKBOX_,colSpan:2,colSizes:["200px","300px","*"],resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_zimbraPrefCalendarAutoAddInvites,checkBoxLabel:ZaMsg.LBL_zimbraPrefCalendarAutoAddInvites,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaAccount.A_zimbraPrefCalendarNotifyDelegatedChanges,type:_SUPER_WIZ_CHECKBOX_,colSpan:2,colSizes:["200px","300px","*"],resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_zimbraPrefCalendarNotifyDelegatedChanges,checkBoxLabel:ZaMsg.LBL_zimbraPrefCalendarNotifyDelegatedChanges,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaAccount.A_zimbraPrefCalendarAlwaysShowMiniCal,type:_SUPER_WIZ_CHECKBOX_,colSpan:2,colSizes:["200px","300px","*"],resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_zimbraPrefCalendarAlwaysShowMiniCal,checkBoxLabel:ZaMsg.LBL_zimbraPrefCalendarAlwaysShowMiniCal,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaAccount.A_zimbraPrefCalendarUseQuickAdd,type:_SUPER_WIZ_CHECKBOX_,colSpan:2,colSizes:["200px","300px","*"],resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_zimbraPrefCalendarUseQuickAdd,checkBoxLabel:ZaMsg.LBL_zimbraPrefCalendarUseQuickAdd,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaAccount.A_zimbraPrefUseTimeZoneListInCalendar,type:_SUPER_WIZ_CHECKBOX_,colSpan:2,colSizes:["200px","300px","*"],resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_zimbraPrefUseTimeZoneListInCalendar,checkBoxLabel:ZaMsg.LBL_zimbraPrefUseTimeZoneListInCalendar,trueValue:"TRUE",falseValue:"FALSE"}]})
}d.push({type:_CASE_,caseKey:ZaNewAccountXWizard.PREFS_STEP,tabGroupKey:ZaNewAccountXWizard.PREFS_STEP,numCols:1,width:"680",items:q})
}if(ZaTabView.isTAB_ENABLED(e,ZaAccountXFormView.SKIN_TAB_ATTRS,ZaAccountXFormView.SKIN_TAB_RIGHTS)&&!ZaSettings.isOctopus()){ZaNewAccountXWizard.SKINS_STEP=++this.TAB_INDEX;
this.stepChoices.push({value:ZaNewAccountXWizard.SKINS_STEP,label:ZaMsg.TABT_Themes});
d.push({type:_CASE_,caseKey:ZaNewAccountXWizard.SKINS_STEP,tabGroupKey:ZaNewAccountXWizard.SKINS_STEP,id:"account_form_themes_step",numCols:1,width:"100%",items:[{type:_GROUP_,items:[{ref:ZaAccount.A_zimbraPrefSkin,type:_SUPERWIZ_SELECT1_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_zimbraPrefSkin,label:ZaMsg.LBL_zimbraPrefSkin,labelLocation:_LEFT_,choices:ZaNewAccountXWizard.themeChoices,visibilityChecks:[ZaAccountXFormView.gotSkins]},{type:_OUTPUT_,ref:ZaAccount.A_zimbraPrefSkin,label:ZaMsg.LBL_zimbraPrefSkin,labelLocation:_LEFT_,visibilityChecks:[ZaAccountXFormView.gotNoSkins]}]},{type:_SPACER_},{type:_SUPER_WIZ_SELECT_CHECK_,selectRef:ZaAccount.A_zimbraAvailableSkin,ref:ZaAccount.A_zimbraAvailableSkin,choices:ZaNewAccountXWizard.themeChoices,visibilityChecks:[Case_XFormItem.prototype.isCurrentTab,ZaAccountXFormView.gotSkins],visibilityChangeEventSources:[ZaModel.currentStep],caseKey:ZaNewAccountXWizard.SKINS_STEP,caseVarRef:ZaModel.currentStep,limitLabel:ZaMsg.NAD_LimitThemesTo},{type:_DWT_ALERT_,colSpan:2,style:DwtAlert.WARNING,iconVisible:true,visibilityChecks:[ZaAccountXFormView.gotNoSkins],value:ZaMsg.ERROR_CANNOT_FIND_SKINS_FOR_ACCOUNT}]})
}if(ZaTabView.isTAB_ENABLED(e,ZaAccountXFormView.ZIMLET_TAB_ATTRS,ZaAccountXFormView.ZIMLET_TAB_RIGHTS)){ZaNewAccountXWizard.ZIMLETS_STEP=++this.TAB_INDEX;
this.stepChoices.push({value:ZaNewAccountXWizard.ZIMLETS_STEP,label:ZaMsg.TABT_Zimlets});
d.push({type:_CASE_,caseKey:ZaNewAccountXWizard.ZIMLETS_STEP,tabGroupKey:ZaNewAccountXWizard.ZIMLETS_STEP,id:"account_form_zimlets_step",numCols:1,width:"100%",items:[{type:_ZAWIZGROUP_,numCols:1,colSizes:["auto"],items:[{type:_SUPER_WIZ_ZIMLET_SELECT_,selectRef:ZaAccount.A_zimbraZimletAvailableZimlets,ref:ZaAccount.A_zimbraZimletAvailableZimlets,choices:ZaNewAccountXWizard.zimletChoices,limitLabel:ZaMsg.NAD_LimitZimletsTo}]}]})
}if(ZaTabView.isTAB_ENABLED(e,ZaAccountXFormView.ADVANCED_TAB_ATTRS,ZaAccountXFormView.ADVANCED_TAB_RIGHTS)&&!ZaSettings.isOctopus()){ZaNewAccountXWizard.ADVANCED_STEP=++this.TAB_INDEX;
this.stepChoices.push({value:ZaNewAccountXWizard.ADVANCED_STEP,label:ZaMsg.TABT_Advanced});
advancedCaseItems=[];
if(ZAWizTopGrouper_XFormItem.isGroupVisible(e,[ZaAccount.A_zimbraAttachmentsBlocked],[])){advancedCaseItems.push({type:_ZAWIZ_TOP_GROUPER_,id:"account_attachment_settings",colSizes:["auto"],numCols:1,label:ZaMsg.NAD_AttachmentsGrouper,items:[{ref:ZaAccount.A_zimbraAttachmentsBlocked,type:_SUPER_WIZ_CHECKBOX_,colSizes:["200px","300px","*"],colSpan:3,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.NAD_RemoveAllAttachments,checkBoxLabel:ZaMsg.NAD_RemoveAllAttachments,trueValue:"TRUE",falseValue:"FALSE"}]})
}if(ZAWizTopGrouper_XFormItem.isGroupVisible(e,[ZaAccount.A_zimbraMailQuota,ZaAccount.A_zimbraContactMaxNumEntries,ZaAccount.A_zimbraQuotaWarnPercent,ZaAccount.A_zimbraQuotaWarnInterval,ZaAccount.A_zimbraQuotaWarnMessage],[])){advancedCaseItems.push({type:_ZAWIZ_TOP_GROUPER_,id:"account_quota_settings",colSizes:["auto"],numCols:1,label:ZaMsg.NAD_QuotaGrouper,items:[{ref:ZaAccount.A_zimbraMailForwardingAddressMaxLength,type:_SUPERWIZ_TEXTFIELD_,colSizes:["200px","300px","*"],colSpan:1,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.MSG_zimbraMailForwardingAddressMaxLength,txtBoxLabel:ZaMsg.LBL_zimbraMailForwardingAddressMaxLength,labelLocation:_LEFT_,textFieldCssClass:"admin_xform_number_input"},{ref:ZaAccount.A_zimbraMailForwardingAddressMaxNumAddrs,type:_SUPERWIZ_TEXTFIELD_,colSizes:["200px","300px","*"],colSpan:1,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.MSG_zimbraMailForwardingAddressMaxNumAddrs,txtBoxLabel:ZaMsg.LBL_zimbraMailForwardingAddressMaxNumAddrs,labelLocation:_LEFT_,textFieldCssClass:"admin_xform_number_input"},{ref:ZaAccount.A_zimbraMailQuota,type:_SUPERWIZ_TEXTFIELD_,colSizes:["200px","300px","*"],colSpan:1,txtBoxLabel:ZaMsg.LBL_zimbraMailQuota,msgName:ZaMsg.MSG_zimbraMailQuota,labelLocation:_LEFT_,textFieldCssClass:"admin_xform_number_input",resetToSuperLabel:ZaMsg.NAD_ResetToCOS},{ref:ZaAccount.A_zimbraContactMaxNumEntries,type:_SUPERWIZ_TEXTFIELD_,colSizes:["200px","300px","*"],colSpan:1,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.MSG_zimbraContactMaxNumEntries,txtBoxLabel:ZaMsg.LBL_zimbraContactMaxNumEntries,labelLocation:_LEFT_,textFieldCssClass:"admin_xform_number_input"},{ref:ZaAccount.A_zimbraQuotaWarnPercent,type:_SUPERWIZ_TEXTFIELD_,colSizes:["200px","300px","*"],colSpan:1,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,txtBoxLabel:ZaMsg.LBL_zimbraQuotaWarnPercent,msgName:ZaMsg.MSG_zimbraQuotaWarnPercent,labelLocation:_LEFT_,textFieldCssClass:"admin_xform_number_input",resetToSuperLabel:ZaMsg.NAD_ResetToCOS},{ref:ZaAccount.A_zimbraQuotaWarnInterval,type:_SUPERWIZ_LIFETIME_,colSizes:["200px","80px","220px","*"],colSpan:1,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,textFieldCssClass:"admin_xform_number_input",txtBoxLabel:ZaMsg.LBL_zimbraQuotaWarnInterval,msgName:ZaMsg.MSG_zimbraQuotaWarnInterval,labelLocation:_LEFT_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS},{ref:ZaAccount.A_zimbraQuotaWarnMessage,type:_SUPERWIZ_TEXTAREA_,colSizes:["200px","300px","*"],colSpan:1,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,txtBoxLabel:ZaMsg.LBL_zimbraQuotaWarnMessage,msgName:ZaMsg.MSG_zimbraQuotaWarnMessage,resetToSuperLabel:ZaMsg.NAD_ResetToCOS}]})
}if(ZAWizTopGrouper_XFormItem.isGroupVisible(e,[ZaAccount.A_zimbraDataSourceMinPollingInterval,ZaAccount.A_zimbraDataSourcePop3PollingInterval,ZaAccount.A_zimbraDataSourceImapPollingInterval,ZaAccount.A_zimbraDataSourceCalendarPollingInterval,ZaAccount.A_zimbraDataSourceRssPollingInterval,ZaAccount.A_zimbraDataSourceCaldavPollingInterval],[])){advancedCaseItems.push({type:_ZAWIZ_TOP_GROUPER_,id:"account_datasourcepolling_settings",colSizes:["auto"],numCols:1,label:ZaMsg.NAD_DataSourcePolling,items:[{ref:ZaAccount.A_zimbraDataSourceMinPollingInterval,type:_SUPERWIZ_LIFETIME_,colSizes:["200px","80px","220px","*"],msgName:ZaMsg.MSG_zimbraDataSourceMinPollingInterval,txtBoxLabel:ZaMsg.LBL_zimbraDataSourceMinPollingInterval,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,nowrap:false,labelWrap:true},{ref:ZaAccount.A_zimbraDataSourcePop3PollingInterval,type:_SUPERWIZ_LIFETIME_,colSizes:["200px","80px","220px","*"],msgName:ZaMsg.MSG_zimbraDataSourcePop3PollingInterval,txtBoxLabel:ZaMsg.LBL_zimbraDataSourcePop3PollingInterval,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,nowrap:false,labelWrap:true},{ref:ZaAccount.A_zimbraDataSourceImapPollingInterval,type:_SUPERWIZ_LIFETIME_,colSizes:["200px","80px","220px","*"],msgName:ZaMsg.MSG_zimbraDataSourceImapPollingInterval,txtBoxLabel:ZaMsg.LBL_zimbraDataSourceImapPollingInterval,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,nowrap:false,labelWrap:true},{ref:ZaAccount.A_zimbraDataSourceCalendarPollingInterval,type:_SUPERWIZ_LIFETIME_,colSizes:["200px","80px","220px","*"],msgName:ZaMsg.MSG_zimbraDataSourceCalendarPollingInterval,txtBoxLabel:ZaMsg.LBL_zimbraDataSourceCalendarPollingInterval,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,nowrap:false,labelWrap:true},{ref:ZaAccount.A_zimbraDataSourceRssPollingInterval,type:_SUPERWIZ_LIFETIME_,colSizes:["200px","80px","220px","*"],msgName:ZaMsg.MSG_zimbraDataSourceRssPollingInterval,txtBoxLabel:ZaMsg.LBL_zimbraDataSourceRssPollingInterval,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,nowrap:false,labelWrap:true},{ref:ZaAccount.A_zimbraDataSourceCaldavPollingInterval,type:_SUPERWIZ_LIFETIME_,colSizes:["200px","80px","220px","*"],msgName:ZaMsg.MSG_zimbraDataSourceCaldavPollingInterval,txtBoxLabel:ZaMsg.LBL_zimbraDataSourceCaldavPollingInterval,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,nowrap:false,labelWrap:true}]})
}if(ZAWizTopGrouper_XFormItem.isGroupVisible(e,[ZaAccount.A_zimbraProxyAllowedDomains],[])){advancedCaseItems.push({type:_ZAWIZ_TOP_GROUPER_,id:"account_proxyalloweddomains_settings",colSizes:["200px","auto"],numCols:2,label:ZaMsg.NAD_ProxyAllowedDomains,items:[{ref:ZaAccount.A_zimbraProxyAllowedDomains,label:ZaMsg.LBL_zimbraProxyAllowedDomains,labelCssStyle:"vertical-align:top;",type:_SUPER_REPEAT_,colSizes:["300px","*"],resetToSuperLabel:ZaMsg.NAD_ResetToCOS,repeatInstance:"",addButtonLabel:ZaMsg.NAD_ProxyAddAllowedDomain,removeButtonLabel:ZaMsg.NAD_ProxyRemoveAllowedDomain,showAddButton:true,showRemoveButton:true,showAddOnNextRow:true,repeatItems:[{ref:".",type:_TEXTFIELD_,enableDisableChecks:[ZaItem.hasWritePermission],visibilityChecks:[ZaItem.hasReadPermission],width:"15em"}]}]})
}if(ZAWizTopGrouper_XFormItem.isGroupVisible(e,[ZaAccount.A_zimbraPasswordLocked,ZaAccount.A_zimbraMinPwdLength,ZaAccount.A_zimbraMaxPwdLength,ZaAccount.A_zimbraPasswordMinUpperCaseChars,ZaAccount.A_zimbraPasswordMinLowerCaseChars,ZaAccount.A_zimbraPasswordMinPunctuationChars,ZaAccount.A_zimbraPasswordMinNumericChars,ZaAccount.A_zimbraPasswordMinDigitsOrPuncs,ZaAccount.A_zimbraMinPwdAge,ZaAccount.A_zimbraMaxPwdAge,ZaAccount.A_zimbraEnforcePwdHistory,ZaAccount.A_zimbraPasswordBlockCommonEnabled],[])){advancedCaseItems.push({type:_ZAWIZ_TOP_GROUPER_,id:"account_password_settings",colSizes:["auto"],numCols:1,label:ZaMsg.NAD_PasswordGrouper,items:[{type:_DWT_ALERT_,containerCssStyle:"padding-bottom:0;",style:DwtAlert.WARNING,iconVisible:false,content:ZaMsg.Alert_InternalPassword,colSpan:3},{ref:ZaAccount.A_zimbraPasswordLocked,type:_SUPER_WIZ_CHECKBOX_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.NAD_PwdLocked,checkBoxLabel:ZaMsg.NAD_PwdLocked,trueValue:"TRUE",falseValue:"FALSE",colSizes:["200px","300px","*"],visibilityChecks:[],enableDisableChecks:[[ZaNewAccountXWizard.isAuthfromInternal,k,ZaAccount.A_name]]},{ref:ZaAccount.A_zimbraMinPwdLength,type:_SUPERWIZ_TEXTFIELD_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.MSG_zimbraMinPwdLength,txtBoxLabel:ZaMsg.LBL_zimbraMinPwdLength,labelLocation:_LEFT_,textFieldCssClass:"admin_xform_number_input",colSizes:["200px","300px","*"],visibilityChecks:[],enableDisableChecks:[[ZaNewAccountXWizard.isAuthfromInternal,k,ZaAccount.A_name]]},{ref:ZaAccount.A_zimbraMaxPwdLength,type:_SUPERWIZ_TEXTFIELD_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.MSG_zimbraMaxPwdLength,txtBoxLabel:ZaMsg.LBL_zimbraMaxPwdLength,labelLocation:_LEFT_,textFieldCssClass:"admin_xform_number_input",colSizes:["200px","300px","*"],visibilityChecks:[],enableDisableChecks:[[ZaNewAccountXWizard.isAuthfromInternal,k,ZaAccount.A_name]]},{ref:ZaAccount.A_zimbraPasswordMinUpperCaseChars,type:_SUPERWIZ_TEXTFIELD_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.MSG_zimbraPasswordMinUpperCaseChars,txtBoxLabel:ZaMsg.LBL_zimbraPasswordMinUpperCaseChars,labelLocation:_LEFT_,textFieldCssClass:"admin_xform_number_input",colSizes:["200px","300px","*"],visibilityChecks:[],enableDisableChecks:[[ZaNewAccountXWizard.isAuthfromInternal,k,ZaAccount.A_name]]},{ref:ZaAccount.A_zimbraPasswordMinLowerCaseChars,type:_SUPERWIZ_TEXTFIELD_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.MSG_zimbraPasswordMinLowerCaseChars,txtBoxLabel:ZaMsg.LBL_zimbraPasswordMinLowerCaseChars,labelLocation:_LEFT_,textFieldCssClass:"admin_xform_number_input",colSizes:["200px","300px","*"],visibilityChecks:[],enableDisableChecks:[[ZaNewAccountXWizard.isAuthfromInternal,k,ZaAccount.A_name]]},{ref:ZaAccount.A_zimbraPasswordMinPunctuationChars,type:_SUPERWIZ_TEXTFIELD_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.MSG_zimbraPasswordMinPunctuationChars,txtBoxLabel:ZaMsg.LBL_zimbraPasswordMinPunctuationChars,labelLocation:_LEFT_,textFieldCssClass:"admin_xform_number_input",colSizes:["200px","300px","*"],visibilityChecks:[],enableDisableChecks:[[ZaNewAccountXWizard.isAuthfromInternal,k,ZaAccount.A_name]]},{ref:ZaAccount.A_zimbraPasswordMinNumericChars,type:_SUPERWIZ_TEXTFIELD_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.MSG_zimbraPasswordMinNumericChars,txtBoxLabel:ZaMsg.LBL_zimbraPasswordMinNumericChars,labelLocation:_LEFT_,textFieldCssClass:"admin_xform_number_input",colSizes:["200px","300px","*"],visibilityChecks:[],enableDisableChecks:[[ZaNewAccountXWizard.isAuthfromInternal,k,ZaAccount.A_name]]},{ref:ZaAccount.A_zimbraPasswordMinDigitsOrPuncs,type:_SUPERWIZ_TEXTFIELD_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.MSG_zimbraPasswordMinDigitsOrPuncs,txtBoxLabel:ZaMsg.LBL_zimbraPasswordMinDigitsOrPuncs,labelLocation:_LEFT_,textFieldCssClass:"admin_xform_number_input",colSizes:["200px","300px","*"],visibilityChecks:[],enableDisableChecks:[[ZaNewAccountXWizard.isAuthfromInternal,k,ZaAccount.A_name]]},{ref:ZaAccount.A_zimbraMinPwdAge,type:_SUPERWIZ_TEXTFIELD_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.MSG_passMinAge,txtBoxLabel:ZaMsg.LBL_passMinAge,labelLocation:_LEFT_,textFieldCssClass:"admin_xform_number_input",colSizes:["200px","300px","*"],visibilityChecks:[],enableDisableChecks:[[ZaNewAccountXWizard.isAuthfromInternal,k,ZaAccount.A_name]]},{ref:ZaAccount.A_zimbraMaxPwdAge,type:_SUPERWIZ_TEXTFIELD_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.MSG_passMaxAge,txtBoxLabel:ZaMsg.LBL_passMaxAge,labelLocation:_LEFT_,textFieldCssClass:"admin_xform_number_input",colSizes:["200px","300px","*"],visibilityChecks:[],enableDisableChecks:[[ZaNewAccountXWizard.isAuthfromInternal,k,ZaAccount.A_name]]},{ref:ZaAccount.A_zimbraEnforcePwdHistory,type:_SUPERWIZ_TEXTFIELD_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.MSG_zimbraEnforcePwdHistory,txtBoxLabel:ZaMsg.LBL_zimbraEnforcePwdHistory,labelLocation:_LEFT_,textFieldCssClass:"admin_xform_number_input",colSizes:["200px","300px","*"],visibilityChecks:[],enableDisableChecks:[[ZaNewAccountXWizard.isAuthfromInternal,k,ZaAccount.A_name]]},{ref:ZaAccount.A_zimbraPasswordBlockCommonEnabled,type:_SUPER_WIZ_CHECKBOX_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.NAD_RejectCommonPwd,checkBoxLabel:ZaMsg.NAD_RejectCommonPwd,trueValue:"TRUE",falseValue:"FALSE",colSizes:["200px","300px","*"],visibilityChecks:[],enableDisableChecks:[[ZaNewAccountXWizard.isAuthfromInternal,k,ZaAccount.A_name]]}]})
}if(ZAWizTopGrouper_XFormItem.isGroupVisible(e,[ZaAccount.A_zimbraPasswordLockoutEnabled,ZaAccount.A_zimbraPasswordLockoutMaxFailures,ZaAccount.A_zimbraPasswordLockoutDuration,ZaAccount.A_zimbraPasswordLockoutFailureLifetime],[])){advancedCaseItems.push({type:_ZAWIZ_TOP_GROUPER_,id:"password_lockout_settings",colSizes:["auto"],numCols:1,label:ZaMsg.NAD_FailedLoginGrouper,items:[{ref:ZaAccount.A_zimbraPasswordLockoutEnabled,type:_SUPER_WIZ_CHECKBOX_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.LBL_zimbraPasswordLockoutEnabled,checkBoxLabel:ZaMsg.LBL_zimbraPasswordLockoutEnabled,colSizes:["200px","300px","*"],colSpan:1,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaAccount.A_zimbraPasswordLockoutMaxFailures,type:_SUPERWIZ_TEXTFIELD_,enableDisableChecks:[[ZaAccountXFormView.isPasswordLockoutEnabled],[XForm.checkInstanceValue,ZaAccount.A_zimbraPasswordLockoutEnabled,"TRUE"]],enableDisableChangeEventSources:[ZaAccount.A_zimbraPasswordLockoutEnabled,ZaAccount.A_COSId,ZaAccount.A_zimbraPasswordLockoutEnabled],txtBoxLabel:ZaMsg.LBL_zimbraPasswordLockoutMaxFailures,toolTipContent:ZaMsg.TTP_zimbraPasswordLockoutMaxFailuresSub,msgName:ZaMsg.MSG_zimbraPasswordLockoutMaxFailures,labelLocation:_LEFT_,textFieldCssClass:"admin_xform_number_input",resetToSuperLabel:ZaMsg.NAD_ResetToCOS,colSizes:["200px","300px","*"],colSpan:1},{ref:ZaAccount.A_zimbraPasswordLockoutDuration,type:_SUPERWIZ_LIFETIME_,enableDisableChecks:[[ZaAccountXFormView.isPasswordLockoutEnabled],[XForm.checkInstanceValue,ZaAccount.A_zimbraPasswordLockoutEnabled,"TRUE"]],enableDisableChangeEventSources:[ZaAccount.A_zimbraPasswordLockoutEnabled,ZaAccount.A_COSId,ZaAccount.A_zimbraPasswordLockoutEnabled],txtBoxLabel:ZaMsg.LBL_zimbraPasswordLockoutDuration,toolTipContent:ZaMsg.TTP_zimbraPasswordLockoutDurationSub,msgName:ZaMsg.MSG_zimbraPasswordLockoutDuration,textFieldCssClass:"admin_xform_number_input",colSizes:["200px","80px","220px","*"],colSpan:1,resetToSuperLabel:ZaMsg.NAD_ResetToCOS},{ref:ZaAccount.A_zimbraPasswordLockoutFailureLifetime,type:_SUPERWIZ_LIFETIME_,enableDisableChecks:[[ZaAccountXFormView.isPasswordLockoutEnabled],[XForm.checkInstanceValue,ZaAccount.A_zimbraPasswordLockoutEnabled,"TRUE"]],enableDisableChangeEventSources:[ZaAccount.A_zimbraPasswordLockoutEnabled,ZaAccount.A_COSId,ZaAccount.A_zimbraPasswordLockoutEnabled],txtBoxLabel:ZaMsg.LBL_zimbraPasswordLockoutFailureLifetime,toolTipContent:ZaMsg.TTP_zimbraPasswordLockoutFailureLifetimeSub,msgName:ZaMsg.MSG_zimbraPasswordLockoutFailureLifetime,textFieldCssClass:"admin_xform_number_input",resetToSuperLabel:ZaMsg.NAD_ResetToCOS,labelCssStyle:"white-space:normal;",colSizes:["200px","80px","220px","*"],colSpan:1,nowrap:false,labelWrap:true}]})
}if(ZAWizTopGrouper_XFormItem.isGroupVisible(e,[ZaAccount.A_zimbraAdminAuthTokenLifetime,ZaAccount.A_zimbraAuthTokenLifetime,ZaAccount.A_zimbraMailIdleSessionTimeout,ZaAccount.A_zimbraDumpsterUserVisibleAge],[])){advancedCaseItems.push({type:_ZAWIZ_TOP_GROUPER_,colSizes:["auto"],numCols:1,label:ZaMsg.NAD_TimeoutGrouper,id:"timeout_settings",items:[{ref:ZaAccount.A_zimbraAdminAuthTokenLifetime,type:_SUPERWIZ_LIFETIME_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.MSG_zimbraAdminAuthTokenLifetime,txtBoxLabel:ZaMsg.LBL_zimbraAdminAuthTokenLifetime,enableDisableChecks:[ZaAccountXFormView.isAdminAccount],colSizes:["200px","80px","220px","*"],colSpan:1,enableDisableChangeEventSources:[ZaAccount.A_zimbraIsAdminAccount]},{ref:ZaAccount.A_zimbraAuthTokenLifetime,type:_SUPERWIZ_LIFETIME_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.MSG_zimbraAuthTokenLifetime,colSizes:["200px","80px","220px","*"],colSpan:1,txtBoxLabel:ZaMsg.LBL_zimbraAuthTokenLifetime},{ref:ZaAccount.A_zimbraMailIdleSessionTimeout,type:_SUPERWIZ_LIFETIME_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.MSG_zimbraMailIdleSessionTimeout,colSizes:["200px","80px","220px","*"],colSpan:1,txtBoxLabel:ZaMsg.LBL_zimbraMailIdleSessionTimeout},{ref:ZaAccount.A_zimbraDumpsterUserVisibleAge,type:_SUPERWIZ_LIFETIME_,colSizes:["200px","80px","220px","*"],colSpan:1,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.MSG_zimbraDumpsterUserVisibleAge,txtBoxLabel:ZaMsg.LBL_zimbraDumpsterUserVisibleAge,visibilityChecks:[[ZaItem.hasReadPermission],[XForm.checkInstanceValue,ZaAccount.A_zimbraDumpsterEnabled,"TRUE"]],visibilityChangeEventSources:[ZaAccount.A_zimbraDumpsterEnabled]}]})
}if(ZAWizTopGrouper_XFormItem.isGroupVisible(e,[ZaAccount.A_zimbraMailMessageLifetime,ZaAccount.A_zimbraMailTrashLifetime,ZaAccount.A_zimbraMailSpamLifetime,ZaAccount.A_zimbraMailDumpsterLifetime],[])){advancedCaseItems.push({type:_ZAWIZ_TOP_GROUPER_,colSizes:["auto"],numCols:1,visibilityChecks:[[ZATopGrouper_XFormItem.isGroupVisible,[ZaAccount.A_zimbraMailMessageLifetime,ZaAccount.A_zimbraMailTrashLifetime,ZaAccount.A_zimbraMailSpamLifetime,ZaAccount.A_zimbraMailDumpsterLifetime]],[XForm.checkInstanceValueNot,ZaAccount.A_zimbraIsExternalVirtualAccount,"TRUE"]],label:ZaMsg.NAD_MailRetentionGrouper,id:"mailretention_settings",items:[{type:_DWT_ALERT_,containerCssStyle:"padding:0 10px 10px;width:100%;",style:DwtAlert.INFO,iconVisible:false,content:ZaMsg.Alert_EnableMailRetention},{ref:ZaAccount.A_zimbraMailMessageLifetime,type:_SUPERWIZ_LIFETIME2_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.MSG_zimbraMailMessageLifetime,colSizes:["200px","80px","220px","*"],colSpan:1,visibilityChecks:[[ZaItem.hasReadPermission],[ZaAccount.isEmailRetentionPolicyEnabled]],txtBoxLabel:ZaMsg.LBL_zimbraMailMessageLifetime},{ref:ZaAccount.A_zimbraMailTrashLifetime,type:_SUPERWIZ_LIFETIME1_,colSizes:["200px","80px","220px","*"],colSpan:1,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.MSG_zimbraMailTrashLifetime,visibilityChecks:[[ZaItem.hasReadPermission],[ZaAccount.isEmailRetentionPolicyEnabled]],txtBoxLabel:ZaMsg.LBL_zimbraMailTrashLifetime},{ref:ZaAccount.A_zimbraMailSpamLifetime,type:_SUPERWIZ_LIFETIME1_,colSizes:["200px","80px","220px","*"],colSpan:1,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.MSG_zimbraMailSpamLifetime,visibilityChecks:[[ZaItem.hasReadPermission],[ZaAccount.isEmailRetentionPolicyEnabled]],txtBoxLabel:ZaMsg.LBL_zimbraMailSpamLifetime},{ref:ZaAccount.A_zimbraMailDumpsterLifetime,type:_SUPERWIZ_LIFETIME1_,colSizes:["200px","80px","220px","*"],colSpan:1,resetToSuperLabel:ZaMsg.NAD_ResetToCOS,msgName:ZaMsg.MSG_zimbraMailDumpsterLifetime,txtBoxLabel:ZaMsg.LBL_zimbraMailDumpsterLifetime,visibilityChecks:[[ZaItem.hasReadPermission],[ZaAccount.isEmailRetentionPolicyEnabled],[XForm.checkInstanceValue,ZaAccount.A_zimbraDumpsterEnabled,"TRUE"],[XForm.checkInstanceValue,ZaAccount.A_zimbraDumpsterPurgeEnabled,"TRUE"]],visibilityChangeEventSources:[ZaAccount.A_zimbraDumpsterEnabled,ZaAccount.A_zimbraDumpsterPurgeEnabled]}]})
}d.push({type:_CASE_,caseKey:ZaNewAccountXWizard.ADVANCED_STEP,tabGroupKey:ZaNewAccountXWizard.ADVANCED_STEP,id:"account_form_advanced_step",numCols:1,width:"100%",items:advancedCaseItems})
}this._lastStep=this.stepChoices.length;
t.items=[{type:_OUTPUT_,colSpan:2,align:_CENTER_,valign:_TOP_,ref:ZaModel.currentStep,choices:this.stepChoices,valueChangeEventSources:[ZaModel.currentStep]},{type:_SEPARATOR_,align:_CENTER_,valign:_TOP_},{type:_SPACER_,align:_CENTER_,valign:_TOP_},{type:_SWITCH_,width:680,align:_LEFT_,valign:_TOP_,items:d}]
};
ZaXDialog.XFormModifiers.ZaNewAccountXWizard.push(ZaNewAccountXWizard.myXFormModifier)
}if(AjxPackage.define("zimbraAdmin.accounts.view.MoveAliasXDialog")){MoveAliasXDialog=function(f,b,e){if(arguments.length==0){return
}this._standardButtons=[DwtDialog.CANCEL_BUTTON];
var g=new DwtDialog_ButtonDescriptor(ZaXWizardDialog.HELP_BUTTON,ZaMsg.TBB_Help,DwtDialog.ALIGN_LEFT,new AjxCallback(this,this._helpButtonListener));
var d=new DwtDialog_ButtonDescriptor(MoveAliasXDialog.MOVE_BUTTON,ZaMsg._move,DwtDialog.ALIGN_RIGHT,new AjxCallback(this,this.doMove));
var c=new DwtDialog_ButtonDescriptor(MoveAliasXDialog.CLOSE_BUTTON,AjxMsg._close,DwtDialog.ALIGN_RIGHT,new AjxCallback(this,this.closeMe));
this._extraButtons=[g,d,c];
ZaXDialog.call(this,f,null,ZaMsg.MoveAlias_Title,b,e,"MoveAliasXDialog");
if(this._button[MoveAliasXDialog.MOVE_BUTTON]){this._button[MoveAliasXDialog.MOVE_BUTTON].setEnabled(false)
}this._containedObject=new ZaSearch();
this.initForm(ZaSearch.myXModel,this.getMyXForm());
this._helpURL=[location.pathname,ZaUtil.HELP_URL,ZaAccChangePwdXDlg.helpURL,"managing_accounts/creating_a_mail_aliases.htm?locid=",AjxEnv.DEFAULT_LOCALE].join("")
};
MoveAliasXDialog.prototype=new ZaXDialog;
MoveAliasXDialog.prototype.constructor=MoveAliasXDialog;
MoveAliasXDialog.resultChoices=new XFormChoices([],XFormChoices.OBJECT_REFERENCE_LIST,null,"name");
MoveAliasXDialog.MOVE_BUTTON=++DwtDialog.LAST_BUTTON;
MoveAliasXDialog.CLOSE_BUTTON=++DwtDialog.LAST_BUTTON;
MoveAliasXDialog.prototype.popup=function(c){this._containedObject[ZaModel.currentStep]=1;
this._containedObject[ZaSearch.A_selected]=null;
this._localXForm.setInstance(this._containedObject);
ZaXWizardDialog.prototype.popup.call(this,c);
this._button[MoveAliasXDialog.CLOSE_BUTTON].setEnabled(false);
var b=this._localXForm.getItemsById(ZaSearch.A_selected)[0];
if(b){b.resetChoices()
}};
MoveAliasXDialog.prototype.closeMe=function(){this.popdown()
};
MoveAliasXDialog.prototype.doMove=function(){this._button[MoveAliasXDialog.MOVE_BUTTON].setEnabled(false);
this._button[MoveAliasXDialog.CLOSE_BUTTON].setEnabled(true);
if(this.moveAlias()){this.goPage(2)
}};
MoveAliasXDialog.prototype.goPage=function(b){this._containedObject[ZaModel.currentStep]=b;
this._localXForm.refresh()
};
MoveAliasXDialog.prototype.setAlias=function(b){this._alias=b
};
MoveAliasXDialog.prototype.moveAlias=function(){var b;
try{if(this._containedObject[ZaSearch.A_selected]&&this._containedObject[ZaSearch.A_selected].addAlias!=null){try{b=this._alias.name;
ZaAlias.prototype.remove.call(this._alias)
}catch(c){ZaApp.getInstance().getCurrentController()._handleException(c,"MoveAliasXDialog.prototype.moveAlias:_alias.remove",null,false);
return false
}if(b){this._containedObject[ZaSearch.A_selected].addAlias(b)
}else{throw (new AjxException(ZaMsg.FAILED_MOVE_ALIAS,AjxException.UNKNOWN_ERROR,"MoveAliasXDialog.prototype.moveAlias","Alias name is not available"))
}ZaApp.getInstance().getCurrentController().show();
this._containedObject[ZaSearch.A_ResultMsg]=String(ZaMsg.Alias_Moved_To).replace("{0}",b).replace("{1}",this._containedObject[ZaSearch.A_selected].name);
return true
}else{ZaApp.getInstance().getCurrentController().popupErrorDialog(AjxMessageFormat.format(ZaMsg.WARNING_ALIASES_TARGET_NON_EXIST,[this._containedObject[ZaSearch.A_selected]]))
}}catch(c){ZaApp.getInstance().getCurrentController()._handleException(c,"MoveAliasXDialog.prototype.moveAlias",null,false);
return false
}return false
};
MoveAliasXDialog.prototype.getMyXForm=function(){var b={numCols:2,items:[{type:_SWITCH_,items:[{type:_CASE_,caseKey:1,items:[{type:_DWT_ALERT_,content:null,ref:"name",getDisplayValue:function(d){var c=this.getForm().parent._alias.name;
return AjxMessageFormat.format(ZaMsg.MoveAlias_HelpMsg,AjxStringUtil.htmlEncode(c))
},iconVisible:false,align:_CENTER_,style:DwtAlert.INFORMATION},{type:_DYNSELECT_,ref:ZaSearch.A_selected,dataFetcherClass:ZaSearch,dataFetcherMethod:ZaSearch.prototype.dynSelectSearch,dataFetcherTypes:[ZaSearch.ACCOUNTS,ZaSearch.RESOURCES,ZaSearch.DLS],dataFetcherAttrs:[ZaItem.A_zimbraId,ZaItem.A_cn,ZaAccount.A_name,ZaAccount.A_displayname,ZaAccount.A_mail],autoCompleteEnabled:true,toolTipContent:ZaMsg.tt_StartTypingAccountName,label:ZaMsg.NAD_AccountName,labelLocation:_LEFT_,width:"100%",inputSize:30,editable:true,forceUpdate:true,choices:new XFormChoices([],XFormChoices.OBJECT_REFERENCE_LIST,"name","name"),visibilityChecks:[],enableDisableChecks:[],onChange:function(e,d,c){if(((e instanceof ZaAccount)||e instanceof ZaDistributionList)&&(e.id)){c.parent._button[MoveAliasXDialog.MOVE_BUTTON].setEnabled(true)
}this.setInstanceValue(e)
},autoCompleteEnabled:true}]},{type:_CASE_,caseKey:2,items:[{type:_DWT_ALERT_,style:DwtAlert.INFORMATION,iconVisible:false,content:null,ref:ZaSearch.A_ResultMsg,align:_CENTER_,valign:_MIDDLE_,visibilityChecks:[[XForm.checkInstanceValueNotEmty,ZaSearch.A_ResultMsg]],visibilityChangeEventSources:[ZaSearch.A_ResultMsg]}]}]}]};
return b
}
}if(AjxPackage.define("zimbraAdmin.accounts.view.ReindexMailboxXDialog")){ReindexMailboxXDialog=function(d,b,c){if(arguments.length==0){return
}ZaXDialog.call(this,d,null,ZaMsg.Reindex_Title,null,null);
this.initForm(ZaReindexMailbox.myXModel,this.getMyXForm());
this._button[DwtDialog.OK_BUTTON].setToolTipContent(ZaMsg.Reindex_Mbx_tt);
this._containedObject=new ZaReindexMailbox();
this.pollAction=new AjxTimedAction(this,this.getReindexStatus);
this._pollHandler=null;
this._helpURL=ReindexMailboxXDialog.helpURL
};
ReindexMailboxXDialog.prototype=new ZaXDialog;
ReindexMailboxXDialog.prototype.constructor=ReindexMailboxXDialog;
ReindexMailboxXDialog.helpURL=location.pathname+ZaUtil.HELP_URL+"managing_accounts/re-indexing_a_mailbox.htm?locid="+AjxEnv.DEFAULT_LOCALE;
ReindexMailboxXDialog.isStartEnabled=function(){return(this.getInstanceValue(ZaReindexMailbox.A_status)!="running"&&this.getInstanceValue(ZaReindexMailbox.A_status)!="started")
};
ReindexMailboxXDialog.isAbortEnabled=function(){return(this.getInstanceValue(ZaReindexMailbox.A_status)=="running"||this.getInstanceValue(ZaReindexMailbox.A_status)=="started")
};
ReindexMailboxXDialog.isStatusNotError=function(){return(this.getInstanceValue(ZaReindexMailbox.A_status)!="error")
};
ReindexMailboxXDialog.prototype.popup=function(){DwtDialog.prototype.popup.call(this);
this._localXForm.setInstance(this._containedObject);
if(this._containedObject.mbxId){var b=new AjxCallback(this,ReindexMailboxXDialog.prototype.getReindexStatusCallBack);
ZaAccount.getReindexStatus(this._containedObject.mbxId,b)
}};
ReindexMailboxXDialog.prototype.popdown=function(){if(this._pollHandler){AjxTimedAction.cancelAction(this._pollHandler)
}DwtDialog.prototype.popdown.call(this)
};
ReindexMailboxXDialog.abortReindexMailbox=function(c){try{var b=this.getInstance();
if(this.getForm().parent.asynCommand){this.getForm().parent.asynCommand.cancel()
}var e=new AjxCallback(this.getForm().parent,ReindexMailboxXDialog.prototype.getReindexStatusCallBack);
ZaAccount.abortReindexMailbox(b.mbxId,e);
this.getForm().refresh()
}catch(d){this.getForm().getController().getCurrentController()._handleException(d,"ReindexMailboxXDialog.abortReindexMailbox",null,false)
}};
ReindexMailboxXDialog.startReindexMailbox=function(c){try{var b=this.getInstance();
var e=new AjxCallback(this.getForm().parent,ReindexMailboxXDialog.prototype.getReindexStatusCallBack);
ZaAccount.startReindexMailbox(b.mbxId,e);
this.getForm().refresh()
}catch(d){this.getForm().getController().getCurrentController()._handleException(d,"ReindexMailboxXDialog.startReindexMailbox",null,false)
}};
ReindexMailboxXDialog.prototype.getReindexStatusCallBack=function(b){ZaAccount.parseReindexResponse(b,this._containedObject,this._localXForm);
if((this._containedObject.status=="running"||this._containedObject.status=="started")&&this.isPoppedUp()){this._pollHandler=AjxTimedAction.scheduleAction(this.pollAction,this._containedObject.pollInterval)
}else{if(this._pollHandler){AjxTimedAction.cancelAction(this._pollHandler);
this._pollHandler=null
}}};
ReindexMailboxXDialog.prototype.getReindexStatus=function(){var b=new AjxCallback(this,this.getReindexStatusCallBack);
this.asynCommand=ZaAccount.getReindexStatus(this._containedObject.mbxId,b)
};
ReindexMailboxXDialog.prototype.getMyXForm=function(){var b={numCols:2,height:"300px",align:_CENTER_,cssStyle:"text-align:center",items:[{type:_DWT_ALERT_,style:DwtAlert.WARNING,iconVisible:true,content:ZaMsg.WARNING_REINDEX,colSpan:"*",align:_CENTER_,valign:_TOP_},{type:_DWT_ALERT_,style:DwtAlert.CRITICAL,iconVisible:true,content:null,ref:ZaReindexMailbox.A_resultMsg,visibilityChangeEventSources:[ZaReindexMailbox.A_status],visibilityChecks:[[XForm.checkInstanceValue,ZaReindexMailbox.A_status,"error"],[XForm.checkInstanceValueNotEmty,ZaReindexMailbox.A_resultMsg]],valueChangeEventSources:[ZaReindexMailbox.A_resultMsg],align:_CENTER_,colSpan:"*"},{type:_TEXTAREA_,visibilityChangeEventSources:[ZaReindexMailbox.A_status],visibilityChecks:[[XForm.checkInstanceValue,ZaReindexMailbox.A_status,"error"],[XForm.checkInstanceValueNotEmty,ZaReindexMailbox.A_errorDetail]],valueChangeEventSources:[ZaReindexMailbox.A_errorDetail],ref:ZaReindexMailbox.A_errorDetail,label:ZaMsg.FAILED_REINDEX_DETAILS,height:"100px",width:"200px",colSpan:"*"},{type:_DWT_ALERT_,ref:ZaReindexMailbox.A_progressMsg,content:null,colSpan:"*",iconVisible:true,align:_CENTER_,style:DwtAlert.INFORMATION,bmolsnr:true},{type:_DWT_PROGRESS_BAR_,label:ZaMsg.ReindexMbx_Progress,maxValue:null,maxValueRef:ZaReindexMailbox.A_numTotal,ref:ZaReindexMailbox.A_numDone,valign:_CENTER_,align:_CENTER_,wholeCssClass:"progressbar",progressCssClass:"progressused",bmolsnr:true},{type:_SPACER_,visibilityChecks:[ReindexMailboxXDialog.isStatusNotError],visibilityChangeEventSources:[ZaReindexMailbox.A_status],height:"150px",width:"490px",colSpan:"*"},{type:_GROUP_,colSpan:"*",numCols:5,width:"490px",cssStyle:"text-align:center; overflow:hidden",align:_CENTER_,items:[{type:_SPACER_,width:"30px",colSpan:1},{type:_DWT_BUTTON_,onActivate:"ReindexMailboxXDialog.startReindexMailbox.call(this)",label:ZaMsg.NAD_ACC_Start_Reindexing,enableDisableChecks:[ReindexMailboxXDialog.isStartEnabled],enableDisableChangeEventSources:[ZaReindexMailbox.A_status],visibilityChecks:[],valign:_BOTTOM_,width:"150px"},{type:_SPACER_,width:"90px",colSpan:1},{type:_DWT_BUTTON_,onActivate:"ReindexMailboxXDialog.abortReindexMailbox.call(this)",label:ZaMsg.NAD_ACC_Abort_Reindexing,enableDisableChecks:[ReindexMailboxXDialog.isAbortEnabled],enableDisableChangeEventSources:[ZaReindexMailbox.A_status],visibilityChecks:[],valign:_BOTTOM_,width:"150px"},{type:_SPACER_,width:"30px",colSpan:1}]}]};
return b
}
}if(AjxPackage.define("zimbraAdmin.accounts.view.DeleteAcctsPgrsDlg")){DeleteAcctsPgrsDlg=function(d,b,c){if(arguments.length==0){return
}this._standardButtons=[DwtDialog.OK_BUTTON];
var f=new DwtDialog_ButtonDescriptor(ZaXWizardDialog.HELP_BUTTON,ZaMsg.TBB_Help,DwtDialog.ALIGN_LEFT,new AjxCallback(this,this._helpButtonListener));
var e=new DwtDialog_ButtonDescriptor(DeleteAcctsPgrsDlg.ABORT_BUTTON,ZaMsg.NAD_AbortDeleting,DwtDialog.ALIGN_RIGHT,new AjxCallback(this,this.abortDeletingAccounts));
this._extraButtons=[f,e];
ZaXDialog.call(this,d,null,ZaMsg.NAD_DeletingAccTitle,b,c);
this._containedObject=[];
this._currentIndex=0;
this._currentAccount=null;
this.initForm(DeleteAcctsPgrsDlg.myXModel,this.getMyXForm());
this._pollHandler=null;
this._aborted=false;
this._helpURL=[location.pathname,ZaUtil.HELP_URL,DeleteAcctsPgrsDlg.helpURL,"?locid=",AjxEnv.DEFAULT_LOCALE].join("")
};
DeleteAcctsPgrsDlg._ERROR_MSG="errorMsg";
DeleteAcctsPgrsDlg._STATUS="status";
DeleteAcctsPgrsDlg._DELETED_ACCTS="deletedAccounts";
DeleteAcctsPgrsDlg.helpURL="managing_accounts/provisioning_accounts.htm";
DeleteAcctsPgrsDlg.myXModel={getDeletedAccounts:function(c,b){return b.deletedAccounts
},setDeletedAccounts:function(e,b,d,c){b.deletedAccounts=e
},items:[{ref:DeleteAcctsPgrsDlg._STATUS,type:_STRING_},{ref:DeleteAcctsPgrsDlg._ERROR_MSG,type:_STRING_},{ref:DeleteAcctsPgrsDlg._DELETED_ACCTS,type:_LIST_,setter:"set",setterScope:_MODEL_,getter:"getDeletedAccounts",getterScope:_MODEL_}]};
DeleteAcctsPgrsDlg.prototype=new ZaXDialog;
DeleteAcctsPgrsDlg.prototype.constructor=DeleteAcctsPgrsDlg;
DeleteAcctsPgrsDlg.prototype.miniType=2;
DeleteAcctsPgrsDlg.prototype.supportMinimize=true;
DeleteAcctsPgrsDlg.prototype.toString=function(){return"DeleteAcctsPgrsDlg"
};
DeleteAcctsPgrsDlg.prototype.getCacheName=function(){return"removeProgressDlg"
};
DeleteAcctsPgrsDlg.ABORT_BUTTON=++DwtDialog.LAST_BUTTON;
DeleteAcctsPgrsDlg.prototype.setObject=function(b){this._containedObject=b;
var c=new Object();
c._uuid=b._uuid||ZaUtil.getItemUUid();
c[DeleteAcctsPgrsDlg._DELETED_ACCTS]=b[DeleteAcctsPgrsDlg._DELETED_ACCTS]||[];
c[DeleteAcctsPgrsDlg._STATUS]=b[DeleteAcctsPgrsDlg._STATUS]||"";
c[DeleteAcctsPgrsDlg._ERROR_MSG]=b[DeleteAcctsPgrsDlg._ERROR_MSG]||null;
this._localXForm.setInstance(c);
this._button[DeleteAcctsPgrsDlg.ABORT_BUTTON].setEnabled(false);
this._button[DwtDialog.OK_BUTTON].setEnabled(true)
};
DeleteAcctsPgrsDlg.prototype.getObject=function(){if(this._localXForm){return this._localXForm.getInstance()
}else{return this._containedObject
}};
DeleteAcctsPgrsDlg.prototype.popup=function(b){ZaXWizardDialog.prototype.popup.call(this,b)
};
DeleteAcctsPgrsDlg.prototype.abortDeletingAccounts=function(b){try{var d=this._containedObject[this._currentIndex];
this._button[DeleteAcctsPgrsDlg.ABORT_BUTTON].setEnabled(false);
var e=this._localXForm.getInstance();
AjxTimedAction.cancelAction(this._pollHandler);
this._pollHandler=null;
this._aborted=true;
this._localXForm.getInstance().status=ZaMsg.NAD_DeletingCancelled;
this._localXForm.refresh()
}catch(c){ZaApp.getInstance().getCurrentController()._handleException(c,"DeleteAcctsPgrsDlg.abortDeletingAccounts",null,false)
}};
DeleteAcctsPgrsDlg.prototype.startDeletingAccounts=function(b){try{this._aborted=false;
this.pollAction=new AjxTimedAction(this,this.deleteOneAccount);
this._currentIndex=0;
var d=new Object();
d._uuid=ZaUtil.getItemUUid();
d[DeleteAcctsPgrsDlg._STATUS]=AjxMessageFormat.format(ZaMsg.NAD_DeleteAccStatus,[AjxStringUtil.htmlEncode(this._containedObject[this._currentIndex][ZaAccount.A_name])]);
d[DeleteAcctsPgrsDlg._DELETED_ACCTS]=new Array();
this._localXForm.setInstance(d);
this._pollHandler=AjxTimedAction.scheduleAction(this.pollAction,"50")
}catch(c){ZaApp.getInstance().getCurrentController()._handleException(c,"DeleteAcctsPgrsDlg.startDeletingAccounts",null,false)
}};
DeleteAcctsPgrsDlg.prototype.deleteOneAccountCallback=function(b){var e=this._localXForm.getInstance();
var c=false;
var d=b.getException();
if(d){if(d.code!=ZmCsfeException.ACCT_NO_SUCH_ACCOUNT){c=true
}}if(c){AjxTimedAction.cancelAction(this._pollHandler);
this._pollHandler=null;
this._localXForm.refresh();
ZaApp.getInstance().getCurrentController()._handleException(d,"DeleteAcctsPgrsDlg.prototype.deleteOneAccountCallback",null,false)
}else{e[DeleteAcctsPgrsDlg._DELETED_ACCTS].push(this._containedObject[this._currentIndex]);
this._currentIndex++;
if((this._currentIndex<this._containedObject.length)&&!this._aborted){e.status=AjxMessageFormat.format(ZaMsg.NAD_DeleteAccStatus,[AjxStringUtil.htmlEncode(this._containedObject[this._currentIndex][ZaAccount.A_name])]);
this._pollHandler=AjxTimedAction.scheduleAction(this.pollAction,"50")
}else{this._button[DeleteAcctsPgrsDlg.ABORT_BUTTON].setEnabled(false);
ZaApp.getInstance().getCurrentController().fireRemovalEvent(e[DeleteAcctsPgrsDlg._DELETED_ACCTS]);
AjxTimedAction.cancelAction(this._pollHandler);
this._pollHandler=null;
if(!this._aborted){e.status=ZaMsg.NAD_FinishedDeletingAccounts
}}this._localXForm.refresh()
}};
DeleteAcctsPgrsDlg.prototype.deleteOneAccount=function(){var b=new AjxCallback(this,this.deleteOneAccountCallback);
if(this._containedObject[this._currentIndex]&&this._containedObject[this._currentIndex].remove){this._containedObject[this._currentIndex].remove(b);
this._button[DeleteAcctsPgrsDlg.ABORT_BUTTON].setEnabled(true)
}};
DeleteAcctsPgrsDlg.prototype.getMyXForm=function(){var b=new Array();
var d=1;
b[0]=new ZaListHeaderItem("type",ZaMsg.ALV_Type_col,null,34,null,"objectClass",true,true);
b[1]=new ZaListHeaderItem(ZaAccount.A_name,ZaMsg.ALV_NameAddress_col,null,"auto",d++,ZaAccount.A_name,true,true);
var c={numCols:1,height:"300px",width:(AjxEnv.isIE?"490px":"495px"),align:_CENTER_,cssStyle:"text-align:center",items:[{type:_DWT_ALERT_,style:DwtAlert.INFORMATION,iconVisible:true,content:null,ref:DeleteAcctsPgrsDlg._STATUS,align:_CENTER_,valign:_MIDDLE_,colSpan:"*",width:(AjxEnv.isIE?"490px":"495px"),visibilityChecks:[[XForm.checkInstanceValueEmty,DeleteAcctsPgrsDlg._ERROR_MSG]],visibilityChangeEventSources:[DeleteAcctsPgrsDlg._ERROR_MSG]},{type:_DWT_ALERT_,style:DwtAlert.CRITICAL,iconVisible:true,content:null,ref:DeleteAcctsPgrsDlg._ERROR_MSG,align:_CENTER_,valign:_MIDDLE_,colSpan:"*",width:(AjxEnv.isIE?"490px":"495px"),visibilityChecks:[[XForm.checkInstanceValueNotEmty,DeleteAcctsPgrsDlg._ERROR_MSG]],visibilityChangeEventSources:[DeleteAcctsPgrsDlg._ERROR_MSG]},{type:_SPACER_,height:"5"},{type:_OUTPUT_,value:ZaMsg.NAD_DeletedAccounts,colSpan:"*",colSpan:"*",align:_LEFT_},{type:_SPACER_,height:"10"},{ref:DeleteAcctsPgrsDlg._DELETED_ACCTS,type:_DWT_LIST_,height:(AjxEnv.isIE?"180px":"210px"),width:(AjxEnv.isIE?"490px":"495px"),colSpan:"*",cssClass:"DLSource",align:_CENTER_,forceUpdate:true,widgetClass:ZaAccMiniListView,headerList:b,hideHeader:false}]};
return c
}
}if(AjxPackage.define("zimbraAdmin.servers.view.ZaServerVolumesListView")){ZaServerVolumesListView=function(e,d,c,b){ZaListView.call(this,e,d,c,b)
};
ZaServerVolumesListView.prototype=new ZaListView;
ZaServerVolumesListView.prototype.constructor=ZaServerVolumesListView;
ZaServerVolumesListView.prototype.toString=function(){return"ZaServerVolumesListView"
};
ZaServerVolumesListView.prototype._createItemHtml=function(g){var f=new Array(50);
var j=document.createElement("div");
j[DwtListView._STYLE_CLASS]="Row";
j[DwtListView._SELECTED_STYLE_CLASS]=j[DwtListView._STYLE_CLASS]+"-"+DwtCssStyle.SELECTED;
j.className=j[DwtListView._STYLE_CLASS];
this.associateItemWithElement(g,j,DwtListView.TYPE_LIST_ITEM);
var b=0;
f[b++]="<table width='100%' cellspacing='0' cellpadding='0'>";
f[b++]="<tr>";
if(this._headerList){var e=this._headerList.length;
for(var d=0;
d<e;
d++){var h=this._headerList[d]._field;
if(h==ZaServer.A_isCurrentVolume){f[b++]="<td align=left height=20px width="+this._headerList[d]._width+">";
var c=false;
for(a in ZaServer.currentkeys){if(this.parent&&this.parent.instance&&this.parent.instance[ZaServer.currentkeys[a]]){if(this.parent.instance[ZaServer.currentkeys[a]]==g[ZaServer.A_VolumeId]){c=true;
break
}}}if(c){f[b++]=AjxImg.getImageHtml("Check")
}f[b++]="</td>"
}else{if(h==ZaServer.A_VolumeName){f[b++]="<td align=left height=20px width="+this._headerList[d]._width+">";
f[b++]=AjxStringUtil.htmlEncode(g[ZaServer.A_VolumeName]);
f[b++]="</td>"
}else{if(h==ZaServer.A_VolumeRootPath){f[b++]="<td align=left height=20px width="+this._headerList[d]._width+">";
f[b++]=AjxStringUtil.htmlEncode(g[ZaServer.A_VolumeRootPath]);
f[b++]="</td>"
}else{if(h==ZaServer.A_VolumeType){f[b++]="<td align=left height=20px width="+this._headerList[d]._width+">";
f[b++]=ZaServer.volumeTypeChoices.getChoiceByValue(g[ZaServer.A_VolumeType]);
f[b++]="</td>"
}else{if(h==ZaServer.A_VolumeCompressBlobs){f[b++]="<td align=left height=20px width="+this._headerList[d]._width+">";
if(g[ZaServer.A_VolumeCompressBlobs]){f[b++]=ZaMsg.Yes
}else{f[b++]=ZaMsg.No
}f[b++]="</td>"
}else{if(h==ZaServer.A_VolumeCompressionThreshold){f[b++]="<td align=left height=20px width="+this._headerList[d]._width+">";
f[b++]=AjxMessageFormat.format(ZaMsg.VM_VolumeCompressThresholdBytes,[g[ZaServer.A_VolumeCompressionThreshold]]);
f[b++]="</td>"
}}}}}}}}else{f[b++]="<td width=100%>";
f[b++]=AjxStringUtil.htmlEncode(g);
f[b++]="</td>"
}f[b++]="</tr></table>";
j.innerHTML=f.join("");
return j
};
ZaServerVolumesListView.prototype._setNoResultsHtml=function(){var b=new AjxBuffer();
var c=document.createElement("div");
b.append("<table width='100%' cellspacing='0' cellpadding='1'>","<tr><td class='NoResults'><br>&nbsp","</td></tr></table>");
c.innerHTML=b.toString();
this._addRow(c)
};
ZaServerVolumesListView.prototype._sortColumn=function(c,d){if(d){var b=function(f,e){return(f<e)?1:((f>e)?-1:0)
};
this.getList().sort(b)
}else{this.getList().sort()
}}
}if(AjxPackage.define("zimbraAdmin.servers.view.ZaEditVolumeXDialog")){ZaEditVolumeXDialog=function(d,b,c,e){if(arguments.length==0){return
}this._standardButtons=[DwtDialog.OK_BUTTON,DwtDialog.CANCEL_BUTTON];
ZaXDialog.call(this,d,null,e,b,c);
this._containedObject={};
this.initForm(ZaServer.volumeObjModel,this.getMyXForm());
this._helpURL=ZaEditVolumeXDialog.helpURL
};
ZaEditVolumeXDialog.prototype=new ZaXDialog;
ZaEditVolumeXDialog.prototype.constructor=ZaEditVolumeXDialog;
ZaEditVolumeXDialog.helpURL=location.pathname+ZaUtil.HELP_URL+"managing_servers/adding_a_new_storage_volume_to_the_server.htm?locid="+AjxEnv.DEFAULT_LOCALE;
ZaEditVolumeXDialog.prototype.getMyXForm=function(c){var b={numCols:1,items:[{type:_ZAWIZGROUP_,isTabGroup:true,items:[{ref:ZaServer.A_VolumeName,type:_TEXTFIELD_,label:ZaMsg.LBL_VM_VolumeName,labelLocation:_LEFT_,width:250},{ref:ZaServer.A_VolumeRootPath,type:_TEXTFIELD_,label:ZaMsg.LBL_VM_VolumeRootPath,labelLocation:_LEFT_,width:250,enableDisableChecks:!c||c.isVolumeTypeInternal},{ref:ZaServer.A_VolumeType,type:_OSELECT1_,choices:ZaServer.volumeTypeChoices,width:250,label:ZaMsg.LBL_VM_VolumeType,enableDisableChecks:!c||c.isVolumeTypeInternal},{ref:ZaServer.A_VolumeCompressBlobs,type:_WIZ_CHECKBOX_,labelLocation:_LEFT_,align:_LEFT_,label:ZaMsg.VM_VolumeCompressBlobs,labelCssStyle:"padding-left:25px;",trueValue:true,falseValue:false,visibilityChecks:[function(){return !c||c.isVolumeTypeInternal
}]},{type:_GROUP_,numCols:3,colSpan:2,colSizes:["140px","100px","*"],visibilityChecks:[function(){return !c||c.isVolumeTypeInternal
}],items:[{ref:ZaServer.A_VolumeCompressionThreshold,type:_TEXTFIELD_,label:ZaMsg.VM_VolumeCompressThreshold,labelLocation:_LEFT_,align:_LEFT_,width:100,enableDisableChangeEventSources:[ZaServer.A_VolumeCompressBlobs],enableDisableChecks:[[XForm.checkInstanceValue,ZaServer.A_VolumeCompressBlobs,true]]},{type:_OUTPUT_,label:ZaMsg.NAD_bytes,labelCssStyle:"text-align:left;"}]}]}]};
return b
}
}if(AjxPackage.define("zimbraAdmin.servers.view.ZaProxyPortWarningXDialog")){ZaProxyPortWarningXDialog=function(e,c,d,g,b){if(arguments.length==0){return
}this._standardButtons=[DwtDialog.OK_BUTTON,DwtDialog.CANCEL_BUTTON];
ZaXDialog.call(this,e,null,g,c,d);
this._containedObject=b?b:{selectedChoice:0,choice1Label:"",choice2Label:"",choice3Label:"",warningMsg:""};
var f={items:[{id:"selectedChoice",type:_NUMBER_,defaultValue:0},{id:"choice1Label",type:_STRING_,defaultValue:ZaMsg.Server_WrongPortWarning_OP1},{id:"choice2Label",type:_STRING_,defaultValue:ZaMsg.Server_WrongPortWarning_OP2},{id:"choice3Label",type:_STRING_,defaultValue:ZaMsg.Server_WrongPortWarning_OP3},{id:"warningMsg",type:_STRING_,defaultValue:ZaMsg.Server_WrongPortWarning}]};
this.initForm(f,this.getMyXForm(),this._containedObject)
};
ZaProxyPortWarningXDialog.prototype=new ZaXDialog;
ZaProxyPortWarningXDialog.prototype.constructor=ZaProxyPortWarningXDialog;
ZaProxyPortWarningXDialog.prototype.getMyXForm=function(){var b={numCols:1,items:[{type:_ZAWIZGROUP_,numCols:2,colSizes:["100px","400px"],items:[{type:_DWT_ALERT_,containerCssStyle:"padding-bottom:0px",style:DwtAlert.WARNING,iconVisible:true,ref:"warningMsg",forceUpdate:true},{type:_RADIO_LABEL_,forceUpdate:true,ref:"selectedChoice",labelRef:"choice1Label",label:"N/A",groupname:"proxyChoice",value:0},{type:_RADIO_LABEL_,forceUpdate:true,ref:"selectedChoice",labelRef:"choice2Label",label:"N/A",groupname:"proxyChoice",value:1},{type:_RADIO_LABEL_,forceUpdate:true,ref:"selectedChoice",labelRef:"choice3Label",label:"N/A",groupname:"proxyChoice",value:2}]}]};
return b
}
}if(AjxPackage.define("zimbraAdmin.servers.view.ZaServerListView")){ZaServerListView=function(e){if(arguments.length==0){return
}var d=null;
var c=DwtControl.ABSOLUTE_STYLE;
var b=ZaServerListView._getHeaderList();
ZaListView.call(this,{parent:e,className:d,posStyle:c,headerList:b,id:ZaId.TAB_SERVER_MANAGE});
this._appCtxt=this.shell.getData(ZaAppCtxt.LABEL)
};
ZaServerListView.prototype=new ZaListView;
ZaServerListView.prototype.constructor=ZaServerListView;
ZaServerListView.prototype.toString=function(){return"ZaServerListView"
};
ZaServerListView.prototype.getTitle=function(){return ZaMsg.Servers_view_title
};
ZaServerListView.prototype.getTabIcon=function(){return"Server"
};
ZaServerListView.prototype._createItemHtml=function(e,c,f){var h=new Array(50);
var b=document.createElement("div");
b[DwtListView._STYLE_CLASS]="Row";
b[DwtListView._SELECTED_STYLE_CLASS]=b[DwtListView._STYLE_CLASS]+"-"+DwtCssStyle.SELECTED;
b.className=b[DwtListView._STYLE_CLASS];
this.associateItemWithElement(e,b,DwtListView.TYPE_LIST_ITEM);
var k=0;
h[k++]="<table width='100%'>";
h[k++]="<tr>";
var d=this._headerList.length;
for(var g=0;
g<d;
g++){var j=this._headerList[g]._field;
if(j=="type"){h[k++]="<td width="+this._headerList[g]._width+">"+AjxImg.getImageHtml("Server")+"</td>"
}else{if(j==ZaServer.A_ServiceHostname){h[k++]="<td align='left' width="+this._headerList[g]._width+"><nobr>";
h[k++]=AjxStringUtil.htmlEncode(e.attrs[ZaServer.A_ServiceHostname]);
h[k++]="</nobr></td>"
}else{if(j==ZaServer.A_description){h[k++]="<td align='left' width="+this._headerList[g]._width+"><nobr>";
h[k++]=AjxStringUtil.htmlEncode(ZaItem.getDescriptionValue(e.attrs[ZaServer.A_description]));
h[k++]="</nobr></td>"
}}}}h[k++]="</tr></table>";
b.innerHTML=h.join("");
return b
};
ZaServerListView._getHeaderList=function(){var b=new Array();
var d=1;
var c=0;
b[c++]=new ZaListHeaderItem("type",null,null,"22px",null,"objectClass",false,true);
b[c++]=new ZaListHeaderItem(ZaServer.A_ServiceHostname,ZaMsg.SLV_ServiceHName_col,null,200,d++,ZaServer.A_ServiceHostname,true,true);
b[c++]=new ZaListHeaderItem(ZaServer.A_description,ZaMsg.DLV_Description_col,null,"auto",null,ZaServer.A_description,true,true);
return b
}
}if(AjxPackage.define("zimbraAdmin.servers.view.ZaServerMiniListView")){ZaServerMiniListView=function(e,d,c,b){if(arguments.length==0){return
}ZaListView.call(this,e,d,c,b);
this.hideHeader=false
};
ZaServerMiniListView.prototype=new ZaListView;
ZaServerMiniListView.prototype.constructor=ZaServerMiniListView;
ZaServerMiniListView.prototype.toString=function(){return"ZaServerMiniListView"
};
ZaServerMiniListView.prototype.createHeaderHtml=function(b){if(!this.hideHeader){DwtListView.prototype.createHeaderHtml.call(this,b)
}};
ZaServerMiniListView.prototype._createItemHtml=function(g){var e=new Array(50);
var h=document.createElement("div");
h[DwtListView._STYLE_CLASS]="Row";
h[DwtListView._SELECTED_STYLE_CLASS]=h[DwtListView._STYLE_CLASS]+"-"+DwtCssStyle.SELECTED;
h.className=h[DwtListView._STYLE_CLASS];
this.associateItemWithElement(g,h,DwtListView.TYPE_LIST_ITEM);
var b=0;
e[b++]="<table width='100%' cellspacing='0' cellpadding='0'>";
e[b++]="<tr>";
var d=this._headerList.length;
for(var c=0;
c<d;
c++){var f=this._headerList[c]._field;
if(f==ZaServer.A_ServiceHostname){e[b++]="<td align='left' width="+this._headerList[c]._width+"><nobr>";
e[b++]=AjxStringUtil.htmlEncode(g.attrs[ZaServer.A_ServiceHostname]);
e[b++]="</nobr></td>"
}else{if(f=="status"){e[b++]="<td width="+this._headerList[c]._width+">";
switch(g.status){case"processing":e[b++]=AjxImg.getImageHtml("DwtWait16Icon");
break;
case"error":e[b++]=AjxImg.getImageHtml("Cancel");
break;
case"success":e[b++]=AjxImg.getImageHtml("Check");
break;
default:e[b++]=AjxImg.getImageHtml("QuestionMark");
break
}e[b++]="</td>"
}}}e[b++]="</tr></table>";
h.innerHTML=e.join("");
return h
}
}if(AjxPackage.define("zimbraAdmin.servers.view.ZaFlushCacheXDialog")){ZaFlushCacheXDialog=function(b,c){if(arguments.length==0){return
}this._standardButtons=[DwtDialog.OK_BUTTON];
ZaXDialog.call(this,b,null,ZaMsg.FlushCacheDlgTitle+" ("+c.name+")","480px","380px","ZaFlushCacheXDialog",ZaId.FLUSH_SERVER_CACHE+c.id);
this._containedObject={};
this.initForm(ZaServer.volumeObjModel,this.getMyXForm());
this._helpURL=location.pathname+ZaUtil.HELP_URL+"managing_servers/flushing_the_server_cache.htm?locid="+AjxEnv.DEFAULT_LOCALE;
ZaApp.getInstance().dialogs["ZaFlushCacheXDialog_"+c.id]=this
};
ZaFlushCacheXDialog.prototype=new ZaXDialog;
ZaFlushCacheXDialog.prototype.supportMinimize=true;
ZaFlushCacheXDialog.prototype.constructor=ZaFlushCacheXDialog;
ZaFlushCacheXDialog.flushingServerModel={type:_OBJECT_,items:[{id:ZaItem.A_zimbraId,type:_STRING_,ref:"attrs/"+ZaItem.A_zimbraId},{id:"status",type:_NUMBER_,ref:"status"},{id:ZaServer.A_name,ref:"attrs/"+ZaServer.A_name,type:_STRING_},{id:ZaServer.A_ServiceHostname,ref:"attrs/"+ZaServer.A_ServiceHostname,type:_HOSTNAME_OR_IP_,maxLength:256},{id:ZaServer.A_zimbraMailProxyServiceEnabled,ref:"attrs/"+ZaServer.A_zimbraMailProxyServiceEnabled,type:_ENUM_,choices:[false,true]},{id:ZaServer.A_zimbraMailboxServiceInstalled,ref:"attrs/"+ZaServer.A_zimbraMailboxServiceInstalled,type:_ENUM_,choices:[false,true]}]};
ZaFlushCacheXDialog.xModel={items:[{id:"statusMessage",ref:"statusMessage",type:_STRING_},{id:"flushZimlet",ref:"flushZimlet",type:_ENUM_,choices:[false,true]},{id:"flushSkin",ref:"flushSkin",type:_ENUM_,choices:[false,true]},{id:"flushLocale",ref:"flushSkin",type:_ENUM_,choices:[false,true]},{id:"serverList",ref:"serverList",type:_LIST_,listItem:ZaFlushCacheXDialog.flushingServerModel},{id:"status",type:_NUMBER_,ref:"status"}]};
ZaFlushCacheXDialog.flushCacheCalback=function(f,g){if(f.busyId){ZaApp.getInstance().getAppCtxt().getShell().setBusy(false,f.busyId)
}var c=f.ix;
var d=[];
var j=this.getInstanceValue("serverList");
d._version=j._version+1;
for(var h=0;
h<j.length;
h++){d.push(j[h])
}if(g.isException&&g.isException()){this.getModel().setInstanceValue(this.getInstance(),"status",0);
var b=AjxMessageFormat.format(ZaMsg.ERROR_FAILED_FLUSH_CACHE,[f.serverList[f.ix].attrs[ZaServer.A_name]]);
this.getModel().setInstanceValue(this.getInstance(),"statusMessage",b);
d[c].status="error";
this.getModel().setInstanceValue(this.getInstance(),"serverList",d);
ZaApp.getInstance().getCurrentController()._handleException(g.getException(),"ZaFlushCacheXDialog.flushCacheCalback",null,false)
}else{if(g.getResponse()&&g.getResponse().Body&&g.getResponse().Body.BatchResponse&&g.getResponse().Body.BatchResponse.Fault){this.getModel().setInstanceValue(this.getInstance(),"status",0);
this.getModel().setInstanceValue(this.getInstance(),"statusMessage",b);
var l=g.getResponse().Body.BatchResponse.Fault;
if(l instanceof Array){l=l[0]
}if(l){var k=ZmCsfeCommand.faultToEx(l);
ZaApp.getInstance().getCurrentController()._handleException(k,"ZaFlushCacheXDialog.flushCacheCalback",null,false)
}}else{var e=Dwt.getNextId();
c++;
d._version=j._version+1;
d[c-1].status="success";
if(c>=j.length){this.getModel().setInstanceValue(this.getInstance(),"status",0);
this.getModel().setInstanceValue(this.getInstance(),"statusMessage",ZaMsg.FinishedFlushCache);
this.getModel().setInstanceValue(this.getInstance(),"serverList",d)
}else{d[c].status="processing";
this.getModel().setInstanceValue(this.getInstance(),"serverList",d);
f.busyid=e;
f.ix=c;
var m=new AjxCallback(this,ZaFlushCacheXDialog.flushCacheCalback,f);
f.callback=m;
this.getModel().setInstanceValue(this.getInstance(),"status",1);
this.getModel().setInstanceValue(this.getInstance(),"statusMessage",AjxMessageFormat.format(ZaMsg.BUSY_FLUSH_CACHE_SERVER,[f.serverList[f.ix].attrs[ZaServer.A_name]]));
ZaServer.flushCache(f)
}}}};
ZaFlushCacheXDialog.flushButtonListener=function(){var b=Dwt.getNextId();
var c=this.getInstance();
c.ix=0;
c.busyId=b;
var d=new AjxCallback(this,ZaFlushCacheXDialog.flushCacheCalback,c);
c.callback=d;
this.getModel().setInstanceValue(this.getInstance(),"status",1);
this.getModel().setInstanceValue(this.getInstance(),"statusMessage",AjxMessageFormat.format(ZaMsg.BUSY_FLUSH_CACHE_SERVER,[c.serverList[c.ix].attrs[ZaServer.A_name]]));
ZaServer.flushCache(c)
};
ZaFlushCacheXDialog.prototype.isFlushBtnEnabled=function(){return((this.getInstanceValue("status")<1)&&(this.getInstanceValue("serverList").length>0)&&(this.getInstanceValue("flushZimlet")||this.getInstanceValue("flushSkin")||this.getInstanceValue("flushLocale")))
};
ZaFlushCacheXDialog.prototype.getMyXForm=function(){var b=[];
var d=1;
b[0]=new ZaListHeaderItem(ZaServer.A_ServiceHostname,ZaMsg.SLV_ServiceHName_col,null,"auto",d++,ZaServer.A_ServiceHostname,true,true);
b[1]=new ZaListHeaderItem("status",ZaMsg.STV_Status_col,null,40,d++,"status",true,true);
var c={numCols:1,items:[{type:_ZAWIZGROUP_,isTabGroup:true,colSizes:["200px","275px"],items:[{type:_DWT_ALERT_,style:DwtAlert.WARNING,iconVisible:true,content:ZaMsg.Alert_FlushCache,align:_CENTER_,valign:_MIDDLE_,colSpan:2,width:"460px",visibilityChecks:[]},{type:_DWT_ALERT_,style:DwtAlert.INFORMATION,iconVisible:true,content:null,ref:"statusMessage",align:_CENTER_,valign:_MIDDLE_,colSpan:2,width:"460px",visibilityChecks:[[XForm.checkInstanceValueNotEmty,"statusMessage"]],visibilityChangeEventSources:["statusMessage"],bmolsnr:true},{ref:"serverList",type:_DWT_LIST_,labelLocation:_NONE_,label:null,height:"120",width:"460",colSpan:2,headerList:b,align:_CENTER_,visibilityChecks:[],enableDisableChecks:[],widgetClass:ZaServerMiniListView,valueChangeEventSources:["serverList"]},{ref:"flushZimlet",type:_WIZ_CHECKBOX_,label:ZaMsg.Flush_zimlet_cache,trueValue:true,falseValue:false,visibilityChecks:[],enableDisableChecks:[]},{ref:"flushSkin",type:_WIZ_CHECKBOX_,label:ZaMsg.Flush_theme_cache,trueValue:true,falseValue:false,visibilityChecks:[],enableDisableChecks:[]},{ref:"flushLocale",type:_WIZ_CHECKBOX_,label:ZaMsg.Flush_locale_cache,trueValue:true,falseValue:false,visibilityChecks:[],enableDisableChecks:[]},{type:_CELLSPACER_},{type:_DWT_BUTTON_,label:ZaMsg.FlushCacheBtn,width:"100px",onActivate:"ZaFlushCacheXDialog.flushButtonListener.call(this);",enableDisableChangeEventSources:["status","flushZimlet","flushSkin","flushLocale"],enableDisableChecks:[ZaFlushCacheXDialog.prototype.isFlushBtnEnabled]}]}]};
return c
}
}if(AjxPackage.define("zimbraAdmin.servers.view.ZaServerXFormView")){ZaServerXFormView=function(b,c){ZaTabView.call(this,{parent:b,iKeyName:"ZaServerXFormView",contextId:ZaId.TAB_SERVER_EDIT});
this.TAB_INDEX=0;
this.initForm(ZaServer.myXModel,this.getMyXForm(c),null);
this._localXForm.setController(ZaApp.getInstance())
};
ZaServerXFormView.prototype=new ZaTabView();
ZaServerXFormView.prototype.constructor=ZaServerXFormView;
ZaTabView.XFormModifiers.ZaServerXFormView=new Array();
ZaServerXFormView.setObjectMethods=new Array();
ZaServerXFormView.indexVolChoices=new XFormChoices([],XFormChoices.OBJECT_LIST,ZaServer.A_VolumeId,ZaServer.A_VolumeName);
ZaServerXFormView.messageVolChoices=new XFormChoices([],XFormChoices.OBJECT_LIST,ZaServer.A_VolumeId,ZaServer.A_VolumeName);
ZaServerXFormView.onFormFieldChanged=function(d,c,b){b.parent.setDirty(true);
this.setInstanceValue(d);
return d
};
ZaServerXFormView.onReverseLookupTargetFieldChanged=function(d,c,b){DBG.println(AjxDebug.DBG1,"On Form Field Changed ...");
b.parent.setDirty(true);
this.setInstanceValue(d);
if(d=="TRUE"){this.setInstanceValue("TRUE","/attrs/"+ZaServer.A_ImapCleartextLoginEnabled);
this.setInstanceValue("TRUE","/attrs/"+ZaServer.A_Pop3CleartextLoginEnabled)
}return d
};
ZaServerXFormView.prototype.setObject=function(l){this.entry=l;
this._containedObject=new ZaServer();
this._containedObject.attrs=new Object();
this._containedObject[ZaServer.A_showVolumes]=l[ZaServer.A_showVolumes];
this._containedObject[ZaServer.A_ServiceHostname]=l[ZaServer.A_ServiceHostname];
this._containedObject.name=l.name;
this._containedObject.type=l.type;
if(l.rights){this._containedObject.rights=l.rights
}if(l.setAttrs){this._containedObject.setAttrs=l.setAttrs
}if(l.getAttrs){this._containedObject.getAttrs=l.getAttrs
}if(l._defaultValues){this._containedObject._defaultValues=l._defaultValues
}if(l.id){this._containedObject.id=l.id
}this._containedObject[ZaServer.A_Volumes]=[];
if(l.attrs){for(var k in l.attrs){var h=this._localXForm.getModel().getItem(k);
if((h!=null&&h.type==_LIST_)||(l.attrs[k]!=null&&l.attrs[k] instanceof Array)){this._containedObject.attrs[k]=ZaItem.deepCloneListItem(l.attrs[k])
}else{this._containedObject.attrs[k]=l.attrs[k]
}}}if(ZaItem.modelExtensions.ZaServer){for(var g=0;
g<ZaItem.modelExtensions.ZaServer.length;
g++){var d=ZaItem.modelExtensions.ZaServer[g];
if(l[d]){this._containedObject[d]={};
for(var k in l[d]){var h=this._localXForm.getModel().getItem(k);
if((h!=null&&h.type==_LIST_)||(l[d][k]!=null&&l[d][k] instanceof Array)){this._containedObject[d][k]=ZaItem.deepCloneListItem(l[d][k])
}else{this._containedObject[d][k]=l[d][k]
}}}}}if(l[ZaServer.A_Volumes]){for(var k in l[ZaServer.A_Volumes]){this._containedObject[ZaServer.A_Volumes][k]={};
if(l[ZaServer.A_Volumes][k]){for(var n in l[ZaServer.A_Volumes][k]){this._containedObject[ZaServer.A_Volumes][k][n]=l[ZaServer.A_Volumes][k][n]
}}}}if(!l[ZaModel.currentTab]){this._containedObject[ZaModel.currentTab]="1"
}else{this._containedObject[ZaModel.currentTab]=l[ZaModel.currentTab]
}if(l[ZaServer.A_showVolumes]&&this._containedObject[ZaServer.A_Volumes]){this._containedObject[ZaServer.A_Volumes].sort(ZaServer.compareVolumesByName);
this._containedObject[ZaServer.A_Volumes]._version=l[ZaServer.A_Volumes]._version?l[ZaServer.A_Volumes]._version:1;
var e=this._containedObject[ZaServer.A_Volumes].length;
var b=[];
var c=[];
for(var g=0;
g<e;
g++){if(this._containedObject[ZaServer.A_Volumes][g][ZaServer.A_VolumeType]==ZaServer.INDEX){b.push(this._containedObject[ZaServer.A_Volumes][g])
}else{if(this._containedObject[ZaServer.A_Volumes][g][ZaServer.A_VolumeType]==ZaServer.MSG){c.push(this._containedObject[ZaServer.A_Volumes][g])
}}}}ZaServerXFormView.indexVolChoices.setChoices(b);
ZaServerXFormView.indexVolChoices.dirtyChoices();
ZaServerXFormView.messageVolChoices.setChoices(c);
ZaServerXFormView.messageVolChoices.dirtyChoices();
if(ZaServerXFormView.setObjectMethods){var f=ZaServerXFormView.setObjectMethods;
var e=f.length;
for(var g=0;
g<e;
g++){if(typeof(f[g])=="function"){try{f[g].call(this,l)
}catch(j){this._handleException(j,"ZaServerXFormView.prototype.setObject");
break
}}}}for(var m in ZaServer.currentkeys){if(l[ZaServer.currentkeys[m]]){this._containedObject[ZaServer.currentkeys[m]]=l[ZaServer.currentkeys[m]]
}}this._containedObject.newVolID=-1;
this._localXForm.setInstance(this._containedObject);
this.formDirtyLsnr=new AjxListener(ZaApp.getInstance().getCurrentController(),ZaXFormViewController.prototype.handleXFormChange);
this._localXForm.addListener(DwtEvent.XFORMS_FORM_DIRTY_CHANGE,this.formDirtyLsnr);
this._localXForm.addListener(DwtEvent.XFORMS_VALUE_ERROR,this.formDirtyLsnr)
};
ZaServerXFormView.getTLSEnabled=function(){var b=this.getModel().getInstanceValue(this.getInstance(),ZaServer.A_zimbraMtaSaslAuthEnable);
return b=="yes"
};
ZaServerXFormView.getIMAPEnabled=function(){var b=this.getModel().getInstanceValue(this.getInstance(),ZaServer.A_ImapServerEnabled);
return b=="TRUE"
};
ZaServerXFormView.getIMAPSSLEnabled=function(){var b=this.getModel().getInstanceValue(this.getInstance(),ZaServer.A_ImapSSLServerEnabled);
return(b=="TRUE"&&ZaServerXFormView.getIMAPEnabled.call(this))
};
ZaServerXFormView.getPOP3Enabled=function(){var b=this.getModel().getInstanceValue(this.getInstance(),ZaServer.A_Pop3ServerEnabled);
return b=="TRUE"
};
ZaServerXFormView.getPOP3SSLEnabled=function(){var b=this.getModel().getInstanceValue(this.getInstance(),ZaServer.A_Pop3SSLServerEnabled);
return(b=="TRUE"&&ZaServerXFormView.getPOP3Enabled.call(this))
};
ZaServerXFormView.getMailClientEnabled=function(){var b=this.getModel().getInstanceValue(this.getInstance(),ZaServer.A_showVolumes);
return b
};
ZaServerXFormView.getIsReverseProxyLookupTarget=function(){return(this.getModel().getInstanceValue(this.getInstance(),ZaServer.A_zimbraReverseProxyLookupTarget)=="TRUE")
};
ZaServerXFormView.volumeSelectionListener=function(c){var b=this.widget.getSelection();
if(b&&b.length){b.sort(ZaServer.compareVolumesByName);
this.getModel().setInstanceValue(this.getInstance(),ZaServer.A2_volume_selection_cache,b)
}else{this.getModel().setInstanceValue(this.getInstance(),ZaServer.A2_volume_selection_cache,null)
}if(c.detail==DwtListView.ITEM_DBL_CLICKED){ZaServerXFormView.editButtonListener.call(this)
}};
ZaServerXFormView.isEditVolumeEnabled=function(){return(!AjxUtil.isEmpty(this.getInstanceValue(ZaServer.A2_volume_selection_cache))&&this.getInstanceValue(ZaServer.A2_volume_selection_cache).length==1)
};
ZaServerXFormView.isDeleteVolumeEnabled=function(){if(!AjxUtil.isEmpty(this.getInstanceValue(ZaServer.A2_volume_selection_cache))){var b=this.getInstanceValue(ZaServer.A2_volume_selection_cache);
for(var c=0;
c<b.length;
c++){for(a in ZaServer.currentkeys){if(b[c][ZaServer.A_VolumeId]==this.getInstanceValue(ZaServer.currentkeys[a])){return false
}}}return true
}else{return false
}};
ZaServerXFormView.updateVolume=function(){if(this.parent.editVolumeDlg){this.parent.editVolumeDlg.popdown();
var e=this.parent.editVolumeDlg.getObject();
var c=AjxSoapDoc.create("ModifyVolumeRequest",ZaZimbraAdmin.URN,null);
c.getMethod().setAttribute(ZaServer.A_VolumeId,e[ZaServer.A_VolumeId]);
var d=c.set("volume",null);
d.setAttribute("type",e[ZaServer.A_VolumeType]);
d.setAttribute("name",e[ZaServer.A_VolumeName]);
d.setAttribute("rootpath",e[ZaServer.A_VolumeRootPath]);
d.setAttribute("compressBlobs",e[ZaServer.A_VolumeCompressBlobs]);
d.setAttribute("compressionThreshold",e[ZaServer.A_VolumeCompressionThreshold]);
var g=new AjxCallback(this,ZaServerXFormView.prototype.modifyVolumeCallback);
var f={soapDoc:c,targetServer:this.getInstanceValue(ZaItem.A_zimbraId),asyncMode:true,callback:g};
var b={controller:ZaApp.getInstance().getCurrentController(),busyMsg:ZaMsg.BUSY_CREATE_VOL};
ZaRequestMgr.invoke(f,b)
}};
ZaServerXFormView.prototype.modifyVolumeCallback=function(b){if(b&&b.isException()){ZaApp.getInstance().getCurrentController()._handleException(b.getException(),"ZaServerXFormView.createVolumeCallback")
}else{ZaApp.getInstance().getCurrentController().popupMsgDialog(ZaMsg.UPDATE_VOLUME_CONFIRMATION);
var c=new AjxCallback(this,ZaServerXFormView.loadVolumesCallback);
ZaServer.prototype.loadVolumes.call(this.parent.getObject(),c)
}};
ZaServerXFormView.prototype.createVolumeCallback=function(f){if(f&&f.isException()){ZaApp.getInstance().getCurrentController()._handleException(f.getException(),"ZaServerXFormView.createVolumeCallback")
}else{this.addVolumeDlg.popdown();
var c=f.getResponse().Body.CreateVolumeResponse;
var e=this._localXForm.getInstanceValue(ZaServer.A_Volumes);
var b=[];
for(var d=0;
d<e.length;
d++){b.push(e[d])
}b.push(c.volume[0]);
this._localXForm.setInstanceValue(b,ZaServer.A_Volumes);
ZaApp.getInstance().getCurrentController().popupMsgDialog(AjxMessageFormat.format(ZaMsg.VolumeCreated,[c.volume[0][ZaServer.A_VolumeRootPath]]))
}};
ZaServerXFormView.prototype.doAddVolume=function(e){ZaApp.getInstance().dialogs.confirmMessageDialog.popdown();
var c=AjxSoapDoc.create("CreateVolumeRequest",ZaZimbraAdmin.URN,null);
var d=c.set("volume",null);
d.setAttribute("type",e[ZaServer.A_VolumeType]);
d.setAttribute("name",e[ZaServer.A_VolumeName]);
d.setAttribute("rootpath",e[ZaServer.A_VolumeRootPath]);
d.setAttribute("compressBlobs",e[ZaServer.A_VolumeCompressBlobs]);
d.setAttribute("compressionThreshold",e[ZaServer.A_VolumeCompressionThreshold]);
var g=new AjxCallback(this,ZaServerXFormView.prototype.createVolumeCallback);
var f={soapDoc:c,targetServer:this._containedObject.id,asyncMode:true,callback:g};
var b={controller:ZaApp.getInstance().getCurrentController(),busyMsg:ZaMsg.BUSY_CREATE_VOL};
ZaRequestMgr.invoke(f,b)
};
ZaServerXFormView.addVolume=function(){if(this.parent.addVolumeDlg){var b=this.parent.addVolumeDlg.getObject();
ZaApp.getInstance().dialogs.confirmMessageDialog=new ZaMsgDialog(ZaApp.getInstance().getAppCtxt().getShell(),null,[DwtDialog.YES_BUTTON,DwtDialog.NO_BUTTON],null,ZaId.VIEW_STATUS+"_confirmMessage");
ZaApp.getInstance().dialogs.confirmMessageDialog.setMessage(AjxMessageFormat.format(ZaMsg.Q_CREATE_VOLUME,[b[ZaServer.A_VolumeRootPath]]),DwtMessageDialog.INFO_STYLE);
ZaApp.getInstance().dialogs.confirmMessageDialog.registerCallback(DwtDialog.YES_BUTTON,ZaServerXFormView.prototype.doAddVolume,this.parent,[b]);
ZaApp.getInstance().dialogs.confirmMessageDialog.popup()
}};
ZaServerXFormView.editButtonListener=function(){var b=this.getInstance();
if(b.volume_selection_cache&&b.volume_selection_cache[0]){var g=this.getForm().parent;
if(!g.editVolumeDlg){g.editVolumeDlg=new ZaEditVolumeXDialog(ZaApp.getInstance().getAppCtxt().getShell(),"550px","150px",ZaMsg.VM_Edit_Volume_Title);
g.editVolumeDlg.registerCallback(DwtDialog.OK_BUTTON,ZaServerXFormView.updateVolume,this.getForm(),null)
}var f={};
f[ZaServer.A_VolumeId]=b.volume_selection_cache[0][ZaServer.A_VolumeId];
f[ZaServer.A_VolumeName]=b.volume_selection_cache[0][ZaServer.A_VolumeName];
f[ZaServer.A_VolumeRootPath]=b.volume_selection_cache[0][ZaServer.A_VolumeRootPath];
f[ZaServer.A_VolumeCompressBlobs]=b.volume_selection_cache[0][ZaServer.A_VolumeCompressBlobs];
f[ZaServer.A_VolumeCompressionThreshold]=b.volume_selection_cache[0][ZaServer.A_VolumeCompressionThreshold];
f[ZaServer.A_VolumeType]=b.volume_selection_cache[0][ZaServer.A_VolumeType];
var c=this.getModel().getInstanceValue(this.getInstance(),ZaServer.A_Volumes);
var e=c.length;
for(var d=0;
d<e;
d++){if(c[d][ZaServer.A_VolumeId]==f[ZaServer.A_VolumeId]||(!c[d][ZaServer.A_VolumeId]&&(c[d][ZaServer.A_VolumeName]==f[ZaServer.A_VolumeName])&&(c[d][ZaServer.A_VolumeRootPath]==f[ZaServer.A_VolumeRootPath]))){f._index=d;
break
}}g.editVolumeDlg.setObject(f);
g.editVolumeDlg.popup()
}};
ZaServerXFormView.loadVolumesCallback=function(g){if(g&&g.isException()){ZaApp.getInstance().getCurrentController()._handleException(g.getException(),"ZaServerXFormView.loadVolumesCallback")
}else{var c=g.getResponse().Body.GetAllVolumesResponse;
var b=[];
var f=c.volume;
if(f){var e=f.length;
for(var d=0;
d<e;
d++){b.push(f[d])
}}this.setInstanceValue(b,ZaServer.A_Volumes)
}};
ZaServerXFormView.doDeleteVolume=function(c,e,d){ZaApp.getInstance().dialogs.confirmMessageDialog.popdown();
if(d!=null&&d.isException&&d.isException()){ZaApp.getInstance().getCurrentController()._handleException(d.getException(),"ZaServerXFormView.doDeleteVolume")
}else{if(AjxUtil.isEmpty(c)){if(!AjxUtil.isEmpty(e)){ZaApp.getInstance().getCurrentController().popupMsgDialog(ZaMsg.DELETED_VOLUMES_CONFIRMATION);
var f=new AjxCallback(this,ZaServerXFormView.loadVolumesCallback);
ZaServer.prototype.loadVolumes.call(this.getForm().parent.getObject(),f)
}return
}var b=c.shift();
if(!e){e=[]
}e.push(b);
var f=new AjxCallback(this,ZaServerXFormView.doDeleteVolume,[c,e]);
ZaServer.prototype.deleteVolume.call(this.getForm().parent.getObject(),b[ZaServer.A_VolumeId],f)
}};
ZaServerXFormView.deleteButtonListener=function(){var c=this.getInstance();
var d=[];
if(!c.volume_selection_cache){return
}var b=this.getInstanceValue(ZaServer.A2_volume_selection_cache);
ZaApp.getInstance().dialogs.confirmMessageDialog=new ZaMsgDialog(ZaApp.getInstance().getAppCtxt().getShell(),null,[DwtDialog.YES_BUTTON,DwtDialog.NO_BUTTON],null,ZaId.VIEW_STATUS+"_confirmMessage");
ZaApp.getInstance().dialogs.confirmMessageDialog.setMessage(ZaMsg.Q_DELETE_VOLUMES,DwtMessageDialog.WARNING_STYLE);
ZaApp.getInstance().dialogs.confirmMessageDialog.registerCallback(DwtDialog.YES_BUTTON,ZaServerXFormView.doDeleteVolume,this,[b,[]]);
ZaApp.getInstance().dialogs.confirmMessageDialog.popup()
};
ZaServerXFormView.addButtonListener=function(){var b=this.getInstance();
var d=this.getForm().parent;
if(!d.addVolumeDlg){d.addVolumeDlg=new ZaEditVolumeXDialog(ZaApp.getInstance().getAppCtxt().getShell(),"550px","150px",ZaMsg.VM_Add_Volume_Title);
d.addVolumeDlg.registerCallback(DwtDialog.OK_BUTTON,ZaServerXFormView.addVolume,this.getForm(),null)
}var c={};
c[ZaServer.A_VolumeId]=b.newVolID--;
c[ZaServer.A_VolumeName]="";
c[ZaServer.A_VolumeRootPath]="/opt/zimbra";
c[ZaServer.A_VolumeCompressBlobs]=false;
c[ZaServer.A_VolumeCompressionThreshold]=4096;
c[ZaServer.A_VolumeType]=ZaServer.MSG;
c.current=false;
d.addVolumeDlg.setObject(c);
d.addVolumeDlg.popup()
};
ZaServerXFormView.SERVICE_TAB_ATTRS=[ZaServer.A_zimbraLdapServiceEnabled,ZaServer.A_zimbraMailboxServiceEnabled,ZaServer.A_zimbraMailProxyServiceEnabled,ZaServer.A_zimbraMtaServiceEnabled,ZaServer.A_zimbraSnmpServiceEnabled,ZaServer.A_zimbraAntiSpamServiceEnabled,ZaServer.A_zimbraAntiVirusServiceEnabled,ZaServer.A_zimbraOpenDKIMServiceEnabled,ZaServer.A_zimbraSpellServiceEnabled,ZaServer.A_zimbraLoggerServiceEnabled];
ZaServerXFormView.SERVICE_TAB_RIGHTS=[];
ZaServerXFormView.MTA_TAB_ATTRS=[ZaServer.A_zimbraMtaSaslAuthEnable,ZaServer.A_zimbraMtaTlsAuthOnly,ZaServer.A_zimbraSmtpHostname,ZaServer.A_SmtpPort,ZaServer.A_zimbraMtaRelayHost,ZaServer.A_zimbraMtaFallbackRelayHost,ZaServer.A_SmtpTimeout,ZaServer.A_zimbraMtaMyNetworks,ZaServer.A_zimbraMtaSmtpDnsSupportLevel];
ZaServerXFormView.MTA_TAB_RIGHTS=[];
ZaServerXFormView.AUTH_TAB_ATTRS=[ZaServer.A_zimbraSpnegoAuthPrincipal,ZaServer.A_zimbraSpnegoAuthTargetName];
ZaServerXFormView.AUTH_TAB_RIGHTS=[];
ZaServerXFormView.IMAP_TAB_ATTRS=[ZaServer.A_ImapServerEnabled,ZaServer.A_ImapSSLServerEnabled,ZaServer.A_ImapCleartextLoginEnabled,ZaServer.A_zimbraImapNumThreads,ZaServer.A_zimbraImapBindPort,ZaServer.A_ImapSSLBindPort,ZaServer.A_zimbraImapProxyBindPort,ZaServer.A_zimbraImapSSLProxyBindPort];
ZaServerXFormView.IMAP_TAB_RIGHTS=[];
ZaServerXFormView.POP_TAB_ATTRS=[ZaServer.A_Pop3ServerEnabled,ZaServer.A_Pop3SSLServerEnabled,ZaServer.A_Pop3CleartextLoginEnabled,ZaServer.A_zimbraPop3NumThreads,ZaServer.A_Pop3AdvertisedName,ZaServer.A_Pop3BindAddress,ZaServer.A_zimbraPop3BindPort,ZaServer.A_zimbraPop3SSLBindPort,ZaServer.A_zimbraPop3ProxyBindPort,ZaServer.A_zimbraPop3SSLProxyBindPort];
ZaServerXFormView.POP_TAB_RIGHTS=[];
ZaServerXFormView.VOLUMES_TAB_ATTRS=[];
ZaServerXFormView.VOLUMES_TAB_RIGHTS=[ZaServer.MANAGE_VOLUME_RIGHT];
ZaServerXFormView.MTA_NETWORK_GROUP_ATTRS=[ZaServer.A_zimbraImapBindPort,ZaServer.A_ImapSSLBindPort,ZaServer.A_zimbraImapProxyBindPort,ZaServer.A_zimbraImapProxyBindPort,ZaServer.A_zimbraImapSSLProxyBindPort];
ZaServerXFormView.MTA_SERVICE_GROUP_ATTRS=[ZaServer.A_ImapServerEnabled,ZaServer.A_ImapSSLServerEnabled,ZaServer.A_ImapCleartextLoginEnabled,ZaServer.A_zimbraImapNumThreads];
ZaServerXFormView.BIND_IP_TAB_ATTRS=[ZaServer.A_zimbraMailBindAddress,ZaServer.A_zimbraMailSSLBindAddress,ZaServer.A_zimbraMailSSLClientCertBindAddress,ZaServer.A_zimbraAdminBindAddress];
ZaServerXFormView.BIND_IP_TAB_RIGHTS=[];
ZaServerXFormView.myXFormModifier=function(q,c){var h=new Array();
h[0]=new ZaListHeaderItem(ZaServer.A_VolumeName,ZaMsg.VM_VolumeName,null,"100px",false,null,false,true);
h[1]=new ZaListHeaderItem(ZaServer.A_VolumeRootPath,ZaServer.LBL_VolumeRootPath,null,"200px",false,null,false,true);
h[2]=new ZaListHeaderItem(ZaServer.A_VolumeType,ZaMsg.VM_VolumeType,null,"120px",null,null,false,true);
h[3]=new ZaListHeaderItem(ZaServer.A_VolumeCompressBlobs,ZaMsg.VM_VolumeCompressBlobs,null,"120px",null,null,false,true);
h[4]=new ZaListHeaderItem(ZaServer.A_VolumeCompressionThreshold,ZaMsg.VM_VolumeCompressThreshold,null,"120px",null,null,false,true);
h[5]=new ZaListHeaderItem(ZaServer.A_isCurrentVolume,ZaMsg.VM_CurrentVolume,null,"auto",null,null,false,true);
var x,v,u,t,s,r,p,o,n;
var b=[];
this.helpMap={};
x=++this.TAB_INDEX;
b.push({value:x,label:ZaMsg.TABT_GeneralPage});
this.helpMap[x]=[location.pathname,ZaUtil.HELP_URL,"managing_servers/managing_servers.htm","?locid=",AjxEnv.DEFAULT_LOCALE].join("");
if(ZaTabView.isTAB_ENABLED(c,ZaServerXFormView.SERVICE_TAB_ATTRS,ZaServerXFormView.SERVICE_TAB_RIGHTS)){v=++this.TAB_INDEX;
b.push({value:v,label:ZaMsg.NAD_Tab_Services});
this.helpMap[v]=[location.pathname,ZaUtil.HELP_URL,"managing_servers/managing_servers.htm","?locid=",AjxEnv.DEFAULT_LOCALE].join("")
}if(ZaTabView.isTAB_ENABLED(c,ZaServerXFormView.MTA_TAB_ATTRS,ZaServerXFormView.MTA_TAB_RIGHTS)){u=++this.TAB_INDEX;
b.push({value:u,label:ZaMsg.NAD_Tab_MTA});
this.helpMap[u]=[location.pathname,ZaUtil.HELP_URL,"managing_servers/configuring_the_mta_tab_for_servers.htm","?locid=",AjxEnv.DEFAULT_LOCALE].join("")
}if(ZaTabView.isTAB_ENABLED(c,ZaServerXFormView.IMAP_TAB_ATTRS,ZaServerXFormView.IMAP_TAB_RIGHTS)){s=++this.TAB_INDEX;
b.push({value:s,label:ZaMsg.NAD_Tab_IMAP});
this.helpMap[s]=[location.pathname,ZaUtil.HELP_URL,"managing_servers/configuring_imap_settings.htm","?locid=",AjxEnv.DEFAULT_LOCALE].join("")
}if(ZaTabView.isTAB_ENABLED(c,ZaServerXFormView.POP_TAB_ATTRS,ZaServerXFormView.POP_TAB_RIGHTS)){r=++this.TAB_INDEX;
b.push({value:r,label:ZaMsg.NAD_Tab_POP});
this.helpMap[r]=[location.pathname,ZaUtil.HELP_URL,"managing_server/configuring_pop_Settings.htm","?locid=",AjxEnv.DEFAULT_LOCALE].join("")
}if(ZaTabView.isTAB_ENABLED(c,ZaServerXFormView.VOLUMES_TAB_ATTRS,ZaServerXFormView.VOLUMES_TAB_RIGHTS)){p=++this.TAB_INDEX;
b.push({value:p,label:ZaMsg.NAD_Tab_VolumeMgt});
this.helpMap[p]=[location.pathname,ZaUtil.HELP_URL,"managing_servers/volume_management.htm","?locid=",AjxEnv.DEFAULT_LOCALE].join("")
}if(ZaTabView.isTAB_ENABLED(c,ZaServerXFormView.BIND_IP_TAB_ATTRS,ZaServerXFormView.BIND_IP_TAB_RIGHTS)){o=++this.TAB_INDEX;
b.push({value:o,label:ZaMsg.NAD_Tab_Bind_IP});
this.helpMap[o]=[location.pathname,ZaUtil.HELP_URL,"managing_servers/setting_up_ip_address_binding.htm","?locid=",AjxEnv.DEFAULT_LOCALE].join("")
}var w=[];
var l={type:_ZATABCASE_,numCols:1,caseKey:x,id:"server_general_tab",paddingStyle:"padding-left:15px;",width:"98%",cellpadding:2,items:[{type:_ZA_TOP_GROUPER_,width:"100%",numCols:2,colSizes:["275px","100%"],label:ZaMsg.TABT_GeneralPage,items:[{ref:ZaServer.A_name,type:_OUTPUT_,label:ZaMsg.NAD_DisplayName,labelLocation:_LEFT_},ZaItem.descriptionXFormItem,{ref:ZaServer.A_ServiceHostname,type:_OUTPUT_,label:ZaMsg.LBL_ServiceHostname,cssClass:"admin_xform_name_input"},{ref:ZaServer.A_LmtpAdvertisedName,type:_INPUT_,label:ZaMsg.NAD_LmtpAdvertisedName,cssClass:"admin_xform_name_input",onChange:ZaServerXFormView.onFormFieldChanged},{ref:ZaServer.A_LmtpBindAddress,type:_INPUT_,label:ZaMsg.NAD_LmtpBindAddress,cssClass:"admin_xform_name_input",onChange:ZaServerXFormView.onFormFieldChanged},{ref:ZaServer.A_zimbraScheduledTaskNumThreads,labelWrap:true,type:_INPUT_,label:ZaMsg.NAD_zimbraScheduledTaskNumThreads,cssClass:"admin_xform_name_input",onChange:ZaServerXFormView.onFormFieldChanged},{ref:ZaServer.A_zimbraMailPurgeSleepInterval,type:_SUPER_LIFETIME_,labelCssStyle:"text-align:left;background-color:#DEE5F1 !important;padding-left:10px;border-right:1px solid;",resetToSuperLabel:ZaMsg.NAD_ResetToGlobal,msgName:ZaMsg.MSG_zimbraMailPurgeSleepInterval,txtBoxLabel:ZaMsg.LBL_zimbraMailPurgeSleepInterval,colSpan:2,onChange:ZaServerXFormView.onFormFieldChanged},{ref:ZaServer.A_zimbraReverseProxyLookupTarget,type:_SUPER_CHECKBOX_,resetToSuperLabel:ZaMsg.NAD_ResetToGlobal,conSpan:4,msgName:ZaMsg.NAD_zimbraReverseProxyLookupTarget,checkBoxLabel:ZaMsg.NAD_zimbraReverseProxyLookupTarget,colSpan:2,colSizes:["275px","275px","*"],trueValue:"TRUE",falseValue:"FALSE",onChange:ZaServerXFormView.onReverseLookupTargetFieldChanged},{ref:ZaServer.A_notes,type:_TEXTAREA_,label:ZaMsg.NAD_Notes,labelCssStyle:"vertical-align:top;",width:"30em",onChange:ZaServerXFormView.onFormFieldChanged}]}]};
w.push(l);
if(v){var k={type:_ZATABCASE_,colSizes:["auto"],numCols:1,id:"server_services_tab",caseKey:v,items:[{type:_ZA_TOP_GROUPER_,label:ZaMsg.NAD_Service_EnabledServices,items:[{ref:ZaServer.A_zimbraLdapServiceEnabled,type:_CHECKBOX_,enableDisableChangeEventSources:[ZaServer.A_zimbraLdapServiceInstalled],enableDisableChecks:[[XForm.checkInstanceValue,ZaServer.A_zimbraLdapServiceInstalled,true],[ZaItem.hasWritePermission,ZaServer.A_zimbraServiceEnabled]],label:ZaMsg.NAD_Service_LDAP,onChange:ZaServerXFormView.onFormFieldChanged},{ref:ZaServer.A_zimbraMailboxServiceEnabled,type:_CHECKBOX_,enableDisableChangeEventSources:[ZaServer.A_zimbraMailboxServiceInstalled],enableDisableChecks:[[XForm.checkInstanceValue,ZaServer.A_zimbraMailboxServiceInstalled,true],[ZaItem.hasWritePermission,ZaServer.A_zimbraServiceEnabled]],label:ZaMsg.NAD_Service_Mailbox,onChange:ZaServerXFormView.onFormFieldChanged},{ref:ZaServer.A_zimbraMailProxyServiceEnabled,type:_CHECKBOX_,enableDisableChecks:[[ZaItem.hasWritePermission,ZaServer.A_zimbraServiceEnabled]],label:ZaMsg.NAD_Service_Imapproxy,onChange:ZaServerXFormView.onFormFieldChanged},{ref:ZaServer.A_zimbraMtaServiceEnabled,type:_CHECKBOX_,enableDisableChangeEventSources:[ZaServer.A_zimbraMtaServiceInstalled],enableDisableChecks:[[XForm.checkInstanceValue,ZaServer.A_zimbraMtaServiceInstalled,true],[ZaItem.hasWritePermission,ZaServer.A_zimbraServiceEnabled]],label:ZaMsg.NAD_Service_MTA,onChange:ZaServerXFormView.onMtaServiceChanged},{ref:ZaServer.A_zimbraPolicydServiceEnabled,type:_CHECKBOX_,enableDisableChangeEventSources:[ZaServer.A_zimbraPolicydServiceInstalled],enableDisableChecks:[[XForm.checkInstanceValue,ZaServer.A_zimbraPolicydServiceInstalled,true],[ZaItem.hasWritePermission,ZaServer.A_zimbraServiceEnabled]],label:ZaMsg.NAD_Service_Policyd,onChange:ZaServerXFormView.onMtaServiceChanged},{ref:ZaServer.A_zimbraSnmpServiceEnabled,type:_CHECKBOX_,enableDisableChangeEventSources:[ZaServer.A_zimbraSnmpServiceInstalled],enableDisableChecks:[[XForm.checkInstanceValue,ZaServer.A_zimbraSnmpServiceInstalled,true],[ZaItem.hasWritePermission,ZaServer.A_zimbraServiceEnabled]],label:ZaMsg.NAD_Service_SNMP,onChange:ZaServerXFormView.onFormFieldChanged},{ref:ZaServer.A_zimbraAntiSpamServiceEnabled,type:_CHECKBOX_,enableDisableChangeEventSources:[ZaServer.A_zimbraAntiSpamServiceInstalled],enableDisableChecks:[[XForm.checkInstanceValue,ZaServer.A_zimbraAntiSpamServiceInstalled,true],[ZaItem.hasWritePermission,ZaServer.A_zimbraServiceEnabled]],label:ZaMsg.NAD_Service_AntiSpam,onChange:ZaServerXFormView.onFormFieldChanged},{ref:ZaServer.A_zimbraAntiVirusServiceEnabled,type:_CHECKBOX_,enableDisableChangeEventSources:[ZaServer.A_zimbraAntiVirusServiceInstalled],enableDisableChecks:[[XForm.checkInstanceValue,ZaServer.A_zimbraAntiVirusServiceInstalled,true],[ZaItem.hasWritePermission,ZaServer.A_zimbraServiceEnabled]],label:ZaMsg.NAD_Service_AntiVirus,onChange:ZaServerXFormView.onFormFieldChanged},{ref:ZaServer.A_zimbraSpellServiceEnabled,type:_CHECKBOX_,enableDisableChangeEventSources:[ZaServer.A_zimbraSpellServiceInstalled],enableDisableChecks:[[XForm.checkInstanceValue,ZaServer.A_zimbraSpellServiceInstalled,true],[ZaItem.hasWritePermission,ZaServer.A_zimbraServiceEnabled]],label:ZaMsg.NAD_Service_Spell,onChange:ZaServerXFormView.onFormFieldChanged},{ref:ZaServer.A_zimbraLoggerServiceEnabled,type:_CHECKBOX_,enableDisableChangeEventSources:[ZaServer.A_zimbraLoggerServiceInstalled],enableDisableChecks:[[XForm.checkInstanceValue,ZaServer.A_zimbraLoggerServiceInstalled,true],[ZaItem.hasWritePermission,ZaServer.A_zimbraServiceEnabled]],label:ZaMsg.NAD_Service_Logger,onChange:ZaServerXFormView.onFormFieldChanged},{ref:ZaServer.A_zimbraVmwareHAServiceEnabled,type:_CHECKBOX_,enableDisableChangeEventSources:[ZaServer.A_zimbraVmwareHAServiceInstalled],enableDisableChecks:[[XForm.checkInstanceValue,ZaServer.A_zimbraVmwareHAServiceInstalled,true],[ZaItem.hasWritePermission,ZaServer.A_zimbraServiceEnabled]],label:ZaMsg.NAD_Service_VmwareHA,onChange:ZaServerXFormView.onFormFieldChanged},{ref:ZaServer.A_zimbraOpenDKIMServiceEnabled,type:_CHECKBOX_,enableDisableChangeEventSources:[ZaServer.A_zimbraOpenDKIMServiceInstalled],enableDisableChecks:[[XForm.checkInstanceValue,ZaServer.A_zimbraOpenDKIMServiceInstalled,true],[ZaItem.hasWritePermission,ZaServer.A_zimbraOpenDKIMServiceEnabled]],label:ZaMsg.NAD_Service_OpenDKIM,onChange:ZaServerXFormView.onFormFieldChanged}]}]};
w.push(k)
}if(u){var j={type:_ZATABCASE_,id:"server_mta_tab",caseKey:u,colSizes:["auto"],numCols:1,items:[{type:_ZA_TOP_GROUPER_,colSizes:["auto"],numCols:1,label:ZaMsg.Global_MTA_AuthenticationGrp,items:[{ref:ZaServer.A_zimbraMtaSaslAuthEnable,type:_SUPER_CHECKBOX_,trueValue:"yes",falseValue:"no",onChange:ZaServerXFormView.onFormFieldChanged,resetToSuperLabel:ZaMsg.NAD_ResetToGlobal,checkBoxLabel:ZaMsg.NAD_MTA_Authentication},{ref:ZaServer.A_zimbraMtaTlsAuthOnly,type:_SUPER_CHECKBOX_,enableDisableChangeEventSources:[ZaServer.A_zimbraMtaSaslAuthEnable],enableDisableChecks:[ZaServerXFormView.getTLSEnabled],trueValue:"TRUE",falseValue:"FALSE",onChange:ZaServerXFormView.onFormFieldChanged,resetToSuperLabel:ZaMsg.NAD_ResetToGlobal,checkBoxLabel:ZaMsg.NAD_MTA_TlsAuthenticationOnly}]},{type:_ZA_TOP_GROUPER_,colSizes:["275","100%"],numCols:2,label:ZaMsg.Global_MTA_NetworkGrp,items:[{type:_SUPER_REPEAT_,ref:ZaServer.A_zimbraSmtpHostname,label:ZaMsg.LBL_zimbraSmtpHostname,colSizes:["310px","150px","*"],colSpan:2,resetToSuperLabel:ZaMsg.NAD_ResetToGlobal,repeatInstance:"",showAddButton:true,showRemoveButton:true,showAddOnNextRow:true,addButtonLabel:ZaMsg.Add_zimbraSmtpHostname,removeButtonLabel:ZaMsg.Remove_zimbraSmtpHostname,removeButtonCSSStyle:"margin-left:5px;",bmolsnr:true,repeatItems:[{type:_TEXTFIELD_,ref:".",toolTipContent:ZaMsg.tt_zimbraSmtpHostname,cssClass:"admin_xform_name_input",enableDisableChecks:[],visibilityChecks:[],bmolsnr:true,elementChanged:function(A,z,y){this.getForm().itemChanged(this,A,y);
this.getForm().itemChanged(this.getParentItem(),A,y)
}}]},{ref:ZaServer.A_SmtpPort,type:_OUTPUT_,label:ZaMsg.NAD_MTA_WebMailPort,width:"4em"},{ref:ZaServer.A_zimbraMtaRelayHost,type:_SUPER_HOSTPORT_,label:ZaMsg.NAD_MTA_RelayMTA,colSpan:1,onClick:"ZaController.showTooltip",toolTipContent:ZaMsg.tt_MTA_RelayMTA,resetToSuperLabel:ZaMsg.NAD_ResetToGlobal,bmolsnr:true,elementChanged:function(A,z,y){this.getForm().itemChanged(this,A,y);
this.getForm().itemChanged(this.getParentItem(),A,y)
}},{ref:ZaServer.A_zimbraMtaFallbackRelayHost,type:_SUPER_HOSTPORT_,label:ZaMsg.NAD_MTA_FallbackRelay,colSpan:1,toolTipContent:ZaMsg.tt_MTA_FallbackRelay,resetToSuperLabel:ZaMsg.NAD_ResetToGlobal,bmolsnr:true,elementChanged:function(A,z,y){this.getForm().itemChanged(this,A,y);
this.getForm().itemChanged(this.getParentItem(),A,y)
}},{ref:ZaServer.A_SmtpTimeout,type:_TEXTFIELD_,label:ZaMsg.NAD_MTA_WebMailTimeout,width:"4em",onChange:ZaServerXFormView.onFormFieldChanged},{ref:ZaServer.A_zimbraMtaMyNetworks,txtBoxLabel:ZaMsg.NAD_MTA_MyNetworks,msgName:ZaMsg.NAD_MTA_MyNetworks,type:_SUPER_TEXTAREA_,labelCssClass:"gridGroupBodyLabel",labelCssStyle:"text-align:left;border-right:1px solid;",colSpan:2,resetToSuperLabel:ZaMsg.NAD_ResetToGlobal,onChange:ZaServerXFormView.onFormFieldChanged,textAreaWidth:"220px"},{ref:ZaServer.A_zimbraMtaSmtpDnsSupportLevel,type:_SUPER_SELECT1_,colSpan:2,label:ZaMsg.NAD_MTA_SMTP_Dns,onChange:ZaServerXFormView.onFormFieldChanged,resetToSuperLabel:ZaMsg.NAD_ResetToGlobal,labelLocation:_LEFT_}]},{type:_ZA_TOP_GROUPER_,colSizes:["275px","100%"],numCols:2,label:ZaMsg.Global_MTA_MilterServer,items:[{ref:ZaServer.A_zimbraMilterServerEnabled,type:_SUPER_CHECKBOX_,trueValue:"TRUE",falseValue:"FALSE",onChange:ZaServerXFormView.onFormFieldChanged,resetToSuperLabel:ZaMsg.NAD_ResetToGlobal,checkBoxLabel:ZaMsg.NAD_MTA_MilterServerEnabled},{type:_REPEAT_,ref:ZaServer.A_zimbraMilterBindAddress,label:ZaMsg.NAD_MTA_MilterBindAddress,resetToSuperLabel:ZaMsg.NAD_ResetToGlobal,repeatInstance:"",showAddButton:true,showRemoveButton:true,showAddOnNextRow:true,addButtonLabel:ZaMsg.NAD_MTA_AddBindAddress,removeButtonLabel:ZaMsg.NAD_MTA_RemoveBindAddress,removeButtonCSSStyle:"margin-left:50px;",bmolsnr:true,items:[{type:_TEXTFIELD_,ref:".",enableDisableChecks:[],visibilityChecks:[],bmolsnr:true,elementChanged:function(A,z,y){this.getForm().itemChanged(this,A,y);
this.getForm().itemChanged(this.getParentItem(),A,y)
}}]},{ref:ZaServer.A_zimbraMilterBindPort,type:_OUTPUT_,label:ZaMsg.NAD_MTA_MilterBindPort}]}]};
w.push(j)
}if(s){var g={type:_ZATABCASE_,colSizes:["auto"],numCols:1,caseKey:s,id:"server_imap_tab",items:[{type:_DWT_ALERT_,containerCssStyle:"padding-bottom:0;",style:DwtAlert.INFO,iconVisible:false,content:ZaMsg.Alert_ServerRestart}]};
if(ZAGroup_XFormItem.isGroupVisible(c,ZaServerXFormView.MTA_SERVICE_GROUP_ATTRS,[])){g.items.push({type:_ZA_TOP_GROUPER_,colSizes:["auto"],numCols:1,label:ZaMsg.Global_IMAP_ServiceGrp,items:[{ref:ZaServer.A_ImapServerEnabled,type:_SUPER_CHECKBOX_,checkBoxLabel:ZaMsg.IMAP_Service,trueValue:"TRUE",falseValue:"FALSE",onChange:ZaServerXFormView.onFormFieldChanged,resetToSuperLabel:ZaMsg.NAD_ResetToGlobal},{ref:ZaServer.A_ImapSSLServerEnabled,type:_SUPER_CHECKBOX_,checkBoxLabel:ZaMsg.IMAP_SSLService,trueValue:"TRUE",falseValue:"FALSE",onChange:ZaServerXFormView.onFormFieldChanged,resetToSuperLabel:ZaMsg.NAD_ResetToGlobal},{ref:ZaServer.A_ImapCleartextLoginEnabled,type:_SUPER_CHECKBOX_,checkBoxLabel:ZaMsg.IMAP_CleartextLoginEnabled,trueValue:"TRUE",falseValue:"FALSE",onChange:ZaServerXFormView.onFormFieldChanged,resetToSuperLabel:ZaMsg.NAD_ResetToGlobal},{ref:ZaServer.A_zimbraImapNumThreads,type:_SUPER_TEXTFIELD_,txtBoxLabel:ZaMsg.IMAP_NumThreads,width:"5em",onChange:ZaServerXFormView.onFormFieldChanged,resetToSuperLabel:ZaMsg.NAD_ResetToGlobal}]})
}if(ZAGroup_XFormItem.isGroupVisible(c,ZaServerXFormView.MTA_NETWORK_GROUP_ATTRS,[])){g.items.push({type:_ZA_TOP_GROUPER_,label:ZaMsg.Global_IMAP_NetworkGrp,items:[{ref:ZaServer.A_zimbraImapBindPort,type:_TEXTFIELD_,enableDisableChecks:[ZaServerXFormView.getIMAPEnabled,ZaItem.hasReadPermission],enableDisableChangeEventSources:[ZaServer.A_ImapServerEnabled],label:ZaMsg.LBL_IMAP_Port,width:"5em",onChange:ZaServerXFormView.onFormFieldChanged},{ref:ZaServer.A_ImapSSLBindPort,type:_TEXTFIELD_,enableDisableChecks:[ZaServerXFormView.getIMAPSSLEnabled,ZaItem.hasReadPermission],enableDisableChangeEventSources:[ZaServer.A_ImapServerEnabled,ZaServer.A_ImapSSLServerEnabled],label:ZaMsg.LBL_IMAP_SSLPort,width:"5em",onChange:ZaServerXFormView.onFormFieldChanged}]})
}w.push(g)
}if(r){var f={type:_ZATABCASE_,caseKey:r,id:"server_pop_tab",colSizes:["auto"],numCols:1,items:[{type:_DWT_ALERT_,containerCssStyle:"padding-bottom:0;",style:DwtAlert.INFO,iconVisible:false,content:ZaMsg.Alert_ServerRestart},{type:_ZA_TOP_GROUPER_,label:ZaMsg.Global_POP_ServiceGrp,items:[{ref:ZaServer.A_Pop3ServerEnabled,type:_SUPER_CHECKBOX_,trueValue:"TRUE",falseValue:"FALSE",onChange:ZaServerXFormView.onFormFieldChanged,resetToSuperLabel:ZaMsg.NAD_ResetToGlobal,checkBoxLabel:ZaMsg.NAD_POP_Service},{ref:ZaServer.A_Pop3SSLServerEnabled,type:_SUPER_CHECKBOX_,checkBoxLabel:ZaMsg.NAD_POP_SSL,trueValue:"TRUE",falseValue:"FALSE",onChange:ZaServerXFormView.onFormFieldChanged,resetToSuperLabel:ZaMsg.NAD_ResetToGlobal},{ref:ZaServer.A_Pop3CleartextLoginEnabled,type:_SUPER_CHECKBOX_,checkBoxLabel:ZaMsg.NAD_POP_CleartextLoginEnabled,trueValue:"TRUE",falseValue:"FALSE",onChange:ZaServerXFormView.onFormFieldChanged,resetToSuperLabel:ZaMsg.NAD_ResetToGlobal},{ref:ZaServer.A_zimbraPop3NumThreads,type:_SUPER_TEXTFIELD_,labelLocation:_LEFT_,textFieldCssClass:"admin_xform_number_input",txtBoxLabel:ZaMsg.NAD_POP_NumThreads,onChange:ZaServerXFormView.onFormFieldChanged,resetToSuperLabel:ZaMsg.NAD_ResetToGlobal}]},{type:_ZA_TOP_GROUPER_,label:ZaMsg.Global_POP_NetworkGrp,items:[{type:_GROUP_,numCols:2,colSpan:2,colSizes:["275px","*"],enableDisableChangeEventSources:[ZaServer.A_Pop3ServerEnabled],enableDisableChecks:[ZaServerXFormView.getPOP3Enabled],items:[{ref:ZaServer.A_Pop3AdvertisedName,type:_TEXTFIELD_,labelLocation:_LEFT_,label:ZaMsg.NAD_POP_AdvertisedName,onChange:ZaServerXFormView.onFormFieldChanged,labelCssClass:"gridGroupBodyLabel",labelCssStyle:"text-align:left;border-right:1px solid;"}]},{type:_GROUP_,numCols:2,colSpan:2,colSizes:["275px","*"],enableDisableChangeEventSources:[ZaServer.A_Pop3ServerEnabled],enableDisableChecks:[ZaServerXFormView.getPOP3Enabled],items:[{ref:ZaServer.A_Pop3BindAddress,type:_TEXTFIELD_,labelCssClass:"gridGroupBodyLabel",labelCssStyle:"text-align:left;border-right:1px solid;",label:ZaMsg.NAD_POP_Address,onChange:ZaServerXFormView.onFormFieldChanged},{type:_OUTPUT_,ref:".",label:"",labelCssClass:"gridGroupBodyLabel",labelCssStyle:"text-align:left;border-right:1px solid;",labelLocation:_LEFT_,value:ZaMsg.NAD_POP_Address_NOTE}]},{ref:ZaServer.A_zimbraPop3BindPort,type:_TEXTFIELD_,enableDisableChangeEventSources:[ZaServer.A_Pop3ServerEnabled],enableDisableChecks:[ZaServerXFormView.getPOP3Enabled,ZaItem.hasWritePermission],label:ZaMsg.LBL_POP_Port,labelLocation:_LEFT_,textFieldCssClass:"admin_xform_number_input",onChange:ZaServerXFormView.onFormFieldChanged},{ref:ZaServer.A_zimbraPop3SSLBindPort,type:_TEXTFIELD_,visibilityChecks:[ZaServerXFormView.getPOP3SSLEnabled,ZaItem.hasReadPermission],visibilityChangeEventSources:[ZaServer.A_Pop3SSLServerEnabled,ZaServer.A_Pop3ServerEnabled],labelLocation:_LEFT_,label:ZaMsg.LBL_POP_SSL_Port,onChange:ZaServerXFormView.onFormFieldChanged}]}]};
w.push(f)
}if(p){var e={type:_ZATABCASE_,width:"100%",id:"server_form_volumes_tab",caseKey:p,visibilityChangeEventSources:[ZaModel.currentTab],visibilityChecks:[Case_XFormItem.prototype.isCurrentTab,ZaServerXFormView.getMailClientEnabled],numCols:1,items:[{type:_ZA_TOP_GROUPER_,id:"server_form_volumes_group",width:"98%",numCols:1,colSizes:["auto"],label:ZaMsg.VM_VolumesGrpTitle,cssStyle:"margin:10px;padding-bottom:0;",items:[{ref:ZaServer.A_Volumes,type:_DWT_LIST_,height:"200",width:"99%",preserveSelection:false,multiselect:true,cssClass:"DLSource",headerList:h,widgetClass:ZaServerVolumesListView,onSelection:ZaServerXFormView.volumeSelectionListener,valueChangeEventSources:[ZaServer.A_Volumes,ZaServer.A_CurrentMsgVolumeId,ZaServer.A_CurrentIndexVolumeId,ZaServer.A_RemovedVolumes]},{type:_GROUP_,numCols:5,colSizes:["100px","auto","100px","auto","100px"],width:"350px",cssStyle:"margin:10px;padding-bottom:0;",items:[{type:_DWT_BUTTON_,label:ZaMsg.TBB_Delete,width:"100px",onActivate:"ZaServerXFormView.deleteButtonListener.call(this);",enableDisableChangeEventSources:[ZaServer.A2_volume_selection_cache],enableDisableChecks:[ZaServerXFormView.isDeleteVolumeEnabled]},{type:_CELLSPACER_},{type:_DWT_BUTTON_,label:ZaMsg.TBB_Edit,width:"100px",onActivate:"ZaServerXFormView.editButtonListener.call(this);",enableDisableChangeEventSources:[ZaServer.A2_volume_selection_cache],enableDisableChecks:[ZaServerXFormView.isEditVolumeEnabled]},{type:_CELLSPACER_},{type:_DWT_BUTTON_,label:ZaMsg.NAD_Add,width:"100px",onActivate:"ZaServerXFormView.addButtonListener.call(this);"}]}]},{type:_ZA_TOP_GROUPER_,label:ZaMsg.VM_CurrentVolumesGrpTitle,id:"server_form_current_vol_group",items:[{type:_OSELECT1_,editable:false,valueChangeEventSources:[ZaServer.A_Volumes,ZaServer.A_RemovedVolumes],enableDisableChecks:[],visibilityChecks:[],ref:ZaServer.A_CurrentMsgVolumeId,choices:ZaServerXFormView.messageVolChoices,label:ZaMsg.LBL_VM_CurrentMessageVolume},{type:_OSELECT1_,editable:false,valueChangeEventSources:[ZaServer.A_Volumes,ZaServer.A_RemovedVolumes],enableDisableChecks:[],visibilityChecks:[],ref:ZaServer.A_CurrentIndexVolumeId,choices:ZaServerXFormView.indexVolChoices,label:ZaMsg.LBL_VM_CurrentIndexVolume}]}]};
w.push(e);
var m={type:_ZATABCASE_,caseKey:p,visibilityChangeEventSources:[ZaModel.currentTab],visibilityChecks:[Case_XFormItem.prototype.isCurrentTab,[XForm.checkInstanceValue,ZaServer.A_showVolumes,false]],items:[{type:_DWT_ALERT_,cssClass:"DwtTabTable",containerCssStyle:"padding-bottom:0;",style:DwtAlert.WARNING,iconVisible:true,content:ZaMsg.Alert_MbxSvcNotInstalled,colSpan:"*"}]};
w.push(m)
}if(o){var d={type:_ZATABCASE_,id:"server_bind_ip_tab",caseKey:o,colSizes:["auto"],numCols:1,items:[{type:_DWT_ALERT_,containerCssStyle:"padding-bottom:0;",style:DwtAlert.INFO,iconVisible:false,content:ZaMsg.MSG_ConfigIpAddressBindings},{type:_ZA_TOP_GROUPER_,colSizes:["275px","*"],numCols:2,label:ZaMsg.NAD_IpAddressBindingsForWebClient,items:[{ref:ZaServer.A_zimbraMailBindAddress,type:_TEXTFIELD_,containerCssStyle:"padding-top:6px;padding-bottom:6px;",labelLocation:_LEFT_,label:ZaMsg.NAD_zimbraMailBindAddress,onChange:ZaServerXFormView.onFormFieldChanged},{ref:ZaServer.A_zimbraMailSSLBindAddress,type:_TEXTFIELD_,containerCssStyle:"padding-top:6px;padding-bottom:6px;",labelLocation:_LEFT_,label:ZaMsg.NAD_zimbraMailSSLBindAddress,onChange:ZaServerXFormView.onFormFieldChanged},{ref:ZaServer.A_zimbraMailSSLClientCertBindAddress,type:_TEXTFIELD_,containerCssStyle:"padding-top:6px;padding-bottom:6px;",labelLocation:_LEFT_,label:ZaMsg.NAD_zimbraMailSSLClientCertBindAddress,onChange:ZaServerXFormView.onFormFieldChanged}]},{type:_ZA_TOP_GROUPER_,colSizes:["275px","*"],numCols:2,label:ZaMsg.NAD_IpAddressBindingsForAdminConsole,items:[{ref:ZaServer.A_zimbraAdminBindAddress,type:_TEXTFIELD_,containerCssStyle:"padding-top:6px;padding-bottom:6px;",labelLocation:_LEFT_,label:ZaMsg.NAD_zimbraAdminBindAddress,onChange:ZaServerXFormView.onFormFieldChanged}]}]};
w.push(d)
}q.tableCssStyle="width:100%;position:static;overflow:auto;";
this.tabBarChoices=b;
q.items=[{type:_GROUP_,cssClass:"ZmSelectedHeaderBg",colSpan:"*",id:"xform_header",items:[{type:_GROUP_,numCols:4,colSizes:["32px","*","80px","*"],items:[{type:_AJX_IMAGE_,src:"Server_32",label:null,rowSpan:3},{type:_OUTPUT_,ref:ZaServer.A_name,label:null,cssClass:"AdminTitle",visibilityChecks:[ZaItem.hasReadPermission],height:32,rowSpan:3},{type:_OUTPUT_,ref:ZaServer.A_ServiceHostname,label:ZaMsg.NAD_ServiceHostname+":"},{type:_OUTPUT_,ref:ZaItem.A_zimbraId,label:ZaMsg.NAD_ZimbraID},{type:_OUTPUT_,ref:ZaItem.A_zimbraCreateTimestamp,label:ZaMsg.LBL_zimbraCreateTimestamp,labelLocation:_LEFT_,getDisplayValue:function(){var y=ZaItem.formatServerTime(this.getInstanceValue());
if(!y){return ZaMsg.Server_Time_NA
}else{return y
}},visibilityChecks:[ZaItem.hasReadPermission]}]}]},{type:_TAB_BAR_,ref:ZaModel.currentTab,containerCssStyle:"padding-top:0;",choices:b,cssStyle:"display:none;",cssClass:"ZaTabBar",id:"xform_tabbar"},{type:_SWITCH_,items:w}]
};
ZaTabView.XFormModifiers.ZaServerXFormView.push(ZaServerXFormView.myXFormModifier);
ZaServerXFormView.prototype.getTabChoices=function(){return this.tabBarChoices
};
ZaServerXFormView.showMtaServiceEnableRelatedNotice=function(d){var c;
var b;
if(d){c=ZaMsg.NAD_MTA_notice_related_statistics_tabs_enable;
b=DwtMessageDialog.WARNING_STYLE
}else{c=ZaMsg.NAD_MTA_notice_related_statistics_tabs_disable;
b=DwtMessageDialog.INFO_STYLE
}ZaApp.getInstance().dialogs.msgDialog.setMessage(c,b);
ZaApp.getInstance().dialogs.msgDialog.popup()
};
ZaServerXFormView.onMtaServiceChanged=function(d,c,b){ZaServerXFormView.showMtaServiceEnableRelatedNotice(d);
b.parent.setDirty(true);
this.setInstanceValue(d);
return d
}
}if(AjxPackage.define("zimbraAdmin.adminext.view.ZaAdminExtListView")){ZaAdminExtListView=function(e){var d=null;
var c=DwtControl.ABSOLUTE_STYLE;
var b=this._getHeaderList();
ZaListView.call(this,{parent:e,className:d,posStyle:c,headerList:b,id:ZaId.TAB_AE_MANAGE});
this._appCtxt=this.shell.getData(ZaAppCtxt.LABEL)
};
ZaAdminExtListView.prototype=new ZaListView;
ZaAdminExtListView.prototype.constructor=ZaAdminExtListView;
ZaAdminExtListView.prototype.toString=function(){return"ZaAdminExtListView"
};
ZaAdminExtListView.prototype.getTitle=function(){return ZaMsg.AdminZimlets_view_title
};
ZaAdminExtListView.prototype.getTabIcon=function(){return"AdminExtension"
};
ZaAdminExtListView.prototype._createItemHtml=function(d,c,g){var k=new Array(50);
var b=document.createElement("div");
b[DwtListView._STYLE_CLASS]="Row";
b[DwtListView._SELECTED_STYLE_CLASS]=b[DwtListView._STYLE_CLASS]+"-"+DwtCssStyle.SELECTED;
b.className=b[DwtListView._STYLE_CLASS];
this.associateItemWithElement(d,b,DwtListView.TYPE_LIST_ITEM);
var n=0;
k[n++]="<table width='100%' cellspacing='0' cellpadding='0'>";
k[n++]="<tr>";
var e=this._headerList.length;
for(var j=0;
j<e;
j++){var m=this._headerList[j]._field;
var f=this._getCellWidth(j,{});
if(m==ZaZimlet.A_name){k[n++]="<td align='left' width="+f+">";
k[n++]=AjxStringUtil.htmlEncode(d[ZaZimlet.A_name]);
k[n++]="</td>"
}else{if(m=="display"){k[n++]="<td align='left' width="+f+">";
k[n++]=AjxStringUtil.htmlEncode(d.getDisplayName());
k[n++]="</td>"
}else{if(m==ZaZimlet.A_zimbraZimletDescription){k[n++]="<td align='left' width="+f+">";
k[n++]=AjxStringUtil.htmlEncode(d.getDescription());
k[n++]="</td>"
}else{if(m==="spacer"){k[n++]="<td align='left' width="+f+"></td>"
}else{if(m==ZaZimlet.A_zimbraZimletVersion){k[n++]="<td align='left' width="+f+">";
var l=d.attrs[ZaZimlet.A_zimbraZimletVersion];
if(l&&l.length>0){var h=l.lastIndexOf("_");
if(h>-1){l=l.substring(0,h)
}}k[n++]=AjxStringUtil.htmlEncode(l);
k[n++]="</td>"
}}}}}}k[n++]="</tr></table>";
b.innerHTML=k.join("");
return b
};
ZaAdminExtListView.prototype._getHeaderList=function(){var b=new Array();
var c=1;
b[0]=new ZaListHeaderItem(ZaZimlet.A_name,ZaMsg.CLV_Name_col,null,250,c++,"name",true,true);
b[1]=new ZaListHeaderItem("display",ZaMsg.ALV_DspName_col,null,250,null,"display",true,true);
b[2]=new ZaListHeaderItem(ZaZimlet.A_zimbraZimletDescription,ZaMsg.DLV_Description_col,null,"auto",null,ZaZimlet.A_zimbraZimletDescription,true,true);
b[3]=new ZaListHeaderItem("spacer",null,null,"5px",null,null,false,false);
b[4]=new ZaListHeaderItem(ZaZimlet.A_zimbraZimletVersion,ZaMsg.CLV_Version_col,null,"80px",null,ZaZimlet.A_zimbraZimletVersion,true,true);
return b
}
}if(AjxPackage.define("zimbraAdmin.zimlets.view.ZaZimletListView")){ZaZimletListView=function(e){var d=null;
var c=DwtControl.ABSOLUTE_STYLE;
var b=this._getHeaderList();
ZaListView.call(this,{parent:e,className:d,posStyle:c,headerList:b,id:ZaId.TAB_ZIM_MANAGE});
this._appCtxt=this.shell.getData(ZaAppCtxt.LABEL)
};
ZaZimletListView.prototype=new ZaListView;
ZaZimletListView.prototype.constructor=ZaZimletListView;
ZaZimletListView.prototype.toString=function(){return"ZaZimletListView"
};
ZaZimletListView.prototype.getTitle=function(){return ZaMsg.Zimlets_view_title
};
ZaZimletListView.prototype.getTabIcon=function(){return"zimlet"
};
ZaZimletListView.prototype._createItemHtml=function(d,c,g){var k=new Array(50);
var b=document.createElement("div");
b[DwtListView._STYLE_CLASS]="Row";
b[DwtListView._SELECTED_STYLE_CLASS]=b[DwtListView._STYLE_CLASS]+"-"+DwtCssStyle.SELECTED;
b.className=b[DwtListView._STYLE_CLASS];
this.associateItemWithElement(d,b,DwtListView.TYPE_LIST_ITEM);
var o=0;
k[o++]="<table width='100%' cellspacing='0' cellpadding='0'>";
k[o++]="<tr>";
var e=this._headerList.length;
for(var j=0;
j<e;
j++){var f=this._getCellWidth(j,{});
var n=this._headerList[j]._field;
if(n==ZaZimlet.A_name){k[o++]="<td align='left' width="+f+">";
k[o++]=AjxStringUtil.htmlEncode(d[ZaZimlet.A_name]);
k[o++]="</td>"
}else{if(n=="display"){k[o++]="<td align='left' width="+f+">";
k[o++]=AjxStringUtil.htmlEncode(d.getDisplayName());
k[o++]="</td>"
}else{if(n==ZaZimlet.A_zimbraZimletDescription){k[o++]="<td align='left' width="+f+">";
var l=ZaZimletListView.__processMessage(d[ZaZimlet.A_name],d.attrs[ZaZimlet.A_zimbraZimletDescription]);
k[o++]=AjxStringUtil.htmlEncode(l);
k[o++]="</td>"
}else{if(n==="spacer"){k[o++]="<td align='left' width="+f+"></td>"
}else{if(n==ZaZimlet.A_zimbraZimletVersion){k[o++]="<td align='left' width="+f+">";
var m=d.attrs[ZaZimlet.A_zimbraZimletVersion];
if(m&&m.length>0){var h=m.lastIndexOf("_");
if(h>-1){m=m.substring(0,h)
}}k[o++]=AjxStringUtil.htmlEncode(m);
k[o++]="</td>"
}else{if(n==ZaZimlet.A_zimbraZimletEnabled){k[o++]="<td align='left' width="+f+">";
k[o++]=(d.attrs[ZaZimlet.A_zimbraZimletEnabled]=="TRUE")?AjxStringUtil.htmlEncode(ZaMsg.NAD_Enabled):AjxStringUtil.htmlEncode(ZaMsg.NAD_Disabled);
k[o++]="</td>"
}}}}}}}k[o++]="</tr></table>";
b.innerHTML=k.join("");
return b
};
ZaZimletListView.prototype._getHeaderList=function(){var b=new Array();
var c=1;
b[0]=new ZaListHeaderItem(ZaZimlet.A_name,ZaMsg.CLV_Name_col,null,"200px",c++,"name",true,true);
b[1]=new ZaListHeaderItem("display",ZaMsg.ALV_DspName_col,null,"200px",null,"display",true,true);
b[2]=new ZaListHeaderItem(ZaZimlet.A_zimbraZimletDescription,ZaMsg.DLV_Description_col,null,"auto",null,ZaZimlet.A_zimbraZimletDescription,true,true);
b[3]=new ZaListHeaderItem("spacer",null,null,"5px",null,null,false,false);
b[4]=new ZaListHeaderItem(ZaZimlet.A_zimbraZimletVersion,ZaMsg.CLV_Version_col,null,"80px",null,ZaZimlet.A_zimbraZimletVersion,true,true);
b[5]=new ZaListHeaderItem(ZaZimlet.A_zimbraZimletEnabled,ZaMsg.ALV_Status_col,null,"120px",null,ZaZimlet.A_zimbraZimletEnabled,true,true);
return b
};
ZaZimletListView.__RE_MSG=/\$\{msg\.(.*?)\}/g;
ZaZimletListView.__processMessage=function(b,c){return(c||"").replace(ZaZimletListView.__RE_MSG,function(e,d){var f=window[b];
return(f&&f[d])||e
})
}
}if(AjxPackage.define("zimbraAdmin.zimlets.view.ZaZimletXFormView")){ZaZimletXFormView=function(b){ZaTabView.call(this,{parent:b,iKeyName:"ZaZimletXFormView",contextId:ZaId.TAB_ZIM_EDIT});
this.TAB_INDEX=0;
this.initForm(ZaZimlet.myXModel,this.getMyXForm())
};
ZaZimletXFormView.prototype=new ZaTabView();
ZaZimletXFormView.prototype.constructor=ZaZimletXFormView;
ZaTabView.XFormModifiers.ZaZimletXFormView=new Array();
ZaZimletXFormView.prototype.setObject=function(c){this._containedObject=new Object();
this._containedObject.attrs=new Object();
for(var b in c.attrs){if(c.attrs[b] instanceof Array){this._containedObject.attrs[b]=new Array();
for(var d in c.attrs[b]){this._containedObject.attrs[b][d]=c.attrs[b][d]
}}else{this._containedObject.attrs[b]=c.attrs[b]
}}this._containedObject.name=c.name;
this._containedObject.type=c.type;
if(c.id){this._containedObject.id=c.id
}if(!c[ZaModel.currentTab]){this._containedObject[ZaModel.currentTab]="1"
}else{this._containedObject[ZaModel.currentTab]=c[ZaModel.currentTab]
}this._localXForm.setInstance(this._containedObject)
};
ZaZimletXFormView.myXFormModifier=function(c){this.tabChoices=[];
var b=[];
c.tableCssStyle="width:100%;";
c.items=[{type:_GROUP_,cssClass:"ZmSelectedHeaderBg",colSpan:"*",id:"xform_header",items:[{type:_GROUP_,numCols:4,colSizes:["90px","350px","100px","200px"],items:[{type:_OUTPUT_,ref:"name",label:ZaMsg.NAD_zimletName},{type:_OUTPUT_,ref:ZaZimlet.A_zimbraZimletEnabled,label:ZaMsg.NAD_zimletStatus,choices:ZaModel.BOOLEAN_CHOICES},{type:_OUTPUT_,ref:ZaZimlet.A_zimbraZimletDescription,label:ZaMsg.NAD_Description,colSpan:"*",getDisplayValue:function(f){var e=this.getInstanceValue(ZaZimlet.A_name);
var d=ZaZimletListView.__processMessage(e,f);
return d
}},{type:_OUTPUT_,ref:ZaItem.A_zimbraCreateTimestamp,label:ZaMsg.LBL_zimbraCreateTimestamp,labelLocation:_LEFT_,getDisplayValue:function(){var d=ZaItem.formatServerTime(this.getInstanceValue());
if(!d){return ZaMsg.Server_Time_NA
}else{return d
}},visibilityChecks:[ZaItem.hasReadPermission]}]}],cssStyle:"padding-top:5px; padding-bottom:5px"},{type:_TAB_BAR_,ref:ZaModel.currentTab,choices:this.tabChoices,cssClass:"ZaTabBar",cssStyle:"display:none;",id:"xform_tabbar"},{type:_SWITCH_,align:_LEFT_,valign:_TOP_,items:b}]
};
ZaTabView.XFormModifiers.ZaZimletXFormView.push(ZaZimletXFormView.myXFormModifier);
ZaZimletXFormView.prototype.getTabChoices=function(){return this.tabChoices
}
}if(AjxPackage.define("zimbraAdmin.zimlets.view.ZaZimletDeployXWizard")){ZaZimletDeployXWizard=function(b){ZaXWizardDialog.call(this,b,null,ZaMsg.ZMLT_DeployZimletWizardTitle,"550px","300px","ZaZimletDeployXWizard",null,ZaId.DLG_ZIM_DEPLOY);
this._app=ZaApp.getInstance();
this.stepChoices=[{label:ZaMsg.ZMLT_SelectZimletStepTitle,value:1},{label:ZaMsg.ZMLT_DeployZimletStepTitle,value:2}];
this.currentPageNum=0;
this.initForm(ZaZimlet.myXModel,this.getMyXForm());
this._helpURL=ZaZimletDeployXWizard.helpURL;
this.pollInterval=500;
this.pollAction=new AjxTimedAction(this,this.getDeploymentStatus);
this._pollHandler=null
};
ZaZimletDeployXWizard.helpURL=location.pathname+ZaUtil.HELP_URL+"zimlets/setting_up_zimlets_in_zcs.htm?locid="+AjxEnv.DEFAULT_LOCALE;
ZaZimletDeployXWizard.prototype=new ZaXWizardDialog;
ZaZimletDeployXWizard.prototype.constructor=ZaZimletDeployXWizard;
ZaZimletDeployXWizard.prototype.miniType=2;
ZaXDialog.XFormModifiers.ZaZimletDeployXWizard=new Array();
ZaZimletDeployXWizard.ZimletUploadFormId=null;
ZaZimletDeployXWizard.ZimletUploadAttachmentInputId=null;
ZaZimletDeployXWizard.prototype.getUploadFormHtml=function(){ZaZimletDeployXWizard.ZimletUploadFormId=Dwt.getNextId();
ZaZimletDeployXWizard.ZimletUploadAttachmentInputId=Dwt.getNextId();
var d=appContextPath+"/../service/upload";
var c=new Array();
var b=0;
c[b++]="<div style='overflow:hidden'><form method='POST' action='";
c[b++]=d;
c[b++]="' id='";
c[b++]=ZaZimletDeployXWizard.ZimletUploadFormId;
c[b++]="' enctype='multipart/form-data'><input id='";
c[b++]=ZaZimletDeployXWizard.ZimletUploadAttachmentInputId;
c[b++]="' type=file  name='zimletFile' size='50' onChange=\"ZaZimletDeployXWizard.changeDeployBtnState(this,event||window.event,'"+this.getHTMLElId()+"')\"></input>";
c[b++]="</form></div>";
return c.join("")
};
ZaZimletDeployXWizard.changeDeployBtnState=function(e,b,d){var c=DwtControl.ALL_BY_ID[d];
if(c){if(e.value){c.getButton(DwtWizardDialog.NEXT_BUTTON).setEnabled(true)
}else{c.getButton(DwtWizardDialog.NEXT_BUTTON).setEnabled(false)
}}};
ZaZimletDeployXWizard.prototype.handleXFormChange=function(){if(this._containedObject[ZaModel.currentStep]==2){this._button[DwtWizardDialog.NEXT_BUTTON].setEnabled(false);
this._button[DwtWizardDialog.PREV_BUTTON].setEnabled(true);
this._button[DwtWizardDialog.FINISH_BUTTON].setEnabled(true)
}};
ZaZimletDeployXWizard.prototype.setObject=function(b){this._containedObject=b;
this._containedObject[ZaModel.currentStep]=b[ZaModel.currentStep]||1;
this._containedObject[ZaZimlet.A_attachmentId]=b[ZaZimlet.A_attachmentId]||null;
this._localXForm.setInstance(this._containedObject)
};
ZaZimletDeployXWizard.prototype.popup=function(b){ZaXWizardDialog.prototype.popup.call(this,b);
this._button[DwtWizardDialog.PREV_BUTTON].setEnabled(false);
this._button[DwtWizardDialog.PREV_BUTTON].setText(ZaMsg.ZMLT_ReselectZimlet);
this._button[DwtWizardDialog.NEXT_BUTTON].setEnabled(false);
this._button[DwtWizardDialog.NEXT_BUTTON].setText(ZaMsg.ZMLT_DeployZimlet);
this._button[DwtWizardDialog.FINISH_BUTTON].setEnabled(false)
};
ZaZimletDeployXWizard.prototype.getUploadFrameId=function(){if(!this._uploadManagerIframeId){var d=Dwt.getNextId();
var b=["<iframe name='",d,"' id='",d,"' src='",(AjxEnv.isIE&&location.protocol=="https:")?appContextPath+"/public/blank.html":'javascript:""',"' style='position: absolute; top: 0; left: 0; visibility: hidden'></iframe>"];
var c=document.createElement("div");
c.innerHTML=b.join("");
document.body.appendChild(c.firstChild);
this._uploadManagerIframeId=d
}return this._uploadManagerIframeId
};
ZaZimletDeployXWizard.prototype.getUploadManager=function(){return this._uploadManager
};
ZaZimletDeployXWizard.prototype.setUploadManager=function(b){this._uploadManager=b
};
ZaZimletDeployXWizard.prototype.goNext=function(){var d=document.getElementById(ZaZimletDeployXWizard.ZimletUploadAttachmentInputId);
if(d&&d.value){var c=new AjxCallback(this,this.uploadCallback);
try{ZaUploader.upload.call(this,c,[ZaZimletDeployXWizard.ZimletUploadAttachmentInputId],ZaZimletDeployXWizard.ZimletUploadFormId)
}catch(b){ZaApp.getInstance().getCurrentController().popupErrorDialog((b&&b.msg)?b.msg:ZaMsg.ZMLT_zimletFileNameError)
}this._button[DwtWizardDialog.NEXT_BUTTON].setEnabled(false);
this._button[DwtWizardDialog.PREV_BUTTON].setEnabled(true);
this._button[DwtWizardDialog.FINISH_BUTTON].setEnabled(true);
ZaXWizardDialog.prototype.goNext.call(this)
}else{ZaApp.getInstance().getCurrentController().popupErrorDialog(ZaMsg.ZMLT_zimletFileNameError)
}};
ZaZimletDeployXWizard.prototype.goPrev=function(){this._button[DwtWizardDialog.NEXT_BUTTON].setEnabled(true);
this._button[DwtWizardDialog.PREV_BUTTON].setEnabled(false);
this._button[DwtWizardDialog.FINISH_BUTTON].setEnabled(false);
var b=this._localXForm.getInstance();
b[ZaZimlet.A_attachmentId]=null;
b[ZaZimlet.A_uploadStatus]=null;
b[ZaZimlet.A_deployStatus]=null;
b[ZaZimlet.A_uploadStatusMsg]=null;
b[ZaZimlet.A_deployStatusMsg]=null;
this._localXForm.setInstance(b);
ZaXWizardDialog.prototype.goPrev.call(this)
};
ZaZimletDeployXWizard.prototype.popdown=function(){if(this._pollHandler){AjxTimedAction.cancelAction(this._pollHandler)
}ZaXWizardDialog.prototype.popdown.call(this)
};
ZaZimletDeployXWizard.prototype.uploadCallback=function(c,d){try{if(d&&d[0]&&d[0].aid&&c==AjxPost.SC_OK){var b=this._localXForm.getInstance();
var f=null;
b[ZaZimlet.A_attachmentId]=d[0].aid;
b[ZaZimlet.A_uploadStatus]=ZaZimlet.STATUS_SUCCEEDED;
f=AjxMessageFormat.format(ZaMsg.ZMLT_UploadZimletSuccessMsg);
ZaZimlet.deploy({action:ZaZimlet.ACTION_DEPLOY_ALL,attId:d[0].aid,flushCache:b[ZaZimlet.A_flushCache]},new AjxCallback(this,this.deployZimletClbck))
}else{b[ZaZimlet.A_uploadStatus]=ZaZimlet.STATUS_FAILED;
f=AjxMessageFormat.format(ZaMsg.ZMLT_UploadZimletErrorMsg,[c])
}b[ZaZimlet.A_uploadStatusMsg]=f+("<br/>")
}catch(e){ZaApp.getInstance().getCurrentController()._handleException(e,"ZaZimletDeployXWizard.uploadCallback")
}this._localXForm.setInstance(b)
};
ZaZimletDeployXWizard.prototype.getDeploymentStatus=function(){try{var b=this._localXForm.getInstance();
ZaZimlet.deploy({action:ZaZimlet.ACTION_DEPLOY_STATUS,attId:b[ZaZimlet.A_attachmentId]},new AjxCallback(this,this.deployZimletClbck))
}catch(c){ZaApp.getInstance().getCurrentController()._handleException(c,"ZaZimletDeployXWizard.getDeploymentStatus")
}};
ZaZimletDeployXWizard.prototype.deployZimletClbck=function(f){var n=this._localXForm.getInstance();
try{if(!f){throw (new AjxException(ZaMsg.ERROR_EMPTY_RESPONSE_ARG,AjxException.UNKNOWN,"ZaZimletDeployXWizard.deployZimletClbck"))
}if(f.isException()){throw (f.getException())
}else{var j=true;
var m=false;
var g=f.getResponse().Body.DeployZimletResponse;
var e=[];
var b=g[ZaZimlet.A_progress];
if(b){if(!(b instanceof Array)){b=[b]
}var d=b.length;
for(var k=0;
k<d;
k++){var c=b[k].server;
var h=b[k].status;
if(h==ZaZimlet.STATUS_PENDING){j=false;
e.push(AjxMessageFormat.format(ZaMsg.ZMLT_DeployProgres,[c,ZaMsg.ZMLT_StatusPending]))
}else{if(h==ZaZimlet.STATUS_FAILED){m=true;
e.push(AjxMessageFormat.format(ZaMsg.ZMLT_DeployProgresFail,[c,b[k].error]))
}else{if(h==ZaZimlet.STATUS_SUCCEEDED){e.push(AjxMessageFormat.format(ZaMsg.ZMLT_DeployProgres,[c,ZaMsg.ZMLT_StatusSuccess]))
}}}e.push("<br/>")
}if(m){n[ZaZimlet.A_deployStatus]=ZaZimlet.STATUS_FAILED
}else{if(j){n[ZaZimlet.A_deployStatus]=ZaZimlet.STATUS_SUCCEEDED;
e=[ZaMsg.ZMLT_DeployZimletComplete]
}else{n[ZaZimlet.A_deployStatus]=ZaZimlet.STATUS_PENDING
}}n[ZaZimlet.A_deployStatusMsg]=e.join("<br/>")+("<br/>");
if(!j){this._pollHandler=AjxTimedAction.scheduleAction(this.pollAction,this.pollInterval)
}else{AjxTimedAction.cancelAction(this._pollHandler);
ZaApp.getInstance().getCurrentController().fireCreationEvent(new ZaZimlet())
}}}}catch(l){ZaApp.getInstance().getCurrentController()._handleException(l,"ZaZimletDeployXWizard.deployZimletClbck")
}this._localXForm.setInstance(n)
};
ZaZimletDeployXWizard.canShowDeployStatusMsg=function(b){var c=this.getInstanceValue(ZaZimlet.A_uploadStatus);
if(c!=ZaZimlet.STATUS_SUCCEEDED){return false
}var d=this.getInstanceValue(ZaZimlet.A_deployStatus);
if(b){return(d!=ZaZimlet.STATUS_FAILED)
}else{return(d==ZaZimlet.STATUS_FAILED)
}};
ZaZimletDeployXWizard.myXFormModifier=function(d){var c={type:_CASE_,numCols:2,caseKey:1,align:_LEFT_,valign:_TOP_,width:"520px",cssStyle:"overflow:hidden",items:[{type:_OUTPUT_,value:ZaMsg.ZMLT_uploadTitle,align:_LEFT_,colSpan:2},{type:_OUTPUT_,value:this.getUploadFormHtml(),colSpan:2,width:"480px"},{type:_SPACER_,colSpan:2},{ref:ZaZimlet.A_flushCache,type:_CHECKBOX_,align:_RIGHT_,subLabel:"",label:ZaMsg.ZMLT_flushCache,labelLocation:_RIGHT_,visibilityChecks:[],enableDisableChecks:[]},{type:_SPACER_,colSpan:2}]};
var b={type:_CASE_,numCols:1,caseKey:2,width:"400px",items:[{type:_GROUP_,numCols:1,items:[{type:_DWT_ALERT_,style:DwtAlert.CRITICAL,iconVisible:true,content:null,width:"400px",ref:ZaZimlet.A_uploadStatusMsg,visibilityChecks:[[XForm.checkInstanceValue,ZaZimlet.A_uploadStatus,ZaZimlet.STATUS_FAILED]],visibilityChangeEventSources:[ZaZimlet.A_uploadStatus],align:_CENTER_},{type:_DWT_ALERT_,style:DwtAlert.INFORMATION,iconVisible:true,content:null,width:"400px",ref:ZaZimlet.A_uploadStatusMsg,visibilityChecks:[[XForm.checkInstanceValueNot,ZaZimlet.A_uploadStatus,ZaZimlet.STATUS_FAILED]],visibilityChangeEventSources:[ZaZimlet.A_uploadStatus],align:_CENTER_},{type:_DWT_ALERT_,style:DwtAlert.CRITICAL,iconVisible:true,content:null,width:"400px",ref:ZaZimlet.A_deployStatusMsg,visibilityChecks:[[ZaZimletDeployXWizard.canShowDeployStatusMsg,false]],visibilityChangeEventSources:[ZaZimlet.A_deployStatus],align:_CENTER_},{type:_DWT_ALERT_,style:DwtAlert.INFORMATION,iconVisible:true,content:null,width:"400px",ref:ZaZimlet.A_deployStatusMsg,visibilityChecks:[[ZaZimletDeployXWizard.canShowDeployStatusMsg,true]],visibilityChangeEventSources:[ZaZimlet.A_deployStatus],align:_CENTER_}]}]};
d.items=[{type:_OUTPUT_,colSpan:2,valign:_TOP_,ref:ZaModel.currentStep,choices:this.stepChoices,cssStyle:"white-space: normal"},{type:_SEPARATOR_,align:_CENTER_,valign:_TOP_},{type:_SPACER_,align:_CENTER_,valign:_TOP_},{type:_SWITCH_,width:450,align:_LEFT_,valign:_TOP_,items:[c,b]}]
};
ZaXDialog.XFormModifiers.ZaZimletDeployXWizard.push(ZaZimletDeployXWizard.myXFormModifier)
}if(AjxPackage.define("zimbraAdmin.domains.view.ZaDomainListView")){ZaDomainListView=function(f,e){var d=null;
var c=DwtControl.ABSOLUTE_STYLE;
this._listType=e;
var b=this._getHeaderList();
ZaListView.call(this,{parent:f,className:d,posStyle:c,headerList:b,id:ZaId.TAB_DOMAIN_MANAGE,scrollLoading:true});
this._appCtxt=this.shell.getData(ZaAppCtxt.LABEL)
};
ZaDomainListView.prototype=new ZaListView;
ZaDomainListView.prototype.constructor=ZaDomainListView;
ZaDomainListView.prototype.toString=function(){return"ZaDomainListView"
};
ZaDomainListView.prototype.getTitle=function(){return ZaMsg.Domain_view_title
};
ZaDomainListView.prototype.getTabIcon=function(){return"Domain"
};
ZaDomainListView.prototype._createItemHtml=function(h,c,g){var k=new Array(50);
var b=document.createElement("div");
b[DwtListView._STYLE_CLASS]="Row";
b[DwtListView._SELECTED_STYLE_CLASS]=b[DwtListView._STYLE_CLASS]+"-"+DwtCssStyle.SELECTED;
b.className=b[DwtListView._STYLE_CLASS];
this.associateItemWithElement(h,b,DwtListView.TYPE_LIST_ITEM);
var o=0;
k[o++]="<table width='100%'>";
k[o++]="<tr>";
var d=this._headerList.length;
var m=Dwt.getNextId();
var f=this._listType;
for(var j=0;
j<d;
j++){var n=this._headerList[j]._field;
var e=this._getCellWidth(j,{});
if(n=="type"){var l="Domain";
var p=h.attrs[ZaDomain.A_domainType];
if(p==="alias"){l+="Alias"
}k[o++]='<td id="'+f+"_data_type_"+m+'" width='+this._headerList[j]._width+">"+AjxImg.getImageHtml(l)+"</td>"
}else{if(n==ZaDomain.A_domainName){k[o++]='<td id="'+f+"_data_name_"+m+"\" align='left' width="+e+">";
k[o++]=AjxStringUtil.htmlEncode(h.name);
k[o++]="</td>"
}else{if(n==ZaDomain.A_description){k[o++]='<td id="'+f+"_data_desc_"+m+"\" align='left' width="+e+">";
k[o++]=AjxStringUtil.htmlEncode(ZaItem.getDescriptionValue(h.attrs[ZaDomain.A_description]));
k[o++]="</td>"
}else{if(n==ZaDomain.A_zimbraDomainStatus){k[o++]='<td id="'+f+"_data_status_"+m+"\" align='left' width="+e+">";
k[o++]=ZaDomain._domainStatus(h.attrs[ZaDomain.A_zimbraDomainStatus]);
k[o++]="</td>"
}else{if(n==ZaDomain.A_domainType){k[o++]='<td id="'+f+"_data_domain_type_"+m+"\" align='left' width="+e+">";
k[o++]=AjxStringUtil.htmlEncode(h.attrs[ZaDomain.A_domainType]);
k[o++]="</td>"
}}}}}}k[o++]="</tr></table>";
b.innerHTML=k.join("");
return b
};
ZaDomainListView.prototype._getHeaderList=function(){var b=new Array();
var d=1;
var c=0;
b[c++]=new ZaListHeaderItem("type",null,null,"22px",null,"objectClass",false,true);
b[c++]=new ZaListHeaderItem(ZaDomain.A_domainName,ZaMsg.DLV_Name_col,null,"250px",d++,ZaDomain.A_domainName,true,true);
b[c++]=new ZaListHeaderItem(ZaDomain.A_domainType,ZaMsg.DLV_Type_col,null,"100px",null,ZaDomain.A_domainType,true,true);
b[c++]=new ZaListHeaderItem(ZaDomain.A_zimbraDomainStatus,ZaMsg.DLV_Status_col,null,"100px",null,ZaDomain.A_zimbraDomainStatus,true,true);
b[c++]=new ZaListHeaderItem(ZaDomain.A_description,ZaMsg.DLV_Description_col,null,"auto",null,null,true,true);
return b
}
}if(AjxPackage.define("zimbraAdmin.domains.view.ZaDomainXFormView")){ZaDomainXFormView=function(b,c){ZaTabView.call(this,{parent:b,iKeyName:"ZaDomainXFormView",contextId:ZaId.TAB_DOMAIN_EDIT});
this.GALModes=[{label:ZaMsg.GALMode_internal,value:ZaDomain.GAL_Mode_internal},{label:ZaMsg.GALMode_external,value:ZaDomain.GAL_Mode_external},{label:ZaMsg.GALMode_both,value:ZaDomain.GAL_Mode_both}];
this.GALServerTypes=[{label:ZaMsg.GALServerType_ldap,value:ZaDomain.GAL_ServerType_ldap},{label:ZaMsg.GALServerType_ad,value:ZaDomain.GAL_ServerType_ad}];
this.AuthMechs=[{label:ZaMsg.AuthMech_zimbra,value:ZaDomain.AuthMech_zimbra},{label:ZaMsg.AuthMech_ldap,value:ZaDomain.AuthMech_ldap},{label:ZaMsg.AuthMech_ad,value:ZaDomain.AuthMech_ad}];
this.cosChoices=new XFormChoices([],XFormChoices.OBJECT_LIST,"id","name");
this.catchAllChoices=new XFormChoices([],XFormChoices.OBJECT_LIST,"id","name");
this.TAB_INDEX=0;
this.initForm(ZaDomain.myXModel,this.getMyXForm(c),null)
};
ZaDomainXFormView.prototype=new ZaTabView();
ZaDomainXFormView.prototype.constructor=ZaDomainXFormView;
ZaTabView.XFormModifiers.ZaDomainXFormView=new Array();
ZaDomainXFormView.zimletChoices=new XFormChoices([],XFormChoices.SIMPLE_LIST);
ZaTabView.XFormSetObjectMethods.ZaDomainXFormView=new Array();
ZaDomainXFormView.prototype.setObject=function(c){ZaAccount.prototype.manageSpecialAttrs.call(c);
this._containedObject=new ZaDomain();
this._containedObject.attrs=new Object();
if(c.rights){this._containedObject.rights=c.rights
}if(c.setAttrs){this._containedObject.setAttrs=c.setAttrs
}if(c.getAttrs){this._containedObject.getAttrs=c.getAttrs
}if(c._defaultValues){this._containedObject._defaultValues=c._defaultValues
}this._containedObject.name=c.name;
this._containedObject.id=c.id;
this._containedObject.type=c.type;
for(var t in c.attrs){var h=this._localXForm.getModel().getItem(t);
if((h!=null&&h.type==_LIST_)||(c.attrs[t]!=null&&c.attrs[t] instanceof Array)){this._containedObject.attrs[t]=ZaItem.deepCloneListItem(c.attrs[t])
}else{this._containedObject.attrs[t]=c.attrs[t]
}}if(!this._containedObject.attrs[ZaDomain.A_zimbraDomainStatus]){this._containedObject.attrs[ZaDomain.A_zimbraDomainStatus]=ZaDomain.DOMAIN_STATUS_ACTIVE
}this._containedObject[ZaDomain.A_AuthUseBindPassword]=c[ZaDomain.A_AuthUseBindPassword];
if(!c[ZaModel.currentTab]){this._containedObject[ZaModel.currentTab]="1"
}else{this._containedObject[ZaModel.currentTab]=c[ZaModel.currentTab]
}this._containedObject[ZaDomain.A_NotebookTemplateFolder]=c[ZaDomain.A_NotebookTemplateFolder];
this._containedObject[ZaDomain.A_NotebookTemplateDir]=c[ZaDomain.A_NotebookTemplateDir];
this._containedObject[ZaDomain.A_allNotebookACLS]=[];
if(c[ZaDomain.A_allNotebookACLS]){this._containedObject[ZaDomain.A_allNotebookACLS]._version=c[ZaDomain.A_allNotebookACLS]._version?c[ZaDomain.A_allNotebookACLS]._version:1;
var p=c[ZaDomain.A_allNotebookACLS].length;
for(var q=0;
q<p;
q++){var r=c[ZaDomain.A_allNotebookACLS][q];
var e={};
e.gt=r.gt;
e.name=r.name;
e.zid=r.zid;
e.acl={r:0,w:0,i:0,d:0,a:0,x:0};
for(var t in r.acl){e.acl[t]=r.acl[t]
}this._containedObject[ZaDomain.A_allNotebookACLS][q]=e
}}if(ZaTabView.isTAB_ENABLED(c,ZaDomainXFormView.ZIMLETS_TAB_ATTRS,ZaDomainXFormView.ZIMLETS_TAB_RIGHTS)){var g=ZaZimlet.getAll(ZaZimlet.EXCLUDE_EXTENSIONS);
if(g==null){g=[]
}if(g instanceof ZaItemList||g instanceof AjxVector){g=g.getArray()
}var p=g.length;
var k=[];
for(var q=0;
q<p;
q++){var n=g[q];
k.push(n.name)
}ZaDomainXFormView.zimletChoices.setChoices(k);
ZaDomainXFormView.zimletChoices.dirtyChoices()
}var d=this._containedObject.attrs[ZaDomain.A_zimbraAdminConsoleCatchAllAddressEnabled]?this._containedObject.attrs[ZaDomain.A_zimbraAdminConsoleCatchAllAddressEnabled]:this._containedObject._defaultValues.attrs[ZaDomain.A_zimbraAdminConsoleCatchAllAddressEnabled];
if(d&&d=="TRUE"){this._containedObject[ZaAccount.A_zimbraMailCatchAllAddress]=c[ZaAccount.A_zimbraMailCatchAllAddress];
this.catchAllChoices.setChoices([c[ZaAccount.A_zimbraMailCatchAllAddress]]);
this.catchAllChoices.dirtyChoices()
}if(this._containedObject.attrs[ZaDomain.A_domainDefaultCOSId]&&this._containedObject.getAttrs[ZaDomain.A_domainDefaultCOSId]){var b=ZaCos.getCosById(this._containedObject.attrs[ZaDomain.A_domainDefaultCOSId]);
this.cosChoices.setChoices([b]);
this.cosChoices.dirtyChoices()
}this._containedObject[ZaDomain.A2_gal_sync_accounts]=[];
if(c[ZaDomain.A2_gal_sync_accounts]&&c[ZaDomain.A2_gal_sync_accounts][0]){this._containedObject[ZaDomain.A2_gal_sync_accounts][0]=new ZaAccount();
this._containedObject[ZaDomain.A2_gal_sync_accounts][0].name=c[ZaDomain.A2_gal_sync_accounts][0].name;
this._containedObject[ZaDomain.A2_gal_sync_accounts][0].id=c[ZaDomain.A2_gal_sync_accounts][0].id;
this._containedObject[ZaDomain.A2_gal_sync_accounts][0][ZaAccount.A2_datasources]=c[ZaDomain.A2_gal_sync_accounts][0][ZaAccount.A2_datasources];
this._containedObject[ZaDomain.A2_gal_sync_accounts][0].attrs[ZaDomain.A_mailHost]=c[ZaDomain.A2_gal_sync_accounts][0].attrs[ZaDomain.A_mailHost];
if(c[ZaDomain.A2_gal_sync_accounts][0][ZaAccount.A2_zimbra_ds]){this._containedObject[ZaDomain.A2_gal_sync_accounts][0][ZaAccount.A2_zimbra_ds]=new ZaDataSource();
this._containedObject[ZaDomain.A2_gal_sync_accounts][0][ZaAccount.A2_zimbra_ds].attrs=[];
this._containedObject[ZaDomain.A2_gal_sync_accounts][0][ZaAccount.A2_zimbra_ds].name=c[ZaDomain.A2_gal_sync_accounts][0][ZaAccount.A2_zimbra_ds].name;
this._containedObject[ZaDomain.A2_gal_sync_accounts][0][ZaAccount.A2_zimbra_ds].id=c[ZaDomain.A2_gal_sync_accounts][0][ZaAccount.A2_zimbra_ds].id;
for(var t in c[ZaDomain.A2_gal_sync_accounts][0][ZaAccount.A2_zimbra_ds].attrs){var h=this._localXForm.getModel().getItem(t);
if(c[ZaDomain.A2_gal_sync_accounts][0][ZaAccount.A2_zimbra_ds].attrs[t]!=null&&c[ZaDomain.A2_gal_sync_accounts][0][ZaAccount.A2_zimbra_ds].attrs[t] instanceof Array){this._containedObject[ZaDomain.A2_gal_sync_accounts][0][ZaAccount.A2_zimbra_ds].attrs[t]=ZaItem.deepCloneListItem(c[ZaDomain.A2_gal_sync_accounts][0][ZaAccount.A2_zimbra_ds].attrs[t])
}else{this._containedObject[ZaDomain.A2_gal_sync_accounts][0][ZaAccount.A2_zimbra_ds].attrs[t]=c[ZaDomain.A2_gal_sync_accounts][0][ZaAccount.A2_zimbra_ds].attrs[t]
}}}if(c[ZaDomain.A2_gal_sync_accounts][0][ZaAccount.A2_ldap_ds]){this._containedObject[ZaDomain.A2_gal_sync_accounts][0][ZaAccount.A2_ldap_ds]=new ZaDataSource();
this._containedObject[ZaDomain.A2_gal_sync_accounts][0][ZaAccount.A2_ldap_ds].name=c[ZaDomain.A2_gal_sync_accounts][0][ZaAccount.A2_ldap_ds].name;
this._containedObject[ZaDomain.A2_gal_sync_accounts][0][ZaAccount.A2_ldap_ds].id=c[ZaDomain.A2_gal_sync_accounts][0][ZaAccount.A2_ldap_ds].id;
this._containedObject[ZaDomain.A2_gal_sync_accounts][0][ZaAccount.A2_ldap_ds].attrs=[];
for(var t in c[ZaDomain.A2_gal_sync_accounts][0][ZaAccount.A2_ldap_ds].attrs){var h=this._localXForm.getModel().getItem(t);
if(c[ZaDomain.A2_gal_sync_accounts][0][ZaAccount.A2_ldap_ds].attrs[t]!=null&&c[ZaDomain.A2_gal_sync_accounts][0][ZaAccount.A2_ldap_ds].attrs[t] instanceof Array){this._containedObject[ZaDomain.A2_gal_sync_accounts][0][ZaAccount.A2_ldap_ds].attrs[t]=ZaItem.deepCloneListItem(c[ZaDomain.A2_gal_sync_accounts][0][ZaAccount.A2_ldap_ds].attrs[t])
}else{this._containedObject[ZaDomain.A2_gal_sync_accounts][0][ZaAccount.A2_ldap_ds].attrs[t]=c[ZaDomain.A2_gal_sync_accounts][0][ZaAccount.A2_ldap_ds].attrs[t]
}}}}if(this._containedObject.attrs[ZaDomain.A_zimbraAutoProvMode]){if(this._containedObject.attrs[ZaDomain.A_zimbraAutoProvMode] instanceof Array){for(var l=0;
l<this._containedObject.attrs[ZaDomain.A_zimbraAutoProvMode].length;
l++){if(this._containedObject.attrs[ZaDomain.A_zimbraAutoProvMode][l]=="EAGER"){this._containedObject[ZaDomain.A2_zimbraAutoProvModeEAGEREnabled]="TRUE"
}else{if(this._containedObject.attrs[ZaDomain.A_zimbraAutoProvMode][l]=="LAZY"){this._containedObject[ZaDomain.A2_zimbraAutoProvModeLAZYEnabled]="TRUE"
}else{if(this._containedObject.attrs[ZaDomain.A_zimbraAutoProvMode][l]=="MANUAL"){this._containedObject[ZaDomain.A2_zimbraAutoProvModeMANUALEnabled]="TRUE"
}}}}}else{if(this._containedObject.attrs[ZaDomain.A_zimbraAutoProvMode]=="EAGER"){this._containedObject[ZaDomain.A2_zimbraAutoProvModeEAGEREnabled]="TRUE"
}else{if(this._containedObject.attrs[ZaDomain.A_zimbraAutoProvMode]=="LAZY"){this._containedObject[ZaDomain.A2_zimbraAutoProvModeLAZYEnabled]="TRUE"
}else{if(this._containedObject.attrs[ZaDomain.A_zimbraAutoProvMode]=="MANUAL"){this._containedObject[ZaDomain.A2_zimbraAutoProvModeMANUALEnabled]="TRUE"
}}}}}if(this._containedObject.attrs[ZaDomain.A_zimbraAutoProvAuthMech]){if(this._containedObject.attrs[ZaDomain.A_zimbraAutoProvAuthMech] instanceof Array){for(var l=0;
l<this._containedObject.attrs[ZaDomain.A_zimbraAutoProvAuthMech].length;
l++){if(this._containedObject.attrs[ZaDomain.A_zimbraAutoProvAuthMech][l]=="LDAP"){this._containedObject[ZaDomain.A2_zimbraAutoProvAuthMechLDAPEnabled]="TRUE"
}else{if(this._containedObject.attrs[ZaDomain.A_zimbraAutoProvAuthMech][l]=="PREAUTH"){this._containedObject[ZaDomain.A2_zimbraAutoProvAuthMechPREAUTHEnabled]="TRUE"
}else{if(this._containedObject.attrs[ZaDomain.A_zimbraAutoProvAuthMech][l]=="KRB5"){this._containedObject[ZaDomain.A2_zimbraAutoProvAuthMechKRB5Enabled]="TRUE"
}else{if(this._containedObject.attrs[ZaDomain.A_zimbraAutoProvAuthMech][l]=="SPNEGO"){this._containedObject[ZaDomain.A2_zimbraAutoProvAuthMechSPNEGOEnabled]="TRUE"
}}}}}}else{if(this._containedObject.attrs[ZaDomain.A_zimbraAutoProvAuthMech]=="LDAP"){this._containedObject[ZaDomain.A2_zimbraAutoProvAuthMechLDAPEnabled]="TRUE"
}else{if(this._containedObject.attrs[ZaDomain.A_zimbraAutoProvAuthMech]=="PREAUTH"){this._containedObject[ZaDomain.A2_zimbraAutoProvAuthMechPREAUTHEnabled]="TRUE"
}else{if(this._containedObject.attrs[ZaDomain.A_zimbraAutoProvAuthMech]=="KRB5"){this._containedObject[ZaDomain.A2_zimbraAutoProvAuthMechKRB5Enabled]="TRUE"
}else{if(this._containedObject.attrs[ZaDomain.A_zimbraAutoProvAuthMech]=="SPNEGO"){this._containedObject[ZaDomain.A2_zimbraAutoProvAuthMechSPNEGOEnabled]="TRUE"
}}}}}}this._containedObject[ZaDomain.A2_zimbraAutoProvServerList]=ZaApp.getInstance().getServerList(true).getArray();
this._containedObject[ZaDomain.A2_zimbraAutoProvSelectedServerList]=new AjxVector();
for(var q=0;
q<this._containedObject[ZaDomain.A2_zimbraAutoProvServerList].length;
q++){var m=this._containedObject[ZaDomain.A2_zimbraAutoProvServerList][q];
var u=m.attrs[ZaServer.A_zimbraAutoProvScheduledDomains];
for(var o=0;
u&&o<u.length;
o++){if(u[o]==this._containedObject.name){this._containedObject[ZaDomain.A2_zimbraAutoProvSelectedServerList].add(m.name);
m.checked=true
}}}var v=new Array();
v._version=1;
this._containedObject[ZaDomain.A2_domain_account_quota]=v;
if(ZaTabView.XFormSetObjectMethods.ZaDomainXFormView){var s=ZaTabView.XFormSetObjectMethods.ZaDomainXFormView;
var p=s.length;
var f=this._containedObject;
for(var q=0;
q<p;
q++){if(typeof(s[q])=="function"){f=s[q].call(this,f,c)
}}this._containedObject=f
}this._localXForm.setInstance(this._containedObject)
};
ZaDomainXFormView.isCatchAllEnabled=function(){return(this.getInstanceValue(ZaDomain.A_zimbraAdminConsoleCatchAllAddressEnabled)=="TRUE")
};
ZaDomainXFormView.aclSelectionListener=function(d){var c=this.getInstance();
var b=this.widget.getSelection();
if(b&&b.length){this.getModel().setInstanceValue(this.getInstance(),ZaDomain.A2_acl_selection_cache,b)
}else{this.getModel().setInstanceValue(this.getInstance(),ZaDomain.A2_acl_selection_cache,null)
}if(d.detail==DwtListView.ITEM_DBL_CLICKED){ZaDomainXFormView.editButtonListener.call(this)
}};
ZaDomainXFormView.isDeleteAclEnabled=function(){var e=true;
if(!AjxUtil.isEmpty(this.getInstanceValue(ZaDomain.A2_acl_selection_cache))){var b=this.getInstanceValue(ZaDomain.A2_acl_selection_cache);
var d=b.length;
for(var c=0;
c<d;
c++){if(b[c].gt==ZaDomain.A_NotebookPublicACLs||b[c].gt==ZaDomain.A_NotebookAllACLs||b[c].gt==ZaDomain.A_NotebookGuestACLs){e=false;
break
}}}else{e=false
}return e
};
ZaDomainXFormView.isEditAclEnabled=function(){return(!AjxUtil.isEmpty(this.getInstanceValue(ZaDomain.A2_acl_selection_cache))&&this.getInstanceValue(ZaDomain.A2_acl_selection_cache).length==1)
};
ZaDomainXFormView.hasACEName=function(){return(this.getInstanceValue(ZaDomain.A_domainName)!=this.getInstanceValue("name"))
};
ZaDomainXFormView.resetAllColorThemes=function(){var b=this.getForm();
this.setInstanceValue(null,ZaDomain.A_zimbraSkinForegroundColor);
this.setInstanceValue(null,ZaDomain.A_zimbraSkinBackgroundColor);
this.setInstanceValue(null,ZaDomain.A_zimbraSkinSecondaryColor);
this.setInstanceValue(null,ZaDomain.A_zimbraSkinSelectionColor);
b.parent.setDirty(true);
b.refresh()
};
ZaDomainXFormView.isDomainModeNotInternal=function(){return(this.getInstanceValue(ZaDomain.A_zimbraGalMode)!=ZaDomain.GAL_Mode_internal)
};
ZaDomainXFormView.addButtonListener=function(){var c=this.getForm().parent;
if(!c.addAclDlg){c.addAclDlg=new ZaAddDomainAclXDialog(ZaApp.getInstance().getAppCtxt().getShell(),"550px","150px");
c.addAclDlg.registerCallback(DwtDialog.OK_BUTTON,ZaDomainXFormView.addAcl,this.getForm(),null)
}var b={};
b.gt=ZaDomain.A_NotebookUserACLs;
b.name="";
b.acl={r:0,w:0,i:0,d:0,a:0,x:0};
c.addAclDlg.setObject(b);
c.addAclDlg.popup()
};
ZaDomainXFormView.modifyAclCallback=function(h,g){try{if(h.busyId){ZaApp.getInstance().getAppCtxt().getShell().setBusy(false,h.busyId)
}if(!g&&!ZaApp.getInstance().getCurrentController()._currentRequest.cancelled){throw (new AjxException(ZaMsg.ERROR_EMPTY_RESPONSE_ARG,AjxException.UNKNOWN,"ZaDomainController.prototype.modifyAclCallback"))
}else{if(g.isException&&g.isException()){throw (g.getException())
}else{if(g.getResponse().Body&&g.getResponse().Body.BatchResponse&&g.getResponse().Body.BatchResponse.Fault){var f=g.getResponse().Body.BatchResponse.Fault;
if(f instanceof Array){f=f[0]
}if(f){var c=ZmCsfeCommand.faultToEx(f);
throw (c)
}}}}var e=new ZaDomain();
var b=this.getInstance();
e.attrs[ZaDomain.A_zimbraNotebookAccount]=this.getModel().getInstanceValue(this.getInstance(),ZaDomain.A_zimbraNotebookAccount);
e.attrs[ZaDomain.A_zimbraDomainStatus]=this.getModel().getInstanceValue(this.getInstance(),ZaDomain.A_zimbraDomainStatus);
e.id=this.getInstance().id;
e.attrs[ZaItem.A_zimbraId]=this.getModel().getInstanceValue(this.getInstance(),ZaItem.A_zimbraId);
e.name=this.getInstance().name;
ZaDomain.loadNotebookACLs.call(e);
var d=this.getModel().getInstanceValue(this.getInstance(),ZaDomain.A_allNotebookACLS);
if(d){e[ZaDomain.A_allNotebookACLS]._version=d._version+1
}else{e[ZaDomain.A_allNotebookACLS]._version=1
}this.getModel().setInstanceValue(this.getInstance(),ZaDomain.A_allNotebookACLS,e[ZaDomain.A_allNotebookACLS])
}catch(c){ZaApp.getInstance().getCurrentController()._handleException(c,"ZaDomainXFormView.modifyAclCallback")
}};
ZaDomainXFormView.addAcl=function(){if(this.parent.addAclDlg){this.parent.addAclDlg.popdown();
var e=this.parent.addAclDlg.getObject();
var b=this.getModel().getInstanceValue(this.getInstance(),ZaDomain.A_zimbraNotebookAccount);
var d=AjxSoapDoc.create("BatchRequest","urn:zimbra");
d.setMethodAttribute("onerror","stop");
ZaDomain.getGrantNotebookACLsRequest(e,d);
var g=new Object();
if(b){g.accountName=b
}var f=Dwt.getNextId();
g.soapDoc=d;
g.asyncMode=true;
g.busyId=f;
g.callback=new AjxCallback(this,ZaDomainXFormView.modifyAclCallback,[g]);
var c={showBusy:true,busyId:f,controller:ZaApp.getInstance().getCurrentController(),busyMsg:ZaMsg.BUSY_MODIFY_FOLDER_PERMISSIONS};
ZaRequestMgr.invoke(g,c)
}};
ZaDomainXFormView.editButtonListener=function(){var b=this.getInstance();
if(b[ZaDomain.A2_acl_selection_cache]&&b[ZaDomain.A2_acl_selection_cache][0]){var e=this.getForm().parent;
if(!e.editAclDlg){e.editAclDlg=new ZaEditDomainAclXDialog(ZaApp.getInstance().getAppCtxt().getShell(),"550px","150px");
e.editAclDlg.registerCallback(DwtDialog.OK_BUTTON,ZaDomainXFormView.updateAcl,this.getForm(),null)
}var d={};
d.gt=b[ZaDomain.A2_acl_selection_cache][0].gt;
d.name=b[ZaDomain.A2_acl_selection_cache][0].name;
d.acl={r:0,w:0,i:0,d:0,a:0,x:0};
for(var c in b[ZaDomain.A2_acl_selection_cache][0].acl){d.acl[c]=b[ZaDomain.A2_acl_selection_cache][0].acl[c]
}e.editAclDlg.setObject(d);
e.editAclDlg.popup()
}};
ZaDomainXFormView.updateAcl=function(){if(this.parent.editAclDlg){this.parent.editAclDlg.popdown();
var f=this.parent.editAclDlg.getObject();
var d=this.getModel().getInstanceValue(this.getInstance(),ZaDomain.A2_acl_selection_cache);
var b=false;
for(var k in f.acl){if(f.acl[k]!=d[0].acl[k]){b=true;
break
}}if(b){var j=this.getModel().getInstanceValue(this.getInstance(),ZaDomain.A_zimbraNotebookAccount);
var h=AjxSoapDoc.create("BatchRequest","urn:zimbra");
h.setMethodAttribute("onerror","stop");
ZaDomain.getGrantNotebookACLsRequest(f,h);
var e=new Object();
if(j){e.accountName=j
}var g=Dwt.getNextId();
e.soapDoc=h;
e.asyncMode=true;
e.busyId=g;
e.callback=new AjxCallback(this,ZaDomainXFormView.modifyAclCallback,[e]);
var c={showBusy:true,busyId:g,controller:ZaApp.getInstance().getCurrentController(),busyMsg:ZaMsg.BUSY_MODIFY_FOLDER_PERMISSIONS};
ZaRequestMgr.invoke(e,c)
}}};
ZaDomainXFormView.deleteButtonListener=function(){var b=this.getInstanceValue(ZaDomain.A2_acl_selection_cache);
if(AjxUtil.isEmpty(b)){return
}var e=b.length;
if(e>0){var c=this.getModel().getInstanceValue(this.getInstance(),ZaDomain.A_zimbraNotebookAccount);
var f=AjxSoapDoc.create("BatchRequest","urn:zimbra");
f.setMethodAttribute("onerror","stop");
var c=this.getModel().getInstanceValue(this.getInstance(),ZaDomain.A_zimbraNotebookAccount);
ZaDomain.getRevokeNotebookACLsRequest(b,f);
var h=new Object();
if(c){h.accountName=c
}var g=Dwt.getNextId();
h.soapDoc=f;
h.asyncMode=true;
h.busyId=g;
h.callback=new AjxCallback(this,ZaDomainXFormView.modifyAclCallback,[h]);
var d={showBusy:true,busyId:g,controller:ZaApp.getInstance().getCurrentController(),busyMsg:ZaMsg.BUSY_MODIFY_FOLDER_PERMISSIONS};
ZaRequestMgr.invoke(h,d)
}};
ZaDomainXFormView.onFormFieldChanged=function(f,e,d){var b=this.getInstance();
if(b.attrs[ZaDomain.A_zimbraDomainStatus]&&(b.attrs[ZaDomain.A_zimbraDomainStatus]==ZaDomain.DOMAIN_STATUS_SHUTDOWN)){var c=this.getInstanceValue();
return c
}else{this.setInstanceValue(f);
return f
}};
ZaDomainXFormView.preProcessCOS=function(d,b){var e=d;
if(ZaItem.ID_PATTERN.test(d)){e=d
}else{var c=ZaCos.getCosByName(d,b.parent._app);
if(c){e=c.id
}}return e
};
ZaDomainXFormView.manualAutoProvisionListener=function(){try{var d=this.getForm().parent;
var b=this.getInstance();
if(!d.handleManualProvDlg){d.handleManualProvDlg=new ZaManualProvConfigDialog(ZaApp.getInstance().getAppCtxt().getShell(),"700px","350px",ZaMsg.DLG_TITILE_MANUAL_PROV);
d.handleManualProvDlg.registerCallback(DwtDialog.OK_BUTTON,ZaManualProvConfigDialog.finishConfig,this.getForm(),null)
}d.handleManualProvDlg.setObject(b);
d.handleManualProvDlg.popup()
}catch(c){ZaApp.getInstance().getCurrentController()._handleException(c,"ZaDomainXFormView.manualAutoProvisionListener",null,false)
}};
ZaDomainXFormView.checkGALAccountAttribute=function(g,e){var f=this.getParentItem().getRefPath();
var d=f+"/"+g;
var c=this.getInstanceValue(d);
var b=AjxUtil.isEmpty(c);
return(b==e)
};
ZaDomainXFormView.getUserQuota=function(){var c={};
c.domainName=this.getForm().getInstanceValue(ZaDomain.A_domainName);
c.sortBy=ZaAccountQuota.A2_diskUsage;
c.sortAscending=0;
var b=new AjxCallback(this.getForm(),ZaDomainXFormView.updateUserQuota,c);
ZaDomain.getAccountQuota(c.domainName,0,50,c.sortBy,c.sortAscending,b)
};
ZaDomainXFormView.updateUserQuota=function(j,h){if(h&&!h.isException()){h=h.getResponse().Body.GetQuotaUsageResponse;
var b={hasMore:false,mbxes:new Array()};
if((h.account&&h.account.length>0)&&(h.searchTotal&&h.searchTotal>0)){b.hasMore=h.more;
var e=h.account;
var f=new Array();
for(var d=0;
d<e.length;
d++){f[d]=new ZaAccountQuota(e[d])
}b.mbxes=f
}var g=this.getInstanceValue(ZaDomain.A2_domain_account_quota)._version;
g=g?++g:1;
b.mbxes._version=g;
this.setInstanceValue(b.mbxes,ZaDomain.A2_domain_account_quota);
var c=this.getItemById(this.getId()+"_accountQuota").getWidget();
c.setDomainName(j.domainName);
c.setSortBy(j.sortBy);
c.setSortAscending(j.sortAscending);
c.setScrollHasMore(b.hasMore)
}};
ZaDomainXFormView.GAL_TAB_ATTRS=[ZaDomain.A_zimbraGalMode,ZaDomain.A_zimbraGalMaxResults,ZaDomain.A_GalLdapFilter,ZaDomain.A_zimbraGalAutoCompleteLdapFilter,ZaDomain.A_GalLdapSearchBase,ZaDomain.A_GalLdapURL,ZaDomain.A_GalLdapBindDn];
ZaDomainXFormView.GAL_TAB_RIGHTS=[];
ZaDomainXFormView.AUTH_TAB_ATTRS=[ZaDomain.A_AuthMech,ZaDomain.A_AuthLdapUserDn,ZaDomain.A_AuthLdapURL,ZaDomain.A_zimbraAuthLdapStartTlsEnabled,ZaDomain.A_AuthLdapSearchFilter,ZaDomain.A_AuthLdapSearchBase,ZaDomain.A_AuthLdapSearchBindDn];
ZaDomainXFormView.AUTH_TAB_RIGHTS=[];
ZaDomainXFormView.VH_TAB_ATTRS=[ZaDomain.A_zimbraVirtualHostname];
ZaDomainXFormView.VH_TAB_RIGHTS=[];
ZaDomainXFormView.ADV_TAB_ATTRS=[ZaDomain.A_zimbraBasicAuthRealm,ZaDomain.A_zimbraMailAddressValidationRegex,ZaDomain.A_zimbraMailDomainQuota,ZaDomain.A_zimbraDomainAggregateQuota,ZaDomain.A_zimbraDomainAggregateQuotaWarnPercent,ZaDomain.A_zimbraDomainAggregateQuotaWarnEmailRecipient,ZaDomain.A_zimbraDomainAggregateQuotaPolicy];
ZaDomainXFormView.ADV_TAB_RIGHTS=[];
ZaDomainXFormView.Feature_TAB_ATTRS=[ZaDomain.A_zimbraFeatureCalendarReminderDeviceEmailEnabled];
ZaDomainXFormView.Feature_TAB_RIGHTS=[];
ZaDomainXFormView.CERT_TAB_ATTRS=[ZaDomain.A_zimbraSSLCertificate];
ZaDomainXFormView.CERT_TAB_RIGHTS=[];
ZaDomainXFormView.PROV_TAB_ATTRS=[ZaDomain.A_zimbraAutoProvMode,ZaDomain.A_zimbraAutoProvAuthMech,ZaDomain.A_zimbraAutoProvLdapURL,ZaDomain.A_zimbraAutoProvLdapStartTlsEnabled,ZaDomain.A_zimbraAutoProvLdapAdminBindDn,ZaDomain.A_zimbraAutoProvLdapAdminBindPassword,ZaDomain.A_zimbraAutoProvLdapSearchBase,ZaDomain.A_zimbraAutoProvLdapSearchFilter,ZaDomain.A_zimbraAutoProvLdapBindDn,ZaDomain.A_zimbraAutoProvAccountNameMap,ZaDomain.A_zimbraAutoProvAttrMap,ZaDomain.A_zimbraAutoProvNotificationFromAddress,ZaDomain.A_zimbraAutoProvBatchSize,ZaDomain.A_zimbraAutoProvLastPolledTimestamp,ZaDomain.A_zimbraAutoProvNotificationSubject,ZaDomain.A_zimbraAutoProvNotificationBody];
ZaDomainXFormView.PROV_TAB_RIGHTS=[];
ZaDomainXFormView.INTEROP_TAB_ATTRS=[ZaDomain.A_zimbraFreebusyExchangeURL,ZaDomain.A_zimbraFreebusyExchangeAuthScheme,ZaDomain.A_zimbraFreebusyExchangeAuthUsername,ZaDomain.A_zimbraFreebusyExchangeAuthPassword,ZaDomain.A_zimbraFreebusyExchangeUserOrg,ZaDomain.A_zimbraFreebusyExchangeServerType];
ZaDomainXFormView.INTEROP_TAB_RIGHTS=[];
ZaDomainXFormView.ZIMLETS_TAB_ATTRS=[ZaDomain.A_zimbraZimletDomainAvailableZimlets];
ZaDomainXFormView.ZIMLETS_TAB_RIGHTS=[];
ZaDomainXFormView.SKIN_TAB_ATTRS=[ZaDomain.A_zimbraSkinForegroundColor,ZaDomain.A_zimbraSkinBackgroundColor,ZaDomain.A_zimbraSkinSecondaryColor,ZaDomain.A_zimbraSkinSelectionColor,ZaDomain.A_zimbraSkinLogoURL,ZaDomain.A_zimbraSkinLogoLoginBanner,ZaDomain.A_zimbraSkinLogoAppBanner];
ZaDomainXFormView.SKIN_TAB_RIGHTS=[];
ZaDomainXFormView.ACCOUNT_QUOTA_TAB_ATTRS=[];
ZaDomainXFormView.ACCOUNT_QUOTA_TAB_RIGHTS=[ZaDomain.RIGHT_GET_DOMAIN_QUOTA];
ZaDomainXFormView.getCustomWidth=function(){try{var c=this.getForm().parent.getHtmlElement();
var b=parseInt(c.style.width);
if(isNaN(b)){b=c.clientWidth?c.clientWidth:c.offsetWidth
}return b
}catch(d){}return"100%"
};
ZaDomainXFormView.getCustomHeight=function(){var b=this.getForm().parent;
try{var d=b.getSize().y;
var h=this.getForm().getItemsById("xform_header");
var g=0;
if(h){var e=h[0];
if(e.getContainer()){e=e.getContainer()
}else{e=e.getHtmlElement()
}g=Dwt.getSize(e).y
}var f=2;
if(AjxEnv.isIE){f=3
}if(d>(g+f)){return d-g-f
}}catch(c){}return"100%"
};
ZaDomainXFormView.myXFormModifier=function(t,b){t.tableCssStyle="width:100%;overflow:auto;";
var j=new Array();
j[0]=new ZaListHeaderItem("gt",ZaMsg.Domain_Notebook_type_col,null,"150px",false,null,false,true);
j[1]=new ZaListHeaderItem("name",ZaMsg.Domain_Notebook_name_col,null,"200px",false,null,false,true);
j[2]=new ZaListHeaderItem("acl",ZaMsg.Domain_Notebook_perms_col,null,"auto",null,null,false,true);
t.items=[];
t.items.push({type:_GROUP_,cssClass:"ZmSelectedHeaderBg",colSpan:"*",id:"xform_header",items:[{type:_GROUP_,numCols:4,colSizes:["32px","*","80px","*"],items:[{type:_AJX_IMAGE_,src:"Domain_32",label:null,rowSpan:3},{type:_OUTPUT_,ref:"name",label:null,cssClass:"AdminTitle",height:32,rowSpan:3},{type:_OUTPUT_,ref:ZaItem.A_zimbraId,label:ZaMsg.NAD_ZimbraID,visibilityChecks:[ZaItem.hasReadPermission]},{type:_OUTPUT_,ref:ZaItem.A_zimbraCreateTimestamp,label:ZaMsg.LBL_zimbraCreateTimestamp,labelLocation:_LEFT_,getDisplayValue:function(){var v=ZaItem.formatServerTime(this.getInstanceValue());
if(!v){return ZaMsg.Server_Time_NA
}else{return v
}},visibilityChecks:[ZaItem.hasReadPermission]},{type:_OUTPUT_,choices:ZaDomain.domainStatusChoices,bmolsnr:true,ref:ZaDomain.A_zimbraDomainStatus,label:ZaMsg.LBL_zimbraDomainStatus,visibilityChecks:[ZaItem.hasReadPermission]}]}]});
var o=++this.TAB_INDEX;
var u={type:_TAB_BAR_,ref:ZaModel.currentTab,choices:[],cssClass:"ZaTabBar",id:"xform_tabbar",cssStyle:"display:none;"};
u.choices.push({value:o,label:ZaMsg.TABT_GeneralPage});
var q={type:_SWITCH_,items:[]};
this.helpMap={};
this.helpMap[o]=[location.pathname,ZaUtil.HELP_URL,"managing_domains/managing_domains.htm","?locid=",AjxEnv.DEFAULT_LOCALE].join("");
var n={type:_ZATABCASE_,caseKey:o,numCols:1,paddingStyle:"padding-left:15px;",width:"98%",cellpadding:2};
var r=[{type:_ZA_TOP_GROUPER_,label:ZaMsg.TABT_GeneralPage,width:"100%",numCols:2,colSizes:["275px","auto"],items:[{type:_DWT_ALERT_,visibilityChecks:[[XForm.checkInstanceValue,ZaDomain.A_zimbraDomainStatus,ZaDomain.DOMAIN_STATUS_SHUTDOWN]],visibilityChangeEventSources:[ZaDomain.A_zimbraDomainStatus],containerCssStyle:"padding-bottom:0;",style:DwtAlert.WARNING,iconVisible:true,content:ZaMsg.Domain_Locked_Note,colSpan:"*"},{ref:"name",type:_OUTPUT_,label:ZaMsg.Domain_DomainName},{ref:ZaAccount.A_zimbraMailCatchAllAddress,id:ZaAccount.A_zimbraMailCatchAllAddress,type:_DYNSELECT_,visibilityChecks:[ZaDomainXFormView.isCatchAllEnabled],visibilityChangeEventSources:[ZaDomain.A_zimbraAdminConsoleCatchAllAddressEnabled],dataFetcherClass:null,choices:this.catchAllChoices,emptyText:ZaMsg.enterSearchTerm,dataFetcherInstance:true,width:250,dataFetcherMethod:function(y){try{var x=y.value;
var w=y.event;
var B=y.callback;
var A=Dwt.getNextId();
var z=new Object();
dataCallback=new AjxCallback(this,ZaSearch.prototype.dynSelectDataCallback,{callback:B,busyId:A});
z.types=[ZaSearch.ACCOUNTS,ZaSearch.DLS];
z.callback=dataCallback;
z.sortBy=ZaAccount.A_name;
z.domain=this.name;
z.query=ZaSearch.getSearchByNameQuery(x,z.types);
z.controller=ZaApp.getInstance().getCurrentController();
z.showBusy=true;
z.busyMsg=ZaMsg.BUSY_SEARCHING;
z.busyId=A;
z.skipCallbackIfCancelled=false;
ZaSearch.searchDirectory(z)
}catch(v){this._app.getCurrentController()._handleException(v,"ZaSearch.prototype.dynSelectDataFetcher")
}},label:ZaMsg.L_catchAll,labelLocation:_LEFT_,onChange:ZaDomainXFormView.onFormFieldChanged,getDisplayValue:function(v){if(v&&v.name){return v.name
}else{if(!AjxUtil.isEmpty(v)){return v
}else{return""
}}}},{ref:ZaDomain.A_domainName,type:_OUTPUT_,label:ZaMsg.Domain_ACEName+":",visibilityChecks:[ZaDomainXFormView.hasACEName],visibilityChangeEventSources:[ZaDomain.A_domainName]},{ref:ZaDomain.A_zimbraPrefTimeZoneId,type:_OSELECT1_,msgName:ZaMsg.MSG_zimbraPrefTimeZoneId,label:ZaMsg.LBL_zimbraPrefTimeZoneId,labelLocation:_LEFT_,onChange:ZaDomainXFormView.onFormFieldChanged},{ref:ZaDomain.A_zimbraPublicServiceHostname,type:_TEXTFIELD_,label:ZaMsg.Domain_zimbraPublicServiceHostname,width:250,onChange:ZaDomainXFormView.onFormFieldChanged},{ref:ZaDomain.A_zimbraPublicServiceProtocol,type:_OSELECT1_,label:ZaMsg.Domain_zimbraPublicServiceProtocol,choices:ZaDomain.protocolChoices,onChange:ZaDomainXFormView.onFormFieldChanged},{ref:ZaDomain.A_zimbraPublicServicePort,type:_TEXTFIELD_,label:ZaMsg.Domain_zimbraPublicServicePort,width:100,onChange:ZaDomainXFormView.onFormFieldChanged},{type:_DWT_ALERT_,containerCssStyle:"padding-bottom:0;",style:DwtAlert.INFO,iconVisible:true,content:ZaMsg.Domain_InboundSMTPNote,visibilityChecks:[[ZaItem.hasReadPermission,ZaDomain.A_zimbraDNSCheckHostname]],colSpan:"2"},{ref:ZaDomain.A_zimbraDNSCheckHostname,type:_SUPER_TEXTFIELD_,colSpan:2,txtBoxLabel:ZaMsg.Domain_zimbraDNSCheckHostname,onChange:ZaDomainXFormView.onFormFieldChanged,resetToSuperLabel:ZaMsg.NAD_ResetToGlobal},ZaItem.descriptionXFormItem,{ref:ZaDomain.A_domainDefaultCOSId,type:_DYNSELECT_,label:ZaMsg.Domain_DefaultCOS,labelLocation:_LEFT_,inputPreProcessor:ZaDomainXFormView.preProcessCOS,searchByProcessedValue:false,dataFetcherMethod:ZaSearch.prototype.dynSelectSearchCoses,choices:this.cosChoices,dataFetcherClass:ZaSearch,emptyText:ZaMsg.enterSearchTerm,editable:true,autoCompleteEnabled:true,getDisplayValue:function(w){if(ZaItem.ID_PATTERN.test(w)){var v=ZaCos.getCosById(w,this.getForm().parent._app);
if(v){w=v.name
}}if(w==null){w=""
}else{w=""+w
}return w
}},{ref:ZaDomain.A_zimbraDomainStatus,type:_OSELECT1_,msgName:ZaMsg.Domain_zimbraDomainStatus,label:ZaMsg.LBL_zimbraDomainStatus,labelLocation:_LEFT_,choices:ZaDomain.domainStatusChoices,onChange:ZaDomainXFormView.onFormFieldChanged},{ref:ZaDomain.A_notes,type:_TEXTAREA_,label:ZaMsg.NAD_Notes,labelCssStyle:"vertical-align:top;",width:250,onChange:ZaDomainXFormView.onFormFieldChanged},{ref:ZaDomain.A_zimbraHelpAdminURL,type:_TEXTFIELD_,label:ZaMsg.Domain_zimbraHelpAdminURL,width:250,onChange:ZaDomainXFormView.onFormFieldChanged},{ref:ZaDomain.A_zimbraHelpDelegatedURL,type:_TEXTFIELD_,label:ZaMsg.Domain_zimbraHelpDelegatedURL,width:250,onChange:ZaDomainXFormView.onFormFieldChanged}]}];
n.items=r;
q.items.push(n);
if(ZaTabView.isTAB_ENABLED(b,ZaDomainXFormView.GAL_TAB_ATTRS,ZaDomainXFormView.GAL_TAB_RIGHTS)){o=++this.TAB_INDEX;
this.helpMap[o]=[location.pathname,ZaUtil.HELP_URL,"managing_domains/how_to_configure_gal.htm","?locid=",AjxEnv.DEFAULT_LOCALE].join("");
u.choices.push({value:o,label:ZaMsg.Domain_Tab_GAL});
var m={type:_ZATABCASE_,caseKey:o,numCols:1,paddingStyle:"padding-left:15px;",width:"98%",cellpadding:2};
var s=[{type:_ZA_TOP_GROUPER_,label:ZaMsg.Domain_GAL_Configuration,numCols:2,colSizes:["275px","auto"],items:[{type:_DWT_ALERT_,visibilityChangeEventSources:[ZaDomain.A_zimbraDomainStatus],visibilityChecks:[[XForm.checkInstanceValue,ZaDomain.A_zimbraDomainStatus,ZaDomain.DOMAIN_STATUS_SHUTDOWN]],containerCssStyle:"padding-bottom:0;",style:DwtAlert.WARNING,iconVisible:true,content:ZaMsg.Domain_Locked_Note,colSpan:"*"},{ref:ZaDomain.A_zimbraGalMode,type:_OUTPUT_,label:ZaMsg.Domain_GalMode,choices:this.GALModes,visibilityChecks:[ZaItem.hasReadPermission]},{ref:ZaDomain.A_zimbraGalMaxResults,type:_TEXTFIELD_,label:ZaMsg.LBL_zimbraGalMaxResults,msgName:ZaMsg.MSG_zimbraGalMaxResults,autoSaveValue:true,labelLocation:_LEFT_,cssClass:"admin_xform_number_input"}]},{type:_ZA_TOP_GROUPER_,label:ZaMsg.LBL_GALAccount,numCols:2,colSizes:["275px","auto"],visibilityChecks:[[XForm.checkInstanceValueNotEmty,ZaDomain.A2_gal_sync_accounts],[ZaItem.hasReadPermission,ZaDomain.A_zimbraGalAccountId]],items:[{type:_REPEAT_,ref:ZaDomain.A2_gal_sync_accounts,colSpan:"*",label:null,showAddButton:false,showRemoveButton:false,visibilityChecks:[[XForm.checkInstanceValueNotEmty,ZaDomain.A2_gal_sync_accounts],[ZaItem.hasReadPermission,ZaDomain.A_zimbraGalAccountId]],items:[{type:_GROUP_,ref:".",numCols:1,width:"100%",items:[{ref:"name",type:_OUTPUT_,label:ZaMsg.Domain_GalSyncAccount},{ref:("attrs."+ZaDomain.A_mailHost),type:_OUTPUT_,label:ZaMsg.NAD_MailServer,required:true},{ref:(ZaAccount.A2_zimbra_ds+".name"),label:ZaMsg.Domain_InternalGALDSName,type:_OUTPUT_,visibilityChangeEventSources:[ZaDomain.A_zimbraGalMode],visibilityChecks:[ZaNewDomainXWizard.isDomainModeNotExternal,[ZaDomainXFormView.checkGALAccountAttribute,ZaAccount.A2_zimbra_ds,false]]},{ref:(ZaAccount.A2_zimbra_ds+".attrs."+ZaDataSource.A_zimbraDataSourcePollingInterval),type:_LIFETIME_,label:ZaMsg.LBL_zimbraDataSourcePollingInterval_internal,labelLocation:_LEFT_,msgName:ZaMsg.MSG_zimbraDataSourcePollingInterval_internal,visibilityChecks:[ZaNewDomainXWizard.isDomainModeNotExternal,[ZaDomainXFormView.checkGALAccountAttribute,ZaAccount.A2_zimbra_ds,false]]},{ref:(ZaAccount.A2_ldap_ds+".name"),label:ZaMsg.Domain_ExternalGALDSName,type:_OUTPUT_,visibilityChangeEventSources:[ZaDomain.A_zimbraGalMode],visibilityChecks:[ZaNewDomainXWizard.isDomainModeNotInternal,[ZaDomainXFormView.checkGALAccountAttribute,ZaAccount.A2_ldap_ds,false]]},{ref:(ZaAccount.A2_ldap_ds+".attrs."+ZaDataSource.A_zimbraDataSourcePollingInterval),type:_LIFETIME_,label:ZaMsg.LBL_zimbraDataSourcePollingInterval_external,labelLocation:_LEFT_,msgName:ZaMsg.MSG_zimbraDataSourcePollingInterval_external,visibilityChecks:[ZaNewDomainXWizard.isDomainModeNotInternal,[ZaDomainXFormView.checkGALAccountAttribute,ZaAccount.A2_ldap_ds,false]]}]}]},{ref:ZaDomain.A_GALServerType,type:_OUTPUT_,label:ZaMsg.Domain_GALServerType,visibilityChecks:[ZaDomainXFormView.isDomainModeNotInternal],visibilityChangeEventSources:[ZaDomain.A_zimbraGalMode],choices:this.GALServerTypes,labelLocation:_LEFT_},{ref:ZaDomain.A_GalLdapFilter,type:_OUTPUT_,label:ZaMsg.Domain_GalLdapFilter,labelLocation:_LEFT_,visibilityChecks:[[XForm.checkInstanceValue,ZaDomain.A_GALServerType,ZaDomain.GAL_ServerType_ldap],[ZaDomainXFormView.isDomainModeNotInternal]],visibilityChangeEventSources:[ZaDomain.A_GALServerType,ZaDomain.A_zimbraGalMode]},{ref:ZaDomain.A_zimbraGalAutoCompleteLdapFilter,type:_OUTPUT_,label:ZaMsg.Domain_zimbraGalAutoCompleteLdapFilter,labelLocation:_LEFT_,visibilityChecks:[[XForm.checkInstanceValue,ZaDomain.A_GALServerType,ZaDomain.GAL_ServerType_ldap],[ZaDomainXFormView.isDomainModeNotInternal]],visibilityChangeEventSources:[ZaDomain.A_GALServerType,ZaDomain.A_zimbraGalMode]},{ref:ZaDomain.A_GalLdapSearchBase,type:_OUTPUT_,label:ZaMsg.Domain_GalLdapSearchBase,visibilityChecks:[ZaDomainXFormView.isDomainModeNotInternal],visibilityChangeEventSources:[ZaDomain.A_zimbraGalMode],labelLocation:_LEFT_},{ref:ZaDomain.A_GalLdapURL,type:_REPEAT_,label:ZaMsg.LBL_Domain_GalLdapURL,labelLocation:_LEFT_,showAddButton:false,showRemoveButton:false,visibilityChecks:[ZaDomainXFormView.isDomainModeNotInternal],visibilityChangeEventSources:[ZaDomain.A_zimbraGalMode],items:[{type:_OUTPUT_,ref:".",label:null,labelLocation:_NONE_}]},{ref:ZaDomain.A_GalLdapBindDn,type:_OUTPUT_,label:ZaMsg.Domain_GalLdapBindDn,labelLocation:_LEFT_,visibilityChecks:[ZaDomainXFormView.isDomainModeNotInternal],visibilityChangeEventSources:[ZaDomain.A_zimbraGalMode],enableDisableChangeEventSources:[ZaDomain.A_UseBindPassword],enableDisableChecks:[[XForm.checkInstanceValue,ZaDomain.A_UseBindPassword,"TRUE"]]}]}];
m.items=s;
q.items.push(m)
}if(ZaTabView.isTAB_ENABLED(b,ZaDomainXFormView.AUTH_TAB_ATTRS,ZaDomainXFormView.AUTH_TAB_RIGHTS)){o=++this.TAB_INDEX;
this.helpMap[o]=[location.pathname,ZaUtil.HELP_URL,"managing_domains/authentication_settings.htm","?locid=",AjxEnv.DEFAULT_LOCALE].join("");
u.choices.push({value:o,label:ZaMsg.Domain_Tab_Authentication});
var l={type:_ZATABCASE_,caseKey:o,paddingStyle:"padding-left:15px;",width:"98%",cellpadding:2,items:[{type:_DWT_ALERT_,visibilityChangeEventSources:[ZaDomain.A_zimbraDomainStatus],visibilityChecks:[[XForm.checkInstanceValue,ZaDomain.A_zimbraDomainStatus,ZaDomain.DOMAIN_STATUS_SHUTDOWN]],containerCssStyle:"padding-bottom:0;",style:DwtAlert.WARNING,iconVisible:true,content:ZaMsg.Domain_Locked_Note,colSpan:"*"},{type:_ZA_TOP_GROUPER_,label:ZaMsg.Domain_AuthSetting,colSizes:["275px","*"],colSpan:"*",items:[{ref:ZaDomain.A_AuthMech,type:_OUTPUT_,label:ZaMsg.Domain_AuthMech,choices:this.AuthMechs},{type:_GROUP_,useParentTable:true,colSpan:"*",visibilityChecks:[[XForm.checkInstanceValue,ZaDomain.A_AuthMech,ZaDomain.AuthMech_ad]],visibilityChangeEventSources:[ZaDomain.A_AuthMech],items:[{ref:ZaDomain.A_AuthLdapUserDn,type:_OUTPUT_,label:ZaMsg.Domain_AuthLdapUserDn,labelLocation:_LEFT_},{ref:ZaDomain.A_AuthLdapURL,type:_REPEAT_,label:ZaMsg.Domain_AuthLdapURL,labelLocation:_LEFT_,showAddButton:false,showRemoveButton:false,items:[{type:_OUTPUT_,ref:".",label:null,labelLocation:_NONE_}]}]},{type:_GROUP_,useParentTable:true,colSpan:"*",visibilityChecks:[[XForm.checkInstanceValue,ZaDomain.A_AuthMech,ZaDomain.AuthMech_ldap]],visibilityChangeEventSources:[ZaDomain.A_AuthMech],items:[{ref:ZaDomain.A_AuthLdapUserDn,type:_OUTPUT_,label:ZaMsg.Domain_AuthLdapUserDn,labelLocation:_LEFT_},{ref:ZaDomain.A_AuthLdapURL,type:_REPEAT_,label:ZaMsg.Domain_AuthLdapURL,labelLocation:_LEFT_,showAddButton:false,showRemoveButton:false,items:[{type:_OUTPUT_,ref:".",label:null,labelLocation:_NONE_}]},{ref:ZaDomain.A_zimbraAuthLdapStartTlsEnabled,type:_OUTPUT_,label:ZaMsg.Domain_llAuthLdapStartTlsEnabled,labelLocation:_LEFT_,choices:ZaModel.BOOLEAN_CHOICES},{ref:ZaDomain.A_AuthLdapSearchFilter,type:_OUTPUT_,label:ZaMsg.Domain_AuthLdapFilter,labelLocation:_LEFT_},{ref:ZaDomain.A_AuthLdapSearchBase,type:_OUTPUT_,label:ZaMsg.Domain_AuthLdapSearchBase,labelLocation:_LEFT_},{ref:ZaDomain.A_AuthUseBindPassword,type:_OUTPUT_,label:ZaMsg.Domain_AuthUseBindPassword,labelLocation:_LEFT_,choices:ZaModel.BOOLEAN_CHOICES},{ref:ZaDomain.A_AuthLdapSearchBindDn,type:_INPUT_,label:ZaMsg.Domain_AuthLdapBindDn,labelLocation:_LEFT_,visibilityChecks:[[XForm.checkInstanceValue,ZaDomain.A_AuthUseBindPassword,"TRUE"]],visibilityChangeEventSources:[ZaDomain.A_AuthUseBindPassword]}]},{ref:ZaDomain.A_zimbraPasswordChangeListener,type:_TEXTFIELD_,label:ZaMsg.Domain_zimbraPasswordChangeListener,labelLocation:_LEFT_,visibilityChecks:[function(){var v=this.getInstance();
return(v.attrs[ZaDomain.A_AuthMech]!=ZaDomain.AuthMech_zimbra)
}],visibilityChangeEventSources:[ZaDomain.A_AuthMech]},{ref:ZaDomain.A_zimbraAuthFallbackToLocal,type:_CHECKBOX_,label:ZaMsg.Domain_zimbraAuthFallbackToLocal,labelLocation:_RIGHT_,trueValue:"TRUE",falseValue:"FALSE",visibilityChecks:[function(){var v=this.getInstance();
return(v.attrs[ZaDomain.A_AuthMech]!=ZaDomain.AuthMech_zimbra)
}],visibilityChangeEventSources:[ZaDomain.A_AuthMech]}]},{type:_ZA_TOP_GROUPER_,label:ZaMsg.Domain_URLSetting,colSpan:"*",numCols:2,colSizes:["275px","*"],visibilityChecks:[[ZATopGrouper_XFormItem.isGroupVisible,[ZaDomain.A_zimbraAdminConsoleLoginURL,ZaDomain.A_zimbraAdminConsoleLogoutURL]]],items:[{ref:ZaDomain.A_zimbraAdminConsoleLoginURL,type:_TEXTFIELD_,label:ZaMsg.Domain_zimbraAdminConsoleLoginURL,width:250,onChange:ZaDomainXFormView.onFormFieldChanged},{ref:ZaDomain.A_zimbraAdminConsoleLogoutURL,type:_TEXTFIELD_,label:ZaMsg.Domain_zimbraAdminConsoleLogoutURL,width:250,onChange:ZaDomainXFormView.onFormFieldChanged}]},{type:_ZA_TOP_GROUPER_,label:ZaMsg.NAD_WEBCLIENT_Configure,colSpan:"*",visibilityChecks:[[ZATopGrouper_XFormItem.isGroupVisible,[ZaDomain.A_zimbraWebClientLoginURL,ZaDomain.A_zimbraWebClientLogoutURL,ZaDomain.A_zimbraWebClientLoginURLAllowedUA,ZaDomain.A_zimbraWebClientLogoutURLAllowedUA,ZaDomain.A_zimbraWebClientLoginURLAllowedIP,ZaDomain.A_zimbraWebClientLogoutURLAllowedIP,ZaDomain.A_zimbraForceClearCookies]]],items:[{ref:ZaDomain.A_zimbraWebClientLoginURL,useParentTable:false,colSpan:2,type:_SUPER_TEXTFIELD_,textFieldWidth:"220px",resetToSuperLabel:ZaMsg.NAD_ResetToGlobal,msgName:ZaMsg.LBL_zimbraWebClientLoginURL,txtBoxLabel:ZaMsg.LBL_zimbraWebClientLoginURL,onChange:ZaDomainXFormView.onFormFieldChanged},{ref:ZaDomain.A_zimbraWebClientLogoutURL,useParentTable:false,colSpan:2,type:_SUPER_TEXTFIELD_,textFieldWidth:"220px",resetToSuperLabel:ZaMsg.NAD_ResetToGlobal,msgName:ZaMsg.LBL_zimbraWebClientLogoutURL,txtBoxLabel:ZaMsg.LBL_zimbraWebClientLogoutURL,onChange:ZaDomainXFormView.onFormFieldChanged},{ref:ZaDomain.A_zimbraWebClientLoginURLAllowedUA,label:ZaMsg.LBL_zimbraWebClientLoginURLAllowedUA,type:_SUPER_REPEAT_,resetToSuperLabel:ZaMsg.NAD_ResetToGlobal,repeatInstance:"",colSizes:["275px","*"],addButtonLabel:ZaMsg.NAD_Add,removeButtonLabel:ZaMsg.NAD_Remove,showAddButton:true,showRemoveButton:true,showAddOnNextRow:true,repeatItems:[{ref:".",type:_TEXTFIELD_,width:"150px"}],onChange:ZaDomainXFormView.onFormFieldChanged},{ref:ZaDomain.A_zimbraWebClientLogoutURLAllowedUA,label:ZaMsg.LBL_zimbraWebClientLogoutURLAllowedUA,type:_SUPER_REPEAT_,resetToSuperLabel:ZaMsg.NAD_ResetToGlobal,repeatInstance:"",colSizes:["275px","*"],addButtonLabel:ZaMsg.NAD_Add,removeButtonLabel:ZaMsg.NAD_Remove,showAddButton:true,showRemoveButton:true,showAddOnNextRow:true,repeatItems:[{ref:".",type:_TEXTFIELD_,width:"150px"}],onChange:ZaDomainXFormView.onFormFieldChanged},{ref:ZaDomain.A_zimbraWebClientLoginURLAllowedIP,label:ZaMsg.LBL_zimbraWebClientLoginURLAllowedIP,type:_SUPER_REPEAT_,resetToSuperLabel:ZaMsg.NAD_ResetToGlobal,repeatInstance:"",colSizes:["275px","*"],addButtonLabel:ZaMsg.NAD_Add,removeButtonLabel:ZaMsg.NAD_Remove,showAddButton:true,showRemoveButton:true,showAddOnNextRow:true,repeatItems:[{ref:".",type:_TEXTFIELD_,width:"150px"}],onChange:ZaDomainXFormView.onFormFieldChanged},{ref:ZaDomain.A_zimbraWebClientLogoutURLAllowedIP,label:ZaMsg.LBL_zimbraWebClientLogoutURLAllowedIP,type:_SUPER_REPEAT_,resetToSuperLabel:ZaMsg.NAD_ResetToGlobal,repeatInstance:"",colSizes:["275px","*"],addButtonLabel:ZaMsg.NAD_Add,removeButtonLabel:ZaMsg.NAD_Remove,showAddButton:true,showRemoveButton:true,showAddOnNextRow:true,repeatItems:[{ref:".",type:_TEXTFIELD_,width:"150px"}],onChange:ZaDomainXFormView.onFormFieldChanged},{ref:ZaDomain.A_zimbraForceClearCookies,useParentTable:false,colSpan:2,type:_CHECKBOX_,trueValue:"TRUE",falseValue:"FALSE",resetToSuperLabel:ZaMsg.NAD_ResetToGlobal,msgName:ZaMsg.MSG_zimbraForceClearCookies,label:ZaMsg.LBL_zimbraForceClearCookies,labelLocation:_LEFT_,onChange:ZaDomainXFormView.onFormFieldChanged}]}]};
q.items.push(l)
}if(ZaTabView.isTAB_ENABLED(b,ZaDomainXFormView.VH_TAB_ATTRS,ZaDomainXFormView.VH_TAB_RIGHTS)){o=++this.TAB_INDEX;
this.helpMap[o]=[location.pathname,ZaUtil.HELP_URL,"managing_domains/configuring_virtual_hosts.htm","?locid=",AjxEnv.DEFAULT_LOCALE].join("");
u.choices.push({value:o,label:ZaMsg.Domain_Tab_VirtualHost});
var k={type:_ZATABCASE_,caseKey:o,cssStyle:"padding-left:10px;",items:[{type:_DWT_ALERT_,visibilityChangeEventSources:[ZaDomain.A_zimbraDomainStatus],visibilityChecks:[[XForm.checkInstanceValue,ZaDomain.A_zimbraDomainStatus,ZaDomain.DOMAIN_STATUS_SHUTDOWN]],containerCssStyle:"padding-bottom:0;",style:DwtAlert.WARNING,iconVisible:true,content:ZaMsg.Domain_Locked_Note,colSpan:"*"},{type:_DWT_ALERT_,content:null,ref:ZaDomain.A_domainName,getDisplayValue:function(v){return AjxMessageFormat.format(ZaMsg.Domain_VH_Explanation,v)
},colSpan:"*",iconVisible:false,align:_CENTER_,style:DwtAlert.INFORMATION},{ref:ZaDomain.A_zimbraVirtualHostname,type:_REPEAT_,label:null,repeatInstance:"",showAddButton:true,showRemoveButton:true,addButtonLabel:ZaMsg.NAD_AddVirtualHost,showAddOnNextRow:true,removeButtonLabel:ZaMsg.NAD_RemoveVirtualHost,items:[{ref:".",type:_TEXTFIELD_,label:null,enableDisableChecks:[[ZaItem.hasWritePermission,ZaDomain.A_zimbraVirtualHostname]],visibilityChecks:[[ZaItem.hasReadPermission,ZaDomain.A_zimbraVirtualHostname]],onChange:ZaDomainXFormView.onFormFieldChanged}]}]};
q.items.push(k)
}if(ZaDomainXFormView.Feature_TAB_ATTRS&&ZaTabView.isTAB_ENABLED(b,ZaDomainXFormView.Feature_TAB_ATTRS,ZaDomainXFormView.Feature_TAB_RIGHTS)){o=++this.TAB_INDEX;
this.helpMap[o]=[location.pathname,ZaUtil.HELP_URL,"setting_up_sms_reminders_feature.htm","?locid=",AjxEnv.DEFAULT_LOCALE].join("");
u.choices.push({value:o,label:ZaMsg.TABT_Features});
var g={type:_ZATABCASE_,caseKey:o,cssStyle:"padding-left:10px;",items:[{type:_ZA_TOP_GROUPER_,label:ZaMsg.NAD_zimbraCalendarFeature,items:[{ref:ZaDomain.A_zimbraFeatureCalendarReminderDeviceEmailEnabled,type:_CHECKBOX_,labelLocation:_RIGHT_,msgName:ZaMsg.LBL_zimbraFeatureCalendarReminderDeviceEmailEnabled,label:ZaMsg.LBL_zimbraFeatureCalendarReminderDeviceEmailEnabled,trueValue:"TRUE",falseValue:"FALSE"}]}]};
q.items.push(g)
}if(ZaDomainXFormView.ADV_TAB_ATTRS&&ZaTabView.isTAB_ENABLED(b,ZaDomainXFormView.ADV_TAB_ATTRS,ZaDomainXFormView.ADV_TAB_RIGHTS)){o=++this.TAB_INDEX;
this.helpMap[o]=[location.pathname,ZaUtil.HELP_URL,"managing_global_settings/account_email_validation.htm","?locid=",AjxEnv.DEFAULT_LOCALE].join("");
u.choices.push({value:o,label:ZaMsg.Domain_Tab_Advanced});
var h={type:_ZATABCASE_,caseKey:o,colSizes:["auto"],numCols:1,id:"domain_advanced_tab",cssStyle:"padding-left:10px;",items:[{type:_DWT_ALERT_,visibilityChangeEventSources:[ZaDomain.A_zimbraDomainStatus],visibilityChecks:[[XForm.checkInstanceValue,ZaDomain.A_zimbraDomainStatus,ZaDomain.DOMAIN_STATUS_SHUTDOWN]],containerCssStyle:"padding-bottom:0;",style:DwtAlert.WARNING,iconVisible:true,content:ZaMsg.Domain_Locked_Note,colSpan:"*"},{type:_ZA_TOP_GROUPER_,label:ZaMsg.Domain_BC_ShareConf,visibilityChecks:[[ZATopGrouper_XFormItem.isGroupVisible,ZaDomain.A_zimbraBasicAuthRealm]],items:[{ref:ZaDomain.A_zimbraBasicAuthRealm,type:_SUPER_TEXTFIELD_,width:250,resetToSuperLabel:ZaMsg.NAD_ResetToGlobal,onChange:ZaDomainXFormView.onFormFieldChanged,txtBoxLabel:ZaMsg.Domain_zimbraBasicAuthRealm}]},{type:_ZA_TOP_GROUPER_,label:ZaMsg.Domain_AD_EmailValidate,visibilityChecks:[[ZATopGrouper_XFormItem.isGroupVisible,ZaDomain.A_zimbraMailAddressValidationRegex]],items:[{ref:ZaDomain.A_zimbraMailAddressValidationRegex,type:_REPEAT_,nowrap:false,labelWrap:true,label:ZaMsg.LBL_EmailValidate,repeatInstance:"",showAddButton:true,showRemoveButton:true,addButtonLabel:ZaMsg.NAD_AddRegex,showAddOnNextRow:true,removeButtonLabel:ZaMsg.NAD_RemoveRegex,items:[{ref:".",type:_TEXTFIELD_,label:null,enableDisableChecks:[],visibilityChecks:[],onChange:ZaDomainXFormView.onFormFieldChanged}]}]},{type:_ZA_TOP_GROUPER_,label:ZaMsg.Domain_QUOTA_Configuration,visibilityChecks:[[ZATopGrouper_XFormItem.isGroupVisible,[ZaDomain.A_zimbraMailDomainQuota,ZaDomain.A_zimbraDomainAggregateQuota,ZaDomain.A_zimbraDomainAggregateQuotaWarnPercent,ZaDomain.A_zimbraDomainAggregateQuotaWarnEmailRecipient,ZaDomain.A_zimbraDomainAggregateQuotaPolicy]]],items:[{ref:ZaDomain.A_zimbraMailDomainQuota,type:_TEXTFIELD_,label:ZaMsg.LBL_DomainQuota,onChange:ZaDomainXFormView.onFormFieldChanged},{ref:ZaDomain.A_zimbraDomainAggregateQuota,type:_TEXTFIELD_,label:ZaMsg.LBL_DomainAggregateQuota,onChange:ZaDomainXFormView.onFormFieldChanged},{ref:ZaDomain.A_zimbraDomainAggregateQuotaWarnPercent,type:_TEXTFIELD_,label:ZaMsg.LBL_DomainAggregateQuotaWarnPercent,onChange:ZaDomainXFormView.onFormFieldChanged},{ref:ZaDomain.A_zimbraDomainAggregateQuotaWarnEmailRecipient,type:_TEXTFIELD_,label:ZaMsg.LBL_DomainAggregateQuotaWarnEmailRecipient,onChange:ZaDomainXFormView.onFormFieldChanged},{ref:ZaDomain.A_zimbraDomainAggregateQuotaPolicy,type:_OSELECT1_,label:ZaMsg.LBL_DomainAggregateQuotaPolicy,labelLocation:_LEFT_,onChange:ZaDomainXFormView.onFormFieldChanged}]},{type:_ZA_TOP_GROUPER_,id:"domain_admin_sieve",label:ZaMsg.NAD_AdminSieveGrouper,items:[{type:_DWT_ALERT_,containerCssStyle:"padding-bottom:0;",style:DwtAlert.INFO,iconVisible:false,content:ZaMsg.Alert_Sieve},{ref:ZaDomain.A_zimbraSieveRejectMailEnabled,type:_CHECKBOX_,label:ZaMsg.LBL_zimbraSieveRejectMailEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaDomain.A_zimbraSieveEditHeaderEnabled,type:_CHECKBOX_,label:ZaMsg.LBL_zimbraSieveEditHeaderEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaDomain.A_zimbraAdminSieveScriptBefore,type:_TEXTAREA_,label:ZaMsg.LBL_zimbraAdminSieveScriptBefore,labelLocation:_LEFT_,labelCssStyle:"vertical-align:top;",width:"30em"},{ref:ZaDomain.A_zimbraAdminSieveScriptAfter,type:_TEXTAREA_,label:ZaMsg.LBL_zimbraAdminSieveScriptAfter,labelLocation:_LEFT_,labelCssStyle:"vertical-align:top;",width:"30em"}]},{type:_SPACER_,height:"10px"}]};
q.items.push(h)
}if(ZaTabView.isTAB_ENABLED(b,ZaDomainXFormView.INTEROP_TAB_ATTRS,ZaDomainXFormView.INTEROP_TAB_RIGHTS)){o=++this.TAB_INDEX;
this.helpMap[o]=[location.pathname,ZaUtil.HELP_URL,"managing_global_settings/making_free_busy_view__available_.htm","?locid=",AjxEnv.DEFAULT_LOCALE].join("");
u.choices.push({value:o,label:ZaMsg.TABT_Interop});
var f={type:_ZATABCASE_,caseKey:o,colSizes:["auto"],numCols:1,id:"global_interop_tab",paddingStyle:"padding-left:15px;",width:"98%",cellpadding:2,items:[{type:_ZA_TOP_GROUPER_,label:ZaMsg.NAD_Exchange_Settings,colSizes:["275px","100%"],items:[{ref:ZaDomain.A_zimbraFreebusyExchangeURL,type:_SUPER_TEXTFIELD_,width:"30em",resetToSuperLabel:ZaMsg.NAD_ResetToGlobal,onChange:ZaDomainXFormView.onFormFieldChanged,txtBoxLabel:ZaMsg.NAD_Exchange_URL},{ref:ZaDomain.A_zimbraFreebusyExchangeAuthScheme,label:ZaMsg.NAD_Exchange_Auth_Schema,type:_SUPER_SELECT1_,resetToSuperLabel:ZaMsg.NAD_ResetToGlobal,onChange:ZaDomainXFormView.onFormFieldChanged},{ref:ZaDomain.A_zimbraFreebusyExchangeServerType,label:ZaMsg.NAD_Exchange_Server_Type,type:_SUPER_SELECT1_,resetToSuperLabel:ZaMsg.NAD_ResetToGlobal,onChange:ZaDomainXFormView.onFormFieldChanged},{ref:ZaDomain.A_zimbraFreebusyExchangeAuthUsername,resetToSuperLabel:ZaMsg.NAD_ResetToGlobal,type:_SUPER_TEXTFIELD_,width:"20em",txtBoxLabel:ZaMsg.NAD_Exchange_Auth_User,onChange:ZaDomainXFormView.onFormFieldChanged},{ref:ZaDomain.A_zimbraFreebusyExchangeAuthPassword,type:_PASSWORD_,label:ZaMsg.NAD_Exchange_Auth_Password,width:"20em",onChange:ZaDomainXFormView.onFormFieldChanged},{ref:ZaDomain.A_zimbraFreebusyExchangeUserOrg,type:_SUPER_TEXTFIELD_,resetToSuperLabel:ZaMsg.NAD_ResetToGlobal,txtBoxLabel:ZaMsg.LBL_zimbraFreebusyExchangeUserOrg,width:"30em",onChange:ZaDomainXFormView.onFormFieldChanged},{type:_GROUP_,colSpan:2,numCols:5,colSizes:["20%","22%","6%","22%","20%"],width:"100%",items:[{type:_CELLSPACER_},{type:_DWT_BUTTON_,label:ZaMsg.Check_Settings,autoPadding:false,onActivate:ZaItem.checkInteropSettings},{type:_CELLSPACER_},{type:_DWT_BUTTON_,label:ZaMsg.Clear_Settings,autoPadding:false,onActivate:ZaItem.clearInteropSettings},{type:_CELLSPACER_}]}]}]};
q.items.push(f)
}if(ZaTabView.isTAB_ENABLED(b,ZaDomainXFormView.ZIMLETS_TAB_ATTRS,ZaDomainXFormView.ZIMLETS_TAB_RIGHTS)){o=++this.TAB_INDEX;
this.helpMap[o]=[location.pathname,ZaUtil.HELP_URL,"zimlets/about_zimlets.htm","?locid=",AjxEnv.DEFAULT_LOCALE].join("");
u.choices.push({value:o,label:ZaMsg.TABT_Zimlets});
var e={type:_ZATABCASE_,id:"account_form_zimlets_tab",numCols:1,caseKey:o,items:[{type:_ZAGROUP_,numCols:1,colSizes:["auto"],border:0,items:[{type:_OUTPUT_,value:ZaMsg.NAD_LimitZimletsToDomain},{type:_ZA_ZIMLET_SELECT_COMBO_,selectRef:ZaDomain.A_zimbraZimletDomainAvailableZimlets,ref:ZaDomain.A_zimbraZimletDomainAvailableZimlets,choices:ZaDomainXFormView.zimletChoices},{type:_DWT_ALERT_,containerCssStyle:"padding-bottom:0;",style:DwtAlert.INFO,iconVisible:false,content:ZaMsg.Zimlet_Note}]}]};
q.items.push(e)
}if(ZaTabView.isTAB_ENABLED(b,ZaDomainXFormView.SKIN_TAB_ATTRS,ZaDomainXFormView.SKIN_TAB_RIGHTS)){o=++this.TAB_INDEX;
this.helpMap[o]=[location.pathname,ZaUtil.HELP_URL,"managing_domains/managing_domains.htm","?locid=",AjxEnv.DEFAULT_LOCALE].join("");
u.choices.push({value:o,label:ZaMsg.TABT_Themes});
var d={type:_ZATABCASE_,id:"domain_form_skin_tab",colSizes:["auto"],numCols:1,paddingStyle:"padding-left:15px;",width:"98%",cellpadding:2,caseKey:o,items:[{type:_ZA_TOP_GROUPER_,label:ZaMsg.NAD_Skin_Color_Settings,colSizes:["275px","*"],items:[{type:_DWT_ALERT_,style:DwtAlert.INFO,iconVisible:true,content:ZaMsg.Domain_Chameleon_Note,colSpan:2,visibilityChecks:[],ref:null},{ref:ZaDomain.A_zimbraSkinForegroundColor,type:_SUPER_DWT_COLORPICKER_,label:ZaMsg.NAD_zimbraSkinForegroundColor,labelLocation:_LEFT_,resetToSuperLabel:ZaMsg.NAD_ResetToGlobal,buttonImage:"Color",width:"50px"},{ref:ZaDomain.A_zimbraSkinBackgroundColor,type:_SUPER_DWT_COLORPICKER_,label:ZaMsg.NAD_zimbraSkinBackgroundColor,labelLocation:_LEFT_,resetToSuperLabel:ZaMsg.NAD_ResetToGlobal,buttonImage:"Color",width:"50px"},{ref:ZaDomain.A_zimbraSkinSecondaryColor,type:_SUPER_DWT_COLORPICKER_,resetToSuperLabel:ZaMsg.NAD_ResetToGlobal,label:ZaMsg.NAD_zimbraSkinSecondaryColor,labelLocation:_LEFT_,buttonImage:"Color",width:"50px"},{ref:ZaDomain.A_zimbraSkinSelectionColor,type:_SUPER_DWT_COLORPICKER_,label:ZaMsg.NAD_zimbraSkinSelectionColor,labelLocation:_LEFT_,resetToSuperLabel:ZaMsg.NAD_ResetToGlobal,buttonImage:"Color",width:"50px"},{type:_GROUP_,colSpan:2,cssStyle:"margin-top: 10px; margin-left: 200px; width: 200px;",items:[{type:_DWT_BUTTON_,label:ZaMsg.bt_ResetAllSkinColor,onActivate:ZaDomainXFormView.resetAllColorThemes}]}]}]};
q.items.push(d)
}if(ZaTabView.isTAB_ENABLED(b,ZaDomainXFormView.CERT_TAB_ATTRS,ZaDomainXFormView.CERT_TAB_RIGHTS)){o=++this.TAB_INDEX;
this.helpMap[o]=[location.pathname,ZaUtil.HELP_URL,"managing_domains/installing_ssl_certificate_for_a_domain.htm","?locid=",AjxEnv.DEFAULT_LOCALE].join("");
u.choices.push({value:o,label:ZaMsg.TABT_Certificate});
var c={type:_ZATABCASE_,numCols:1,caseKey:o,colSizes:["100%"],id:"domain_form_cert_tab",items:[{type:_DWT_ALERT_,containerCssStyle:"padding-bottom:0;",style:DwtAlert.WARNING,iconVisible:true,content:ZaMsg.MSG_DOMAIN_CERT_KEY},{type:_SPACER_,height:"10"},{type:_GROUP_,width:"100%",numCols:2,colSizes:["50%","50%"],items:[{type:_SPACER_,height:"10"},{type:_ZALEFT_GROUPER_,numCols:1,width:"100%",label:ZaMsg.NAD_DomainSSLCertificate,containerCssStyle:"padding-top:5px;",items:[{ref:ZaDomain.A_zimbraSSLCertificate,type:_TEXTAREA_,width:"100%",height:450,onChange:ZaDomainXFormView.onFormFieldChanged}]},{type:_ZARIGHT_GROUPER_,numCols:1,width:"100%",label:ZaMsg.NAD_DomainSSLPrivateKey,containerCssStyle:"padding-top:5px;",items:[{ref:ZaDomain.A_zimbraSSLPrivateKey,type:_TEXTAREA_,width:"100%",height:450,onChange:ZaDomainXFormView.onFormFieldChanged}]}]}]};
q.items.push(c)
}if(ZaTabView.isTAB_ENABLED(b,ZaDomainXFormView.ACCOUNT_QUOTA_TAB_ATTRS,ZaDomainXFormView.ACCOUNT_QUOTA_TAB_RIGHTS)){o=++this.TAB_INDEX;
this.helpMap[o]=[location.pathname,ZaUtil.HELP_URL,"managing_servers/viewing_mailbox_quotas.htm","?locid=",AjxEnv.DEFAULT_LOCALE].join("");
u.choices.push({value:o,label:ZaMsg.TABT_MBX});
var p={type:_SUPER_TABCASE_,numCols:1,caseKey:o,colSizes:["100%"],paddingStyle:"padding: 0px",width:"100%",getCustomPaddingStyle:"return 0",loadDataMethods:[ZaDomainXFormView.getUserQuota],items:[{type:_DWT_LIST_,id:"accountQuota",ref:ZaDomain.A2_domain_account_quota,forceUpdate:true,cssStyle:"height:100%",cssClass:"DLSource",widgetClass:ZaDomainAccountQuotaListView,hideHeader:false,getCustomWidth:ZaDomainXFormView.getCustomWidth,getCustomHeight:ZaDomainXFormView.getCustomHeight}]};
q.items.push(p)
}t.items.push(u);
t.items.push(q);
this.tabChoices=u.choices
};
ZaTabView.XFormModifiers.ZaDomainXFormView.push(ZaDomainXFormView.myXFormModifier);
ZaDomainXFormView.prototype.getTabChoices=function(){return this.tabChoices
};
ZaAccMiniListView=function(e,d,c,b){if(arguments.length==0){return
}ZaListView.call(this,e,d,c,b);
this.hideHeader=true
};
ZaAccMiniListView.prototype=new ZaListView;
ZaAccMiniListView.prototype.constructor=ZaAccMiniListView;
ZaAccMiniListView.prototype.toString=function(){return"ZaAccMiniListView"
};
ZaAccMiniListView.prototype.createHeaderHtml=function(b){if(!this.hideHeader){DwtListView.prototype.createHeaderHtml.call(this,b)
}};
ZaDomainCOSMaxAccountsListView=function(e,d,c,b){if(arguments.length==0){return
}ZaListView.call(this,e,d,c,b);
this.hideHeader=true;
this._app=this.parent.parent._app
};
ZaDomainCOSMaxAccountsListView.prototype=new ZaListView;
ZaDomainCOSMaxAccountsListView.prototype.constructor=ZaDomainCOSMaxAccountsListView;
ZaDomainCOSMaxAccountsListView.prototype.toString=function(){return"ZaDomainCOSMaxAccountsListView"
};
ZaDomainCOSMaxAccountsListView.prototype.createHeaderHtml=function(b){if(!this.hideHeader){DwtListView.prototype.createHeaderHtml.call(this,b)
}};
ZaDomainCOSMaxAccountsListView.prototype._createItemHtml=function(k){var d=new Array(50);
var c=document.createElement("div");
c[DwtListView._STYLE_CLASS]="Row";
c[DwtListView._SELECTED_STYLE_CLASS]=c[DwtListView._STYLE_CLASS]+"-"+DwtCssStyle.SELECTED;
c.className=c[DwtListView._STYLE_CLASS];
this.associateItemWithElement(k,c,DwtListView.TYPE_LIST_ITEM);
var g=k.split(":");
var f=g[0];
var j=ZaCos.getCosById(f);
var e;
if(j){e=j.name
}else{e=AjxMessageFormat.format(ZaMsg.ERROR_INVALID_COS_VALUE,[f])
}var b=g[1];
var h=0;
d[h++]="<table width='100%' cellspacing='2' cellpadding='0'>";
d[h++]="<tr>";
d[h++]="<td width="+this._headerList[0]._width+">";
d[h++]=AjxStringUtil.htmlEncode(e);
d[h++]="</td>";
d[h++]="<td align='left' width="+this._headerList[1]._width+"><nobr>";
d[h++]=AjxStringUtil.htmlEncode(b);
d[h++]="</nobr></td>";
d[h++]="</tr></table>";
c.innerHTML=d.join("");
return c
};
ZaDomainCOSMaxAccountsListView.prototype._setNoResultsHtml=function(){var b=new AjxBuffer();
var c=document.createElement("div");
b.append("<table width='100%' cellspacing='0' cellpadding='1'>","<tr><td class='NoResults'><br />",ZaMsg.NO_LIMITS,"</td></tr></table>");
c.innerHTML=b.toString();
this._addRow(c)
};
ZaDomainFeatureMaxAccountsListView=function(e,d,c,b){if(arguments.length==0){return
}ZaListView.call(this,e,d,c,b);
this.hideHeader=true;
this._app=this.parent.parent._app
};
ZaDomainFeatureMaxAccountsListView.prototype=new ZaListView;
ZaDomainFeatureMaxAccountsListView.prototype.constructor=ZaDomainFeatureMaxAccountsListView;
ZaDomainFeatureMaxAccountsListView.prototype.toString=function(){return"ZaDomainFeatureMaxAccountsListView"
};
ZaDomainFeatureMaxAccountsListView.prototype.createHeaderHtml=function(b){if(!this.hideHeader){DwtListView.prototype.createHeaderHtml.call(this,b)
}};
ZaDomainFeatureMaxAccountsListView.prototype._createItemHtml=function(g){var e=new Array(50);
var h=document.createElement("div");
h[DwtListView._STYLE_CLASS]="Row";
h[DwtListView._SELECTED_STYLE_CLASS]=h[DwtListView._STYLE_CLASS]+"-"+DwtCssStyle.SELECTED;
h.className=h[DwtListView._STYLE_CLASS];
this.associateItemWithElement(g,h,DwtListView.TYPE_LIST_ITEM);
var f=g.split(":");
var d=ZaUtil.getListItemLabel(ZaCos.MAJOR_FEATURES_CHOICES,f[0])||f[0];
var c=f[1];
var b=0;
e[b++]="<table width='100%' cellspacing='2' cellpadding='0'>";
e[b++]="<tr>";
e[b++]="<td width="+this._headerList[0]._width+">";
e[b++]=AjxStringUtil.htmlEncode(d);
e[b++]="</td>";
e[b++]="<td align='left' width="+this._headerList[1]._width+"><nobr>";
e[b++]=AjxStringUtil.htmlEncode(c);
e[b++]="</nobr></td>";
e[b++]="</tr></table>";
h.innerHTML=e.join("");
return h
};
ZaDomainFeatureMaxAccountsListView.prototype._setNoResultsHtml=function(){var b=new AjxBuffer();
var c=document.createElement("div");
b.append("<table width='100%' cellspacing='0' cellpadding='1'>","<tr><td class='NoResults'><br />",ZaMsg.NO_LIMITS,"</td></tr></table>");
c.innerHTML=b.toString();
this._addRow(c)
}
}if(AjxPackage.define("zimbraAdmin.domains.view.ZaNewDomainXWizard")){ZaNewDomainXWizard=function(b,c){ZaXWizardDialog.call(this,b,null,ZaMsg.NDD_Title,"700px","350px","ZaNewDomainXWizard",null,ZaId.DLG_NEW_DOMAIN);
this.TAB_INDEX=0;
ZaNewDomainXWizard.GENERAL_STEP=++this.TAB_INDEX;
ZaNewDomainXWizard.GALMODE_STEP=++this.TAB_INDEX;
ZaNewDomainXWizard.GAL_CONFIG_STEP_2=++this.TAB_INDEX;
ZaNewDomainXWizard.GAL_SYNC_CONFIG_STEP_1=++this.TAB_INDEX;
ZaNewDomainXWizard.GAL_SYNC_CONFIG_STEP_2=++this.TAB_INDEX;
ZaNewDomainXWizard.GAL_CONFIG_SUM_STEP=++this.TAB_INDEX;
ZaNewDomainXWizard.GAL_TEST_RESULT_STEP=++this.TAB_INDEX;
ZaNewDomainXWizard.SYNC_CONFIG_SUM_STEP=++this.TAB_INDEX;
ZaNewDomainXWizard.SYNC_TEST_RESULT_STEP=++this.TAB_INDEX;
ZaNewDomainXWizard.AUTH_URL_STEP=++this.TAB_INDEX;
ZaNewDomainXWizard.AUTH_MODE_STEP=++this.TAB_INDEX;
ZaNewDomainXWizard.AUTH_CONFIG_STEP_2=++this.TAB_INDEX;
ZaNewDomainXWizard.AUTH_CONFIG_SUM_STEP=++this.TAB_INDEX;
ZaNewDomainXWizard.AUTH_TEST_RESULT_STEP=++this.TAB_INDEX;
ZaNewDomainXWizard.VHOST_STEP=++this.TAB_INDEX;
ZaNewDomainXWizard.ADVANCED_STEP=++this.TAB_INDEX;
ZaNewDomainXWizard.FEATURE_STEP=++this.TAB_INDEX;
ZaNewDomainXWizard.CONFIG_COMPLETE_STEP=++this.TAB_INDEX;
this.stepChoices=[{label:ZaMsg.TABT_GeneralPage,value:ZaNewDomainXWizard.GENERAL_STEP},{label:ZaMsg.GALConfiguration,value:ZaNewDomainXWizard.GALMODE_STEP},{label:ZaMsg.GALDnConfiguration,value:ZaNewDomainXWizard.GAL_CONFIG_STEP_2},{label:ZaMsg.GALSyncConfiguration,value:ZaNewDomainXWizard.GAL_SYNC_CONFIG_STEP_1},{label:ZaMsg.GALSyncDnConfiguration,value:ZaNewDomainXWizard.GAL_SYNC_CONFIG_STEP_2},{label:ZaMsg.GALConfigSummary,value:ZaNewDomainXWizard.GAL_CONFIG_SUM_STEP},{label:ZaMsg.GalTestResult,value:ZaNewDomainXWizard.GAL_TEST_RESULT_STEP},{label:ZaMsg.SyncConfigSummary,value:ZaNewDomainXWizard.SYNC_CONFIG_SUM_STEP},{label:ZaMsg.SyncTestResult,value:ZaNewDomainXWizard.SYNC_TEST_RESULT_STEP},{label:ZaMsg.DomainSSO,value:ZaNewDomainXWizard.AUTH_URL_STEP},{label:ZaMsg.AuthMode,value:ZaNewDomainXWizard.AUTH_MODE_STEP},{label:ZaMsg.AuthSettings,value:ZaNewDomainXWizard.AUTH_CONFIG_STEP_2},{label:ZaMsg.AuthSettingsSummary,value:ZaNewDomainXWizard.AUTH_CONFIG_SUM_STEP},{label:ZaMsg.AuthTestResult,value:ZaNewDomainXWizard.AUTH_TEST_RESULT_STEP},{label:ZaMsg.Domain_Tab_VirtualHost,value:ZaNewDomainXWizard.VHOST_STEP},{label:ZaMsg.Domain_Tab_Advanced,value:ZaNewDomainXWizard.ADVANCED_STEP},{label:ZaMsg.TABT_Feature,value:ZaNewDomainXWizard.FEATURE_STEP},{label:ZaMsg.DomainConfigComplete,value:ZaNewDomainXWizard.CONFIG_COMPLETE_STEP}];
this.GALModes=[{label:ZaMsg.GALMode_internal,value:ZaDomain.GAL_Mode_internal},{label:ZaMsg.GALMode_external,value:ZaDomain.GAL_Mode_external},{label:ZaMsg.GALMode_both,value:ZaDomain.GAL_Mode_both}];
this.GALServerTypes=[{label:ZaMsg.GALServerType_ldap,value:ZaDomain.GAL_ServerType_ldap},{label:ZaMsg.GALServerType_ad,value:ZaDomain.GAL_ServerType_ad}];
this.AuthMechs=[{label:ZaMsg.AuthMech_zimbra,value:ZaDomain.AuthMech_zimbra},{label:ZaMsg.AuthMech_ldap,value:ZaDomain.AuthMech_ldap},{label:ZaMsg.AuthMech_ad,value:ZaDomain.AuthMech_ad}];
this.TestResultChoices=[{label:ZaMsg.AuthTest_check_OK,value:ZaDomain.Check_OK},{label:ZaMsg.AuthTest_check_UNKNOWN_HOST,value:ZaDomain.Check_UNKNOWN_HOST},{label:ZaMsg.AuthTest_check_CONNECTION_REFUSED,value:ZaDomain.Check_CONNECTION_REFUSED},{label:ZaMsg.AuthTest_check_SSL_HANDSHAKE_FAILURE,value:ZaDomain.Check_SSL_HANDSHAKE_FAILURE},{label:ZaMsg.AuthTest_check_COMMUNICATION_FAILURE,value:ZaDomain.Check_COMMUNICATION_FAILURE},{label:ZaMsg.AuthTest_check_AUTH_FAILED,value:ZaDomain.Check_AUTH_FAILED},{label:ZaMsg.AuthTest_check_AUTH_NOT_SUPPORTED,value:ZaDomain.Check_AUTH_NOT_SUPPORTED},{label:ZaMsg.AuthTest_check_NAME_NOT_FOUND,value:ZaDomain.Check_NAME_NOT_FOUND},{label:ZaMsg.AuthTest_check_INVALID_SEARCH_FILTER,value:ZaDomain.Check_INVALID_SEARCH_FILTER},{label:ZaMsg.AuthTest_check_FAILURE,value:ZaDomain.Check_FAILURE}];
this.initForm(ZaDomain.myXModel,this.getMyXForm(c),null);
this._localXForm.addListener(DwtEvent.XFORMS_FORM_DIRTY_CHANGE,new AjxListener(this,ZaNewDomainXWizard.prototype.handleXFormChange));
this._localXForm.addListener(DwtEvent.XFORMS_VALUE_ERROR,new AjxListener(this,ZaNewDomainXWizard.prototype.handleXFormChange));
this._localXForm.addListener(DwtEvent.XFORMS_VALUE_CHANGED,new AjxListener(this,ZaNewDomainXWizard.prototype.handleXFormChange));
this.lastErrorStep=0;
this._helpURL=location.pathname+ZaUtil.HELP_URL+"managing_domains/creating_a_domain.htm?locid="+AjxEnv.DEFAULT_LOCALE
};
ZaNewDomainXWizard.prototype=new ZaXWizardDialog;
ZaNewDomainXWizard.prototype.constructor=ZaNewDomainXWizard;
ZaXDialog.XFormModifiers.ZaNewDomainXWizard=new Array();
ZaNewDomainXWizard.prototype.handleXFormChange=function(){if(this._localXForm.hasErrors()){if(this.lastErrorStep<this._containedObject[ZaModel.currentStep]){this.lastErrorStep=this._containedObject[ZaModel.currentStep]
}}else{this.lastErrorStep=0
}this.changeButtonStateForStep(this._containedObject[ZaModel.currentStep])
};
ZaNewDomainXWizard.prototype.changeButtonStateForStep=function(b){if(this.lastErrorStep==b){this._button[DwtWizardDialog.FINISH_BUTTON].setEnabled(false);
this._button[DwtWizardDialog.NEXT_BUTTON].setEnabled(false);
if(b>ZaNewDomainXWizard.GENERAL_STEP){this._button[DwtWizardDialog.PREV_BUTTON].setEnabled(true)
}}else{if(b==ZaNewDomainXWizard.GENERAL_STEP){if(this._containedObject.attrs[ZaDomain.A_domainName]){this._button[DwtWizardDialog.NEXT_BUTTON].setEnabled(true)
}else{this._button[DwtWizardDialog.NEXT_BUTTON].setEnabled(false)
}this._button[DwtWizardDialog.PREV_BUTTON].setEnabled(false);
this._button[DwtWizardDialog.FINISH_BUTTON].setEnabled(true)
}else{if(b==ZaNewDomainXWizard.GALMODE_STEP){this._button[DwtWizardDialog.PREV_BUTTON].setEnabled(true);
if(this.checkGALAccount()){this._button[DwtWizardDialog.NEXT_BUTTON].setEnabled(true)
}else{this._button[DwtWizardDialog.NEXT_BUTTON].setEnabled(false)
}this._button[DwtWizardDialog.FINISH_BUTTON].setEnabled(true)
}else{if(b==ZaNewDomainXWizard.GAL_CONFIG_SUM_STEP){this._button[DwtWizardDialog.PREV_BUTTON].setEnabled(true);
this._button[DwtWizardDialog.NEXT_BUTTON].setEnabled(true);
this._button[DwtWizardDialog.FINISH_BUTTON].setEnabled(true)
}else{if(b==ZaNewDomainXWizard.AUTH_TEST_STEP){this._button[DwtWizardDialog.NEXT_BUTTON].setText(AjxMsg._next);
this._button[DwtWizardDialog.NEXT_BUTTON].setEnabled(false);
this._button[DwtWizardDialog.PREV_BUTTON].setEnabled(false);
this._button[DwtWizardDialog.FINISH_BUTTON].setEnabled(false)
}else{if(b==ZaNewDomainXWizard.CONFIG_COMPLETE_STEP){this._button[DwtWizardDialog.PREV_BUTTON].setEnabled(true);
this._button[DwtWizardDialog.NEXT_BUTTON].setEnabled(false)
}else{this._button[DwtWizardDialog.PREV_BUTTON].setEnabled(true);
this._button[DwtWizardDialog.NEXT_BUTTON].setEnabled(true)
}}}}}}if(this._containedObject.attrs[ZaDomain.A_domainName]&&this._containedObject.attrs[ZaDomain.A_domainName].length>0&&this.lastErrorStep!=b&&this.checkGALAccount()){this._button[DwtWizardDialog.FINISH_BUTTON].setEnabled(true)
}else{this._button[DwtWizardDialog.FINISH_BUTTON].setEnabled(false)
}};
ZaNewDomainXWizard.prototype.setObject=function(d){this._containedObject=new Object();
this._containedObject.attrs=new Object();
for(var b in d.attrs){this._containedObject.attrs[b]=d.attrs[b]
}this._containedObject.attrs[ZaDomain.A_zimbraDomainStatus]=ZaDomain.DOMAIN_STATUS_ACTIVE;
this._containedObject[ZaDomain.A2_isTestingGAL]=d[ZaDomain.A2_isTestingGAL]||0;
this._containedObject[ZaDomain.A2_isTestingSync]=d[ZaDomain.A2_isTestingSync]||0;
this._containedObject[ZaDomain.A2_isTestingAuth]=d[ZaDomain.A2_isTestingAuth]||0;
this._containedObject[ZaDomain.A2_create_gal_acc]=d[ZaDomain.A2_create_gal_acc]||"TRUE";
this._containedObject[ZaDomain.A2_gal_sync_accounts_set]=[];
for(var c in d[ZaDomain.A2_gal_sync_accounts_set]){if(d[ZaDomain.A2_gal_sync_accounts_set][c]){this._containedObject[ZaDomain.A2_gal_sync_accounts_set][c]={};
this._containedObject[ZaDomain.A2_gal_sync_accounts_set][c][ZaDomain.A2_new_gal_sync_account_name]=d[ZaDomain.A2_gal_sync_accounts_set][c][ZaDomain.A2_new_gal_sync_account_name];
this._containedObject[ZaDomain.A2_gal_sync_accounts_set][c][ZaDomain.A2_new_internal_gal_ds_name]=d[ZaDomain.A2_gal_sync_accounts_set][c][ZaDomain.A2_new_internal_gal_ds_name];
this._containedObject[ZaDomain.A2_gal_sync_accounts_set][c][ZaDomain.A2_new_external_gal_ds_name]=d[ZaDomain.A2_gal_sync_accounts_set][c][ZaDomain.A2_new_external_gal_ds_name];
this._containedObject[ZaDomain.A2_gal_sync_accounts_set][c][ZaDomain.A2_new_internal_gal_polling_interval]=d[ZaDomain.A2_gal_sync_accounts_set][c][ZaDomain.A2_new_internal_gal_polling_interval]||"1d";
this._containedObject[ZaDomain.A2_gal_sync_accounts_set][c][ZaDomain.A2_new_external_gal_polling_interval]=d[ZaDomain.A2_gal_sync_accounts_set][c][ZaDomain.A2_new_external_gal_polling_interval]||"1d"
}}if(d.rights){this._containedObject.rights=d.rights
}if(d.setAttrs){this._containedObject.setAttrs=d.setAttrs
}if(d.getAttrs){this._containedObject.getAttrs=d.getAttrs
}if(d._defaultValues){this._containedObject._defaultValues=d._defaultValues
}if(d._uuid){this._containedObject._uuid=d._uuid
}this._containedObject[ZaModel.currentStep]=d[ZaModel.currentStep]||1;
this._localXForm.setInstance(this._containedObject)
};
ZaNewDomainXWizard.onGALServerTypeChange=function(d,c,b){if(d=="ad"){b.getModel().setInstanceValue(b.getInstance(),ZaDomain.A_GalLdapFilter,"ad");
b.getModel().setInstanceValue(b.getInstance(),ZaDomain.A_zimbraGalAutoCompleteLdapFilter,"adAutoComplete")
}else{b.getModel().setInstanceValue(b.getInstance(),ZaDomain.A_GalLdapFilter,"");
b.getModel().setInstanceValue(b.getInstance(),ZaDomain.A_zimbraGalAutoCompleteLdapFilter,"(|(cn=%s*)(sn=%s*)(gn=%s*)(mail=%s*))")
}this.setInstanceValue(d)
};
ZaNewDomainXWizard.onGalModeChange=function(g,f,e){this.setInstanceValue(g);
if(g!="zimbra"){e.getModel().setInstanceValue(e.getInstance(),ZaDomain.A_GalLdapFilter,"");
if(AjxUtil.isEmpty(e.getModel().getInstanceValue(e.getInstance(),ZaDomain.A_GALServerType))){e.getModel().setInstanceValue(e.getInstance(),ZaDomain.A_GALServerType,"ldap")
}if(AjxUtil.isEmpty(e.getModel().getInstanceValue(e.getInstance(),ZaDomain.A_GalLdapSearchBase))){if(!AjxUtil.isEmpty(e.getModel().getInstanceValue(e.getInstance(),ZaDomain.A_domainName))){var h=e.getModel().getInstanceValue(e.getInstance(),ZaDomain.A_domainName).split(".");
var c="";
var d="";
for(var b in h){c+=d;
c+="dc=";
c+=h[b];
var d=","
}e.getModel().setInstanceValue(e.getInstance(),ZaDomain.A_GalLdapSearchBase,c)
}}}};
ZaNewDomainXWizard.onGALSyncServerTypeChange=function(d,c,b){if(d=="ad"){b.getModel().setInstanceValue(b.getInstance(),ZaDomain.A_zimbraGalSyncLdapFilter,"ad")
}this.setInstanceValue(d)
};
ZaNewDomainXWizard.onGALSyncChange=function(d,c,b){this.setInstanceValue(d);
if(d=="FALSE"){if(b.getModel().getInstanceValue(b.getInstance(),ZaDomain.A_zimbraGalSyncLdapFilter)=="ad"){b.getModel().setInstanceValue(b.getInstance(),ZaDomain.A_GALSyncServerType,"ad")
}else{if(AjxUtil.isEmpty(b.getModel().getInstanceValue(b.getInstance(),ZaDomain.A_GALSyncServerType))){b.getModel().setInstanceValue(b.getInstance(),ZaDomain.A_GALSyncServerType,"ldap")
}}}};
ZaNewDomainXWizard.testSyncSettings=function(){var b=this.getInstance();
this.getModel().setInstanceValue(b,ZaDomain.A2_isTestingSync,1);
var c=new AjxCallback(this,ZaNewDomainXWizard.checkSyncConfigCallBack);
ZaDomain.testSyncSettings(b,c)
};
ZaNewDomainXWizard.checkSyncConfigCallBack=function(c){if(!c){return
}var b=this.getInstance();
this.getModel().setInstanceValue(b,ZaDomain.A2_isTestingSync,0);
if(c.isException()){var e=[c.getException().detail,c.getException().msg,c.getException().trace].join("\n");
this.getModel().setInstanceValue(b,ZaDomain.A_GALSyncTestResultCode,c.getException().code);
this.getModel().setInstanceValue(b,ZaDomain.A_GALSyncTestMessage,e)
}else{var d=c.getResponse().Body.CheckGalConfigResponse;
if(d){this.getModel().setInstanceValue(b,ZaDomain.A_GALSyncTestResultCode,d.code[0]._content);
if(d.code[0]._content!=ZaDomain.Check_OK){this.getModel().setInstanceValue(b,ZaDomain.A_GALSyncTestMessage,d.message[0]._content)
}}}this.getForm().parent.goPage(ZaNewDomainXWizard.SYNC_TEST_RESULT_STEP)
};
ZaNewDomainXWizard.testGALSettings=function(){var b=this.getInstance();
this.getModel().setInstanceValue(b,ZaDomain.A2_isTestingGAL,1);
var c=new AjxCallback(this,ZaNewDomainXWizard.checkGALConfigCallBack);
ZaDomain.testGALSettings(b,c,b[ZaDomain.A_GALSampleQuery])
};
ZaNewDomainXWizard.checkGALConfigCallBack=function(k){if(!k){return
}var j=this.getInstance();
this.getModel().setInstanceValue(j,ZaDomain.A2_isTestingGAL,0);
if(k.isException()){var c=[k.getException().detail,k.getException().msg,k.getException().trace].join("\n");
this.getModel().setInstanceValue(j,ZaDomain.A_GALSearchTestResultCode,k.getException().code);
this.getModel().setInstanceValue(j,ZaDomain.A_GALSearchTestMessage,c);
this.getModel().setInstanceValue(j,ZaDomain.A_GALTestSearchResults,null)
}else{var f=k.getResponse().Body.CheckGalConfigResponse;
if(f){this.getModel().setInstanceValue(j,ZaDomain.A_GALSearchTestResultCode,f.code[0]._content);
if(f.code[0]._content!=ZaDomain.Check_OK){this.getModel().setInstanceValue(j,ZaDomain.A_GALSearchTestMessage,f.message[0]._content);
this.getModel().setInstanceValue(j,ZaDomain.A_GALTestSearchResults,null)
}else{var b=new Array();
if(f.cn&&f.cn.length){var g=f.cn.length;
for(var d=0;
d<g;
d++){var e=new Object();
if(f.cn[d]._attrs){for(var h in f.cn[d]._attrs){e[h]=f.cn[d]._attrs[h]
}b.push(e)
}}}this.getModel().setInstanceValue(j,ZaDomain.A_GALTestSearchResults,b)
}}}this.getForm().parent.goPage(ZaNewDomainXWizard.GAL_TEST_RESULT_STEP)
};
ZaNewDomainXWizard.onAuthMechChange=function(d,c,b){this.setInstanceValue(d);
if(d==ZaDomain.AuthMech_ad){if(!b.getInstance().attrs[ZaDomain.A_AuthADDomainName]){b.getInstance().attrs[ZaDomain.A_AuthADDomainName]=b.getInstance().attrs[ZaDomain.A_domainName]
}}};
ZaNewDomainXWizard.onCOSChanged=function(e,c,b){if(ZaItem.ID_PATTERN.test(e)){this.setInstanceValue(e)
}else{var d=ZaCos.getCosByName(e,b.parent._app);
if(d){e=d.id
}}this.setInstanceValue(e);
return e
};
ZaNewDomainXWizard.testAuthSettings=function(){var b=this.getInstance();
if(b.attrs[ZaDomain.A_AuthMech]==ZaDomain.AuthMech_ad){this.getModel().setInstanceValue(b,ZaDomain.A_AuthLdapUserDn,"%u@"+b.attrs[ZaDomain.A_AuthADDomainName])
}var c=new AjxCallback(this,ZaNewDomainXWizard.checkAuthCallBack);
ZaDomain.testAuthSettings(b,c)
};
ZaNewDomainXWizard.checkAuthCallBack=function(c){if(!c){return
}var b=this.getInstance();
if(c.isException()){this.getModel().setInstanceValue(b,ZaDomain.A_AuthTestResultCode,c.getException().code);
this.getModel().setInstanceValue(b,ZaDomain.A_AuthTestMessage,c.getException().detail+"\n"+c.getException().msg)
}else{var d=c.getResponse().Body.CheckAuthConfigResponse;
this.getModel().setInstanceValue(b,ZaDomain.A_AuthTestResultCode,d.code[0]._content);
if(b[ZaDomain.A_AuthTestResultCode]!=ZaDomain.Check_OK){this.getModel().setInstanceValue(b,ZaDomain.A_AuthTestMessage,d.message[0]._content);
if(d.bindDn!=null){this.getModel().setInstanceValue(b,ZaDomain.A_AuthComputedBindDn,d.bindDn[0]._content)
}else{this.getModel().setInstanceValue(b,ZaDomain.A_AuthComputedBindDn,"")
}}}this.getForm().parent.goPage(ZaNewDomainXWizard.AUTH_TEST_RESULT_STEP)
};
ZaNewDomainXWizard.prototype.popup=function(b){ZaXWizardDialog.prototype.popup.call(this,b);
this._button[DwtWizardDialog.NEXT_BUTTON].setText(AjxMsg._next);
if(this._containedObject.attrs[ZaDomain.A_domainName]){this._button[DwtWizardDialog.NEXT_BUTTON].setEnabled(true)
}else{this._button[DwtWizardDialog.NEXT_BUTTON].setEnabled(false)
}this._button[DwtWizardDialog.FINISH_BUTTON].setEnabled(false);
this._button[DwtWizardDialog.PREV_BUTTON].setEnabled(false)
};
ZaNewDomainXWizard.prototype.goPrev=function(){if(this._containedObject[ZaModel.currentStep]==ZaNewDomainXWizard.AUTH_MODE_STEP){this.goPage(ZaNewDomainXWizard.AUTH_URL_STEP);
this.changeButtonStateForStep(ZaNewDomainXWizard.AUTH_URL_STEP)
}else{if(this._containedObject[ZaModel.currentStep]==ZaNewDomainXWizard.AUTH_URL_STEP&&this._containedObject.attrs[ZaDomain.A_zimbraGalMode]==ZaDomain.GAL_Mode_internal){this.goPage(ZaNewDomainXWizard.GALMODE_STEP);
this.changeButtonStateForStep(ZaNewDomainXWizard.GALMODE_STEP)
}else{if(this._containedObject[ZaModel.currentStep]==ZaNewDomainXWizard.GAL_CONFIG_SUM_STEP){if(this._containedObject.attrs[ZaDomain.A_GALSyncUseGALSearch]=="TRUE"){this.goPage(ZaNewDomainXWizard.GAL_SYNC_CONFIG_STEP_1);
this.changeButtonStateForStep(ZaNewDomainXWizard.GAL_SYNC_CONFIG_STEP_1)
}else{this.goPage(ZaNewDomainXWizard.GAL_SYNC_CONFIG_STEP_2);
this.changeButtonStateForStep(ZaNewDomainXWizard.GAL_SYNC_CONFIG_STEP_2)
}}else{if(this._containedObject[ZaModel.currentStep]==ZaNewDomainXWizard.VHOST_STEP){if(this._containedObject.attrs[ZaDomain.A_AuthMech]==ZaDomain.AuthMech_zimbra){this.goPage(ZaNewDomainXWizard.AUTH_MODE_STEP)
}else{this.goPage(ZaNewDomainXWizard.AUTH_CONFIG_SUM_STEP)
}}else{if(this._containedObject[ZaModel.currentStep]==ZaNewDomainXWizard.CONFIG_COMPLETE_STEP){this.goPage(ZaNewDomainXWizard.FEATURE_STEP);
this.changeButtonStateForStep(ZaNewDomainXWizard.FEATURE_STEP)
}else{if(this._containedObject[ZaModel.currentStep]==ZaNewDomainXWizard.AUTH_CONFIG_SUM_STEP){if(this._containedObject.attrs[ZaDomain.A_AuthMech]==ZaDomain.AuthMech_zimbra){this.goPage(ZaNewDomainXWizard.AUTH_MODE_STEP)
}else{if(this._containedObject.attrs[ZaDomain.A_AuthMech]==ZaDomain.AuthMech_ad){this.goPage(ZaNewDomainXWizard.AUTH_MODE_STEP)
}else{if(this._containedObject.attrs[ZaDomain.A_AuthMech]==ZaDomain.AuthMech_ldap){this.goPage(ZaNewDomainXWizard.AUTH_CONFIG_STEP_2)
}}}}else{this.changeButtonStateForStep(this._containedObject[ZaModel.currentStep]-1);
this.goPage(this._containedObject[ZaModel.currentStep]-1)
}}}}}}};
ZaNewDomainXWizard.prototype.goNext=function(){if(this._containedObject[ZaModel.currentStep]==ZaNewDomainXWizard.GALMODE_STEP){if(!this.checkGALAccount()){ZaApp.getInstance().getCurrentController().popupErrorDialog(ZaMsg.ERROR_CREATE_GAL_ACCOUNT);
return
}if(this._containedObject.attrs[ZaDomain.A_zimbraGalMode]!=ZaDomain.GAL_Mode_internal){if(!this._containedObject.attrs[ZaDomain.A_GalLdapFilter]){ZaApp.getInstance().getCurrentController().popupErrorDialog(ZaMsg.ERROR_SEARCH_FILTER_REQUIRED);
return
}if(!this._containedObject.attrs[ZaDomain.A_GalLdapURL]||this._containedObject.attrs[ZaDomain.A_GalLdapURL].length<1){ZaApp.getInstance().getCurrentController().popupErrorDialog(ZaMsg.ERROR_LDAP_URL_REQUIRED);
return
}}}if(this._containedObject[ZaModel.currentStep]==ZaNewDomainXWizard.GENERAL_STEP){this._containedObject.attrs[ZaDomain.A_AuthADDomainName]=this._containedObject.attrs[ZaDomain.A_domainName];
this.changeButtonStateForStep(ZaNewDomainXWizard.GALMODE_STEP);
this.goPage(ZaNewDomainXWizard.GALMODE_STEP)
}else{if(this._containedObject[ZaModel.currentStep]==ZaNewDomainXWizard.GALMODE_STEP&&this._containedObject.attrs[ZaDomain.A_zimbraGalMode]==ZaDomain.GAL_Mode_internal){this.changeButtonStateForStep(ZaNewDomainXWizard.AUTH_URL_STEP);
this.goPage(ZaNewDomainXWizard.AUTH_URL_STEP)
}else{if(this._containedObject[ZaModel.currentStep]==ZaNewDomainXWizard.GAL_CONFIG_STEP_2){if(this._containedObject.attrs[ZaDomain.A_UseBindPassword]=="FALSE"){this._containedObject.attrs[ZaDomain.A_GalLdapBindPassword]=null;
this._containedObject.attrs[ZaDomain.A_GalLdapBindPasswordConfirm]=null;
this._containedObject.attrs[ZaDomain.A_GalLdapBindDn]=null
}if(this._containedObject.attrs[ZaDomain.A_GalLdapBindPassword]!=this._containedObject.attrs[ZaDomain.A_GalLdapBindPasswordConfirm]){ZaApp.getInstance().getCurrentController().popupErrorDialog(ZaMsg.ERROR_PASSWORD_MISMATCH);
return false
}this.goPage(ZaNewDomainXWizard.GAL_SYNC_CONFIG_STEP_1);
this.changeButtonStateForStep(ZaNewDomainXWizard.GAL_SYNC_CONFIG_STEP_1)
}else{if(this._containedObject[ZaModel.currentStep]==ZaNewDomainXWizard.GAL_SYNC_CONFIG_STEP_1){if(this._containedObject.attrs[ZaDomain.A_GALSyncUseGALSearch]=="FALSE"){this.goPage(ZaNewDomainXWizard.GAL_SYNC_CONFIG_STEP_2);
this.changeButtonStateForStep(ZaNewDomainXWizard.GAL_SYNC_CONFIG_STEP_2)
}else{this.goPage(ZaNewDomainXWizard.GAL_CONFIG_SUM_STEP);
this.changeButtonStateForStep(ZaNewDomainXWizard.GAL_CONFIG_SUM_STEP)
}}else{if(this._containedObject[ZaModel.currentStep]==ZaNewDomainXWizard.GAL_CONFIG_SUM_STEP){this._localXForm.setInstanceValue(ZaDomain.Check_SKIPPED,ZaDomain.A_GALSearchTestResultCode);
this.goPage(ZaNewDomainXWizard.GAL_TEST_RESULT_STEP)
}else{if(this._containedObject[ZaModel.currentStep]==ZaNewDomainXWizard.SYNC_CONFIG_SUM_STEP){this._localXForm.setInstanceValue(ZaDomain.Check_SKIPPED,ZaDomain.A_GALSyncTestResultCode);
this.goPage(ZaNewDomainXWizard.SYNC_TEST_RESULT_STEP)
}else{if(this._containedObject[ZaModel.currentStep]==ZaNewDomainXWizard.GAL_SYNC_CONFIG_STEP_2){if(this._containedObject.attrs[ZaDomain.A_SyncUseBindPassword]=="FALSE"){this._containedObject.attrs[ZaDomain.A_zimbraGalSyncLdapBindPassword]=null;
this._containedObject.attrs[ZaDomain.A_GalSyncLdapBindPasswordConfirm]=null;
this._containedObject.attrs[ZaDomain.A_zimbraGalSyncLdapBindDn]=null
}if(this._containedObject.attrs[ZaDomain.A_zimbraGalSyncLdapBindPassword]!=this._containedObject.attrs[ZaDomain.A_GalSyncLdapBindPasswordConfirm]){ZaApp.getInstance().getCurrentController().popupErrorDialog(ZaMsg.ERROR_PASSWORD_MISMATCH);
return false
}this.goPage(ZaNewDomainXWizard.GAL_CONFIG_SUM_STEP)
}else{if(this._containedObject[ZaModel.currentStep]==ZaNewDomainXWizard.AUTH_MODE_STEP){if(this._containedObject.attrs[ZaDomain.A_AuthMech]==ZaDomain.AuthMech_zimbra){this.goPage(ZaNewDomainXWizard.VHOST_STEP);
this.changeButtonStateForStep(ZaNewDomainXWizard.VHOST_STEP)
}else{if(!this._containedObject.attrs[ZaDomain.A_AuthLdapURL]){ZaApp.getInstance().getCurrentController().popupErrorDialog(ZaMsg.ERROR_LDAP_URL_REQUIRED);
return false
}if(this._containedObject.attrs[ZaDomain.A_AuthMech]==ZaDomain.AuthMech_ad){var b=this._containedObject.attrs[ZaDomain.A_AuthLdapURL].join(" ");
if(this._containedObject.attrs[ZaDomain.A_zimbraAuthLdapStartTlsEnabled]=="TRUE"){if(b.indexOf("ldaps://")>-1){ZaApp.getInstance().getCurrentController().popupWarningDialog(ZaMsg.Domain_WarningStartTLSIgnored)
}}this.goPage(ZaNewDomainXWizard.AUTH_CONFIG_SUM_STEP);
this.changeButtonStateForStep(ZaNewDomainXWizard.AUTH_CONFIG_SUM_STEP)
}else{this.goPage(ZaNewDomainXWizard.AUTH_CONFIG_STEP_2);
this.changeButtonStateForStep(ZaNewDomainXWizard.AUTH_CONFIG_STEP_2)
}}}else{if(this._containedObject[ZaModel.currentStep]==ZaNewDomainXWizard.AUTH_CONFIG_STEP_2){if(this._containedObject[ZaDomain.A_AuthUseBindPassword]=="FALSE"){this._containedObject.attrs[ZaDomain.A_AuthLdapSearchBindDn]=null;
this._containedObject.attrs[ZaDomain.A_AuthLdapSearchBindPassword]=null;
this._containedObject[ZaDomain.A_AuthLdapSearchBindPasswordConfirm]=null
}if(this._containedObject.attrs[ZaDomain.A_AuthLdapSearchBindPassword]!=this._containedObject[ZaDomain.A_AuthLdapSearchBindPasswordConfirm]){ZaApp.getInstance().getCurrentController().popupErrorDialog(ZaMsg.ERROR_PASSWORD_MISMATCH);
return false
}this.goPage(ZaNewDomainXWizard.AUTH_CONFIG_SUM_STEP)
}else{if(this._containedObject[ZaModel.currentStep]==ZaNewDomainXWizard.AUTH_CONFIG_SUM_STEP){this._localXForm.setInstanceValue(ZaDomain.Check_SKIPPED,ZaDomain.A_AuthTestResultCode);
this.goPage(ZaNewDomainXWizard.AUTH_TEST_RESULT_STEP)
}else{this.goPage(this._containedObject[ZaModel.currentStep]+1);
this.changeButtonStateForStep(this._containedObject[ZaModel.currentStep])
}}}}}}}}}}};
ZaNewDomainXWizard.getGalSyncLdapFilterEnabled=function(){var c=this.getModel().getInstanceValue(this.getInstance(),ZaDomain.A_GALSyncUseGALSearch);
var b=this.getModel().getInstanceValue(this.getInstance(),ZaDomain.A_GALSyncServerType);
return(c=="FALSE"&&b=="ldap")
};
ZaNewDomainXWizard.prototype.checkGALAccount=function(){var c=this._containedObject[ZaDomain.A2_create_gal_acc]=="TRUE";
if(!c){return true
}var b=this._containedObject[ZaDomain.A2_gal_sync_accounts_set];
var f=false;
var e;
for(var d in b){e=b[d];
if(!e[ZaDomain.A2_new_gal_sync_account_name]||!e[ZaDomain.A_mailHost]){continue
}if((this._containedObject.attrs[ZaDomain.A_zimbraGalMode]==ZaDomain.GAL_Mode_internal||this._containedObject.attrs[ZaDomain.A_zimbraGalMode]==ZaDomain.GAL_Mode_both)&&e[ZaDomain.A2_new_internal_gal_ds_name]){f=true;
break
}if(this._containedObject.attrs[ZaDomain.A_zimbraGalMode]!=ZaDomain.GAL_Mode_internal&&e[ZaDomain.A2_new_external_gal_ds_name]){f=true;
break
}}return f
};
ZaNewDomainXWizard.getGalSyncConfigSeparate=function(){var b=this.getModel().getInstanceValue(this.getInstance(),ZaDomain.A_GALSyncUseGALSearch);
return(b=="FALSE")
};
ZaNewDomainXWizard.isDomainModeNotInternal=function(){return(this.getInstanceValue(ZaDomain.A_zimbraGalMode)!=ZaDomain.GAL_Mode_internal)
};
ZaNewDomainXWizard.isDomainModeNotExternal=function(){return(this.getInstanceValue(ZaDomain.A_zimbraGalMode)!=ZaDomain.GAL_Mode_external)
};
ZaNewDomainXWizard.isAuthMechNotZimbra=function(){return(this.getInstanceValue(ZaDomain.A_AuthMech)!=ZaDomain.AuthMech_zimbra)
};
ZaNewDomainXWizard.myXFormModifier=function(d,b){var e=new Array();
e[0]=new ZaListHeaderItem("email",ZaMsg.ALV_Name_col,null,"116px",null,"email",true,true);
e[1]=new ZaListHeaderItem("fullName",ZaMsg.ALV_FullName_col,null,"auto",null,"fullName",true,true);
var c={};
c[ZaNewDomainXWizard.GAL_CONFIG_STEP_2]={checks:[ZaNewDomainXWizard.isDomainModeNotInternal],sources:[ZaDomain.A_zimbraGalMode]};
c[ZaNewDomainXWizard.GAL_SYNC_CONFIG_STEP_1]={checks:[ZaNewDomainXWizard.isDomainModeNotInternal],sources:[ZaDomain.A_zimbraGalMode]};
c[ZaNewDomainXWizard.GAL_SYNC_CONFIG_STEP_2]={checks:[[ZaNewDomainXWizard.isDomainModeNotInternal],[XForm.checkInstanceValue,ZaDomain.A_GALSyncUseGALSearch,"FALSE"]],sources:[ZaDomain.A_zimbraGalMode,ZaDomain.A_GALSyncUseGALSearch]};
c[ZaNewDomainXWizard.GAL_CONFIG_SUM_STEP]={checks:[ZaNewDomainXWizard.isDomainModeNotInternal],sources:[ZaDomain.A_zimbraGalMode]};
c[ZaNewDomainXWizard.GAL_TEST_RESULT_STEP]={checks:[ZaNewDomainXWizard.isDomainModeNotInternal],sources:[ZaDomain.A_zimbraGalMode]};
c[ZaNewDomainXWizard.SYNC_CONFIG_SUM_STEP]={checks:[ZaNewDomainXWizard.isDomainModeNotInternal],sources:[ZaDomain.A_zimbraGalMode]};
c[ZaNewDomainXWizard.SYNC_TEST_RESULT_STEP]={checks:[ZaNewDomainXWizard.isDomainModeNotInternal],sources:[ZaDomain.A_zimbraGalMode]};
c[ZaNewDomainXWizard.AUTH_CONFIG_STEP_2]={checks:[[XForm.checkInstanceValue,ZaDomain.A_AuthMech,ZaDomain.AuthMech_ldap]],sources:[ZaDomain.A_AuthMech]};
c[ZaNewDomainXWizard.AUTH_CONFIG_SUM_STEP]={checks:[ZaNewDomainXWizard.isAuthMechNotZimbra],sources:[ZaDomain.A_AuthMech]};
c[ZaNewDomainXWizard.AUTH_TEST_RESULT_STEP]={checks:[ZaNewDomainXWizard.isAuthMechNotZimbra],sources:[ZaDomain.A_AuthMech]};
d.items=[{type:_OUTPUT_,colSpan:2,valign:_TOP_,cssStyle:"white-space: normal",ref:ZaModel.currentStep,choices:this.stepChoices,valueChangeEventSources:[ZaModel.currentStep],labelVisibility:c},{type:_SEPARATOR_,align:_CENTER_,valign:_TOP_},{type:_SPACER_,align:_CENTER_,valign:_TOP_},{type:_SWITCH_,width:"100%",valign:_TOP_,cssStyle:"white-space: normal",items:[{type:_CASE_,caseKey:ZaNewDomainXWizard.GENERAL_STEP,colSizes:["200px","*"],numCols:2,items:[{type:_ZAWIZ_TOP_GROUPER_,colSpan:"*",label:ZaMsg.TABT_GeneralPage,items:[{ref:ZaDomain.A_domainName,type:_TEXTFIELD_,label:ZaMsg.Domain_DomainName,labelLocation:_LEFT_,required:true,width:200,getDisplayValue:AjxUtil.htmlEncode},{ref:ZaDomain.A_zimbraPublicServiceHostname,type:_TEXTFIELD_,label:ZaMsg.Domain_zimbraPublicServiceHostname,labelLocation:_LEFT_,width:200},{ref:ZaDomain.A_zimbraPublicServiceProtocol,type:_OSELECT1_,choices:ZaDomain.protocolChoices,label:ZaMsg.Domain_zimbraPublicServiceProtocol,labelLocation:_LEFT_},{ref:ZaDomain.A_zimbraPublicServicePort,type:_TEXTFIELD_,label:ZaMsg.Domain_zimbraPublicServicePort,labelLocation:_LEFT_,width:100},{type:_DWT_ALERT_,containerCssStyle:"padding-bottom:0px",style:DwtAlert.INFO,iconVisible:true,content:ZaMsg.Domain_InboundSMTPNote,colSpan:"*"},{type:_GROUP_,colSpan:"2",colSizes:["*"],numCols:1,width:"100%",id:"dns_check_group",items:[{ref:ZaDomain.A_zimbraDNSCheckHostname,type:_SUPERWIZ_TEXTFIELD_,textFieldWidth:200,colSizes:["200px","250px","*"],label:null,txtBoxLabel:ZaMsg.Domain_zimbraDNSCheckHostname,resetToSuperLabel:ZaMsg.NAD_ResetToGlobal}]},{ref:ZaDomain.A_description,type:_TEXTFIELD_,label:ZaMsg.NAD_Description,labelLocation:_LEFT_,width:200},{ref:ZaDomain.A_domainDefaultCOSId,type:_INPUT_,label:ZaMsg.Domain_DefaultCOS,onChange:ZaNewDomainXWizard.onCOSChanged,getDisplayValue:function(g){this.createDataList(ZaApp.getInstance().getCosListName());
if(g){var f=ZaCos.getCosById(g);
return f&&f.name
}}},{ref:ZaDomain.A_zimbraDomainStatus,type:_OSELECT1_,msgName:ZaMsg.NAD_DomainStatus,label:ZaMsg.LBL_zimbraDomainStatus,labelLocation:_LEFT_,choices:ZaDomain.domainStatusChoices},{ref:ZaDomain.A_notes,type:_TEXTAREA_,label:ZaMsg.NAD_Notes,labelLocation:_LEFT_,labelCssStyle:"vertical-align:top",width:250},{ref:ZaDomain.A_zimbraHelpAdminURL,type:_TEXTFIELD_,label:ZaMsg.Domain_zimbraHelpAdminURL,msgName:ZaMsg.Domain_zimbraHelpAdminURL,labelLocation:_LEFT_,width:200},{ref:ZaDomain.A_zimbraHelpDelegatedURL,type:_TEXTFIELD_,label:ZaMsg.Domain_zimbraHelpDelegatedURL,msgName:ZaMsg.Domain_zimbraHelpDelegatedURL,labelLocation:_LEFT_,width:200}]}]},{type:_CASE_,caseKey:ZaNewDomainXWizard.GALMODE_STEP,numCols:2,colSizes:["220px","450px"],items:[{ref:ZaDomain.A_zimbraGalMode,type:_OSELECT1_,label:ZaMsg.Domain_GalMode,labelLocation:_LEFT_,choices:this.GALModes,onChange:ZaNewDomainXWizard.onGalModeChange},{ref:ZaDomain.A_zimbraGalMaxResults,type:_TEXTFIELD_,label:ZaMsg.LBL_zimbraGalMaxResults,msgName:ZaMsg.MSG_zimbraGalMaxResults,labelLocation:_LEFT_,width:100},{ref:ZaDomain.A2_create_gal_acc,type:_CHECKBOX_,label:ZaMsg.Domain_CreateGALSyncAccts,subLabel:"",labelLocation:_LEFT_,trueValue:"TRUE",falseValue:"FALSE",labelCssClass:"xform_label",align:_LEFT_,labelWrap:true,enableDisableChecks:[],visibilityChecks:[]},{ref:ZaDomain.A2_gal_sync_accounts_set,type:_COLLAB_SELECT_,label:null,repeatInstance:"",showAddButton:true,showRemoveButton:true,visibilityChangeEventSources:[ZaDomain.A2_create_gal_acc],visibilityChecks:[[XForm.checkInstanceValue,ZaDomain.A2_create_gal_acc,"TRUE"],[function(){if(this.removeButton){this.removeButton.visibilityChecks=[];
this.removeButton.visibilityChecks.push(function(){return(this.getParentItem().getInstanceCount()>1)
})
}if(this.getInstanceValue().length==0){this.addRowButtonClicked(this.getParentItem().instanceNum)
}return true
}]],enableDisableChecks:[],colSpan:2,addButtonLabel:ZaMsg.Domain_GAL_Add,addButtonWidth:220,number:0,removeButtonLabel:ZaMsg.Domain_GAL_Remove,showAddOnNextRow:true,showRemoveNextRow:false,items:[{type:_GROUP_,ref:".",numCols:1,width:"100%",visibilityChangeEventSources:[ZaDomain.A2_gal_sync_accounts_set],visibilityChecks:[function(){return((this.instanceNum==0)||(this.instanceNum<this.getNumberToShow())||(this.instanceNum<this.getInstanceCount()))
}],items:[{type:_SPACER_,colSpan:"*"},{type:_GROUP_,ref:".",numCols:2,colSizes:["220px","100%"],width:"100%",enableDisableChecks:[],visibilityChangeEventSources:[ZaDomain.A2_gal_sync_accounts_set],visibilityChecks:[function(){var f=this.getParentItem().instanceNum;
return((f<this.getNumberToShow())||(f<this.getInstanceCount()))
}],items:[{type:_GROUP_,label:ZaMsg.Domain_GalSyncAccount,numCols:3,colSizes:["130px","25px","auto"],colSpan:"1",ref:".",items:[{ref:ZaDomain.A2_new_gal_sync_account_name,width:130,label:null,type:_TEXTFIELD_,visibilityChecks:[],enableDisableChecks:[]},{type:_OUTPUT_,value:"@",visibilityChecks:[],enableDisableChecks:[]},{type:_OUTPUT_,refPath:ZaDomain.A_domainName,label:null,align:_LEFT_,visibilityChecks:[],enableDisableChecks:[],getDisplayValue:AjxUtil.htmlEncode}],enableDisableChangeEventSources:[ZaDomain.A2_create_gal_acc],enableDisableChecks:[[XForm.checkInstanceValue,ZaDomain.A2_create_gal_acc,"TRUE"]],required:true},{ref:ZaDomain.A_mailHost,type:_OSELECT1_,label:ZaMsg.NAD_MailServer,choices:ZaApp.getInstance().getServerListChoices(),colSelect:true,required:true,width:300,enableDisableChangeEventSources:[ZaDomain.A2_create_gal_acc],enableDisableChecks:[[XForm.checkInstanceValue,ZaDomain.A2_create_gal_acc,"TRUE"]],visibilityChecks:[]},{ref:ZaDomain.A2_new_internal_gal_ds_name,label:ZaMsg.Domain_InternalGALDSName,type:_TEXTFIELD_,required:true,visibilityChangeEventSources:[ZaDomain.A_zimbraGalMode],visibilityChecks:[ZaNewDomainXWizard.isDomainModeNotExternal],enableDisableChangeEventSources:[ZaDomain.A2_create_gal_acc],enableDisableChecks:[[XForm.checkInstanceValue,ZaDomain.A2_create_gal_acc,"TRUE"]]},{ref:ZaDomain.A2_new_internal_gal_polling_interval,type:_LIFETIME_,label:ZaMsg.LBL_zimbraDataSourcePollingInterval_internal,labelLocation:_LEFT_,msgName:ZaMsg.MSG_zimbraDataSourcePollingInterval_internal,visibilityChangeEventSources:[ZaDomain.A_zimbraGalMode],visibilityChecks:[ZaNewDomainXWizard.isDomainModeNotExternal],enableDisableChangeEventSources:[ZaDomain.A2_create_gal_acc],enableDisableChecks:[[XForm.checkInstanceValue,ZaDomain.A2_create_gal_acc,"TRUE"]]},{ref:ZaDomain.A2_new_external_gal_ds_name,label:ZaMsg.Domain_ExternalGALDSName,type:_TEXTFIELD_,visibilityChangeEventSources:[ZaDomain.A_zimbraGalMode],visibilityChecks:[ZaNewDomainXWizard.isDomainModeNotInternal],enableDisableChangeEventSources:[ZaDomain.A2_create_gal_acc],enableDisableChecks:[[XForm.checkInstanceValue,ZaDomain.A2_create_gal_acc,"TRUE"]]},{ref:ZaDomain.A2_new_external_gal_polling_interval,type:_LIFETIME_,label:ZaMsg.LBL_zimbraDataSourcePollingInterval_external,labelLocation:_LEFT_,msgName:ZaMsg.MSG_zimbraDataSourcePollingInterval_external,visibilityChangeEventSources:[ZaDomain.A_zimbraGalMode],visibilityChecks:[ZaNewDomainXWizard.isDomainModeNotInternal],enableDisableChangeEventSources:[ZaDomain.A2_create_gal_acc],enableDisableChecks:[[XForm.checkInstanceValue,ZaDomain.A2_create_gal_acc,"TRUE"]]}]}]}]},{type:_GROUP_,colSpan:2,numCols:2,colSizes:["220px","430px"],visibilityChangeEventSources:[ZaDomain.A_zimbraGalMode],visibilityChecks:[ZaNewDomainXWizard.isDomainModeNotInternal],cssStyle:"overflow:auto",items:[{ref:ZaDomain.A_GALServerType,type:_OSELECT1_,label:ZaMsg.Domain_GALServerType,labelLocation:_LEFT_,choices:this.GALServerTypes,onChange:ZaNewDomainXWizard.onGALServerTypeChange,enableDisableChecks:[],visibilityChecks:[]},{type:_GROUP_,numCols:6,colSpan:6,label:"   ",labelLocation:_LEFT_,items:[{type:_OUTPUT_,label:null,labelLocation:_NONE_,value:" ",width:"35px"},{type:_OUTPUT_,label:null,labelLocation:_NONE_,value:ZaMsg.Domain_GALServerName,width:"200px"},{type:_OUTPUT_,label:null,labelLocation:_NONE_,value:" ",width:"5px"},{type:_OUTPUT_,label:null,labelLocation:_NONE_,value:ZaMsg.Domain_GALServerPort,width:"40px"},{type:_OUTPUT_,label:null,labelLocation:_NONE_,value:ZaMsg.Domain_GALUseSSL,width:"40px"}]},{ref:ZaDomain.A_GalLdapURL,type:_REPEAT_,label:ZaMsg.Domain_GalLdapURL,repeatInstance:"",showAddButton:true,showRemoveButton:true,addButtonLabel:ZaMsg.Domain_AddURL,removeButtonLabel:ZaMsg.Domain_REPEAT_REMOVE,showAddOnNextRow:true,items:[{ref:".",type:_LDAPURL_,label:null,ldapSSLPort:"3269",ldapPort:"3268",labelLocation:_NONE_,enableDisableChecks:[],visibilityChecks:[]}]},{ref:ZaDomain.A_GalLdapFilter,type:_TEXTAREA_,width:380,height:40,label:ZaMsg.Domain_GalLdapFilter,labelLocation:_LEFT_,enableDisableChecks:[[XForm.checkInstanceValue,ZaDomain.A_GALServerType,ZaDomain.GAL_ServerType_ldap]],enableDisableChangeEventSources:[ZaDomain.A_GALServerType]},{ref:ZaDomain.A_zimbraGalAutoCompleteLdapFilter,type:_TEXTAREA_,width:380,height:40,label:ZaMsg.Domain_zimbraGalAutoCompleteLdapFilter,labelLocation:_LEFT_,enableDisableChecks:[[XForm.checkInstanceValue,ZaDomain.A_GALServerType,ZaDomain.GAL_ServerType_ldap]],enableDisableChangeEventSources:[ZaDomain.A_GALServerType],bmolsnr:true},{ref:ZaDomain.A_GalLdapSearchBase,type:_TEXTAREA_,width:380,height:40,label:ZaMsg.Domain_GalLdapSearchBase,labelLocation:_LEFT_,bmolsnr:true}]}]},{type:_CASE_,caseKey:ZaNewDomainXWizard.GAL_CONFIG_STEP_2,colSizes:["220px","430px"],numCols:2,visibilityChangeEventSources:[ZaModel.currentStep],visibilityChecks:[Case_XFormItem.prototype.isCurrentTab,ZaNewDomainXWizard.isDomainModeNotInternal],items:[{ref:ZaDomain.A_UseBindPassword,type:_CHECKBOX_,subLabel:"",label:ZaMsg.Domain_UseBindPassword,labelLocation:_LEFT_,trueValue:"TRUE",falseValue:"FALSE",labelCssClass:"xform_label",align:_LEFT_,enableDisableChecks:[],visibilityChecks:[]},{ref:ZaDomain.A_GalLdapBindDn,type:_TEXTFIELD_,label:ZaMsg.Domain_GalLdapBindDn,labelLocation:_LEFT_,subLabel:"",enableDisableChecks:[[XForm.checkInstanceValue,ZaDomain.A_UseBindPassword,"TRUE"]],enableDisableChangeEventSources:[ZaDomain.A_UseBindPassword]},{ref:ZaDomain.A_GalLdapBindPassword,type:_SECRET_,label:ZaMsg.Domain_GalLdapBindPassword,labelLocation:_LEFT_,enableDisableChecks:[[XForm.checkInstanceValue,ZaDomain.A_UseBindPassword,"TRUE"]],enableDisableChangeEventSources:[ZaDomain.A_UseBindPassword]},{ref:ZaDomain.A_GalLdapBindPasswordConfirm,type:_SECRET_,label:ZaMsg.Domain_GalLdapBindPasswordConfirm,labelLocation:_LEFT_,enableDisableChecks:[[XForm.checkInstanceValue,ZaDomain.A_UseBindPassword,"TRUE"],[ZaItem.hasWritePermission,ZaDomain.A_GalLdapBindPassword]],enableDisableChangeEventSources:[ZaDomain.A_UseBindPassword],visibilityChecks:[[ZaItem.hasReadPermission,ZaDomain.A_GalLdapBindPassword]]}]},{type:_CASE_,caseKey:ZaNewDomainXWizard.GAL_SYNC_CONFIG_STEP_1,numCols:2,colSizes:["220px","430px"],items:[{ref:ZaDomain.A_GALSyncUseGALSearch,type:_CHECKBOX_,label:ZaMsg.Domain_GALSyncUseGALSearch,subLabel:"",labelLocation:_LEFT_,trueValue:"TRUE",falseValue:"FALSE",labelCssClass:"xform_label",align:_LEFT_,labelWrap:true,onChange:ZaNewDomainXWizard.onGALSyncChange,enableDisableChecks:[],visibilityChecks:[]},{ref:ZaDomain.A_GALSyncServerType,type:_OSELECT1_,label:ZaMsg.Domain_GALServerType,labelLocation:_LEFT_,choices:this.GALServerTypes,onChange:ZaNewDomainXWizard.onGALSyncServerTypeChange,enableDisableChecks:[[XForm.checkInstanceValue,ZaDomain.A_GALSyncUseGALSearch,"FALSE"]],enableDisableChangeEventSources:[ZaDomain.A_GALSyncUseGALSearch],enableDisableChecks:[],visibilityChecks:[]},{type:_GROUP_,numCols:6,colSpan:6,label:"   ",labelLocation:_LEFT_,enableDisableChecks:[[XForm.checkInstanceValue,ZaDomain.A_GALSyncUseGALSearch,"FALSE"]],enableDisableChangeEventSources:[ZaDomain.A_GALSyncUseGALSearch],items:[{type:_OUTPUT_,label:null,labelLocation:_NONE_,value:" ",width:"35px"},{type:_OUTPUT_,label:null,labelLocation:_NONE_,value:ZaMsg.Domain_GALServerName,width:"200px"},{type:_OUTPUT_,label:null,labelLocation:_NONE_,value:" ",width:"5px"},{type:_OUTPUT_,label:null,labelLocation:_NONE_,value:ZaMsg.Domain_GALServerPort,width:"40px"},{type:_OUTPUT_,label:null,labelLocation:_NONE_,value:ZaMsg.Domain_GALUseSSL,width:"60px"}]},{ref:ZaDomain.A_zimbraGalSyncLdapURL,type:_REPEAT_,label:ZaMsg.LBL_Domain_GalLdapURL,repeatInstance:"",showAddButton:true,showRemoveButton:true,enableDisableChecks:[[XForm.checkInstanceValue,ZaDomain.A_GALSyncUseGALSearch,"FALSE"]],enableDisableChangeEventSources:[ZaDomain.A_GALSyncUseGALSearch],visibilityChecks:[[XForm.checkInstanceValue,ZaDomain.A_GALSyncServerType,ZaDomain.GAL_ServerType_ad]],visibilityChangeEventSources:[ZaDomain.A_GALSyncUseGALSearch,ZaDomain.A_GALSyncServerType],addButtonLabel:ZaMsg.Domain_AddURL,removeButtonLabel:ZaMsg.Domain_REPEAT_REMOVE,showAddOnNextRow:true,items:[{ref:".",type:_LDAPURL_,label:null,ldapSSLPort:"3269",ldapPort:"3268",labelLocation:_NONE_,enableDisableChecks:[],visibilityChecks:[]}]},{ref:ZaDomain.A_zimbraGalSyncLdapURL,type:_REPEAT_,label:ZaMsg.LBL_Domain_GalLdapURL,repeatInstance:"",showAddButton:true,showRemoveButton:true,visibilityChecks:[[XForm.checkInstanceValue,ZaDomain.A_GALSyncServerType,ZaDomain.GAL_ServerType_ldap]],visibilityChangeEventSources:[ZaDomain.A_GALSyncUseGALSearch,ZaDomain.A_GALSyncServerType],enableDisableChecks:[[XForm.checkInstanceValue,ZaDomain.A_GALSyncUseGALSearch,"FALSE"]],enableDisableChangeEventSources:[ZaDomain.A_GALSyncUseGALSearch,ZaDomain.A_GALSyncServerType],addButtonLabel:ZaMsg.Domain_AddURL,removeButtonLabel:ZaMsg.Domain_REPEAT_REMOVE,showAddOnNextRow:true,items:[{ref:".",type:_LDAPURL_,label:null,ldapSSLPort:"636",ldapPort:"389",labelLocation:_NONE_,enableDisableChecks:[],visibilityChecks:[]}]},{ref:ZaDomain.A_zimbraGalSyncLdapFilter,type:_TEXTAREA_,width:380,height:40,label:ZaMsg.Domain_GalLdapFilter,labelLocation:_LEFT_,textWrapping:"soft",enableDisableChecks:[ZaNewDomainXWizard.getGalSyncLdapFilterEnabled],enableDisableChangeEventSources:[ZaDomain.A_GALSyncUseGALSearch,ZaDomain.A_GALSyncServerType]},{ref:ZaDomain.A_zimbraGalSyncLdapSearchBase,type:_TEXTAREA_,width:380,height:40,label:ZaMsg.Domain_GalLdapSearchBase,labelLocation:_LEFT_,textWrapping:"soft",enableDisableChecks:[[XForm.checkInstanceValue,ZaDomain.A_GALSyncUseGALSearch,"FALSE"]],enableDisableChangeEventSources:[ZaDomain.A_GALSyncUseGALSearch]}]},{type:_CASE_,numCols:2,colSizes:["220px","430px"],caseKey:ZaNewDomainXWizard.GAL_SYNC_CONFIG_STEP_2,visibilityChecks:[Case_XFormItem.prototype.isCurrentTab,ZaNewDomainXWizard.isDomainModeNotInternal,[XForm.checkInstanceValue,ZaDomain.A_GALSyncUseGALSearch,"FALSE"]],visibilityChangeEventSources:[ZaModel.currentStep],items:[{ref:ZaDomain.A_SyncUseBindPassword,type:_CHECKBOX_,subLabel:"",label:ZaMsg.Domain_UseBindPassword,labelLocation:_LEFT_,trueValue:"TRUE",falseValue:"FALSE",labelCssClass:"xform_label",align:_LEFT_,enableDisableChecks:[],visibilityChecks:[]},{ref:ZaDomain.A_zimbraGalSyncLdapBindDn,type:_TEXTFIELD_,label:ZaMsg.Domain_GalLdapBindDn,labelLocation:_LEFT_,enableDisableChecks:[[XForm.checkInstanceValue,ZaDomain.A_SyncUseBindPassword,"TRUE"]],enableDisableChangeEventSources:[ZaDomain.A_SyncUseBindPassword]},{ref:ZaDomain.A_zimbraGalSyncLdapBindPassword,type:_SECRET_,label:ZaMsg.Domain_GalLdapBindPassword,labelLocation:_LEFT_,enableDisableChecks:[[XForm.checkInstanceValue,ZaDomain.A_SyncUseBindPassword,"TRUE"]],enableDisableChangeEventSources:[ZaDomain.A_SyncUseBindPassword]},{ref:ZaDomain.A_GalSyncLdapBindPasswordConfirm,type:_SECRET_,label:ZaMsg.Domain_GalLdapBindPasswordConfirm,labelLocation:_LEFT_,enableDisableChecks:[[XForm.checkInstanceValue,ZaDomain.A_SyncUseBindPassword,"TRUE"],[ZaItem.hasReadPermission,ZaDomain.A_zimbraGalSyncLdapBindPassword]],enableDisableChangeEventSources:[ZaDomain.A_SyncUseBindPassword],visibilityChecks:[[ZaItem.hasReadPermission,ZaDomain.A_zimbraGalSyncLdapBindPassword]]}]},{type:_CASE_,caseKey:ZaNewDomainXWizard.GAL_CONFIG_SUM_STEP,numCols:2,colSizes:["220px","430px"],items:[{type:_GROUP_,visibilityChecks:[ZaNewDomainXWizard.isDomainModeNotInternal,[XForm.checkInstanceValue,ZaDomain.A2_isTestingGAL,0]],visibilityChangeEventSources:[ZaDomain.A_zimbraGalMode,ZaDomain.A2_isTestingGAL],useParentTable:false,numCols:2,colSpan:2,width:"100%",colSizes:["220px","430px"],items:[{ref:ZaDomain.A_zimbraGalMode,type:_OUTPUT_,label:ZaMsg.Domain_GalMode,choices:this.GALModes,visibilityChecks:[[XForm.checkInstanceValue,ZaDomain.A2_isTestingGAL,0]],visibilityChangeEventSources:[ZaDomain.A2_isTestingGAL]},{ref:ZaDomain.A_zimbraGalMaxResults,type:_OUTPUT_,label:ZaMsg.LBL_zimbraGalMaxResults,visibilityChecks:[[XForm.checkInstanceValue,ZaDomain.A2_isTestingGAL,0]],visibilityChangeEventSources:[ZaDomain.A2_isTestingGAL]},{ref:ZaDomain.A_GALServerType,type:_OUTPUT_,label:ZaMsg.Domain_GALServerType,choices:this.GALServerTypes,labelLocation:_LEFT_,bmolsnr:true},{ref:ZaDomain.A_GalLdapURL,type:_REPEAT_,label:ZaMsg.Domain_GalLdapURL+":",labelLocation:_LEFT_,showAddButton:false,bmolsnr:true,showRemoveButton:false,items:[{type:_OUTPUT_,ref:".",label:null,labelLocation:_NONE_,bmolsnr:true}]},{ref:ZaDomain.A_GalLdapFilter,type:_OUTPUT_,label:ZaMsg.Domain_GalLdapFilter,labelLocation:_LEFT_,required:true,visibilityChecks:[[XForm.checkInstanceValue,ZaDomain.A_GALServerType,ZaDomain.GAL_ServerType_ldap]],visibilityChangeEventSources:[ZaDomain.GAL_ServerType_ldap],bmolsnr:true},{ref:ZaDomain.A_GalLdapSearchBase,type:_OUTPUT_,label:ZaMsg.Domain_GalLdapSearchBase,labelLocation:_LEFT_,bmolsnr:true},{ref:ZaDomain.A_UseBindPassword,type:_OUTPUT_,label:ZaMsg.Domain_UseBindPassword,labelLocation:_LEFT_,trueValue:"TRUE",falseValue:"FALSE",bmolsnr:true},{ref:ZaDomain.A_GalLdapBindDn,type:_OUTPUT_,label:ZaMsg.Domain_GalLdapBindDn,labelLocation:_LEFT_,visibilityChecks:[[XForm.checkInstanceValue,ZaDomain.A_UseBindPassword,"TRUE"]],visibilityChangeEventSources:[ZaDomain.A_UseBindPassword],bmolsnr:true},{ref:ZaDomain.A_GALSampleQuery,type:_INPUT_,label:ZaMsg.Domain_GALSampleSearchName,labelLocation:_LEFT_,labelWrap:true,cssStyle:"width:100px;",bmolsnr:true,visibilityChecks:[],enableDisableChecks:[]},{type:_CELLSPACER_},{type:_DWT_BUTTON_,enableDisableChecks:[[XForm.checkInstanceValueNot,ZaDomain.A_GALSampleQuery," "],[XForm.checkInstanceValueNotEmty,ZaDomain.A_GALSampleQuery]],enableDisableChangeEventSources:[ZaDomain.A_GALSampleQuery],onActivate:"ZaNewDomainXWizard.testGALSettings.call(this)",label:ZaMsg.Domain_GALTestSettings,visibilityChecks:[],valign:_BOTTOM_,width:"100px"}]},{type:_DWT_ALERT_,content:ZaMsg.Domain_GALTestingInProgress,ref:null,colSpan:"2",iconVisible:true,align:_CENTER_,style:DwtAlert.INFORMATION,visibilityChecks:[[XForm.checkInstanceValue,ZaDomain.A2_isTestingGAL,1]],visibilityChangeEventSources:[ZaDomain.A2_isTestingGAL]}]},{type:_CASE_,caseKey:ZaNewDomainXWizard.GAL_TEST_RESULT_STEP,numCols:2,colSizes:["220px","430px"],items:[{type:_GROUP_,visibilityChecks:[[XForm.checkInstanceValue,ZaDomain.A_GALSearchTestResultCode,ZaDomain.Check_OK]],visibilityChangeEventSources:[ZaDomain.A_GALSearchTestResultCode],numCols:2,width:"100%",colSpan:"2",items:[{type:_DWT_ALERT_,content:ZaMsg.Domain_GALSearchTestSuccessful,ref:null,colSpan:"2",iconVisible:false,align:_CENTER_,style:DwtAlert.INFORMATION},{type:_OUTPUT_,value:ZaMsg.Domain_GALSearchResult,align:_CENTER_,colSpan:2,visibilityChecks:[[XForm.checkInstanceValueNotEmty,ZaDomain.A_GALTestSearchResults]]},{type:_SPACER_,align:_CENTER_,valign:_TOP_,colSpan:"*"},{ref:ZaDomain.A_GALTestSearchResults,type:_DWT_LIST_,height:"140px",width:"260px",colSpan:2,cssClass:"DLSource",forceUpdate:true,widgetClass:ZaGalObjMiniListView,headerList:e,hideHeader:true}]},{type:_GROUP_,visibilityChecks:[[XForm.checkInstanceValueNot,ZaDomain.A_GALSearchTestResultCode,ZaDomain.Check_OK],[XForm.checkInstanceValueNot,ZaDomain.A_GALSearchTestResultCode,ZaDomain.Check_SKIPPED]],visibilityChangeEventSources:[ZaDomain.A_GALSearchTestResultCode],numCols:2,width:"100%",colSpan:"2",items:[{type:_DWT_ALERT_,content:ZaMsg.Domain_GALSearchTestFailed,ref:null,colSpan:"2",iconVisible:true,align:_CENTER_,style:DwtAlert.WARNING},{type:_OUTPUT_,ref:ZaDomain.A_GALSearchTestResultCode,label:ZaMsg.Domain_GALTestResult,choices:this.TestResultChoices},{type:_TEXTAREA_,ref:ZaDomain.A_GALSearchTestMessage,label:ZaMsg.Domain_GALTestMessage,height:"200px",width:"380px"}]},{type:_DWT_ALERT_,content:ZaMsg.Domain_GALSearchTestSkipped,ref:null,colSpan:"2",iconVisible:true,align:_CENTER_,style:DwtAlert.WARNING,visibilityChecks:[[XForm.checkInstanceValue,ZaDomain.A_GALSearchTestResultCode,ZaDomain.Check_SKIPPED]],visibilityChangeEventSources:[ZaDomain.A_GALSearchTestResultCode]}]},{type:_CASE_,caseKey:ZaNewDomainXWizard.SYNC_CONFIG_SUM_STEP,items:[{type:_DWT_ALERT_,content:ZaMsg.Domain_GALSyncTestingInProgress,ref:null,colSpan:"2",iconVisible:true,align:_CENTER_,style:DwtAlert.INFORMATION,visibilityChecks:[[XForm.checkInstanceValue,ZaDomain.A2_isTestingSync,1]],visibilityChangeEventSources:[ZaDomain.A2_isTestingSync]},{type:_GROUP_,useParentTable:false,numCols:2,colSpan:2,visibilityChecks:[[XForm.checkInstanceValue,ZaDomain.A2_isTestingSync,0]],visibilityChangeEventSources:[ZaDomain.A2_isTestingSync],items:[{ref:ZaDomain.A_zimbraGalMode,type:_OUTPUT_,label:ZaMsg.Domain_GalMode,choices:this.GALModes,visibilityChecks:[[XForm.checkInstanceValue,ZaDomain.A2_isTestingGAL,0]],visibilityChangeEventSources:[ZaDomain.A2_isTestingGAL]},{ref:ZaDomain.A_GALSyncUseGALSearch,type:_OUTPUT_,label:ZaMsg.Domain_GALSyncUseGALSearch,labelLocation:_LEFT_,trueValue:"TRUE",falseValue:"FALSE",bmolsnr:true},{ref:ZaDomain.A_GALSyncServerType,type:_OUTPUT_,label:ZaMsg.Domain_GALServerType,choices:this.GALServerTypes,labelLocation:_LEFT_,visibilityChecks:[ZaNewDomainXWizard.isDomainModeNotInternal,[XForm.checkInstanceValue,ZaDomain.A_GALSyncUseGALSearch,"FALSE"]],visibilityChangeEventSources:[ZaDomain.A_zimbraGalMode,ZaDomain.A_GALSyncUseGALSearch],bmolsnr:true},{ref:ZaDomain.A_zimbraGalSyncLdapURL,type:_REPEAT_,label:ZaMsg.Domain_GalLdapURL+":",labelLocation:_LEFT_,showAddButton:false,showRemoveButton:false,bmolsnr:true,visibilityChecks:[ZaNewDomainXWizard.isDomainModeNotInternal,[XForm.checkInstanceValue,ZaDomain.A_GALSyncUseGALSearch,"FALSE"]],visibilityChangeEventSources:[ZaDomain.A_zimbraGalMode,ZaDomain.A_GALSyncUseGALSearch],items:[{type:_OUTPUT_,ref:".",label:null,labelLocation:_NONE_,bmolsnr:true}]},{ref:ZaDomain.A_zimbraGalSyncLdapFilter,type:_OUTPUT_,label:ZaMsg.Domain_GalLdapFilter,labelLocation:_LEFT_,required:true,visibilityChecks:[ZaNewDomainXWizard.isDomainModeNotInternal,[XForm.checkInstanceValue,ZaDomain.A_GALSyncUseGALSearch,"FALSE"],[XForm.checkInstanceValue,ZaDomain.A_GALServerType,ZaDomain.GAL_ServerType_ldap]],visibilityChangeEventSources:[ZaDomain.A_zimbraGalMode,ZaDomain.A_GALSyncUseGALSearch,ZaDomain.A_GALServerType],bmolsnr:true},{ref:ZaDomain.A_zimbraGalSyncLdapSearchBase,type:_OUTPUT_,label:ZaMsg.Domain_GalLdapSearchBase,labelLocation:_LEFT_,visibilityChecks:[ZaNewDomainXWizard.isDomainModeNotInternal,[XForm.checkInstanceValue,ZaDomain.A_GALSyncUseGALSearch,"FALSE"]],visibilityChangeEventSources:[ZaDomain.A_zimbraGalMode,ZaDomain.A_GALSyncUseGALSearch],bmolsnr:true},{ref:ZaDomain.A_SyncUseBindPassword,type:_OUTPUT_,label:ZaMsg.Domain_UseBindPassword,labelLocation:_LEFT_,trueValue:"TRUE",falseValue:"FALSE",visibilityChecks:[ZaNewDomainXWizard.isDomainModeNotInternal,[XForm.checkInstanceValue,ZaDomain.A_GALSyncUseGALSearch,"FALSE"]],visibilityChangeEventSources:[ZaDomain.A_zimbraGalMode,ZaDomain.A_GALSyncUseGALSearch],bmolsnr:true},{ref:ZaDomain.A_zimbraGalSyncLdapBindDn,type:_OUTPUT_,label:ZaMsg.Domain_GalLdapBindDn,labelLocation:_LEFT_,visibilityChecks:[ZaNewDomainXWizard.isDomainModeNotInternal,[XForm.checkInstanceValue,ZaDomain.A_UseBindPassword,"TRUE"],[XForm.checkInstanceValue,ZaDomain.A_GALSyncUseGALSearch,"FALSE"]],visibilityChangeEventSources:[ZaDomain.A_zimbraGalMode,ZaDomain.A_GALSyncUseGALSearch,ZaDomain.A_UseBindPassword],bmolsnr:true},{type:_CELLSPACER_},{type:_DWT_BUTTON_,onActivate:"ZaNewDomainXWizard.testSyncSettings.call(this)",label:ZaMsg.Domain_GALTestSettings,enableDisableChecks:[],visibilityChecks:[],valign:_BOTTOM_,width:"100px"}]}]},{type:_CASE_,caseKey:ZaNewDomainXWizard.SYNC_TEST_RESULT_STEP,items:[{type:_GROUP_,visibilityChecks:[[XForm.checkInstanceValue,ZaDomain.A_GALSyncTestResultCode,ZaDomain.Check_OK]],visibilityChangeEventSources:[ZaDomain.A_GALSyncTestResultCode],numCols:2,items:[{type:_DWT_ALERT_,content:ZaMsg.Domain_GALSyncTestSuccessful,ref:null,colSpan:"*",iconVisible:false,align:_CENTER_,style:DwtAlert.INFORMATION}]},{type:_GROUP_,visibilityChecks:[[XForm.checkInstanceValueNot,ZaDomain.A_GALSyncTestResultCode,ZaDomain.Check_OK]],visibilityChangeEventSources:[ZaDomain.A_GALSyncTestResultCode],numCols:2,items:[{type:_DWT_ALERT_,content:ZaMsg.Domain_GALSyncTestFailed,ref:null,colSpan:"2",iconVisible:true,align:_CENTER_,style:DwtAlert.WARNING,visibilityChecks:[[XForm.checkInstanceValueNot,ZaDomain.A_GALSyncTestResultCode,ZaDomain.Check_SKIPPED]],visibilityChangeEventSources:[ZaDomain.A_GALSyncTestResultCode]},{type:_DWT_ALERT_,content:ZaMsg.Domain_GALSyncTestSkipped,ref:null,colSpan:"2",iconVisible:true,align:_CENTER_,style:DwtAlert.WARNING,visibilityChecks:[[XForm.checkInstanceValue,ZaDomain.A_GALSyncTestResultCode,ZaDomain.Check_SKIPPED]],visibilityChangeEventSources:[ZaDomain.A_GALSyncTestResultCode]},{type:_OUTPUT_,ref:ZaDomain.A_GALSyncTestResultCode,label:ZaMsg.Domain_GALTestResult,choices:this.TestResultChoices,visibilityChecks:[[XForm.checkInstanceValueNot,ZaDomain.A_GALSyncTestResultCode,ZaDomain.Check_SKIPPED]],visibilityChangeEventSources:[ZaDomain.A_GALSyncTestResultCode]},{type:_TEXTAREA_,ref:ZaDomain.A_GALSyncTestMessage,label:ZaMsg.Domain_GALTestMessage,height:"200px",width:"380px",visibilityChecks:[function(){return((this.getInstanceValue(ZaDomain.A_GALSyncTestResultCode)!=ZaDomain.Check_SKIPPED)&&(this.getInstanceValue(ZaDomain.A_GALSyncTestResultCode)!=ZaDomain.Check_OK))
}],visibilityChangeEventSources:[ZaDomain.A_GALSyncTestResultCode]}]}]},{type:_CASE_,caseKey:ZaNewDomainXWizard.AUTH_URL_STEP,numCols:2,colSizes:["220px","430px"],items:[{type:_ZAWIZ_TOP_GROUPER_,label:ZaMsg.Domain_URLSetting,colSpan:"*",items:[{ref:ZaDomain.A_zimbraAdminConsoleLoginURL,type:_TEXTFIELD_,label:ZaMsg.Domain_zimbraAdminConsoleLoginURL,width:250},{ref:ZaDomain.A_zimbraAdminConsoleLogoutURL,type:_TEXTFIELD_,label:ZaMsg.Domain_zimbraAdminConsoleLogoutURL,width:250}]},{type:_ZAWIZ_TOP_GROUPER_,label:ZaMsg.NAD_AUTH_ClientConfigure,colSpan:"*",items:[{ref:ZaDomain.A_zimbraMailSSLClientCertPrincipalMap,labelCssStyle:"vertical-align:top",type:_TEXTAREA_,label:ZaMsg.NAD_zimbraMailSSLClientCertPrincipalMap,width:250},{type:_DWT_ALERT_,cssClass:"DwtTabTable",containerCssStyle:"padding-bottom:0px",style:DwtAlert.WARNING,iconVisible:false,content:ZaMsg.Alert_Ngnix,id:"xform_header_ngnix"},{type:_SPACER_,height:10},{ref:ZaDomain.A_zimbraReverseProxyClientCertMode,type:_SUPER_SELECT1_,colSizes:["250px","*"],label:ZaMsg.NAD_zimbraReverseProxyClientCertMode,labelLocation:_LEFT_,resetToSuperLabel:ZaMsg.NAD_ResetToCOS},{ref:ZaDomain.A_zimbraReverseProxyClientCertCA,type:_TEXTAREA_,label:ZaMsg.NAD_zimbraReverseProxyClientCertCA,width:400}]},{type:_ZAWIZ_TOP_GROUPER_,label:ZaMsg.NAD_WEBCLIENT_Configure,colSpan:"*",items:[{ref:ZaDomain.A_zimbraWebClientLoginURL,useParentTable:false,colSpan:2,type:_SUPERWIZ_TEXTFIELD_,textFieldWidth:"250px",resetToSuperLabel:ZaMsg.NAD_ResetToGlobal,msgName:ZaMsg.LBL_zimbraWebClientLoginURL,txtBoxLabel:ZaMsg.LBL_zimbraWebClientLoginURL},{ref:ZaDomain.A_zimbraWebClientLogoutURL,useParentTable:false,colSpan:2,type:_SUPERWIZ_TEXTFIELD_,textFieldWidth:"250px",resetToSuperLabel:ZaMsg.NAD_ResetToGlobal,msgName:ZaMsg.LBL_zimbraWebClientLogoutURL,txtBoxLabel:ZaMsg.LBL_zimbraWebClientLogoutURL},{ref:ZaDomain.A_zimbraWebClientLoginURLAllowedUA,label:ZaMsg.LBL_zimbraWebClientLoginURLAllowedUA,type:_SUPER_REPEAT_,resetToSuperLabel:ZaMsg.NAD_ResetToGlobal,repeatInstance:"",colSizes:["250px","150px"],addButtonLabel:ZaMsg.NAD_Add,removeButtonLabel:ZaMsg.NAD_Remove,showAddButton:true,showRemoveButton:true,showAddOnNextRow:true,repeatItems:[{ref:".",type:_TEXTFIELD_,width:"150px"}]},{ref:ZaDomain.A_zimbraWebClientLogoutURLAllowedUA,label:ZaMsg.LBL_zimbraWebClientLogoutURLAllowedUA,type:_SUPER_REPEAT_,resetToSuperLabel:ZaMsg.NAD_ResetToGlobal,repeatInstance:"",colSizes:["250px","150px"],addButtonLabel:ZaMsg.NAD_Add,removeButtonLabel:ZaMsg.NAD_Remove,showAddButton:true,showRemoveButton:true,showAddOnNextRow:true,repeatItems:[{ref:".",type:_TEXTFIELD_,width:"150px"}]},{ref:ZaDomain.A_zimbraWebClientLoginURLAllowedIP,label:ZaMsg.LBL_zimbraWebClientLoginURLAllowedIP,type:_SUPER_REPEAT_,resetToSuperLabel:ZaMsg.NAD_ResetToGlobal,repeatInstance:"",colSizes:["250px","150px"],addButtonLabel:ZaMsg.NAD_Add,removeButtonLabel:ZaMsg.NAD_Remove,showAddButton:true,showRemoveButton:true,showAddOnNextRow:true,repeatItems:[{ref:".",type:_TEXTFIELD_,width:"150px"}]},{ref:ZaDomain.A_zimbraWebClientLogoutURLAllowedIP,label:ZaMsg.LBL_zimbraWebClientLogoutURLAllowedIP,type:_SUPER_REPEAT_,resetToSuperLabel:ZaMsg.NAD_ResetToGlobal,repeatInstance:"",colSizes:["250px","150px"],addButtonLabel:ZaMsg.NAD_Add,removeButtonLabel:ZaMsg.NAD_Remove,showAddButton:true,showRemoveButton:true,showAddOnNextRow:true,repeatItems:[{ref:".",type:_TEXTFIELD_,width:"150px"}]},{ref:ZaDomain.A_zimbraForceClearCookies,useParentTable:false,colSpan:2,type:_CHECKBOX_,trueValue:"TRUE",falseValue:"FALSE",resetToSuperLabel:ZaMsg.NAD_ResetToGlobal,msgName:ZaMsg.MSG_zimbraForceClearCookies,label:ZaMsg.LBL_zimbraForceClearCookies,labelLocation:_LEFT_}]}]},{type:_CASE_,caseKey:ZaNewDomainXWizard.AUTH_MODE_STEP,numCols:2,colSizes:["220px","450px"],items:[{type:_OSELECT1_,label:ZaMsg.Domain_AuthMech,choices:this.AuthMechs,ref:ZaDomain.A_AuthMech,onChange:ZaNewDomainXWizard.onAuthMechChange},{type:_GROUP_,numCols:2,colSizes:["220px","auto"],colSpan:2,visibilityChecks:[[XForm.checkInstanceValue,ZaDomain.A_AuthMech,ZaDomain.AuthMech_ad]],visibilityChangeEventSources:[ZaDomain.A_AuthMech],items:[{ref:ZaDomain.A_AuthADDomainName,type:_TEXTFIELD_,label:ZaMsg.Domain_AuthADDomainName,labelLocation:_LEFT_,visibilityChecks:[],enableDisableChecks:[]},{type:_GROUP_,numCols:6,label:"   ",labelLocation:_LEFT_,items:[{type:_OUTPUT_,label:null,labelLocation:_NONE_,value:" ",width:"35px"},{type:_OUTPUT_,label:null,labelLocation:_NONE_,value:ZaMsg.Domain_AuthADServerName,width:"200px"},{type:_OUTPUT_,label:null,labelLocation:_NONE_,value:" ",width:"5px"},{type:_OUTPUT_,label:null,labelLocation:_NONE_,value:ZaMsg.Domain_AuthADServerPort,width:"40px"},{type:_OUTPUT_,label:null,labelLocation:_NONE_,value:ZaMsg.Domain_AuthADUseSSL,width:"40px"}]},{ref:ZaDomain.A_AuthLdapURL,type:_REPEAT_,label:ZaMsg.Domain_AuthLdapURL,repeatInstance:"",showAddButton:true,showRemoveButton:true,addButtonLabel:ZaMsg.Domain_AddURL,showAddOnNextRow:true,removeButtonLabel:ZaMsg.Domain_REPEAT_REMOVE,items:[{ref:".",type:_LDAPURL_,label:null,labelLocation:_NONE_,ldapSSLPort:"3269",ldapPort:"3268",visibilityChecks:[],enableDisableChecks:[]}]}]},{type:_GROUP_,numCols:2,colSizes:["220px","auto"],colSpan:2,visibilityChecks:[[XForm.checkInstanceValue,ZaDomain.A_AuthMech,ZaDomain.AuthMech_ldap]],visibilityChangeEventSources:[ZaDomain.A_AuthMech],items:[{type:_GROUP_,numCols:6,label:"   ",labelLocation:_LEFT_,items:[{type:_OUTPUT_,label:null,labelLocation:_NONE_,value:" ",width:"35px"},{type:_OUTPUT_,label:null,labelLocation:_NONE_,value:ZaMsg.Domain_AuthLDAPServerName,width:"200px"},{type:_OUTPUT_,label:null,labelLocation:_NONE_,value:" ",width:"5px"},{type:_OUTPUT_,label:null,labelLocation:_NONE_,value:ZaMsg.Domain_AuthLDAPServerPort,width:"40px"},{type:_OUTPUT_,label:null,labelLocation:_NONE_,value:ZaMsg.Domain_AuthLDAPUseSSL,width:"40px"}]},{ref:ZaDomain.A_AuthLdapURL,type:_REPEAT_,label:ZaMsg.Domain_AuthLdapURL,repeatInstance:"",showAddButton:true,showRemoveButton:true,addButtonLabel:ZaMsg.Domain_AddURL,showAddOnNextRow:true,removeButtonLabel:ZaMsg.Domain_REPEAT_REMOVE,items:[{ref:".",type:_LDAPURL_,label:null,ldapSSLPort:"636",ldapPort:"389",labelLocation:_NONE_,visibilityChecks:[],enableDisableChecks:[]}]},{ref:ZaDomain.A_zimbraAuthLdapStartTlsEnabled,type:_CHECKBOX_,label:ZaMsg.Domain_AuthLdapStartTlsEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaDomain.A_AuthLdapSearchFilter,type:_TEXTAREA_,width:"30em",height:100,label:ZaMsg.Domain_AuthLdapFilter,labelLocation:_LEFT_,textWrapping:"soft"},{ref:ZaDomain.A_AuthLdapSearchBase,type:_TEXTAREA_,width:"30em",height:50,label:ZaMsg.Domain_AuthLdapSearchBase,labelLocation:_LEFT_,textWrapping:"soft"},{type:_OUTPUT_,value:ZaMsg.NAD_DomainsAuthStr,colSpan:2}]}]},{type:_CASE_,numCols:2,colSizes:["220px","auto"],caseKey:ZaNewDomainXWizard.AUTH_CONFIG_STEP_2,visibilityChecks:[Case_XFormItem.prototype.isCurrentTab,[XForm.checkInstanceValue,ZaDomain.A_AuthMech,ZaDomain.AuthMech_ldap]],items:[{ref:ZaDomain.A_AuthUseBindPassword,type:_CHECKBOX_,subLabel:"",label:ZaMsg.Domain_AuthUseBindPassword,labelLocation:_LEFT_,trueValue:"TRUE",falseValue:"FALSE",labelCssClass:"xform_label",align:_LEFT_,visibilityChecks:[],enableDisableChecks:[]},{ref:ZaDomain.A_AuthLdapSearchBindDn,type:_TEXTFIELD_,label:ZaMsg.Domain_AuthLdapBindDn,labelLocation:_LEFT_,enableDisableChecks:[[XForm.checkInstanceValue,ZaDomain.A_AuthUseBindPassword,"TRUE"]],enableDisableChangeEventSources:[ZaDomain.A_AuthUseBindPassword]},{ref:ZaDomain.A_AuthLdapSearchBindPassword,type:_SECRET_,label:ZaMsg.Domain_AuthLdapBindPassword,labelLocation:_LEFT_,enableDisableChecks:[[XForm.checkInstanceValue,ZaDomain.A_AuthUseBindPassword,"TRUE"]],enableDisableChangeEventSources:[ZaDomain.A_AuthUseBindPassword]},{ref:ZaDomain.A_AuthLdapSearchBindPasswordConfirm,type:_SECRET_,label:ZaMsg.Domain_AuthLdapBindPasswordConfirm,labelLocation:_LEFT_,enableDisableChecks:[[XForm.checkInstanceValue,ZaDomain.A_AuthUseBindPassword,"TRUE"],[ZaItem.hasWritePermission,ZaDomain.A_AuthLdapSearchBindPassword]],enableDisableChangeEventSources:[ZaDomain.A_AuthUseBindPassword],visibilityChecks:[[ZaItem.hasReadPermission,ZaDomain.A_AuthLdapSearchBindPassword]]}]},{type:_CASE_,caseKey:ZaNewDomainXWizard.AUTH_CONFIG_SUM_STEP,visibilityChecks:[Case_XFormItem.prototype.isCurrentTab,ZaNewDomainXWizard.isAuthMechNotZimbra],items:[{type:_DWT_ALERT_,content:ZaMsg.Domain_AuthTestingInProgress,ref:null,colSpan:"2",iconVisible:true,align:_CENTER_,style:DwtAlert.INFORMATION,visibilityChecks:[[XForm.checkInstanceValue,ZaDomain.A2_isTestingAuth,1]],visibilityChangeEventSources:[ZaDomain.A2_isTestingGAL]},{type:_GROUP_,numCols:2,colSizes:["220px","430px"],visibilityChecks:[[XForm.checkInstanceValue,ZaDomain.A2_isTestingAuth,0]],visibilityChangeEventSources:[ZaDomain.A2_isTestingAuth],items:[{type:_OUTPUT_,value:ZaMsg.Domain_Auth_ConfigSummary,align:_CENTER_,colSpan:"*"},{type:_SPACER_,height:10},{ref:ZaDomain.A_AuthMech,type:_OUTPUT_,label:ZaMsg.Domain_AuthMech,choices:this.AuthMechs,alignment:_LEFT_},{type:_GROUP_,useParentTable:true,visibilityChecks:[[XForm.checkInstanceValue,ZaDomain.A_AuthMech,ZaDomain.AuthMech_ad]],visibilityChangeEventSources:[ZaDomain.A_AuthMech],items:[{ref:ZaDomain.A_AuthADDomainName,type:_OUTPUT_,label:ZaMsg.Domain_AuthADDomainName,labelLocation:_LEFT_},{ref:ZaDomain.A_AuthLdapURL,type:_REPEAT_,label:ZaMsg.Domain_AuthLdapURL,labelLocation:_LEFT_,showAddButton:false,showRemoveButton:false,items:[{type:_OUTPUT_,ref:".",label:null,labelLocation:_NONE_}]}]},{type:_GROUP_,useParentTable:true,visibilityChecks:[[XForm.checkInstanceValue,ZaDomain.A_AuthMech,ZaDomain.AuthMech_ldap]],visibilityChangeEventSources:[ZaDomain.A_AuthMech],items:[{ref:ZaDomain.A_AuthLdapURL,type:_REPEAT_,label:ZaMsg.Domain_AuthLdapURL,labelLocation:_LEFT_,showAddButton:false,showRemoveButton:false,items:[{type:_OUTPUT_,ref:".",label:null,labelLocation:_NONE_}]},{ref:ZaDomain.A_zimbraAuthLdapStartTlsEnabled,type:_OUTPUT_,label:ZaMsg.Domain_AuthLdapStartTlsEnabled,labelLocation:_LEFT_,choices:ZaModel.BOOLEAN_CHOICES},{ref:ZaDomain.A_AuthLdapSearchFilter,type:_OUTPUT_,label:ZaMsg.Domain_AuthLdapFilter,labelLocation:_LEFT_},{ref:ZaDomain.A_AuthLdapSearchBase,type:_OUTPUT_,label:ZaMsg.Domain_AuthLdapSearchBase,labelLocation:_LEFT_},{ref:ZaDomain.A_AuthUseBindPassword,type:_OUTPUT_,label:ZaMsg.Domain_AuthUseBindPassword,labelLocation:_LEFT_,choices:ZaModel.BOOLEAN_CHOICES},{ref:ZaDomain.A_AuthLdapSearchBindDn,type:_TEXTFIELD_,label:ZaMsg.Domain_AuthLdapBindDn,labelLocation:_LEFT_,visibilityChecks:[[XForm.checkInstanceValue,ZaDomain.A_AuthUseBindPassword,"TRUE"]],visibilityChangeEventSources:[ZaDomain.A_AuthUseBindPassword]}]},{type:_SPACER_,height:10},{type:_OUTPUT_,value:ZaMsg.Domain_AuthProvideLoginPwd,align:_CENTER_,colSpan:"*"},{type:_TEXTFIELD_,label:ZaMsg.LBL_Domain_AuthTestUserName,ref:ZaDomain.A_AuthTestUserName,alignment:_LEFT_,visibilityChecks:[],enableDisableChecks:[]},{type:_SECRET_,label:ZaMsg.LBL_Domain_AuthTestPassword,ref:ZaDomain.A_AuthTestPassword,alignment:_LEFT_,visibilityChecks:[],enableDisableChecks:[]},{type:_CELLSPACER_},{type:_DWT_BUTTON_,onActivate:"ZaNewDomainXWizard.testAuthSettings.call(this)",label:ZaMsg.Domain_GALTestSettings,enableDisableChecks:[],visibilityChecks:[],valign:_BOTTOM_,width:"100px"}]}]},{type:_CASE_,numCols:1,caseKey:ZaNewDomainXWizard.AUTH_TEST_RESULT_STEP,colSizes:["380px","290px"],visibilityChecks:[Case_XFormItem.prototype.isCurrentTab,ZaNewDomainXWizard.isAuthMechNotZimbra],visibilityChangeEventSources:[ZaModel.currentStep],items:[{type:_DWT_ALERT_,colSpan:"2",iconVisible:false,align:_CENTER_,style:DwtAlert.INFORMATION,visibilityChecks:[[XForm.checkInstanceValue,ZaDomain.A_AuthTestResultCode,ZaDomain.Check_OK]],visibilityChangeEventSources:[ZaDomain.A_AuthTestResultCode],content:ZaMsg.Domain_AuthTestSuccessful,alignment:_CENTER_},{type:_DWT_ALERT_,content:ZaMsg.Domain_AuthTestSkipped,ref:null,colSpan:"2",iconVisible:true,align:_CENTER_,style:DwtAlert.WARNING,visibilityChecks:[[XForm.checkInstanceValue,ZaDomain.A_AuthTestResultCode,ZaDomain.Check_SKIPPED]],visibilityChangeEventSources:[ZaDomain.A_AuthTestResultCode]},{type:_GROUP_,visibilityChangeEventSources:[ZaDomain.A_AuthTestResultCode],visibilityChecks:[[XForm.checkInstanceValueNot,ZaDomain.A_AuthTestResultCode,ZaDomain.Check_OK],[XForm.checkInstanceValueNot,ZaDomain.A_AuthTestResultCode,ZaDomain.Check_SKIPPED]],items:[{type:_OUTPUT_,value:ZaMsg.Domain_AuthTestFailed,alignment:_CENTER_,colSpan:2,label:null},{type:_OUTPUT_,ref:ZaDomain.A_AuthTestResultCode,label:ZaMsg.Domain_AuthTestResultCode,choices:this.TestResultChoices,alignment:_LEFT_},{type:_OUTPUT_,ref:ZaDomain.A_AuthComputedBindDn,label:ZaMsg.Domain_AuthComputedBindDn,alignment:_LEFT_,visibilityChangeEventSources:[ZaDomain.A_AuthMech],visibilityChecks:[[XForm.checkInstanceValue,ZaDomain.A_AuthMech,ZaDomain.AuthMech_ad]]},{type:_TEXTAREA_,ref:ZaDomain.A_AuthTestMessage,label:ZaMsg.Domain_AuthTestMessage,height:150,alignment:_LEFT_,width:"320px"}]}]},{type:_CASE_,caseKey:ZaNewDomainXWizard.VHOST_STEP,items:[{type:_DWT_ALERT_,content:null,ref:ZaDomain.A_domainName,getDisplayValue:function(f){return AjxMessageFormat.format(ZaMsg.Domain_VH_Explanation,AjxStringUtil.htmlEncode(f))
},iconVisible:false,align:_CENTER_,style:DwtAlert.INFORMATION},{ref:ZaDomain.A_zimbraVirtualHostname,type:_REPEAT_,label:null,repeatInstance:"",showAddButton:true,showRemoveButton:true,addButtonLabel:ZaMsg.NAD_AddVirtualHost,showAddOnNextRow:true,removeButtonLabel:ZaMsg.NAD_RemoveVirtualHost,cssStyle:"text-align:center",tableCssStyle:"margin-left:auto;margin-right:auto",items:[{ref:".",type:_TEXTFIELD_,label:null,width:220,visibilityChecks:[],enableDisableChecks:[]}]}]},{type:_CASE_,caseKey:ZaNewDomainXWizard.FEATURE_STEP,items:[{type:_ZAWIZ_TOP_GROUPER_,label:ZaMsg.NAD_zimbraCalendarFeature,items:[{ref:ZaDomain.A_zimbraFeatureCalendarReminderDeviceEmailEnabled,type:_CHECKBOX_,msgName:ZaMsg.LBL_zimbraFeatureCalendarReminderDeviceEmailEnabled,label:ZaMsg.LBL_zimbraFeatureCalendarReminderDeviceEmailEnabled,trueValue:"TRUE",falseValue:"FALSE"}]}]},{type:_CASE_,caseKey:ZaNewDomainXWizard.ADVANCED_STEP,numCols:1,items:[{type:_ZAWIZ_TOP_GROUPER_,label:ZaMsg.Domain_BC_ShareConf,items:[{ref:ZaDomain.A_zimbraBasicAuthRealm,type:_SUPERWIZ_TEXTFIELD_,width:250,resetToSuperLabel:ZaMsg.NAD_ResetToGlobal,txtBoxLabel:ZaMsg.Domain_zimbraBasicAuthRealm}]},{type:_ZAWIZ_TOP_GROUPER_,label:ZaMsg.Domain_AD_EmailValidate,colSizes:["200px","*"],items:[{ref:ZaDomain.A_zimbraMailAddressValidationRegex,type:_REPEAT_,nowrap:false,labelWrap:true,label:ZaMsg.LBL_EmailValidate,repeatInstance:"",labelWrap:true,showAddButton:true,showRemoveButton:true,addButtonLabel:ZaMsg.NAD_AddRegex,showAddOnNextRow:true,removeButtonLabel:ZaMsg.NAD_RemoveRegex,items:[{ref:".",type:_TEXTFIELD_,label:null,width:250}]}]},{type:_ZAWIZ_TOP_GROUPER_,label:ZaMsg.Domain_QUOTA_Configuration,colSizes:["200px","*"],items:[{ref:ZaDomain.A_zimbraMailDomainQuota,type:_TEXTFIELD_,label:ZaMsg.LBL_DomainQuota},{ref:ZaDomain.A_zimbraDomainAggregateQuota,type:_TEXTFIELD_,label:ZaMsg.LBL_DomainAggregateQuota},{ref:ZaDomain.A_zimbraDomainAggregateQuotaWarnPercent,type:_TEXTFIELD_,label:ZaMsg.LBL_DomainAggregateQuotaWarnPercent},{ref:ZaDomain.A_zimbraDomainAggregateQuotaWarnEmailRecipient,type:_TEXTFIELD_,label:ZaMsg.LBL_DomainAggregateQuotaWarnEmailRecipient},{ref:ZaDomain.A_zimbraDomainAggregateQuotaPolicy,type:_OSELECT1_,label:ZaMsg.LBL_DomainAggregateQuotaPolicy,labelLocation:_LEFT_}]}]},{type:_CASE_,caseKey:ZaNewDomainXWizard.CONFIG_COMPLETE_STEP,items:[{type:_OUTPUT_,value:ZaMsg.Domain_Config_Complete,cssStyle:"text-align:center"}]}]}]
};
ZaXDialog.XFormModifiers.ZaNewDomainXWizard.push(ZaNewDomainXWizard.myXFormModifier)
}if(AjxPackage.define("zimbraAdmin.domains.view.ZaDomainAliasWizard")){ZaDomainAliasWizard=function(d,b,c,e){if(arguments.length==0){return
}this._standardButtons=[DwtDialog.OK_BUTTON,DwtDialog.CANCEL_BUTTON];
ZaXDialog.call(this,d,null,e,b,c);
this._containedObject={};
this.initForm(ZaDomain.myXModel,this.getMyXForm());
this._helpURL=ZaDomainAliasWizard.helpURL
};
ZaDomainAliasWizard.prototype=new ZaXDialog;
ZaDomainAliasWizard.prototype.constructor=ZaDomainAliasWizard;
ZaDomainAliasWizard.helpURL=location.pathname+ZaUtil.HELP_URL+"managing_domains/creating_a_domain_alias.htm?locid="+AjxEnv.DEFAULT_LOCALE;
ZaDomainAliasWizard.prototype.getMyXForm=function(){var b={numCols:1,items:[{type:_GROUP_,isTabGroup:true,items:[{ref:ZaDomain.A_domainName,type:_TEXTFIELD_,label:ZaMsg.LBL_domainAlias,width:250,visibilityChecks:[],enableDisableChecks:[]},{ref:ZaDomain.A2_zimbraDomainAliasTarget,type:_INPUT_,label:ZaMsg.LBL_targetDomain,visibilityChecks:[],enableDisableChecks:[],getDisplayValue:function(c){this.createDataList(ZaApp.getInstance().getDomainNameListByType(ZaDomain.domainTypes.local));
return c
},onChange:ZaDomainAliasWizard.onTargetDomainChanged}]}]};
return b
};
ZaDomainAliasWizard.onTargetDomainChanged=function(b){this.setInstanceValue(b)
};
ZaDomainAliasEditWizard=function(d,b,c,e){if(arguments.length==0){return
}this._standardButtons=[DwtDialog.OK_BUTTON,DwtDialog.CANCEL_BUTTON];
ZaXDialog.call(this,d,null,e,b,c);
this._containedObject={};
this.initForm(ZaDomain.myXModel,this.getMyXForm());
this._helpURL=ZaDomainAliasEditWizard.helpURL
};
ZaDomainAliasEditWizard.prototype=new ZaXDialog;
ZaDomainAliasEditWizard.prototype.constructor=ZaDomainAliasEditWizard;
ZaDomainAliasEditWizard.helpURL=location.pathname+ZaUtil.HELP_URL+"managing_domains/creating_a_domain_alias.htm?locid="+AjxEnv.DEFAULT_LOCALE;
ZaDomainAliasEditWizard.prototype.getMyXForm=function(){var b={numCols:1,items:[{type:_GROUP_,isTabGroup:true,items:[{ref:ZaDomain.A_domainName,type:_OUTPUT_,label:ZaMsg.LBL_domainAlias,width:250,visibilityChecks:[],enableDisableChecks:[]},{ref:ZaDomain.A2_zimbraDomainAliasTarget,type:_INPUT_,label:ZaMsg.LBL_targetDomain,visibilityChecks:[],enableDisableChecks:[],getDisplayValue:function(c){this.createDataList(ZaApp.getInstance().getDomainNameListByType(ZaDomain.domainTypes.local));
return c
},onChange:ZaDomainAliasEditWizard.onTargetDomainChanged}]}]};
return b
};
ZaDomainAliasEditWizard.prototype.editDomainAlias=function(g,f){var e=this._localXForm;
var b=e.getInstance();
if(f){g.load("id",g.id)
}var d=g.attrs[ZaDomain.A_domainName];
var c=g.attrs[ZaDomain.A_zimbraMailCatchAllForwardingAddress];
if(c!=null){c=c.replace("@","")
}if(!b){b={}
}if(!b.attrs){b.attrs={}
}b.attrs[ZaDomain.A_domainName]=d;
b[ZaDomain.A2_zimbraDomainAliasTarget]=c;
b.type=ZaItem.DOMAIN;
b.attrs[ZaDomain.A_domainType]=ZaDomain.domainTypes.alias;
b.attrs[ZaDomain.A_zimbraMailCatchAllForwardingAddress]="@"+c;
this.setObject(g);
e.setInstance(b);
this.registerCallback(DwtDialog.OK_BUTTON,ZaDomain.prototype.modifyDomainAlias,g,this._localXForm);
this.popup()
};
ZaDomainAliasEditWizard.onTargetDomainChanged=function(b){this.setInstanceValue(b)
}
}if(AjxPackage.define("zimbraAdmin.domains.view.ZaGALConfigXWizard")){ZaGALConfigXWizard=function(b,c){ZaXWizardDialog.call(this,b,null,ZaMsg.NCD_GALConfigTitle,"700px","350px","ZaGALConfigXWizard");
this.TAB_INDEX=0;
ZaGALConfigXWizard.GALMODE_STEP=++this.TAB_INDEX;
ZaGALConfigXWizard.GAL_CONFIG_STEP_2=++this.TAB_INDEX;
ZaGALConfigXWizard.GAL_SYNC_CONFIG_STEP_1=++this.TAB_INDEX;
ZaGALConfigXWizard.GAL_SYNC_CONFIG_STEP_2=++this.TAB_INDEX;
ZaGALConfigXWizard.GAL_CONFIG_SUM_STEP=++this.TAB_INDEX;
ZaGALConfigXWizard.GAL_TEST_RESULT_STEP=++this.TAB_INDEX;
ZaGALConfigXWizard.SYNC_CONFIG_SUM_STEP=++this.TAB_INDEX;
ZaGALConfigXWizard.SYNC_TEST_RESULT_STEP=++this.TAB_INDEX;
ZaGALConfigXWizard.CONFIG_COMPLETE_STEP=++this.TAB_INDEX;
this.stepChoices=[{label:ZaMsg.GALMode,value:ZaGALConfigXWizard.GALMODE_STEP},{label:ZaMsg.GALDnConfiguration,value:ZaGALConfigXWizard.GAL_CONFIG_STEP_2},{label:ZaMsg.GALSyncConfiguration,value:ZaGALConfigXWizard.GAL_SYNC_CONFIG_STEP_1},{label:ZaMsg.GALSyncDnConfiguration,value:ZaGALConfigXWizard.GAL_SYNC_CONFIG_STEP_2},{label:ZaMsg.GALConfigSummary,value:ZaGALConfigXWizard.GAL_CONFIG_SUM_STEP},{label:ZaMsg.GalTestResult,value:ZaGALConfigXWizard.GAL_TEST_RESULT_STEP},{label:ZaMsg.SyncConfigSummary,value:ZaGALConfigXWizard.SYNC_CONFIG_SUM_STEP},{label:ZaMsg.SyncTestResult,value:ZaGALConfigXWizard.SYNC_TEST_RESULT_STEP},{label:ZaMsg.DomainConfigComplete,value:ZaGALConfigXWizard.CONFIG_COMPLETE_STEP}];
this.GALModes=[{label:ZaMsg.GALMode_internal,value:ZaDomain.GAL_Mode_internal},{label:ZaMsg.GALMode_external,value:ZaDomain.GAL_Mode_external},{label:ZaMsg.GALMode_both,value:ZaDomain.GAL_Mode_both}];
this.GALServerTypes=[{label:ZaMsg.GALServerType_ldap,value:ZaDomain.GAL_ServerType_ldap},{label:ZaMsg.GALServerType_ad,value:ZaDomain.GAL_ServerType_ad}];
this.initForm(ZaDomain.myXModel,this.getMyXForm(c),null);
this._localXForm.addListener(DwtEvent.XFORMS_FORM_DIRTY_CHANGE,new AjxListener(this,ZaGALConfigXWizard.prototype.handleXFormChange));
this._localXForm.addListener(DwtEvent.XFORMS_VALUE_ERROR,new AjxListener(this,ZaGALConfigXWizard.prototype.handleXFormChange));
this.lastErrorStep=0;
this._helpURL=location.pathname+ZaUtil.HELP_URL+"managing_domains/using_the_global_address_list_(gal).htm?locid="+AjxEnv.DEFAULT_LOCALE
};
ZaGALConfigXWizard.prototype=new ZaXWizardDialog;
ZaGALConfigXWizard.prototype.constructor=ZaGALConfigXWizard;
ZaGALConfigXWizard.prototype.cacheDialog=false;
ZaXDialog.XFormModifiers.ZaGALConfigXWizard=new Array();
ZaGALConfigXWizard.prototype.handleXFormChange=function(){if(this._localXForm.hasErrors()){if(this.lastErrorStep<this._containedObject[ZaModel.currentStep]){this.lastErrorStep=this._containedObject[ZaModel.currentStep]
}}else{this.lastErrorStep=0
}this.changeButtonStateForStep(this._containedObject[ZaModel.currentStep])
};
ZaGALConfigXWizard.prototype.changeButtonStateForStep=function(b){if(this.lastErrorStep==b){this._button[DwtWizardDialog.FINISH_BUTTON].setEnabled(false);
this._button[DwtWizardDialog.NEXT_BUTTON].setEnabled(false);
if(b>1){this._button[DwtWizardDialog.PREV_BUTTON].setEnabled(true)
}}else{if(b==ZaGALConfigXWizard.GALMODE_STEP){this._button[DwtWizardDialog.PREV_BUTTON].setEnabled(false);
this._button[DwtWizardDialog.FINISH_BUTTON].setEnabled(false);
this._button[DwtWizardDialog.NEXT_BUTTON].setEnabled(true)
}else{if(b==ZaGALConfigXWizard.GAL_CONFIG_SUM_STEP){this._button[DwtWizardDialog.PREV_BUTTON].setEnabled(true);
this._button[DwtWizardDialog.FINISH_BUTTON].setEnabled(false);
this._button[DwtWizardDialog.NEXT_BUTTON].setEnabled(true)
}else{if(b==ZaGALConfigXWizard.GAL_TEST_STEP){this._button[DwtWizardDialog.NEXT_BUTTON].setEnabled(false);
this._button[DwtWizardDialog.PREV_BUTTON].setEnabled(false);
this._button[DwtWizardDialog.FINISH_BUTTON].setEnabled(false)
}else{if(b==ZaGALConfigXWizard.GAL_TEST_RESULT_STEP){this._button[DwtWizardDialog.NEXT_BUTTON].setEnabled(true);
this._button[DwtWizardDialog.PREV_BUTTON].setEnabled(true);
this._button[DwtWizardDialog.FINISH_BUTTON].setEnabled(true)
}else{if(b==ZaGALConfigXWizard.GAL_SYNC_CONFIG_STEP_1||b==ZaGALConfigXWizard.GAL_SYNC_CONFIG_STEP_2){this._button[DwtWizardDialog.NEXT_BUTTON].setEnabled(true);
this._button[DwtWizardDialog.PREV_BUTTON].setEnabled(true)
}else{if(b==ZaGALConfigXWizard.CONFIG_COMPLETE_STEP){this._button[DwtWizardDialog.PREV_BUTTON].setEnabled(true);
this._button[DwtWizardDialog.NEXT_BUTTON].setEnabled(false);
this._button[DwtWizardDialog.FINISH_BUTTON].setEnabled(true)
}else{this._button[DwtWizardDialog.PREV_BUTTON].setEnabled(true);
this._button[DwtWizardDialog.NEXT_BUTTON].setEnabled(true)
}}}}}}}};
ZaGALConfigXWizard.prototype.setObject=function(c){this._containedObject=new ZaDomain();
ZaItem.prototype.copyTo.call(c,this._containedObject,true,4);
this._containedObject[ZaDomain.A2_create_gal_acc]=c[ZaDomain.A2_create_gal_acc]||"TRUE";
this._containedObject[ZaDomain.A2_isTestingGAL]=c[ZaDomain.A2_isTestingGAL]||0;
this._containedObject[ZaDomain.A2_isTestingSync]=c[ZaDomain.A2_isTestingSync]||0;
this._containedObject[ZaDomain.A2_gal_sync_accounts_set]=[];
for(var b in c[ZaDomain.A2_gal_sync_accounts_set]){if(c[ZaDomain.A2_gal_sync_accounts_set][b]){this._containedObject[ZaDomain.A2_gal_sync_accounts_set][b]={};
this._containedObject[ZaDomain.A2_gal_sync_accounts_set][b][ZaDomain.A2_new_gal_sync_account_name]=c[ZaDomain.A2_gal_sync_accounts_set][b][ZaDomain.A2_new_gal_sync_account_name];
this._containedObject[ZaDomain.A2_gal_sync_accounts_set][b][ZaDomain.A2_new_internal_gal_ds_name]=c[ZaDomain.A2_gal_sync_accounts_set][b][ZaDomain.A2_new_internal_gal_ds_name];
this._containedObject[ZaDomain.A2_gal_sync_accounts_set][b][ZaDomain.A2_new_external_gal_ds_name]=c[ZaDomain.A2_gal_sync_accounts_set][b][ZaDomain.A2_new_external_gal_ds_name];
this._containedObject[ZaDomain.A2_gal_sync_accounts_set][b][ZaDomain.A2_new_internal_gal_polling_interval]=c[ZaDomain.A2_gal_sync_accounts_set][b][ZaDomain.A2_new_internal_gal_polling_interval]||"1d";
this._containedObject[ZaDomain.A2_gal_sync_accounts_set][b][ZaDomain.A2_new_external_gal_polling_interval]=c[ZaDomain.A2_gal_sync_accounts_set][b][ZaDomain.A2_new_external_gal_polling_interval]||"1d"
}}this.setTitle(ZaMsg.NCD_GALConfigTitle+" ("+c.name+")");
this._containedObject[ZaModel.currentStep]=c[ZaModel.currentStep]||1;
this._containedObject._uuid=c._extid||c._uuid;
this._containedObject._editObject=c._editObject;
this._localXForm.setInstance(this._containedObject)
};
ZaGALConfigXWizard.prototype.finishWizard=function(){try{this._containedObject._editObject.createGalAccount=true;
ZaDomain.modifyGalSettings.call(this._containedObject._editObject,this._containedObject);
ZaApp.getInstance().getDomainListController()._fireDomainChangeEvent(this._containedObject._editObject);
this.popdown()
}catch(b){ZaApp.getInstance().getCurrentController()._handleException(b,"ZaGALConfigXWizard.prototype.finishWizard",null,false)
}};
ZaGALConfigXWizard.onGALServerTypeChange=function(d,c,b){if(d=="ad"){b.getInstance().attrs[ZaDomain.A_GalLdapFilter]="ad";
b.getInstance().attrs[ZaDomain.A_zimbraGalAutoCompleteLdapFilter]="adAutoComplete"
}else{b.getInstance().attrs[ZaDomain.A_zimbraGalAutoCompleteLdapFilter]="(|(cn=%s*)(sn=%s*)(gn=%s*)(mail=%s*))"
}this.setInstanceValue(d)
};
ZaGALConfigXWizard.onGALSyncServerTypeChange=function(d,c,b){if(d=="ad"){b.getInstance().attrs[ZaDomain.A_zimbraGalSyncLdapFilter]="ad"
}this.setInstanceValue(d)
};
ZaGALConfigXWizard.onGALSyncChange=function(e,c,b){this.setInstanceValue(e);
var d=b.getInstance();
if(e=="FALSE"){if(d.attrs[ZaDomain.A_zimbraGalSyncLdapFilter]=="ad"){b.setInstanceValue("ad",ZaDomain.A_GALSyncServerType)
}else{if(!d.attrs[ZaDomain.A_GALSyncServerType]){b.setInstanceValue("ldap",ZaDomain.A_GALSyncServerType)
}}}};
ZaGALConfigXWizard.onGalModeChange=function(g,f,e){this.setInstanceValue(g);
if(g!="zimbra"){if(!e.getInstance().attrs[ZaDomain.A_GALServerType]){this.setInstanceValue("ldap",ZaDomain.A_GALServerType)
}if(!e.getInstance().attrs[ZaDomain.A_GalLdapSearchBase]){if(e.getInstance().attrs[ZaDomain.A_domainName]){var h=e.getInstance().attrs[ZaDomain.A_domainName].split(".");
var c="";
var d="";
for(var b in h){c+=d;
c+="dc=";
c+=h[b];
var d=","
}this.setInstanceValue(c,ZaDomain.A_GalLdapSearchBase)
}}}};
ZaGALConfigXWizard.testSyncSettings=function(){var b=this.getInstance();
this.getModel().setInstanceValue(b,ZaDomain.A2_isTestingSync,1);
var c=new AjxCallback(this,ZaGALConfigXWizard.checkSyncConfigCallBack);
ZaDomain.testSyncSettings(b,c)
};
ZaGALConfigXWizard.isGALServerType=function(c){var b=this.getInstanceValue(ZaDomain.A_GALSyncServerType);
if(!b){if(c=="ldap"){return true
}else{return false
}}else{return(b==c)
}};
ZaGALConfigXWizard.checkSyncConfigCallBack=function(c){if(!c){return
}var b=this.getInstance();
this.getModel().setInstanceValue(b,ZaDomain.A2_isTestingSync,0);
if(c.isException()){var e=[c.getException().detail,c.getException().msg,c.getException().trace].join("\n");
this.getModel().setInstanceValue(b,ZaDomain.A_GALSyncTestResultCode,c.getException().code);
this.getModel().setInstanceValue(b,ZaDomain.A_GALSyncTestMessage,e)
}else{var d=c.getResponse().Body.CheckGalConfigResponse;
if(d){this.getModel().setInstanceValue(b,ZaDomain.A_GALSyncTestResultCode,d.code[0]._content);
if(d.code[0]._content!=ZaDomain.Check_OK){this.getModel().setInstanceValue(b,ZaDomain.A_GALSyncTestMessage,d.message[0]._content)
}}}this.getForm().parent.goPage(ZaGALConfigXWizard.SYNC_TEST_RESULT_STEP)
};
ZaGALConfigXWizard.testGALSettings=function(){var b=this.getInstance();
this.getModel().setInstanceValue(b,ZaDomain.A2_isTestingGAL,1);
var c=new AjxCallback(this,ZaGALConfigXWizard.checkGALConfigCallBack);
ZaDomain.testGALSettings(b,c,b[ZaDomain.A_GALSampleQuery])
};
ZaGALConfigXWizard.checkGALConfigCallBack=function(k){if(!k){return
}var j=this.getInstance();
this.getModel().setInstanceValue(j,ZaDomain.A2_isTestingGAL,0);
if(k.isException()){var c=[k.getException().detail,k.getException().msg,k.getException().trace].join("\n");
this.getModel().setInstanceValue(j,ZaDomain.A_GALSearchTestResultCode,k.getException().code);
this.getModel().setInstanceValue(j,ZaDomain.A_GALSearchTestMessage,c);
this.getModel().setInstanceValue(j,ZaDomain.A_GALTestSearchResults,null)
}else{var f=k.getResponse().Body.CheckGalConfigResponse;
if(f){this.getModel().setInstanceValue(j,ZaDomain.A_GALSearchTestResultCode,f.code[0]._content);
if(f.code[0]._content!=ZaDomain.Check_OK){this.getModel().setInstanceValue(j,ZaDomain.A_GALSearchTestMessage,f.message[0]._content);
this.getModel().setInstanceValue(j,ZaDomain.A_GALTestSearchResults,null)
}else{var b=new Array();
if(f.cn&&f.cn.length){var g=f.cn.length;
for(var d=0;
d<g;
d++){var e=new Object();
if(f.cn[d]._attrs){for(var h in f.cn[d]._attrs){e[h]=f.cn[d]._attrs[h]
}b.push(e)
}}}this.getModel().setInstanceValue(j,ZaDomain.A_GALTestSearchResults,b)
}}}this.getForm().parent.goPage(ZaGALConfigXWizard.GAL_TEST_RESULT_STEP)
};
ZaGALConfigXWizard.prototype.popup=function(b){ZaXWizardDialog.prototype.popup.call(this,b);
this._button[DwtWizardDialog.NEXT_BUTTON].setText(AjxMsg._next);
this._button[DwtWizardDialog.NEXT_BUTTON].setEnabled(true);
this._button[DwtWizardDialog.FINISH_BUTTON].setEnabled(false);
this._button[DwtWizardDialog.PREV_BUTTON].setEnabled(false)
};
ZaGALConfigXWizard.filterExistingServer=function(e){var b=[];
if(!e){return b
}var d=e[ZaDomain.A2_gal_sync_accounts];
if(!d||!(d instanceof Array)){return b
}for(var c=0;
c<d.length;
c++){b.push(d[c].attrs[ZaDomain.A_mailHost])
}return b
};
ZaGALConfigXWizard.prototype.goPage=function(b){ZaXWizardDialog.prototype.goPage.call(this,b);
this.changeButtonStateForStep(b)
};
ZaGALConfigXWizard.prototype.goPrev=function(){if(this._containedObject[ZaModel.currentStep]==ZaGALConfigXWizard.GAL_TEST_RESULT_STEP){this.goPage(ZaGALConfigXWizard.GAL_CONFIG_SUM_STEP)
}else{if(this._containedObject[ZaModel.currentStep]==ZaGALConfigXWizard.SYNC_TEST_RESULT_STEP){this.goPage(ZaGALConfigXWizard.SYNC_CONFIG_SUM_STEP)
}else{if(this._containedObject[ZaModel.currentStep]==ZaGALConfigXWizard.GAL_CONFIG_SUM_STEP&&this._containedObject.attrs[ZaDomain.A_GALSyncUseGALSearch]=="TRUE"){this.goPage(ZaGALConfigXWizard.GAL_SYNC_CONFIG_STEP_1)
}else{if(this._containedObject[ZaModel.currentStep]==ZaGALConfigXWizard.CONFIG_COMPLETE_STEP){if(this._containedObject.attrs[ZaDomain.A_zimbraGalMode]==ZaDomain.GAL_Mode_internal){this.goPage(ZaGALConfigXWizard.GALMODE_STEP)
}else{this.goPage(ZaGALConfigXWizard.SYNC_TEST_RESULT_STEP)
}}else{this._button[DwtWizardDialog.NEXT_BUTTON].setEnabled(true);
this.goPage(this._containedObject[ZaModel.currentStep]-1)
}}}}};
ZaGALConfigXWizard.prototype.goNext=function(){if(this._containedObject[ZaModel.currentStep]==ZaGALConfigXWizard.GALMODE_STEP&&this._containedObject.attrs[ZaDomain.A_zimbraGalMode]==ZaDomain.GAL_Mode_internal){this.goPage(ZaGALConfigXWizard.CONFIG_COMPLETE_STEP)
}else{if(this._containedObject[ZaModel.currentStep]==ZaGALConfigXWizard.SYNC_TEST_RESULT_STEP){this.goPage(ZaGALConfigXWizard.CONFIG_COMPLETE_STEP)
}else{if(this._containedObject[ZaModel.currentStep]==ZaGALConfigXWizard.GAL_TEST_RESULT_STEP){this.goPage(ZaGALConfigXWizard.SYNC_CONFIG_SUM_STEP)
}else{if(this._containedObject[ZaModel.currentStep]==ZaGALConfigXWizard.GALMODE_STEP&&this._containedObject.attrs[ZaDomain.A_zimbraGalMode]!=ZaDomain.GAL_Mode_internal){if(!this._containedObject.attrs[ZaDomain.A_GalLdapFilter]){ZaApp.getInstance().getCurrentController().popupErrorDialog(ZaMsg.ERROR_SEARCH_FILTER_REQUIRED);
return
}if(!this._containedObject.attrs[ZaDomain.A_GalLdapURL]||this._containedObject.attrs[ZaDomain.A_GalLdapURL].length<1){ZaApp.getInstance().getCurrentController().popupErrorDialog(ZaMsg.ERROR_LDAP_URL_REQUIRED);
return
}this.goPage(ZaGALConfigXWizard.GAL_CONFIG_STEP_2)
}else{if(this._containedObject[ZaModel.currentStep]==ZaGALConfigXWizard.GAL_CONFIG_STEP_2){if(this._containedObject.attrs[ZaDomain.A_UseBindPassword]=="FALSE"){this._containedObject.attrs[ZaDomain.A_GalLdapBindPassword]=null;
this._containedObject.attrs[ZaDomain.A_GalLdapBindPasswordConfirm]=null;
this._containedObject.attrs[ZaDomain.A_GalLdapBindDn]=null
}if(this._containedObject.attrs[ZaDomain.A_GalLdapBindPassword]!=this._containedObject.attrs[ZaDomain.A_GalLdapBindPasswordConfirm]){ZaApp.getInstance().getCurrentController().popupErrorDialog(ZaMsg.ERROR_PASSWORD_MISMATCH);
return false
}this.goPage(ZaGALConfigXWizard.GAL_SYNC_CONFIG_STEP_1)
}else{if(this._containedObject[ZaModel.currentStep]==ZaGALConfigXWizard.GAL_SYNC_CONFIG_STEP_1){if(this._containedObject.attrs[ZaDomain.A_GALSyncUseGALSearch]=="FALSE"){this.goPage(ZaGALConfigXWizard.GAL_SYNC_CONFIG_STEP_2)
}else{this.goPage(ZaGALConfigXWizard.GAL_CONFIG_SUM_STEP)
}}else{if(this._containedObject[ZaModel.currentStep]==ZaGALConfigXWizard.GAL_CONFIG_SUM_STEP){this._localXForm.setInstanceValue(ZaDomain.Check_SKIPPED,ZaDomain.A_GALSearchTestResultCode);
this.goPage(ZaGALConfigXWizard.GAL_TEST_RESULT_STEP)
}else{if(this._containedObject[ZaModel.currentStep]==ZaGALConfigXWizard.SYNC_CONFIG_SUM_STEP){this._localXForm.setInstanceValue(ZaDomain.Check_SKIPPED,ZaDomain.A_GALSyncTestResultCode);
this.goPage(ZaGALConfigXWizard.SYNC_TEST_RESULT_STEP)
}else{this.goPage(this._containedObject[ZaModel.currentStep]+1)
}}}}}}}}};
ZaGALConfigXWizard.getGalSyncLdapFilterEnabled=function(){var c=this.getModel().getInstanceValue(this.getInstance(),ZaDomain.A_GALSyncUseGALSearch);
var b=this.getModel().getInstanceValue(this.getInstance(),ZaDomain.A_GALSyncServerType);
return(c=="FALSE"&&b=="ldap")
};
ZaGALConfigXWizard.getGalSyncConfigSeparate=function(){var b=this.getModel().getInstanceValue(this.getInstance(),ZaDomain.A_GALSyncUseGALSearch);
return(b=="FALSE")
};
ZaGALConfigXWizard.checkGALAccountAttribute=ZaDomainXFormView.checkGALAccountAttribute;
ZaGALConfigXWizard.myXFormModifier=function(d,b){var e=new Array();
e[0]=new ZaListHeaderItem("email",ZaMsg.ALV_Name_col,null,"116px",null,"email",true,true);
e[1]=new ZaListHeaderItem("fullName",ZaMsg.ALV_FullName_col,null,"auto",null,"fullName",true,true);
var c={};
c[ZaGALConfigXWizard.GAL_CONFIG_STEP_2]={checks:[ZaNewDomainXWizard.isDomainModeNotInternal],sources:[ZaDomain.A_zimbraGalMode]};
c[ZaGALConfigXWizard.GAL_SYNC_CONFIG_STEP_1]={checks:[ZaNewDomainXWizard.isDomainModeNotInternal],sources:[ZaDomain.A_zimbraGalMode]};
c[ZaGALConfigXWizard.GAL_SYNC_CONFIG_STEP_2]={checks:[[ZaNewDomainXWizard.isDomainModeNotInternal],[XForm.checkInstanceValue,ZaDomain.A_GALSyncUseGALSearch,"FALSE"]],sources:[ZaDomain.A_zimbraGalMode,ZaDomain.A_GALSyncUseGALSearch]};
c[ZaGALConfigXWizard.GAL_CONFIG_SUM_STEP]={checks:[ZaNewDomainXWizard.isDomainModeNotInternal],sources:[ZaDomain.A_zimbraGalMode]};
c[ZaGALConfigXWizard.GAL_TEST_RESULT_STEP]={checks:[ZaNewDomainXWizard.isDomainModeNotInternal],sources:[ZaDomain.A_zimbraGalMode]};
c[ZaGALConfigXWizard.SYNC_CONFIG_SUM_STEP]={checks:[ZaNewDomainXWizard.isDomainModeNotInternal],sources:[ZaDomain.A_zimbraGalMode]};
c[ZaGALConfigXWizard.SYNC_TEST_RESULT_STEP]={checks:[ZaNewDomainXWizard.isDomainModeNotInternal],sources:[ZaDomain.A_zimbraGalMode]};
d.items=[{type:_OUTPUT_,colSpan:2,valign:_TOP_,cssStyle:"white-space: normal",ref:ZaModel.currentStep,choices:this.stepChoices,valueChangeEventSources:[ZaModel.currentStep],labelVisibility:c},{type:_SEPARATOR_,align:_CENTER_,valign:_TOP_},{type:_SPACER_,align:_CENTER_,valign:_TOP_},{type:_SWITCH_,width:650,valign:_TOP_,cssStyle:"white-space: normal",items:[{type:_CASE_,caseKey:ZaGALConfigXWizard.GALMODE_STEP,numCols:2,colSizes:["220px","430px"],items:[{ref:ZaDomain.A_zimbraGalMode,type:_OSELECT1_,label:ZaMsg.Domain_GalMode,labelLocation:_LEFT_,choices:this.GALModes,onChange:ZaGALConfigXWizard.onGalModeChange},{ref:ZaDomain.A_zimbraGalMaxResults,type:_TEXTFIELD_,label:ZaMsg.LBL_zimbraGalMaxResults,msgName:ZaMsg.MSG_zimbraGalMaxResults,labelLocation:_LEFT_},{type:_DWT_ALERT_,style:DwtAlert.WARNING,content:ZaMsg.WARNING_DOMAIN_DS_NOT_CONFIGRED,visibilityChecks:[[XForm.checkInstanceValueEmty,ZaDomain.A_zimbraGalAccountId]],colSpan:"*"},{ref:ZaDomain.A2_create_gal_acc,type:_CHECKBOX_,label:ZaMsg.Domain_UseGALSyncAccts,labelLocation:_LEFT_,trueValue:"TRUE",falseValue:"FALSE",labelCssClass:"xform_label",align:_LEFT_,labelWrap:true,visibilityChecks:[[XForm.checkInstanceValueEmty,ZaDomain.A2_gal_sync_accounts],[ZaItem.hasReadPermission,ZaDomain.A_zimbraGalAccountId]],enableDisableChecks:[[ZaItem.hasRight,ZaDomain.RIGHT_CREATE_ACCOUNT]]},{type:_REPEAT_,ref:ZaDomain.A2_gal_sync_accounts,colSpan:"*",showAddButton:false,showRemoveButton:false,visibilityChecks:[[XForm.checkInstanceValueNotEmty,ZaDomain.A2_gal_sync_accounts],[ZaItem.hasReadPermission,ZaDomain.A_zimbraGalAccountId]],items:[{type:_GROUP_,ref:".",numCols:2,width:"100%",colSizes:["220px","430px"],items:[{ref:"name",type:_OUTPUT_,label:ZaMsg.Domain_GalSyncAccount,visibilityChecks:[[XForm.checkInstanceValueNotEmty,ZaDomain.A2_gal_sync_accounts],[ZaItem.hasReadPermission,ZaDomain.A_zimbraGalAccountId]]},{ref:(ZaAccount.A2_zimbra_ds+".name"),label:ZaMsg.Domain_InternalGALDSName,type:_OUTPUT_,visibilityChangeEventSources:[ZaDomain.A_zimbraGalMode],visibilityChecks:[[ZaItem.hasReadPermission,ZaDomain.A_zimbraGalAccountId],ZaNewDomainXWizard.isDomainModeNotExternal,[ZaGALConfigXWizard.checkGALAccountAttribute,ZaAccount.A2_zimbra_ds,false]]},{ref:ZaDomain.A2_new_internal_gal_ds_name,label:ZaMsg.Domain_InternalGALDSName,type:_TEXTFIELD_,visibilityChangeEventSources:[ZaDomain.A_zimbraGalMode],visibilityChecks:[[ZaItem.hasReadPermission,ZaDomain.A_zimbraGalAccountId],ZaNewDomainXWizard.isDomainModeNotExternal,[ZaGALConfigXWizard.checkGALAccountAttribute,ZaAccount.A2_zimbra_ds,true]],enableDisableChangeEventSources:[ZaDomain.A2_create_gal_acc],enableDisableChecks:[[XForm.checkInstanceValue,ZaDomain.A2_create_gal_acc,"TRUE"],[ZaItem.hasRight,ZaDomain.RIGHT_CREATE_ACCOUNT]]},{ref:(ZaAccount.A2_zimbra_ds+".attrs."+ZaDataSource.A_zimbraDataSourcePollingInterval),type:_LIFETIME_,label:ZaMsg.LBL_zimbraDataSourcePollingInterval_internal,labelLocation:_LEFT_,msgName:ZaMsg.MSG_zimbraDataSourcePollingInterval_internal,visibilityChangeEventSources:[ZaDomain.A_zimbraGalMode],visibilityChecks:[[ZaItem.hasReadPermission,ZaDomain.A_zimbraGalAccountId],ZaNewDomainXWizard.isDomainModeNotExternal,[ZaGALConfigXWizard.checkGALAccountAttribute,ZaAccount.A2_zimbra_ds,false]]},{ref:ZaDomain.A2_new_internal_gal_polling_interval,type:_LIFETIME_,label:ZaMsg.LBL_zimbraDataSourcePollingInterval_internal,labelLocation:_LEFT_,msgName:ZaMsg.MSG_zimbraDataSourcePollingInterval_internal,visibilityChangeEventSources:[ZaDomain.A_zimbraGalMode],visibilityChecks:[[ZaItem.hasReadPermission,ZaDomain.A_zimbraGalAccountId],ZaNewDomainXWizard.isDomainModeNotExternal,[ZaGALConfigXWizard.checkGALAccountAttribute,ZaAccount.A2_zimbra_ds,true]],enableDisableChangeEventSources:[ZaDomain.A2_create_gal_acc],enableDisableChecks:[[XForm.checkInstanceValue,ZaDomain.A2_create_gal_acc,"TRUE"]]},{ref:(ZaAccount.A2_ldap_ds+".name"),label:ZaMsg.Domain_ExternalGALDSName,type:_OUTPUT_,visibilityChangeEventSources:[ZaDomain.A_zimbraGalMode],visibilityChecks:[[ZaItem.hasReadPermission,ZaDomain.A_zimbraGalAccountId],ZaNewDomainXWizard.isDomainModeNotInternal,[ZaGALConfigXWizard.checkGALAccountAttribute,ZaAccount.A2_ldap_ds,false]]},{ref:ZaDomain.A2_new_external_gal_ds_name,label:ZaMsg.Domain_ExternalGALDSName,type:_TEXTFIELD_,visibilityChangeEventSources:[ZaDomain.A_zimbraGalMode],visibilityChecks:[[ZaItem.hasReadPermission,ZaDomain.A_zimbraGalAccountId],ZaNewDomainXWizard.isDomainModeNotInternal,[ZaGALConfigXWizard.checkGALAccountAttribute,ZaAccount.A2_ldap_ds,true]],enableDisableChangeEventSources:[ZaDomain.A2_create_gal_acc],enableDisableChecks:[[XForm.checkInstanceValue,ZaDomain.A2_create_gal_acc,"TRUE"]]},{ref:(ZaAccount.A2_ldap_ds+".attrs."+ZaDataSource.A_zimbraDataSourcePollingInterval),type:_LIFETIME_,label:ZaMsg.LBL_zimbraDataSourcePollingInterval_external,labelLocation:_LEFT_,msgName:ZaMsg.MSG_zimbraDataSourcePollingInterval_external,enableDisableChecks:[],visibilityChangeEventSources:[ZaDomain.A_zimbraGalMode],visibilityChecks:[[ZaItem.hasReadPermission,ZaDomain.A_zimbraGalAccountId],ZaNewDomainXWizard.isDomainModeNotInternal,[ZaGALConfigXWizard.checkGALAccountAttribute,ZaAccount.A2_ldap_ds,false]]},{ref:ZaDomain.A2_new_external_gal_polling_interval,type:_LIFETIME_,label:ZaMsg.LBL_zimbraDataSourcePollingInterval_external,labelLocation:_LEFT_,msgName:ZaMsg.MSG_zimbraDataSourcePollingInterval_external,enableDisableChecks:[],visibilityChangeEventSources:[ZaDomain.A_zimbraGalMode],visibilityChecks:[[ZaItem.hasReadPermission,ZaDomain.A_zimbraGalAccountId],ZaNewDomainXWizard.isDomainModeNotInternal,[ZaGALConfigXWizard.checkGALAccountAttribute,ZaAccount.A2_ldap_ds,true]],enableDisableChangeEventSources:[ZaDomain.A2_create_gal_acc],enableDisableChecks:[[XForm.checkInstanceValue,ZaDomain.A2_create_gal_acc,"TRUE"]]}]}]},{ref:ZaDomain.A2_gal_sync_accounts_set,id:ZaDomain.A2_gal_sync_accounts_set+"_config_wizard",type:_COLLAB_SELECT_,label:null,repeatInstance:"",showAddButton:true,showRemoveButton:true,filterMethod:ZaGALConfigXWizard.filterExistingServer,addButtonLabel:ZaMsg.Domain_GAL_Add,addButtonWidth:220,number:0,removeButtonLabel:ZaMsg.Domain_GAL_Remove,visibilityChangeEventSources:[ZaDomain.A2_create_gal_acc],visibilityChecks:[[XForm.checkInstanceValue,ZaDomain.A2_create_gal_acc,"TRUE"],[ZaItem.hasReadPermission,ZaDomain.A_zimbraGalAccountId],[function(){var f=this.getParentItem().getInstanceValue(ZaDomain.A2_gal_sync_accounts);
if(f&&f instanceof Array&&f.length>=this.__availNum){return false
}if(this.removeButton){this.removeButton.visibilityChecks=[];
this.removeButton.visibilityChecks.push(function(){var h=this.getParentItem().getInstanceValue(ZaDomain.A2_gal_sync_accounts);
var g=0;
if(h&&h instanceof Array){g=h.length
}return(this.getParentItem().getInstanceCount()+g)>1
})
}if(this.getInstanceValue().length==0){if(!f||(f&&f instanceof Array&&f.length==0)){this.addRowButtonClicked(this.getParentItem().instanceNum)
}}return true
}]],enableDisableChangeEventSources:[ZaDomain.A2_create_gal_acc],enableDisableChecks:[[XForm.checkInstanceValue,ZaDomain.A2_create_gal_acc,"TRUE"],[ZaItem.hasRight,ZaDomain.RIGHT_CREATE_ACCOUNT]],showAddOnNextRow:true,showRemoveNextRow:false,colSpan:2,items:[{type:_GROUP_,ref:".",numCols:1,width:"100%",visibilityChangeEventSources:[ZaDomain.A2_gal_sync_accounts_set],visibilityChecks:[function(){return(this.instanceNum==0||(this.instanceNum<this.getNumberToShow())||(this.instanceNum<this.getInstanceCount()))
}],items:[{type:_SPACER_,colSpan:"*"},{type:_GROUP_,ref:".",numCols:2,colSizes:["220x","100%"],width:"100%",visibilityChangeEventSources:[ZaDomain.A2_gal_sync_accounts_set],visibilityChecks:[function(){var f=this.getParentItem().instanceNum;
return((f<this.getNumberToShow())||(f<this.getInstanceCount()))
}],items:[{type:_GROUP_,label:ZaMsg.Domain_GalSyncAccount,numCols:3,colSizes:["130px","25px","auto"],colSpan:"1",ref:".",items:[{ref:ZaDomain.A2_new_gal_sync_account_name,width:130,label:null,type:_TEXTFIELD_,enableDisableChecks:[],visibilityChecks:[]},{type:_OUTPUT_,value:"@"},{type:_OUTPUT_,refPath:ZaDomain.A_domainName,label:null,align:_LEFT_}],required:true},{ref:ZaDomain.A_mailHost,type:_OSELECT1_,label:ZaMsg.NAD_MailServer,choices:ZaApp.getInstance().getServerListChoices(),colSelect:true,required:true,width:300},{ref:ZaDomain.A2_new_internal_gal_ds_name,label:ZaMsg.Domain_InternalGALDSName,type:_TEXTFIELD_,visibilityChangeEventSources:[ZaDomain.A_zimbraGalMode],visibilityChecks:[ZaNewDomainXWizard.isDomainModeNotExternal]},{ref:ZaDomain.A2_new_internal_gal_polling_interval,type:_LIFETIME_,label:ZaMsg.LBL_zimbraDataSourcePollingInterval_internal,labelLocation:_LEFT_,msgName:ZaMsg.MSG_zimbraDataSourcePollingInterval_internal,visibilityChangeEventSources:[ZaDomain.A_zimbraGalMode],visibilityChecks:[ZaNewDomainXWizard.isDomainModeNotExternal]},{ref:ZaDomain.A2_new_external_gal_ds_name,label:ZaMsg.Domain_ExternalGALDSName,type:_TEXTFIELD_,visibilityChangeEventSources:[ZaDomain.A_zimbraGalMode],visibilityChecks:[ZaNewDomainXWizard.isDomainModeNotInternal]},{ref:ZaDomain.A2_new_external_gal_polling_interval,type:_LIFETIME_,label:ZaMsg.LBL_zimbraDataSourcePollingInterval_external,labelLocation:_LEFT_,msgName:ZaMsg.MSG_zimbraDataSourcePollingInterval_external,visibilityChangeEventSources:[ZaDomain.A_zimbraGalMode],visibilityChecks:[ZaNewDomainXWizard.isDomainModeNotInternal]}]}]}]},{type:_GROUP_,colSpan:2,numCols:2,colSizes:["220px","430px"],visibilityChangeEventSources:[ZaDomain.A_zimbraGalMode],visibilityChecks:[ZaNewDomainXWizard.isDomainModeNotInternal],cssStyle:"overflow:auto",items:[{ref:ZaDomain.A_GALServerType,type:_OSELECT1_,label:ZaMsg.Domain_GALServerType,labelLocation:_LEFT_,visibilityChecks:[],enableDisableChecks:[],choices:this.GALServerTypes,onChange:ZaGALConfigXWizard.onGALServerTypeChange},{type:_GROUP_,numCols:6,colSpan:6,label:"   ",labelLocation:_LEFT_,visibilityChecks:[[ZaItem.hasWritePermission,ZaDomain.A_GalLdapURL]],items:[{type:_OUTPUT_,label:null,labelLocation:_NONE_,value:" ",width:"35px"},{type:_OUTPUT_,label:null,labelLocation:_NONE_,value:ZaMsg.Domain_GALServerName,width:"200px"},{type:_OUTPUT_,label:null,labelLocation:_NONE_,value:" ",width:"5px"},{type:_OUTPUT_,label:null,labelLocation:_NONE_,value:ZaMsg.Domain_GALServerPort,width:"45px"},{type:_OUTPUT_,label:null,labelLocation:_NONE_,value:ZaMsg.Domain_GALUseSSL,width:"65px"}]},{ref:ZaDomain.A_GalLdapURL,type:_REPEAT_,label:ZaMsg.LBL_Domain_GalLdapURL,repeatInstance:"",showAddButton:true,showRemoveButton:true,visibilityChecks:[[ZaItem.hasWritePermission,ZaDomain.A_GalLdapURL]],addButtonLabel:ZaMsg.Domain_AddURL,removeButtonLabel:ZaMsg.Domain_REPEAT_REMOVE,showAddOnNextRow:true,items:[{ref:".",type:_LDAPURL_,label:null,ldapSSLPort:"3269",ldapPort:"3268",labelLocation:_NONE_,visibilityChecks:[],enableDisableChecks:[]}]},{ref:ZaDomain.A_GalLdapFilter,type:_TEXTAREA_,width:380,height:40,label:ZaMsg.Domain_GalLdapFilter,labelLocation:_LEFT_,enableDisableChecks:[[XForm.checkInstanceValue,ZaDomain.A_GALServerType,ZaDomain.GAL_ServerType_ldap]],bmolsnr:true,enableDisableChangeEventSources:[ZaDomain.A_GALServerType]},{ref:ZaDomain.A_zimbraGalAutoCompleteLdapFilter,type:_TEXTAREA_,width:380,height:40,label:ZaMsg.Domain_zimbraGalAutoCompleteLdapFilter,labelLocation:_LEFT_,enableDisableChecks:[[XForm.checkInstanceValue,ZaDomain.A_GALServerType,ZaDomain.GAL_ServerType_ldap]],enableDisableChangeEventSources:[ZaDomain.A_GALServerType]},{ref:ZaDomain.A_GalLdapSearchBase,type:_TEXTAREA_,width:380,height:40,label:ZaMsg.Domain_GalLdapSearchBase,labelLocation:_LEFT_,bmolsnr:true}]}]},{type:_CASE_,numCols:2,colSizes:["300px","*"],caseKey:ZaGALConfigXWizard.GAL_CONFIG_STEP_2,visibilityChangeEventSources:[ZaModel.currentStep],visibilityChecks:[Case_XFormItem.prototype.isCurrentTab,ZaNewDomainXWizard.isDomainModeNotInternal],items:[{ref:ZaDomain.A_UseBindPassword,type:_CHECKBOX_,label:ZaMsg.Domain_UseBindPassword,labelLocation:_LEFT_,trueValue:"TRUE",falseValue:"FALSE",labelCssClass:"xform_label",align:_LEFT_,enableDisableChecks:[],visibilityChecks:[]},{ref:ZaDomain.A_GalLdapBindDn,type:_INPUT_,label:ZaMsg.Domain_GalLdapBindDn,labelLocation:_LEFT_,enableDisableChecks:[[XForm.checkInstanceValue,ZaDomain.A_UseBindPassword,"TRUE"]],enableDisableChangeEventSources:[ZaDomain.A_UseBindPassword]},{ref:ZaDomain.A_GalLdapBindPassword,type:_SECRET_,label:ZaMsg.Domain_GalLdapBindPassword,labelLocation:_LEFT_,enableDisableChecks:[[XForm.checkInstanceValue,ZaDomain.A_UseBindPassword,"TRUE"]],enableDisableChangeEventSources:[ZaDomain.A_UseBindPassword]},{ref:ZaDomain.A_GalLdapBindPasswordConfirm,type:_SECRET_,label:ZaMsg.Domain_GalLdapBindPasswordConfirm,labelLocation:_LEFT_,enableDisableChecks:[[XForm.checkInstanceValue,ZaDomain.A_UseBindPassword,"TRUE"]],enableDisableChangeEventSources:[ZaDomain.A_UseBindPassword],visibilityChecks:[]}]},{type:_CASE_,numCols:2,colSizes:["220px","430px"],caseKey:ZaGALConfigXWizard.GAL_SYNC_CONFIG_STEP_1,items:[{ref:ZaDomain.A_GALSyncUseGALSearch,type:_CHECKBOX_,label:ZaMsg.Domain_GALSyncUseGALSearch,labelLocation:_LEFT_,trueValue:"TRUE",falseValue:"FALSE",labelCssClass:"xform_label",align:_LEFT_,labelWrap:true,onChange:ZaGALConfigXWizard.onGALSyncChange,enableDisableChecks:[],visibilityChecks:[]},{ref:ZaDomain.A_GALSyncServerType,type:_OSELECT1_,label:ZaMsg.Domain_GALServerType,labelLocation:_LEFT_,choices:this.GALServerTypes,onChange:ZaGALConfigXWizard.onGALSyncServerTypeChange,enableDisableChecks:[[XForm.checkInstanceValue,ZaDomain.A_GALSyncUseGALSearch,"FALSE"]],enableDisableChangeEventSources:[ZaDomain.A_GALSyncUseGALSearch],visibilityChecks:[]},{type:_GROUP_,numCols:6,colSpan:6,label:"   ",labelLocation:_LEFT_,enableDisableChecks:[[XForm.checkInstanceValue,ZaDomain.A_GALSyncUseGALSearch,"FALSE"]],enableDisableChangeEventSources:[ZaDomain.A_GALSyncUseGALSearch],items:[{type:_OUTPUT_,label:null,labelLocation:_NONE_,value:" ",width:"35px"},{type:_OUTPUT_,label:null,labelLocation:_NONE_,value:ZaMsg.Domain_GALServerName,width:"200px"},{type:_OUTPUT_,label:null,labelLocation:_NONE_,value:" ",width:"5px"},{type:_OUTPUT_,label:null,labelLocation:_NONE_,value:ZaMsg.Domain_GALServerPort,width:"45px"},{type:_OUTPUT_,label:null,labelLocation:_NONE_,value:ZaMsg.Domain_GALUseSSL,width:"65px"}]},{ref:ZaDomain.A_zimbraGalSyncLdapURL,type:_REPEAT_,label:ZaMsg.LBL_Domain_GalLdapURL,repeatInstance:"",showAddButton:true,showRemoveButton:true,enableDisableChecks:[[XForm.checkInstanceValue,ZaDomain.A_GALSyncUseGALSearch,"FALSE"]],enableDisableChangeEventSources:[ZaDomain.A_GALSyncUseGALSearch],visibilityChecks:[[ZaGALConfigXWizard.isGALServerType,ZaDomain.GAL_ServerType_ad]],visibilityChangeEventSources:[ZaDomain.A_GALSyncUseGALSearch,ZaDomain.A_GALSyncServerType],addButtonLabel:ZaMsg.Domain_AddURL,removeButtonLabel:ZaMsg.Domain_REPEAT_REMOVE,showAddOnNextRow:true,items:[{ref:".",type:_LDAPURL_,label:null,ldapSSLPort:"3269",ldapPort:"3268",labelLocation:_NONE_,visibilityChecks:[],enableDisableChecks:[]}]},{ref:ZaDomain.A_zimbraGalSyncLdapURL,type:_REPEAT_,label:ZaMsg.LBL_Domain_GalLdapURL,repeatInstance:"",showAddButton:true,showRemoveButton:true,visibilityChecks:[[ZaGALConfigXWizard.isGALServerType,ZaDomain.GAL_ServerType_ldap]],visibilityChangeEventSources:[ZaDomain.A_GALSyncUseGALSearch,ZaDomain.A_GALSyncServerType],enableDisableChecks:[[XForm.checkInstanceValue,ZaDomain.A_GALSyncUseGALSearch,"FALSE"]],enableDisableChangeEventSources:[ZaDomain.A_GALSyncUseGALSearch,ZaDomain.A_GALSyncServerType],addButtonLabel:ZaMsg.Domain_AddURL,removeButtonLabel:ZaMsg.Domain_REPEAT_REMOVE,showAddOnNextRow:true,items:[{ref:".",type:_LDAPURL_,label:null,ldapSSLPort:"636",ldapPort:"389",labelLocation:_NONE_,visibilityChecks:[],enableDisableChecks:[]}]},{ref:ZaDomain.A_zimbraGalSyncLdapFilter,type:_TEXTAREA_,width:380,height:40,label:ZaMsg.Domain_GalLdapFilter,labelLocation:_LEFT_,textWrapping:"soft",enableDisableChecks:[ZaGALConfigXWizard.getGalSyncLdapFilterEnabled],enableDisableChangeEventSources:[ZaDomain.A_GALSyncUseGALSearch,ZaDomain.A_GALSyncServerType]},{ref:ZaDomain.A_zimbraGalSyncLdapSearchBase,type:_TEXTAREA_,width:380,height:40,label:ZaMsg.Domain_GalLdapSearchBase,labelLocation:_LEFT_,textWrapping:"soft",enableDisableChecks:[[XForm.checkInstanceValue,ZaDomain.A_GALSyncUseGALSearch,"FALSE"]],enableDisableChangeEventSources:[ZaDomain.A_GALSyncUseGALSearch]}]},{type:_CASE_,numCols:2,colSizes:["220px","430px"],caseKey:ZaGALConfigXWizard.GAL_SYNC_CONFIG_STEP_2,visibilityChangeEventSources:[ZaModel.currentStep],visibilityChecks:[Case_XFormItem.prototype.isCurrentTab,ZaNewDomainXWizard.isDomainModeNotInternal,[XForm.checkInstanceValue,ZaDomain.A_GALSyncUseGALSearch,"FALSE"]],items:[{ref:ZaDomain.A_SyncUseBindPassword,type:_CHECKBOX_,label:ZaMsg.Domain_UseBindPassword,labelLocation:_LEFT_,trueValue:"TRUE",falseValue:"FALSE",labelCssClass:"xform_label",align:_LEFT_,enableDisableChecks:[],visibilityChecks:[]},{ref:ZaDomain.A_zimbraGalSyncLdapBindDn,type:_INPUT_,label:ZaMsg.Domain_GalLdapBindDn,labelLocation:_LEFT_,enableDisableChecks:[[XForm.checkInstanceValue,ZaDomain.A_SyncUseBindPassword,"TRUE"]],enableDisableChangeEventSources:[ZaDomain.A_SyncUseBindPassword]},{ref:ZaDomain.A_zimbraGalSyncLdapBindPassword,type:_SECRET_,label:ZaMsg.Domain_GalLdapBindPassword,labelLocation:_LEFT_,enableDisableChecks:[[XForm.checkInstanceValue,ZaDomain.A_SyncUseBindPassword,"TRUE"]],enableDisableChangeEventSources:[ZaDomain.A_SyncUseBindPassword]},{ref:ZaDomain.A_GalSyncLdapBindPasswordConfirm,type:_SECRET_,label:ZaMsg.Domain_GalLdapBindPasswordConfirm,labelLocation:_LEFT_,enableDisableChecks:[[XForm.checkInstanceValue,ZaDomain.A_SyncUseBindPassword,"TRUE"]],enableDisableChangeEventSources:[ZaDomain.A_SyncUseBindPassword],visibilityChecks:[]}]},{type:_CASE_,caseKey:ZaGALConfigXWizard.GAL_CONFIG_SUM_STEP,numCols:2,colSizes:["220px","430px"],items:[{type:_GROUP_,visibilityChecks:[ZaNewDomainXWizard.isDomainModeNotInternal,[XForm.checkInstanceValue,ZaDomain.A2_isTestingGAL,0]],visibilityChangeEventSources:[ZaDomain.A_zimbraGalMode,ZaDomain.A2_isTestingGAL],useParentTable:false,numCols:2,colSpan:2,items:[{ref:ZaDomain.A_zimbraGalMode,type:_OUTPUT_,label:ZaMsg.Domain_GalMode,choices:this.GALModes,visibilityChecks:[[XForm.checkInstanceValue,ZaDomain.A2_isTestingGAL,0]],visibilityChangeEventSources:[ZaDomain.A2_isTestingGAL]},{ref:ZaDomain.A_zimbraGalMaxResults,type:_OUTPUT_,label:ZaMsg.LBL_zimbraGalMaxResults,visibilityChecks:[[XForm.checkInstanceValue,ZaDomain.A2_isTestingGAL,0]],visibilityChangeEventSources:[ZaDomain.A2_isTestingGAL]},{ref:ZaDomain.A_GALServerType,type:_OUTPUT_,label:ZaMsg.Domain_GALServerType,choices:this.GALServerTypes,labelLocation:_LEFT_,bmolsnr:true},{ref:ZaDomain.A_GalLdapURL,type:_REPEAT_,label:ZaMsg.Domain_GalLdapURL+":",labelLocation:_LEFT_,showAddButton:false,bmolsnr:true,showRemoveButton:false,items:[{type:_OUTPUT_,ref:".",label:null,labelLocation:_NONE_,bmolsnr:true}]},{ref:ZaDomain.A_GalLdapFilter,type:_OUTPUT_,label:ZaMsg.Domain_GalLdapFilter,labelLocation:_LEFT_,required:true,visibilityChecks:[[XForm.checkInstanceValue,ZaDomain.A_GALServerType,ZaDomain.GAL_ServerType_ldap]],visibilityChangeEventSources:[ZaDomain.GAL_ServerType_ldap],bmolsnr:true},{ref:ZaDomain.A_GalLdapSearchBase,type:_OUTPUT_,label:ZaMsg.Domain_GalLdapSearchBase,labelLocation:_LEFT_,bmolsnr:true},{ref:ZaDomain.A_UseBindPassword,type:_OUTPUT_,label:ZaMsg.Domain_UseBindPassword,labelLocation:_LEFT_,trueValue:"TRUE",falseValue:"FALSE",bmolsnr:true},{ref:ZaDomain.A_GalLdapBindDn,type:_OUTPUT_,label:ZaMsg.Domain_GalLdapBindDn,labelLocation:_LEFT_,visibilityChecks:[[XForm.checkInstanceValue,ZaDomain.A_UseBindPassword,"TRUE"]],visibilityChangeEventSources:[ZaDomain.A_UseBindPassword],bmolsnr:true},{ref:ZaDomain.A_GALSampleQuery,type:_TEXTFIELD_,label:ZaMsg.Domain_GALSampleSearchName,labelLocation:_LEFT_,labelWrap:true,cssStyle:"width:100px;",bmolsnr:true,visibilityChecks:[],enableDisableChecks:[]},{type:_CELLSPACER_},{type:_DWT_BUTTON_,enableDisableChecks:[[XForm.checkInstanceValueNot,ZaDomain.A_GALSampleQuery," "],[XForm.checkInstanceValueNotEmty,ZaDomain.A_GALSampleQuery]],enableDisableChangeEventSources:[ZaDomain.A_GALSampleQuery],onActivate:"ZaGALConfigXWizard.testGALSettings.call(this)",label:ZaMsg.Domain_GALTestSettings,visibilityChecks:[],valign:_BOTTOM_,width:"100px"}]},{type:_DWT_ALERT_,content:ZaMsg.Domain_GALTestingInProgress,ref:null,colSpan:"2",iconVisible:true,align:_CENTER_,style:DwtAlert.INFORMATION,visibilityChecks:[[XForm.checkInstanceValue,ZaDomain.A2_isTestingGAL,1]],visibilityChangeEventSources:[ZaDomain.A2_isTestingGAL]}]},{type:_CASE_,caseKey:ZaGALConfigXWizard.GAL_TEST_RESULT_STEP,numCols:2,colSizes:["220px","430px"],items:[{type:_GROUP_,visibilityChecks:[[XForm.checkInstanceValue,ZaDomain.A_GALSearchTestResultCode,ZaDomain.Check_OK]],visibilityChangeEventSources:[ZaDomain.A_GALSearchTestResultCode],numCols:2,colSpan:2,items:[{type:_DWT_ALERT_,content:ZaMsg.Domain_GALSearchTestSuccessful,ref:null,colSpan:"2",iconVisible:true,style:DwtAlert.SUCCESS},{type:_OUTPUT_,value:ZaMsg.Domain_GALSearchResult,colSpan:2,visibilityChecks:[[XForm.checkInstanceValueNotEmty,ZaDomain.A_GALTestSearchResults]]},{type:_SPACER_,align:_CENTER_,valign:_TOP_,colSpan:"*"},{ref:ZaDomain.A_GALTestSearchResults,type:_DWT_LIST_,height:"200px",width:"100%",colSpan:2,cssClass:"DLSource",forceUpdate:true,widgetClass:ZaGalObjMiniListView,headerList:e,hideHeader:true}]},{type:_GROUP_,visibilityChecks:[[XForm.checkInstanceValueNot,ZaDomain.A_GALSearchTestResultCode,ZaDomain.Check_OK],[XForm.checkInstanceValueNot,ZaDomain.A_GALSearchTestResultCode,ZaDomain.Check_SKIPPED]],visibilityChangeEventSources:[ZaDomain.A_GALSearchTestResultCode],numCols:2,colSpan:2,items:[{type:_DWT_ALERT_,content:ZaMsg.Domain_GALSearchTestFailed,ref:null,colSpan:"2",iconVisible:true,align:_CENTER_,style:DwtAlert.WARNING},{type:_OUTPUT_,ref:ZaDomain.A_GALSearchTestResultCode,label:ZaMsg.Domain_GALTestResult,choices:this.TestResultChoices},{type:_TEXTAREA_,ref:ZaDomain.A_GALSearchTestMessage,label:ZaMsg.Domain_GALTestMessage,height:"200px",width:"400px",enableDisableChecks:[]}]},{type:_DWT_ALERT_,content:ZaMsg.Domain_GALSearchTestSkipped,ref:null,colSpan:2,iconVisible:true,align:_CENTER_,style:DwtAlert.WARNING,visibilityChecks:[[XForm.checkInstanceValue,ZaDomain.A_GALSearchTestResultCode,ZaDomain.Check_SKIPPED]],visibilityChangeEventSources:[ZaDomain.A_GALSearchTestResultCode]}]},{type:_CASE_,caseKey:ZaGALConfigXWizard.SYNC_CONFIG_SUM_STEP,items:[{type:_DWT_ALERT_,content:ZaMsg.Domain_GALSyncTestingInProgress,ref:null,colSpan:"2",iconVisible:true,align:_CENTER_,style:DwtAlert.INFORMATION,visibilityChecks:[[XForm.checkInstanceValue,ZaDomain.A2_isTestingSync,1]],visibilityChangeEventSources:[ZaDomain.A2_isTestingSync]},{type:_GROUP_,useParentTable:false,numCols:2,colSpan:2,visibilityChecks:[[XForm.checkInstanceValue,ZaDomain.A2_isTestingSync,0]],visibilityChangeEventSources:[ZaDomain.A2_isTestingSync],items:[{ref:ZaDomain.A_zimbraGalMode,type:_OUTPUT_,label:ZaMsg.Domain_GalMode,choices:this.GALModes,visibilityChecks:[[XForm.checkInstanceValue,ZaDomain.A2_isTestingGAL,0]],visibilityChangeEventSources:[ZaDomain.A2_isTestingGAL]},{ref:ZaDomain.A_GALSyncUseGALSearch,type:_OUTPUT_,label:ZaMsg.Domain_GALSyncUseGALSearch,labelLocation:_LEFT_,trueValue:"TRUE",falseValue:"FALSE",bmolsnr:true},{ref:ZaDomain.A_GALSyncServerType,type:_OUTPUT_,label:ZaMsg.Domain_GALServerType,choices:this.GALServerTypes,labelLocation:_LEFT_,visibilityChecks:[ZaNewDomainXWizard.isDomainModeNotInternal,[XForm.checkInstanceValue,ZaDomain.A_GALSyncUseGALSearch,"FALSE"]],visibilityChangeEventSources:[ZaDomain.A_zimbraGalMode,ZaDomain.A_GALSyncUseGALSearch],bmolsnr:true},{ref:ZaDomain.A_zimbraGalSyncLdapURL,type:_REPEAT_,label:ZaMsg.Domain_GalLdapURL+":",labelLocation:_LEFT_,showAddButton:false,showRemoveButton:false,bmolsnr:true,visibilityChecks:[ZaNewDomainXWizard.isDomainModeNotInternal,[XForm.checkInstanceValue,ZaDomain.A_GALSyncUseGALSearch,"FALSE"]],visibilityChangeEventSources:[ZaDomain.A_zimbraGalMode,ZaDomain.A_GALSyncUseGALSearch],items:[{type:_OUTPUT_,ref:".",label:null,labelLocation:_NONE_,bmolsnr:true}]},{ref:ZaDomain.A_zimbraGalSyncLdapFilter,type:_OUTPUT_,label:ZaMsg.Domain_GalLdapFilter,labelLocation:_LEFT_,required:true,visibilityChecks:[ZaNewDomainXWizard.isDomainModeNotInternal,[XForm.checkInstanceValue,ZaDomain.A_GALSyncUseGALSearch,"FALSE"],[XForm.checkInstanceValue,ZaDomain.A_GALServerType,ZaDomain.GAL_ServerType_ldap]],visibilityChangeEventSources:[ZaDomain.A_zimbraGalMode,ZaDomain.A_GALSyncUseGALSearch,ZaDomain.A_GALServerType],bmolsnr:true},{ref:ZaDomain.A_zimbraGalSyncLdapSearchBase,type:_OUTPUT_,label:ZaMsg.Domain_GalLdapSearchBase,labelLocation:_LEFT_,visibilityChecks:[ZaNewDomainXWizard.isDomainModeNotInternal,[XForm.checkInstanceValue,ZaDomain.A_GALSyncUseGALSearch,"FALSE"]],visibilityChangeEventSources:[ZaDomain.A_zimbraGalMode,ZaDomain.A_GALSyncUseGALSearch],bmolsnr:true},{ref:ZaDomain.A_SyncUseBindPassword,type:_OUTPUT_,label:ZaMsg.Domain_UseBindPassword,labelLocation:_LEFT_,trueValue:"TRUE",falseValue:"FALSE",visibilityChecks:[ZaNewDomainXWizard.isDomainModeNotInternal,[XForm.checkInstanceValue,ZaDomain.A_GALSyncUseGALSearch,"FALSE"]],visibilityChangeEventSources:[ZaDomain.A_zimbraGalMode,ZaDomain.A_GALSyncUseGALSearch],bmolsnr:true},{ref:ZaDomain.A_zimbraGalSyncLdapBindDn,type:_OUTPUT_,label:ZaMsg.Domain_GalLdapBindDn,labelLocation:_LEFT_,visibilityChecks:[ZaNewDomainXWizard.isDomainModeNotInternal,[XForm.checkInstanceValue,ZaDomain.A_UseBindPassword,"TRUE"],[XForm.checkInstanceValue,ZaDomain.A_GALSyncUseGALSearch,"FALSE"]],visibilityChangeEventSources:[ZaDomain.A_zimbraGalMode,ZaDomain.A_GALSyncUseGALSearch,ZaDomain.A_UseBindPassword],bmolsnr:true},{type:_CELLSPACER_},{type:_DWT_BUTTON_,onActivate:"ZaGALConfigXWizard.testSyncSettings.call(this)",label:ZaMsg.Domain_GALTestSettings,enableDisableChecks:[],visibilityChecks:[],valign:_BOTTOM_,width:"100px"}]}]},{type:_CASE_,caseKey:ZaGALConfigXWizard.SYNC_TEST_RESULT_STEP,items:[{type:_GROUP_,visibilityChecks:[[XForm.checkInstanceValue,ZaDomain.A_GALSyncTestResultCode,ZaDomain.Check_OK]],visibilityChangeEventSources:[ZaDomain.A_GALSyncTestResultCode],numCols:2,width:"100%",items:[{type:_DWT_ALERT_,content:ZaMsg.Domain_GALSyncTestSuccessful,ref:null,colSpan:"*",iconVisible:false,align:_CENTER_,style:DwtAlert.INFORMATION}]},{type:_GROUP_,visibilityChecks:[[XForm.checkInstanceValueNot,ZaDomain.A_GALSyncTestResultCode,ZaDomain.Check_OK]],visibilityChangeEventSources:[ZaDomain.A_GALSyncTestResultCode],numCols:2,width:"100%",items:[{type:_DWT_ALERT_,content:ZaMsg.Domain_GALSyncTestFailed,ref:null,colSpan:"2",iconVisible:true,align:_CENTER_,style:DwtAlert.WARNING,visibilityChecks:[[XForm.checkInstanceValueNot,ZaDomain.A_GALSyncTestResultCode,ZaDomain.Check_SKIPPED]],visibilityChangeEventSources:[ZaDomain.A_GALSyncTestResultCode]},{type:_DWT_ALERT_,content:ZaMsg.Domain_GALSyncTestSkipped,ref:null,colSpan:"2",iconVisible:true,align:_CENTER_,style:DwtAlert.WARNING,visibilityChecks:[[XForm.checkInstanceValue,ZaDomain.A_GALSyncTestResultCode,ZaDomain.Check_SKIPPED]],visibilityChangeEventSources:[ZaDomain.A_GALSyncTestResultCode]},{type:_OUTPUT_,ref:ZaDomain.A_GALSyncTestResultCode,label:ZaMsg.Domain_GALTestResult,choices:this.TestResultChoices,visibilityChecks:[[XForm.checkInstanceValueNot,ZaDomain.A_GALSyncTestResultCode,ZaDomain.Check_SKIPPED]],visibilityChangeEventSources:[ZaDomain.A_GALSyncTestResultCode]},{type:_TEXTAREA_,ref:ZaDomain.A_GALSyncTestMessage,label:ZaMsg.Domain_GALTestMessage,height:"200px",width:"380px",visibilityChecks:[function(){return((this.getInstanceValue(ZaDomain.A_GALSyncTestResultCode)!=ZaDomain.Check_SKIPPED)&&(this.getInstanceValue(ZaDomain.A_GALSyncTestResultCode)!=ZaDomain.Check_OK))
}],visibilityChangeEventSources:[ZaDomain.A_GALSyncTestResultCode]}]}]},{type:_CASE_,caseKey:ZaGALConfigXWizard.CONFIG_COMPLETE_STEP,items:[{type:_OUTPUT_,value:ZaMsg.Domain_GalConfig_Complete}]}]}]
};
ZaXDialog.XFormModifiers.ZaGALConfigXWizard.push(ZaGALConfigXWizard.myXFormModifier)
}if(AjxPackage.define("zimbraAdmin.domains.view.ZaAuthConfigXWizard")){ZaAuthConfigXWizard=function(b){ZaXWizardDialog.call(this,b,null,ZaMsg.NCD_AuthConfigTitle,"700px","350px","ZaAuthConfigXWizard",null,ZaId.DLG_AUTH_CONFIG);
this.AuthMechs=[{label:ZaMsg.AuthMech_zimbra,value:ZaDomain.AuthMech_zimbra},{label:ZaMsg.AuthMech_ldap,value:ZaDomain.AuthMech_ldap},{label:ZaMsg.AuthMech_ad,value:ZaDomain.AuthMech_ad}];
this.TestResultChoices=[{label:ZaMsg.AuthTest_check_OK,value:ZaDomain.Check_OK},{label:ZaMsg.AuthTest_check_UNKNOWN_HOST,value:ZaDomain.Check_UNKNOWN_HOST},{label:ZaMsg.AuthTest_check_CONNECTION_REFUSED,value:ZaDomain.Check_CONNECTION_REFUSED},{label:ZaMsg.AuthTest_check_SSL_HANDSHAKE_FAILURE,value:ZaDomain.Check_SSL_HANDSHAKE_FAILURE},{label:ZaMsg.AuthTest_check_COMMUNICATION_FAILURE,value:ZaDomain.Check_COMMUNICATION_FAILURE},{label:ZaMsg.AuthTest_check_AUTH_FAILED,value:ZaDomain.Check_AUTH_FAILED},{label:ZaMsg.AuthTest_check_AUTH_NOT_SUPPORTED,value:ZaDomain.Check_AUTH_NOT_SUPPORTED},{label:ZaMsg.AuthTest_check_NAME_NOT_FOUND,value:ZaDomain.Check_NAME_NOT_FOUND},{label:ZaMsg.AuthTest_check_INVALID_SEARCH_FILTER,value:ZaDomain.Check_INVALID_SEARCH_FILTER},{label:ZaMsg.AuthTest_check_FAILURE,value:ZaDomain.Check_FAILURE}];
this.TAB_INDEX=0;
ZaAuthConfigXWizard.AUTH_CONFIG_STEP_1=++this.TAB_INDEX;
ZaAuthConfigXWizard.AUTH_CONFIG_BIND_PWD_STEP=++this.TAB_INDEX;
ZaAuthConfigXWizard.AUTH_CONFIG_SUMMARY_STEP=++this.TAB_INDEX;
ZaAuthConfigXWizard.AUTH_TEST_STEP=++this.TAB_INDEX;
ZaAuthConfigXWizard.AUTH_TEST_RESULT_STEP=++this.TAB_INDEX;
ZaAuthConfigXWizard.CONFIG_COMPLETE_STEP=++this.TAB_INDEX;
this.stepChoices=[{label:ZaMsg.AuthSettings,value:ZaAuthConfigXWizard.AUTH_CONFIG_STEP_1},{label:ZaMsg.AuthSettings,value:ZaAuthConfigXWizard.AUTH_CONFIG_BIND_PWD_STEP},{label:ZaMsg.AuthSettings,value:ZaAuthConfigXWizard.AUTH_CONFIG_SUMMARY_STEP},{label:ZaMsg.TestAuthSettings,value:ZaAuthConfigXWizard.AUTH_TEST_STEP},{label:ZaMsg.AuthTestResult,value:ZaAuthConfigXWizard.AUTH_TEST_RESULT_STEP},{label:ZaMsg.DomainConfigComplete,value:ZaAuthConfigXWizard.CONFIG_COMPLETE_STEP}];
this.initForm(ZaDomain.myXModel,this.getMyXForm());
this._localXForm.addListener(DwtEvent.XFORMS_FORM_DIRTY_CHANGE,new AjxListener(this,ZaAuthConfigXWizard.prototype.handleXFormChange));
this._localXForm.addListener(DwtEvent.XFORMS_VALUE_ERROR,new AjxListener(this,ZaAuthConfigXWizard.prototype.handleXFormChange));
this.lastErrorStep=0;
this._helpURL=location.pathname+ZaUtil.HELP_URL+"managing_domains/authentication_settings.htm?locid="+AjxEnv.DEFAULT_LOCALE
};
ZaAuthConfigXWizard.prototype=new ZaXWizardDialog;
ZaAuthConfigXWizard.prototype.constructor=ZaAuthConfigXWizard;
ZaXDialog.XFormModifiers.ZaAuthConfigXWizard=new Array();
ZaAuthConfigXWizard.prototype.handleXFormChange=function(){if(this._localXForm.hasErrors()){if(this.lastErrorStep<this._containedObject[ZaModel.currentStep]){this.lastErrorStep=this._containedObject[ZaModel.currentStep]
}}else{this.lastErrorStep=0
}this.changeButtonStateForStep(this._containedObject[ZaModel.currentStep])
};
ZaAuthConfigXWizard.prototype.changeButtonStateForStep=function(b){if(this.lastErrorStep==b){this._button[DwtWizardDialog.FINISH_BUTTON].setEnabled(false);
this._button[DwtWizardDialog.NEXT_BUTTON].setEnabled(false);
if(b>1){this._button[DwtWizardDialog.PREV_BUTTON].setEnabled(true)
}}else{if(b==ZaAuthConfigXWizard.AUTH_CONFIG_STEP_1){this._button[DwtWizardDialog.NEXT_BUTTON].setText(AjxMsg._next);
this._button[DwtWizardDialog.FINISH_BUTTON].setEnabled(false);
this._button[DwtWizardDialog.NEXT_BUTTON].setEnabled(true);
this._button[DwtWizardDialog.PREV_BUTTON].setEnabled(false)
}else{if(b==ZaAuthConfigXWizard.AUTH_CONFIG_SUMMARY_STEP){this._button[DwtWizardDialog.NEXT_BUTTON].setText(ZaMsg.Domain_AuthTestSettings);
this._button[DwtWizardDialog.NEXT_BUTTON].setEnabled(true);
this._button[DwtWizardDialog.FINISH_BUTTON].setEnabled(false);
this._button[DwtWizardDialog.PREV_BUTTON].setEnabled(true)
}else{if(b==ZaAuthConfigXWizard.AUTH_TEST_STEP){this._button[DwtWizardDialog.NEXT_BUTTON].setText(AjxMsg._next);
this._button[DwtWizardDialog.NEXT_BUTTON].setEnabled(false);
this._button[DwtWizardDialog.PREV_BUTTON].setEnabled(false);
this._button[DwtWizardDialog.FINISH_BUTTON].setEnabled(false)
}else{if(b==ZaAuthConfigXWizard.CONFIG_COMPLETE_STEP){this._button[DwtWizardDialog.NEXT_BUTTON].setEnabled(false);
this._button[DwtWizardDialog.PREV_BUTTON].setEnabled(true);
this._button[DwtWizardDialog.FINISH_BUTTON].setEnabled(true)
}else{this._button[DwtWizardDialog.NEXT_BUTTON].setText(AjxMsg._next);
this._button[DwtWizardDialog.PREV_BUTTON].setEnabled(true);
this._button[DwtWizardDialog.NEXT_BUTTON].setEnabled(true);
this._button[DwtWizardDialog.FINISH_BUTTON].setEnabled(false)
}}}}}};
ZaAuthConfigXWizard.prototype.testSetings=function(){if(this._containedObject.attrs[ZaDomain.A_AuthMech]==ZaDomain.AuthMech_ad){this._containedObject.attrs[ZaDomain.A_AuthLdapUserDn]="%u@"+this._containedObject.attrs[ZaDomain.A_AuthADDomainName]
}var b=new AjxCallback(this,this.checkCallBack);
ZaDomain.testAuthSettings(this._containedObject,b)
};
ZaAuthConfigXWizard.prototype.checkCallBack=function(b){if(!b){return
}if(b.isException()){this._containedObject[ZaDomain.A_AuthTestResultCode]=b.getException().code;
this._containedObject[ZaDomain.A_AuthTestMessage]=b.getException().detail+"\n"+b.getException().msg
}else{var c=b.getResponse().Body.CheckAuthConfigResponse;
this._containedObject[ZaDomain.A_AuthTestResultCode]=c.code[0]._content;
if(this._containedObject[ZaDomain.A_AuthTestResultCode]!=ZaDomain.Check_OK){this._containedObject[ZaDomain.A_AuthTestMessage]=c.message[0]._content;
if(c.bindDn!=null){this._containedObject[ZaDomain.A_AuthComputedBindDn]=c.bindDn[0]._content
}else{this._containedObject[ZaDomain.A_AuthComputedBindDn]=""
}}}this.goPage(ZaAuthConfigXWizard.AUTH_TEST_RESULT_STEP)
};
ZaAuthConfigXWizard.onAuthMechChange=function(d,c,b){this.setInstanceValue(d);
if(d==ZaDomain.AuthMech_ad){if(!b.getInstance().attrs[ZaDomain.A_AuthADDomainName]){this.setInstanceValue(b.getInstance().attrs[ZaDomain.A_domainName],ZaDomain.A_AuthADDomainName)
}}};
ZaAuthConfigXWizard.prototype.popup=function(b){ZaXWizardDialog.prototype.popup.call(this,b);
this.changeButtonStateForStep(ZaAuthConfigXWizard.AUTH_CONFIG_STEP_1)
};
ZaAuthConfigXWizard.prototype.goPage=function(b){ZaXWizardDialog.prototype.goPage.call(this,b);
this.changeButtonStateForStep(b)
};
ZaAuthConfigXWizard.prototype.goPrev=function(){if(this._containedObject[ZaModel.currentStep]==ZaAuthConfigXWizard.AUTH_TEST_RESULT_STEP){this.goPage(ZaAuthConfigXWizard.AUTH_CONFIG_SUMMARY_STEP)
}else{if(this._containedObject[ZaModel.currentStep]==ZaAuthConfigXWizard.AUTH_CONFIG_SUMMARY_STEP&&this._containedObject.attrs[ZaDomain.A_AuthMech]==ZaDomain.AuthMech_ad){this.goPage(ZaAuthConfigXWizard.AUTH_CONFIG_STEP_1)
}else{if(this._containedObject[ZaModel.currentStep]==ZaAuthConfigXWizard.CONFIG_COMPLETE_STEP&&this._containedObject.attrs[ZaDomain.A_AuthMech]==ZaDomain.AuthMech_zimbra){this.goPage(ZaAuthConfigXWizard.AUTH_CONFIG_STEP_1)
}else{this.goPage(this._containedObject[ZaModel.currentStep]-1)
}}}};
ZaAuthConfigXWizard.prototype.goNext=function(){if(this._containedObject[ZaModel.currentStep]==ZaAuthConfigXWizard.AUTH_CONFIG_SUMMARY_STEP){this.testSetings();
this.goPage(ZaAuthConfigXWizard.AUTH_TEST_STEP)
}else{if(this._containedObject[ZaModel.currentStep]==ZaAuthConfigXWizard.AUTH_CONFIG_STEP_1&&this._containedObject.attrs[ZaDomain.A_AuthMech]==ZaDomain.AuthMech_ad){if(!this._containedObject.attrs[ZaDomain.A_AuthLdapURL]){ZaApp.getInstance().getCurrentController().popupErrorDialog(ZaMsg.ERROR_LDAP_URL_REQUIRED);
return false
}this.goPage(ZaAuthConfigXWizard.AUTH_CONFIG_SUMMARY_STEP)
}else{if(this._containedObject[ZaModel.currentStep]==ZaAuthConfigXWizard.AUTH_CONFIG_STEP_1&&this._containedObject.attrs[ZaDomain.A_AuthMech]==ZaDomain.AuthMech_ldap){var b=this._containedObject.attrs[ZaDomain.A_AuthLdapURL].join(" ");
if(this._containedObject.attrs[ZaDomain.A_zimbraAuthLdapStartTlsEnabled]=="TRUE"){if(b.indexOf("ldaps://")>-1){ZaApp.getInstance().getCurrentController().popupWarningDialog(ZaMsg.Domain_WarningStartTLSIgnored)
}}this.goPage(ZaAuthConfigXWizard.AUTH_CONFIG_BIND_PWD_STEP)
}else{if(this._containedObject[ZaModel.currentStep]==ZaAuthConfigXWizard.AUTH_CONFIG_BIND_PWD_STEP){if(this._containedObject[ZaDomain.A_AuthUseBindPassword]=="FALSE"){this._containedObject.attrs[ZaDomain.A_AuthLdapSearchBindDn]=null;
this._containedObject.attrs[ZaDomain.A_AuthLdapSearchBindPassword]=null;
this._containedObject[ZaDomain.A_AuthLdapSearchBindPasswordConfirm]=null
}if(this._containedObject.attrs[ZaDomain.A_AuthLdapSearchBindPassword]!=this._containedObject[ZaDomain.A_AuthLdapSearchBindPasswordConfirm]){ZaApp.getInstance().getCurrentController().popupErrorDialog(ZaMsg.ERROR_PASSWORD_MISMATCH);
return false
}this.goPage(ZaAuthConfigXWizard.AUTH_CONFIG_SUMMARY_STEP)
}else{if(this._containedObject[ZaModel.currentStep]==ZaAuthConfigXWizard.AUTH_CONFIG_STEP_1&&this._containedObject.attrs[ZaDomain.A_AuthMech]==ZaDomain.AuthMech_zimbra){this.goPage(ZaAuthConfigXWizard.CONFIG_COMPLETE_STEP)
}else{this.goPage(this._containedObject[ZaModel.currentStep]+1)
}}}}}};
ZaAuthConfigXWizard.prototype.setObject=function(c){this._containedObject=new Object();
this._containedObject.attrs=new Object();
for(var b in c.attrs){this._containedObject.attrs[b]=c.attrs[b]
}this._containedObject.name=c.name;
this._containedObject.type=c.type;
this._containedObject.id=c.id;
if(c.rights){this._containedObject.rights=c.rights
}if(c.setAttrs){this._containedObject.setAttrs=c.setAttrs
}if(c.getAttrs){this._containedObject.getAttrs=c.getAttrs
}if(c._defaultValues){this._containedObject._defaultValues=c._defaultValues
}this._containedObject[ZaDomain.A_AuthUseBindPassword]=c[ZaDomain.A_AuthUseBindPassword];
this.setTitle(ZaMsg.NCD_AuthConfigTitle+" ("+c.name+")");
if(ZaSettings.isDomainAdmin&&(c.attrs[ZaDomain.A_zimbraAdminConsoleLDAPAuthEnabled]=="TRUE")&&c.attrs[ZaDomain.A_zimbraAuthLdapStartTlsEnabled]!="TRUE"){this._containedObject[ZaDomain.A2_allowClearTextLDAPAuth]="FALSE"
}this._containedObject[ZaModel.currentStep]=ZaAuthConfigXWizard.AUTH_CONFIG_STEP_1;
this._localXForm.setInstance(this._containedObject)
};
ZaAuthConfigXWizard.myXFormModifier=function(b){b.items=[{type:_OUTPUT_,colSpan:2,valign:_TOP_,cssStyle:"white-space: normal",ref:ZaModel.currentStep,choices:this.stepChoices,valueChangeEventSources:[ZaModel.currentStep]},{type:_SEPARATOR_,align:_CENTER_,valign:_TOP_},{type:_SPACER_,align:_CENTER_,valign:_TOP_},{type:_SWITCH_,width:650,valign:_TOP_,cssStyle:"white-space: normal",items:[{type:_CASE_,numCols:2,colSizes:["220px","430px"],caseKey:ZaAuthConfigXWizard.AUTH_CONFIG_STEP_1,items:[{type:_OSELECT1_,label:ZaMsg.Domain_AuthMech,choices:this.AuthMechs,ref:ZaDomain.A_AuthMech,onChange:ZaAuthConfigXWizard.onAuthMechChange,enableDisableChecks:[],visibilityChecks:[]},{type:_GROUP_,colSpan:2,numCols:2,colSizes:["220px","430px"],visibilityChecks:[[XForm.checkInstanceValue,ZaDomain.A_AuthMech,ZaDomain.AuthMech_ad]],visibilityChangeEventSources:[ZaDomain.A_AuthMech],items:[{type:_SPACER_,height:5,colSpan:2},{ref:ZaDomain.A_AuthADDomainName,type:_TEXTFIELD_,label:ZaMsg.Domain_AuthADDomainName,labelLocation:_LEFT_,visibilityChecks:[],enableDisableChecks:[],bmolsnr:true},{type:_GROUP_,numCols:6,colSpan:2,label:"   ",labelLocation:_LEFT_,items:[{type:_OUTPUT_,label:null,labelLocation:_NONE_,value:" ",width:"35px"},{type:_OUTPUT_,label:null,labelLocation:_NONE_,value:ZaMsg.Domain_AuthADServerName,width:"200px"},{type:_OUTPUT_,label:null,labelLocation:_NONE_,value:" ",width:"5px"},{type:_OUTPUT_,label:null,labelLocation:_NONE_,value:ZaMsg.Domain_AuthADServerPort,width:"40px"},{type:_OUTPUT_,label:null,labelLocation:_NONE_,value:ZaMsg.Domain_AuthADUseSSL,width:"40px"}]},{ref:ZaDomain.A_AuthLdapURL,type:_REPEAT_,label:ZaMsg.Domain_AuthADURL,repeatInstance:"",showAddButton:true,showRemoveButton:true,addButtonLabel:ZaMsg.Domain_AddURL,removeButtonLabel:ZaMsg.Domain_REPEAT_REMOVE,showAddOnNextRow:true,items:[{ref:".",type:_LDAPURL_,label:null,labelLocation:_NONE_,ldapSSLPort:"3269",ldapPort:"3268",visibilityChecks:[],enableDisableChecks:[]}]}]},{type:_GROUP_,colSpan:2,numCols:2,colSizes:["220px","430px"],visibilityChecks:[[XForm.checkInstanceValue,ZaDomain.A_AuthMech,ZaDomain.AuthMech_ldap]],visibilityChangeEventSources:[ZaDomain.A_AuthMech],items:[{type:_GROUP_,numCols:6,colSpan:2,label:"   ",labelLocation:_LEFT_,items:[{type:_OUTPUT_,label:null,labelLocation:_NONE_,value:" ",width:"35px"},{type:_OUTPUT_,label:null,labelLocation:_NONE_,value:ZaMsg.Domain_AuthLDAPServerName,width:"200px"},{type:_OUTPUT_,label:null,labelLocation:_NONE_,value:" ",width:"5px"},{type:_OUTPUT_,label:null,labelLocation:_NONE_,value:ZaMsg.Domain_AuthLDAPServerPort,width:"40px"},{type:_OUTPUT_,label:null,labelLocation:_NONE_,value:ZaMsg.Domain_AuthLDAPUseSSL,width:"40px"}]},{ref:ZaDomain.A_AuthLdapURL,type:_REPEAT_,label:ZaMsg.Domain_AuthLdapURL,repeatInstance:"",showAddButton:true,showRemoveButton:true,addButtonLabel:ZaMsg.Domain_AddURL,removeButtonLabel:ZaMsg.Domain_REPEAT_REMOVE,showAddOnNextRow:true,items:[{ref:".",type:_LDAPURL_,label:null,ldapSSLPort:"636",ldapPort:"389",labelLocation:_NONE_,visibilityChecks:[],enableDisableChecks:[]}]},{ref:ZaDomain.A_zimbraAuthLdapStartTlsEnabled,type:_CHECKBOX_,label:ZaMsg.Domain_AuthLdapStartTlsEnabled,onChange:ZaAuthConfigXWizard.startTlsEnabledChanged,trueValue:"TRUE",falseValue:"FALSE",labelLocation:_RIGHT_},{ref:ZaDomain.A_AuthLdapSearchFilter,type:_TEXTAREA_,width:380,height:40,label:ZaMsg.Domain_AuthLdapFilter,labelLocation:_LEFT_,textWrapping:"soft"},{ref:ZaDomain.A_AuthLdapSearchBase,type:_TEXTAREA_,width:380,height:40,label:ZaMsg.Domain_AuthLdapSearchBase,labelLocation:_LEFT_,textWrapping:"soft"},{type:_OUTPUT_,value:ZaMsg.NAD_DomainsAuthStr,colSpan:2}]}]},{type:_CASE_,numCols:2,colSizes:["220px","430px"],caseKey:ZaAuthConfigXWizard.AUTH_CONFIG_BIND_PWD_STEP,visibilityChecks:[Case_XFormItem.prototype.isCurrentTab,[XForm.checkInstanceValue,ZaDomain.A_AuthMech,ZaDomain.AuthMech_ldap]],items:[{ref:ZaDomain.A_AuthUseBindPassword,type:_CHECKBOX_,label:ZaMsg.Domain_AuthUseBindPassword,labelLocation:_LEFT_,trueValue:"TRUE",falseValue:"FALSE",labelCssClass:"xform_label",align:_LEFT_,visibilityChecks:[],enableDisableChecks:[]},{ref:ZaDomain.A_AuthLdapSearchBindDn,type:_INPUT_,label:ZaMsg.Domain_AuthLdapBindDn,labelLocation:_LEFT_,enableDisableChecks:[[XForm.checkInstanceValue,ZaDomain.A_AuthUseBindPassword,"TRUE"]],enableDisableChangeEventSources:[ZaDomain.A_AuthUseBindPassword],visibilityChecks:[]},{ref:ZaDomain.A_AuthLdapSearchBindPassword,type:_SECRET_,label:ZaMsg.Domain_AuthLdapBindPassword,labelLocation:_LEFT_,enableDisableChecks:[[XForm.checkInstanceValue,ZaDomain.A_AuthUseBindPassword,"TRUE"]],enableDisableChangeEventSources:[ZaDomain.A_AuthUseBindPassword],visibilityChecks:[]},{ref:ZaDomain.A_AuthLdapSearchBindPasswordConfirm,type:_SECRET_,label:ZaMsg.Domain_AuthLdapBindPasswordConfirm,labelLocation:_LEFT_,enableDisableChecks:[[XForm.checkInstanceValue,ZaDomain.A_AuthUseBindPassword,"TRUE"]],enableDisableChangeEventSources:[ZaDomain.A_AuthUseBindPassword],visibilityChecks:[]}]},{type:_CASE_,numCols:2,colSizes:["220px","430px"],caseKey:ZaAuthConfigXWizard.AUTH_CONFIG_SUMMARY_STEP,visibilityChecks:[Case_XFormItem.prototype.isCurrentTab,ZaNewDomainXWizard.isAuthMechNotZimbra],items:[{type:_OUTPUT_,value:ZaMsg.Domain_Auth_ConfigSummary,align:_CENTER_,colSpan:"*"},{type:_SPACER_,height:10},{ref:ZaDomain.A_AuthMech,type:_OUTPUT_,label:ZaMsg.Domain_AuthMech,choices:this.AuthMechs,alignment:_LEFT_},{type:_GROUP_,useParentTable:true,visibilityChecks:[[XForm.checkInstanceValue,ZaDomain.A_AuthMech,ZaDomain.AuthMech_ad]],visibilityChangeEventSources:[ZaDomain.A_AuthMech],items:[{ref:ZaDomain.A_AuthADDomainName,type:_OUTPUT_,label:ZaMsg.Domain_AuthADDomainName,labelLocation:_LEFT_},{ref:ZaDomain.A_AuthLdapURL,type:_REPEAT_,label:ZaMsg.Domain_AuthLdapURL,labelLocation:_LEFT_,showAddButton:false,showRemoveButton:false,items:[{type:_OUTPUT_,ref:".",label:null,labelLocation:_NONE_}]}]},{type:_GROUP_,useParentTable:true,visibilityChecks:[[XForm.checkInstanceValue,ZaDomain.A_AuthMech,ZaDomain.AuthMech_ldap]],visibilityChangeEventSources:[ZaDomain.A_AuthMech],items:[{ref:ZaDomain.A_AuthLdapURL,type:_REPEAT_,label:ZaMsg.Domain_AuthLdapURL,labelLocation:_LEFT_,showAddButton:false,showRemoveButton:false,visibilityChecks:[],items:[{type:_OUTPUT_,ref:".",label:null,labelLocation:_NONE_,visibilityChecks:[]}]},{ref:ZaDomain.A_zimbraAuthLdapStartTlsEnabled,type:_OUTPUT_,label:ZaMsg.Domain_AuthLdapStartTlsEnabled,labelLocation:_LEFT_,choices:ZaModel.BOOLEAN_CHOICES,visibilityChecks:[]},{ref:ZaDomain.A_AuthLdapSearchFilter,type:_OUTPUT_,label:ZaMsg.Domain_AuthLdapFilter,labelLocation:_LEFT_,visibilityChecks:[]},{ref:ZaDomain.A_AuthLdapSearchBase,type:_OUTPUT_,label:ZaMsg.Domain_AuthLdapSearchBase,labelLocation:_LEFT_,visibilityChecks:[]},{ref:ZaDomain.A_AuthUseBindPassword,type:_OUTPUT_,label:ZaMsg.Domain_AuthUseBindPassword,labelLocation:_LEFT_,choices:ZaModel.BOOLEAN_CHOICES},{ref:ZaDomain.A_AuthLdapSearchBindDn,type:_OUTPUT_,label:ZaMsg.Domain_AuthLdapBindDn,labelLocation:_LEFT_,visibilityChecks:[[XForm.checkInstanceValue,ZaDomain.A_AuthUseBindPassword,"TRUE"]],visibilityChangeEventSources:[ZaDomain.A_AuthUseBindPassword]}]},{type:_SPACER_,height:10},{type:_OUTPUT_,value:ZaMsg.Domain_AuthProvideLoginPwd,align:_CENTER_,colSpan:"*",visibilityChecks:[]},{type:_TEXTFIELD_,label:ZaMsg.LBL_Domain_AuthTestUserName,ref:ZaDomain.A_AuthTestUserName,alignment:_LEFT_,visibilityChecks:[],enableDisableChecks:[]},{type:_SECRET_,label:ZaMsg.LBL_Domain_AuthTestPassword,ref:ZaDomain.A_AuthTestPassword,alignment:_LEFT_,visibilityChecks:[],enableDisableChecks:[]}]},{type:_CASE_,caseKey:ZaAuthConfigXWizard.AUTH_TEST_STEP,numCols:1,colSizes:["100%"],visibilityChecks:[Case_XFormItem.prototype.isCurrentTab,ZaNewDomainXWizard.isAuthMechNotZimbra],visibilityChangeEventSources:[ZaModel.currentStep],items:[{type:_DWT_ALERT_,content:ZaMsg.Domain_AuthTestingInProgress,style:DwtAlert.WARNING}]},{type:_CASE_,numCols:2,colSizes:["220px","430px"],caseKey:ZaAuthConfigXWizard.AUTH_TEST_RESULT_STEP,visibilityChecks:[Case_XFormItem.prototype.isCurrentTab,ZaNewDomainXWizard.isAuthMechNotZimbra],visibilityChangeEventSources:[ZaModel.currentStep],items:[{type:_DWT_ALERT_,style:DwtAlert.INFORMATION,content:ZaMsg.Domain_AuthTestSuccessful,alignment:_CENTER_,colSpan:2,visibilityChecks:[[XForm.checkInstanceValue,ZaDomain.A_AuthTestResultCode,ZaDomain.Check_OK]],visibilityChangeEventSources:[ZaDomain.A_AuthTestResultCode]},{type:_GROUP_,isTabGroup:false,deferred:false,colSpan:2,visibilityChangeEventSources:[ZaDomain.A_AuthTestResultCode],visibilityChecks:[function(){return(this.getInstanceValue(ZaDomain.A_AuthTestResultCode)!=ZaDomain.Check_OK)
}],items:[{type:_DWT_ALERT_,content:ZaMsg.Domain_AuthTestFailed,alignment:_CENTER_,colSpan:2,style:DwtAlert.CRITICAL},{type:_OUTPUT_,ref:ZaDomain.A_AuthTestResultCode,label:ZaMsg.LBL_Domain_AuthTestResultCode,choices:this.TestResultChoices},{type:_OUTPUT_,ref:ZaDomain.A_AuthComputedBindDn,label:ZaMsg.LBL_Domain_AuthComputedBindDn,visibilityChangeEventSources:[ZaDomain.A_AuthMech],visibilityChecks:[[XForm.checkInstanceValue,ZaDomain.A_AuthMech,ZaDomain.AuthMech_ad]]},{type:_TEXTAREA_,ref:ZaDomain.A_AuthTestMessage,label:ZaMsg.LBL_Domain_AuthTestMessage,height:150,alignment:_LEFT_,width:"320px"}]}]},{type:_CASE_,caseKey:ZaAuthConfigXWizard.CONFIG_COMPLETE_STEP,items:[{type:_OUTPUT_,value:ZaMsg.Domain_Auth_Config_Complete}]}]}]
};
ZaXDialog.XFormModifiers.ZaAuthConfigXWizard.push(ZaAuthConfigXWizard.myXFormModifier);
ZaAuthConfigXWizard.startTlsEnabledChanged=function(h,g,f){this.setInstanceValue(h);
var b=f.getInstance();
var j=b.attrs[ZaDomain.A_AuthLdapURL];
var e=[];
if(ZaSettings.isDomainAdmin&&(b.attrs[ZaDomain.A_zimbraAdminConsoleLDAPAuthEnabled]=="TRUE")&&b.attrs[ZaDomain.A_zimbraAuthLdapStartTlsEnabled]!="TRUE"){b[ZaDomain.A2_allowClearTextLDAPAuth]="FALSE";
for(var d=0;
d<j.length;
d++){var c=j[d];
if(c==null||c.length<=0){}else{j[d]=c.replace("ldap://","ldaps://");
e.push(j[d])
}}}else{for(var d=0;
d<j.length;
d++){var c=j[d];
if(c==null||c.length<=0){}else{e.push(j[d])
}}b[ZaDomain.A2_allowClearTextLDAPAuth]="TRUE"
}b.attrs[ZaDomain.A_AuthLdapURL]=e;
f.refresh()
}
}if(AjxPackage.define("zimbraAdmin.domains.view.ZaTaskAuthConfigWizard")){ZaTaskAuthConfigWizard=function(b){ZaXWizardDialog.call(this,b,null,ZaMsg.NCD_AuthConfigTitle,"700px","350px","ZaTaskAuthConfigWizard",null,ZaId.DLG_AUTH_CONFIG);
this.AuthMechs=[{label:"<b>"+ZaMsg.AuthMech_zimbra+"</b>",value:ZaDomain.AuthMech_zimbra},{label:"<b>"+ZaMsg.AuthMech_ldap+"</b>",value:ZaDomain.AuthMech_ldap},{label:"<b>"+ZaMsg.AuthMech_ad+"</b>",value:ZaDomain.AuthMech_ad}];
this.TestResultChoices=[{label:ZaMsg.AuthTest_check_OK,value:ZaDomain.Check_OK},{label:ZaMsg.AuthTest_check_UNKNOWN_HOST,value:ZaDomain.Check_UNKNOWN_HOST},{label:ZaMsg.AuthTest_check_CONNECTION_REFUSED,value:ZaDomain.Check_CONNECTION_REFUSED},{label:ZaMsg.AuthTest_check_SSL_HANDSHAKE_FAILURE,value:ZaDomain.Check_SSL_HANDSHAKE_FAILURE},{label:ZaMsg.AuthTest_check_COMMUNICATION_FAILURE,value:ZaDomain.Check_COMMUNICATION_FAILURE},{label:ZaMsg.AuthTest_check_AUTH_FAILED,value:ZaDomain.Check_AUTH_FAILED},{label:ZaMsg.AuthTest_check_AUTH_NOT_SUPPORTED,value:ZaDomain.Check_AUTH_NOT_SUPPORTED},{label:ZaMsg.AuthTest_check_NAME_NOT_FOUND,value:ZaDomain.Check_NAME_NOT_FOUND},{label:ZaMsg.AuthTest_check_INVALID_SEARCH_FILTER,value:ZaDomain.Check_INVALID_SEARCH_FILTER},{label:ZaMsg.AuthTest_check_FAILURE,value:ZaDomain.Check_FAILURE}];
this.TAB_INDEX=0;
ZaTaskAuthConfigWizard.AUTH_CONFIG_CHOOSE_MODE_STEP=++this.TAB_INDEX;
ZaTaskAuthConfigWizard.AUTH_CONFIG_AUTH_SET_STEP=++this.TAB_INDEX;
ZaTaskAuthConfigWizard.AUTH_CONFIG_BIND_PWD_STEP=++this.TAB_INDEX;
ZaTaskAuthConfigWizard.AUTH_CONFIG_SUMMARY_STEP=++this.TAB_INDEX;
ZaTaskAuthConfigWizard.EXTERNAL_LDAP_GROUP_STEP=++this.TAB_INDEX;
ZaTaskAuthConfigWizard.CONFIG_COMPLETE_STEP=++this.TAB_INDEX;
ZaTaskAuthConfigWizard.AUTH_CONFIG_START_STEP=ZaTaskAuthConfigWizard.AUTH_CONFIG_CHOOSE_MODE_STEP;
this.STEPS=[ZaTaskAuthConfigWizard.AUTH_CONFIG_START_STEP];
this.stepChoices=[{label:ZaMsg.stepAuthModeForDomain,value:ZaTaskAuthConfigWizard.AUTH_CONFIG_CHOOSE_MODE_STEP},{label:ZaMsg.stepAuthSetting,value:ZaTaskAuthConfigWizard.AUTH_CONFIG_AUTH_SET_STEP},{label:ZaMsg.stepAuthBindLDAP,value:ZaTaskAuthConfigWizard.AUTH_CONFIG_BIND_PWD_STEP},{label:ZaMsg.stepAuthSummary,value:ZaTaskAuthConfigWizard.AUTH_CONFIG_SUMMARY_STEP},{label:ZaMsg.NAD_ExternalGroup_Setting,value:ZaTaskAuthConfigWizard.EXTERNAL_LDAP_GROUP_STEP},{label:ZaMsg.DomainConfigComplete,value:ZaTaskAuthConfigWizard.CONFIG_COMPLETE_STEP}];
this.initForm(ZaDomain.myXModel,this.getMyXForm());
this._localXForm.addListener(DwtEvent.XFORMS_FORM_DIRTY_CHANGE,new AjxListener(this,ZaTaskAuthConfigWizard.prototype.handleXFormChange));
this._localXForm.addListener(DwtEvent.XFORMS_VALUE_ERROR,new AjxListener(this,ZaTaskAuthConfigWizard.prototype.handleXFormChange));
this.lastErrorStep=0;
this._helpURL=location.pathname+ZaUtil.HELP_URL+"managing_domains/authentication_settings.htm?locid="+AjxEnv.DEFAULT_LOCALE
};
ZaTaskAuthConfigWizard.prototype=new ZaXWizardDialog;
ZaTaskAuthConfigWizard.prototype.constructor=ZaTaskAuthConfigWizard;
ZaTaskAuthConfigWizard.prototype.cacheDialog=false;
ZaXDialog.XFormModifiers.ZaTaskAuthConfigWizard=new Array();
if(ZaDomain){ZaDomain.A2_zimbraSpnegoAuthRealm="zimbraSpnegoAuthRealm";
ZaDomain.A2_zimbraSpnegoAuthErrorURL="zimbraSpnegoAuthErrorURL";
ZaDomain.A2_zimbraSpnegoGlobalAuthEnabled="zimbraSpnegoGlobalAuthEnabled";
ZaDomain.A2_zimbraSpnegoAuthSummary="zimbraSpnegoAuthSummary";
ZaDomain.A2_zimbraSpnegoApplyFor="zimbraSpnegoApplyFor";
ZaDomain.A2_zimbraSpnegoAuthPrincipal="zimbraSpnegoAuthPrincipal";
ZaDomain.A2_zimbraSpnegoAuthTargetName="zimbraSpnegoAuthTargetName";
ZaDomain.A2_zimbraSpnegoUAAllBrowsers="zimbraSpnegoUA_AllBrowsers";
ZaDomain.A2_zimbraSpnegoUASupportedBrowsers="zimbraSpnegoUA_SupportedBrowsers";
ZaDomain.A2_zimbraSpnegoUACustomBrowsers="zimbraSpnegoUA_CustomBrowsers";
ZaDomain.A2_zimbraWebClientURLAllowedUA="zimbraWebClientURLAllowedUA";
ZaDomain.A2_zimbraSpnegoTargetServer="zimbraSpnegoTargetServer";
ZaDomain.A2_zimbraSpnegoGlobalSettingStatus="zimbraSpnegoGlobalSettingStatus";
ZaDomain.A_zimbraExternalGroupLdapSearchBase="zimbraExternalGroupLdapSearchBase";
ZaDomain.A_zimbraExternalGroupLdapSearchFilter="zimbraExternalGroupLdapSearchFilter";
ZaDomain.A_zimbraExternalGroupHandlerClass="zimbraExternalGroupHandlerClass";
ZaDomain.A_zimbraAuthMechAdmin="zimbraAuthMechAdmin";
ZaDomain.A2_zimbraExternalGroupLdapEnabled="zimbraExternalGroupLdapEnabled";
ZaDomain.A2_zimbraAuthConfigTestStatus="zimbraAuthConfigTestStatus";
if(ZaDomain.myXModel){ZaDomain.myXModel.items.push({id:ZaDomain.A2_zimbraSpnegoApplyFor,ref:ZaDomain.A2_zimbraSpnegoApplyFor,type:_STRING_},{id:ZaDomain.A2_zimbraSpnegoGlobalSettingStatus,ref:ZaDomain.A2_zimbraSpnegoGlobalSettingStatus,type:_STRING_},{id:ZaDomain.A2_zimbraWebClientURLAllowedUA,ref:ZaDomain.A2_zimbraWebClientURLAllowedUA,type:_STRING_},{id:ZaDomain.A2_zimbraSpnegoTargetServer,type:_STRING_,ref:ZaDomain.A2_zimbraSpnegoTargetServer},{id:ZaDomain.A2_zimbraSpnegoAuthPrincipal,ref:ZaDomain.A2_zimbraSpnegoAuthPrincipal,type:_STRING_},{id:ZaDomain.A2_zimbraSpnegoAuthRealm,ref:ZaDomain.A2_zimbraSpnegoAuthRealm,type:_STRING_},{id:ZaDomain.A2_zimbraSpnegoAuthTargetName,ref:ZaDomain.A2_zimbraSpnegoAuthTargetName,type:_STRING_},{id:ZaDomain.A2_zimbraSpnegoAuthErrorURL,ref:ZaDomain.A2_zimbraSpnegoAuthErrorURL,type:_STRING_},{id:ZaDomain.A2_zimbraSpnegoGlobalAuthEnabled,ref:ZaDomain.A2_zimbraSpnegoGlobalAuthEnabled,type:_ENUM_,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaDomain.A2_zimbraSpnegoAuthSummary,ref:ZaDomain.A2_zimbraSpnegoAuthSummary,type:_ENUM_,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaDomain.A2_zimbraSpnegoUAAllBrowsers,ref:ZaDomain.A2_zimbraSpnegoUAAllBrowsers,type:_ENUM_,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaDomain.A2_zimbraSpnegoUASupportedBrowsers,ref:ZaDomain.A2_zimbraSpnegoUASupportedBrowsers,type:_ENUM_,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaDomain.A2_zimbraSpnegoUACustomBrowsers,ref:ZaDomain.A2_zimbraSpnegoUACustomBrowsers,type:_ENUM_,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaDomain.A2_zimbraAuthConfigTestStatus,ref:ZaDomain.A2_zimbraAuthConfigTestStatus,type:_ENUM_,choices:["STANDBY","RUNNING","RUNNED"]});
ZaDomain.myXModel.items.push({id:ZaDomain.A2_zimbraExternalGroupLdapEnabled,ref:ZaDomain.A2_zimbraExternalGroupLdapEnabled,type:_ENUM_,choices:ZaModel.BOOLEAN_CHOICES},{id:ZaDomain.A_zimbraExternalGroupLdapSearchBase,type:_STRING_,ref:"attrs/"+ZaDomain.A_zimbraExternalGroupLdapSearchBase},{id:ZaDomain.A_zimbraExternalGroupLdapSearchFilter,type:_STRING_,ref:"attrs/"+ZaDomain.A_zimbraExternalGroupLdapSearchFilter},{id:ZaDomain.A_zimbraExternalGroupHandlerClass,type:_STRING_,ref:"attrs/"+ZaDomain.A_zimbraExternalGroupHandlerClass},{id:ZaDomain.A_zimbraAuthMechAdmin,type:_STRING_,ref:"attrs/"+ZaDomain.A_zimbraAuthMechAdmin})
}ZaTaskAuthConfigWizard.loadExtLdapGroup=function(b){if(!this.attrs[ZaDomain.A_zimbraExternalGroupHandlerClass]){this.attrs[ZaDomain.A_zimbraExternalGroupHandlerClass]="com.zimbra.cs.account.grouphandler.ADGroupHandler"
}if(!this.attrs[ZaDomain.A_zimbraAuthMechAdmin]){this.attrs[ZaDomain.A_zimbraAuthMechAdmin]=ZaDomain.AuthMech_ad
}if(this.attrs[ZaDomain.A_AuthMech]!=ZaDomain.AuthMech_zimbra){this[ZaDomain.A2_zimbraExternalGroupLdapEnabled]="TRUE"
}else{this[ZaDomain.A2_zimbraExternalGroupLdapEnabled]="FALSE"
}};
ZaTaskAuthConfigWizard.loadAuthConfWizard=function(b){this[ZaDomain.A2_zimbraAuthConfigTestStatus]="STANDBY"
};
ZaItem.loadMethods.ZaDomain.push(ZaTaskAuthConfigWizard.loadAuthConfWizard);
ZaItem.loadMethods.ZaDomain.push(ZaTaskAuthConfigWizard.loadExtLdapGroup)
}ZaDomain.TARGET_SERVER_CHOICES=[];
ZaTaskAuthConfigWizard.prototype.handleXFormChange=function(){if(this._localXForm.hasErrors()){if(this.lastErrorStep<this._containedObject[ZaModel.currentStep]){this.lastErrorStep=this._containedObject[ZaModel.currentStep]
}}else{this.lastErrorStep=0
}this.changeButtonStateForStep(this._containedObject[ZaModel.currentStep])
};
ZaTaskAuthConfigWizard.prototype.changeButtonStateForStep=function(d){this._button[DwtDialog.CANCEL_BUTTON].setVisible(true);
this._button[ZaXWizardDialog.HELP_BUTTON].setVisible(true);
this._button[DwtWizardDialog.FINISH_BUTTON].setVisible(true);
if(this.lastErrorStep==d){this._button[DwtWizardDialog.FINISH_BUTTON].setEnabled(false);
this._button[DwtWizardDialog.NEXT_BUTTON].setEnabled(false);
if(d>1){this._button[DwtWizardDialog.PREV_BUTTON].setEnabled(true)
}}else{if(d==ZaTaskAuthConfigWizard.AUTH_CONFIG_CHOOSE_MODE_STEP){this._button[DwtWizardDialog.FINISH_BUTTON].setEnabled(false);
this._button[DwtWizardDialog.NEXT_BUTTON].setEnabled(true);
this._button[DwtWizardDialog.PREV_BUTTON].setEnabled(false)
}else{if(d==ZaTaskAuthConfigWizard.CONFIG_COMPLETE_STEP){this._button[DwtWizardDialog.NEXT_BUTTON].setEnabled(false);
this._button[DwtWizardDialog.PREV_BUTTON].setEnabled(true);
this._button[DwtWizardDialog.FINISH_BUTTON].setEnabled(true)
}else{if(d==ZaTaskAuthConfigWizard.AUTH_CONFIG_AUTH_SET_STEP){var b=false;
var c=this._containedObject.attrs[ZaDomain.A_AuthMech];
if(((c==ZaDomain.AuthMech_ad)&&!AjxUtil.isEmpty(this._localXForm.getInstanceValue(ZaDomain.A_AuthADDomainName)))||((c==ZaDomain.AuthMech_ldap)&&!AjxUtil.isEmpty(this._localXForm.getInstanceValue(ZaDomain.A_AuthLdapURL)))){b=true
}this._button[DwtWizardDialog.PREV_BUTTON].setEnabled(true);
this._button[DwtWizardDialog.NEXT_BUTTON].setEnabled(b);
this._button[DwtWizardDialog.FINISH_BUTTON].setEnabled(false)
}else{this._button[DwtWizardDialog.PREV_BUTTON].setEnabled(true);
this._button[DwtWizardDialog.NEXT_BUTTON].setEnabled(true);
this._button[DwtWizardDialog.FINISH_BUTTON].setEnabled(false)
}}}}};
ZaTaskAuthConfigWizard.prototype.testSetings=function(){if(this._containedObject.attrs[ZaDomain.A_AuthMech]==ZaDomain.AuthMech_ad){this._containedObject.attrs[ZaDomain.A_AuthLdapUserDn]="%u@"+this._containedObject.attrs[ZaDomain.A_AuthADDomainName]
}var b=new AjxCallback(this,this.checkCallBack);
ZaDomain.testAuthSettings(this._containedObject,b)
};
ZaTaskAuthConfigWizard.prototype.checkCallBack=function(b){if(!b){return
}if(b.isException()){this._containedObject[ZaDomain.A_AuthTestResultCode]=b.getException().code;
this._containedObject[ZaDomain.A_AuthTestMessage]=b.getException().detail+"\n"+b.getException().msg
}else{var c=b.getResponse().Body.CheckAuthConfigResponse;
this._containedObject[ZaDomain.A_AuthTestResultCode]=c.code[0]._content;
if(this._containedObject[ZaDomain.A_AuthTestResultCode]!=ZaDomain.Check_OK){this._containedObject[ZaDomain.A_AuthTestMessage]=c.message[0]._content
}else{if(c.bindDn!=null){this._containedObject[ZaDomain.A_AuthComputedBindDn]=c.bindDn[0]._content
}else{this._containedObject[ZaDomain.A_AuthComputedBindDn]=""
}}}this._containedObject[ZaDomain.A2_zimbraAuthConfigTestStatus]="RUNNED";
this._localXForm.refresh()
};
ZaTaskAuthConfigWizard.onAuthMechChange=function(d,c,b){this.setInstanceValue(d);
if(d==ZaDomain.AuthMech_ad){if(!b.getInstance().attrs[ZaDomain.A_AuthADDomainName]){this.setInstanceValue(b.getInstance().attrs[ZaDomain.A_domainName],ZaDomain.A_AuthADDomainName)
}}};
ZaTaskAuthConfigWizard.prototype.popup=function(b){ZaXWizardDialog.prototype.popup.call(this,b);
this.changeButtonStateForStep(ZaTaskAuthConfigWizard.AUTH_CONFIG_CHOOSE_MODE_STEP)
};
ZaTaskAuthConfigWizard.prototype.goPage=function(b){ZaXWizardDialog.prototype.goPage.call(this,b);
this.changeButtonStateForStep(b)
};
ZaTaskAuthConfigWizard.prototype.goPrev=function(){if(this.STEPS.length>1){this.STEPS.pop();
this.goPage(this.STEPS[this.STEPS.length-1])
}else{this.goPage(this.STEPS[0])
}};
ZaTaskAuthConfigWizard.prototype.goNext=function(){var d=this._containedObject[ZaModel.currentStep];
var b=d+1;
if(d==ZaTaskAuthConfigWizard.AUTH_CONFIG_AUTH_SET_STEP&&this._containedObject.attrs[ZaDomain.A_AuthMech]==ZaDomain.AuthMech_ldap){var c=this._containedObject.attrs[ZaDomain.A_AuthLdapURL].join(" ");
if(this._containedObject.attrs[ZaDomain.A_zimbraAuthLdapStartTlsEnabled]=="TRUE"){if(c.indexOf("ldaps://")>-1){ZaApp.getInstance().getCurrentController().popupWarningDialog(ZaMsg.Domain_WarningStartTLSIgnored)
}}}else{if(d==ZaTaskAuthConfigWizard.AUTH_CONFIG_BIND_PWD_STEP){if(this._containedObject[ZaDomain.A_AuthUseBindPassword]=="FALSE"){this._containedObject.attrs[ZaDomain.A_AuthLdapSearchBindDn]=null;
this._containedObject.attrs[ZaDomain.A_AuthLdapSearchBindPassword]=null;
this._containedObject[ZaDomain.A_AuthLdapSearchBindPasswordConfirm]=null
}if(this._containedObject.attrs[ZaDomain.A_AuthLdapSearchBindPassword]!=this._containedObject[ZaDomain.A_AuthLdapSearchBindPasswordConfirm]){ZaApp.getInstance().getCurrentController().popupErrorDialog(ZaMsg.ERROR_PASSWORD_MISMATCH);
return false
}}}if(d==ZaTaskAuthConfigWizard.AUTH_CONFIG_CHOOSE_MODE_STEP&&this._containedObject.attrs[ZaDomain.A_AuthMech]==ZaDomain.AuthMech_zimbra){b=ZaTaskAuthConfigWizard.CONFIG_COMPLETE_STEP
}else{if(d==ZaTaskAuthConfigWizard.AUTH_CONFIG_SUMMARY_STEP){if(this._containedObject.attrs[ZaDomain.A_AuthMech]==ZaDomain.AuthMech_ad){b=ZaTaskAuthConfigWizard.EXTERNAL_LDAP_GROUP_STEP
}else{b=ZaTaskAuthConfigWizard.CONFIG_COMPLETE_STEP
}}else{if(d==ZaTaskAuthConfigWizard.AUTH_CONFIG_AUTH_SET_STEP&&this._containedObject.attrs[ZaDomain.A_AuthMech]==ZaDomain.AuthMech_ad){if(!this._containedObject.attrs[ZaDomain.A_AuthLdapURL]){ZaApp.getInstance().getCurrentController().popupErrorDialog(ZaMsg.ERROR_LDAP_URL_REQUIRED);
return false
}}else{if(d==ZaTaskAuthConfigWizard.AUTH_TEST_RESULT_STEP){if(this._containedObject.attrs[ZaDomain.A_AuthMech]!=ZaDomain.AuthMech_ad){b=ZaTaskAuthConfigWizard.CONFIG_COMPLETE_STEP
}}}}}if(d==ZaTaskAuthConfigWizard.AUTH_CONFIG_SUMMARY_STEP||b==ZaTaskAuthConfigWizard.AUTH_CONFIG_SUMMARY_STEP){this._localXForm.setInstanceValue("STANDBY",ZaDomain.A2_zimbraAuthConfigTestStatus)
}this.STEPS.push(b);
this.goPage(b)
};
ZaTaskAuthConfigWizard.prototype.setObject=function(e){this._containedObject=new Object();
this._containedObject.attrs=new Object();
for(var c in e.attrs){this._containedObject.attrs[c]=e.attrs[c]
}this._containedObject.name=e.name;
this._containedObject.type=e.type;
this._containedObject.id=e.id;
if(e.rights){this._containedObject.rights=e.rights
}if(e.setAttrs){this._containedObject.setAttrs=e.setAttrs
}if(e.getAttrs){this._containedObject.getAttrs=e.getAttrs
}if(e._defaultValues){this._containedObject._defaultValues=e._defaultValues
}if(e[ZaDomain.A2_zimbraExternalGroupLdapEnabled]){this._containedObject[ZaDomain.A2_zimbraExternalGroupLdapEnabled]=e[ZaDomain.A2_zimbraExternalGroupLdapEnabled]
}this._containedObject[ZaDomain.A_AuthUseBindPassword]=e[ZaDomain.A_AuthUseBindPassword];
this.setTitle(ZaMsg.NCD_AuthConfigTitle+" ("+e.name+")");
if(ZaSettings.isDomainAdmin&&(e.attrs[ZaDomain.A_zimbraAdminConsoleLDAPAuthEnabled]=="TRUE")&&e.attrs[ZaDomain.A_zimbraAuthLdapStartTlsEnabled]!="TRUE"){this._containedObject[ZaDomain.A2_allowClearTextLDAPAuth]="FALSE"
}var d=ZaApp.getInstance().getServerList().getArray();
for(var b=0;
b<d.length;
b++){ZaDomain.TARGET_SERVER_CHOICES.push({label:d[b].name,value:d[b].id})
}if(d.length>0){this._containedObject[ZaDomain.A2_zimbraSpnegoTargetServer]=d[0].id
}if(this._containedObject.attrs[ZaDomain.A_zimbraWebClientLoginURLAllowedUA]&&this._containedObject.attrs[ZaDomain.A_zimbraWebClientLogoutURLAllowedUA]&&(this._containedObject.attrs[ZaDomain.A_zimbraWebClientLoginURLAllowedUA].join(";")==this._containedObject.attrs[ZaDomain.A_zimbraWebClientLogoutURLAllowedUA].join(";"))&&(this._containedObject.attrs[ZaDomain.A_zimbraWebClientLoginURLAllowedUA].join(";")==ZaDomain.SPNEGO_SUPPORT_UA.join(";"))){this._containedObject[ZaDomain.A2_zimbraSpnegoUASupportedBrowsers]="TRUE"
}else{this._containedObject[ZaDomain.A2_zimbraSpnegoUACustomBrowsers]="TRUE"
}if(this._containedObject.attrs[ZaDomain.A_zimbraWebClientLoginURL]||this._containedObject.attrs[ZaDomain.A_zimbraWebClientLogoutURL]||(this._containedObject.attrs[ZaDomain.A_zimbraWebClientLoginURLAllowedUA]&&this._containedObject.attrs[ZaDomain.A_zimbraWebClientLoginURLAllowedUA].length>0)){this._containedObject[ZaDomain.A2_zimbraSpnegoAuthEnabled]="TRUE"
}var f=ZaApp.getInstance().getGlobalConfig();
this._containedObject[ZaDomain.A2_zimbraSpnegoGlobalAuthEnabled]=f.attrs[ZaGlobalConfig.A_zimbraSpnegoAuthEnabled];
this._containedObject[ZaDomain.A2_zimbraSpnegoAuthErrorURL]=f.attrs[ZaGlobalConfig.A_zimbraSpnegoAuthErrorURL];
this._containedObject[ZaDomain.A2_zimbraSpnegoAuthRealm]=f.attrs[ZaGlobalConfig.A_zimbraSpnegoAuthRealm];
this._containedObject[ZaDomain.A2_zimbraSpnegoGlobalSettingStatus]=ZaTaskAuthConfigWizard.getGlobalSettingMsg(this._containedObject);
this._containedObject[ZaModel.currentStep]=e[ZaModel.currentStep]||ZaTaskAuthConfigWizard.AUTH_CONFIG_CHOOSE_MODE_STEP;
this._containedObject[ZaDomain.A2_zimbraSpnegoUAAllBrowsers]=e[ZaDomain.A2_zimbraSpnegoUAAllBrowsers]||"FALSE";
this._containedObject[ZaDomain.A2_zimbraSpnegoUASupportedBrowsers]=e[ZaDomain.A2_zimbraSpnegoUASupportedBrowsers]||"FALSE";
this._containedObject[ZaDomain.A2_zimbraSpnegoUACustomBrowsers]=e[ZaDomain.A2_zimbraSpnegoUACustomBrowsers]||"FALSE";
this._containedObject._uuid=e._extid||e._uuid;
this._containedObject._editObject=e._editObject;
this._localXForm.setInstance(this._containedObject)
};
ZaTaskAuthConfigWizard.prototype.finishWizard=function(){try{ZaDomain.modifyAuthSettings.call(this._containedObject._editObject,this._containedObject);
ZaApp.getInstance().getDomainListController()._fireDomainChangeEvent(this._containedObject._editObject);
this.popdown();
ZaApp.getInstance().getDomainListController().notifyAllOpenTabs(this._containedObject._editObject)
}catch(b){ZaApp.getInstance().getCurrentController()._handleException(b,"ZaTaskAuthConfigWizard.prototype.finishWizard",null,false)
}};
ZaTaskAuthConfigWizard.myXFormModifier=function(c){var b={};
b[ZaTaskAuthConfigWizard.AUTH_CONFIG_AUTH_SET_STEP]={checks:[[XForm.checkInstanceValueNot,ZaDomain.A_AuthMech,ZaDomain.AuthMech_zimbra]],sources:[ZaDomain.A_AuthMech]};
b[ZaTaskAuthConfigWizard.AUTH_CONFIG_BIND_PWD_STEP]={checks:[[XForm.checkInstanceValueNot,ZaDomain.A_AuthMech,ZaDomain.AuthMech_zimbra]],sources:[ZaDomain.A_AuthMech]};
b[ZaTaskAuthConfigWizard.AUTH_CONFIG_BIND_PWD_STEP]={checks:[[XForm.checkInstanceValueNot,ZaDomain.A_AuthMech,ZaDomain.AuthMech_zimbra]],sources:[ZaDomain.A_AuthMech]};
b[ZaTaskAuthConfigWizard.AUTH_CONFIG_SUMMARY_STEP]={checks:[[XForm.checkInstanceValueNot,ZaDomain.A_AuthMech,ZaDomain.AuthMech_zimbra]],sources:[ZaDomain.A_AuthMech]};
b[ZaTaskAuthConfigWizard.EXTERNAL_LDAP_GROUP_STEP]={checks:[[XForm.checkInstanceValue,ZaDomain.A_AuthMech,ZaDomain.AuthMech_ad]],sources:[ZaDomain.A_AuthMech]};
c.items=[{type:_OUTPUT_,colSpan:2,valign:_TOP_,cssStyle:"white-space: normal",ref:ZaModel.currentStep,choices:this.stepChoices,valueChangeEventSources:[ZaModel.currentStep],labelVisibility:b},{type:_SEPARATOR_,align:_CENTER_,valign:_TOP_},{type:_SPACER_,align:_CENTER_,valign:_TOP_},{type:_SWITCH_,width:580,valign:_TOP_,cssStyle:"white-space: normal",items:[{type:_CASE_,numCols:2,colSizes:["60px","430px"],caseKey:ZaTaskAuthConfigWizard.AUTH_CONFIG_CHOOSE_MODE_STEP,items:[{type:_OUTPUT_,value:ZaMsg.authForDomainMsg,colSpan:"*",cssStyle:"padding-left:10px;padding-top:10px;"},{type:_SPACER_,height:10},{ref:ZaDomain.A_AuthMech,type:_RADIO_,groupname:"auth_mechanism_group",label:"<b>"+ZaMsg.AuthMech_zimbra+"</b>",labelLocation:_RIGHT_,updateElement:function(d){this.getElement().checked=(d==ZaDomain.AuthMech_zimbra)
},elementChanged:function(f,e,d){this.getForm().itemChanged(this,ZaDomain.AuthMech_zimbra,d);
this.setInstanceValue("FALSE",ZaDomain.A2_zimbraExternalGroupLdapEnabled)
},visibilityChecks:[],enableDisableChecks:[]},{type:_GROUP_,colSpan:2,numCols:2,colSizes:["80px","*"],items:[{type:_OUTPUT_,label:"",value:ZaMsg.domainAuthDlgInternalHelp}]},{type:_SPACER_,height:15},{ref:ZaDomain.A_AuthMech,type:_RADIO_,groupname:"auth_mechanism_group",label:"<b>"+ZaMsg.AuthMech_ad+"</b>",labelLocation:_RIGHT_,updateElement:function(d){this.getElement().checked=(d==ZaDomain.AuthMech_ad)
},elementChanged:function(f,e,d){this.getForm().itemChanged(this,ZaDomain.AuthMech_ad,d);
this.setInstanceValue("TRUE",ZaDomain.A2_zimbraExternalGroupLdapEnabled)
},visibilityChecks:[],enableDisableChecks:[]},{type:_GROUP_,colSpan:2,numCols:2,colSizes:["80px","*"],items:[{type:_OUTPUT_,label:"",value:ZaMsg.domainAuthDlgADHelp}]},{type:_SPACER_,height:15},{ref:ZaDomain.A_AuthMech,type:_RADIO_,groupname:"auth_mechanism_group",label:"<b>"+ZaMsg.AuthMech_ldap+"</b>",labelLocation:_RIGHT_,updateElement:function(d){this.getElement().checked=(d==ZaDomain.AuthMech_ldap)
},elementChanged:function(f,e,d){this.getForm().itemChanged(this,ZaDomain.AuthMech_ldap,d);
this.setInstanceValue("TRUE",ZaDomain.A2_zimbraExternalGroupLdapEnabled)
},visibilityChecks:[],enableDisableChecks:[]},{type:_GROUP_,colSpan:2,numCols:2,colSizes:["80px","*"],items:[{type:_OUTPUT_,label:"",value:ZaMsg.domainAuthDlgExternalHelp}]}]},{type:_CASE_,numCols:2,colSizes:["150px","430px"],caseKey:ZaTaskAuthConfigWizard.AUTH_CONFIG_AUTH_SET_STEP,cellpadding:10,items:[{type:_GROUP_,colSpan:2,numCols:2,colSizes:["150px","430px"],visibilityChecks:[[XForm.checkInstanceValue,ZaDomain.A_AuthMech,ZaDomain.AuthMech_ad]],visibilityChangeEventSources:[ZaDomain.A_AuthMech],items:[{type:_OUTPUT_,value:ZaMsg.authForADMsg,colSpan:"*"},{type:_SPACER_,height:20,colSpan:2},{ref:ZaDomain.A_AuthADDomainName,type:_TEXTFIELD_,label:ZaMsg.Domain_AuthADDomainName,labelLocation:_LEFT_,labelCssStyle:"text-align:left;padding-left:20px;",required:true,visibilityChecks:[],enableDisableChecks:[],bmolsnr:true},{type:_SPACER_,height:10,colSpan:2},{type:_OUTPUT_,label:ZaMsg.Domain_AuthADServer,value:" ",labelCssStyle:"text-align:left;padding-left:20px;"},{type:_GROUP_,numCols:6,colSpan:2,label:null,labelLocation:_LEFT_,containerCssStyle:"padding-left:20px;",items:[{type:_OUTPUT_,label:null,labelLocation:_NONE_,value:" ",width:"35px"},{type:_OUTPUT_,label:null,labelLocation:_NONE_,value:ZaMsg.Domain_AuthADServerName,width:"200px",getDisplayValue:function(d){return d+'<span class="redAsteric">*</span>'
}},{type:_OUTPUT_,label:null,labelLocation:_NONE_,value:" ",width:"5px"},{type:_OUTPUT_,label:null,labelLocation:_NONE_,value:ZaMsg.Domain_AuthADServerPort,width:"40px",getDisplayValue:function(d){return d+'<span class="redAsteric">*</span>'
}},{type:_OUTPUT_,label:null,labelLocation:_NONE_,value:ZaMsg.Domain_AuthADUseSSL,width:"40px"}]},{ref:ZaDomain.A_AuthLdapURL,type:_REPEAT_,colSpan:"*",containerCssStyle:"padding-left:20px;",repeatInstance:"",showAddButton:true,showRemoveButton:true,addButtonLabel:ZaMsg.Domain_AddURL,removeButtonLabel:ZaMsg.Domain_REPEAT_REMOVE,showAddOnNextRow:true,items:[{ref:".",type:_LDAPURL_,label:null,labelLocation:_NONE_,ldapSSLPort:"3269",ldapPort:"3268",visibilityChecks:[],enableDisableChecks:[]}]}]},{type:_GROUP_,colSpan:2,numCols:2,colSizes:["150px","430px"],visibilityChecks:[[XForm.checkInstanceValue,ZaDomain.A_AuthMech,ZaDomain.AuthMech_ldap]],visibilityChangeEventSources:[ZaDomain.A_AuthMech],items:[{type:_OUTPUT_,value:ZaMsg.authForLDAPMsg,colSpan:"*"},{type:_SPACER_,height:20,colSpan:2},{type:_OUTPUT_,value:"LDAP Setting",colSpan:"*"},{type:_GROUP_,numCols:6,colSpan:2,label:null,labelLocation:_LEFT_,items:[{type:_OUTPUT_,label:null,labelLocation:_NONE_,value:" ",width:"35px"},{type:_OUTPUT_,label:null,labelLocation:_NONE_,value:ZaMsg.Domain_AuthLDAPServerName,width:"200px",getDisplayValue:function(d){return d+'<span class="redAsteric">*</span>'
}},{type:_OUTPUT_,label:null,labelLocation:_NONE_,value:" ",width:"5px"},{type:_OUTPUT_,label:null,labelLocation:_NONE_,value:ZaMsg.Domain_AuthLDAPServerPort,width:"40px",getDisplayValue:function(d){return d+'<span class="redAsteric">*</span>'
}},{type:_OUTPUT_,label:null,labelLocation:_NONE_,value:ZaMsg.Domain_AuthLDAPUseSSL,width:"40px"}]},{ref:ZaDomain.A_AuthLdapURL,type:_REPEAT_,colSpan:"*",cssStyle:"padding-left:10px;",addButtonLabel:ZaMsg.Domain_AddURL,removeButtonLabel:ZaMsg.Domain_REPEAT_REMOVE,showAddOnNextRow:true,items:[{ref:".",type:_LDAPURL_,label:null,ldapSSLPort:"636",ldapPort:"389",labelLocation:_NONE_,visibilityChecks:[],enableDisableChecks:[]}]},{type:_SPACER_,height:10,colSpan:2},{ref:ZaDomain.A_zimbraAuthLdapStartTlsEnabled,type:_CHECKBOX_,label:ZaMsg.Domain_AuthLdapStartTlsEnabled,onChange:ZaTaskAuthConfigWizard.startTlsEnabledChanged,trueValue:"TRUE",falseValue:"FALSE"},{type:_SPACER_,height:10,colSpan:2},{ref:ZaDomain.A_AuthLdapSearchFilter,type:_TEXTAREA_,width:380,height:40,label:ZaMsg.Domain_AuthLdapFilter,labelCssStyle:"text-align:left;",labelLocation:_LEFT_,textWrapping:"soft"},{type:_SPACER_,height:10,colSpan:2},{ref:ZaDomain.A_AuthLdapSearchBase,type:_TEXTAREA_,width:380,height:40,label:ZaMsg.Domain_AuthLdapSearchBase,labelCssStyle:"text-align:left;",labelLocation:_LEFT_,textWrapping:"soft"},{type:_SPACER_,height:20,colSpan:2},{type:_OUTPUT_,value:ZaMsg.NAD_DomainsAuthStr,colSpan:2}]}]},{type:_CASE_,numCols:2,colSizes:["150px","430px"],caseKey:ZaTaskAuthConfigWizard.AUTH_CONFIG_BIND_PWD_STEP,visibilityChecks:[[Case_XFormItem.prototype.isCurrentTab]],items:[{ref:ZaDomain.A_AuthUseBindPassword,type:_CHECKBOX_,label:ZaMsg.Domain_AuthUseBindPassword,labelLocation:_LEFT_,trueValue:"TRUE",falseValue:"FALSE",labelCssClass:"xform_label",align:_LEFT_,visibilityChecks:[],enableDisableChecks:[]},{ref:ZaDomain.A_AuthLdapSearchBindDn,type:_INPUT_,label:ZaMsg.Domain_AuthLdapBindDn,labelLocation:_LEFT_,enableDisableChecks:[[XForm.checkInstanceValue,ZaDomain.A_AuthUseBindPassword,"TRUE"]],enableDisableChangeEventSources:[ZaDomain.A_AuthUseBindPassword],visibilityChecks:[]},{ref:ZaDomain.A_AuthLdapSearchBindPassword,type:_SECRET_,label:ZaMsg.Domain_AuthLdapBindPassword,labelLocation:_LEFT_,enableDisableChecks:[[XForm.checkInstanceValue,ZaDomain.A_AuthUseBindPassword,"TRUE"]],enableDisableChangeEventSources:[ZaDomain.A_AuthUseBindPassword],visibilityChecks:[]},{ref:ZaDomain.A_AuthLdapSearchBindPasswordConfirm,type:_SECRET_,label:ZaMsg.Domain_AuthLdapBindPasswordConfirm,labelLocation:_LEFT_,enableDisableChecks:[[XForm.checkInstanceValue,ZaDomain.A_AuthUseBindPassword,"TRUE"]],enableDisableChangeEventSources:[ZaDomain.A_AuthUseBindPassword],visibilityChecks:[]}]},{type:_CASE_,numCols:2,colSizes:["180px","430px"],caseKey:ZaTaskAuthConfigWizard.AUTH_CONFIG_SUMMARY_STEP,visibilityChecks:[Case_XFormItem.prototype.isCurrentTab,ZaNewDomainXWizard.isAuthMechNotZimbra],items:[{type:_OUTPUT_,value:ZaMsg.authSummaryMsg,colSpan:"*"},{type:_SPACER_,height:10},{type:_OUTPUT_,ref:ZaDomain.A_AuthMech,label:ZaMsg.Domain_AuthMech,choices:this.AuthMechs,alignment:_LEFT_,labelCssStyle:"text-align:right;padding-left:20px;"},{type:_GROUP_,useParentTable:true,visibilityChecks:[[XForm.checkInstanceValue,ZaDomain.A_AuthMech,ZaDomain.AuthMech_ad]],visibilityChangeEventSources:[ZaDomain.A_AuthMech],items:[{ref:ZaDomain.A_AuthADDomainName,type:_OUTPUT_,label:ZaMsg.Domain_AuthADDomainName,labelLocation:_LEFT_,labelCssStyle:"text-align:right;padding-left:20px;"},{ref:ZaDomain.A_AuthLdapURL,type:_REPEAT_,label:ZaMsg.Domain_AuthLdapURL,labelLocation:_LEFT_,showAddButton:false,showRemoveButton:false,labelCssStyle:"text-align:right;padding-left:20px;",items:[{type:_OUTPUT_,ref:".",label:null,labelLocation:_NONE_}]}]},{type:_GROUP_,useParentTable:true,visibilityChecks:[[XForm.checkInstanceValue,ZaDomain.A_AuthMech,ZaDomain.AuthMech_ldap]],visibilityChangeEventSources:[ZaDomain.A_AuthMech],items:[{ref:ZaDomain.A_AuthLdapURL,type:_REPEAT_,label:ZaMsg.Domain_AuthLdapURL,labelLocation:_LEFT_,labelCssStyle:"text-align:right;padding-left:20px;",showAddButton:false,showRemoveButton:false,visibilityChecks:[],items:[{type:_OUTPUT_,ref:".",label:null,labelLocation:_NONE_,visibilityChecks:[]}]},{ref:ZaDomain.A_zimbraAuthLdapStartTlsEnabled,type:_OUTPUT_,label:ZaMsg.Domain_AuthLdapStartTlsEnabled,labelLocation:_LEFT_,labelCssStyle:"text-align:right;padding-left:20px;",choices:ZaModel.BOOLEAN_CHOICES,visibilityChecks:[]},{ref:ZaDomain.A_AuthLdapSearchFilter,type:_OUTPUT_,label:ZaMsg.Domain_AuthLdapFilter,labelLocation:_LEFT_,labelCssStyle:"text-align:right;padding-left:20px;",visibilityChecks:[]},{ref:ZaDomain.A_AuthLdapSearchBase,type:_OUTPUT_,label:ZaMsg.Domain_AuthLdapSearchBase,labelLocation:_LEFT_,labelCssStyle:"text-align:right;padding-left:20px;",visibilityChecks:[]},{ref:ZaDomain.A_AuthUseBindPassword,type:_OUTPUT_,label:ZaMsg.Domain_AuthUseBindPassword,labelLocation:_LEFT_,labelCssStyle:"text-align:right;padding-left:20px;",choices:ZaModel.BOOLEAN_CHOICES},{ref:ZaDomain.A_AuthLdapSearchBindDn,type:_OUTPUT_,label:ZaMsg.Domain_AuthLdapBindDn,labelLocation:_LEFT_,labelCssStyle:"text-align:right;padding-left:20px;",visibilityChecks:[[XForm.checkInstanceValue,ZaDomain.A_AuthUseBindPassword,"TRUE"]],visibilityChangeEventSources:[ZaDomain.A_AuthUseBindPassword]}]},{type:_SPACER_,height:20},{type:_OUTPUT_,value:ZaMsg.Domain_AuthProvideLoginPwd,align:_LEFT_,colSpan:"*",visibilityChecks:[]},{type:_SPACER_,height:10},{type:_GROUP_,numCols:2,colSpan:"*",colSizes:["100px","auto"],width:"100%",items:[{type:_TEXTFIELD_,label:ZaMsg.LBL_Domain_AuthTestUserName,ref:ZaDomain.A_AuthTestUserName,alignment:_LEFT_,labelCssStyle:"text-align:right;padding-left:20px;",width:"150px",visibilityChecks:[],enableDisableChecks:[]},{type:_SECRET_,label:ZaMsg.LBL_Domain_AuthTestPassword,ref:ZaDomain.A_AuthTestPassword,alignment:_LEFT_,labelCssStyle:"text-align:right;padding-left:20px;",width:"150px",visibilityChecks:[],enableDisableChecks:[]}]},{type:_GROUP_,numCols:1,colSpan:"*",colSizes:["300px","200px","auto"],cssStyle:"margin-bottom:10px;padding-bottom:0px;margin-top:10px;margin-left:10px;margin-right:10px;",items:[{type:_CELLSPACER_},{type:_DWT_BUTTON_,label:ZaMsg.Domain_AuthTestSettings,width:"100px",ref:ZaDomain.A2_zimbraAuthConfigTestStatus,onActivate:"ZaTaskAuthConfigWizard.autoTestSetting.call(this);"},{type:_GROUP_,isTabGroup:false,deferred:false,colSpan:2,colSizes:["100px","400px"],visibilityChangeEventSources:[ZaModel.currentStep,ZaDomain.A2_zimbraAuthConfigTestStatus],visibilityChecks:[[XForm.checkInstanceValue,ZaDomain.A2_zimbraAuthConfigTestStatus,"RUNNING"]],items:[{type:_DWT_ALERT_,content:ZaMsg.Domain_AuthTestingInProgress,alignment:_CENTER_,colSpan:2,style:DwtAlert.INFO}]},{type:_GROUP_,isTabGroup:false,deferred:false,colSpan:2,colSizes:["100px","400px"],visibilityChangeEventSources:[ZaDomain.A2_zimbraAuthConfigTestStatus,ZaDomain.A_AuthTestResultCode],visibilityChecks:[[XForm.checkInstanceValue,ZaDomain.A2_zimbraAuthConfigTestStatus,"RUNNED"],[XForm.checkInstanceValue,ZaDomain.A_AuthTestResultCode,ZaDomain.Check_OK]],items:[{type:_DWT_ALERT_,style:DwtAlert.INFORMATION,content:ZaMsg.Domain_AuthTestSuccessful,alignment:_CENTER_,colSpan:2},{type:_OUTPUT_,ref:ZaDomain.A_AuthComputedBindDn,label:ZaMsg.LBL_Domain_AuthComputedBindDn}]},{type:_GROUP_,isTabGroup:false,deferred:false,colSpan:2,colSizes:["100px","400px"],visibilityChangeEventSources:[ZaDomain.A2_zimbraAuthConfigTestStatus,ZaDomain.A_AuthTestResultCode],visibilityChecks:[function(){return(this.getInstanceValue(ZaDomain.A2_zimbraAuthConfigTestStatus)=="RUNNED")&&(this.getInstanceValue(ZaDomain.A_AuthTestResultCode)!=ZaDomain.Check_OK)
}],items:[{type:_DWT_ALERT_,content:ZaMsg.Domain_AuthTestFailed,alignment:_CENTER_,colSpan:2,style:DwtAlert.CRITICAL},{type:_OUTPUT_,ref:ZaDomain.A_AuthTestResultCode,label:ZaMsg.LBL_Domain_AuthTestResultCode,choices:this.TestResultChoices},{type:_OUTPUT_,value:ZaMsg.LBL_Domain_AuthTestMessage,colSpan:2},{type:_TEXTAREA_,ref:ZaDomain.A_AuthTestMessage,height:80,alignment:_LEFT_,colSpan:2}]}]}]},{type:_CASE_,caseKey:ZaTaskAuthConfigWizard.EXTERNAL_LDAP_GROUP_STEP,colSizes:["200px","*"],items:[{type:_OUTPUT_,ref:ZaDomain.A_zimbraAuthMechAdmin,label:"Auth Mech for Admin:",choices:this.AuthMechs},{type:_TEXTAREA_,ref:ZaDomain.A_zimbraExternalGroupLdapSearchBase,label:"External Group LDAP Search Base:"},{type:_TEXTAREA_,ref:ZaDomain.A_zimbraExternalGroupLdapSearchFilter,label:"External Group LDAP Search Filter:"},{type:_TEXTFIELD_,ref:ZaDomain.A_zimbraExternalGroupHandlerClass,width:"100%",label:"External Group Handle Class Name:"}]},{type:_CASE_,caseKey:ZaTaskAuthConfigWizard.CONFIG_COMPLETE_STEP,items:[{type:_OUTPUT_,value:ZaMsg.Domain_Auth_Config_Complete}]}]}]
};
ZaXDialog.XFormModifiers.ZaTaskAuthConfigWizard.push(ZaTaskAuthConfigWizard.myXFormModifier);
ZaTaskAuthConfigWizard.startTlsEnabledChanged=function(h,g,f){this.setInstanceValue(h);
var b=f.getInstance();
var j=b.attrs[ZaDomain.A_AuthLdapURL];
var e=[];
if(ZaSettings.isDomainAdmin&&(b.attrs[ZaDomain.A_zimbraAdminConsoleLDAPAuthEnabled]=="TRUE")&&b.attrs[ZaDomain.A_zimbraAuthLdapStartTlsEnabled]!="TRUE"){b[ZaDomain.A2_allowClearTextLDAPAuth]="FALSE";
for(var d=0;
d<j.length;
d++){var c=j[d];
if(c==null||c.length<=0){}else{j[d]=c.replace("ldap://","ldaps://");
e.push(j[d])
}}}else{for(var d=0;
d<j.length;
d++){var c=j[d];
if(c==null||c.length<=0){}else{e.push(j[d])
}}b[ZaDomain.A2_allowClearTextLDAPAuth]="TRUE"
}b.attrs[ZaDomain.A_AuthLdapURL]=e;
f.refresh()
};
ZaTaskAuthConfigWizard.autoTestSetting=function(){this.getForm().setInstanceValue("RUNNING",ZaDomain.A2_zimbraAuthConfigTestStatus);
var b=this.getForm().parent;
b.testSetings()
};
ZaTaskAuthConfigWizard.checkSpnegoApplyType=function(c,d){var b=this.getInstance();
return(b[c]==d)
};
ZaTaskAuthConfigWizard.changeSpnegoGlobalConfig=function(){var b=this.getInstance();
ZaTaskAuthConfigWizard.spnegoGlobalServerSetting(b,ZaItem.GLOBAL_CONFIG)
};
ZaTaskAuthConfigWizard.changeSpnegoServerConfig=function(){var b=this.getInstance();
ZaTaskAuthConfigWizard.spnegoGlobalServerSetting(b,ZaItem.SERVER)
};
ZaTaskAuthConfigWizard.changeSpnegoDomainConfig=function(){var b=this.getInstance();
b[ZaDomain.A2_zimbraSpnegoApplyFor]=ZaItem.DOMAIN;
var c=this.getForm().parent;
c.goPage(ZaTaskAuthConfigWizard.SPNEGO_CONFIG_STEP_1)
};
ZaTaskAuthConfigWizard.checkRadioEnableDisable=function(b,c){if(!b){return false
}if(b.attrs[ZaDomain.A_zimbraWebClientLoginURLAllowedUA]&&b.attrs[ZaDomain.A_zimbraWebClientLogoutURLAllowedUA]&&(b.attrs[ZaDomain.A_zimbraWebClientLoginURLAllowedUA].join(";")==b.attrs[ZaDomain.A_zimbraWebClientLogoutURLAllowedUA].join(";"))&&(b.attrs[ZaDomain.A_zimbraWebClientLoginURLAllowedUA].join(";")==ZaDomain.SPNEGO_SUPPORT_UA.join(";"))){if(ZaDomain.A2_zimbraSpnegoUASupportedBrowsers==c){return true
}}else{if(ZaDomain.A2_zimbraSpnegoUACustomBrowsers==c){return true
}}return false
};
ZaTaskAuthConfigWizard.getGlobalSettingMsg=function(b){if((!b[ZaDomain.A2_zimbraSpnegoGlobalAuthEnabled]||b[ZaDomain.A2_zimbraSpnegoGlobalAuthEnabled]=="FALSE")&&!b[ZaDomain.A2_zimbraSpnegoAuthErrorURL]&&!b[ZaDomain.A2_zimbraSpnegoAuthRealm]){return ZaMsg.spnegoGlobalSettingEmpty
}if(!b[ZaDomain.A2_zimbraSpnegoGlobalAuthEnabled]||b[ZaDomain.A2_zimbraSpnegoGlobalAuthEnabled]=="FALSE"){return ZaMsg.spnegoGlobalSettingUnenabled
}else{return ZaMsg.spnegoGlobalSettingUnempty
}};
ZaTaskAuthConfigWizard.customAllowedUASetting=function(){if(!ZaApp.getInstance().dialogs.spnegoUACustomDialog){ZaApp.getInstance().dialogs.spnegoUACustomDialog=new ZaSpnegoUACustomDialog(ZaApp.getInstance().getAppCtxt().getShell(),"450px","280px",ZaMsg.SpnegoSettingCustomDialogTitle);
ZaApp.getInstance().dialogs.spnegoUACustomDialog.registerCallback(DwtDialog.OK_BUTTON,ZaSpnegoUACustomDialog.updateSpnegoUASetting,this,ZaApp.getInstance().dialogs.spnegoUACustomDialog._localXForm)
}var c=this.getInstanceValue(ZaDomain.A_zimbraWebClientLoginURLAllowedUA);
var b={};
if(typeof c=="string"){b[ZaDomain.A2_zimbraWebClientURLAllowedUA]=c
}else{if(c instanceof Array){b[ZaDomain.A2_zimbraWebClientURLAllowedUA]=c.join("\n")
}}ZaApp.getInstance().dialogs.spnegoUACustomDialog.setObject(b);
ZaApp.getInstance().dialogs.spnegoUACustomDialog.popup()
};
ZaTaskAuthConfigWizard.spnegoGlobalServerSetting=function(h,e){var b={};
if(h){b=h
}var c=ZaMsg.SpnegoSettingGlobalDialogTitle;
if(e==ZaItem.GLOBAL_CONFIG){b[ZaDomain.A2_zimbraSpnegoApplyFor]=ZaItem.GLOBAL_CONFIG
}else{if(e==ZaItem.SERVER){c=ZaMsg.SpnegoSettingServerDialogTitle;
b[ZaDomain.A2_zimbraSpnegoApplyFor]=ZaItem.SERVER;
var d=ZaApp.getInstance().getServerList().getArray();
var g=null;
for(var f=0;
f<d.length;
f++){if(d[f].id==b[ZaDomain.A2_zimbraSpnegoTargetServer]){g=d[f];
break
}}if(g){b[ZaDomain.A2_zimbraSpnegoAuthPrincipal]=g.attrs[ZaServer.A_zimbraSpnegoAuthPrincipal];
b[ZaDomain.A2_zimbraSpnegoAuthTargetName]=g.attrs[ZaServer.A_zimbraSpnegoAuthTargetName]
}}}if(!ZaApp.getInstance().dialogs.updateGlobalServerDialog){ZaApp.getInstance().dialogs.updateGlobalServerDialog=new ZaSpnegoGlobalServerDialog(ZaApp.getInstance().getAppCtxt().getShell(),"700px","350px",c);
ZaApp.getInstance().dialogs.updateGlobalServerDialog.registerCallback(DwtDialog.OK_BUTTON,ZaSpnegoGlobalServerDialog.updateGlobalServerSetting,b,ZaApp.getInstance().dialogs.updateGlobalServerDialog._localXForm)
}else{ZaApp.getInstance().dialogs.updateGlobalServerDialog.setTitle(c)
}ZaApp.getInstance().dialogs.updateGlobalServerDialog.setObject(b);
ZaApp.getInstance().dialogs.updateGlobalServerDialog.popup()
};
ZaTaskAuthConfigWizard.clientUAChanged=function(e,d,c){var b=this.getInstance()
};
ZaSpnegoUACustomDialog=function(d,b,c,e){if(arguments.length==0){return
}this._standardButtons=[DwtDialog.OK_BUTTON,DwtDialog.CANCEL_BUTTON];
ZaXDialog.call(this,d,"ZaSpnegoUACustomDialog",e,b,c,null,ZaId.DLG_AUTH_SPNEGO_UA);
this._containedObject={};
this.initForm(ZaAlias.myXModel,this.getMyXForm())
};
ZaSpnegoUACustomDialog.prototype=new ZaXDialog;
ZaSpnegoUACustomDialog.prototype.constructor=ZaSpnegoUACustomDialog;
ZaSpnegoUACustomDialog.prototype.getMyXForm=function(){var b={numCols:1,items:[{type:_GROUP_,numCols:1,colSizes:["100%"],items:[{type:_OUTPUT_,value:ZaMsg.SpnegoSettingCustomDialogHeader,cssStyle:"padding-bottom:20px;padding-top:10px;"},{ref:ZaDomain.A2_zimbraWebClientURLAllowedUA,type:_TEXTAREA_,width:450,height:100,align:_CENTER_},{type:_OUTPUT_,value:ZaMsg.SpnegoSettingCustomDialogHelp,cssStyle:"padding-bottom:10px;padding-top:20px;"}]}]};
return b
};
ZaSpnegoUACustomDialog.updateSpnegoUASetting=function(){if(ZaApp.getInstance().dialogs.spnegoUACustomDialog){ZaApp.getInstance().dialogs.spnegoUACustomDialog.popdown()
}var c=ZaApp.getInstance().dialogs.spnegoUACustomDialog.getObject();
var b=[];
if(c[ZaDomain.A2_zimbraWebClientURLAllowedUA]){b=c[ZaDomain.A2_zimbraWebClientURLAllowedUA].split("\n")
}this.setInstanceValue(b,ZaDomain.A_zimbraWebClientLoginURLAllowedUA);
this.setInstanceValue(b,ZaDomain.A_zimbraWebClientLogoutURLAllowedUA)
};
ZaSpnegoGlobalServerDialog=function(d,b,c,e){if(arguments.length==0){return
}this._standardButtons=[DwtDialog.OK_BUTTON,DwtDialog.CANCEL_BUTTON];
ZaXDialog.call(this,d,"ZaSpnegoUACustomDialog",e,b,c,null,ZaId.DLG_AUTH_SPNEGO);
this._containedObject={};
this.initForm(ZaAlias.myXModel,this.getMyXForm())
};
ZaSpnegoGlobalServerDialog.prototype=new ZaXDialog;
ZaSpnegoGlobalServerDialog.prototype.constructor=ZaSpnegoGlobalServerDialog;
ZaSpnegoGlobalServerDialog.prototype.getMyXForm=function(){var b={numCols:1,items:[{type:_GROUP_,numCols:1,colSizes:["100%"],items:[{type:_GROUP_,colSpan:2,numCols:2,colSizes:["150px","430px"],visibilityChecks:[[ZaTaskAuthConfigWizard.checkSpnegoApplyType,ZaDomain.A2_zimbraSpnegoApplyFor,ZaItem.GLOBAL_CONFIG]],visibilityChangeEventSources:[ZaDomain.A2_zimbraSpnegoApplyFor],items:[{type:_OUTPUT_,value:ZaMsg.spnegoGlobalSettingPageTitle,colSpan:2},{type:_SPACER_,height:10,colSpan:"*"},{ref:ZaDomain.A2_zimbraSpnegoGlobalAuthEnabled,type:_CHECKBOX_,label:ZaMsg.EnableSpnegoGlobal,width:"200px",subLabel:"",labelLocation:_RIGHT_,align:_RIGHT_,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaDomain.A2_zimbraSpnegoAuthRealm,type:_TEXTFIELD_,width:"200px",label:ZaMsg.LBL_zimbraSpnegoAuthRealm,labelCssStyle:"text-align:left;padding-left:20px;"},{ref:ZaDomain.A2_zimbraSpnegoAuthErrorURL,type:_TEXTFIELD_,width:"200px",label:ZaMsg.LBL_zimbraSpnegoAuthErrorURL,labelCssStyle:"text-align:left;padding-left:20px;"}]},{type:_GROUP_,colSpan:2,numCols:2,colSizes:["150px","430px"],visibilityChecks:[[ZaTaskAuthConfigWizard.checkSpnegoApplyType,ZaDomain.A2_zimbraSpnegoApplyFor,ZaItem.SERVER]],visibilityChangeEventSources:[ZaDomain.A2_zimbraSpnegoApplyFor],items:[{type:_OUTPUT_,value:ZaMsg.spnegoServerSettingPageTitle,colSpan:2},{type:_SPACER_,height:10,colSpan:"*"},{ref:ZaDomain.A2_zimbraSpnegoAuthPrincipal,type:_TEXTFIELD_,labelCssStyle:"text-align:left;padding-left:20px;",label:ZaMsg.NAD_MTA_SpnegoAuthPrincipal,width:"20em",onChange:ZaServerXFormView.onFormFieldChanged},{ref:ZaDomain.A2_zimbraSpnegoAuthTargetName,type:_TEXTFIELD_,labelCssStyle:"text-align:left;padding-left:20px;",label:ZaMsg.NAD_MTA_SpnegoAuthTargetName,width:"20em",onChange:ZaServerXFormView.onFormFieldChanged}]}]}]};
return b
};
ZaSpnegoGlobalServerDialog.updateGlobalServerSetting=function(){if(ZaApp.getInstance().dialogs.updateGlobalServerDialog){ZaApp.getInstance().dialogs.updateGlobalServerDialog.popdown()
}else{return
}var b=null;
var e=null;
var f=ZaApp.getInstance().dialogs.updateGlobalServerDialog.getObject();
if(f[ZaDomain.A2_zimbraSpnegoApplyFor]==ZaItem.GLOBAL_CONFIG){var d=ZaApp.getInstance().dialogs.authWizard._localXForm;
d.setInstanceValue(ZaTaskAuthConfigWizard.getGlobalSettingMsg(f),ZaDomain.A2_zimbraSpnegoGlobalSettingStatus);
e=AjxSoapDoc.create("ModifyConfigRequest",ZaZimbraAdmin.URN,null);
if(f[ZaDomain.A2_zimbraSpnegoGlobalAuthEnabled]){b=e.set("a",f[ZaDomain.A2_zimbraSpnegoGlobalAuthEnabled]);
b.setAttribute("n",ZaGlobalConfig.A_zimbraSpnegoAuthEnabled)
}if(f[ZaDomain.A2_zimbraSpnegoAuthRealm]){b=e.set("a",f[ZaDomain.A2_zimbraSpnegoAuthRealm]);
b.setAttribute("n",ZaDomain.A2_zimbraSpnegoAuthRealm)
}if(f[ZaDomain.A2_zimbraSpnegoAuthErrorURL]){b=e.set("a",f[ZaDomain.A2_zimbraSpnegoAuthErrorURL]);
b.setAttribute("n",ZaDomain.A2_zimbraSpnegoAuthErrorURL)
}var g=new Object();
g.soapDoc=e;
var c={controller:ZaApp.getInstance().getCurrentController(),busyMsg:ZaMsg.BUSY_GET_ALL_CONFIG};
ZaRequestMgr.invoke(g,c)
}else{if(f[ZaDomain.A2_zimbraSpnegoApplyFor]==ZaItem.SERVER&&f[ZaDomain.A2_zimbraSpnegoTargetServer]){e=AjxSoapDoc.create("ModifyServerRequest",ZaZimbraAdmin.URN,null);
e.set("id",f[ZaDomain.A2_zimbraSpnegoTargetServer]);
if(f[ZaDomain.A2_zimbraSpnegoAuthPrincipal]){b=e.set("a",f[ZaDomain.A2_zimbraSpnegoAuthPrincipal]);
b.setAttribute("n",ZaDomain.A2_zimbraSpnegoAuthPrincipal)
}if(f[ZaDomain.A2_zimbraSpnegoAuthTargetName]){b=e.set("a",f[ZaDomain.A2_zimbraSpnegoAuthTargetName]);
b.setAttribute("n",ZaDomain.A2_zimbraSpnegoAuthTargetName)
}var g=new Object();
g.soapDoc=e;
var c={controller:ZaApp.getInstance().getCurrentController(),busyMsg:ZaMsg.BUSY_MODIFY_SERVER};
ZaRequestMgr.invoke(g,c)
}}}
}if(AjxPackage.define("zimbraAdmin.domains.view.ZaTaskAutoProvDialog")){ZaTaskAutoProvDialog=function(e,g,d,b){if(arguments.length==0){return
}var c=new DwtDialog_ButtonDescriptor(ZaTaskAutoProvDialog.APPLY_BUTTON,ZaMsg.LBL_ApplyButton,DwtDialog.ALIGN_RIGHT,new AjxCallback(this,this._applyButtonListener));
var f=new DwtDialog_ButtonDescriptor(ZaXWizardDialog.HELP_BUTTON,ZaMsg.TBB_Help,DwtDialog.ALIGN_LEFT,new AjxCallback(this,this._helpButtonListener));
this._standardButtons=[DwtDialog.OK_BUTTON,DwtDialog.CANCEL_BUTTON];
this._extraButtons=[f,c];
this._width=d||"680px";
this._height=b||"390px";
ZaXDialog.call(this,e,null,g,this._width,this._height,null,ZaId.DLG_AUTPROV_MANUAL+"_ENHANCE");
this._containedObject={};
this.initForm(ZaDomain.myXModel,this.getMyXForm());
this._helpURL=ZaTaskAutoProvDialog.helpURL;
this._forceApplyMessageDialog=new ZaMsgDialog(ZaApp.getInstance().getAppCtxt().getShell(),null,[DwtDialog.YES_BUTTON,DwtDialog.NO_BUTTON],null,ZaId.CTR_PREFIX+ZaId.VIEW_DMLIST+"_forceApplyConfirm");
this._forceApplyMessageDialog.registerCallback(DwtDialog.YES_BUTTON,ZaTaskAutoProvDialog.prototype._forceApplyCallback,this);
this._localXForm.addListener(DwtEvent.XFORMS_FORM_DIRTY_CHANGE,new AjxListener(this,ZaTaskAutoProvDialog.prototype.handleXFormChange));
this._localXForm.addListener(DwtEvent.XFORMS_VALUE_ERROR,new AjxListener(this,ZaTaskAutoProvDialog.prototype.handleXFormChange))
};
ZaTaskAutoProvDialog.prototype=new ZaXDialog;
ZaTaskAutoProvDialog.prototype.constructor=ZaTaskAutoProvDialog;
ZaTaskAutoProvDialog.prototype.supportMinimize=true;
ZaTaskAutoProvDialog.helpURL=location.pathname+ZaUtil.HELP_URL+"managing_domain/autoprov_manual_config.htm?locid="+AjxEnv.DEFAULT_LOCALE;
ZaTaskAutoProvDialog.APPLY_BUTTON=++DwtDialog.LAST_BUTTON;
ZaTaskAutoProvDialog.prototype.getCacheName=function(){return"ZaTaskAutoProvDialog"
};
ZaTaskAutoProvDialog.prototype.setObject=function(b){this._containedObject=new ZaDomain();
ZaItem.prototype.copyTo.call(b,this._containedObject,true,4);
this._containedObject[ZaDomain.A2_zimbraAutoProvSearchActivated]=b[ZaDomain.A2_zimbraAutoProvSearchActivated]||"TRUE";
if(b.attrs[ZaDomain.A_zimbraAutoProvAttrMap]&&(typeof b.attrs[ZaDomain.A_zimbraAutoProvAttrMap]=="string")){this._containedObject.attrs[ZaDomain.A_zimbraAutoProvAttrMap]=[b.attrs[ZaDomain.A_zimbraAutoProvAttrMap]]
}this._backupLdapObj(this._containedObject);
this._containedObject[ZaDomain.A2_zimbraAutoProvAccountPool]=b[ZaDomain.A2_zimbraAutoProvAccountPool]||[];
this._containedObject[ZaDomain.A2_zimbraAutoProvAccountTargetPool]=b[ZaDomain.A2_zimbraAutoProvAccountTargetPool]||[];
this._separateConfigureValues(this._containedObject);
this._containedObject._uuid=b._extid||b._uuid;
this._containedObject._editObject=b._editObject;
this._localXForm.setInstance(this._containedObject);
this._button[DwtDialog.OK_BUTTON].setEnabled(false);
this._button[ZaTaskAutoProvDialog.APPLY_BUTTON].setEnabled(false)
};
ZaTaskAutoProvDialog.prototype.finishWizard=function(c){try{if(!this._checkGeneralConfig()||!this._checkEagerConfig()||!this._checkLazyConfig()){return
}this._combineConfigureValues(this._containedObject);
ZaDomain.modifyAutoPovSettings.call(this._containedObject._editObject,this._containedObject);
ZaApp.getInstance().getDomainListController()._fireDomainChangeEvent(this._containedObject._editObject);
this.popdown();
ZaApp.getInstance().getDomainListController()._notifyAllOpenTabs()
}catch(b){this._handleException(b,"ZaDomainListController.prototype._finishAutoProvButtonListener",null,false)
}return
};
ZaTaskAutoProvDialog.prototype.handleXFormChange=function(){if(this._localXForm.hasErrors()){this._button[DwtDialog.OK_BUTTON].setEnabled(false);
this._button[ZaTaskAutoProvDialog.APPLY_BUTTON].setEnabled(false)
}else{this._button[DwtDialog.OK_BUTTON].setEnabled(true);
this._button[ZaTaskAutoProvDialog.APPLY_BUTTON].setEnabled(true)
}this.tabClickHandler()
};
ZaTaskAutoProvDialog.prototype.getMyXForm=function(){this.tabChoices=new Array();
this.TAB_INDEX=0;
var f,e,d,c,b;
f=++this.TAB_INDEX;
this.tabChoices.push({value:f,label:ZaMsg.TBB_AUTOPROV_GENERAL});
e=++this.TAB_INDEX;
this.tabChoices.push({value:e,label:ZaMsg.TBB_AUTOPROV_EAGER});
d=++this.TAB_INDEX;
this.tabChoices.push({value:d,label:ZaMsg.TBB_AUTOPROV_LAZY});
this.TAB_STEP_MANUAL=c=++this.TAB_INDEX;
this.tabChoices.push({value:c,label:ZaMsg.TBB_AUTOPROV_MANUAL});
b=++this.TAB_INDEX;
this.tabChoices.push({value:b,label:ZaMsg.TBB_zimbraAutoProvEmailSetting});
var n=[];
var m={type:_ZATABCASE_,numCols:2,colSizes:["150px","490px"],caseKey:f,id:"auto_provision_config_general",getCustomWidth:ZaTaskAutoProvDialog.getCustomWidth,getCustomHeight:ZaTaskAutoProvDialog.getCustomHeight,items:[{type:_SPACER_,height:10},{type:_GROUPER_,colSpan:"*",width:"100%",label:"LDAP Configuration",containerCssStyle:"padding-top:5px",enableDisableChecks:[],enableDisableChangeEventSources:[ZaDomain.A2_zimbraAutoProvModeEAGEREnabled,ZaDomain.A2_zimbraAutoProvModeLAZYEnabled,ZaDomain.A2_zimbraAutoProvModeMANUALEnabled],items:[{type:_GROUP_,numCols:6,label:"   ",labelLocation:_LEFT_,visibilityChecks:[],visibilityChangeEventSources:[],items:[{type:_OUTPUT_,label:null,labelLocation:_NONE_,value:" ",width:"35px"},{type:_OUTPUT_,label:null,labelLocation:_NONE_,value:ZaMsg.Domain_AuthLDAPServerName,width:"200px"},{type:_OUTPUT_,label:null,labelLocation:_NONE_,value:" ",width:"5px"},{type:_OUTPUT_,label:null,labelLocation:_NONE_,value:ZaMsg.Domain_AuthLDAPServerPort,width:"40px"},{type:_OUTPUT_,label:null,labelLocation:_NONE_,value:ZaMsg.Domain_AuthLDAPUseSSL,width:"80px"}]},{ref:ZaDomain.A_zimbraAutoProvLdapURL,type:_LDAPURL_,label:ZaMsg.LBL_zimbraAutoProvLdapURL,ldapSSLPort:"636",ldapPort:"389",labelLocation:_LEFT_,label:ZaMsg.LBL_zimbraAutoProvLdapURL},{ref:ZaDomain.A_zimbraAutoProvLdapStartTlsEnabled,type:_CHECKBOX_,label:ZaMsg.LBL_zimbraAutoProvLdapStartTlsEnabled,subLabel:"",align:_RIGHT_,trueValue:"TRUE",falseValue:"FALSE",labelLocation:_RIGHT_},{ref:ZaDomain.A_zimbraAutoProvLdapAdminBindDn,type:_INPUT_,label:ZaMsg.LBL_zimbraAutoProvLdapAdminBindDn,labelLocation:_LEFT_,enableDisableChecks:[],enableDisableChangeEventSources:[]},{ref:ZaDomain.A_zimbraAutoProvLdapAdminBindPassword,type:_SECRET_,label:ZaMsg.LBL_zimbraAutoProvLdapAdminBindPassword,labelLocation:_LEFT_},{ref:ZaDomain.A_zimbraAutoProvLdapSearchFilter,type:_TEXTAREA_,width:350,height:40,label:ZaMsg.LBL_zimbraAutoProvLdapSearchFilter,labelLocation:_LEFT_,textWrapping:"soft"},{ref:ZaDomain.A_zimbraAutoProvLdapSearchBase,type:_TEXTAREA_,width:350,height:40,label:ZaMsg.LBL_zimbraAutoProvLdapSearchBase,labelLocation:_LEFT_,textWrapping:"soft"},{ref:ZaDomain.A_zimbraAutoProvLdapBindDn,type:_INPUT_,label:ZaMsg.LBL_zimbraAutoProvLdapBindDn,labelLocation:_LEFT_}]},{type:_SPACER_,height:10},{ref:ZaDomain.A_zimbraAutoProvNotificationFromAddress,type:_TEXTFIELD_,label:ZaMsg.LBL_zimbraAutoProvNotificationFromAddress,labelLocation:_LEFT_,width:250,onChange:ZaDomainXFormView.onFormFieldChanged},{ref:ZaDomain.A_zimbraAutoProvAccountNameMap,type:_TEXTFIELD_,label:ZaMsg.LBL_zimbraAutoProvAccountNameMap,labelLocation:_LEFT_,width:250,onChange:ZaDomainXFormView.onFormFieldChanged},{ref:ZaDomain.A_zimbraAutoProvAttrMap,type:_REPEAT_,label:ZaMsg.LBL_zimbraAutoProvAttrMap,repeatInstance:"",showAddButton:true,showRemoveButton:true,addButtonLabel:ZaMsg.NAD_Add,showAddOnNextRow:true,removeButtonLabel:ZaMsg.NAD_Remove,items:[{ref:".",type:_TEXTFIELD_,label:null,enableDisableChecks:[],visibilityChecks:[],onChange:ZaDomainXFormView.onFormFieldChanged}]}]};
n.push(m);
var l={type:_ZATABCASE_,numCols:2,colSizes:["45px","*"],caseKey:e,id:"auto_provision_config_eager",getCustomWidth:ZaTaskAutoProvDialog.getCustomWidth,getCustomHeight:ZaTaskAutoProvDialog.getCustomHeight,items:[{type:_SPACER_,height:20},{ref:ZaDomain.A2_zimbraAutoProvModeEAGEREnabled,type:_CHECKBOX_,label:ZaMsg.LBL_zimbraAutoProvModeEAGER,subLabel:"",align:_RIGHT_,trueValue:"TRUE",falseValue:"FALSE",labelLocation:_RIGHT_},{type:_SPACER_,height:20},{type:_GROUPER_,colSpan:"*",width:"100%",label:"Configuration",containerCssStyle:"padding-top:5px",colSizes:["175px","*"],numCols:2,enableDisableChecks:[[XForm.checkInstanceValue,ZaDomain.A2_zimbraAutoProvModeEAGEREnabled,"TRUE"]],enableDisableChangeEventSources:[ZaDomain.A2_zimbraAutoProvModeEAGEREnabled],items:[{ref:ZaDomain.A_zimbraAutoProvBatchSize,type:_TEXTFIELD_,label:ZaMsg.LBL_zimbraAutoProvBatchSize,autoSaveValue:true,labelLocation:_LEFT_,enableDisableChecks:[[XForm.checkInstanceValue,ZaDomain.A2_zimbraAutoProvModeEAGEREnabled,"TRUE"]],enableDisableChangeEventSources:[ZaDomain.A2_zimbraAutoProvModeEAGEREnabled],cssClass:"admin_xform_number_input"},{ref:ZaDomain.A2_zimbraAutoProvPollingInterval,type:_LIFETIME_,colSizes:["80px","100px","*"],label:ZaMsg.LBL_zimbraAutoProvPollingInterval,labelLocation:_LEFT_,enableDisableChecks:[[XForm.checkInstanceValue,ZaDomain.A2_zimbraAutoProvModeEAGEREnabled,"TRUE"]],enableDisableChangeEventSources:[ZaDomain.A2_zimbraAutoProvModeEAGEREnabled]},{type:_DWT_LIST_,ref:ZaDomain.A2_zimbraAutoProvServerList,width:250,height:50,label:ZaMsg.LBL_zimbraAutoProvServerList,labelLocation:_LEFT_,labelCssStyle:"vertical-align:top",nowrap:false,labelWrap:true,forceUpdate:true,widgetClass:ZaServerOptionList,multiselect:true,preserveSelection:true,enableDisableChecks:[[XForm.checkInstanceValue,ZaDomain.A2_zimbraAutoProvModeEAGEREnabled,"TRUE"]],enableDisableChangeEventSources:[ZaDomain.A2_zimbraAutoProvModeEAGEREnabled],onSelection:ZaTaskAutoProvDialog.filterSelectionListener}]},{type:_GROUPER_,colSpan:"*",width:"100%",label:"Note",containerCssStyle:"padding-top:15px",numCols:1,items:[{type:_OUTPUT_,value:ZaMsg.MSG_AUTOPROV_DLG_EAGER}]}]};
n.push(l);
var k={type:_ZATABCASE_,numCols:2,colSizes:["45px","*"],caseKey:d,id:"auto_provision_config_lazy",getCustomWidth:ZaTaskAutoProvDialog.getCustomWidth,getCustomHeight:ZaTaskAutoProvDialog.getCustomHeight,items:[{type:_SPACER_,height:20},{ref:ZaDomain.A2_zimbraAutoProvModeLAZYEnabled,type:_CHECKBOX_,label:ZaMsg.LBL_zimbraAutoProvModeLAZY,subLabel:"",align:_RIGHT_,trueValue:"TRUE",falseValue:"FALSE",labelLocation:_RIGHT_},{type:_SPACER_,height:20},{type:_GROUPER_,colSpan:"*",width:"100%",label:"Configuration",containerCssStyle:"padding-top:5px",colSizes:["200px","*"],numCols:2,items:[{type:_GROUP_,numCols:2,label:ZaMsg.LBL_zimbraAutoProvAuthMech,labelLocation:_LEFT_,colSizes:["20px","150px"],labelCssStyle:"vertical-align:top",nowrap:false,labelWrap:true,enableDisableChecks:[[XForm.checkInstanceValue,ZaDomain.A2_zimbraAutoProvModeLAZYEnabled,"TRUE"]],enableDisableChangeEventSources:[ZaDomain.A2_zimbraAutoProvModeLAZYEnabled],items:[{ref:ZaDomain.A2_zimbraAutoProvAuthMechLDAPEnabled,type:_CHECKBOX_,label:ZaMsg.LBL_zimbraAutoProvAuthMechLDAP,subLabel:"",trueValue:"TRUE",falseValue:"FALSE",labelLocation:_RIGHT_},{ref:ZaDomain.A2_zimbraAutoProvAuthMechPREAUTHEnabled,type:_CHECKBOX_,label:ZaMsg.LBL_zimbraAutoProvAuthMechPREAUTH,subLabel:"",trueValue:"TRUE",falseValue:"FALSE",labelLocation:_RIGHT_},{ref:ZaDomain.A2_zimbraAutoProvAuthMechKRB5Enabled,type:_CHECKBOX_,label:ZaMsg.LBL_zimbraAutoProvAuthMechKRB5,subLabel:"",trueValue:"TRUE",falseValue:"FALSE",labelLocation:_RIGHT_},{ref:ZaDomain.A2_zimbraAutoProvAuthMechSPNEGOEnabled,type:_CHECKBOX_,label:ZaMsg.LBL_zimbraAutoProvAuthMechSPNEGO,subLabel:"",trueValue:"TRUE",falseValue:"FALSE",labelLocation:_RIGHT_}]}]},{type:_GROUPER_,colSpan:"*",width:"100%",label:"Note",containerCssStyle:"padding-top:15px",numCols:1,items:[{type:_OUTPUT_,value:ZaMsg.MSG_AUTOPROV_DLG_LAZY}]}]};
n.push(k);
var j={type:_ZATABCASE_,numCols:2,colSizes:["45px","*"],caseKey:c,id:"auto_provision_config_lazy",getCustomWidth:ZaTaskAutoProvDialog.getCustomWidth,getCustomHeight:ZaTaskAutoProvDialog.getCustomHeight,items:[{type:_SPACER_,height:20},{ref:ZaDomain.A2_zimbraAutoProvModeMANUALEnabled,type:_CHECKBOX_,label:ZaMsg.LBL_zimbraAutoProvModeMANUAL,subLabel:"",align:_RIGHT_,trueValue:"TRUE",falseValue:"FALSE",labelLocation:_RIGHT_,onChange:ZaTaskAutoProvDialog.onFormFieldChanged},{type:_SPACER_,height:20},{type:_GROUPER_,colSpan:"*",width:"100%",label:"Find & Provisioning",enableDisableChecks:[[XForm.checkInstanceValue,ZaDomain.A2_zimbraAutoProvModeMANUALEnabled,"TRUE"]],enableDisableChangeEventSources:[ZaDomain.A2_zimbraAutoProvModeMANUALEnabled],containerCssStyle:"padding-top:5px",items:[{type:_GROUP_,colSpan:2,numCols:3,width:"100%",colSizes:["180px","85px","180px"],cellspacing:"5px",items:[{type:_TEXTFIELD_,cssClass:"admin_xform_name_input",width:"185px",ref:ZaSearch.A_query,label:null,elementChanged:function(r,q,p){var o=p.charCode;
if(o==13||o==3){ZaTaskAutoProvDialog.srchButtonHndlr.call(this)
}else{this.getForm().itemChanged(this,r,p)
}},visibilityChecks:[],enableDisableChecks:[]},{type:_DWT_BUTTON_,label:ZaMsg.DLXV_ButtonSearch,width:"80px",onActivate:ZaTaskAutoProvDialog.srchButtonHndlr,align:_CENTER_,enableDisableChecks:[[XForm.checkInstanceValue,ZaDomain.A2_zimbraAutoProvSearchActivated,"TRUE"]],enableDisableChangeEventSources:[ZaDomain.A2_zimbraAutoProvSearchActivated]},{type:_OUTPUT_,value:ZaMsg.LBL_ManualProvAccount,visibilityChecks:[]},{ref:ZaDomain.A2_zimbraAutoProvAccountPool,type:_DWT_LIST_,height:"180px",width:"180px",cssClass:"DLSource",widgetClass:ZaAccMiniListView,rowSpan:4,onSelection:ZaTaskAutoProvDialog.accPoolSelectionListener,visibilityChecks:[],enableDisableChecks:[]},{type:_DWT_BUTTON_,label:AjxMsg.addAll,width:"80px",onActivate:ZaTaskAutoProvDialog.addAllButtonHndlr,enableDisableChecks:[[XForm.checkInstanceValueNotEmty,ZaDomain.A2_zimbraAutoProvAccountPool]],enableDisableChangeEventSources:[ZaDomain.A2_zimbraAutoProvAccountPool]},{ref:ZaDomain.A2_zimbraAutoProvAccountTargetPool,type:_DWT_LIST_,height:"180px",width:"180px",cssClass:"DLSource",widgetClass:ZaAccMiniListView,rowSpan:4,onSelection:ZaTaskAutoProvDialog.accTargetSelectionListener,visibilityChecks:[],enableDisableChecks:[]},{type:_DWT_BUTTON_,label:AjxMsg.add,width:"80px",onActivate:ZaTaskAutoProvDialog.addButtonHndlr,enableDisableChecks:[[XForm.checkInstanceValueNotEmty,ZaDomain.A2_zimbraAutoProvAccountSrcSelectedPool]],enableDisableChangeEventSources:[ZaDomain.A2_zimbraAutoProvAccountSrcSelectedPool]},{type:_DWT_BUTTON_,label:AjxMsg.remove,width:"80px",onActivate:ZaTaskAutoProvDialog.removeButtonHndlr,enableDisableChecks:[[XForm.checkInstanceValueNotEmty,ZaDomain.A2_zimbraAutoProvAccountTgtSelectedPool]],enableDisableChangeEventSources:[ZaDomain.A2_zimbraAutoProvAccountTgtSelectedPool]},{type:_DWT_BUTTON_,label:AjxMsg.removeAll,width:"80px",onActivate:ZaTaskAutoProvDialog.removeAllButtonHndlr,enableDisableChecks:[[XForm.checkInstanceValueNotEmty,ZaDomain.A2_zimbraAutoProvAccountTargetPool]],enableDisableChangeEventSources:[ZaDomain.A2_zimbraAutoProvAccountTargetPool]},{type:_GROUP_,numCols:3,colSizes:["90px","*","90px"],items:[{type:_SPACER_,colSpan:3},{type:_DWT_BUTTON_,label:ZaMsg.Previous,width:75,id:"backButton",icon:"LeftArrow",disIcon:"LeftArrowDis",onActivate:ZaTaskAutoProvDialog.backPoolButtonHndlr,align:_CENTER_,enableDisableChecks:[ZaTaskAutoProvDialog.backBtnEnabled],enableDisableChangeEventSources:[ZaDomain.A2_zimbraAutoProvAccountPoolPageNum,ZaDomain.A2_zimbraAutoProvSearchActivated]},{type:_CELLSPACER_},{type:_DWT_BUTTON_,label:ZaMsg.Next,width:75,id:"fwdButton",icon:"RightArrow",disIcon:"RightArrowDis",onActivate:ZaTaskAutoProvDialog.fwdPoolButtonHndlr,align:_CENTER_,enableDisableChecks:[ZaTaskAutoProvDialog.forwardBtnEnabled],enableDisableChangeEventSources:[ZaDomain.A2_zimbraAutoProvAccountPoolPageNum,ZaDomain.A2_zimbraAutoProvSearchActivated]}]},{type:_CELLSPACER_}]}]}]};
n.push(j);
var h={type:_ZATABCASE_,numCols:1,width:"98%",caseKey:b,id:"auto_provision_email_setting",getCustomWidth:ZaTaskAutoProvDialog.getCustomWidth,getCustomHeight:ZaTaskAutoProvDialog.getCustomHeight,items:[{type:_SPACER_,height:20},{type:_GROUPER_,colSpan:"*",width:"100%",label:ZaMsg.LBL_zimbraAutoProvConfiguration,containerCssStyle:"padding-top:5px",colSizes:["100px","auto"],numCols:2,items:[{ref:ZaDomain.A_zimbraAutoProvNotificationSubject,type:_SUPER_TEXTFIELD_,colSpan:2,label:ZaMsg.LBL_zimbraAutoProvEmailSubject,labelLocation:_LEFT_,textFieldCssStyle:"width:300; margin-right:5",onChange:ZaTaskAutoProvDialog.onFormFieldChanged,resetToSuperLabel:ZaMsg.NAD_ResetToGlobal},{ref:ZaDomain.A_zimbraAutoProvNotificationBody,type:_SUPER_TEXTAREA_,colSpan:2,label:ZaMsg.LBL_zimbraAutoProvEmailBody,labelLocation:_LEFT_,textAreaCssStyle:"width:300; margin-right:5",onChange:ZaTaskAutoProvDialog.onFormFieldChanged,resetToSuperLabel:ZaMsg.NAD_ResetToGlobal}]}]};
n.push(h);
var g={numCols:1,items:[{type:_TAB_BAR_,ref:ZaModel.currentTab,choices:this.tabChoices,cssClass:"ZaTabBar",id:"xform_tabbar"},{type:_SWITCH_,align:_LEFT_,valign:_TOP_,items:n}]};
return g
};
ZaTaskAutoProvDialog.onFormFieldChanged=function(f,e,d){var c=this.getRefPath();
if(c==ZaDomain.A_zimbraAutoProvNotificationSubject||c==ZaDomain.A_zimbraAutoProvNotificationBody){this.setInstanceValue(f);
return
}var b=this.getInstance();
b[ZaDomain.A2_zimbraAutoProvSearchActivated]="TRUE";
this.setInstanceValue(f);
return f
};
ZaTaskAutoProvDialog.prototype._forceApplyCallback=function(){this._applyButtonListener()
};
ZaTaskAutoProvDialog.prototype._confirmPasswordSettingCallback=function(){if(this._confirmPasswordSettingDialog){this._confirmPasswordSettingDialog.popdown()
}var b=this.getObject();
if(b[ZaDomain.A2_zimbraAutoProvAccountPasswordInDlg]){b[ZaDomain.A2_zimbraAutoProvAccountPassword]=b[ZaDomain.A2_zimbraAutoProvAccountPasswordInDlg]
}};
ZaTaskAutoProvDialog.getCustomWidth=function(){return"100%"
};
ZaTaskAutoProvDialog.getCustomHeight=function(){return"100%"
};
ZaTaskAutoProvDialog.prototype._applyButtonListener=function(){if(this._forceApplyMessageDialog){this._forceApplyMessageDialog.popdown()
}try{var b=ZaApp.getInstance().getCurrentController();
if(this._checkGeneralConfig()&&this._checkEagerConfig()&&this._checkLazyConfig()){var d=this.getObject();
this._combineConfigureValues(d);
ZaDomain.modifyAutoPovSettings.call(this._containedObject,d);
b._notifyAllOpenTabs();
if(d.currentTab==4){if(this._checkManualConfig()){this.finishConfig()
}else{return
}}this._button[DwtDialog.OK_BUTTON].setEnabled(false);
this._button[ZaTaskAutoProvDialog.APPLY_BUTTON].setEnabled(false);
this._backupLdapObj(d)
}}catch(c){ZaApp.getInstance().getCurrentController()._handleException(c,"ZaTaskAutoProvDialog.prototype._applyButtonListener",null,false)
}};
ZaTaskAutoProvDialog.prototype._checkGeneralConfig=function(){var b=false;
var c="";
if(!this._containedObject.attrs[ZaDomain.A_zimbraAutoProvLdapURL]||this._containedObject.attrs[ZaDomain.A_zimbraAutoProvLdapURL]==""){b=true;
c=AjxMessageFormat.format(ZaMsg.ERROR_AUTOPROV,ZaMsg.MSG_zimbraAutoProvLdapURL)
}else{if(!this._containedObject.attrs[ZaDomain.A_zimbraAutoProvLdapAdminBindDn]||this._containedObject.attrs[ZaDomain.A_zimbraAutoProvLdapAdminBindDn]==""){b=true;
c=AjxMessageFormat.format(ZaMsg.ERROR_AUTOPROV,ZaMsg.MSG_zimbraAutoProvLdapAdminBindDn)
}else{if(!this._containedObject.attrs[ZaDomain.A_zimbraAutoProvLdapAdminBindPassword]||this._containedObject.attrs[ZaDomain.A_zimbraAutoProvLdapAdminBindPassword]==""){b=true;
c=AjxMessageFormat.format(ZaMsg.ERROR_AUTOPROV,ZaMsg.MSG_zimbraAutoProvLdapAdminBindPassword)
}else{if(!this._containedObject.attrs[ZaDomain.A_zimbraAutoProvLdapSearchBase]||this._containedObject.attrs[ZaDomain.A_zimbraAutoProvLdapSearchBase]==""){b=true;
c=AjxMessageFormat.format(ZaMsg.ERROR_AUTOPROV,ZaMsg.MSG_zimbraAutoProvLdapSearchBase)
}}}}if(!b&&this._containedObject[ZaDomain.A2_zimbraAutoProvModeEAGEREnabled]=="TRUE"){if(!this._containedObject.attrs[ZaDomain.A_zimbraAutoProvLdapSearchFilter]||this._containedObject.attrs[ZaDomain.A_zimbraAutoProvLdapSearchFilter]==""){b=true;
c=AjxMessageFormat.format(ZaMsg.ERROR_AUTOPROV,ZaMsg.MSG_zimbraAutoProvLdapSearchFilter)
}else{if(!this._containedObject.attrs[ZaDomain.A_zimbraAutoProvLdapBindDn]||this._containedObject.attrs[ZaDomain.A_zimbraAutoProvLdapBindDn]==""){b=true;
c=AjxMessageFormat.format(ZaMsg.ERROR_AUTOPROV,ZaMsg.MSG_zimbraAutoProvLdapBindDn)
}}}if(b){ZaApp.getInstance().getCurrentController().popupErrorDialog(c);
return false
}else{return true
}};
ZaTaskAutoProvDialog.prototype._checkEagerConfig=function(){var b=false;
var c="";
if(!b&&this._containedObject[ZaDomain.A2_zimbraAutoProvModeEAGEREnabled]=="TRUE"){if(!this._containedObject.attrs[ZaDomain.A_zimbraAutoProvBatchSize]||this._containedObject.attrs[ZaDomain.A_zimbraAutoProvBatchSize]==""){b=true;
c=AjxMessageFormat.format(ZaMsg.ERROR_AUTOPROV,ZaMsg.MSG_zimbraAutoProvBatchSize)
}}if(b){ZaApp.getInstance().getCurrentController().popupErrorDialog(c);
return false
}else{return true
}};
ZaTaskAutoProvDialog.prototype._checkLazyConfig=function(){if(this._containedObject[ZaDomain.A2_zimbraAutoProvModeLAZYEnabled]=="TRUE"&&(!this._containedObject[ZaDomain.A2_zimbraAutoProvAuthMechLDAPEnabled]||this._containedObject[ZaDomain.A2_zimbraAutoProvAuthMechLDAPEnabled]=="FALSE")&&(!this._containedObject[ZaDomain.A2_zimbraAutoProvAuthMechPREAUTHEnabled]||this._containedObject[ZaDomain.A2_zimbraAutoProvAuthMechPREAUTHEnabled]=="FALSE")&&(!this._containedObject[ZaDomain.A2_zimbraAutoProvAuthMechKRB5Enabled]||this._containedObject[ZaDomain.A2_zimbraAutoProvAuthMechKRB5Enabled]=="FALSE")&&(!this._containedObject[ZaDomain.A2_zimbraAutoProvAuthMechSPNEGOEnabled]||this._containedObject[ZaDomain.A2_zimbraAutoProvAuthMechSPNEGOEnabled]=="FALSE")){ZaApp.getInstance().getCurrentController().popupErrorDialog(ZaMsg.ERROR_AUTOPROV_LAZYAUTH);
return false
}else{return true
}};
ZaTaskAutoProvDialog.prototype._checkManualConfig=function(){var g=this._containedObject.attrs[ZaDomain.A_zimbraAutoProvAttrMap];
var f=this.getObject();
var c=false;
if(g){if(!(g instanceof Array)){g=[g]
}for(var d=0;
d<g.length&&!c;
d++){var e=g[d].split("=");
if(e.length>0&&e[0].indexOf("userPassword")==0){c=true
}}}if(f[ZaDomain.A2_zimbraAutoProvAccountPassword]){return true
}else{if(!c){if(!this._confirmPasswordSettingDialog){var b="220px";
if(AjxEnv.isIE){b="245px"
}this._confirmPasswordSettingDialog=new ZaConfirmPasswordDialog(ZaApp.getInstance().getAppCtxt().getShell(),"450px",b,ZaMsg.DLG_TITILE_MANUAL_PROV)
}this._confirmPasswordSettingDialog.registerCallback(DwtDialog.OK_BUTTON,ZaTaskAutoProvDialog.prototype._confirmPasswordSettingCallback,this,null);
this._confirmPasswordSettingDialog.setObject(this._containedObject);
this._confirmPasswordSettingDialog.popup()
}}return c
};
ZaTaskAutoProvDialog.prototype._separateConfigureValues=function(e){if(e.attrs[ZaDomain.A_zimbraAutoProvMode]){if(e.attrs[ZaDomain.A_zimbraAutoProvMode] instanceof Array){for(var g=0;
g<e.attrs[ZaDomain.A_zimbraAutoProvMode].length;
g++){if(e.attrs[ZaDomain.A_zimbraAutoProvMode][g]=="EAGER"){e[ZaDomain.A2_zimbraAutoProvModeEAGEREnabled]="TRUE"
}else{if(e.attrs[ZaDomain.A_zimbraAutoProvMode][g]=="LAZY"){e[ZaDomain.A2_zimbraAutoProvModeLAZYEnabled]="TRUE"
}else{if(e.attrs[ZaDomain.A_zimbraAutoProvMode][g]=="MANUAL"){e[ZaDomain.A2_zimbraAutoProvModeMANUALEnabled]="TRUE"
}}}}}else{if(e.attrs[ZaDomain.A_zimbraAutoProvMode]=="EAGER"){e[ZaDomain.A2_zimbraAutoProvModeEAGEREnabled]="TRUE"
}else{if(e.attrs[ZaDomain.A_zimbraAutoProvMode]=="LAZY"){e[ZaDomain.A2_zimbraAutoProvModeLAZYEnabled]="TRUE"
}else{if(e.attrs[ZaDomain.A_zimbraAutoProvMode]=="MANUAL"){e[ZaDomain.A2_zimbraAutoProvModeMANUALEnabled]="TRUE"
}}}}}if(e.attrs[ZaDomain.A_zimbraAutoProvAuthMech]){if(e.attrs[ZaDomain.A_zimbraAutoProvAuthMech] instanceof Array){for(var g=0;
g<e.attrs[ZaDomain.A_zimbraAutoProvAuthMech].length;
g++){if(e.attrs[ZaDomain.A_zimbraAutoProvAuthMech][g]=="LDAP"){e[ZaDomain.A2_zimbraAutoProvAuthMechLDAPEnabled]="TRUE"
}else{if(e.attrs[ZaDomain.A_zimbraAutoProvAuthMech][g]=="PREAUTH"){e[ZaDomain.A2_zimbraAutoProvAuthMechPREAUTHEnabled]="TRUE"
}else{if(e.attrs[ZaDomain.A_zimbraAutoProvAuthMech][g]=="KRB5"){e[ZaDomain.A2_zimbraAutoProvAuthMechKRB5Enabled]="TRUE"
}else{if(e.attrs[ZaDomain.A_zimbraAutoProvAuthMech][g]=="SPNEGO"){e[ZaDomain.A2_zimbraAutoProvAuthMechSPNEGOEnabled]="TRUE"
}}}}}}else{if(e.attrs[ZaDomain.A_zimbraAutoProvAuthMech]=="LDAP"){e[ZaDomain.A2_zimbraAutoProvAuthMechLDAPEnabled]="TRUE"
}else{if(e.attrs[ZaDomain.A_zimbraAutoProvAuthMech]=="PREAUTH"){e[ZaDomain.A2_zimbraAutoProvAuthMechPREAUTHEnabled]="TRUE"
}else{if(e.attrs[ZaDomain.A_zimbraAutoProvAuthMech]=="KRB5"){e[ZaDomain.A2_zimbraAutoProvAuthMechKRB5Enabled]="TRUE"
}else{if(e.attrs[ZaDomain.A_zimbraAutoProvAuthMech]=="SPNEGO"){e[ZaDomain.A2_zimbraAutoProvAuthMechSPNEGOEnabled]="TRUE"
}}}}}}e[ZaDomain.A2_zimbraAutoProvServerList]=ZaApp.getInstance().getServerList(true).getArray();
e[ZaDomain.A2_zimbraAutoProvSelectedServerList]=new AjxVector();
for(var c=0;
c<e[ZaDomain.A2_zimbraAutoProvServerList].length;
c++){var f=e[ZaDomain.A2_zimbraAutoProvServerList][c];
var d=f.attrs[ZaServer.A_zimbraAutoProvScheduledDomains];
for(var b=0;
d&&b<d.length;
b++){if(d[b]==e.name){e[ZaDomain.A2_zimbraAutoProvSelectedServerList].add(f.name);
f.checked=true;
if(f.attrs[ZaServer.A_zimbraAutoProvPollingInterval]){e[ZaDomain.A2_zimbraAutoProvPollingInterval]=f.attrs[ZaServer.A_zimbraAutoProvPollingInterval]
}}}}};
ZaTaskAutoProvDialog.prototype._combineConfigureValues=function(b){b.attrs[ZaDomain.A_zimbraAutoProvMode]=[];
if(b[ZaDomain.A2_zimbraAutoProvModeEAGEREnabled]=="TRUE"){b.attrs[ZaDomain.A_zimbraAutoProvMode].push("EAGER")
}if(b[ZaDomain.A2_zimbraAutoProvModeLAZYEnabled]=="TRUE"){b.attrs[ZaDomain.A_zimbraAutoProvMode].push("LAZY")
}if(b[ZaDomain.A2_zimbraAutoProvModeMANUALEnabled]=="TRUE"){b.attrs[ZaDomain.A_zimbraAutoProvMode].push("MANUAL")
}b.attrs[ZaDomain.A_zimbraAutoProvAuthMech]=[];
if(b[ZaDomain.A2_zimbraAutoProvAuthMechLDAPEnabled]=="TRUE"){b.attrs[ZaDomain.A_zimbraAutoProvAuthMech].push("LDAP")
}if(b[ZaDomain.A2_zimbraAutoProvAuthMechPREAUTHEnabled]=="TRUE"){b.attrs[ZaDomain.A_zimbraAutoProvAuthMech].push("PREAUTH")
}if(b[ZaDomain.A2_zimbraAutoProvAuthMechKRB5Enabled]=="TRUE"){b.attrs[ZaDomain.A_zimbraAutoProvAuthMech].push("KRB5")
}if(b[ZaDomain.A2_zimbraAutoProvAuthMechSPNEGOEnabled]=="TRUE"){b.attrs[ZaDomain.A_zimbraAutoProvAuthMech].push("SPNEGO")
}};
ZaTaskAutoProvDialog.prototype._backupLdapObj=function(b){if(!this._autoprovLdapObject){this._autoprovLdapObject={}
}if(!b||!b.attrs){return
}if(b.attrs[ZaDomain.A_zimbraAutoProvLdapURL]){this._autoprovLdapObject[ZaDomain.A_zimbraAutoProvLdapURL]=b.attrs[ZaDomain.A_zimbraAutoProvLdapURL]
}else{this._autoprovLdapObject[ZaDomain.A_zimbraAutoProvLdapURL]=null
}if(b.attrs[ZaDomain.A_zimbraAutoProvLdapStartTlsEnabled]){this._autoprovLdapObject[ZaDomain.A_zimbraAutoProvLdapStartTlsEnabled]=b.attrs[ZaDomain.A_zimbraAutoProvLdapStartTlsEnabled]
}else{this._autoprovLdapObject[ZaDomain.A_zimbraAutoProvLdapStartTlsEnabled]=null
}if(b.attrs[ZaDomain.A_zimbraAutoProvLdapAdminBindDn]){this._autoprovLdapObject[ZaDomain.A_zimbraAutoProvLdapAdminBindDn]=b.attrs[ZaDomain.A_zimbraAutoProvLdapAdminBindDn]
}else{this._autoprovLdapObject[ZaDomain.A_zimbraAutoProvLdapAdminBindDn]=null
}if(b.attrs[ZaDomain.A_zimbraAutoProvLdapAdminBindPassword]){this._autoprovLdapObject[ZaDomain.A_zimbraAutoProvLdapAdminBindPassword]=b.attrs[ZaDomain.A_zimbraAutoProvLdapAdminBindPassword]
}else{this._autoprovLdapObject[ZaDomain.A_zimbraAutoProvLdapAdminBindPassword]=null
}if(b.attrs[ZaDomain.A_zimbraAutoProvLdapSearchBase]){this._autoprovLdapObject[ZaDomain.A_zimbraAutoProvLdapSearchBase]=b.attrs[ZaDomain.A_zimbraAutoProvLdapSearchBase]
}else{this._autoprovLdapObject[ZaDomain.A_zimbraAutoProvLdapSearchBase]=null
}if(b.attrs[ZaDomain.A_zimbraAutoProvLdapSearchFilter]){this._autoprovLdapObject[ZaDomain.A_zimbraAutoProvLdapSearchFilter]=b.attrs[ZaDomain.A_zimbraAutoProvLdapSearchFilter]
}else{this._autoprovLdapObject[ZaDomain.A_zimbraAutoProvLdapSearchFilter]=null
}if(b.attrs[ZaDomain.A_zimbraAutoProvLdapBindDn]){this._autoprovLdapObject[ZaDomain.A_zimbraAutoProvLdapBindDn]=b.attrs[ZaDomain.A_zimbraAutoProvLdapBindDn]
}else{this._autoprovLdapObject[ZaDomain.A_zimbraAutoProvLdapBindDn]=null
}if(b.attrs[ZaDomain.A_zimbraAutoProvNotificationSubject]){this._autoprovLdapObject[ZaDomain.A_zimbraAutoProvNotificationSubject]=b.attrs[ZaDomain.A_zimbraAutoProvNotificationSubject]
}else{this._autoprovLdapObject[ZaDomain.A_zimbraAutoProvNotificationSubject]=null
}if(b.attrs[ZaDomain.A_zimbraAutoProvNotificationBody]){this._autoprovLdapObject[ZaDomain.A_zimbraAutoProvNotificationBody]=b.attrs[ZaDomain.A_zimbraAutoProvNotificationBody]
}else{this._autoprovLdapObject[ZaDomain.A_zimbraAutoProvNotificationBody]=null
}};
ZaTaskAutoProvDialog.prototype._checkModified=function(){var c=this.getObject();
var b=this._autoprovLdapObject;
if((b[ZaDomain.A_zimbraAutoProvLdapURL]==c.attrs[ZaDomain.A_zimbraAutoProvLdapURL]||!b[ZaDomain.A_zimbraAutoProvLdapURL]&&!c.attrs[ZaDomain.A_zimbraAutoProvLdapURL])&&(b[ZaDomain.A_zimbraAutoProvLdapStartTlsEnabled]==c.attrs[ZaDomain.A_zimbraAutoProvLdapStartTlsEnabled]||!b[ZaDomain.A_zimbraAutoProvLdapStartTlsEnabled]&&!c.attrs[ZaDomain.A_zimbraAutoProvLdapStartTlsEnabled])&&(b[ZaDomain.A_zimbraAutoProvLdapAdminBindDn]==c.attrs[ZaDomain.A_zimbraAutoProvLdapAdminBindDn]||!b[ZaDomain.A_zimbraAutoProvLdapAdminBindDn]&&!c.attrs[ZaDomain.A_zimbraAutoProvLdapAdminBindDn])&&(b[ZaDomain.A_zimbraAutoProvLdapAdminBindPassword]==c.attrs[ZaDomain.A_zimbraAutoProvLdapAdminBindPassword]||!b[ZaDomain.A_zimbraAutoProvLdapAdminBindPassword]&&!c.attrs[ZaDomain.A_zimbraAutoProvLdapAdminBindPassword])&&(b[ZaDomain.A_zimbraAutoProvLdapSearchBase]==c.attrs[ZaDomain.A_zimbraAutoProvLdapSearchBase]||!b[ZaDomain.A_zimbraAutoProvLdapSearchBase]&&!c.attrs[ZaDomain.A_zimbraAutoProvLdapSearchBase])&&(b[ZaDomain.A_zimbraAutoProvLdapSearchFilter]==c.attrs[ZaDomain.A_zimbraAutoProvLdapSearchFilter]||!b[ZaDomain.A_zimbraAutoProvLdapSearchFilter]&&!c.attrs[ZaDomain.A_zimbraAutoProvLdapSearchFilter])&&(b[ZaDomain.A_zimbraAutoProvLdapBindDn]==c.attrs[ZaDomain.A_zimbraAutoProvLdapBindDn]||!b[ZaDomain.A_zimbraAutoProvLdapBindDn]&&!c.attrs[ZaDomain.A_zimbraAutoProvLdapBindDn])&&(b[ZaDomain.A_zimbraAutoProvNotificationSubject]==c.attrs[ZaDomain.A_zimbraAutoProvNotificationSubject]||!b[ZaDomain.A_zimbraAutoProvNotificationSubject]&&!c.attrs[ZaDomain.A_zimbraAutoProvNotificationSubject])&&(b[ZaDomain.A_zimbraAutoProvNotificationBody]==c.attrs[ZaDomain.A_zimbraAutoProvNotificationBody]||!b[ZaDomain.A_zimbraAutoProvNotificationBody]&&!c.attrs[ZaDomain.A_zimbraAutoProvNotificationBody])){return false
}else{return true
}};
ZaTaskAutoProvDialog.prototype.tabClickHandler=function(){if(this.getObject().currentTab!=this.TAB_STEP_MANUAL){return
}if(this._checkModified()){var b=ZaMsg.MSG_LDAP_CHANGED;
this._forceApplyMessageDialog.setMessage(b,DwtMessageDialog.INFO_STYLE);
this._forceApplyMessageDialog.popup()
}};
ZaTaskAutoProvDialog.srchButtonHndlr=function(){var t=this.getForm().getInstance();
var u=this.getForm().parent;
if(!u._checkGeneralConfig()){return
}var w=AjxSoapDoc.create("SearchAutoProvDirectoryRequest",ZaZimbraAdmin.URN,null);
w.getMethod().setAttribute("keyAttr","name");
var o=w.set("domain",t.id);
o.setAttribute("by","id");
var e="(|(mail=*)(zimbraMailAlias=*)(uid=*))";
if(t[ZaSearch.A_query]){e=ZaSearch.getSearchByNameQuery(t[ZaSearch.A_query])
}w.set("query",e);
var s=ZaSettings.RESULTSPERPAGE;
if(!t[ZaDomain.A2_zimbraAutoProvAccountPoolPageNum]){t[ZaDomain.A2_zimbraAutoProvAccountPoolPageNum]=0
}var f=t[ZaDomain.A2_zimbraAutoProvAccountPoolPageNum]*ZaSettings.RESULTSPERPAGE;
var n=[ZaAccount.A_name,ZaAccount.A_mail,ZaItem.A_zimbraId,ZaAccount.A_displayname].join(",");
w.getMethod().setAttribute("keyAttr","name");
w.getMethod().setAttribute("offset",f);
w.getMethod().setAttribute("limit",s);
w.getMethod().setAttribute("attrs",n);
w.getMethod().setAttribute("refresh","1");
this.getModel().setInstanceValue(this.getInstance(),ZaDomain.A2_zimbraAutoProvSearchActivated,"FALSE");
var v={};
v.soapDoc=w;
v.asyncMode=false;
var c={controller:ZaApp.getInstance().getCurrentController(),busyMsg:ZaMsg.BUSY_AUTOPROV_GETACCT};
try{var m=ZaRequestMgr.invoke(v,c);
this.getModel().setInstanceValue(this.getInstance(),ZaDomain.A2_zimbraAutoProvSearchActivated,"TRUE");
if(!m||m.Body.SearchAutoProvDirectoryResponse.Fault){return
}if(!m.Body.SearchAutoProvDirectoryResponse||!m.Body.SearchAutoProvDirectoryResponse.entry){return
}var l=[];
var g=m.Body.SearchAutoProvDirectoryResponse.entry;
var k=m.Body.SearchAutoProvDirectoryResponse.searchTotal;
for(var p=0;
g&&p<g.length;
p++){var j=g[p];
var h=new Object();
h.dn=j.dn;
var q=j.a.length;
h.attrs=new Array();
for(var d=0;
d<q;
d++){if(!h.attrs[[j.a[d].n]]){h.attrs[[j.a[d].n]]=j.a[d]._content
}else{if(!(h.attrs[[j.a[d].n]] instanceof Array)){h.attrs[[j.a[d].n]]=[h.attrs[[j.a[d].n]]]
}h.attrs[[j.a[d].n]].push(j.a[d]._content)
}}h.name=h.attrs[ZaAccount.A_mail];
l.push(h)
}this.getModel().setInstanceValue(this.getInstance(),ZaDomain.A2_zimbraAutoProvAccountPool,l);
var b=Math.ceil(k/ZaSettings.RESULTSPERPAGE);
this.getModel().setInstanceValue(this.getInstance(),ZaDomain.A2_zimbraAutoProvAccountPoolPageTotal,b)
}catch(r){ZaApp.getInstance().getCurrentController()._handleException(r,"ZaTaskAutoProvDialog.srchButtonHndlr",null,false)
}};
ZaTaskAutoProvDialog.accPoolSelectionListener=function(){var b=this.widget.getSelection();
if(b&&b.length){b.sort();
this.getModel().setInstanceValue(this.getInstance(),ZaDomain.A2_zimbraAutoProvAccountSrcSelectedPool,b)
}else{this.getModel().setInstanceValue(this.getInstance(),ZaDomain.A2_zimbraAutoProvAccountSrcSelectedPool,null)
}};
ZaTaskAutoProvDialog.addButtonHndlr=function(n){var b=this.getForm();
var q=b.getInstance();
var o=b.getItemsById(ZaDomain.A2_zimbraAutoProvAccountPool);
if(o&&(o instanceof Array)&&o[0]&&o[0].widget){var p=o[0].widget.getSelection();
var e=q[ZaDomain.A2_zimbraAutoProvAccountTargetPool]?q[ZaDomain.A2_zimbraAutoProvAccountTargetPool]:[];
var m=(p instanceof AjxVector)?p.getArray():(p instanceof Array)?p:[p];
if(m){m.sort(ZaItem.compareNamesDesc);
var f=[];
var k=e.length;
for(var h=0;
h<k;
h++){f.push(e[h])
}f.sort(ZaItem.compareNamesDesc);
var l=[];
var d=m.length;
for(var h=d-1;
h>=0;
h--){var c=false;
k=f.length;
for(var g=k-1;
g>=0;
g--){if(m[h].name==f[g].name){c=true;
f.splice(g,k-g);
break
}}if(!c){e.push(m[h])
}}this.getModel().setInstanceValue(this.getInstance(),ZaDomain.A2_zimbraAutoProvAccountTargetPool,e)
}}if(e.length>0){b.parent._button[DwtDialog.OK_BUTTON].setEnabled(true)
}else{b.parent._button[DwtDialog.OK_BUTTON].setEnabled(false)
}};
ZaTaskAutoProvDialog.accTargetSelectionListener=function(){var b=this.widget.getSelection();
if(b&&b.length){b.sort();
this.getModel().setInstanceValue(this.getInstance(),ZaDomain.A2_zimbraAutoProvAccountTgtSelectedPool,b)
}else{this.getModel().setInstanceValue(this.getInstance(),ZaDomain.A2_zimbraAutoProvAccountTgtSelectedPool,null)
}};
ZaTaskAutoProvDialog.addAllButtonHndlr=function(l){var c=this.getForm();
var n=c.getInstance();
var b=n[ZaDomain.A2_zimbraAutoProvAccountTargetPool]?n[ZaDomain.A2_zimbraAutoProvAccountTargetPool]:[];
var h=n[ZaDomain.A2_zimbraAutoProvAccountPool];
var k=new Array();
if(h){var d=h.length;
var m=b.length;
for(var e=0;
e<d;
e++){var o=false;
for(var g=m-1;
g>=0;
g--){if(b[g].name==h[e].name){o=true;
break
}}if(!o){k.push(h[e])
}}}k=k.concat(b);
this.getModel().setInstanceValue(this.getInstance(),ZaDomain.A2_zimbraAutoProvAccountTargetPool,k);
var n=c.getInstance();
var f=n[ZaDomain.A2_zimbraAutoProvAccountTargetPool]?n[ZaDomain.A2_zimbraAutoProvAccountTargetPool]:[];
if(f.length>0){c.parent._button[DwtDialog.OK_BUTTON].setEnabled(true)
}else{c.parent._button[DwtDialog.OK_BUTTON].setEnabled(false)
}};
ZaTaskAutoProvDialog.removeButtonHndlr=function(m){var b=this.getForm();
var o=b.getInstance();
var l=b.getItemsById(ZaDomain.A2_zimbraAutoProvAccountTargetPool);
if(l&&(l instanceof Array)&&l[0]&&l[0].widget){var n=l[0].widget.getSelection();
var d=o[ZaDomain.A2_zimbraAutoProvAccountTargetPool]?o[ZaDomain.A2_zimbraAutoProvAccountTargetPool]:[];
d.sort(ZaItem.compareNamesDesc);
var e=[];
var k=(n instanceof AjxVector)?n.getArray():(n instanceof Array)?n:[n];
if(k){k.sort(ZaItem.compareNamesDesc);
var c=k.length;
var h=d.length;
for(var g=0;
g<h;
g++){e.push(d[g])
}for(var g=c-1;
g>=0;
g--){var h=e.length;
for(var f=h-1;
f>=0;
f--){if(k[g].name==e[f].name){d.splice(f,1);
e.splice(f,h-f)
}}}this.getModel().setInstanceValue(this.getInstance(),ZaDomain.A2_zimbraAutoProvAccountTargetPool,d)
}}if(d.length>0){b.parent._button[DwtDialog.OK_BUTTON].setEnabled(true)
}else{b.parent._button[DwtDialog.OK_BUTTON].setEnabled(false)
}};
ZaTaskAutoProvDialog.removeAllButtonHndlr=function(d){var c=this.getForm();
var b=c.getInstance();
b[ZaDomain.A2_zimbraAutoProvAccountTargetPool]=new Array();
var e=b[ZaDomain.A2_zimbraAutoProvAccountTargetPool]?b[ZaDomain.A2_zimbraAutoProvAccountTargetPool]:[];
if(e.length>0){c.parent._button[DwtDialog.OK_BUTTON].setEnabled(true)
}else{c.parent._button[DwtDialog.OK_BUTTON].setEnabled(false)
}this.getForm().setInstance(b)
};
ZaTaskAutoProvDialog.backPoolButtonHndlr=function(b){var c=parseInt(this.getInstanceValue("/poolPagenum"))-1;
this.setInstanceValue(c,"/poolPagenum");
ZaTaskAutoProvDialog.srchButtonHndlr.call(this,b)
};
ZaTaskAutoProvDialog.fwdPoolButtonHndlr=function(b){var c=parseInt(this.getInstanceValue("/poolPagenum"));
this.setInstanceValue(c+1,"/poolPagenum");
ZaTaskAutoProvDialog.srchButtonHndlr.call(this,b)
};
ZaTaskAutoProvDialog.forwardBtnEnabled=function(){return(parseInt(this.getInstanceValue(ZaDomain.A2_zimbraAutoProvAccountPoolPageNum))<(parseInt(this.getInstanceValue(ZaDomain.A2_zimbraAutoProvAccountPoolPageTotal))-1)&&this.getInstanceValue(ZaDomain.A2_zimbraAutoProvSearchActivated)=="TRUE")
};
ZaTaskAutoProvDialog.backBtnEnabled=function(){return(parseInt(this.getInstanceValue(ZaDomain.A2_zimbraAutoProvAccountPoolPageNum))>0&&this.getInstanceValue(ZaDomain.A2_zimbraAutoProvSearchActivated)=="TRUE")
};
ZaTaskAutoProvDialog.prototype.finishConfig=function(){var c=this.getObject();
var e=c[ZaDomain.A2_zimbraAutoProvAccountTargetPool];
if(!e||e.length<1){return
}var h=AjxSoapDoc.create("BatchRequest","urn:zimbra");
h.setMethodAttribute("onerror","continue");
for(var g=0;
g<e.length;
g++){var d=h.set("AutoProvAccountRequest",null,null,ZaZimbraAdmin.URN);
var b=h.set("domain",c.id,d);
b.setAttribute("by","id");
b=h.set("principal",e[g].dn,d);
b.setAttribute("by","dn");
if(c[ZaDomain.A2_zimbraAutoProvAccountPassword]){b=h.set("password",c[ZaDomain.A2_zimbraAutoProvAccountPassword],d)
}}var j=new Object();
j.soapDoc=h;
var f={controller:ZaApp.getInstance().getCurrentController(),busyMsg:ZaMsg.BUSY_CREATING_GALDS,showBusy:true};
ZaRequestMgr.invoke(j,f)
};
ZaTaskAutoProvDialog.filterSelectionListener=function(e){var g=e.target;
if(g.type&&g.type=="checkbox"){var d=g.value;
var c=this.getForm();
var b=c.getInstance();
var f=null;
f=b[ZaDomain.A2_zimbraAutoProvSelectedServerList];
if(g.checked){f.remove(d)
}else{f.add(d)
}}};
ZaServerOptionList=function(c,b){DwtListView.call(this,c,null)
};
ZaServerOptionList.prototype=new DwtListView;
ZaServerOptionList.prototype.constructor=ZaServerOptionList;
ZaServerOptionList.prototype.toString=function(){return"ZaServerOptionList"
};
ZaServerOptionList.prototype._createItemHtml=function(g,h,c,f){var d=new Array(10);
var j=document.createElement("div");
j[DwtListView._STYLE_CLASS]="Row";
j[DwtListView._SELECTED_STYLE_CLASS]=j[DwtListView._STYLE_CLASS]+"-"+DwtCssStyle.SELECTED;
j.className=j[DwtListView._STYLE_CLASS];
this.associateItemWithElement(g,j,DwtListView.TYPE_LIST_ITEM);
var b=0;
var e="";
if(g.checked){e="checked"
}d[b++]="<table width='100%' cellspacing='0' cellpadding='0' ><tr><td width=20>";
if(this.initializeDisable){d[b++]="<input id='"+this._htmlElId+"_schedule_"+f+"'  disabled type=checkbox value='"+g+"' "+e+"/></td>"
}else{d[b++]="<input id='"+this._htmlElId+"_schedule_"+f+"' type=checkbox value='"+g+"' "+e+"/></td>"
}d[b++]="<td>"+g+"</td></tr></table>";
j.innerHTML=d.join("");
return j
};
ZaConfirmPasswordDialog=function(d,b,c,e){if(arguments.length==0){return
}this._standardButtons=[DwtDialog.OK_BUTTON,DwtDialog.CANCEL_BUTTON];
ZaXDialog.call(this,d,null,e,b,c,null,ZaId.DLG_AUTPROV_MANUAL_PWD);
this._containedObject={};
this.initForm(ZaAlias.myXModel,this.getMyXForm());
this._helpURL=ZaConfirmPasswordDialog.helpURL;
this._localXForm.addListener(DwtEvent.XFORMS_FORM_DIRTY_CHANGE,new AjxListener(this,ZaConfirmPasswordDialog.prototype.handleXFormChange))
};
ZaConfirmPasswordDialog.prototype=new ZaXDialog;
ZaConfirmPasswordDialog.prototype.constructor=ZaConfirmPasswordDialog;
ZaConfirmPasswordDialog.helpURL=location.pathname+ZaUtil.HELP_URL+"managing_domain/autoprov_manual_config.htm?locid="+AjxEnv.DEFAULT_LOCALE;
ZaConfirmPasswordDialog.prototype.popup=function(b){ZaXDialog.prototype.popup.call(this,b);
this._button[DwtDialog.OK_BUTTON].setEnabled(true);
this._localXForm.setInstanceValue(false,ZaDomain.A2_zimbraAutoProvAccountPasswordUnmatchedWarning)
};
ZaConfirmPasswordDialog.prototype.handleXFormChange=function(){var b=this._localXForm;
if(!b||b.hasErrors()||!b.getInstance()){return
}var d=b.getInstanceValue(ZaDomain.A2_zimbraAutoProvAccountPasswordInDlg);
var c=b.getInstanceValue(ZaDomain.A2_zimbraAutoProvAccountPasswordAgainInDlg);
if(d==c){b.setInstanceValue(false,ZaDomain.A2_zimbraAutoProvAccountPasswordUnmatchedWarning);
this._button[DwtDialog.OK_BUTTON].setEnabled(true)
}else{var e=AjxUtil.isEmpty(c);
b.setInstanceValue(!e,ZaDomain.A2_zimbraAutoProvAccountPasswordUnmatchedWarning);
this._button[DwtDialog.OK_BUTTON].setEnabled(false)
}};
ZaConfirmPasswordDialog.prototype.getMyXForm=function(){var b={items:[{type:_GROUP_,numCols:2,colSizes:["200px","*"],colSpan:"*",items:[{type:_DWT_ALERT_,style:DwtAlert.WARNING,iconVisible:true,content:ZaMsg.MSG_AUTOPROV_MANUAL_PASSSET,width:"100%",colSpan:"*"},{type:_SPACER_,height:10,colSpan:"*"},{ref:ZaDomain.A2_zimbraAutoProvAccountPasswordInDlg,type:_SECRET_,msgName:ZaMsg.LBL_provisionedAccountPassword,label:ZaMsg.LBL_provisionedAccountPassword,labelLocation:_LEFT_,width:"190px",cssClass:"admin_xform_name_input"},{type:_SPACER_,height:10,colSpan:"*"},{ref:ZaDomain.A2_zimbraAutoProvAccountPasswordAgainInDlg,type:_SECRET_,msgName:ZaMsg.NAD_ConfirmPassword,label:ZaMsg.NAD_ConfirmPassword,labelLocation:_LEFT_,width:"190px",cssClass:"admin_xform_name_input"},{ref:ZaDomain.A2_zimbraAutoProvAccountPasswordUnmatchedWarning,type:_DWT_ALERT_,style:DwtAlert.CRITICAL,iconVisible:false,label:"",labelLocation:_LEFT_,width:"180px",colSpan:"1",content:ZaMsg.ERROR_PASSWORD_MISMATCH,visibilityChecks:[[XForm.checkInstanceValue,ZaDomain.A2_zimbraAutoProvAccountPasswordUnmatchedWarning,true]],visibilityChangeEventSources:[ZaDomain.A2_zimbraAutoProvAccountPasswordUnmatchedWarning]}]}]};
return b
};
ZaServerOptionList.prototype.setEnabled=function(b){DwtListView.prototype.setEnabled.call(this,b);
this.initializeDisable=!b;
if(!AjxUtil.isEmpty(this._list)){for(var c=0;
c<this._list.size();
c++){document.getElementById(this._htmlElId+"_schedule_"+c).disabled=!b
}}}
}if(AjxPackage.define("zimbraAdmin.domains.view.ZaManualProvConfigDialog")){ZaManualProvConfigDialog=function(d,b,c,e){if(arguments.length==0){return
}this._standardButtons=[DwtDialog.OK_BUTTON,DwtDialog.CANCEL_BUTTON];
ZaXDialog.call(this,d,null,e,b,c,null,ZaId.DLG_AUTPROV_MANUAL);
this._containedObject={};
this.initForm(ZaDomain.myXModel,this.getMyXForm());
this._helpURL=ZaManualProvConfigDialog.helpURL
};
ZaManualProvConfigDialog.prototype=new ZaXDialog;
ZaManualProvConfigDialog.prototype.constructor=ZaManualProvConfigDialog;
ZaManualProvConfigDialog.helpURL=location.pathname+ZaUtil.HELP_URL+"managing_domain/autoprov_manual_config.htm?locid="+AjxEnv.DEFAULT_LOCALE;
ZaManualProvConfigDialog.prototype.setObject=function(b){b[ZaDomain.A2_zimbraAutoProvSearchActivated]="TRUE";
this._button[DwtDialog.OK_BUTTON].setEnabled(false);
ZaXDialog.prototype.setObject.call(this,b)
};
ZaManualProvConfigDialog.prototype.getMyXForm=function(){var b={numCols:1,items:[{type:_GROUP_,isTabGroup:true,items:[{type:_DWT_ALERT_,containerCssStyle:"padding-bottom:0px",style:DwtAlert.INFO,iconVisible:false,content:ZaMsg.MSG_AUTOPROV_MANUAL,visibilityChecks:[],colSpan:"2"},{type:_SPACER_,height:10},{type:_GROUP_,colSpan:2,numCols:3,width:"100%",colSizes:["180px","85px","180px"],cellspacing:"5px",items:[{type:_TEXTFIELD_,cssClass:"admin_xform_name_input",width:"185px",ref:ZaSearch.A_query,label:null,elementChanged:function(f,e,d){var c=d.charCode;
if(c==13||c==3){ZaManualProvConfigDialog.srchButtonHndlr.call(this)
}else{this.getForm().itemChanged(this,f,d)
}},visibilityChecks:[],enableDisableChecks:[]},{type:_DWT_BUTTON_,label:ZaMsg.DLXV_ButtonSearch,width:"80px",onActivate:ZaManualProvConfigDialog.srchButtonHndlr,align:_CENTER_,enableDisableChecks:[[XForm.checkInstanceValue,ZaDomain.A2_zimbraAutoProvSearchActivated,"TRUE"]],enableDisableChangeEventSources:[ZaDomain.A2_zimbraAutoProvSearchActivated]},{type:_OUTPUT_,value:ZaMsg.LBL_ManualProvAccount,visibilityChecks:[]},{ref:ZaDomain.A2_zimbraAutoProvAccountPool,type:_DWT_LIST_,height:"200px",width:"180px",cssClass:"DLSource",widgetClass:ZaAccMiniListView,rowSpan:4,onSelection:ZaManualProvConfigDialog.accPoolSelectionListener,visibilityChecks:[],enableDisableChecks:[]},{type:_DWT_BUTTON_,label:AjxMsg.addAll,width:"80px",onActivate:ZaManualProvConfigDialog.addAllButtonHndlr,enableDisableChecks:[[XForm.checkInstanceValueNotEmty,ZaDomain.A2_zimbraAutoProvAccountPool]],enableDisableChangeEventSources:[ZaDomain.A2_zimbraAutoProvAccountPool]},{ref:ZaDomain.A2_zimbraAutoProvAccountTargetPool,type:_DWT_LIST_,height:"200px",width:"180px",cssClass:"DLSource",widgetClass:ZaAccMiniListView,rowSpan:4,onSelection:ZaManualProvConfigDialog.accTargetSelectionListener,visibilityChecks:[],enableDisableChecks:[]},{type:_DWT_BUTTON_,label:AjxMsg.add,width:"80px",onActivate:ZaManualProvConfigDialog.addButtonHndlr,enableDisableChecks:[[XForm.checkInstanceValueNotEmty,ZaDomain.A2_zimbraAutoProvAccountSrcSelectedPool]],enableDisableChangeEventSources:[ZaDomain.A2_zimbraAutoProvAccountSrcSelectedPool]},{type:_DWT_BUTTON_,label:AjxMsg.remove,width:"80px",onActivate:ZaManualProvConfigDialog.removeButtonHndlr,enableDisableChecks:[[XForm.checkInstanceValueNotEmty,ZaDomain.A2_zimbraAutoProvAccountTgtSelectedPool]],enableDisableChangeEventSources:[ZaDomain.A2_zimbraAutoProvAccountTgtSelectedPool]},{type:_DWT_BUTTON_,label:AjxMsg.removeAll,width:"80px",onActivate:ZaManualProvConfigDialog.removeAllButtonHndlr,enableDisableChecks:[[XForm.checkInstanceValueNotEmty,ZaDomain.A2_zimbraAutoProvAccountTargetPool]],enableDisableChangeEventSources:[ZaDomain.A2_zimbraAutoProvAccountTargetPool]},{type:_GROUP_,numCols:3,colSizes:["90px","*","90px"],items:[{type:_SPACER_,colSpan:3},{type:_DWT_BUTTON_,label:ZaMsg.Previous,width:75,id:"backButton",icon:"LeftArrow",disIcon:"LeftArrowDis",onActivate:ZaManualProvConfigDialog.backPoolButtonHndlr,align:_CENTER_,enableDisableChecks:[ZaManualProvConfigDialog.backBtnEnabled],enableDisableChangeEventSources:[ZaDomain.A2_zimbraAutoProvAccountPoolPageNum,ZaDomain.A2_zimbraAutoProvSearchActivated]},{type:_CELLSPACER_},{type:_DWT_BUTTON_,label:ZaMsg.Next,width:75,id:"fwdButton",icon:"RightArrow",disIcon:"RightArrowDis",onActivate:ZaManualProvConfigDialog.fwdPoolButtonHndlr,align:_CENTER_,enableDisableChecks:[ZaManualProvConfigDialog.forwardBtnEnabled],enableDisableChangeEventSources:[ZaDomain.A2_zimbraAutoProvAccountPoolPageNum,ZaDomain.A2_zimbraAutoProvSearchActivated]}]},{type:_CELLSPACER_}]}]}]};
return b
};
ZaManualProvConfigDialog.srchButtonHndlr=function(){var t=this.getForm().getInstance();
var u=this.getForm().parent;
var w=AjxSoapDoc.create("SearchAutoProvDirectoryRequest",ZaZimbraAdmin.URN,null);
w.getMethod().setAttribute("keyAttr","name");
var o=w.set("domain",t.id);
o.setAttribute("by","id");
var e="";
if(t[ZaSearch.A_query]){e=ZaSearch.getSearchByNameQuery(t[ZaSearch.A_query])
}w.set("query",e);
var s=ZaSettings.RESULTSPERPAGE;
if(!t[ZaDomain.A2_zimbraAutoProvAccountPoolPageNum]){t[ZaDomain.A2_zimbraAutoProvAccountPoolPageNum]=0
}var f=t[ZaDomain.A2_zimbraAutoProvAccountPoolPageNum]*ZaSettings.RESULTSPERPAGE;
var n=[ZaAccount.A_name,ZaAccount.A_mail,ZaItem.A_zimbraId,ZaAccount.A_displayname].join(",");
w.getMethod().setAttribute("keyAttr","name");
w.getMethod().setAttribute("offset",f);
w.getMethod().setAttribute("limit",s);
w.getMethod().setAttribute("attrs",n);
w.getMethod().setAttribute("refresh","1");
this.getModel().setInstanceValue(this.getInstance(),ZaDomain.A2_zimbraAutoProvSearchActivated,"FALSE");
var v={};
v.soapDoc=w;
v.asyncMode=false;
var c={controller:ZaApp.getInstance().getCurrentController(),busyMsg:ZaMsg.BUSY_AUTOPROV_GETACCT};
try{var m=ZaRequestMgr.invoke(v,c);
this.getModel().setInstanceValue(this.getInstance(),ZaDomain.A2_zimbraAutoProvSearchActivated,"TRUE");
if(!m||m.Body.SearchAutoProvDirectoryResponse.Fault){return
}if(!m.Body.SearchAutoProvDirectoryResponse||!m.Body.SearchAutoProvDirectoryResponse.entry){return
}var l=[];
var g=m.Body.SearchAutoProvDirectoryResponse.entry;
var k=m.Body.SearchAutoProvDirectoryResponse.searchTotal;
for(var p=0;
g&&p<g.length;
p++){var j=g[p];
var h=new Object();
h.dn=j.dn;
var q=j.a.length;
h.attrs=new Array();
for(var d=0;
d<q;
d++){if(!h.attrs[[j.a[d].n]]){h.attrs[[j.a[d].n]]=j.a[d]._content
}else{if(!(h.attrs[[j.a[d].n]] instanceof Array)){h.attrs[[j.a[d].n]]=[h.attrs[[j.a[d].n]]]
}h.attrs[[j.a[d].n]].push(j.a[d]._content)
}}h.name=h.attrs[ZaAccount.A_mail];
l.push(h)
}this.getModel().setInstanceValue(this.getInstance(),ZaDomain.A2_zimbraAutoProvAccountPool,l);
var b=Math.ceil(k/ZaSettings.RESULTSPERPAGE);
this.getModel().setInstanceValue(this.getInstance(),ZaDomain.A2_zimbraAutoProvAccountPoolPageTotal,b)
}catch(r){ZaApp.getInstance().getCurrentController()._handleException(r,"ZaManualProvConfigDialog.srchButtonHndlr",null,false)
}};
ZaManualProvConfigDialog.accPoolSelectionListener=function(){var b=this.widget.getSelection();
if(b&&b.length){b.sort();
this.getModel().setInstanceValue(this.getInstance(),ZaDomain.A2_zimbraAutoProvAccountSrcSelectedPool,b)
}else{this.getModel().setInstanceValue(this.getInstance(),ZaDomain.A2_zimbraAutoProvAccountSrcSelectedPool,null)
}};
ZaManualProvConfigDialog.addButtonHndlr=function(n){var b=this.getForm();
var q=b.getInstance();
var o=b.getItemsById(ZaDomain.A2_zimbraAutoProvAccountPool);
if(o&&(o instanceof Array)&&o[0]&&o[0].widget){var p=o[0].widget.getSelection();
var e=q[ZaDomain.A2_zimbraAutoProvAccountTargetPool]?q[ZaDomain.A2_zimbraAutoProvAccountTargetPool]:[];
var m=(p instanceof AjxVector)?p.getArray():(p instanceof Array)?p:[p];
if(m){m.sort(ZaItem.compareNamesDesc);
var f=[];
var k=e.length;
for(var h=0;
h<k;
h++){f.push(e[h])
}f.sort(ZaItem.compareNamesDesc);
var l=[];
var d=m.length;
for(var h=d-1;
h>=0;
h--){var c=false;
k=f.length;
for(var g=k-1;
g>=0;
g--){if(m[h].name==f[g].name){c=true;
f.splice(g,k-g);
break
}}if(!c){e.push(m[h])
}}this.getModel().setInstanceValue(this.getInstance(),ZaDomain.A2_zimbraAutoProvAccountTargetPool,e)
}}if(e.length>0){b.parent._button[DwtDialog.OK_BUTTON].setEnabled(true)
}else{b.parent._button[DwtDialog.OK_BUTTON].setEnabled(false)
}};
ZaManualProvConfigDialog.accTargetSelectionListener=function(){var b=this.widget.getSelection();
if(b&&b.length){b.sort();
this.getModel().setInstanceValue(this.getInstance(),ZaDomain.A2_zimbraAutoProvAccountTgtSelectedPool,b)
}else{this.getModel().setInstanceValue(this.getInstance(),ZaDomain.A2_zimbraAutoProvAccountTgtSelectedPool,null)
}};
ZaManualProvConfigDialog.addAllButtonHndlr=function(l){var c=this.getForm();
var n=c.getInstance();
var b=n[ZaDomain.A2_zimbraAutoProvAccountTargetPool]?n[ZaDomain.A2_zimbraAutoProvAccountTargetPool]:[];
var h=n[ZaDomain.A2_zimbraAutoProvAccountPool];
var k=new Array();
if(h){var d=h.length;
var m=b.length;
for(var e=0;
e<d;
e++){var o=false;
for(var g=m-1;
g>=0;
g--){if(b[g].name==h[e].name){o=true;
break
}}if(!o){k.push(h[e])
}}}k=k.concat(b);
this.getModel().setInstanceValue(this.getInstance(),ZaDomain.A2_zimbraAutoProvAccountTargetPool,k);
var n=c.getInstance();
var f=n[ZaDomain.A2_zimbraAutoProvAccountTargetPool]?n[ZaDomain.A2_zimbraAutoProvAccountTargetPool]:[];
if(f.length>0){c.parent._button[DwtDialog.OK_BUTTON].setEnabled(true)
}else{c.parent._button[DwtDialog.OK_BUTTON].setEnabled(false)
}};
ZaManualProvConfigDialog.removeButtonHndlr=function(m){var b=this.getForm();
var o=b.getInstance();
var l=b.getItemsById(ZaDomain.A2_zimbraAutoProvAccountTargetPool);
if(l&&(l instanceof Array)&&l[0]&&l[0].widget){var n=l[0].widget.getSelection();
var d=o[ZaDomain.A2_zimbraAutoProvAccountTargetPool]?o[ZaDomain.A2_zimbraAutoProvAccountTargetPool]:[];
d.sort(ZaItem.compareNamesDesc);
var e=[];
var k=(n instanceof AjxVector)?n.getArray():(n instanceof Array)?n:[n];
if(k){k.sort(ZaItem.compareNamesDesc);
var c=k.length;
var h=d.length;
for(var g=0;
g<h;
g++){e.push(d[g])
}for(var g=c-1;
g>=0;
g--){var h=e.length;
for(var f=h-1;
f>=0;
f--){if(k[g].name==e[f].name){d.splice(f,1);
e.splice(f,h-f)
}}}this.getModel().setInstanceValue(this.getInstance(),ZaDomain.A2_zimbraAutoProvAccountTargetPool,d)
}}if(d.length>0){b.parent._button[DwtDialog.OK_BUTTON].setEnabled(true)
}else{b.parent._button[DwtDialog.OK_BUTTON].setEnabled(false)
}};
ZaManualProvConfigDialog.removeAllButtonHndlr=function(d){var c=this.getForm();
var b=c.getInstance();
b[ZaDomain.A2_zimbraAutoProvAccountTargetPool]=new Array();
var e=b[ZaDomain.A2_zimbraAutoProvAccountTargetPool]?b[ZaDomain.A2_zimbraAutoProvAccountTargetPool]:[];
if(e.length>0){c.parent._button[DwtDialog.OK_BUTTON].setEnabled(true)
}else{c.parent._button[DwtDialog.OK_BUTTON].setEnabled(false)
}this.getForm().setInstance(b)
};
ZaManualProvConfigDialog.backPoolButtonHndlr=function(b){var c=parseInt(this.getInstanceValue("/poolPagenum"))-1;
this.setInstanceValue(c,"/poolPagenum");
ZaManualProvConfigDialog.srchButtonHndlr.call(this,b)
};
ZaManualProvConfigDialog.fwdPoolButtonHndlr=function(b){var c=parseInt(this.getInstanceValue("/poolPagenum"));
this.setInstanceValue(c+1,"/poolPagenum");
ZaManualProvConfigDialog.srchButtonHndlr.call(this,b)
};
ZaManualProvConfigDialog.forwardBtnEnabled=function(){return(parseInt(this.getInstanceValue(ZaDomain.A2_zimbraAutoProvAccountPoolPageNum))<(parseInt(this.getInstanceValue(ZaDomain.A2_zimbraAutoProvAccountPoolPageTotal))-1)&&this.getInstanceValue(ZaDomain.A2_zimbraAutoProvSearchActivated)=="TRUE")
};
ZaManualProvConfigDialog.backBtnEnabled=function(){return(parseInt(this.getInstanceValue(ZaDomain.A2_zimbraAutoProvAccountPoolPageNum))>0&&this.getInstanceValue(ZaDomain.A2_zimbraAutoProvSearchActivated)=="TRUE")
};
ZaManualProvConfigDialog.finishConfig=function(){if(!this.parent.handleManualProvDlg){return
}this.parent.handleManualProvDlg.popdown();
var e=this.parent.handleManualProvDlg.getObject();
var k=this.getInstance();
var c=this.getModel().getInstanceValue(k,ZaDomain.A2_zimbraAutoProvAccountTargetPool);
var h=AjxSoapDoc.create("BatchRequest","urn:zimbra");
h.setMethodAttribute("onerror","continue");
for(var f=0;
f<c.length;
f++){var j=h.set("AutoProvAccountRequest",null,null,ZaZimbraAdmin.URN);
var g=h.set("domain",k.id,j);
g.setAttribute("by","id");
g=h.set("principal",c[f].dn,j);
g.setAttribute("by","dn")
}var d=new Object();
d.soapDoc=h;
var b={controller:ZaApp.getInstance().getCurrentController(),busyMsg:ZaMsg.BUSY_CREATING_GALDS,showBusy:true};
ZaRequestMgr.invoke(d,b)
}
}if(AjxPackage.define("zimbraAdmin.domains.view.AddrACL_XFormItem")){AddrACL_XFormItem=function(){};
XFormItemFactory.createItemType("_ADDR_ACL_","addracl",AddrACL_XFormItem,Composite_XFormItem);
AddrACL_XFormItem.prototype.numCols=5;
AddrACL_XFormItem.prototype.nowrap=true;
AddrACL_XFormItem.prototype.initializeItems=function(){var b=this.getInheritedProperty("onChange");
if(b){this.items[0].onChange=b;
this.items[1].onChange=b
}else{this.items[0].onChange=null;
this.items[1].onChange=null
}var c=this.getInheritedProperty("visibleBoxes");
if(c){this.items[1].visibleBoxes=c
}var e=this.getInheritedProperty("dataFetcherMethod");
if(e){this.items[0].dataFetcherMethod=e
}var d=this.getInheritedProperty("toolTipContent");
if(d){this.items[0].toolTipContent=d
}Composite_XFormItem.prototype.initializeItems.call(this)
};
AddrACL_XFormItem.prototype.items=[{type:_DYNSELECT_,width:"200px",inputSize:30,ref:"name",editable:true,forceUpdate:true,dataFetcherClass:ZaSearch,visibilityChecks:[],enableDisableChecks:[],emptyText:ZaMsg.enterSearchTerm,elementChanged:function(d,c,b){this.getForm().itemChanged(this,d,b)
}},{type:_ACL_,forceUpdate:true,ref:"acl",labelLocation:_NONE_,label:null}];
StaticAddrACL_XFormItem=function(){};
XFormItemFactory.createItemType("_STATIC_ADDR_ACL_","staticaddracl",StaticAddrACL_XFormItem,Composite_XFormItem);
StaticAddrACL_XFormItem.prototype.numCols=5;
StaticAddrACL_XFormItem.prototype.nowrap=true;
StaticAddrACL_XFormItem.prototype.initializeItems=function(){var b=this.getInheritedProperty("onChange");
if(b){this.items[0].onChange=b;
this.items[1].onChange=b
}else{this.items[0].onChange=null;
this.items[1].onChange=null
}var c=this.getInheritedProperty("visibleBoxes");
if(c){this.items[1].visibleBoxes=c
}Composite_XFormItem.prototype.initializeItems.call(this)
};
StaticAddrACL_XFormItem.prototype.items=[{type:_OUTPUT_,width:"200px",ref:"name",visibilityChecks:[],enableDisableChecks:[]},{type:_ACL_,forceUpdate:true,ref:"acl",labelLocation:_NONE_,label:null}]
}if(AjxPackage.define("zimbraAdmin.domains.view.ZaEditDomainAclXDialog")){ZaEditDomainAclXDialog=function(d,b,c){if(arguments.length==0){return
}this._standardButtons=[DwtDialog.OK_BUTTON,DwtDialog.CANCEL_BUTTON];
ZaXDialog.call(this,d,null,ZaMsg.Edit_perms_title,b,c);
this._containedObject={acl:{r:0,w:0,i:0,d:0,a:0,x:0},name:"",gt:""};
this.initForm(ZaDomain.aclXModel,this.getMyXForm())
};
ZaEditDomainAclXDialog.prototype=new ZaXDialog;
ZaEditDomainAclXDialog.prototype.constructor=ZaEditDomainAclXDialog;
ZaEditDomainAclXDialog.prototype.getMyXForm=function(){var b={numCols:2,items:[{type:_SWITCH_,items:[{type:_CASE_,visibilityChecks:[[XForm.checkInstanceValue,"gt",ZaDomain.A_NotebookGroupACLs]],visibilityChangeEventSources:["gt"],items:[{ref:".",type:_STATIC_ADDR_ACL_,label:null,labelLocation:_NONE_,visibleBoxes:{r:true,w:true,a:false,i:true,d:true,x:false},forceUpdate:true,dataFetcherMethod:ZaSearch.prototype.dynSelectSearchGroups}]},{type:_CASE_,visibilityChecks:[[XForm.checkInstanceValue,"gt",ZaDomain.A_NotebookUserACLs]],visibilityChangeEventSources:["gt"],items:[{ref:".",type:_STATIC_ADDR_ACL_,label:null,labelLocation:_NONE_,visibleBoxes:{r:true,w:true,a:false,i:true,d:true,x:false},forceUpdate:true,dataFetcherMethod:ZaSearch.prototype.dynSelectSearch,dataFetcherTypes:[ZaSearch.ACCOUNTS],dataFetcherAttrs:[ZaItem.A_zimbraId,ZaItem.A_cn,ZaAccount.A_name,ZaAccount.A_displayname,ZaAccount.A_mail]}]},{type:_CASE_,visibilityChecks:[[XForm.checkInstanceValue,"gt",ZaDomain.A_NotebookDomainACLs]],visibilityChangeEventSources:["gt"],items:[{ref:".",type:_STATIC_ADDR_ACL_,label:null,labelLocation:_NONE_,visibleBoxes:{r:true,w:true,a:false,i:true,d:true,x:false},forceUpdate:true,dataFetcherMethod:ZaSearch.prototype.dynSelectSearchDomains}]},{type:_CASE_,visibilityChecks:[[XForm.checkInstanceValue,"gt",ZaDomain.A_NotebookAllACLs]],visibilityChangeEventSources:["gt"],items:[{ref:"acl",type:_ACL_,label:ZaMsg.ACL_All,labelLocation:_LEFT_,visibleBoxes:{r:true,w:true,a:false,i:true,d:true,x:false}}]},{type:_CASE_,visibilityChecks:[[XForm.checkInstanceValue,"gt",ZaDomain.A_NotebookPublicACLs]],visibilityChangeEventSources:["gt"],items:[{ref:"acl",type:_ACL_,visibleBoxes:{r:true,w:false,a:false,i:false,d:false,x:false},label:ZaMsg.ACL_Public,labelLocation:_LEFT_}]}]}]};
return b
}
}if(AjxPackage.define("zimbraAdmin.domains.view.ZaAddDomainAclXDialog")){ZaAddDomainAclXDialog=function(d,b,c){if(arguments.length==0){return
}this._standardButtons=[DwtDialog.OK_BUTTON,DwtDialog.CANCEL_BUTTON];
ZaXDialog.call(this,d,null,ZaMsg.Add_perms_title,b,c);
this._containedObject={acl:{r:0,w:0,i:0,d:0,a:0,x:0},name:"",gt:""};
this.initForm(ZaDomain.aclXModel,this.getMyXForm())
};
ZaAddDomainAclXDialog.prototype=new ZaXDialog;
ZaAddDomainAclXDialog.prototype.constructor=ZaAddDomainAclXDialog;
ZaAddDomainAclXDialog.prototype.getMyXForm=function(){var b={numCols:2,items:[{type:_OSELECT1_,ref:"gt",choices:[{value:ZaDomain.A_NotebookGroupACLs,label:ZaMsg.ACL_Grp},{value:ZaDomain.A_NotebookUserACLs,label:ZaMsg.ACL_User},{value:ZaDomain.A_NotebookDomainACLs,label:ZaMsg.ACL_Dom}],visibilityChecks:[],enableDisableChecks:[]},{type:_SWITCH_,items:[{type:_CASE_,visibilityChecks:[[XForm.checkInstanceValue,"gt",ZaDomain.A_NotebookGroupACLs]],visibilityChangeEventSources:["gt"],items:[{ref:".",type:_ADDR_ACL_,label:null,labelLocation:_NONE_,visibleBoxes:{r:true,w:true,a:false,i:true,d:true,x:false},toolTipContent:ZaMsg.tt_StartTypingDLName,forceUpdate:true,dataFetcherMethod:ZaSearch.prototype.dynSelectSearchGroups}]},{type:_CASE_,visibilityChecks:[[XForm.checkInstanceValue,"gt",ZaDomain.A_NotebookUserACLs]],visibilityChangeEventSources:["gt"],items:[{ref:".",type:_ADDR_ACL_,label:null,labelLocation:_NONE_,visibleBoxes:{r:true,w:true,a:false,i:true,d:true,x:false},toolTipContent:ZaMsg.tt_StartTypingAccountName,forceUpdate:true,dataFetcherMethod:ZaSearch.prototype.dynSelectSearch,dataFetcherTypes:[ZaSearch.ACCOUNTS],dataFetcherAttrs:[ZaItem.A_zimbraId,ZaItem.A_cn,ZaAccount.A_name,ZaAccount.A_displayname,ZaAccount.A_mail]}]},{type:_CASE_,visibilityChecks:[[XForm.checkInstanceValue,"gt",ZaDomain.A_NotebookDomainACLs]],visibilityChangeEventSources:["gt"],items:[{ref:".",type:_ADDR_ACL_,label:null,labelLocation:_NONE_,visibleBoxes:{r:true,w:true,a:false,i:true,d:true,x:false},toolTipContent:ZaMsg.tt_StartTypingDomainName,forceUpdate:true,dataFetcherMethod:ZaSearch.prototype.dynSelectSearchDomains}]}]}]};
return b
}
}if(AjxPackage.define("zimbraAdmin.domains.view.ZaGalObjMiniListView")){ZaGalObjMiniListView=function(e,d,c,b){if(arguments.length==0){return
}ZaListView.call(this,e,d,c,b);
this.hideHeader=true
};
ZaGalObjMiniListView.prototype=new ZaListView;
ZaGalObjMiniListView.prototype.constructor=ZaGalObjMiniListView;
ZaGalObjMiniListView.prototype.toString=function(){return"ZaGalObjMiniListView"
};
ZaGalObjMiniListView.prototype.createHeaderHtml=function(b){if(!this.hideHeader){DwtListView.prototype.createHeaderHtml.call(this,b)
}};
ZaGalObjMiniListView.prototype._createItemHtml=function(h,c,e){var g=new Array(50);
var b=document.createElement("div");
b[DwtListView._STYLE_CLASS]="Row";
b[DwtListView._SELECTED_STYLE_CLASS]=b[DwtListView._STYLE_CLASS]+"-"+DwtCssStyle.SELECTED;
b.className=b[DwtListView._STYLE_CLASS];
this.associateItemWithElement(h,b,DwtListView.TYPE_LIST_ITEM);
var k=0;
g[k++]="<table width='100%' cellspacing='2' cellpadding='0'>";
g[k++]="<tr>";
if(typeof(h)=="string"){g[k++]="<td width=100%>";
g[k++]=AjxStringUtil.htmlEncode(h);
g[k++]="</td>"
}else{if(this._headerList){var d=this._headerList.length;
for(var f=0;
f<d;
f++){var j=this._headerList[f]._field;
if(j=="fullName"){g[k++]="<td align='left' width="+this._headerList[f]._width+"><nobr>";
g[k++]=AjxStringUtil.htmlEncode(h.fullName);
g[k++]="</nobr></td>"
}else{if(j=="email"){g[k++]="<td align='left' width="+this._headerList[f]._width+"><nobr>";
g[k++]=AjxStringUtil.htmlEncode(h.email);
g[k++]="</nobr></td>"
}}}}else{if(typeof(h)=="object"&&h.email){g[k++]="<td width=100%>";
g[k++]=AjxStringUtil.htmlEncode(h.email);
g[k++]="</td>"
}else{g[k++]="<td width=100%>";
g[k++]=AjxStringUtil.htmlEncode(String(h));
g[k++]="</td>"
}}}g[k++]="</tr></table>";
b.innerHTML=g.join("");
return b
};
ZaGalObjMiniListView.prototype._setNoResultsHtml=function(){var b=new AjxBuffer();
var c=document.createElement("div");
b.append("<table width='100%' cellspacing='0' cellpadding='1'>","<tr><td class='NoResults'><br>",ZaMsg.Domain_GALTestNoResults,"</td></tr></table>");
c.innerHTML=b.toString();
this._addRow(c)
};
ZaGalObjMiniListView.prototype._sortColumn=function(b,c){if(this.parent.parent.searchAccounts){this.parent.parent.searchAccounts(b.getSortField(),c)
}}
}if(AjxPackage.define("zimbraAdmin.domains.view.ZaDomainAccountQuotaListView")){ZaDomainAccountQuotaListView=function(e){var d=null;
var c=DwtControl.ABSOLUTE_STYLE;
var b=this._getHeaderList();
ZaListView.call(this,{parent:e,className:d,posStyle:c,headerList:b,id:ZaId.TAB_DOMAIN_MANAGE,scrollLoading:true});
this.setLocation(0,0);
this._appCtxt=this.shell.getData(ZaAppCtxt.LABEL)
};
ZaDomainAccountQuotaListView.prototype=new ZaListView;
ZaDomainAccountQuotaListView.prototype.constructor=ZaDomainAccountQuotaListView;
ZaDomainAccountQuotaListView.prototype.toString=function(){return"ZaDomainAccountQuotaListView"
};
ZaDomainAccountQuotaListView.prototype._createItemHtml=function(g,c,f){var k=new Array(50);
var b=document.createElement("div");
b[DwtListView._STYLE_CLASS]="Row";
b[DwtListView._SELECTED_STYLE_CLASS]=b[DwtListView._STYLE_CLASS]+"-"+DwtCssStyle.SELECTED;
b.className=b[DwtListView._STYLE_CLASS];
this.associateItemWithElement(g,b,DwtListView.TYPE_LIST_ITEM);
var p=0;
k[p++]="<table width='100%'  cellspacing='0' cellpadding='0'>";
k[p++]="<tr>";
if(this._headerList){var e=this._headerList.length;
var l=null;
var d=null;
var j=null;
var m=null;
var n=null;
for(var h=0;
h<e;
h++){var o=this._headerList[h]._field;
if(o==ZaAccountQuota.A2_name){k[p++]="<td width="+this._headerList[h]._width+"><nobr>";
k[p++]=AjxStringUtil.htmlEncode(g[ZaAccountQuota.A2_name]);
k[p++]="</nobr></td>"
}else{if(o==ZaAccountQuota.A2_quotaUsage){k[p++]="<td width="+this._headerList[h]._width+">";
d="mbxprogressused";
j="mbxprogressbar";
l=new DwtProgressBar(this);
m=g[ZaAccountQuota.A2_quotaUsage];
n=parseInt(m);
if(n>85){d+="Critical"
}else{if(n>65){d+="Warning"
}}l.setProgressCssClass(d);
l.setWholeCssClass(j);
l.setLabel(m,true);
l.setValueByPercent(m);
k[p++]=l.getHtmlElement().innerHTML;
k[p++]="</td>";
l.dispose()
}else{if(o==ZaAccountQuota.A2_quota){k[p++]="<td width="+this._headerList[h]._width+">";
k[p++]=AjxStringUtil.htmlEncode(g[ZaAccountQuota.A2_quota]);
k[p++]="</td>"
}else{if(o==ZaAccountQuota.A2_diskUsage){k[p++]="<td width="+this._headerList[h]._width+">";
k[p++]=AjxStringUtil.htmlEncode(g[ZaAccountQuota.A2_diskUsage]);
k[p++]="</td>"
}}}}}}else{k[p++]="<td width=100%><nobr>";
k[p++]=AjxStringUtil.htmlEncode(g[ZaAccountQuota.A2_name]);
k[p++]="</nobr></td>"
}k[p++]="</tr></table>";
b.innerHTML=k.join("");
return b
};
ZaDomainAccountQuotaListView.prototype._setNoResultsHtml=function(){var b=new AjxBuffer();
var c=document.createElement("div");
b.append("<table width='100%' cellspacing='0' cellpadding='1'>","<tr><td class='NoResults'>",AjxStringUtil.htmlEncode(ZaMsg.MBXStats_NoMbx),"</td></tr></table>");
c.innerHTML=b.toString();
this._addRow(c)
};
ZaDomainAccountQuotaListView.prototype.setDomainName=function(b){this._domainName=b
};
ZaDomainAccountQuotaListView.prototype.setSortBy=function(b){this._sortBy=b
};
ZaDomainAccountQuotaListView.prototype.setSortAscending=function(b){this._sortAscending=b
};
ZaDomainAccountQuotaListView.prototype._getHeaderList=function(){var b=new Array();
var d=1;
var c=0;
b[c++]=new ZaListHeaderItem(ZaAccountQuota.A2_name,ZaMsg.MBXStats_ACCOUNT,null,250,d++,ZaAccountQuota.A2_name,true,true);
b[c++]=new ZaListHeaderItem(ZaAccountQuota.A2_diskUsage,ZaMsg.MBXStats_DISKUSAGE,null,120,d++,ZaAccountQuota.A2_diskUsage,true,true);
b[c++]=new ZaListHeaderItem(ZaAccountQuota.A2_quotaUsage,ZaMsg.MBXStats_QUOTAUSAGE,null,200,d++,ZaAccountQuota.A2_quotaUsage,true,true);
b[c++]=new ZaListHeaderItem(ZaAccountQuota.A2_quota,ZaMsg.MBXStats_QUOTA,null,"auto",d++,ZaAccountQuota.A2_quota,false,true);
return b
};
ZaDomainAccountQuotaListView.prototype._sortColumn=function(e,h){var d=h?1:0;
var j=e._sortField;
var b=this.parent;
var c=this._domainName?this._domainName:"";
var g={};
g.domainName=c;
g.sortBy=j;
g.sortAscending=d;
var f=new AjxCallback(b,ZaDomainXFormView.updateUserQuota,g);
ZaDomain.getAccountQuota(c,0,50,j,d,f)
};
ZaDomainAccountQuotaListView.prototype._loadMsg=function(g){var f=g.offset;
var c=this._domainName?this._domainName:"";
var h=this._sortBy?this._sortBy:null;
var d=this._sortAscending?this._sortAscending:null;
var b=g.limit;
var e=new AjxCallback(this,this.updateMoreItems);
ZaDomain.getAccountQuota(c,f,b,h,d,e)
};
ZaDomainAccountQuotaListView.prototype.updateMoreItems=function(e){if(e&&!e.isException()){e=e.getResponse().Body.GetQuotaUsageResponse;
if((e.account&&e.account.length>0)&&(e.searchTotal&&e.searchTotal>0)){var c=e.account;
var d=new Array();
for(var b=0;
b<c.length;
b++){d[b]=new ZaAccountQuota(c[b])
}this.replenish(AjxVector.fromArray(d));
this.setScrollHasMore(e.more)
}}};
ZaAccountQuota=function(b){this._init(b)
};
ZaAccountQuota.BytePerMB=1048576;
ZaAccountQuota.prototype.constructor=ZaAccountQuota;
ZaAccountQuota.prototype.toString=function(){return this.name
};
ZaAccountQuota.A2_name="name";
ZaAccountQuota.A2_diskUsage="diskUsage";
ZaAccountQuota.A2_quotaUsage="quotaUsage";
ZaAccountQuota.A2_quota="quota";
ZaAccountQuota.prototype._init=function(d){var c=0;
var b=0;
var e=0;
e=(d.used/ZaAccountQuota.BytePerMB).toFixed(2);
if(d.limit==0){c=ZaMsg.Unlimited;
b=0
}else{if(d.limit>=ZaAccountQuota.BytePerMB){c=(d.limit/ZaAccountQuota.BytePerMB).toFixed()
}else{c=1
}b=((e*100)/c).toFixed()
}this.name=d.name;
this.diskUsage=AjxMessageFormat.format(ZaMsg.MBXStats_DISK_MSB,[e]);
this.quotaUsage=b+"%";
this.quota=c+" MB"
}
}if(AjxPackage.define("zimbraAdmin.cos.view.ZaCosListView")){ZaCosListView=function(f,e){var d=null;
var c=DwtControl.ABSOLUTE_STYLE;
this._listType=e;
var b=this._getHeaderList();
ZaListView.call(this,{parent:f,className:d,posStyle:c,headerList:b,id:ZaId.TAB_COS_MANAGE,scrollLoading:true});
this._appCtxt=this.shell.getData(ZaAppCtxt.LABEL)
};
ZaCosListView.prototype=new ZaListView;
ZaCosListView.prototype.constructor=ZaCosListView;
ZaCosListView.prototype.toString=function(){return"ZaCosListView"
};
ZaCosListView.prototype.getTitle=function(){return ZaMsg.COS_view_title
};
ZaCosListView.prototype.getTabIcon=function(){return"COS"
};
ZaCosListView.prototype._createItemHtml=function(n,m,f){var h=new Array(50);
var b=document.createElement("div");
b[DwtListView._STYLE_CLASS]="Row";
b[DwtListView._SELECTED_STYLE_CLASS]=b[DwtListView._STYLE_CLASS]+"-"+DwtCssStyle.SELECTED;
b.className=b[DwtListView._STYLE_CLASS];
this.associateItemWithElement(n,b,DwtListView.TYPE_LIST_ITEM);
var l=0;
h[l++]="<table width='100%'>";
h[l++]="<tr>";
var c=this._headerList.length;
var j=Dwt.getNextId();
var e=this._listType;
for(var g=0;
g<c;
g++){var k=this._headerList[g]._field;
var d=this._getCellWidth(g,{});
if(k=="type"){h[l++]='<td id="'+e+"_data_type_"+j+'" width='+this._headerList[g]._width+">"+AjxImg.getImageHtml("COS")+"</td>"
}else{if(k==ZaCos.A_name){h[l++]='<td id="'+e+"_data_name_"+j+"\" align='left' width="+this._headerList[g]._width+"><nobr>";
h[l++]=AjxStringUtil.htmlEncode(n.name);
h[l++]="</nobr></td>"
}else{if(k==ZaCos.A_description){h[l++]='<td id="'+e+"_data_desc_"+j+"\" align='left' width="+this._headerList[g]._width+"><nobr>";
h[l++]=AjxStringUtil.htmlEncode(ZaItem.getDescriptionValue(n.attrs[ZaCos.A_description]));
h[l++]="</nobr></td>"
}}}}h[l++]="</tr></table>";
b.innerHTML=h.join("");
return b
};
ZaCosListView.prototype._getHeaderList=function(){var b=new Array();
var d=1;
var c=0;
b[c++]=new ZaListHeaderItem("type",null,null,"22px",null,"objectClass",false,true);
b[c++]=new ZaListHeaderItem(ZaCos.A_name,ZaMsg.CLV_Name_col,null,"200px",d++,ZaCos.A_name,true,true);
b[c++]=new ZaListHeaderItem(ZaCos.A_description,ZaMsg.CLV_Description_col,null,"auto",null,null,true,true);
return b
}
}if(AjxPackage.define("zimbraAdmin.cos.view.ZaCosXFormView")){ZaCosXFormView=function(b,c){ZaTabView.call(this,{parent:b,iKeyName:"ZaCosXFormView",contextId:ZaId.TAB_COS_EDIT});
this.TAB_INDEX=0;
this.initForm(ZaCos.myXModel,this.getMyXForm(c),null)
};
ZaCosXFormView.prototype=new ZaTabView();
ZaCosXFormView.prototype.constructor=ZaCosXFormView;
ZaTabView.XFormModifiers.ZaCosXFormView=new Array();
ZaTabView.ObjectModifiers.ZaCosXFormView=[];
ZaCosXFormView.prototype.TAB_INDEX=0;
ZaCosXFormView.zimletChoices=new XFormChoices([],XFormChoices.SIMPLE_LIST);
ZaCosXFormView.themeChoices=new XFormChoices([],XFormChoices.OBJECT_LIST);
ZaCosXFormView.prototype.setObject=function(l){l.manageSpecialAttrs();
this._containedObject=new ZaCos();
this._containedObject.attrs=new Object();
this._containedObject.name=l.name;
this._containedObject.type=l.type;
if(l.rights){this._containedObject.rights=l.rights
}if(l.setAttrs){this._containedObject.setAttrs=l.setAttrs
}if(l.getAttrs){this._containedObject.getAttrs=l.getAttrs
}if(l._defaultValues){this._containedObject._defaultValues=l._defaultValues
}if(l.id){this._containedObject.id=l.id
}for(var k in l.attrs){var g=this._localXForm.getModel().getItem(k);
if((g!=null&&g.type==_LIST_)||(l.attrs[k]!=null&&l.attrs[k] instanceof Array)){this._containedObject.attrs[k]=ZaItem.deepCloneListItem(l.attrs[k])
}else{this._containedObject.attrs[k]=l.attrs[k]
}}if(l.getAttrs){if(l.getAttrs[ZaCos.A_zimbraAvailableSkin]||l.getAttrs.all){var h=l.attrs[ZaCos.A_zimbraAvailableSkin];
if(h!=null&&h!=""){if(AjxUtil.isString(h)){this._containedObject.attrs[ZaCos.A_zimbraAvailableSkin]=[h]
}else{var d=h.length;
this._containedObject.attrs[ZaCos.A_zimbraAvailableSkin]=[];
for(var e=0;
e<d;
e++){this._containedObject.attrs[ZaCos.A_zimbraAvailableSkin].push(h[e])
}}}else{this._containedObject.attrs[ZaCos.A_zimbraAvailableSkin]=null
}var h=ZaApp.getInstance().getInstalledSkins();
if(h==null){h=[]
}else{if(AjxUtil.isString(h)){h=[h]
}}var f=ZaApp.getInstance().getSkinChoices(h);
ZaCosXFormView.themeChoices.setChoices(f);
ZaCosXFormView.themeChoices.dirtyChoices()
}if(l.getAttrs[ZaCos.A_zimbraZimletAvailableZimlets]||l.getAttrs.all){var c=ZaZimlet.getAll(ZaZimlet.EXCLUDE_EXTENSIONS);
if(c==null){c=[]
}if(c instanceof ZaItemList||c instanceof AjxVector){c=c.getArray()
}var d=c.length;
var j=[];
for(var e=0;
e<d;
e++){var b=c[e];
j.push(b.name)
}ZaCosXFormView.zimletChoices.setChoices(j);
ZaCosXFormView.zimletChoices.dirtyChoices()
}}ZaCosXFormView._domainList=ZaApp.getInstance().getDomainList(true).getArray();
if(!l[ZaModel.currentTab]){this._containedObject[ZaModel.currentTab]="1"
}else{this._containedObject[ZaModel.currentTab]=l[ZaModel.currentTab]
}this.modifyContainedObject();
this._localXForm.setInstance(this._containedObject)
};
ZaCosXFormView.gotSkins=function(){return((ZaApp.getInstance().getInstalledSkins()!=null)&&(ZaApp.getInstance().getInstalledSkins().length>0))
};
ZaCosXFormView.gotNoSkins=function(){return !ZaCosXFormView.gotSkins.call(this)
};
ZaCosXFormView.isPasswordLockoutEnabled=function(){return(this.getInstanceValue(ZaCos.A_zimbraPasswordLockoutEnabled)=="TRUE")
};
ZaCosXFormView.isMailFeatureEnabled=function(){return(this.getInstanceValue(ZaCos.A_zimbraFeatureMailEnabled)=="TRUE")
};
ZaCosXFormView.isContactsFeatureEnabled=function(){return this.getInstanceValue(ZaCos.A_zimbraFeatureContactsEnabled)=="TRUE"
};
ZaCosXFormView.isCalendarFeatureEnabled=function(){return this.getInstanceValue(ZaCos.A_zimbraFeatureCalendarEnabled)=="TRUE"
};
ZaCosXFormView.isMailForwardingEnabled=function(){return(this.getInstanceValue(ZaCos.A_zimbraFeatureMailForwardingEnabled)=="TRUE")
};
ZaCosXFormView.isBriefcaseFeatureEnabled=function(){return(this.getInstanceValue(ZaCos.A_zimbraFeatureBriefcasesEnabled)=="TRUE")
};
ZaCosXFormView.isAttributeDefined=function(b){return this.getInstanceValue(b)!=undefined
};
ZaCosXFormView.FEATURE_TAB_ATTRS=[ZaCos.A_zimbraFeatureMailEnabled,ZaCos.A_zimbraFeatureReadReceiptsEnabled,ZaCos.A_zimbraFeatureContactsEnabled,ZaCos.A_zimbraFeatureDistributionListFolderEnabled,ZaCos.A_zimbraFeatureCalendarEnabled,ZaCos.A_zimbraFeatureTasksEnabled,ZaCos.A_zimbraFeatureBriefcasesEnabled,ZaCos.A_zimbraFeatureOptionsEnabled,ZaCos.A_zimbraFeatureTaggingEnabled,ZaCos.A_zimbraFeatureSharingEnabled,ZaCos.A_zimbraExternalSharingEnabled,ZaCos.A_zimbraPublicSharingEnabled,ZaCos.A_zimbraFeatureChangePasswordEnabled,ZaCos.A_zimbraFeatureSkinChangeEnabled,ZaCos.A_zimbraFeatureManageZimlets,ZaCos.A_zimbraFeatureHtmlComposeEnabled,ZaCos.A_zimbraFeatureGalEnabled,ZaCos.A_zimbraFeatureMAPIConnectorEnabled,ZaCos.A_zimbraFeatureEwsEnabled,ZaCos.A_zimbraFeatureTouchClientEnabled,ZaCos.A_zimbraFeatureWebClientOfflineAccessEnabled,ZaCos.A_zimbraFeatureGalAutoCompleteEnabled,ZaCos.A_zimbraFeatureMailPriorityEnabled,ZaCos.A_zimbraFeatureFlaggingEnabled,ZaCos.A_zimbraImapEnabled,ZaCos.A_zimbraPop3Enabled,ZaCos.A_zimbraFeatureWebClientEnabled,ZaCos.A_zimbraFeatureImapDataSourceEnabled,ZaCos.A_zimbraFeaturePop3DataSourceEnabled,ZaCos.A_zimbraFeatureConversationsEnabled,ZaCos.A_zimbraFeatureFiltersEnabled,ZaCos.A_zimbraFeatureOutOfOfficeReplyEnabled,ZaCos.A_zimbraFeatureNewMailNotificationEnabled,ZaCos.A_zimbraFeatureIdentitiesEnabled,ZaCos.A_zimbraFeatureGroupCalendarEnabled,ZaCos.A_zimbraFeaturePeopleSearchEnabled,ZaCos.A_zimbraFeatureAdvancedSearchEnabled,ZaCos.A_zimbraFeatureSavedSearchesEnabled,ZaCos.A_zimbraFeatureInitialSearchPreferenceEnabled,ZaCos.A_zimbraFeatureImportFolderEnabled,ZaCos.A_zimbraFeatureExportFolderEnabled,ZaCos.A_zimbraFeatureDocumentEditingEnabled,ZaCos.A_zimbraDumpsterEnabled,ZaCos.A_zimbraDumpsterPurgeEnabled,ZaCos.A_zimbraFeatureMailSendLaterEnabled,ZaCos.A_zimbraFeatureCalendarReminderDeviceEmailEnabled,ZaCos.A_zimbraFeatureSMIMEEnabled];
ZaCosXFormView.FEATURE_TAB_RIGHTS=[];
ZaCosXFormView.PREFERENCES_TAB_ATTRS=[ZaCos.A_zimbraPrefMailSendReadReceipts,ZaCos.A_zimbraPrefUseTimeZoneListInCalendar,ZaCos.A_zimbraPrefCalendarUseQuickAdd,ZaCos.A_zimbraPrefCalendarAlwaysShowMiniCal,ZaCos.A_zimbraPrefCalendarApptReminderWarningTime,ZaCos.A_zimbraPrefTimeZoneId,ZaCos.A_zimbraPrefGalAutoCompleteEnabled,ZaCos.A_zimbraPrefAutoAddAddressEnabled,ZaCos.A_zimbraMailSignatureMaxLength,ZaCos.A_zimbraPrefForwardReplyInOriginalFormat,ZaCos.A_zimbraPrefHtmlEditorDefaultFontColor,ZaCos.A_zimbraPrefHtmlEditorDefaultFontFamily,ZaCos.A_zimbraPrefHtmlEditorDefaultFontSize,ZaCos.A_zimbraPrefComposeFormat,ZaCos.A_zimbraPrefComposeInNewWindow,ZaCos.A_zimbraAllowAnyFromAddress,ZaCos.A_zimbraMailMinPollingInterval,ZaCos.A_zimbraPrefMailPollingInterval,ZaCos.A_zimbraPrefAutoSaveDraftInterval,ZaCos.A_zimbraPrefMailDefaultCharset,ZaCos.A_zimbraMaxMailItemsPerPage,ZaCos.A_zimbraPrefMailItemsPerPage,ZaCos.A_zimbraPrefGroupMailBy,ZaCos.A_zimbraPrefDisplayExternalImages,ZaCos.A_zimbraPrefMessageViewHtmlPreferred,ZaCos.A_zimbraPrefLocale,ZaCos.A_zimbraJunkMessagesIndexingEnabled,ZaCos.A_zimbraPrefShowSelectionCheckbox,ZaCos.A_zimbraPrefWarnOnExit,ZaCos.A_zimbraPrefAdminConsoleWarnOnExit,ZaCos.A_zimbraPrefUseKeyboardShortcuts,ZaCos.A_zimbraPrefImapSearchFoldersEnabled,ZaCos.A_zimbraPrefShowSearchString,ZaCos.A_zimbraPrefMailInitialSearch,ZaCos.A_zimbraPrefClientType,ZaCos.A_zimbraPrefCalendarInitialView,ZaCos.A_zimbraPrefCalendarFirstDayOfWeek,ZaCos.A_zimbraPrefCalendarReminderFlashTitle,ZaCos.A_zimbraPrefCalendarAllowCancelEmailToSelf,ZaCos.A_zimbraPrefCalendarAllowPublishMethodInvite,ZaCos.A_zimbraPrefCalendarToasterEnabled,ZaCos.A_zimbraPrefCalendarShowPastDueReminders,ZaCos.A_zimbraPrefAppleIcalDelegationEnabled,ZaCos.A_zimbraPrefMandatorySpellCheckEnabled,ZaCos.A_zimbraPrefImapEnabled,ZaCos.A_zimbraPrefPop3Enabled];
ZaCosXFormView.PREFERENCES_TAB_RIGHTS=[];
ZaCosXFormView.SKIN_TAB_ATTRS=[ZaCos.A_zimbraPrefSkin,ZaCos.A_zimbraAvailableSkin];
ZaCosXFormView.SKIN_TAB_RIGHTS=[];
ZaCosXFormView.ZIMLET_TAB_ATTRS=[ZaCos.A_zimbraZimletAvailableZimlets];
ZaCosXFormView.ZIMLET_TAB_RIGHTS=[ZaCos.RIGHT_GET_ZIMLET,ZaCos.RIGHT_LIST_ZIMLET];
ZaCosXFormView.SERVERPOOL_TAB_ATTRS=[ZaCos.A_zimbraMailHostPool];
ZaCosXFormView.SERVERPOOL_TAB_RIGHTS=[ZaCos.RIGHT_GET_HOSTNAME];
ZaCosXFormView.ADVANCED_TAB_ATTRS=[ZaCos.A_zimbraAttachmentsBlocked,ZaCos.A_zimbraMailQuota,ZaCos.A_zimbraContactMaxNumEntries,ZaCos.A_zimbraQuotaWarnPercent,ZaCos.A_zimbraQuotaWarnInterval,ZaCos.A_zimbraQuotaWarnMessage,ZaCos.A_zimbraPasswordLocked,ZaCos.A_zimbraPasswordBlockCommonEnabled,ZaCos.A_zimbraMinPwdLength,ZaCos.A_zimbraMaxPwdLength,ZaCos.A_zimbraPasswordMinUpperCaseChars,ZaCos.A_zimbraPasswordMinLowerCaseChars,ZaCos.A_zimbraPasswordMinPunctuationChars,ZaCos.A_zimbraPasswordMinNumericChars,ZaCos.A_zimbraPasswordMinPunctuationChars,ZaCos.A_zimbraMinPwdAge,ZaCos.A_zimbraMaxPwdAge,ZaCos.A_zimbraEnforcePwdHistory,ZaCos.A_zimbraTwoFactorAuthEnabled,ZaCos.A_zimbraFeatureTwoFactorAuthRequired,ZaCos.A_zimbraTwoFactorAuthNumScratchCodes,ZaCos.A_zimbraFeatureAppSpecificPasswordsEnabled,ZaCos.A_zimbraPasswordLockoutEnabled,ZaCos.A_zimbraPasswordLockoutMaxFailures,ZaCos.A_zimbraPasswordLockoutDuration,ZaCos.A_zimbraPasswordLockoutFailureLifetime,ZaCos.A_zimbraAdminAuthTokenLifetime,ZaCos.A_zimbraAuthTokenLifetime,ZaCos.A_zimbraMailIdleSessionTimeout,ZaCos.A_zimbraMailMessageLifetime,ZaCos.A_zimbraMailTrashLifetime,ZaCos.A_zimbraMailSpamLifetime,ZaCos.A_zimbraMailDumpsterLifetime,ZaCos.A_zimbraDumpsterUserVisibleAge,ZaCos.A_zimbraFreebusyExchangeUserOrg,ZaCos.A_zimbraSieveRejectMailEnabled,ZaCos.A_zimbraSieveEditHeaderEnabled,ZaCos.A_zimbraAdminSieveScriptBefore,ZaCos.A_zimbraAdminSieveScriptAfter,ZaCos.A_zimbraDataSourcePop3PollingInterval,ZaCos.A_zimbraDataSourceImapPollingInterval,ZaCos.A_zimbraDataSourceCalendarPollingInterval,ZaCos.A_zimbraDataSourceRssPollingInterval,ZaCos.A_zimbraDataSourceCaldavPollingInterval,ZaCos.A_zimbraDataSourceMinPollingInterval];
ZaCosXFormView.ADVANCED_TAB_RIGHTS=[];
ZaCosXFormView.RETENTION_POLICY_TAB_ATTRS=[];
ZaCosXFormView.RETENTION_POLICY_TAB_RIGHTS=[];
ZaCosXFormView.prototype.loadRetentionPolicies=function(){var b=ZaRetentionPolicy.getRetentionPolicies("id",this.getForm().getInstance().id);
var c=ZaRetentionPolicy.getRetentionPolicies();
if(b[ZaRetentionPolicy.TYPE_KEEP].length){if(ZaCosXFormView._arrayContains(c[ZaRetentionPolicy.TYPE_KEEP],b[ZaRetentionPolicy.TYPE_KEEP][0])){this.getForm().setInstanceValue(c[ZaRetentionPolicy.TYPE_KEEP],ZaCos.A2_retentionPoliciesKeep);
this.getForm().setInstanceValue(c[ZaRetentionPolicy.TYPE_PURGE],ZaCos.A2_retentionPoliciesPurge);
this.getForm().setInstanceValue("FALSE",ZaCos.A2_retentionPoliciesKeepInherited);
return
}}if(b[ZaRetentionPolicy.TYPE_PURGE].length){if(ZaCosXFormView._arrayContains(c[ZaRetentionPolicy.TYPE_PURGE],b[ZaRetentionPolicy.TYPE_PURGE][0])){this.getForm().setInstanceValue(c[ZaRetentionPolicy.TYPE_KEEP],ZaCos.A2_retentionPoliciesKeep);
this.getForm().setInstanceValue(c[ZaRetentionPolicy.TYPE_PURGE],ZaCos.A2_retentionPoliciesPurge);
this.getForm().setInstanceValue("FALSE",ZaCos.A2_retentionPoliciesKeepInherited);
return
}}if(b[ZaRetentionPolicy.TYPE_PURGE].length==0&&b[ZaRetentionPolicy.TYPE_KEEP].length==0){this.getForm().setInstanceValue(c[ZaRetentionPolicy.TYPE_KEEP],ZaCos.A2_retentionPoliciesKeep);
this.getForm().setInstanceValue(c[ZaRetentionPolicy.TYPE_PURGE],ZaCos.A2_retentionPoliciesPurge);
this.getForm().setInstanceValue("FALSE",ZaCos.A2_retentionPoliciesKeepInherited)
}else{this.getForm().setInstanceValue(b[ZaRetentionPolicy.TYPE_KEEP],ZaCos.A2_retentionPoliciesKeep);
this.getForm().setInstanceValue(b[ZaRetentionPolicy.TYPE_PURGE],ZaCos.A2_retentionPoliciesPurge);
this.getForm().setInstanceValue("TRUE",ZaCos.A2_retentionPoliciesKeepInherited)
}};
ZaCosXFormView._arrayContains=function(b,d){if(!b||!(b instanceof Array)||!d){return false
}for(var c=0;
c<b.length;
c++){if(b[c].id&&d.id&&b[c].id==d.id){return true
}}return false
};
ZaCosXFormView.retentionSelectionListener=function(b){this.getForm().setInstanceValue(this.getSelection(),ZaCos.A2_retentionPoliciesKeep_Selection)
};
ZaCosXFormView.purgeSelectionListener=function(){this.getForm().setInstanceValue(this.getSelection(),ZaCos.A2_retentionPoliciesPurge_Selection)
};
ZaCosXFormView.deleteButtonListener=function(c){var b=this.getForm().getInstanceValue(ZaCos.A2_retentionPoliciesKeep_Selection);
if(c==1){b=this.getForm().getInstanceValue(ZaCos.A2_retentionPoliciesPurge_Selection)
}else{if(c==2){b=this.getForm().getInstanceValue(ZaCos.A2_retentionPoliciesPurge).length+this.getForm().getInstanceValue(ZaCos.A2_retentionPoliciesKeep).length
}}if(b===0){ZaCosXFormView.deleteRetentionPolicies.call(this,c);
return
}if(!b){return
}if(!ZaApp.getInstance().dialogs.DeleteRetionPolicyConfirmMessageDialog){ZaApp.getInstance().dialogs.DeleteRetionPolicyConfirmMessageDialog=new ZaMsgDialog(ZaApp.getInstance().getAppCtxt().getShell(),null,[DwtDialog.YES_BUTTON,DwtDialog.NO_BUTTON],null,ZaId.CTR_PREFIX+"DELETE_RETENTION_POLICY_ConfirmMessage")
}ZaApp.getInstance().dialogs.DeleteRetionPolicyConfirmMessageDialog.setMessage(ZaMsg.Q_Delete_RetentionPolicy_Confirm,DwtMessageDialog.WARNING_STYLE);
ZaApp.getInstance().dialogs.DeleteRetionPolicyConfirmMessageDialog.registerCallback(DwtDialog.YES_BUTTON,ZaCosXFormView.deleteRetentionPolicies,this,[c]);
ZaApp.getInstance().dialogs.DeleteRetionPolicyConfirmMessageDialog.popup()
};
ZaCosXFormView.deleteRetentionPolicies=function(e){if(ZaApp.getInstance().dialogs.DeleteRetionPolicyConfirmMessageDialog){ZaApp.getInstance().dialogs.DeleteRetionPolicyConfirmMessageDialog.popdown()
}var d;
var c;
if(e==1){d=this.getForm().getInstanceValue(ZaCos.A2_retentionPoliciesPurge_Selection);
c=this.getForm().getInstanceValue(ZaCos.A2_retentionPoliciesPurge);
if(!d){return
}for(var b=0;
b<d.length;
b++){d[b].deletePolicy("id",this.getForm().getInstance().id);
AjxUtil.arrayRemove(c,d[b])
}this.getForm().setInstanceValue([],ZaCos.A2_retentionPoliciesPurge);
this.getForm().setInstanceValue(c,ZaCos.A2_retentionPoliciesPurge);
this.getForm().setInstanceValue([],ZaCos.A2_retentionPoliciesPurge_Selection)
}else{if(e==2){c=this.getForm().getInstanceValue(ZaCos.A2_retentionPoliciesPurge);
c=c.concat(this.getForm().getInstanceValue(ZaCos.A2_retentionPoliciesKeep));
for(var b=0;
b<c.length;
b++){c[b].deletePolicy("id",this.getForm().getInstance().id)
}this.getForm().setInstanceValue([],ZaCos.A2_retentionPoliciesPurge);
this.getForm().setInstanceValue([],ZaCos.A2_retentionPoliciesKeep);
var f=ZaRetentionPolicy.getRetentionPolicies();
this.getForm().setInstanceValue(f[ZaRetentionPolicy.TYPE_KEEP],ZaCos.A2_retentionPoliciesKeep);
this.getForm().setInstanceValue(f[ZaRetentionPolicy.TYPE_PURGE],ZaCos.A2_retentionPoliciesPurge);
this.getForm().setInstanceValue("FALSE",ZaCos.A2_retentionPoliciesKeepInherited)
}else{d=this.getForm().getInstanceValue(ZaCos.A2_retentionPoliciesKeep_Selection);
c=this.getForm().getInstanceValue(ZaCos.A2_retentionPoliciesKeep);
if(!d){return
}for(var b=0;
b<d.length;
b++){d[b].deletePolicy("id",this.getForm().getInstance().id);
AjxUtil.arrayRemove(c,d[b])
}this.getForm().setInstanceValue([],ZaCos.A2_retentionPoliciesKeep);
this.getForm().setInstanceValue(c,ZaCos.A2_retentionPoliciesKeep);
this.getForm().setInstanceValue([],ZaCos.A2_retentionPoliciesKeep_Selection)
}}};
ZaCosXFormView.addButtonListener=function(b){var c;
if(b){c=new ZaRetentionPolicy(null,null,null,ZaRetentionPolicy.TYPE_PURGE)
}else{c=new ZaRetentionPolicy()
}ZaApp.getInstance().dialogs.newRetentionPolicyDialog=new ZaRetentionPolicyDlg(ZaApp.getInstance().getAppCtxt().getShell(),"500px","100px",ZaMsg.TTL_Policy_Add);
ZaApp.getInstance().dialogs.newRetentionPolicyDialog.registerCallback(DwtDialog.OK_BUTTON,ZaCosXFormView.createRetentionPolicy,this,ZaApp.getInstance().dialogs.newRetentionPolicyDialog._localXForm);
ZaApp.getInstance().dialogs.newRetentionPolicyDialog.setObject(c);
ZaApp.getInstance().dialogs.newRetentionPolicyDialog.popup()
};
ZaCosXFormView.createRetentionPolicy=function(c){if(ZaApp.getInstance().dialogs.newRetentionPolicyDialog){var d=c.getInstance();
var b;
if(d[ZaRetentionPolicy.A2_type]==ZaRetentionPolicy.TYPE_KEEP){b=this.getForm().getInstanceValue(ZaCos.A2_retentionPoliciesKeep)
}else{b=this.getForm().getInstanceValue(ZaCos.A2_retentionPoliciesPurge)
}if(!b){b=[]
}if(!ZaRetentionPolicy.checkValues(d,b)){return false
}ZaApp.getInstance().dialogs.newRetentionPolicyDialog.popdown();
d.createPolicy("id",this.getForm().getInstance().id);
b.push(d);
if(d[ZaRetentionPolicy.A2_type]==ZaRetentionPolicy.TYPE_KEEP){this.getForm().setInstanceValue([],ZaCos.A2_retentionPoliciesKeep);
this.getForm().setInstanceValue(b,ZaCos.A2_retentionPoliciesKeep);
this.getForm().setInstanceValue([],ZaCos.A2_retentionPoliciesKeep_Selection)
}else{this.getForm().setInstanceValue([],ZaCos.A2_retentionPoliciesPurge);
this.getForm().setInstanceValue(b,ZaCos.A2_retentionPoliciesPurge);
this.getForm().setInstanceValue([],ZaCos.A2_retentionPoliciesPurge_Selection)
}}};
ZaCosXFormView.editButtonListener=function(b){var c;
if(b){c=this.getForm().getInstanceValue(ZaCos.A2_retentionPoliciesPurge_Selection)[0]
}else{c=this.getForm().getInstanceValue(ZaCos.A2_retentionPoliciesKeep_Selection)[0]
}if(!ZaApp.getInstance().dialogs.editRetentionPolicyDialog){ZaApp.getInstance().dialogs.editRetentionPolicyDialog=new ZaRetentionPolicyDlg(ZaApp.getInstance().getAppCtxt().getShell(),"500px","100px",ZaMsg.TTL_Policy_Edit);
ZaApp.getInstance().dialogs.editRetentionPolicyDialog.registerCallback(DwtDialog.OK_BUTTON,ZaCosXFormView.updateRetentionPolicy,this,ZaApp.getInstance().dialogs.editRetentionPolicyDialog._localXForm)
}ZaApp.getInstance().dialogs.editRetentionPolicyDialog.setObject(c);
ZaApp.getInstance().dialogs.editRetentionPolicyDialog.popup()
};
ZaCosXFormView.updateRetentionPolicy=function(d){if(ZaApp.getInstance().dialogs.editRetentionPolicyDialog){var e=d.getInstance();
var c;
if(e[ZaRetentionPolicy.A2_type]==ZaRetentionPolicy.TYPE_KEEP){c=this.getForm().getInstanceValue(ZaCos.A2_retentionPoliciesKeep)
}else{c=this.getForm().getInstanceValue(ZaCos.A2_retentionPoliciesPurge)
}if(!c){c=[]
}if(!ZaRetentionPolicy.checkValues(e,c)){return false
}ZaApp.getInstance().dialogs.editRetentionPolicyDialog.popdown();
e.modifyPolicy("id",this.getForm().getInstance().id);
var b=AjxUtil.indexOf(c,e);
AjxUtil.arrayRemove(c,e);
AjxUtil.arrayAdd(c,e,b);
if(e[ZaRetentionPolicy.A2_type]==ZaRetentionPolicy.TYPE_KEEP){this.getForm().setInstanceValue([],ZaCos.A2_retentionPoliciesKeep);
this.getForm().setInstanceValue(c,ZaCos.A2_retentionPoliciesKeep);
this.getForm().setInstanceValue([],ZaCos.A2_retentionPoliciesKeep_Selection)
}else{this.getForm().setInstanceValue([],ZaCos.A2_retentionPoliciesPurge);
this.getForm().setInstanceValue(c,ZaCos.A2_retentionPoliciesPurge);
this.getForm().setInstanceValue([],ZaCos.A2_retentionPoliciesPurge_Selection)
}}};
ZaCosXFormView.inheritCOSRetentionPolicies=function(d,c,b){if(d=="TRUE"){this.setInstanceValue(d);
this.getForm().setInstanceValue([],ZaCos.A2_retentionPoliciesKeep);
this.getForm().setInstanceValue([],ZaCos.A2_retentionPoliciesKeep_Selection);
this.getForm().setInstanceValue([],ZaCos.A2_retentionPoliciesPurge);
this.getForm().setInstanceValue([],ZaCos.A2_retentionPoliciesPurge_Selection)
}else{if(d=="FALSE"){ZaCosXFormView.deleteButtonListener.call(this,2)
}}};
ZaCosXFormView.myXFormModifier=function(z,d){var v=new Array();
var e=1;
var A=0;
v[A++]=new ZaListHeaderItem(ZaRetentionPolicy.A2_name,ZaMsg.CLV_Policy_Name_col,null,"200px",e,ZaRetentionPolicy.A2_name,true,true);
v[A++]=new ZaListHeaderItem(ZaRetentionPolicy.A2_lifetime,ZaMsg.CLV_Policy_Retention_col,null,"auto",null,null,true,true);
var l=new Array();
A=0;
l[A++]=new ZaListHeaderItem(ZaRetentionPolicy.A2_name,ZaMsg.CLV_Policy_Name_col,null,"200px",e++,ZaRetentionPolicy.A2_name,true,true);
l[A++]=new ZaListHeaderItem(ZaRetentionPolicy.A2_lifetime,ZaMsg.CLV_Policy_Purge_col,null,"auto",null,null,true,true);
this.helpMap={};
this.tabChoices=new Array();
var G=++this.TAB_INDEX;
var F,E,D,C,B,x,w;
var g=[{type:_AJX_IMAGE_,src:"COS_32",label:null,rowSpan:2},{type:_OUTPUT_,ref:ZaCos.A_name,label:null,cssClass:"AdminTitle",getDisplayValue:AjxUtil.htmlEncode,visibilityChecks:[ZaItem.hasReadPermission],height:32,rowSpan:2},{type:_OUTPUT_,ref:ZaItem.A_zimbraId,label:ZaMsg.NAD_ZimbraID,visibilityChecks:[ZaItem.hasReadPermission]},{type:_OUTPUT_,ref:ZaItem.A_zimbraCreateTimestamp,label:ZaMsg.LBL_zimbraCreateTimestamp,labelLocation:_LEFT_,getDisplayValue:function(){var I=ZaItem.formatServerTime(this.getInstanceValue());
if(!I){return ZaMsg.Server_Time_NA
}else{return I
}},visibilityChecks:[ZaItem.hasReadPermission]}];
this.tabChoices.push({value:G,label:ZaMsg.TABT_GeneralPage});
this.helpMap[G]=[location.pathname,ZaUtil.HELP_URL,ZaCosController.helpURL,"?locid=",AjxEnv.DEFAULT_LOCALE].join("");
if(ZaTabView.isTAB_ENABLED(d,ZaCosXFormView.FEATURE_TAB_ATTRS,ZaCosXFormView.FEATURE_TAB_RIGHTS)){F=++this.TAB_INDEX;
this.tabChoices.push({value:F,label:ZaMsg.TABT_Features});
this.helpMap[F]=[location.pathname,ZaUtil.HELP_URL,"managing_accounts/user_interface_features.htm","?locid=",AjxEnv.DEFAULT_LOCALE].join("")
}if(ZaTabView.isTAB_ENABLED(d,ZaCosXFormView.PREFERENCES_TAB_ATTRS,ZaCosXFormView.PREFERENCES_TAB_RIGHTS)){E=++this.TAB_INDEX;
this.tabChoices.push({value:E,label:ZaMsg.TABT_Preferences});
this.helpMap[E]=[location.pathname,ZaUtil.HELP_URL,"managing_accounts/preferences.htm","?locid=",AjxEnv.DEFAULT_LOCALE].join("")
}if(ZaTabView.isTAB_ENABLED(d,ZaCosXFormView.SKIN_TAB_ATTRS,ZaCosXFormView.SKIN_TAB_RIGHTS)){D=++this.TAB_INDEX;
this.tabChoices.push({value:D,label:ZaMsg.TABT_Themes});
this.helpMap[D]=[location.pathname,ZaUtil.HELP_URL,"ui_themes/defining_theme_for_the_zimbra_web_client_ui.htm","?locid=",AjxEnv.DEFAULT_LOCALE].join("")
}var m=ZaZimlet.getAll(ZaZimlet.EXCLUDE_EXTENSIONS);
if(m!=null&&!AjxUtil.isEmpty(m.getArray())&&ZaTabView.isTAB_ENABLED(d,ZaCosXFormView.ZIMLET_TAB_ATTRS,ZaCosXFormView.ZIMLET_TAB_RIGHTS)){C=++this.TAB_INDEX;
this.tabChoices.push({value:C,label:ZaMsg.TABT_Zimlets});
this.helpMap[C]=[location.pathname,ZaUtil.HELP_URL,"zimlets/about_zimlets.htm","?locid=",AjxEnv.DEFAULT_LOCALE].join("")
}if(ZaTabView.isTAB_ENABLED(d,ZaCosXFormView.SERVERPOOL_TAB_ATTRS,ZaCosXFormView.SERVERPOOL_TAB_RIGHTS)){B=++this.TAB_INDEX;
this.tabChoices.push({value:B,label:ZaMsg.TABT_ServerPool});
this.helpMap[B]=[location.pathname,ZaUtil.HELP_URL,"cos/assigning_accounts_to_different_servers.htm?locid=",AjxEnv.DEFAULT_LOCALE].join("")
}if(ZaTabView.isTAB_ENABLED(d,ZaCosXFormView.ADVANCED_TAB_ATTRS,ZaCosXFormView.ADVANCED_TAB_RIGHTS)){x=++this.TAB_INDEX;
this.tabChoices.push({value:x,label:ZaMsg.TABT_Advanced});
this.helpMap[x]=[location.pathname,ZaUtil.HELP_URL,"managing_accounts/account_advanced_features.htm","?locid=",AjxEnv.DEFAULT_LOCALE].join("")
}if(ZaTabView.isTAB_ENABLED(d,ZaCosXFormView.RETENTION_POLICY_TAB_ATTRS,ZaCosXFormView.RETENTION_POLICY_TAB_RIGHTS)){w=++this.TAB_INDEX;
this.tabChoices.push({value:w,label:ZaMsg.TABT_RetentionPolicy});
this.helpMap[w]=[location.pathname,ZaUtil.HELP_URL,"managing_global_settings/retention_policies.htm?locid=",AjxEnv.DEFAULT_LOCALE].join("")
}var c=[];
var t={type:_ZATABCASE_,caseKey:G,numCols:1,paddingStyle:"padding-left:15px;",width:"98%",cellpadding:2};
var u=[{type:_ZA_TOP_GROUPER_,label:ZaMsg.TABT_GeneralPage,numCols:2,colSizes:["275px","auto"],items:[{ref:ZaCos.A_name,type:_INPUT_,enableDisableChecks:[[ZaItem.hasRight,ZaCos.RENAME_COS_RIGHT]],msgName:ZaMsg.NAD_DisplayName,label:ZaMsg.NAD_DisplayName,labelLocation:_LEFT_,cssClass:"admin_xform_name_input",required:true,width:"30em"},ZaItem.descriptionXFormItem,{ref:ZaCos.A_zimbraNotes,type:_TEXTAREA_,msgName:ZaMsg.NAD_Notes,label:ZaMsg.NAD_Notes,labelLocation:_LEFT_,labelCssStyle:"vertical-align:top;",width:"30em"}]}];
t.items=u;
c.push(t);
if(F){var s={type:_ZATABCASE_,caseKey:F,numCols:1,colSizes:["auto"],paddingStyle:"padding-left:15px;",width:"98%",cellpadding:2,id:"cos_form_features_tab"};
var y=[{type:_ZA_TOP_GROUPER_,label:ZaMsg.NAD_zimbraMajorFeature,id:"cos_form_features_major",visibilityChecks:[[ZATopGrouper_XFormItem.isGroupVisible,[ZaCos.A_zimbraFeatureMailEnabled,ZaCos.A_zimbraFeatureContactsEnabled,ZaCos.A_zimbraFeatureCalendarEnabled,ZaCos.A_zimbraFeatureTasksEnabled,ZaCos.A_zimbraFeatureBriefcasesEnabled,ZaCos.A_zimbraFeatureOptionsEnabled]]],items:[{ref:ZaCos.A_zimbraFeatureMailEnabled,type:_CHECKBOX_,msgName:ZaMsg.LBL_zimbraFeatureMailEnabled,label:ZaMsg.LBL_zimbraFeatureMailEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaCos.A_zimbraFeatureContactsEnabled,type:_CHECKBOX_,msgName:ZaMsg.LBL_zimbraFeatureContactsEnabled,label:ZaMsg.LBL_zimbraFeatureContactsEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaCos.A_zimbraFeatureCalendarEnabled,type:_CHECKBOX_,msgName:ZaMsg.LBL_zimbraFeatureCalendarEnabled,label:ZaMsg.LBL_zimbraFeatureCalendarEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaCos.A_zimbraFeatureTasksEnabled,type:_CHECKBOX_,msgName:ZaMsg.LBL_zimbraFeatureTaskEnabled,label:ZaMsg.LBL_zimbraFeatureTaskEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaCos.A_zimbraFeatureBriefcasesEnabled,type:_CHECKBOX_,msgName:ZaMsg.LBL_zimbraFeatureBriefcasesEnabled,label:ZaMsg.LBL_zimbraFeatureBriefcasesEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaCos.A_zimbraFeatureOptionsEnabled,type:_CHECKBOX_,msgName:ZaMsg.LBL_zimbraFeatureOptionsEnabled,label:ZaMsg.LBL_zimbraFeatureOptionsEnabled,trueValue:"TRUE",falseValue:"FALSE"}]},{type:_ZA_TOP_GROUPER_,label:ZaMsg.NAD_zimbraGeneralFeature,id:"cos_form_features_general",visibilityChecks:[[ZATopGrouper_XFormItem.isGroupVisible,[ZaCos.A_zimbraFeatureTaggingEnabled,ZaCos.A_zimbraFeatureSharingEnabled,ZaCos.A_zimbraFeatureChangePasswordEnabled,ZaCos.A_zimbraFeatureSkinChangeEnabled,ZaCos.A_zimbraFeatureManageZimlets,ZaCos.A_zimbraFeatureHtmlComposeEnabled,ZaCos.A_zimbraFeatureGalEnabled,ZaCos.A_zimbraFeatureMAPIConnectorEnabled,ZaCos.A_zimbraFeatureEwsEnabled,ZaCos.A_zimbraFeatureTouchClientEnabled,ZaCos.A_zimbraFeatureWebClientOfflineAccessEnabled,ZaCos.A_zimbraFeatureGalAutoCompleteEnabled,ZaCos.A_zimbraFeatureImportFolderEnabled,ZaCos.A_zimbraFeatureExportFolderEnabled,ZaCos.A_zimbraDumpsterEnabled,ZaCos.A_zimbraDumpsterPurgeEnabled,ZaCos.A_zimbraFeatureDocumentEditingEnabled]]],items:[{ref:ZaCos.A_zimbraFeatureTaggingEnabled,type:_CHECKBOX_,msgName:ZaMsg.LBL_zimbraFeatureTaggingEnabled,label:ZaMsg.LBL_zimbraFeatureTaggingEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaCos.A_zimbraFeatureSharingEnabled,type:_CHECKBOX_,msgName:ZaMsg.LBL_zimbraFeatureSharingEnabled,label:ZaMsg.LBL_zimbraFeatureSharingEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaCos.A_zimbraExternalSharingEnabled,type:_CHECKBOX_,msgName:ZaMsg.LBL_zimbraExternalSharingEnabled,label:ZaMsg.LBL_zimbraExternalSharingEnabled,trueValue:"TRUE",falseValue:"FALSE",visibilityChecks:[[ZaItem.hasReadPermission],[XForm.checkInstanceValue,ZaCos.A_zimbraFeatureSharingEnabled,"TRUE"]],visibilityChangeEventSources:[ZaCos.A_zimbraFeatureSharingEnabled]},{ref:ZaCos.A_zimbraPublicSharingEnabled,type:_CHECKBOX_,msgName:ZaMsg.LBL_zimbraPublicSharingEnabled,label:ZaMsg.LBL_zimbraPublicSharingEnabled,trueValue:"TRUE",falseValue:"FALSE",visibilityChecks:[[ZaItem.hasReadPermission],[XForm.checkInstanceValue,ZaCos.A_zimbraFeatureSharingEnabled,"TRUE"]],visibilityChangeEventSources:[ZaCos.A_zimbraFeatureSharingEnabled]},{ref:ZaCos.A_zimbraFeatureChangePasswordEnabled,type:_CHECKBOX_,msgName:ZaMsg.LBL_zimbraFeatureChangePasswordEnabled,label:ZaMsg.LBL_zimbraFeatureChangePasswordEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaCos.A_zimbraFeatureSkinChangeEnabled,type:_CHECKBOX_,msgName:ZaMsg.LBL_zimbraFeatureSkinChangeEnabled,label:ZaMsg.LBL_zimbraFeatureSkinChangeEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaCos.A_zimbraFeatureManageZimlets,type:_CHECKBOX_,msgName:ZaMsg.LBL_zimbraFeatureManageZimlets,label:ZaMsg.LBL_zimbraFeatureManageZimlets,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaCos.A_zimbraFeatureHtmlComposeEnabled,type:_CHECKBOX_,msgName:ZaMsg.LBL_zimbraFeatureHtmlComposeEnabled,label:ZaMsg.LBL_zimbraFeatureHtmlComposeEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaCos.A_zimbraFeatureGalEnabled,type:_CHECKBOX_,msgName:ZaMsg.LBL_zimbraFeatureGalEnabled,label:ZaMsg.LBL_zimbraFeatureGalEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaCos.A_zimbraFeatureMAPIConnectorEnabled,type:_CHECKBOX_,msgName:ZaMsg.LBL_zimbraFeatureMAPIConnectorEnabled,label:ZaMsg.LBL_zimbraFeatureMAPIConnectorEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaCos.A_zimbraFeatureEwsEnabled,type:_CHECKBOX_,msgName:ZaMsg.MSG_zimbraFeatureEwsEnabled,label:ZaMsg.LBL_zimbraFeatureEwsEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaCos.A_zimbraFeatureTouchClientEnabled,type:_CHECKBOX_,msgName:ZaMsg.MSG_zimbraFeatureTouchClientEnabled,label:ZaMsg.LBL_zimbraFeatureTouchClientEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaCos.A_zimbraFeatureWebClientOfflineAccessEnabled,type:_CHECKBOX_,msgName:ZaMsg.MSG_zimbraFeatureWebClientOfflineAccessEnabled,label:ZaMsg.LBL_zimbraFeatureWebClientOfflineAccessEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaCos.A_zimbraFeatureGalAutoCompleteEnabled,type:_CHECKBOX_,msgName:ZaMsg.LBL_zimbraFeatureGalAutoCompleteEnabled,label:ZaMsg.LBL_zimbraFeatureGalAutoCompleteEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaCos.A_zimbraFeatureImportFolderEnabled,type:_CHECKBOX_,msgName:ZaMsg.LBL_zimbraFeatureImportFolderEnabled,label:ZaMsg.LBL_zimbraFeatureImportFolderEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaCos.A_zimbraFeatureExportFolderEnabled,type:_CHECKBOX_,msgName:ZaMsg.LBL_zimbraFeatureExportFolderEnabled,label:ZaMsg.LBL_zimbraFeatureExportFolderEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaCos.A_zimbraDumpsterEnabled,type:_CHECKBOX_,msgName:ZaMsg.MSG_zimbraDumpsterEnabled,label:ZaMsg.LBL_zimbraDumpsterEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaCos.A_zimbraDumpsterPurgeEnabled,type:_CHECKBOX_,msgName:ZaMsg.MSG_zimbraDumpsterPurgeEnabled,label:ZaMsg.LBL_zimbraDumpsterPurgeEnabled,trueValue:"TRUE",falseValue:"FALSE",visibilityChecks:[[ZaItem.hasReadPermission],[XForm.checkInstanceValue,ZaCos.A_zimbraDumpsterEnabled,"TRUE"]],visibilityChangeEventSources:[ZaCos.A_zimbraDumpsterEnabled]},{ref:ZaCos.A_zimbraFeatureDocumentEditingEnabled,type:_CHECKBOX_,msgName:ZaMsg.LBL_zimbraFeatureDocumentEditingEnabled,label:ZaMsg.LBL_zimbraFeatureDocumentEditingEnabled,trueValue:"TRUE",falseValue:"FALSE"}]},{type:_ZA_TOP_GROUPER_,label:ZaMsg.NAD_zimbraMailFeature,id:"cos_form_features_mail",enableDisableChecks:[ZaCosXFormView.isMailFeatureEnabled],enableDisableChangeEventSources:[ZaCos.A_zimbraFeatureMailEnabled],visibilityChecks:[[ZATopGrouper_XFormItem.isGroupVisible,[ZaCos.A_zimbraFeatureMailPriorityEnabled,ZaCos.A_zimbraFeatureFlaggingEnabled,ZaCos.A_zimbraImapEnabled,ZaCos.A_zimbraPop3Enabled,ZaCos.A_zimbraFeatureWebClientEnabled,ZaCos.A_zimbraFeatureImapDataSourceEnabled,ZaCos.A_zimbraFeaturePop3DataSourceEnabled,ZaCos.A_zimbraFeatureMailForwardingEnabled,ZaCos.A_zimbraFeatureMailSendLaterEnabled,ZaCos.A_zimbraFeatureConversationsEnabled,ZaCos.A_zimbraFeatureFiltersEnabled,ZaCos.A_zimbraFeatureOutOfOfficeReplyEnabled,ZaCos.A_zimbraFeatureNewMailNotificationEnabled,ZaCos.A_zimbraFeatureIdentitiesEnabled,ZaCos.A_zimbraFeatureReadReceiptsEnabled]]],items:[{ref:ZaCos.A_zimbraFeatureMailPriorityEnabled,type:_CHECKBOX_,msgName:ZaMsg.LBL_zimbraFeatureMailPriorityEnabled,label:ZaMsg.LBL_zimbraFeatureMailPriorityEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaCos.A_zimbraFeatureFlaggingEnabled,type:_CHECKBOX_,msgName:ZaMsg.LBL_zimbraFeatureFlaggingEnabled,label:ZaMsg.LBL_zimbraFeatureFlaggingEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaCos.A_zimbraImapEnabled,type:_CHECKBOX_,msgName:ZaMsg.LBL_zimbraImapEnabled,label:ZaMsg.LBL_zimbraImapEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaCos.A_zimbraPop3Enabled,type:_CHECKBOX_,msgName:ZaMsg.LBL_zimbraPop3Enabled,label:ZaMsg.LBL_zimbraPop3Enabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaCos.A_zimbraFeatureWebClientEnabled,type:_CHECKBOX_,msgName:ZaMsg.LBL_zimbraFeatureWebClientEnabled,label:ZaMsg.LBL_zimbraFeatureWebClientEnabled,trueValue:"TRUE",falseValue:"FALSE",visibilityChecks:[function(){return ZaCosXFormView.isAttributeDefined.call(this,ZaCos.A_zimbraFeatureWebClientEnabled)
}]},{ref:ZaCos.A_zimbraFeatureImapDataSourceEnabled,type:_CHECKBOX_,msgName:ZaMsg.LBL_zimbraExternalImapEnabled,label:ZaMsg.LBL_zimbraExternalImapEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaCos.A_zimbraFeaturePop3DataSourceEnabled,type:_CHECKBOX_,msgName:ZaMsg.LBL_zimbraExternalPop3Enabled,label:ZaMsg.LBL_zimbraExternalPop3Enabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaCos.A_zimbraFeatureMailForwardingEnabled,type:_CHECKBOX_,msgName:ZaMsg.LBL_zimbraFeatureMailForwardingEnabled,label:ZaMsg.LBL_zimbraFeatureMailForwardingEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaCos.A_zimbraFeatureMailSendLaterEnabled,type:_CHECKBOX_,msgName:ZaMsg.LBL_zimbraFeatureMailSendLaterEnabled,label:ZaMsg.LBL_zimbraFeatureMailSendLaterEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaCos.A_zimbraFeatureConversationsEnabled,type:_CHECKBOX_,msgName:ZaMsg.LBL_zimbraFeatureConversationsEnabled,label:ZaMsg.LBL_zimbraFeatureConversationsEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaCos.A_zimbraFeatureFiltersEnabled,type:_CHECKBOX_,msgName:ZaMsg.LBL_zimbraFeatureFiltersEnabled,label:ZaMsg.LBL_zimbraFeatureFiltersEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaCos.A_zimbraFeatureOutOfOfficeReplyEnabled,type:_CHECKBOX_,msgName:ZaMsg.LBL_zimbraFeatureOutOfOfficeReplyEnabled,label:ZaMsg.LBL_zimbraFeatureOutOfOfficeReplyEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaCos.A_zimbraFeatureNewMailNotificationEnabled,type:_CHECKBOX_,msgName:ZaMsg.LBL_zimbraFeatureNewMailNotificationEnabled,label:ZaMsg.LBL_zimbraFeatureNewMailNotificationEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaCos.A_zimbraFeatureIdentitiesEnabled,type:_CHECKBOX_,msgName:ZaMsg.LBL_zimbraFeatureIdentitiesEnabled,label:ZaMsg.LBL_zimbraFeatureIdentitiesEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaCos.A_zimbraFeatureReadReceiptsEnabled,type:_CHECKBOX_,label:ZaMsg.LBL_zimbraFeatureReadReceiptsEnabled,trueValue:"TRUE",falseValue:"FALSE"}]},{type:_ZA_TOP_GROUPER_,label:ZaMsg.NAD_zimbraContactFeature,id:"cos_form_features_contact",enableDisableChecks:[ZaCosXFormView.isContactsFeatureEnabled],enableDisableChangeEventSources:[ZaCos.A_zimbraFeatureContactsEnabled],visibilityChecks:[[ZATopGrouper_XFormItem.isGroupVisible,[ZaCos.A_zimbraFeatureDistributionListFolderEnabled]]],items:[{ref:ZaCos.A_zimbraFeatureDistributionListFolderEnabled,type:_CHECKBOX_,msgName:ZaMsg.MSG_zimbraFeatureDistributionListFolderEnabled,label:ZaMsg.LBL_zimbraFeatureDistributionListFolderEnabled,trueValue:"TRUE",falseValue:"FALSE"}]},{type:_ZA_TOP_GROUPER_,label:ZaMsg.NAD_zimbraCalendarFeature,id:"cos_form_features_calendar",enableDisableChecks:[ZaCosXFormView.isCalendarFeatureEnabled],enableDisableChangeEventSources:[ZaCos.A_zimbraFeatureCalendarEnabled],visibilityChecks:[[ZATopGrouper_XFormItem.isGroupVisible,[ZaCos.A_zimbraFeatureGroupCalendarEnabled,ZaCos.A_zimbraFeatureCalendarReminderDeviceEmailEnabled]]],items:[{ref:ZaCos.A_zimbraFeatureGroupCalendarEnabled,type:_CHECKBOX_,msgName:ZaMsg.LBL_zimbraFeatureGroupCalendarEnabled,label:ZaMsg.LBL_zimbraFeatureGroupCalendarEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaCos.A_zimbraFeatureCalendarReminderDeviceEmailEnabled,type:_CHECKBOX_,msgName:ZaMsg.LBL_zimbraFeatureCalendarReminderDeviceEmailEnabled,label:ZaMsg.LBL_zimbraFeatureCalendarReminderDeviceEmailEnabled,trueValue:"TRUE",falseValue:"FALSE"}]},{type:_ZA_TOP_GROUPER_,label:ZaMsg.NAD_zimbraSearchFeature,id:"cos_form_features_search",visibilityChecks:[[ZATopGrouper_XFormItem.isGroupVisible,[ZaCos.A_zimbraFeatureAdvancedSearchEnabled,ZaCos.A_zimbraFeatureSavedSearchesEnabled,ZaCos.A_zimbraFeatureInitialSearchPreferenceEnabled,ZaCos.A_zimbraFeaturePeopleSearchEnabled]]],items:[{ref:ZaCos.A_zimbraFeatureAdvancedSearchEnabled,type:_CHECKBOX_,msgName:ZaMsg.LBL_zimbraFeatureAdvancedSearchEnabled,label:ZaMsg.LBL_zimbraFeatureAdvancedSearchEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaCos.A_zimbraFeatureSavedSearchesEnabled,type:_CHECKBOX_,msgName:ZaMsg.LBL_zimbraFeatureSavedSearchesEnabled,label:ZaMsg.LBL_zimbraFeatureSavedSearchesEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaCos.A_zimbraFeatureInitialSearchPreferenceEnabled,type:_CHECKBOX_,msgName:ZaMsg.LBL_zimbraFeatureInitialSearchPreferenceEnabled,label:ZaMsg.LBL_zimbraFeatureInitialSearchPreferenceEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaCos.A_zimbraFeaturePeopleSearchEnabled,type:_CHECKBOX_,msgName:ZaMsg.LBL_zimbraFeaturePeopleSearchEnabled,label:ZaMsg.LBL_zimbraFeaturePeopleSearchEnabled,trueValue:"TRUE",falseValue:"FALSE"}]},{type:_ZA_TOP_GROUPER_,label:ZaMsg.NAD_zimbraSMIMEFeature,id:"cos_form_features_smime",visibilityChecks:[[ZATopGrouper_XFormItem.isGroupVisible,[ZaCos.A_zimbraFeatureSMIMEEnabled]]],items:[{ref:ZaCos.A_zimbraFeatureSMIMEEnabled,type:_CHECKBOX_,msgName:ZaMsg.LBL_zimbraFeatureSMIMEEnabled,label:ZaMsg.LBL_zimbraFeatureSMIMEEnabled,trueValue:"TRUE",falseValue:"FALSE"}]}];
s.items=y;
c.push(s)
}if(E){var r={type:_ZATABCASE_,caseKey:E,id:"cos_for_prefs_tab",paddingStyle:"padding-left:15px;",width:"98%",cellpadding:2,numCols:1};
var H=[{type:_ZA_TOP_GROUPER_,id:"account_prefs_general",colSizes:["275px","auto"],numCols:2,label:ZaMsg.NAD_GeneralOptions,visibilityChecks:[[ZATopGrouper_XFormItem.isGroupVisible,[ZaCos.A_zimbraPrefClientType,ZaCos.A_zimbraPrefShowSearchString,ZaCos.A_zimbraPrefMailInitialSearch,ZaCos.A_zimbraPrefImapSearchFoldersEnabled,ZaCos.A_zimbraPrefUseKeyboardShortcuts,ZaCos.A_zimbraPrefWarnOnExit,ZaCos.A_zimbraPrefAdminConsoleWarnOnExit,ZaCos.A_zimbraPrefShowSelectionCheckbox,ZaCos.A_zimbraJunkMessagesIndexingEnabled,ZaCos.A_zimbraPrefLocale]]],items:[{ref:ZaCos.A_zimbraPrefClientType,type:_OSELECT1_,msgName:ZaMsg.MSG_zimbraPrefClientType,label:ZaMsg.LBL_zimbraPrefClientType,labelLocation:_LEFT_},{ref:ZaCos.A_zimbraPrefShowSearchString,type:_CHECKBOX_,msgName:ZaMsg.LBL_zimbraPrefShowSearchString,label:ZaMsg.LBL_zimbraPrefShowSearchString,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaCos.A_zimbraPrefMailInitialSearch,type:_TEXTFIELD_,cssClass:"admin_xform_name_input",msgName:ZaMsg.LBL_zimbraPrefMailInitialSearch,label:ZaMsg.LBL_zimbraPrefMailInitialSearch,labelLocation:_LEFT_},{ref:ZaCos.A_zimbraPrefImapSearchFoldersEnabled,type:_CHECKBOX_,msgName:ZaMsg.LBL_zimbraPrefImapSearchFoldersEnabled,label:ZaMsg.LBL_zimbraPrefImapSearchFoldersEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaCos.A_zimbraPrefUseKeyboardShortcuts,type:_CHECKBOX_,msgName:ZaMsg.LBL_zimbraPrefUseKeyboardShortcuts,label:ZaMsg.LBL_zimbraPrefUseKeyboardShortcuts,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaCos.A_zimbraPrefWarnOnExit,type:_CHECKBOX_,msgName:ZaMsg.LBL_zimbraPrefWarnOnExit,label:ZaMsg.LBL_zimbraPrefWarnOnExit,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaCos.A_zimbraPrefAdminConsoleWarnOnExit,type:_CHECKBOX_,msgName:ZabMsg.LBL_zimbraPrefAdminConsoleWarnOnExit,label:ZabMsg.LBL_zimbraPrefAdminConsoleWarnOnExit,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaCos.A_zimbraPrefShowSelectionCheckbox,type:_CHECKBOX_,msgName:ZaMsg.LBL_zimbraPrefShowSelectionCheckbox,label:ZaMsg.LBL_zimbraPrefShowSelectionCheckbox,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaCos.A_zimbraJunkMessagesIndexingEnabled,type:_CHECKBOX_,msgName:ZaMsg.LBL_zimbraJunkMessagesIndexingEnabled,label:ZaMsg.LBL_zimbraJunkMessagesIndexingEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaCos.A_zimbraPrefLocale,type:_OSELECT1_,msgName:ZaMsg.LBL_zimbraPrefLocale,label:ZaMsg.LBL_zimbraPrefLocale,labelLocation:_LEFT_,labelCssStyle:"white-space:normal;",nowrap:false,labelWrap:true,choices:ZaSettings.getLocaleChoices()}]},{type:_ZA_TOP_GROUPER_,id:"cos_prefs_standard_client",label:ZaMsg.NAD_MailOptionsStandardClient,colSizes:["275px","auto"],numCols:2,visibilityChecks:[[ZATopGrouper_XFormItem.isGroupVisible,[ZaCos.A_zimbraMaxMailItemsPerPage,ZaCos.A_zimbraPrefMailItemsPerPage]]],items:[{ref:ZaCos.A_zimbraMaxMailItemsPerPage,type:_OSELECT1_,msgName:ZaMsg.MSG_zimbraMaxMailItemsPerPage,label:ZaMsg.LBL_zimbraMaxMailItemsPerPage,labelLocation:_LEFT_,choices:[10,25,50,100,250,500,1000],editable:true,inputSize:4},{ref:ZaCos.A_zimbraPrefMailItemsPerPage,type:_OSELECT1_,msgName:ZaMsg.MSG_zimbraPrefMailItemsPerPage,label:ZaMsg.LBL_zimbraPrefMailItemsPerPage,labelLocation:_LEFT_}]},{type:_ZA_TOP_GROUPER_,id:"cos_prefs_mail_general",colSizes:["275px","auto"],numCols:2,label:ZaMsg.NAD_MailOptions,visibilityChecks:[[ZATopGrouper_XFormItem.isGroupVisible,[ZaCos.A_zimbraPrefMessageViewHtmlPreferred,ZaCos.A_zimbraPrefDisplayExternalImages,ZaCos.A_zimbraPrefGroupMailBy,ZaCos.A_zimbraPrefMailDefaultCharset,ZaCos.A_zimbraPrefCalendarToasterEnabled,ZaCos.A_zimbraPrefItemsPerVirtualPage]]],items:[{ref:ZaCos.A_zimbraPrefMessageViewHtmlPreferred,type:_CHECKBOX_,msgName:ZaMsg.LBL_zimbraPrefMessageViewHtmlPreferred,label:ZaMsg.LBL_zimbraPrefMessageViewHtmlPreferred,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaCos.A_zimbraPrefDisplayExternalImages,type:_CHECKBOX_,msgName:ZaMsg.LBL_zimbraPrefDisplayExternalImages,label:ZaMsg.LBL_zimbraPrefDisplayExternalImages,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaCos.A_zimbraPrefGroupMailBy,type:_OSELECT1_,msgName:ZaMsg.LBL_zimbraPrefGroupMailBy,label:ZaMsg.LBL_zimbraPrefGroupMailBy,labelLocation:_LEFT_},{ref:ZaCos.A_zimbraPrefMailDefaultCharset,type:_OSELECT1_,msgName:ZaMsg.LBL_zimbraPrefMailDefaultCharset,label:ZaMsg.LBL_zimbraPrefMailDefaultCharset,labelLocation:_LEFT_,labelCssStyle:"white-space:normal;",nowrap:false,labelWrap:true},{ref:ZaCos.A_zimbraPrefMailToasterEnabled,type:_CHECKBOX_,msgName:ZaMsg.LBL_zimbraPrefMailToasterEnabled,label:ZaMsg.LBL_zimbraPrefMailToasterEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaCos.A_zimbraPrefMessageIdDedupingEnabled,type:_CHECKBOX_,msgName:ZaMsg.LBL_zimbraPrefMessageIdDedupingEnabled,label:ZaMsg.LBL_zimbraPrefMessageIdDedupingEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaCos.A_zimbraPrefItemsPerVirtualPage,type:_TEXTFIELD_,msgName:ZaMsg.LBL_zimbraPrefItemsPerVirtualPage,label:ZaMsg.LBL_zimbraPrefItemsPerVirtualPage,labelLocation:_LEFT_}]},{type:_ZA_TOP_GROUPER_,id:"cos_prefs_mail_receiving",label:ZaMsg.NAD_MailOptionsReceiving,visibilityChecks:[[ZATopGrouper_XFormItem.isGroupVisible,[ZaCos.A_zimbraPrefMailSoundsEnabled,ZaCos.A_zimbraPrefMailFlashIcon,ZaCos.A_zimbraPrefMailFlashTitle,ZaCos.A_zimbraPrefMailPollingInterval,ZaCos.A_zimbraMailMinPollingInterval,ZaCos.A_zimbraPrefOutOfOfficeCacheDuration,ZaCos.A_zimbraPrefMailSendReadReceipts]]],items:[{ref:ZaCos.A_zimbraPrefMailSoundsEnabled,type:_CHECKBOX_,msgName:ZaMsg.LBL_playSound,label:ZaMsg.LBL_playSound,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaCos.A_zimbraPrefMailFlashIcon,type:_CHECKBOX_,msgName:ZaMsg.LBL_flashIcon,label:ZaMsg.LBL_flashIcon,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaCos.A_zimbraPrefMailFlashTitle,type:_CHECKBOX_,msgName:ZaMsg.LBL_flashTitle,label:ZaMsg.LBL_flashTitle,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaCos.A_zimbraPrefMailPollingInterval,type:_OSELECT1_,msgName:ZaMsg.MSG_zimbraPrefMailPollingInterval,label:ZaMsg.LBL_zimbraPrefMailPollingInterval,labelLocation:_LEFT_,onChange:ZaCosXFormView.validatePollingInterval,labelCssStyle:"white-space:normal;",nowrap:false,labelWrap:true},{ref:ZaCos.A_zimbraMailMinPollingInterval,type:_LIFETIME_,msgName:ZaMsg.MSG_zimbraMailMinPollingInterval,label:ZaMsg.LBL_zimbraMailMinPollingInterval,labelLocation:_LEFT_,onChange:ZaCosXFormView.validatePollingInterval,labelCssStyle:"white-space:normal;",nowrap:false,labelWrap:true},{ref:ZaCos.A_zimbraPrefOutOfOfficeCacheDuration,type:_LIFETIME_,msgName:ZaMsg.MSG_zimbraPrefOutOfOfficeCacheDuration,label:ZaMsg.LBL_zimbraPrefOutOfOfficeCacheDuration,labelLocation:_LEFT_,labelCssStyle:"white-space:normal;",nowrap:false,labelWrap:true},{ref:ZaCos.A_zimbraPrefMailSendReadReceipts,type:_OSELECT1_,label:ZaMsg.LBL_zimbraPrefMailSendReadReceipts,labelLocation:_LEFT_,nowrap:false,labelWrap:true}]},{type:_ZA_TOP_GROUPER_,id:"cos_prefs_mail_sending",borderCssClass:"LowPaddedTopGrouperBorder",label:ZaMsg.NAD_MailOptionsSending,visibilityChecks:[[ZATopGrouper_XFormItem.isGroupVisible,[ZaCos.A_zimbraPrefSaveToSent,ZaCos.A_zimbraAllowAnyFromAddress]]],items:[{ref:ZaCos.A_zimbraPrefSaveToSent,type:_CHECKBOX_,msgName:ZaMsg.LBL_zimbraPrefSaveToSent,label:ZaMsg.LBL_zimbraPrefSaveToSent,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaCos.A_zimbraAllowAnyFromAddress,type:_CHECKBOX_,msgName:ZaMsg.LBL_zimbraAllowAnyFromAddress,label:ZaMsg.LBL_zimbraAllowAnyFromAddress,trueValue:"TRUE",falseValue:"FALSE"}]},{type:_ZA_TOP_GROUPER_,id:"cos_prefs_mail_sending",borderCssClass:"LowPaddedTopGrouperBorder",label:ZaMsg.NAD_MailOptionsComposing,visibilityChecks:[[ZATopGrouper_XFormItem.isGroupVisible,[ZaCos.A_zimbraPrefComposeInNewWindow,ZaCos.A_zimbraPrefComposeFormat,ZaCos.A_zimbraPrefHtmlEditorDefaultFontFamily,ZaCos.A_zimbraPrefHtmlEditorDefaultFontSize,ZaCos.A_zimbraPrefHtmlEditorDefaultFontColor,ZaCos.A_zimbraPrefForwardReplyInOriginalFormat,ZaCos.A_zimbraPrefMandatorySpellCheckEnabled,ZaCos.A_zimbraMailSignatureMaxLength,ZaCos.A_zimbraPrefAutoSaveDraftInterval]]],items:[{ref:ZaCos.A_zimbraPrefComposeInNewWindow,type:_CHECKBOX_,msgName:ZaMsg.LBL_zimbraPrefComposeInNewWindow,label:ZaMsg.LBL_zimbraPrefComposeInNewWindow,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaCos.A_zimbraPrefComposeFormat,type:_OSELECT1_,msgName:ZaMsg.LBL_zimbraPrefComposeFormat,label:ZaMsg.LBL_zimbraPrefComposeFormat,labelLocation:_LEFT_},{ref:ZaCos.A_zimbraPrefHtmlEditorDefaultFontFamily,type:_OSELECT1_,msgName:ZaMsg.LBL_zimbraPrefHtmlEditorDefaultFontFamily,label:ZaMsg.LBL_zimbraPrefHtmlEditorDefaultFontFamily,labelLocation:_LEFT_},{ref:ZaCos.A_zimbraPrefHtmlEditorDefaultFontSize,type:_OSELECT1_,msgName:ZaMsg.LBL_zimbraPrefHtmlEditorDefaultFontSize,label:ZaMsg.LBL_zimbraPrefHtmlEditorDefaultFontSize,labelLocation:_LEFT_},{ref:ZaCos.A_zimbraPrefHtmlEditorDefaultFontColor,type:_DWT_COLORPICKER_,msgName:ZaMsg.LBL_zimbraPrefHtmlEditorDefaultFontColor,height:"25px",label:ZaMsg.LBL_zimbraPrefHtmlEditorDefaultFontColor,labelLocation:_LEFT_},{ref:ZaCos.A_zimbraPrefForwardReplyInOriginalFormat,type:_CHECKBOX_,msgName:ZaMsg.LBL_zimbraPrefForwardReplyInOriginalFormat,label:ZaMsg.LBL_zimbraPrefForwardReplyInOriginalFormat,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaCos.A_zimbraPrefMandatorySpellCheckEnabled,type:_CHECKBOX_,msgName:ZaMsg.LBL_zimbraPrefMandatorySpellCheckEnabled,label:ZaMsg.LBL_zimbraPrefMandatorySpellCheckEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaCos.A_zimbraMailSignatureMaxLength,type:_TEXTFIELD_,msgName:ZaMsg.LBL_zimbraMailSignatureMaxLength,label:ZaMsg.LBL_zimbraMailSignatureMaxLength,labelLocation:_LEFT_,cssClass:"admin_xform_number_input"},{ref:ZaCos.A_zimbraPrefAutoSaveDraftInterval,type:_LIFETIME_,msgName:ZaMsg.MSG_zimbraPrefAutoSaveDraftInterval,label:ZaMsg.LBL_zimbraPrefAutoSaveDraftInterval,labelLocation:_LEFT_,onChange:ZaCosXFormView.validatePollingInterval,labelCssStyle:"white-space:normal;",nowrap:false,labelWrap:true}]},{type:_ZA_TOP_GROUPER_,id:"cos_prefs_pop_imap",colSizes:["275px","auto"],numCols:2,label:ZaMsg.NAD_PopImapOptions,visibilityChecks:[function(){return(ZaCosXFormView.isAttributeDefined.call(this,ZaCos.A_zimbraPrefImapEnabled)||ZaCosXFormView.isAttributeDefined.call(this,ZaCos.A_zimbraPrefPop3Enabled))
}],items:[{ref:ZaCos.A_zimbraPrefImapEnabled,type:_CHECKBOX_,msgName:ZaMsg.LBL_zimbraPrefImapEnabled,label:ZaMsg.LBL_zimbraPrefImapEnabled,trueValue:"TRUE",falseValue:"FALSE",visibilityChecks:[function(){return ZaCosXFormView.isAttributeDefined.call(this,ZaCos.A_zimbraPrefImapEnabled)
}]},{ref:ZaCos.A_zimbraPrefPop3Enabled,type:_CHECKBOX_,msgName:ZaMsg.LBL_zimbraPrefPop3Enabled,label:ZaMsg.LBL_zimbraPrefPop3Enabled,trueValue:"TRUE",falseValue:"FALSE",visibilityChecks:[function(){return ZaCosXFormView.isAttributeDefined.call(this,ZaCos.A_zimbraPrefPop3Enabled)
}]}]},{type:_ZA_TOP_GROUPER_,id:"cos_prefs_contacts_general",colSizes:["275px","auto"],numCols:2,label:ZaMsg.NAD_ContactsOptions,visibilityChecks:[[ZATopGrouper_XFormItem.isGroupVisible,[ZaCos.A_zimbraPrefAutoAddAddressEnabled,ZaCos.A_zimbraPrefGalAutoCompleteEnabled]]],items:[{ref:ZaCos.A_zimbraPrefAutoAddAddressEnabled,type:_CHECKBOX_,msgName:ZaMsg.LBL_zimbraPrefAutoAddAddressEnabled,label:ZaMsg.LBL_zimbraPrefAutoAddAddressEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaCos.A_zimbraPrefGalAutoCompleteEnabled,type:_CHECKBOX_,msgName:ZaMsg.LBL_zimbraPrefGalAutoCompleteEnabled,label:ZaMsg.LBL_zimbraPrefGalAutoCompleteEnabled,trueValue:"TRUE",falseValue:"FALSE"}]},{type:_ZA_TOP_GROUPER_,id:"cos_prefs_calendar_general",colSizes:["275px","auto"],numCols:2,label:ZaMsg.NAD_CalendarOptions,visibilityChecks:[[ZATopGrouper_XFormItem.isGroupVisible,[ZaCos.A_zimbraPrefTimeZoneId,ZaCos.A_zimbraPrefCalendarApptReminderWarningTime,ZaCos.A_zimbraPrefCalendarInitialView,ZaCos.A_zimbraPrefCalendarFirstDayOfWeek,ZaCos.A_zimbraPrefCalendarApptVisibility,ZaCos.A_zimbraPrefAppleIcalDelegationEnabled,ZaCos.A_zimbraPrefCalendarShowPastDueReminders,ZaCos.A_zimbraPrefCalendarToasterEnabled,ZaCos.A_zimbraPrefCalendarAllowCancelEmailToSelf,ZaCos.A_zimbraPrefCalendarAllowPublishMethodInvite,ZaCos.A_zimbraPrefCalendarAllowForwardedInvite,ZaCos.A_zimbraPrefCalendarReminderFlashTitle,ZaCos.A_zimbraPrefCalendarReminderSoundsEnabled,ZaCos.A_zimbraPrefCalendarSendInviteDeniedAutoReply,ZaCos.A_zimbraPrefCalendarAutoAddInvites,ZaCos.A_zimbraPrefCalendarNotifyDelegatedChanges,ZaCos.A_zimbraPrefCalendarAlwaysShowMiniCal,ZaCos.A_zimbraPrefCalendarUseQuickAdd,ZaCos.A_zimbraPrefUseTimeZoneListInCalendar]]],items:[{ref:ZaCos.A_zimbraPrefTimeZoneId,type:_OSELECT1_,msgName:ZaMsg.MSG_zimbraPrefTimeZoneId,label:ZaMsg.LBL_zimbraPrefTimeZoneId,labelLocation:_LEFT_,labelCssStyle:"white-space:normal;",nowrap:false,labelWrap:true},{ref:ZaCos.A_zimbraPrefCalendarApptReminderWarningTime,type:_OSELECT1_,msgName:ZaMsg.MSG_zimbraPrefCalendarApptReminderWarningTime,label:ZaMsg.LBL_zimbraPrefCalendarApptReminderWarningTime,labelLocation:_LEFT_,labelCssStyle:"white-space:normal;",nowrap:false,labelWrap:true},{ref:ZaCos.A_zimbraPrefCalendarInitialView,type:_OSELECT1_,msgName:ZaMsg.MSG_zimbraPrefCalendarInitialView,label:ZaMsg.LBL_zimbraPrefCalendarInitialView,labelLocation:_LEFT_},{ref:ZaCos.A_zimbraPrefCalendarFirstDayOfWeek,type:_OSELECT1_,msgName:ZaMsg.LBL_zimbraPrefCalendarFirstDayOfWeek,label:ZaMsg.LBL_zimbraPrefCalendarFirstDayOfWeek,labelLocation:_LEFT_,labelCssStyle:"white-space:normal;",nowrap:false,labelWrap:true},{ref:ZaCos.A_zimbraPrefCalendarApptVisibility,type:_OSELECT1_,msgName:ZaMsg.LBL_zimbraPrefCalendarApptVisibility,label:ZaMsg.LBL_zimbraPrefCalendarApptVisibility,labelLocation:_LEFT_,labelCssStyle:"white-space:normal;",nowrap:false,labelWrap:true},{ref:ZaCos.A_zimbraPrefAppleIcalDelegationEnabled,type:_CHECKBOX_,msgName:ZaMsg.MSG_zimbraPrefAppleIcalDelegationEnabled,label:ZaMsg.LBL_zimbraPrefAppleIcalDelegationEnabled,trueValue:"TRUE",falseValue:"FALSE",labelCssStyle:"white-space:normal;",nowrap:false,labelWrap:true},{ref:ZaCos.A_zimbraPrefCalendarShowPastDueReminders,type:_CHECKBOX_,msgName:ZaMsg.MSG_zimbraPrefCalendarShowPastDueReminders,label:ZaMsg.LBL_zimbraPrefCalendarShowPastDueReminders,trueValue:"TRUE",falseValue:"FALSE",labelCssStyle:"white-space:normal;",nowrap:false,labelWrap:true},{ref:ZaCos.A_zimbraPrefCalendarToasterEnabled,type:_CHECKBOX_,msgName:ZaMsg.MSG_zimbraPrefCalendarToasterEnabled,label:ZaMsg.LBL_zimbraPrefCalendarToasterEnabled,trueValue:"TRUE",falseValue:"FALSE",labelCssStyle:"white-space:normal;",nowrap:false,labelWrap:true},{ref:ZaCos.A_zimbraPrefCalendarAllowCancelEmailToSelf,type:_CHECKBOX_,msgName:ZaMsg.MSG_zimbraPrefCalendarAllowCancelEmailToSelf,label:ZaMsg.LBL_zimbraPrefCalendarAllowCancelEmailToSelf,trueValue:"TRUE",falseValue:"FALSE",labelCssStyle:"white-space:normal;",nowrap:false,labelWrap:true},{ref:ZaCos.A_zimbraPrefCalendarAllowPublishMethodInvite,type:_CHECKBOX_,msgName:ZaMsg.MSG_zimbraPrefCalendarAllowPublishMethodInvite,label:ZaMsg.LBL_zimbraPrefCalendarAllowPublishMethodInvite,trueValue:"TRUE",falseValue:"FALSE",labelCssStyle:"white-space:normal;",nowrap:false,labelWrap:true},{ref:ZaCos.A_zimbraPrefCalendarAllowForwardedInvite,type:_CHECKBOX_,msgName:ZaMsg.MSG_zimbraPrefCalendarAllowForwardedInvite,label:ZaMsg.LBL_zimbraPrefCalendarAllowForwardedInvite,trueValue:"TRUE",falseValue:"FALSE",labelCssStyle:"white-space:normal;",nowrap:false,labelWrap:true},{ref:ZaCos.A_zimbraPrefCalendarReminderFlashTitle,type:_CHECKBOX_,msgName:ZaMsg.MSG_zimbraPrefCalendarReminderFlashTitle,label:ZaMsg.LBL_zimbraPrefCalendarReminderFlashTitle,trueValue:"TRUE",falseValue:"FALSE",labelCssStyle:"white-space:normal;",nowrap:false,labelWrap:true},{ref:ZaCos.A_zimbraPrefCalendarReminderSoundsEnabled,type:_CHECKBOX_,msgName:ZaMsg.MSG_zimbraPrefCalendarReminderSoundsEnabled,label:ZaMsg.LBL_zimbraPrefCalendarReminderSoundsEnabled,trueValue:"TRUE",falseValue:"FALSE",labelCssStyle:"white-space:normal;",nowrap:false,labelWrap:true},{ref:ZaCos.A_zimbraPrefCalendarSendInviteDeniedAutoReply,type:_CHECKBOX_,msgName:ZaMsg.MSG_zimbraPrefCalendarSendInviteDeniedAutoReply,label:ZaMsg.LBL_zimbraPrefCalendarSendInviteDeniedAutoReply,trueValue:"TRUE",falseValue:"FALSE",labelCssStyle:"white-space:normal;",nowrap:false,labelWrap:true},{ref:ZaCos.A_zimbraPrefCalendarAutoAddInvites,type:_CHECKBOX_,msgName:ZaMsg.LBL_zimbraPrefCalendarAutoAddInvites,label:ZaMsg.LBL_zimbraPrefCalendarAutoAddInvites,trueValue:"TRUE",falseValue:"FALSE",labelCssStyle:"white-space:normal;",nowrap:false,labelWrap:true},{ref:ZaCos.A_zimbraPrefCalendarNotifyDelegatedChanges,type:_CHECKBOX_,msgName:ZaMsg.LBL_zimbraPrefCalendarNotifyDelegatedChanges,label:ZaMsg.LBL_zimbraPrefCalendarNotifyDelegatedChanges,trueValue:"TRUE",falseValue:"FALSE",labelCssStyle:"white-space:normal;",nowrap:false,labelWrap:true},{ref:ZaCos.A_zimbraPrefCalendarAlwaysShowMiniCal,type:_CHECKBOX_,msgName:ZaMsg.LBL_zimbraPrefCalendarAlwaysShowMiniCal,label:ZaMsg.LBL_zimbraPrefCalendarAlwaysShowMiniCal,trueValue:"TRUE",falseValue:"FALSE",labelCssStyle:"white-space:normal;",nowrap:false,labelWrap:true},{ref:ZaCos.A_zimbraPrefCalendarUseQuickAdd,type:_CHECKBOX_,msgName:ZaMsg.NAD_useQuickAdd,label:ZaMsg.LBL_zimbraPrefCalendarUseQuickAdd,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaCos.A_zimbraPrefUseTimeZoneListInCalendar,type:_CHECKBOX_,msgName:ZaMsg.LBL_zimbraPrefUseTimeZoneListInCalendar,label:ZaMsg.LBL_zimbraPrefUseTimeZoneListInCalendar,trueValue:"TRUE",falseValue:"FALSE"}]}];
r.items=H;
c.push(r)
}if(D){var q={type:_ZATABCASE_,numCols:1,caseKey:D};
var b=[{type:_SPACER_},{type:_GROUP_,numCols:2,colSizes:["275px","auto"],items:[{type:_OSELECT1_,ref:ZaCos.A_zimbraPrefSkin,msgName:ZaMsg.LBL_zimbraPrefSkin,label:ZaMsg.LBL_zimbraPrefSkin,labelLocation:_LEFT_,choices:ZaCosXFormView.themeChoices,visibilityChecks:[ZaCosXFormView.gotSkins]}]},{type:_GROUP_,items:[{type:_OUTPUT_,ref:ZaCos.A_zimbraPrefSkin,label:ZaMsg.LBL_zimbraPrefSkin,labelLocation:_LEFT_,visibilityChecks:[ZaCosXFormView.gotNoSkins]}]},{type:_SPACER_},{type:_GROUP_,numCols:1,colSizes:["auto"],items:[{type:_ZASELECT_RADIO_,selectRef:ZaCos.A_zimbraAvailableSkin,ref:ZaCos.A_zimbraAvailableSkin,choices:ZaCosXFormView.themeChoices,visibilityChecks:[Case_XFormItem.prototype.isCurrentTab,ZaCosXFormView.gotSkins],visibilityChangeEventSources:[ZaModel.currentTab],caseKey:D,caseVarRef:ZaModel.currentTab,radioBoxLabel1:ZaMsg.COS_DontLimitThemes,radioBoxLabel2:ZaMsg.COS_LimitThemesTo},{type:_DWT_ALERT_,style:DwtAlert.WARNING,iconVisible:true,visibilityChecks:[ZaCosXFormView.gotNoSkins,ZaZimbraAdmin.isGlobalAdmin],value:ZaMsg.ERROR_CANNOT_FIND_SKINS_FOR_COS},{type:_DWT_ALERT_,style:DwtAlert.WARNING,iconVisible:true,visibilityChecks:[ZaCosXFormView.gotNoSkins,[function(){return !ZaZimbraAdmin.isGlobalAdmin()
}]],value:ZaMsg.ERROR_CANNOT_FIND_SKINS_FOR_COS_OR_NO_PERM}]}];
q.items=b;
c.push(q)
}if(C){var p={type:_ZATABCASE_,caseKey:C};
var f=[{type:_ZAGROUP_,numCols:1,colSizes:["auto"],border:0,items:[{type:_OUTPUT_,value:ZaMsg.COS_LimitZimletsTo},{type:_ZA_ZIMLET_SELECT_COMBO_,selectRef:ZaCos.A_zimbraZimletAvailableZimlets,ref:ZaCos.A_zimbraZimletAvailableZimlets,choices:ZaCosXFormView.zimletChoices,visibilityChecks:[Case_XFormItem.prototype.isCurrentTab],visibilityChangeEventSources:[ZaModel.currentTab],caseKey:C,caseVarRef:ZaModel.currentTab,selectLabel:"",selectLabelLocation:_NONE_},{type:_DWT_ALERT_,containerCssStyle:"padding-bottom:0;",style:DwtAlert.INFO,iconVisible:false,content:ZaMsg.Zimlet_Note}]}];
p.items=f;
c.push(p)
}if(B){var n={type:_ZATABCASE_,numCols:1,caseKey:B};
var h=[{type:_ZAGROUP_,numCols:1,colSizes:["auto"],border:0,items:[{type:_ZASELECT_RADIO_,selectRef:ZaCos.A_zimbraMailHostPool,ref:ZaCos.A_zimbraMailHostPool,choices:ZaApp.getInstance().getServerIdListChoices(),visibilityChecks:[Case_XFormItem.prototype.isCurrentTab],visibilityChangeEventSources:[ZaModel.currentTab],caseKey:B,caseVarRef:ZaModel.currentTab,radioBoxLabel1:ZaMsg.ServerPool_Donotlimit,radioBoxLabel2:ZaMsg.COS_LimitServersTo}]}];
n.items=h;
c.push(n)
}if(x){var k={type:_ZATABCASE_,numCols:1,colSizes:["auto"],caseKey:x,paddingStyle:"padding-left:15px;",width:"98%",cellpadding:2,id:"cos_form_advanced_tab"};
var o=[{type:_DWT_ALERT_,style:DwtAlert.INFO,iconVisible:false,content:ZaMsg.NAD_ZERO_UNLIMETED},{type:_ZA_TOP_GROUPER_,id:"cos_attachment_settings",label:ZaMsg.NAD_AttachmentsGrouper,visibilityChecks:[[ZATopGrouper_XFormItem.isGroupVisible,[ZaCos.A_zimbraAttachmentsBlocked]]],items:[{ref:ZaCos.A_zimbraAttachmentsBlocked,type:_CHECKBOX_,msgName:ZaMsg.NAD_RemoveAllAttachments,label:ZaMsg.NAD_RemoveAllAttachments,labelLocation:_LEFT_,trueValue:"TRUE",falseValue:"FALSE",labelCssClass:"xform_label",align:_LEFT_}]},{type:_ZA_TOP_GROUPER_,id:"cos_quota_settings",label:ZaMsg.NAD_QuotaGrouper,items:[{ref:ZaCos.A_zimbraMailForwardingAddressMaxLength,type:_TEXTFIELD_,msgName:ZaMsg.MSG_zimbraMailForwardingAddressMaxLength,label:ZaMsg.LBL_zimbraMailForwardingAddressMaxLength,labelLocation:_LEFT_,cssClass:"admin_xform_number_input"},{ref:ZaCos.A_zimbraMailForwardingAddressMaxNumAddrs,type:_TEXTFIELD_,msgName:ZaMsg.MSG_zimbraMailForwardingAddressMaxNumAddrs,label:ZaMsg.LBL_zimbraMailForwardingAddressMaxNumAddrs,labelLocation:_LEFT_,cssClass:"admin_xform_number_input"},{ref:ZaCos.A_zimbraMailQuota,type:_TEXTFIELD_,msgName:ZaMsg.MSG_zimbraMailQuota,label:ZaMsg.LBL_zimbraMailQuota,labelLocation:_LEFT_,cssClass:"admin_xform_number_input"},{ref:ZaCos.A_zimbraContactMaxNumEntries,type:_TEXTFIELD_,msgName:ZaMsg.MSG_zimbraContactMaxNumEntries,label:ZaMsg.LBL_zimbraContactMaxNumEntries,labelLocation:_LEFT_,cssClass:"admin_xform_number_input"},{ref:ZaCos.A_zimbraQuotaWarnPercent,type:_INPUT_,msgName:ZaMsg.MSG_zimbraQuotaWarnPercent,label:ZaMsg.LBL_zimbraQuotaWarnPercent,labelLocation:_LEFT_,cssClass:"admin_xform_number_input"},{ref:ZaCos.A_zimbraQuotaWarnInterval,type:_LIFETIME_,msgName:ZaMsg.MSG_zimbraQuotaWarnInterval,label:ZaMsg.LBL_zimbraQuotaWarnInterval,labelLocation:_LEFT_},{ref:ZaCos.A_zimbraQuotaWarnMessage,type:_TEXTAREA_,msgName:ZaMsg.MSG_zimbraQuotaWarnMessage,label:ZaMsg.LBL_zimbraQuotaWarnMessage,labelLocation:_LEFT_,labelCssStyle:"vertical-align:top;",width:"30em"}]},{type:_ZA_TOP_GROUPER_,id:"cos_datasourcepolling_settings",label:ZaMsg.NAD_DataSourcePolling,visibilityChecks:[[ZATopGrouper_XFormItem.isGroupVisible,[ZaCos.A_zimbraDataSourceMinPollingInterval,ZaCos.A_zimbraDataSourcePop3PollingInterval,ZaCos.A_zimbraDataSourceImapPollingInterval,ZaCos.A_zimbraDataSourceCalendarPollingInterval,ZaCos.A_zimbraDataSourceRssPollingInterval,ZaCos.A_zimbraDataSourceCaldavPollingInterval]]],items:[{ref:ZaCos.A_zimbraDataSourceMinPollingInterval,type:_LIFETIME_,msgName:ZaMsg.MSG_zimbraDataSourceMinPollingInterval,label:ZaMsg.LBL_zimbraDataSourceMinPollingInterval,labelLocation:_LEFT_,onChange:ZaCosXFormView.validatePollingInterval,labelCssStyle:"white-space:normal;",nowrap:false,labelWrap:true},{ref:ZaCos.A_zimbraDataSourcePop3PollingInterval,type:_LIFETIME_,msgName:ZaMsg.MSG_zimbraDataSourcePop3PollingInterval,label:ZaMsg.LBL_zimbraDataSourcePop3PollingInterval,labelLocation:_LEFT_,onChange:ZaCosXFormView.validatePollingInterval,labelCssStyle:"white-space:normal;",nowrap:false,labelWrap:true},{ref:ZaCos.A_zimbraDataSourceImapPollingInterval,type:_LIFETIME_,msgName:ZaMsg.MSG_zimbraDataSourceImapPollingInterval,label:ZaMsg.LBL_zimbraDataSourceImapPollingInterval,labelLocation:_LEFT_,onChange:ZaCosXFormView.validatePollingInterval,labelCssStyle:"white-space:normal;",nowrap:false,labelWrap:true},{ref:ZaCos.A_zimbraDataSourceCalendarPollingInterval,type:_LIFETIME_,msgName:ZaMsg.MSG_zimbraDataSourceCalendarPollingInterval,label:ZaMsg.LBL_zimbraDataSourceCalendarPollingInterval,labelLocation:_LEFT_,onChange:ZaCosXFormView.validatePollingInterval,labelCssStyle:"white-space:normal;",nowrap:false,labelWrap:true},{ref:ZaCos.A_zimbraDataSourceRssPollingInterval,type:_LIFETIME_,msgName:ZaMsg.MSG_zimbraDataSourceRssPollingInterval,label:ZaMsg.LBL_zimbraDataSourceRssPollingInterval,labelLocation:_LEFT_,onChange:ZaCosXFormView.validatePollingInterval,labelCssStyle:"white-space:normal;",nowrap:false,labelWrap:true},{ref:ZaCos.A_zimbraDataSourceCaldavPollingInterval,type:_LIFETIME_,msgName:ZaMsg.MSG_zimbraDataSourceCaldavPollingInterval,label:ZaMsg.LBL_zimbraDataSourceCaldavPollingInterval,labelLocation:_LEFT_,onChange:ZaCosXFormView.validatePollingInterval,labelCssStyle:"white-space:normal;",nowrap:false,labelWrap:true}]},{type:_ZA_TOP_GROUPER_,id:"cos_proxyalloweddomain_settings",label:ZaMsg.NAD_ProxyAllowedDomains,visibilityChecks:[[ZATopGrouper_XFormItem.isGroupVisible,[ZaCos.A_zimbraProxyAllowedDomains]]],items:[{ref:ZaCos.A_zimbraProxyAllowedDomains,msgName:ZaMsg.MSG_zimbraProxyAllowedDomains,label:ZaMsg.LBL_zimbraProxyAllowedDomains,labelLocation:_LEFT_,labelCssStyle:"vertical-align:top;",type:_REPEAT_,align:_LEFT_,repeatInstance:"",addButtonLabel:ZaMsg.NAD_ProxyAddAllowedDomain,removeButtonLabel:ZaMsg.NAD_ProxyRemoveAllowedDomain,showAddButton:true,showRemoveButton:true,showAddOnNextRow:true,items:[{ref:".",type:_TEXTFIELD_,enableDisableChecks:[],visibilityChecks:[],width:"15em"}]}]},{type:_ZA_TOP_GROUPER_,id:"cos_password_settings",label:ZaMsg.NAD_PasswordGrouper,items:[{type:_DWT_ALERT_,containerCssStyle:"padding-bottom:0;",style:DwtAlert.INFO,iconVisible:false,content:((ZaCosXFormView.isAllAuthfromInternal())?ZaMsg.Alert_InternalPassword:ZaMsg.Alert_ExternalPassword)},{ref:ZaCos.A_zimbraPasswordLocked,type:_CHECKBOX_,msgName:ZaMsg.NAD_PwdLocked,label:ZaMsg.NAD_PwdLocked,trueValue:"TRUE",falseValue:"FALSE",visibilityChecks:[],enableDisableChecks:[[ZaCosXFormView.isAllAuthfromInternal]]},{ref:ZaCos.A_zimbraMinPwdLength,type:_TEXTFIELD_,msgName:ZaMsg.MSG_zimbraMinPwdLength,label:ZaMsg.LBL_zimbraMinPwdLength,labelLocation:_LEFT_,cssClass:"admin_xform_number_input",visibilityChecks:[ZaItem.hasWritePermission],enableDisableChecks:[[ZaCosXFormView.isAllAuthfromInternal]]},{ref:ZaCos.A_zimbraMaxPwdLength,type:_TEXTFIELD_,msgName:ZaMsg.MSG_zimbraMaxPwdLength,label:ZaMsg.LBL_zimbraMaxPwdLength,labelLocation:_LEFT_,cssClass:"admin_xform_number_input",visibilityChecks:[ZaItem.hasWritePermission],enableDisableChecks:[[ZaCosXFormView.isAllAuthfromInternal]]},{ref:ZaCos.A_zimbraPasswordMinUpperCaseChars,type:_TEXTFIELD_,msgName:ZaMsg.MSG_zimbraPasswordMinUpperCaseChars,label:ZaMsg.LBL_zimbraPasswordMinUpperCaseChars,labelLocation:_LEFT_,cssClass:"admin_xform_number_input",visibilityChecks:[ZaItem.hasWritePermission],enableDisableChecks:[[ZaCosXFormView.isAllAuthfromInternal]]},{ref:ZaCos.A_zimbraPasswordMinLowerCaseChars,type:_TEXTFIELD_,msgName:ZaMsg.MSG_zimbraPasswordMinLowerCaseChars,label:ZaMsg.LBL_zimbraPasswordMinLowerCaseChars,labelLocation:_LEFT_,cssClass:"admin_xform_number_input",visibilityChecks:[ZaItem.hasWritePermission],enableDisableChecks:[[ZaCosXFormView.isAllAuthfromInternal]]},{ref:ZaCos.A_zimbraPasswordMinPunctuationChars,type:_TEXTFIELD_,msgName:ZaMsg.MSG_zimbraPasswordMinPunctuationChars,label:ZaMsg.LBL_zimbraPasswordMinPunctuationChars,labelLocation:_LEFT_,cssClass:"admin_xform_number_input",visibilityChecks:[ZaItem.hasWritePermission],enableDisableChecks:[[ZaCosXFormView.isAllAuthfromInternal]]},{ref:ZaCos.A_zimbraPasswordMinNumericChars,type:_TEXTFIELD_,msgName:ZaMsg.MSG_zimbraPasswordMinNumericChars,label:ZaMsg.LBL_zimbraPasswordMinNumericChars,labelLocation:_LEFT_,cssClass:"admin_xform_number_input",visibilityChecks:[ZaItem.hasWritePermission],enableDisableChecks:[[ZaCosXFormView.isAllAuthfromInternal]]},{ref:ZaCos.A_zimbraPasswordMinDigitsOrPuncs,type:_TEXTFIELD_,msgName:ZaMsg.MSG_zimbraPasswordMinDigitsOrPuncs,label:ZaMsg.LBL_zimbraPasswordMinDigitsOrPuncs,labelLocation:_LEFT_,cssClass:"admin_xform_number_input",visibilityChecks:[ZaItem.hasWritePermission],enableDisableChecks:[[ZaCosXFormView.isAllAuthfromInternal]]},{ref:ZaCos.A_zimbraMinPwdAge,type:_TEXTFIELD_,msgName:ZaMsg.MSG_passMinAge,label:ZaMsg.LBL_passMinAge,labelLocation:_LEFT_,cssClass:"admin_xform_number_input",visibilityChecks:[],enableDisableChecks:[[ZaCosXFormView.isAllAuthfromInternal]]},{ref:ZaCos.A_zimbraMaxPwdAge,type:_TEXTFIELD_,msgName:ZaMsg.MSG_passMaxAge,label:ZaMsg.LBL_passMaxAge,labelLocation:_LEFT_,cssClass:"admin_xform_number_input",visibilityChecks:[],enableDisableChecks:[[ZaCosXFormView.isAllAuthfromInternal]]},{ref:ZaCos.A_zimbraEnforcePwdHistory,type:_TEXTFIELD_,msgName:ZaMsg.MSG_zimbraEnforcePwdHistory,label:ZaMsg.LBL_zimbraEnforcePwdHistory,labelLocation:_LEFT_,cssClass:"admin_xform_number_input",visibilityChecks:[],enableDisableChecks:[[ZaCosXFormView.isAllAuthfromInternal]]},{ref:ZaCos.A_zimbraPasswordBlockCommonEnabled,type:_CHECKBOX_,msgName:ZaMsg.NAD_RejectCommonPwd,label:ZaMsg.NAD_RejectCommonPwd,trueValue:"TRUE",falseValue:"FALSE",visibilityChecks:[],enableDisableChecks:[[ZaCosXFormView.isAllAuthfromInternal]]}]},{type:_ZA_TOP_GROUPER_,id:"cos_password_lockout_settings",label:ZaMsg.NAD_FailedLoginGrouper,items:[{ref:ZaCos.A_zimbraPasswordLockoutEnabled,type:_CHECKBOX_,msgName:ZaMsg.LBL_zimbraPasswordLockoutEnabled,label:ZaMsg.LBL_zimbraPasswordLockoutEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaCos.A_zimbraPasswordLockoutMaxFailures,type:_TEXTFIELD_,enableDisableChecks:[ZaCosXFormView.isPasswordLockoutEnabled],enableDisableChangeEventSources:[ZaCos.A_zimbraPasswordLockoutEnabled],label:ZaMsg.LBL_zimbraPasswordLockoutMaxFailures,subLabel:ZaMsg.TTP_zimbraPasswordLockoutMaxFailuresSub,msgName:ZaMsg.MSG_zimbraPasswordLockoutMaxFailures,labelLocation:_LEFT_,cssClass:"admin_xform_number_input"},{ref:ZaCos.A_zimbraPasswordLockoutDuration,type:_LIFETIME_,enableDisableChecks:[ZaCosXFormView.isPasswordLockoutEnabled],enableDisableChangeEventSources:[ZaCos.A_zimbraPasswordLockoutEnabled],label:ZaMsg.LBL_zimbraPasswordLockoutDuration,subLabel:ZaMsg.TTP_zimbraPasswordLockoutDurationSub,msgName:ZaMsg.MSG_zimbraPasswordLockoutDuration,labelLocation:_LEFT_,textFieldCssClass:"admin_xform_number_input"},{ref:ZaCos.A_zimbraPasswordLockoutFailureLifetime,type:_LIFETIME_,enableDisableChecks:[ZaCosXFormView.isPasswordLockoutEnabled],enableDisableChangeEventSources:[ZaCos.A_zimbraPasswordLockoutEnabled],label:ZaMsg.LBL_zimbraPasswordLockoutFailureLifetime,subLabel:ZaMsg.TTP_zimbraPasswordLockoutFailureLifetimeSub,msgName:ZaMsg.MSG_zimbraPasswordLockoutFailureLifetime,labelLocation:_LEFT_,textFieldCssClass:"admin_xform_number_input",labelCssStyle:"white-space:normal;",nowrap:false,labelWrap:true}]},{type:_ZA_TOP_GROUPER_,id:"cos_timeout_settings",label:ZaMsg.NAD_TimeoutGrouper,items:[{ref:ZaCos.A_zimbraAdminAuthTokenLifetime,type:_LIFETIME_,msgName:ZaMsg.MSG_zimbraAdminAuthTokenLifetime,label:ZaMsg.LBL_zimbraAdminAuthTokenLifetime,labelLocation:_LEFT_},{ref:ZaCos.A_zimbraAuthTokenLifetime,type:_LIFETIME_,msgName:ZaMsg.MSG_zimbraAuthTokenLifetime,label:ZaMsg.LBL_zimbraAuthTokenLifetime,labelLocation:_LEFT_},{ref:ZaCos.A_zimbraMailIdleSessionTimeout,type:_LIFETIME_,msgName:ZaMsg.MSG_zimbraMailIdleSessionTimeout,label:ZaMsg.LBL_zimbraMailIdleSessionTimeout,labelLocation:_LEFT_},{ref:ZaCos.A_zimbraDumpsterUserVisibleAge,type:_LIFETIME_,msgName:ZaMsg.MSG_zimbraDumpsterUserVisibleAge,label:ZaMsg.LBL_zimbraDumpsterUserVisibleAge,visibilityChecks:[[ZaItem.hasReadPermission],[XForm.checkInstanceValue,ZaCos.A_zimbraDumpsterEnabled,"TRUE"]],visibilityChangeEventSources:[ZaCos.A_zimbraDumpsterEnabled]}]},{type:_ZA_TOP_GROUPER_,id:"cos_mail_retention_settings",label:ZaMsg.NAD_MailRetentionGrouper,items:[{type:_DWT_ALERT_,containerCssStyle:"padding-bottom:0;",style:DwtAlert.INFO,iconVisible:false,content:ZaMsg.Alert_MailRetention},{ref:ZaCos.A_zimbraMailMessageLifetime,type:_LIFETIME2_,msgName:ZaMsg.MSG_zimbraMailMessageLifetime,label:ZaMsg.LBL_zimbraMailMessageLifetime,labelLocation:_LEFT_},{ref:ZaCos.A_zimbraMailTrashLifetime,type:_LIFETIME1_,msgName:ZaMsg.MSG_zimbraMailTrashLifetime,label:ZaMsg.LBL_zimbraMailTrashLifetime,labelLocation:_LEFT_},{ref:ZaCos.A_zimbraMailSpamLifetime,type:_LIFETIME1_,msgName:ZaMsg.MSG_zimbraMailSpamLifetime,label:ZaMsg.LBL_zimbraMailSpamLifetime,labelLocation:_LEFT_},{ref:ZaCos.A_zimbraMailDumpsterLifetime,type:_LIFETIME1_,msgName:ZaMsg.MSG_zimbraMailDumpsterLifetime,label:ZaMsg.LBL_zimbraMailDumpsterLifetime,visibilityChecks:[[ZaItem.hasReadPermission],[XForm.checkInstanceValue,ZaCos.A_zimbraDumpsterEnabled,"TRUE"],[XForm.checkInstanceValue,ZaCos.A_zimbraDumpsterPurgeEnabled,"TRUE"]],visibilityChangeEventSources:[ZaCos.A_zimbraDumpsterEnabled,ZaCos.A_zimbraDumpsterPurgeEnabled]}]},{type:_ZA_TOP_GROUPER_,label:ZaMsg.NAD_InteropGrouper,visibilityChecks:[[ZATopGrouper_XFormItem.isGroupVisible,[ZaCos.A_zimbraFreebusyExchangeUserOrg]]],items:[{ref:ZaCos.A_zimbraFreebusyExchangeUserOrg,type:_TEXTFIELD_,msgName:ZaMsg.LBL_zimbraFreebusyExchangeUserOrg,width:"250px",label:ZaMsg.LBL_zimbraFreebusyExchangeUserOrg,labelLocation:_LEFT_}]},{type:_ZA_TOP_GROUPER_,id:"cos_admin_sieve",label:ZaMsg.NAD_AdminSieveGrouper,items:[{type:_DWT_ALERT_,containerCssStyle:"padding-bottom:0;",style:DwtAlert.INFO,iconVisible:false,content:ZaMsg.Alert_Sieve},{ref:ZaCos.A_zimbraSieveRejectMailEnabled,type:_CHECKBOX_,label:ZaMsg.LBL_zimbraSieveRejectMailEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaCos.A_zimbraSieveEditHeaderEnabled,type:_CHECKBOX_,label:ZaMsg.LBL_zimbraSieveEditHeaderEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaCos.A_zimbraAdminSieveScriptBefore,type:_TEXTAREA_,label:ZaMsg.LBL_zimbraAdminSieveScriptBefore,labelLocation:_LEFT_,labelCssStyle:"vertical-align:top;",width:"30em"},{ref:ZaCos.A_zimbraAdminSieveScriptAfter,type:_TEXTAREA_,label:ZaMsg.LBL_zimbraAdminSieveScriptAfter,labelLocation:_LEFT_,labelCssStyle:"vertical-align:top;",width:"30em"}]},{type:_SPACER_,height:"10px"}];
k.items=o;
c.push(k)
}if(w){var j={type:_SUPER_TABCASE_,caseKey:w,paddingStyle:"padding-left:15px;",width:"98%",cellpadding:2,colSizes:["100%"],numCols:1,id:"cos_retentionpolicy_tab",loadDataMethods:[ZaCosXFormView.prototype.loadRetentionPolicies],items:[{type:_GROUP_,numCols:2,colSizes:["20px","auto"],width:"600px",cssStyle:"margin-left:10px;",items:[{type:_SPACER_,height:"10px"},{ref:ZaCos.A2_retentionPoliciesKeepInherited,type:_CHECKBOX_,onChange:ZaCosXFormView.inheritCOSRetentionPolicies,msgName:ZaMsg.LBL_POLICY_COS_INHERIT_PROMPT,label:ZaMsg.LBL_POLICY_COS_INHERIT_PROMPT,trueValue:"TRUE",falseValue:"FALSE",labelLocation:_RIGHT_}]},{type:_ZA_TOP_GROUPER_,id:"cos_form_keep_p_group",width:"98%",numCols:1,colSizes:["auto"],label:ZaMsg.Glb_RetentionPolicies,cssStyle:"margin:10px;padding-bottom:0;",items:[{ref:ZaCos.A2_retentionPoliciesKeep,type:_DWT_LIST_,height:"200",width:"99%",preserveSelection:false,multiselect:true,cssClass:"DLSource",headerList:v,widgetClass:ZaRetentionPolicyListView,onSelection:ZaCosXFormView.retentionSelectionListener,valueChangeEventSources:[ZaCos.A2_retentionPoliciesKeep]},{type:_GROUP_,numCols:5,colSizes:["100px","auto","100px","auto","100px"],width:"350px",cssStyle:"margin:10px;padding-bottom:0;",items:[{type:_DWT_BUTTON_,label:ZaMsg.TBB_Delete,width:"100px",onActivate:"ZaCosXFormView.deleteButtonListener.call(this);",enableDisableChangeEventSources:[ZaCos.A2_retentionPoliciesKeep_Selection,ZaCos.A2_retentionPoliciesKeepInherited],enableDisableChecks:[[function(){var I=this.getForm().getInstanceValue(ZaCos.A2_retentionPoliciesKeep_Selection);
return I&&I.length>0
}],[XForm.checkInstanceValue,ZaCos.A2_retentionPoliciesKeepInherited,"TRUE"]]},{type:_CELLSPACER_},{type:_DWT_BUTTON_,label:ZaMsg.TBB_Edit,width:"100px",onActivate:"ZaCosXFormView.editButtonListener.call(this);",enableDisableChangeEventSources:[ZaCos.A2_retentionPoliciesKeep_Selection,ZaCos.A2_retentionPoliciesKeepInherited],enableDisableChecks:[[function(){var I=this.getForm().getInstanceValue(ZaCos.A2_retentionPoliciesKeep_Selection);
return I&&I.length==1
}],[XForm.checkInstanceValue,ZaCos.A2_retentionPoliciesKeepInherited,"TRUE"]]},{type:_CELLSPACER_},{type:_DWT_BUTTON_,label:ZaMsg.NAD_Add,width:"100px",enableDisableChangeEventSources:[ZaCos.A2_retentionPoliciesKeepInherited],enableDisableChecks:[[XForm.checkInstanceValue,ZaCos.A2_retentionPoliciesKeepInherited,"TRUE"]],onActivate:"ZaCosXFormView.addButtonListener.call(this);"}]}]},{type:_ZA_TOP_GROUPER_,id:"cos_form_purge_p_group",width:"98%",numCols:1,colSizes:["auto"],label:ZaMsg.Glb_DisposalPolicies,cssStyle:"margin:10px;padding-bottom:0;",items:[{ref:ZaCos.A2_retentionPoliciesPurge,type:_DWT_LIST_,height:"200",width:"99%",preserveSelection:false,multiselect:true,cssClass:"DLSource",headerList:l,widgetClass:ZaRetentionPolicyListView,onSelection:ZaCosXFormView.purgeSelectionListener,valueChangeEventSources:[ZaCos.A2_retentionPoliciesPurge]},{type:_GROUP_,numCols:5,colSizes:["100px","auto","100px","auto","100px"],width:"350px",cssStyle:"margin:10px;padding-bottom:0;",items:[{type:_DWT_BUTTON_,label:ZaMsg.TBB_Delete,width:"100px",onActivate:"ZaCosXFormView.deleteButtonListener.call(this, 1);",enableDisableChangeEventSources:[ZaCos.A2_retentionPoliciesPurge_Selection,ZaCos.A2_retentionPoliciesKeepInherited],enableDisableChecks:[[function(){var I=this.getForm().getInstanceValue(ZaCos.A2_retentionPoliciesPurge_Selection);
return I&&I.length>0
}],[XForm.checkInstanceValue,ZaCos.A2_retentionPoliciesKeepInherited,"TRUE"]]},{type:_CELLSPACER_},{type:_DWT_BUTTON_,label:ZaMsg.TBB_Edit,width:"100px",onActivate:"ZaCosXFormView.editButtonListener.call(this, 1);",enableDisableChangeEventSources:[ZaCos.A2_retentionPoliciesPurge_Selection,ZaCos.A2_retentionPoliciesKeepInherited],enableDisableChecks:[[function(){var I=this.getForm().getInstanceValue(ZaCos.A2_retentionPoliciesPurge_Selection);
return I&&I.length==1
}],[XForm.checkInstanceValue,ZaCos.A2_retentionPoliciesKeepInherited,"TRUE"]]},{type:_CELLSPACER_},{type:_DWT_BUTTON_,label:ZaMsg.NAD_Add,width:"100px",enableDisableChangeEventSources:[ZaCos.A2_retentionPoliciesKeepInherited],enableDisableChecks:[[XForm.checkInstanceValue,ZaCos.A2_retentionPoliciesKeepInherited,"TRUE"]],onActivate:"ZaCosXFormView.addButtonListener.call(this,1);"}]}]}]};
c.push(j)
}z.tableCssStyle="width:100%;overflow:auto;";
z.items=[{type:_GROUP_,cssClass:"ZmSelectedHeaderBg",colSpan:"*",id:"xform_header",items:[{type:_GROUP_,numCols:4,colSizes:["32px","*","80px","*"],items:g}]},{type:_TAB_BAR_,ref:ZaModel.currentTab,choices:this.tabChoices,cssClass:"ZaTabBar",id:"xform_tabbar",cssStyle:"display:none;"},{type:_SWITCH_,align:_LEFT_,valign:_TOP_,items:c}]
};
ZaTabView.XFormModifiers.ZaCosXFormView.push(ZaCosXFormView.myXFormModifier);
ZaCosXFormView.prototype.getTabChoices=function(){return this.tabChoices
};
ZaCosXFormView.isAllAuthfromInternal=function(){var b=true;
var d=ZaCosXFormView._domainList;
if(!d){return b
}for(var c=0;
c<d.length&&b;
c++){var e=d[c];
if(e.attrs[ZaDomain.A_AuthMech]==ZaDomain.AuthMech_zimbra){b=false
}}return !b
};
ZaCosXFormView.validatePollingInterval=function(g,b,c){var j=c.getInstance();
this.setInstanceValue(g);
var d=j.attrs[ZaCos.A_zimbraPrefMailPollingInterval];
var h=j.attrs[ZaCos.A_zimbraMailMinPollingInterval];
var m=c.getItemsById(ZaCos.A_zimbraPrefMailPollingInterval)[0];
try{var l=parseInt(ZaUtil.getLifeTimeInSeconds(d));
var k=parseInt(ZaUtil.getLifeTimeInSeconds(h));
if(l<k){m.setError(ZaMsg.tt_mailPollingIntervalError+h);
c.parent.setDirty(false)
}else{m.clearError();
c.parent.setDirty(true)
}}catch(f){m.setError(f.message);
c.parent.setDirty(false)
}}
}if(AjxPackage.define("zimbraAdmin.cos.view.ZaNewCosXWizard")){ZaNewCosXWizard=function(b,c){ZaXWizardDialog.call(this,b,null,ZaMsg.COSTBB_New_tt,"740px","300px","ZaNewCosXWizard",null,ZaId.DLG_NEW_COS);
this.TAB_INDEX=0;
this.initForm(ZaCos.myXModel,this.getMyXForm(c),null);
this._localXForm.addListener(DwtEvent.XFORMS_VALUE_CHANGED,new AjxListener(this,ZaNewCosXWizard.prototype.handleXFormChange));
this._localXForm.addListener(DwtEvent.XFORMS_VALUE_ERROR,new AjxListener(this,ZaNewCosXWizard.prototype.handleXFormChange));
this._helpURL=ZaNewCosXWizard.helpURL
};
ZaNewCosXWizard.prototype=new ZaXWizardDialog;
ZaNewCosXWizard.prototype.constructor=ZaNewCosXWizard;
ZaXDialog.XFormModifiers.ZaNewCosXWizard=new Array();
ZaNewCosXWizard.prototype.TAB_INDEX=0;
ZaNewCosXWizard.zimletChoices=new XFormChoices([],XFormChoices.SIMPLE_LIST);
ZaNewCosXWizard.themeChoices=new XFormChoices([],XFormChoices.OBJECT_LIST);
ZaNewCosXWizard.prototype.toString=function(){return"ZaNewCosXWizard"
};
ZaNewCosXWizard.helpURL=location.pathname+ZaUtil.HELP_URL+"cos/creating_classes_of_service.htm?locid="+AjxEnv.DEFAULT_LOCALE;
ZaNewCosXWizard.prototype.handleXFormChange=function(b){if(b&&this._localXForm.hasErrors()){this._button[DwtWizardDialog.FINISH_BUTTON].setEnabled(false)
}else{if(this._containedObject.attrs[ZaCos.A_name]&&this._containedObject.attrs[ZaCos.A_name].length>0){this._button[DwtWizardDialog.FINISH_BUTTON].setEnabled(true);
if(this._containedObject[ZaModel.currentStep]!=this._lastStep){this._button[DwtWizardDialog.NEXT_BUTTON].setEnabled(true)
}if(this._containedObject[ZaModel.currentStep]!=1){this._button[DwtWizardDialog.PREV_BUTTON].setEnabled(true)
}}}};
ZaNewCosXWizard.prototype.popup=function(b){ZaXWizardDialog.prototype.popup.call(this,b);
this._button[DwtWizardDialog.NEXT_BUTTON].setEnabled(false);
this._button[DwtWizardDialog.FINISH_BUTTON].setEnabled(false);
this._button[DwtWizardDialog.PREV_BUTTON].setEnabled(false)
};
ZaNewCosXWizard.prototype.createDomainAndAccount=function(c){try{var e=new ZaDomain();
e.name=c;
e.attrs[ZaDomain.A_domainName]=c;
var d=ZaItem.create(e,ZaDomain,"ZaDomain");
if(d!=null){ZaApp.getInstance().getCurrentController().closeCnfrmDelDlg();
this.finishWizard()
}}catch(b){ZaApp.getInstance().getCurrentController()._handleException(b,"ZaNewCosXWizard.prototype.createDomainAndAccount",null,false)
}};
ZaNewCosXWizard.prototype.finishWizard=function(){try{if(!ZaCos.checkValues(this._containedObject)){return false
}var c=ZaItem.create(this._containedObject,ZaCos,"ZaCos");
if(c!=null){c.name=this._containedObject.attrs[ZaCos.A_name];
c.create(c.name,this._containedObject.attrs);
ZaApp.getInstance().getCosController().fireCreationEvent(c);
this.popdown();
ZaApp.getInstance().getAppCtxt().getAppController().setActionStatusMsg(AjxMessageFormat.format(ZaMsg.CosCreated,[c.name]))
}}catch(b){switch(b.code){case ZmCsfeException.ACCT_EXISTS:ZaApp.getInstance().getCurrentController().popupErrorDialog(ZaMsg.ERROR_ACCOUNT_EXISTS);
break;
case ZmCsfeException.ACCT_INVALID_PASSWORD:ZaApp.getInstance().getCurrentController().popupErrorDialog(ZaMsg.ERROR_PASSWORD_INVALID,b);
ZaApp.getInstance().getAppCtxt().getErrorDialog().showDetail(true);
break;
case ZmCsfeException.NO_SUCH_COS:ZaApp.getInstance().getCurrentController().popupErrorDialog(AjxMessageFormat.format(ZaMsg.ERROR_NO_SUCH_COS,[this._containedObject.attrs[ZaAccount.A_COSId]]),b);
break;
case ZmCsfeException.SIGNATURE_EXISTS:this.popdown();
ZaApp.getInstance().getCurrentController()._handleException(b,"ZaNewResourceXWizard.prototype.finishWizard",null,false);
break;
case ZmCsfeException.NO_SUCH_DOMAIN:ZaApp.getInstance().dialogs.confirmMessageDialog2.setMessage(AjxMessageFormat.format(ZaMsg.CreateDomain_q,[ZaAccount.getDomain(this._containedObject.name)]),DwtMessageDialog.WARNING_STYLE);
ZaApp.getInstance().dialogs.confirmMessageDialog2.registerCallback(DwtDialog.YES_BUTTON,this.createDomainAndAccount,this,[ZaAccount.getDomain(this._containedObject.name)]);
ZaApp.getInstance().dialogs.confirmMessageDialog2.registerCallback(DwtDialog.NO_BUTTON,ZaController.prototype.closeCnfrmDelDlg,ZaApp.getInstance().getCurrentController(),null);
ZaApp.getInstance().dialogs.confirmMessageDialog2.popup();
break;
default:ZaApp.getInstance().getCurrentController()._handleException(b,"ZaNewCosXWizard.prototype.finishWizard",null,false);
break
}}};
ZaNewCosXWizard.prototype.goNext=function(){if(this._containedObject[ZaModel.currentStep]==1){this._button[DwtWizardDialog.PREV_BUTTON].setEnabled(true)
}this.goPage(this._containedObject[ZaModel.currentStep]+1);
if(this._containedObject[ZaModel.currentStep]==this._lastStep){this._button[DwtWizardDialog.NEXT_BUTTON].setEnabled(false)
}};
ZaNewCosXWizard.prototype.goPrev=function(){if(this._containedObject[ZaModel.currentStep]==2){this._button[DwtWizardDialog.PREV_BUTTON].setEnabled(false)
}else{if(this._containedObject[ZaModel.currentStep]==this._lastStep){this._button[DwtWizardDialog.NEXT_BUTTON].setEnabled(true)
}}this.goPage(this._containedObject[ZaModel.currentStep]-1)
};
ZaNewCosXWizard.prototype.setObject=function(l){l.manageSpecialAttrs();
this._containedObject=new ZaCos();
this._containedObject.attrs=new Object();
this._containedObject[ZaModel.currentStep]=l[ZaModel.currentStep]||1;
this._containedObject.name=l.name;
this._containedObject.type=l.type;
if(l.rights){this._containedObject.rights=l.rights
}if(l.setAttrs){this._containedObject.setAttrs=l.setAttrs
}if(l.getAttrs){this._containedObject.getAttrs=l.getAttrs
}if(l._defaultValues){this._containedObject._defaultValues=l._defaultValues
}if(l.id){this._containedObject.id=l.id
}if(l._uuid){this._containedObject._uuid=l._uuid
}for(var k in l.attrs){var g=this._localXForm.getModel().getItem(k);
if((g!=null&&g.type==_LIST_)||(l.attrs[k]!=null&&l.attrs[k] instanceof Array)){this._containedObject.attrs[k]=ZaItem.deepCloneListItem(l.attrs[k])
}else{this._containedObject.attrs[k]=l.attrs[k]
}}if(l.getAttrs){if(l.getAttrs[ZaCos.A_zimbraAvailableSkin]||l.getAttrs.all){var h=l.attrs[ZaCos.A_zimbraAvailableSkin];
if(h!=null&&h!=""){if(AjxUtil.isString(h)){this._containedObject.attrs[ZaCos.A_zimbraAvailableSkin]=[h]
}else{var d=h.length;
this._containedObject.attrs[ZaCos.A_zimbraAvailableSkin]=[];
for(var e=0;
e<d;
e++){this._containedObject.attrs[ZaCos.A_zimbraAvailableSkin].push(h[e])
}}}else{this._containedObject.attrs[ZaCos.A_zimbraAvailableSkin]=null
}var h=ZaApp.getInstance().getInstalledSkins();
if(h==null){h=[]
}else{if(AjxUtil.isString(h)){h=[h]
}}var f=ZaApp.getInstance().getSkinChoices(h);
ZaNewCosXWizard.themeChoices.setChoices(f);
ZaNewCosXWizard.themeChoices.dirtyChoices()
}if(l.getAttrs[ZaCos.A_zimbraZimletAvailableZimlets]||l.getAttrs.all){var c=ZaZimlet.getAll(ZaZimlet.EXCLUDE_EXTENSIONS);
if(c==null){c=[]
}if(c instanceof ZaItemList||c instanceof AjxVector){c=c.getArray()
}var d=c.length;
var j=[];
for(var e=0;
e<d;
e++){var b=c[e];
j.push(b.name)
}ZaNewCosXWizard.zimletChoices.setChoices(j);
ZaNewCosXWizard.zimletChoices.dirtyChoices()
}}ZaNewCosXWizard._domainList=ZaApp.getInstance().getDomainList(true).getArray();
this._localXForm.setInstance(this._containedObject)
};
ZaNewCosXWizard.gotSkins=function(){return((ZaApp.getInstance().getInstalledSkins()!=null)&&(ZaApp.getInstance().getInstalledSkins().length>0))
};
ZaNewCosXWizard.gotNoSkins=function(){return !ZaNewCosXWizard.gotSkins.call(this)
};
ZaNewCosXWizard.isPasswordLockoutEnabled=function(){return(this.getInstanceValue(ZaCos.A_zimbraPasswordLockoutEnabled)=="TRUE")
};
ZaNewCosXWizard.isMailFeatureEnabled=function(){return(this.getInstanceValue(ZaCos.A_zimbraFeatureMailEnabled)=="TRUE")
};
ZaCosXFormView.isContactsFeatureEnabled=function(){return this.getInstanceValue(ZaCos.A_zimbraFeatureContactsEnabled)=="TRUE"
};
ZaNewCosXWizard.isCalendarFeatureEnabled=function(){return this.getInstanceValue(ZaCos.A_zimbraFeatureCalendarEnabled)=="TRUE"
};
ZaNewCosXWizard.isMailForwardingEnabled=function(){return(this.getInstanceValue(ZaCos.A_zimbraFeatureMailForwardingEnabled)=="TRUE")
};
ZaNewCosXWizard.isBriefcaseFeatureEnabled=function(){return(this.getInstanceValue(ZaCos.A_zimbraFeatureBriefcasesEnabled)=="TRUE")
};
ZaNewCosXWizard.FEATURE_TAB_ATTRS=[ZaCos.A_zimbraFeatureMailEnabled,ZaCos.A_zimbraFeatureReadReceiptsEnabled,ZaCos.A_zimbraFeatureContactsEnabled,ZaCos.A_zimbraFeatureDistributionListFolderEnabled,ZaCos.A_zimbraFeatureCalendarEnabled,ZaCos.A_zimbraFeatureTasksEnabled,ZaCos.A_zimbraFeatureBriefcasesEnabled,ZaCos.A_zimbraFeatureOptionsEnabled,ZaCos.A_zimbraFeatureTaggingEnabled,ZaCos.A_zimbraFeatureSharingEnabled,ZaCos.A_zimbraFeatureChangePasswordEnabled,ZaCos.A_zimbraFeatureSkinChangeEnabled,ZaCos.A_zimbraFeatureManageZimlets,ZaCos.A_zimbraFeatureHtmlComposeEnabled,ZaCos.A_zimbraFeatureGalEnabled,ZaCos.A_zimbraFeatureMAPIConnectorEnabled,ZaCos.A_zimbraFeatureEwsEnabled,ZaCos.A_zimbraFeatureTouchClientEnabled,ZaCos.A_zimbraFeatureWebClientOfflineAccessEnabled,ZaCos.A_zimbraFeatureGalAutoCompleteEnabled,ZaCos.A_zimbraFeatureMailPriorityEnabled,ZaCos.A_zimbraFeatureFlaggingEnabled,ZaCos.A_zimbraImapEnabled,ZaCos.A_zimbraPop3Enabled,ZaCos.A_zimbraFeatureWebClientEnabled,ZaCos.A_zimbraFeatureImapDataSourceEnabled,ZaCos.A_zimbraFeaturePop3DataSourceEnabled,ZaCos.A_zimbraFeatureConversationsEnabled,ZaCos.A_zimbraFeatureFiltersEnabled,ZaCos.A_zimbraFeatureOutOfOfficeReplyEnabled,ZaCos.A_zimbraFeatureNewMailNotificationEnabled,ZaCos.A_zimbraFeatureIdentitiesEnabled,ZaCos.A_zimbraFeatureGroupCalendarEnabled,ZaCos.A_zimbraFeaturePeopleSearchEnabled,ZaCos.A_zimbraFeatureAdvancedSearchEnabled,ZaCos.A_zimbraFeatureSavedSearchesEnabled,ZaCos.A_zimbraFeatureInitialSearchPreferenceEnabled,ZaCos.A_zimbraFeatureImportFolderEnabled,ZaCos.A_zimbraFeatureExportFolderEnabled,ZaCos.A_zimbraFeatureDocumentEditingEnabled,ZaCos.A_zimbraDumpsterEnabled,ZaCos.A_zimbraDumpsterPurgeEnabled,ZaCos.A_zimbraFeatureMailSendLaterEnabled,ZaCos.A_zimbraFeatureCalendarReminderDeviceEmailEnabled,ZaCos.A_zimbraFeatureSMIMEEnabled];
ZaNewCosXWizard.FEATURE_TAB_RIGHTS=[];
ZaNewCosXWizard.PREFERENCES_TAB_ATTRS=[ZaCos.A_zimbraPrefMailSendReadReceipts,ZaCos.A_zimbraPrefUseTimeZoneListInCalendar,ZaCos.A_zimbraPrefCalendarUseQuickAdd,ZaCos.A_zimbraPrefCalendarAlwaysShowMiniCal,ZaCos.A_zimbraPrefCalendarApptReminderWarningTime,ZaCos.A_zimbraPrefTimeZoneId,ZaCos.A_zimbraPrefGalAutoCompleteEnabled,ZaCos.A_zimbraPrefAutoAddAddressEnabled,ZaCos.A_zimbraMailSignatureMaxLength,ZaCos.A_zimbraPrefForwardReplyInOriginalFormat,ZaCos.A_zimbraPrefHtmlEditorDefaultFontColor,ZaCos.A_zimbraPrefHtmlEditorDefaultFontFamily,ZaCos.A_zimbraPrefHtmlEditorDefaultFontSize,ZaCos.A_zimbraPrefComposeFormat,ZaCos.A_zimbraPrefComposeInNewWindow,ZaCos.A_zimbraAllowAnyFromAddress,ZaCos.A_zimbraMailMinPollingInterval,ZaCos.A_zimbraPrefMailPollingInterval,ZaCos.A_zimbraPrefAutoSaveDraftInterval,ZaCos.A_zimbraPrefMailDefaultCharset,ZaCos.A_zimbraMaxMailItemsPerPage,ZaCos.A_zimbraPrefMailItemsPerPage,ZaCos.A_zimbraPrefGroupMailBy,ZaCos.A_zimbraPrefDisplayExternalImages,ZaCos.A_zimbraPrefMessageViewHtmlPreferred,ZaCos.A_zimbraPrefLocale,ZaCos.A_zimbraJunkMessagesIndexingEnabled,ZaCos.A_zimbraPrefShowSelectionCheckbox,ZaCos.A_zimbraPrefWarnOnExit,ZaCos.A_zimbraPrefAdminConsoleWarnOnExit,ZaCos.A_zimbraPrefUseKeyboardShortcuts,ZaCos.A_zimbraPrefImapSearchFoldersEnabled,ZaCos.A_zimbraPrefShowSearchString,ZaCos.A_zimbraPrefMailInitialSearch,ZaCos.A_zimbraPrefClientType,ZaCos.A_zimbraPrefCalendarInitialView,ZaCos.A_zimbraPrefCalendarFirstDayOfWeek,ZaCos.A_zimbraPrefCalendarReminderFlashTitle,ZaCos.A_zimbraPrefCalendarAllowCancelEmailToSelf,ZaCos.A_zimbraPrefCalendarAllowPublishMethodInvite,ZaCos.A_zimbraPrefCalendarToasterEnabled,ZaCos.A_zimbraPrefCalendarShowPastDueReminders,ZaCos.A_zimbraPrefAppleIcalDelegationEnabled,ZaCos.A_zimbraPrefMandatorySpellCheckEnabled,ZaCos.A_zimbraPrefImapEnabled,ZaCos.A_zimbraPrefPop3Enabled];
ZaNewCosXWizard.PREFERENCES_TAB_RIGHTS=[];
ZaNewCosXWizard.SKIN_TAB_ATTRS=[ZaCos.A_zimbraPrefSkin,ZaCos.A_zimbraAvailableSkin];
ZaNewCosXWizard.SKIN_TAB_RIGHTS=[];
ZaNewCosXWizard.ZIMLET_TAB_ATTRS=[ZaCos.A_zimbraZimletAvailableZimlets];
ZaNewCosXWizard.ZIMLET_TAB_RIGHTS=[ZaCos.RIGHT_GET_ZIMLET,ZaCos.RIGHT_LIST_ZIMLET];
ZaNewCosXWizard.SERVERPOOL_TAB_ATTRS=[ZaCos.A_zimbraMailHostPool];
ZaNewCosXWizard.SERVERPOOL_TAB_RIGHTS=[ZaCos.RIGHT_GET_HOSTNAME];
ZaNewCosXWizard.ADVANCED_TAB_ATTRS=[ZaCos.A_zimbraAttachmentsBlocked,ZaCos.A_zimbraMailQuota,ZaCos.A_zimbraContactMaxNumEntries,ZaCos.A_zimbraQuotaWarnPercent,ZaCos.A_zimbraQuotaWarnInterval,ZaCos.A_zimbraQuotaWarnMessage,ZaCos.A_zimbraPasswordLocked,ZaCos.A_zimbraPasswordBlockCommonEnabled,ZaCos.A_zimbraMinPwdLength,ZaCos.A_zimbraMaxPwdLength,ZaCos.A_zimbraPasswordMinUpperCaseChars,ZaCos.A_zimbraPasswordMinLowerCaseChars,ZaCos.A_zimbraPasswordMinPunctuationChars,ZaCos.A_zimbraPasswordMinNumericChars,ZaCos.A_zimbraPasswordMinDigitsOrPuncs,ZaCos.A_zimbraMinPwdAge,ZaCos.A_zimbraMaxPwdAge,ZaCos.A_zimbraEnforcePwdHistory,ZaCos.A_zimbraPasswordLockoutEnabled,ZaCos.A_zimbraPasswordLockoutMaxFailures,ZaCos.A_zimbraPasswordLockoutDuration,ZaCos.A_zimbraPasswordLockoutFailureLifetime,ZaCos.A_zimbraAdminAuthTokenLifetime,ZaCos.A_zimbraAuthTokenLifetime,ZaCos.A_zimbraMailIdleSessionTimeout,ZaCos.A_zimbraMailMessageLifetime,ZaCos.A_zimbraMailTrashLifetime,ZaCos.A_zimbraMailSpamLifetime,ZaCos.A_zimbraDumpsterUserVisibleAge,ZaCos.A_zimbraMailDumpsterLifetime,ZaCos.A_zimbraFreebusyExchangeUserOrg,ZaCos.A_zimbraDataSourcePop3PollingInterval,ZaCos.A_zimbraDataSourceImapPollingInterval,ZaCos.A_zimbraDataSourceCalendarPollingInterval,ZaCos.A_zimbraDataSourceRssPollingInterval,ZaCos.A_zimbraDataSourceCaldavPollingInterval,ZaCos.A_zimbraDataSourceMinPollingInterval];
ZaNewCosXWizard.ADVANCED_TAB_RIGHTS=[];
ZaNewCosXWizard.myXFormModifier=function(u,d){this.stepChoices=[];
var A=++this.TAB_INDEX;
var z,y,x,w,v,s;
var f=[{type:_AJX_IMAGE_,src:"COS_32",label:null,rowSpan:2},{type:_OUTPUT_,ref:ZaCos.A_name,label:null,cssClass:"AdminTitle",visibilityChecks:[ZaItem.hasReadPermission],height:32,rowSpan:2},{type:_OUTPUT_,ref:ZaItem.A_zimbraId,label:ZaMsg.NAD_ZimbraID,visibilityChecks:[ZaItem.hasReadPermission]},{type:_OUTPUT_,ref:ZaItem.A_zimbraCreateTimestamp,label:ZaMsg.LBL_zimbraCreateTimestamp,labelLocation:_LEFT_,getDisplayValue:function(){var C=ZaItem.formatServerTime(this.getInstanceValue());
if(!C){return ZaMsg.Server_Time_NA
}else{return C
}},visibilityChecks:[ZaItem.hasReadPermission]}];
this.stepChoices.push({value:A,label:ZaMsg.TABT_GeneralPage});
if(ZaTabView.isTAB_ENABLED(d,ZaNewCosXWizard.FEATURE_TAB_ATTRS,ZaNewCosXWizard.FEATURE_TAB_RIGHTS)){z=++this.TAB_INDEX;
this.stepChoices.push({value:z,label:ZaMsg.TABT_Features})
}if(ZaTabView.isTAB_ENABLED(d,ZaNewCosXWizard.PREFERENCES_TAB_ATTRS,ZaNewCosXWizard.PREFERENCES_TAB_RIGHTS)){y=++this.TAB_INDEX;
this.stepChoices.push({value:y,label:ZaMsg.TABT_Preferences})
}if(ZaTabView.isTAB_ENABLED(d,ZaNewCosXWizard.SKIN_TAB_ATTRS,ZaNewCosXWizard.SKIN_TAB_RIGHTS)){x=++this.TAB_INDEX;
this.stepChoices.push({value:x,label:ZaMsg.TABT_Themes})
}var j=ZaZimlet.getAll(ZaZimlet.EXCLUDE_EXTENSIONS);
if(j!=null&&!AjxUtil.isEmpty(j.getArray())&&ZaTabView.isTAB_ENABLED(d,ZaNewCosXWizard.ZIMLET_TAB_ATTRS,ZaNewCosXWizard.ZIMLET_TAB_RIGHTS)){w=++this.TAB_INDEX;
this.stepChoices.push({value:w,label:ZaMsg.TABT_Zimlets})
}if(ZaTabView.isTAB_ENABLED(d,ZaNewCosXWizard.SERVERPOOL_TAB_ATTRS,ZaNewCosXWizard.SERVERPOOL_TAB_RIGHTS)){v=++this.TAB_INDEX;
this.stepChoices.push({value:v,label:ZaMsg.TABT_ServerPool})
}if(ZaTabView.isTAB_ENABLED(d,ZaNewCosXWizard.ADVANCED_TAB_ATTRS,ZaNewCosXWizard.ADVANCED_TAB_RIGHTS)){s=++this.TAB_INDEX;
this.stepChoices.push({value:s,label:ZaMsg.TABT_Advanced})
}var c=[];
var q={type:_CASE_,caseKey:A,numCols:1,width:"100%",cellpadding:0};
var r=[{type:_ZAWIZ_TOP_GROUPER_,numCols:2,colSizes:["200px","auto"],label:ZaMsg.TABT_GeneralPage,items:[{ref:ZaCos.A_name,type:_INPUT_,enableDisableChecks:[[ZaItem.hasRight,ZaCos.RENAME_COS_RIGHT]],msgName:ZaMsg.NAD_DisplayName,label:ZaMsg.NAD_DisplayName,labelLocation:_LEFT_,cssClass:"admin_xform_name_input",required:true,width:"30em"},{ref:"description",msgName:ZaMsg.NAD_Description,label:ZaMsg.NAD_Description,labelLocation:_LEFT_,labelCssStyle:"vertical-align:top;",type:_TEXTFIELD_,align:_LEFT_,enableDisableChecks:[ZaItem.hasWritePermission],visibilityChecks:[ZaItem.hasReadPermission],width:"30em"},{ref:ZaCos.A_zimbraNotes,type:_TEXTAREA_,msgName:ZaMsg.NAD_Notes,label:ZaMsg.NAD_Notes,labelLocation:_LEFT_,labelCssStyle:"vertical-align:top;",width:"30em"}]}];
q.items=r;
c.push(q);
if(z){var p={type:_CASE_,caseKey:z,numCols:1,colSizes:["auto"],width:"100%",cellpadding:0,id:"cos_form_features_tab"};
var t=[{type:_ZAWIZ_TOP_GROUPER_,label:ZaMsg.NAD_zimbraMajorFeature,id:"cos_form_features_major",visibilityChecks:[[ZATopGrouper_XFormItem.isGroupVisible,[ZaCos.A_zimbraFeatureMailEnabled,ZaCos.A_zimbraFeatureContactsEnabled,ZaCos.A_zimbraFeatureCalendarEnabled,ZaCos.A_zimbraFeatureTasksEnabled,ZaCos.A_zimbraFeatureBriefcasesEnabled,ZaCos.A_zimbraFeatureOptionsEnabled]]],items:[{ref:ZaCos.A_zimbraFeatureMailEnabled,type:_WIZ_CHECKBOX_,msgName:ZaMsg.LBL_zimbraFeatureMailEnabled,label:ZaMsg.LBL_zimbraFeatureMailEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaCos.A_zimbraFeatureContactsEnabled,type:_WIZ_CHECKBOX_,msgName:ZaMsg.LBL_zimbraFeatureContactsEnabled,label:ZaMsg.LBL_zimbraFeatureContactsEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaCos.A_zimbraFeatureCalendarEnabled,type:_WIZ_CHECKBOX_,msgName:ZaMsg.LBL_zimbraFeatureCalendarEnabled,label:ZaMsg.LBL_zimbraFeatureCalendarEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaCos.A_zimbraFeatureTasksEnabled,type:_WIZ_CHECKBOX_,msgName:ZaMsg.LBL_zimbraFeatureTaskEnabled,label:ZaMsg.LBL_zimbraFeatureTaskEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaCos.A_zimbraFeatureBriefcasesEnabled,type:_WIZ_CHECKBOX_,msgName:ZaMsg.LBL_zimbraFeatureBriefcasesEnabled,label:ZaMsg.LBL_zimbraFeatureBriefcasesEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaCos.A_zimbraFeatureOptionsEnabled,type:_WIZ_CHECKBOX_,msgName:ZaMsg.LBL_zimbraFeatureOptionsEnabled,label:ZaMsg.LBL_zimbraFeatureOptionsEnabled,trueValue:"TRUE",falseValue:"FALSE"}]},{type:_ZAWIZ_TOP_GROUPER_,label:ZaMsg.NAD_zimbraGeneralFeature,id:"cos_form_features_general",visibilityChecks:[[ZATopGrouper_XFormItem.isGroupVisible,[ZaCos.A_zimbraFeatureTaggingEnabled,ZaCos.A_zimbraFeatureSharingEnabled,ZaCos.A_zimbraFeatureChangePasswordEnabled,ZaCos.A_zimbraFeatureSkinChangeEnabled,ZaCos.A_zimbraFeatureManageZimlets,ZaCos.A_zimbraFeatureHtmlComposeEnabled,ZaCos.A_zimbraFeatureGalEnabled,ZaCos.A_zimbraFeatureMAPIConnectorEnabled,ZaCos.A_zimbraFeatureEwsEnabled,ZaCos.A_zimbraFeatureTouchClientEnabled,ZaCos.A_zimbraFeatureWebClientOfflineAccessEnabled,ZaCos.A_zimbraFeatureGalAutoCompleteEnabled,ZaCos.A_zimbraFeatureImportFolderEnabled,ZaCos.A_zimbraFeatureExportFolderEnabled,ZaCos.A_zimbraDumpsterEnabled,ZaCos.A_zimbraDumpsterPurgeEnabled,ZaCos.A_zimbraFeatureDocumentEditingEnabled]]],items:[{ref:ZaCos.A_zimbraFeatureTaggingEnabled,type:_WIZ_CHECKBOX_,msgName:ZaMsg.LBL_zimbraFeatureTaggingEnabled,label:ZaMsg.LBL_zimbraFeatureTaggingEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaCos.A_zimbraFeatureSharingEnabled,type:_WIZ_CHECKBOX_,msgName:ZaMsg.LBL_zimbraFeatureSharingEnabled,label:ZaMsg.LBL_zimbraFeatureSharingEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaCos.A_zimbraExternalSharingEnabled,type:_WIZ_CHECKBOX_,msgName:ZaMsg.LBL_zimbraExternalSharingEnabled,label:ZaMsg.LBL_zimbraExternalSharingEnabled,trueValue:"TRUE",falseValue:"FALSE",visibilityChecks:[[ZaItem.hasReadPermission],[XForm.checkInstanceValue,ZaCos.A_zimbraFeatureSharingEnabled,"TRUE"]],visibilityChangeEventSources:[ZaCos.A_zimbraFeatureSharingEnabled]},{ref:ZaCos.A_zimbraPublicSharingEnabled,type:_WIZ_CHECKBOX_,msgName:ZaMsg.LBL_zimbraPublicSharingEnabled,label:ZaMsg.LBL_zimbraPublicSharingEnabled,trueValue:"TRUE",falseValue:"FALSE",visibilityChecks:[[ZaItem.hasReadPermission],[XForm.checkInstanceValue,ZaCos.A_zimbraFeatureSharingEnabled,"TRUE"]],visibilityChangeEventSources:[ZaCos.A_zimbraFeatureSharingEnabled]},{ref:ZaCos.A_zimbraFeatureChangePasswordEnabled,type:_WIZ_CHECKBOX_,msgName:ZaMsg.LBL_zimbraFeatureChangePasswordEnabled,label:ZaMsg.LBL_zimbraFeatureChangePasswordEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaCos.A_zimbraFeatureSkinChangeEnabled,type:_WIZ_CHECKBOX_,msgName:ZaMsg.LBL_zimbraFeatureSkinChangeEnabled,label:ZaMsg.LBL_zimbraFeatureSkinChangeEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaCos.A_zimbraFeatureManageZimlets,type:_WIZ_CHECKBOX_,msgName:ZaMsg.LBL_zimbraFeatureManageZimlets,label:ZaMsg.LBL_zimbraFeatureManageZimlets,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaCos.A_zimbraFeatureHtmlComposeEnabled,type:_WIZ_CHECKBOX_,msgName:ZaMsg.LBL_zimbraFeatureHtmlComposeEnabled,label:ZaMsg.LBL_zimbraFeatureHtmlComposeEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaCos.A_zimbraFeatureGalEnabled,type:_WIZ_CHECKBOX_,msgName:ZaMsg.LBL_zimbraFeatureGalEnabled,label:ZaMsg.LBL_zimbraFeatureGalEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaCos.A_zimbraFeatureMAPIConnectorEnabled,type:_WIZ_CHECKBOX_,msgName:ZaMsg.LBL_zimbraFeatureMAPIConnectorEnabled,label:ZaMsg.LBL_zimbraFeatureMAPIConnectorEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaCos.A_zimbraFeatureEwsEnabled,type:_WIZ_CHECKBOX_,msgName:ZaMsg.LBL_zimbraFeatureEwsEnabled,label:ZaMsg.LBL_zimbraFeatureEwsEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaCos.A_zimbraFeatureTouchClientEnabled,type:_WIZ_CHECKBOX_,msgName:ZaMsg.LBL_zimbraFeatureTouchClientEnabled,label:ZaMsg.LBL_zimbraFeatureTouchClientEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaCos.A_zimbraFeatureWebClientOfflineAccessEnabled,type:_WIZ_CHECKBOX_,msgName:ZaMsg.LBL_zimbraFeatureWebClientOfflineAccessEnabled,label:ZaMsg.LBL_zimbraFeatureWebClientOfflineAccessEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaCos.A_zimbraFeatureGalAutoCompleteEnabled,type:_WIZ_CHECKBOX_,msgName:ZaMsg.LBL_zimbraFeatureGalAutoCompleteEnabled,label:ZaMsg.LBL_zimbraFeatureGalAutoCompleteEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaCos.A_zimbraFeatureImportFolderEnabled,type:_WIZ_CHECKBOX_,msgName:ZaMsg.LBL_zimbraFeatureImportFolderEnabled,label:ZaMsg.LBL_zimbraFeatureImportFolderEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaCos.A_zimbraFeatureExportFolderEnabled,type:_WIZ_CHECKBOX_,msgName:ZaMsg.LBL_zimbraFeatureExportFolderEnabled,label:ZaMsg.LBL_zimbraFeatureExportFolderEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaCos.A_zimbraDumpsterEnabled,type:_WIZ_CHECKBOX_,msgName:ZaMsg.MSG_zimbraDumpsterEnabled,label:ZaMsg.LBL_zimbraDumpsterEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaCos.A_zimbraDumpsterPurgeEnabled,type:_WIZ_CHECKBOX_,msgName:ZaMsg.MSG_zimbraDumpsterPurgeEnabled,label:ZaMsg.LBL_zimbraDumpsterPurgeEnabled,trueValue:"TRUE",falseValue:"FALSE",visibilityChecks:[[ZaItem.hasReadPermission],[XForm.checkInstanceValue,ZaCos.A_zimbraDumpsterEnabled,"TRUE"]],visibilityChangeEventSources:[ZaCos.A_zimbraDumpsterEnabled]},{ref:ZaCos.A_zimbraFeatureDocumentEditingEnabled,type:_WIZ_CHECKBOX_,msgName:ZaMsg.LBL_zimbraFeatureDocumentEditingEnabled,label:ZaMsg.LBL_zimbraFeatureDocumentEditingEnabled,trueValue:"TRUE",falseValue:"FALSE"}]},{type:_ZAWIZ_TOP_GROUPER_,label:ZaMsg.NAD_zimbraMailFeature,id:"cos_form_features_mail",enableDisableChecks:[ZaNewCosXWizard.isMailFeatureEnabled],enableDisableChangeEventSources:[ZaCos.A_zimbraFeatureMailEnabled],visibilityChecks:[[ZATopGrouper_XFormItem.isGroupVisible,[ZaCos.A_zimbraFeatureMailPriorityEnabled,ZaCos.A_zimbraFeatureFlaggingEnabled,ZaCos.A_zimbraImapEnabled,ZaCos.A_zimbraPop3Enabled,ZaCos.A_zimbraFeatureWebClientEnabled,ZaCos.A_zimbraFeatureImapDataSourceEnabled,ZaCos.A_zimbraFeaturePop3DataSourceEnabled,ZaCos.A_zimbraFeatureMailForwardingEnabled,ZaCos.A_zimbraFeatureMailSendLaterEnabled,ZaCos.A_zimbraFeatureConversationsEnabled,ZaCos.A_zimbraFeatureFiltersEnabled,ZaCos.A_zimbraFeatureOutOfOfficeReplyEnabled,ZaCos.A_zimbraFeatureNewMailNotificationEnabled,ZaCos.A_zimbraFeatureIdentitiesEnabled,ZaCos.A_zimbraFeatureReadReceiptsEnabled]]],items:[{ref:ZaCos.A_zimbraFeatureMailPriorityEnabled,type:_WIZ_CHECKBOX_,msgName:ZaMsg.LBL_zimbraFeatureMailPriorityEnabled,label:ZaMsg.LBL_zimbraFeatureMailPriorityEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaCos.A_zimbraFeatureFlaggingEnabled,type:_WIZ_CHECKBOX_,msgName:ZaMsg.LBL_zimbraFeatureFlaggingEnabled,label:ZaMsg.LBL_zimbraFeatureFlaggingEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaCos.A_zimbraImapEnabled,type:_WIZ_CHECKBOX_,msgName:ZaMsg.LBL_zimbraImapEnabled,label:ZaMsg.LBL_zimbraImapEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaCos.A_zimbraPop3Enabled,type:_WIZ_CHECKBOX_,msgName:ZaMsg.LBL_zimbraPop3Enabled,label:ZaMsg.LBL_zimbraPop3Enabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaCos.A_zimbraFeatureWebClientEnabled,type:_WIZ_CHECKBOX_,msgName:ZaMsg.LBL_zimbraFeatureWebClientEnabled,label:ZaMsg.LBL_zimbraFeatureWebClientEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaCos.A_zimbraFeatureImapDataSourceEnabled,type:_WIZ_CHECKBOX_,msgName:ZaMsg.LBL_zimbraExternalImapEnabled,label:ZaMsg.LBL_zimbraExternalImapEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaCos.A_zimbraFeaturePop3DataSourceEnabled,type:_WIZ_CHECKBOX_,msgName:ZaMsg.LBL_zimbraExternalPop3Enabled,label:ZaMsg.LBL_zimbraExternalPop3Enabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaCos.A_zimbraFeatureMailForwardingEnabled,type:_WIZ_CHECKBOX_,msgName:ZaMsg.LBL_zimbraFeatureMailForwardingEnabled,label:ZaMsg.LBL_zimbraFeatureMailForwardingEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaCos.A_zimbraFeatureMailSendLaterEnabled,type:_WIZ_CHECKBOX_,msgName:ZaMsg.LBL_zimbraFeatureMailSendLaterEnabled,label:ZaMsg.LBL_zimbraFeatureMailSendLaterEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaCos.A_zimbraFeatureConversationsEnabled,type:_WIZ_CHECKBOX_,msgName:ZaMsg.LBL_zimbraFeatureConversationsEnabled,label:ZaMsg.LBL_zimbraFeatureConversationsEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaCos.A_zimbraFeatureFiltersEnabled,type:_WIZ_CHECKBOX_,msgName:ZaMsg.LBL_zimbraFeatureFiltersEnabled,label:ZaMsg.LBL_zimbraFeatureFiltersEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaCos.A_zimbraFeatureOutOfOfficeReplyEnabled,type:_WIZ_CHECKBOX_,msgName:ZaMsg.LBL_zimbraFeatureOutOfOfficeReplyEnabled,label:ZaMsg.LBL_zimbraFeatureOutOfOfficeReplyEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaCos.A_zimbraFeatureNewMailNotificationEnabled,type:_WIZ_CHECKBOX_,msgName:ZaMsg.LBL_zimbraFeatureNewMailNotificationEnabled,label:ZaMsg.LBL_zimbraFeatureNewMailNotificationEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaCos.A_zimbraFeatureIdentitiesEnabled,type:_WIZ_CHECKBOX_,msgName:ZaMsg.LBL_zimbraFeatureIdentitiesEnabled,label:ZaMsg.LBL_zimbraFeatureIdentitiesEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaCos.A_zimbraFeatureReadReceiptsEnabled,type:_WIZ_CHECKBOX_,label:ZaMsg.LBL_zimbraFeatureReadReceiptsEnabled,trueValue:"TRUE",falseValue:"FALSE"}]},{type:_ZAWIZ_TOP_GROUPER_,label:ZaMsg.NAD_zimbraContactFeature,id:"cos_form_features_contact",enableDisableChecks:[ZaCosXFormView.isContactsFeatureEnabled],enableDisableChangeEventSources:[ZaCos.A_zimbraFeatureContactsEnabled],visibilityChecks:[[ZATopGrouper_XFormItem.isGroupVisible,[ZaCos.A_zimbraFeatureDistributionListFolderEnabled]]],items:[{ref:ZaCos.A_zimbraFeatureDistributionListFolderEnabled,type:_WIZ_CHECKBOX_,msgName:ZaMsg.MSG_zimbraFeatureDistributionListFolderEnabled,label:ZaMsg.LBL_zimbraFeatureDistributionListFolderEnabled,trueValue:"TRUE",falseValue:"FALSE"}]},{type:_ZAWIZ_TOP_GROUPER_,label:ZaMsg.NAD_zimbraCalendarFeature,id:"cos_form_features_calendar",enableDisableChecks:[ZaNewCosXWizard.isCalendarFeatureEnabled],enableDisableChangeEventSources:[ZaCos.A_zimbraFeatureCalendarEnabled],visibilityChecks:[[ZATopGrouper_XFormItem.isGroupVisible,[ZaCos.A_zimbraFeatureGroupCalendarEnabled,ZaCos.A_zimbraFeatureCalendarReminderDeviceEmailEnabled]]],items:[{ref:ZaCos.A_zimbraFeatureGroupCalendarEnabled,type:_WIZ_CHECKBOX_,msgName:ZaMsg.LBL_zimbraFeatureGroupCalendarEnabled,label:ZaMsg.LBL_zimbraFeatureGroupCalendarEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaCos.A_zimbraFeatureCalendarReminderDeviceEmailEnabled,type:_WIZ_CHECKBOX_,msgName:ZaMsg.LBL_zimbraFeatureCalendarReminderDeviceEmailEnabled,label:ZaMsg.LBL_zimbraFeatureCalendarReminderDeviceEmailEnabled,trueValue:"TRUE",falseValue:"FALSE"}]},{type:_ZAWIZ_TOP_GROUPER_,label:ZaMsg.NAD_zimbraSearchFeature,id:"cos_form_features_search",visibilityChecks:[[ZATopGrouper_XFormItem.isGroupVisible,[ZaCos.A_zimbraFeatureAdvancedSearchEnabled,ZaCos.A_zimbraFeatureSavedSearchesEnabled,ZaCos.A_zimbraFeatureInitialSearchPreferenceEnabled,ZaCos.A_zimbraFeaturePeopleSearchEnabled]]],items:[{ref:ZaCos.A_zimbraFeatureAdvancedSearchEnabled,type:_WIZ_CHECKBOX_,msgName:ZaMsg.LBL_zimbraFeatureAdvancedSearchEnabled,label:ZaMsg.LBL_zimbraFeatureAdvancedSearchEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaCos.A_zimbraFeatureSavedSearchesEnabled,type:_WIZ_CHECKBOX_,msgName:ZaMsg.LBL_zimbraFeatureSavedSearchesEnabled,label:ZaMsg.LBL_zimbraFeatureSavedSearchesEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaCos.A_zimbraFeatureInitialSearchPreferenceEnabled,type:_WIZ_CHECKBOX_,msgName:ZaMsg.LBL_zimbraFeatureInitialSearchPreferenceEnabled,label:ZaMsg.LBL_zimbraFeatureInitialSearchPreferenceEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaCos.A_zimbraFeaturePeopleSearchEnabled,type:_WIZ_CHECKBOX_,msgName:ZaMsg.LBL_zimbraFeaturePeopleSearchEnabled,label:ZaMsg.LBL_zimbraFeaturePeopleSearchEnabled,trueValue:"TRUE",falseValue:"FALSE"}]},{type:_ZAWIZ_TOP_GROUPER_,label:ZaMsg.NAD_zimbraSMIMEFeature,id:"cos_form_features_smime",visibilityChecks:[[ZATopGrouper_XFormItem.isGroupVisible,[ZaCos.A_zimbraFeatureSMIMEEnabled]]],items:[{ref:ZaCos.A_zimbraFeatureSMIMEEnabled,type:_WIZ_CHECKBOX_,msgName:ZaMsg.LBL_zimbraFeatureSMIMEEnabled,label:ZaMsg.LBL_zimbraFeatureSMIMEEnabled,trueValue:"TRUE",falseValue:"FALSE"}]}];
p.items=t;
c.push(p)
}if(y){var o={type:_CASE_,caseKey:y,id:"cos_for_prefs_tab",width:"100%",cellpadding:0,numCols:1};
var B=[{type:_ZAWIZ_TOP_GROUPER_,id:"account_prefs_general",label:ZaMsg.NAD_GeneralOptions,visibilityChecks:[[ZATopGrouper_XFormItem.isGroupVisible,[ZaCos.A_zimbraPrefClientType,ZaCos.A_zimbraPrefShowSearchString,ZaCos.A_zimbraPrefMailInitialSearch,ZaCos.A_zimbraPrefImapSearchFoldersEnabled,ZaCos.A_zimbraPrefUseKeyboardShortcuts,ZaCos.A_zimbraPrefWarnOnExit,ZaCos.A_zimbraPrefAdminConsoleWarnOnExit,ZaCos.A_zimbraPrefShowSelectionCheckbox,ZaCos.A_zimbraJunkMessagesIndexingEnabled,ZaCos.A_zimbraPrefLocale]]],items:[{ref:ZaCos.A_zimbraPrefClientType,type:_OSELECT1_,msgName:ZaMsg.MSG_zimbraPrefClientType,label:ZaMsg.LBL_zimbraPrefClientType,labelLocation:_LEFT_},{ref:ZaCos.A_zimbraPrefShowSearchString,type:_WIZ_CHECKBOX_,msgName:ZaMsg.LBL_zimbraPrefShowSearchString,label:ZaMsg.LBL_zimbraPrefShowSearchString,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaCos.A_zimbraPrefMailInitialSearch,type:_TEXTFIELD_,cssClass:"admin_xform_name_input",msgName:ZaMsg.LBL_zimbraPrefMailInitialSearch,label:ZaMsg.LBL_zimbraPrefMailInitialSearch,labelLocation:_LEFT_},{ref:ZaCos.A_zimbraPrefImapSearchFoldersEnabled,type:_WIZ_CHECKBOX_,msgName:ZaMsg.LBL_zimbraPrefImapSearchFoldersEnabled,label:ZaMsg.LBL_zimbraPrefImapSearchFoldersEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaCos.A_zimbraPrefUseKeyboardShortcuts,type:_WIZ_CHECKBOX_,msgName:ZaMsg.LBL_zimbraPrefUseKeyboardShortcuts,label:ZaMsg.LBL_zimbraPrefUseKeyboardShortcuts,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaCos.A_zimbraPrefWarnOnExit,type:_WIZ_CHECKBOX_,msgName:ZaMsg.LBL_zimbraPrefWarnOnExit,label:ZaMsg.LBL_zimbraPrefWarnOnExit,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaCos.A_zimbraPrefAdminConsoleWarnOnExit,type:_WIZ_CHECKBOX_,msgName:ZabMsg.LBL_zimbraPrefAdminConsoleWarnOnExit,label:ZabMsg.LBL_zimbraPrefAdminConsoleWarnOnExit,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaCos.A_zimbraPrefShowSelectionCheckbox,type:_WIZ_CHECKBOX_,msgName:ZaMsg.LBL_zimbraPrefShowSelectionCheckbox,label:ZaMsg.LBL_zimbraPrefShowSelectionCheckbox,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaCos.A_zimbraJunkMessagesIndexingEnabled,type:_WIZ_CHECKBOX_,msgName:ZaMsg.LBL_zimbraJunkMessagesIndexingEnabled,label:ZaMsg.LBL_zimbraJunkMessagesIndexingEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaCos.A_zimbraPrefLocale,type:_OSELECT1_,msgName:ZaMsg.LBL_zimbraPrefLocale,label:ZaMsg.LBL_zimbraPrefLocale,labelLocation:_LEFT_,labelCssStyle:"white-space:normal;",nowrap:false,labelWrap:true,choices:ZaSettings.getLocaleChoices()}]},{type:_ZAWIZ_TOP_GROUPER_,id:"cos_prefs_standard_client",label:ZaMsg.NAD_MailOptionsStandardClient,visibilityChecks:[[ZATopGrouper_XFormItem.isGroupVisible,[ZaCos.A_zimbraMaxMailItemsPerPage,ZaCos.A_zimbraPrefMailItemsPerPage]]],items:[{ref:ZaCos.A_zimbraMaxMailItemsPerPage,type:_OSELECT1_,msgName:ZaMsg.MSG_zimbraMaxMailItemsPerPage,label:ZaMsg.LBL_zimbraMaxMailItemsPerPage,labelLocation:_LEFT_,choices:[10,25,50,100,250,500,1000],editable:true,inputSize:4},{ref:ZaCos.A_zimbraPrefMailItemsPerPage,type:_OSELECT1_,msgName:ZaMsg.MSG_zimbraPrefMailItemsPerPage,label:ZaMsg.LBL_zimbraPrefMailItemsPerPage,labelLocation:_LEFT_}]},{type:_ZAWIZ_TOP_GROUPER_,id:"cos_prefs_mail_general",label:ZaMsg.NAD_MailOptions,visibilityChecks:[[ZATopGrouper_XFormItem.isGroupVisible,[ZaCos.A_zimbraPrefMessageViewHtmlPreferred,ZaCos.A_zimbraPrefDisplayExternalImages,ZaCos.A_zimbraPrefGroupMailBy,ZaCos.A_zimbraPrefMailDefaultCharset,ZaCos.A_zimbraPrefCalendarToasterEnabled,ZaCos.A_zimbraPrefItemsPerVirtualPage]]],items:[{ref:ZaCos.A_zimbraPrefMessageViewHtmlPreferred,type:_WIZ_CHECKBOX_,msgName:ZaMsg.LBL_zimbraPrefMessageViewHtmlPreferred,label:ZaMsg.LBL_zimbraPrefMessageViewHtmlPreferred,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaCos.A_zimbraPrefDisplayExternalImages,type:_WIZ_CHECKBOX_,msgName:ZaMsg.LBL_zimbraPrefDisplayExternalImages,label:ZaMsg.LBL_zimbraPrefDisplayExternalImages,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaCos.A_zimbraPrefGroupMailBy,type:_OSELECT1_,msgName:ZaMsg.LBL_zimbraPrefGroupMailBy,label:ZaMsg.LBL_zimbraPrefGroupMailBy,labelLocation:_LEFT_},{ref:ZaCos.A_zimbraPrefMailDefaultCharset,type:_OSELECT1_,msgName:ZaMsg.LBL_zimbraPrefMailDefaultCharset,label:ZaMsg.LBL_zimbraPrefMailDefaultCharset,labelLocation:_LEFT_,labelCssStyle:"white-space:normal;",nowrap:false,labelWrap:true},{ref:ZaCos.A_zimbraPrefMailToasterEnabled,type:_WIZ_CHECKBOX_,msgName:ZaMsg.LBL_zimbraPrefMailToasterEnabled,label:ZaMsg.LBL_zimbraPrefMailToasterEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaCos.A_zimbraPrefMessageIdDedupingEnabled,type:_WIZ_CHECKBOX_,msgName:ZaMsg.LBL_zimbraPrefMessageIdDedupingEnabled,label:ZaMsg.LBL_zimbraPrefMessageIdDedupingEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaCos.A_zimbraPrefItemsPerVirtualPage,type:_TEXTFIELD_,colSizes:["200px","*"],colSpan:2,msgName:ZaMsg.LBL_zimbraPrefItemsPerVirtualPage,label:ZaMsg.LBL_zimbraPrefItemsPerVirtualPage,labelLocation:_LEFT_}]},{type:_ZAWIZ_TOP_GROUPER_,id:"cos_prefs_mail_receiving",label:ZaMsg.NAD_MailOptionsReceiving,visibilityChecks:[[ZATopGrouper_XFormItem.isGroupVisible,[ZaCos.A_zimbraPrefMailSoundsEnabled,ZaCos.A_zimbraPrefMailFlashIcon,ZaCos.A_zimbraPrefMailFlashTitle,ZaCos.A_zimbraPrefMailPollingInterval,ZaCos.A_zimbraMailMinPollingInterval,ZaCos.A_zimbraPrefOutOfOfficeCacheDuration,ZaCos.A_zimbraPrefMailSendReadReceipts]]],items:[{ref:ZaCos.A_zimbraPrefMailSoundsEnabled,type:_WIZ_CHECKBOX_,msgName:ZaMsg.LBL_playSound,label:ZaMsg.LBL_playSound,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaCos.A_zimbraPrefMailFlashIcon,type:_WIZ_CHECKBOX_,msgName:ZaMsg.LBL_flashIcon,label:ZaMsg.LBL_flashIcon,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaCos.A_zimbraPrefMailFlashTitle,type:_WIZ_CHECKBOX_,msgName:ZaMsg.LBL_flashTitle,label:ZaMsg.LBL_flashTitle,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaCos.A_zimbraPrefMailPollingInterval,type:_OSELECT1_,msgName:ZaMsg.MSG_zimbraPrefMailPollingInterval,label:ZaMsg.LBL_zimbraPrefMailPollingInterval,labelLocation:_LEFT_,onChange:ZaNewCosXWizard.validatePollingInterval,labelCssStyle:"white-space:normal;",nowrap:false,labelWrap:true},{ref:ZaCos.A_zimbraMailMinPollingInterval,type:_LIFETIME_,msgName:ZaMsg.MSG_zimbraMailMinPollingInterval,label:ZaMsg.LBL_zimbraMailMinPollingInterval,labelLocation:_LEFT_,onChange:ZaNewCosXWizard.validatePollingInterval,labelCssStyle:"white-space:normal;",nowrap:false,labelWrap:true},{ref:ZaCos.A_zimbraPrefOutOfOfficeCacheDuration,type:_LIFETIME_,msgName:ZaMsg.MSG_zimbraPrefOutOfOfficeCacheDuration,label:ZaMsg.LBL_zimbraPrefOutOfOfficeCacheDuration,labelLocation:_LEFT_,labelCssStyle:"white-space:normal;",nowrap:false,labelWrap:true},{ref:ZaCos.A_zimbraPrefMailSendReadReceipts,type:_OSELECT1_,label:ZaMsg.LBL_zimbraPrefMailSendReadReceipts,labelLocation:_LEFT_,nowrap:false,labelWrap:true}]},{type:_ZAWIZ_TOP_GROUPER_,id:"cos_prefs_mail_sending",borderCssClass:"LowPaddedTopGrouperBorder",label:ZaMsg.NAD_MailOptionsSending,visibilityChecks:[[ZATopGrouper_XFormItem.isGroupVisible,[ZaCos.A_zimbraPrefSaveToSent,ZaCos.A_zimbraAllowAnyFromAddress]]],items:[{ref:ZaCos.A_zimbraPrefSaveToSent,type:_WIZ_CHECKBOX_,msgName:ZaMsg.LBL_zimbraPrefSaveToSent,label:ZaMsg.LBL_zimbraPrefSaveToSent,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaCos.A_zimbraAllowAnyFromAddress,type:_WIZ_CHECKBOX_,msgName:ZaMsg.LBL_zimbraAllowAnyFromAddress,label:ZaMsg.LBL_zimbraAllowAnyFromAddress,trueValue:"TRUE",falseValue:"FALSE"}]},{type:_ZAWIZ_TOP_GROUPER_,id:"cos_prefs_mail_sending",borderCssClass:"LowPaddedTopGrouperBorder",label:ZaMsg.NAD_MailOptionsComposing,visibilityChecks:[[ZATopGrouper_XFormItem.isGroupVisible,[ZaCos.A_zimbraPrefComposeInNewWindow,ZaCos.A_zimbraPrefComposeFormat,ZaCos.A_zimbraPrefHtmlEditorDefaultFontFamily,ZaCos.A_zimbraPrefHtmlEditorDefaultFontSize,ZaCos.A_zimbraPrefHtmlEditorDefaultFontColor,ZaCos.A_zimbraPrefForwardReplyInOriginalFormat,ZaCos.A_zimbraPrefMandatorySpellCheckEnabled,ZaCos.A_zimbraMailSignatureMaxLength,ZaCos.A_zimbraPrefAutoSaveDraftInterval]]],items:[{ref:ZaCos.A_zimbraPrefComposeInNewWindow,type:_WIZ_CHECKBOX_,msgName:ZaMsg.LBL_zimbraPrefComposeInNewWindow,label:ZaMsg.LBL_zimbraPrefComposeInNewWindow,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaCos.A_zimbraPrefComposeFormat,type:_OSELECT1_,msgName:ZaMsg.LBL_zimbraPrefComposeFormat,label:ZaMsg.LBL_zimbraPrefComposeFormat,labelLocation:_LEFT_},{ref:ZaCos.A_zimbraPrefHtmlEditorDefaultFontFamily,type:_OSELECT1_,msgName:ZaMsg.LBL_zimbraPrefHtmlEditorDefaultFontFamily,label:ZaMsg.LBL_zimbraPrefHtmlEditorDefaultFontFamily,labelLocation:_LEFT_},{ref:ZaCos.A_zimbraPrefHtmlEditorDefaultFontSize,type:_OSELECT1_,msgName:ZaMsg.LBL_zimbraPrefHtmlEditorDefaultFontSize,label:ZaMsg.LBL_zimbraPrefHtmlEditorDefaultFontSize,labelLocation:_LEFT_},{ref:ZaCos.A_zimbraPrefHtmlEditorDefaultFontColor,type:_DWT_COLORPICKER_,msgName:ZaMsg.LBL_zimbraPrefHtmlEditorDefaultFontColor,height:"25px",label:ZaMsg.LBL_zimbraPrefHtmlEditorDefaultFontColor,labelLocation:_LEFT_},{ref:ZaCos.A_zimbraPrefForwardReplyInOriginalFormat,type:_WIZ_CHECKBOX_,msgName:ZaMsg.LBL_zimbraPrefForwardReplyInOriginalFormat,label:ZaMsg.LBL_zimbraPrefForwardReplyInOriginalFormat,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaCos.A_zimbraPrefMandatorySpellCheckEnabled,type:_WIZ_CHECKBOX_,msgName:ZaMsg.LBL_zimbraPrefMandatorySpellCheckEnabled,label:ZaMsg.LBL_zimbraPrefMandatorySpellCheckEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaCos.A_zimbraMailSignatureMaxLength,type:_TEXTFIELD_,msgName:ZaMsg.LBL_zimbraMailSignatureMaxLength,label:ZaMsg.LBL_zimbraMailSignatureMaxLength,labelLocation:_LEFT_,cssClass:"admin_xform_number_input"},{ref:ZaCos.A_zimbraPrefAutoSaveDraftInterval,type:_LIFETIME_,msgName:ZaMsg.MSG_zimbraPrefAutoSaveDraftInterval,label:ZaMsg.LBL_zimbraPrefAutoSaveDraftInterval,labelLocation:_LEFT_,onChange:ZaNewCosXWizard.validatePollingInterval,labelCssStyle:"white-space:normal;",nowrap:false,labelWrap:true}]},{type:_ZAWIZ_TOP_GROUPER_,id:"cos_prefs_pop_imap",label:ZaMsg.NAD_PopImapOptions,visibilityChecks:[[ZATopGrouper_XFormItem.isGroupVisible,[ZaCos.A_zimbraPrefImapEnabled,ZaCos.A_zimbraPrefPop3Enabled]]],items:[{ref:ZaCos.A_zimbraPrefImapEnabled,type:_WIZ_CHECKBOX_,msgName:ZaMsg.LBL_zimbraPrefImapEnabled,label:ZaMsg.LBL_zimbraPrefImapEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaCos.A_zimbraPrefPop3Enabled,type:_WIZ_CHECKBOX_,msgName:ZaMsg.LBL_zimbraPrefPop3Enabled,label:ZaMsg.LBL_zimbraPrefPop3Enabled,trueValue:"TRUE",falseValue:"FALSE"}]},{type:_ZAWIZ_TOP_GROUPER_,id:"cos_prefs_contacts_general",label:ZaMsg.NAD_ContactsOptions,visibilityChecks:[[ZATopGrouper_XFormItem.isGroupVisible,[ZaCos.A_zimbraPrefAutoAddAddressEnabled,ZaCos.A_zimbraPrefGalAutoCompleteEnabled]]],items:[{ref:ZaCos.A_zimbraPrefAutoAddAddressEnabled,type:_WIZ_CHECKBOX_,msgName:ZaMsg.LBL_zimbraPrefAutoAddAddressEnabled,label:ZaMsg.LBL_zimbraPrefAutoAddAddressEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaCos.A_zimbraPrefGalAutoCompleteEnabled,type:_WIZ_CHECKBOX_,msgName:ZaMsg.LBL_zimbraPrefGalAutoCompleteEnabled,label:ZaMsg.LBL_zimbraPrefGalAutoCompleteEnabled,trueValue:"TRUE",falseValue:"FALSE"}]},{type:_ZAWIZ_TOP_GROUPER_,id:"cos_prefs_calendar_general",label:ZaMsg.NAD_CalendarOptions,visibilityChecks:[[ZATopGrouper_XFormItem.isGroupVisible,[ZaCos.A_zimbraPrefTimeZoneId,ZaCos.A_zimbraPrefCalendarApptReminderWarningTime,ZaCos.A_zimbraPrefCalendarInitialView,ZaCos.A_zimbraPrefCalendarFirstDayOfWeek,ZaCos.A_zimbraPrefCalendarApptVisibility,ZaCos.A_zimbraPrefAppleIcalDelegationEnabled,ZaCos.A_zimbraPrefCalendarShowPastDueReminders,ZaCos.A_zimbraPrefCalendarToasterEnabled,ZaCos.A_zimbraPrefCalendarAllowCancelEmailToSelf,ZaCos.A_zimbraPrefCalendarAllowPublishMethodInvite,ZaCos.A_zimbraPrefCalendarAllowForwardedInvite,ZaCos.A_zimbraPrefCalendarReminderFlashTitle,ZaCos.A_zimbraPrefCalendarReminderSoundsEnabled,ZaCos.A_zimbraPrefCalendarSendInviteDeniedAutoReply,ZaCos.A_zimbraPrefCalendarAutoAddInvites,ZaCos.A_zimbraPrefCalendarNotifyDelegatedChanges,ZaCos.A_zimbraPrefCalendarAlwaysShowMiniCal,ZaCos.A_zimbraPrefCalendarUseQuickAdd,ZaCos.A_zimbraPrefUseTimeZoneListInCalendar]]],items:[{ref:ZaCos.A_zimbraPrefTimeZoneId,type:_OSELECT1_,msgName:ZaMsg.MSG_zimbraPrefTimeZoneId,label:ZaMsg.LBL_zimbraPrefTimeZoneId,labelLocation:_LEFT_,labelCssStyle:"white-space:normal;",nowrap:false,labelWrap:true},{ref:ZaCos.A_zimbraPrefCalendarApptReminderWarningTime,type:_OSELECT1_,msgName:ZaMsg.MSG_zimbraPrefCalendarApptReminderWarningTime,label:ZaMsg.LBL_zimbraPrefCalendarApptReminderWarningTime,labelLocation:_LEFT_,labelCssStyle:"white-space:normal;",nowrap:false,labelWrap:true},{ref:ZaCos.A_zimbraPrefCalendarInitialView,type:_OSELECT1_,msgName:ZaMsg.MSG_zimbraPrefCalendarInitialView,label:ZaMsg.LBL_zimbraPrefCalendarInitialView,labelLocation:_LEFT_},{ref:ZaCos.A_zimbraPrefCalendarFirstDayOfWeek,type:_OSELECT1_,msgName:ZaMsg.LBL_zimbraPrefCalendarFirstDayOfWeek,label:ZaMsg.LBL_zimbraPrefCalendarFirstDayOfWeek,labelLocation:_LEFT_,labelCssStyle:"white-space:normal;",nowrap:false,labelWrap:true},{ref:ZaCos.A_zimbraPrefCalendarApptVisibility,type:_OSELECT1_,msgName:ZaMsg.LBL_zimbraPrefCalendarApptVisibility,label:ZaMsg.LBL_zimbraPrefCalendarApptVisibility,labelLocation:_LEFT_,labelCssStyle:"white-space:normal;",nowrap:false,labelWrap:true},{ref:ZaCos.A_zimbraPrefAppleIcalDelegationEnabled,type:_WIZ_CHECKBOX_,msgName:ZaMsg.MSG_zimbraPrefAppleIcalDelegationEnabled,label:ZaMsg.LBL_zimbraPrefAppleIcalDelegationEnabled,trueValue:"TRUE",falseValue:"FALSE",labelCssStyle:"white-space:normal;",nowrap:false,labelWrap:true},{ref:ZaCos.A_zimbraPrefCalendarShowPastDueReminders,type:_WIZ_CHECKBOX_,msgName:ZaMsg.MSG_zimbraPrefCalendarShowPastDueReminders,label:ZaMsg.LBL_zimbraPrefCalendarShowPastDueReminders,trueValue:"TRUE",falseValue:"FALSE",labelCssStyle:"white-space:normal;",nowrap:false,labelWrap:true},{ref:ZaCos.A_zimbraPrefCalendarToasterEnabled,type:_WIZ_CHECKBOX_,msgName:ZaMsg.MSG_zimbraPrefCalendarToasterEnabled,label:ZaMsg.LBL_zimbraPrefCalendarToasterEnabled,trueValue:"TRUE",falseValue:"FALSE",labelCssStyle:"white-space:normal;",nowrap:false,labelWrap:true},{ref:ZaCos.A_zimbraPrefCalendarAllowCancelEmailToSelf,type:_WIZ_CHECKBOX_,msgName:ZaMsg.MSG_zimbraPrefCalendarAllowCancelEmailToSelf,label:ZaMsg.LBL_zimbraPrefCalendarAllowCancelEmailToSelf,trueValue:"TRUE",falseValue:"FALSE",labelCssStyle:"white-space:normal;",nowrap:false,labelWrap:true},{ref:ZaCos.A_zimbraPrefCalendarAllowPublishMethodInvite,type:_WIZ_CHECKBOX_,msgName:ZaMsg.MSG_zimbraPrefCalendarAllowPublishMethodInvite,label:ZaMsg.LBL_zimbraPrefCalendarAllowPublishMethodInvite,trueValue:"TRUE",falseValue:"FALSE",labelCssStyle:"white-space:normal;",nowrap:false,labelWrap:true},{ref:ZaCos.A_zimbraPrefCalendarAllowForwardedInvite,type:_WIZ_CHECKBOX_,msgName:ZaMsg.MSG_zimbraPrefCalendarAllowForwardedInvite,label:ZaMsg.LBL_zimbraPrefCalendarAllowForwardedInvite,trueValue:"TRUE",falseValue:"FALSE",labelCssStyle:"white-space:normal;",nowrap:false,labelWrap:true},{ref:ZaCos.A_zimbraPrefCalendarReminderFlashTitle,type:_WIZ_CHECKBOX_,msgName:ZaMsg.MSG_zimbraPrefCalendarReminderFlashTitle,label:ZaMsg.LBL_zimbraPrefCalendarReminderFlashTitle,trueValue:"TRUE",falseValue:"FALSE",labelCssStyle:"white-space:normal;",nowrap:false,labelWrap:true},{ref:ZaCos.A_zimbraPrefCalendarReminderSoundsEnabled,type:_WIZ_CHECKBOX_,msgName:ZaMsg.MSG_zimbraPrefCalendarReminderSoundsEnabled,label:ZaMsg.LBL_zimbraPrefCalendarReminderSoundsEnabled,trueValue:"TRUE",falseValue:"FALSE",labelCssStyle:"white-space:normal;",nowrap:false,labelWrap:true},{ref:ZaCos.A_zimbraPrefCalendarSendInviteDeniedAutoReply,type:_WIZ_CHECKBOX_,msgName:ZaMsg.MSG_zimbraPrefCalendarSendInviteDeniedAutoReply,label:ZaMsg.LBL_zimbraPrefCalendarSendInviteDeniedAutoReply,trueValue:"TRUE",falseValue:"FALSE",labelCssStyle:"white-space:normal;",nowrap:false,labelWrap:true},{ref:ZaCos.A_zimbraPrefCalendarAutoAddInvites,type:_WIZ_CHECKBOX_,msgName:ZaMsg.LBL_zimbraPrefCalendarAutoAddInvites,label:ZaMsg.LBL_zimbraPrefCalendarAutoAddInvites,trueValue:"TRUE",falseValue:"FALSE",labelCssStyle:"white-space:normal;",nowrap:false,labelWrap:true},{ref:ZaCos.A_zimbraPrefCalendarNotifyDelegatedChanges,type:_WIZ_CHECKBOX_,msgName:ZaMsg.LBL_zimbraPrefCalendarNotifyDelegatedChanges,label:ZaMsg.LBL_zimbraPrefCalendarNotifyDelegatedChanges,trueValue:"TRUE",falseValue:"FALSE",labelCssStyle:"white-space:normal;",nowrap:false,labelWrap:true},{ref:ZaCos.A_zimbraPrefCalendarAlwaysShowMiniCal,type:_WIZ_CHECKBOX_,msgName:ZaMsg.LBL_zimbraPrefCalendarAlwaysShowMiniCal,label:ZaMsg.LBL_zimbraPrefCalendarAlwaysShowMiniCal,trueValue:"TRUE",falseValue:"FALSE",labelCssStyle:"white-space:normal;",nowrap:false,labelWrap:true},{ref:ZaCos.A_zimbraPrefCalendarUseQuickAdd,type:_WIZ_CHECKBOX_,msgName:ZaMsg.NAD_useQuickAdd,label:ZaMsg.LBL_zimbraPrefCalendarUseQuickAdd,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaCos.A_zimbraPrefUseTimeZoneListInCalendar,type:_WIZ_CHECKBOX_,msgName:ZaMsg.LBL_zimbraPrefUseTimeZoneListInCalendar,label:ZaMsg.LBL_zimbraPrefUseTimeZoneListInCalendar,trueValue:"TRUE",falseValue:"FALSE"}]}];
o.items=B;
c.push(o)
}if(x){var n={type:_CASE_,numCols:1,caseKey:x};
var b=[{type:_GROUP_,numCols:2,colSizes:["275","auto"],items:[{ref:ZaCos.A_zimbraPrefSkin,type:_OSELECT1_,msgName:ZaMsg.LBL_zimbraPrefSkin,label:ZaMsg.LBL_zimbraPrefSkin,labelLocation:_LEFT_,choices:ZaNewCosXWizard.themeChoices,visibilityChecks:[ZaNewCosXWizard.gotSkins]}]},{type:_GROUP_,items:[{type:_OUTPUT_,ref:ZaCos.A_zimbraPrefSkin,label:ZaMsg.LBL_zimbraPrefSkin,labelLocation:_LEFT_,visibilityChecks:[ZaNewCosXWizard.gotNoSkins]}]},{type:_GROUP_,numCols:1,colSizes:["auto"],items:[{type:_ZASELECT_RADIO_,selectRef:ZaCos.A_zimbraAvailableSkin,ref:ZaCos.A_zimbraAvailableSkin,choices:ZaNewCosXWizard.themeChoices,visibilityChecks:[Case_XFormItem.prototype.isCurrentTab,ZaNewCosXWizard.gotSkins],visibilityChangeEventSources:[ZaModel.currentStep],caseKey:x,caseVarRef:ZaModel.currentStep,radioBoxLabel1:ZaMsg.COS_DontLimitThemes,radioBoxLabel2:ZaMsg.COS_LimitThemesTo},{type:_DWT_ALERT_,style:DwtAlert.WARNING,iconVisible:true,visibilityChecks:[ZaNewCosXWizard.gotNoSkins],value:ZaMsg.ERROR_CANNOT_FIND_SKINS_FOR_COS},{type:_DWT_ALERT_,style:DwtAlert.WARNING,iconVisible:true,visibilityChecks:[ZaCosXFormView.gotNoSkins,[function(){return !ZaZimbraAdmin.isGlobalAdmin()
}]],value:ZaMsg.ERROR_CANNOT_FIND_SKINS_FOR_COS_OR_NO_PERM}]}];
n.items=b;
c.push(n)
}if(w){var m={type:_CASE_,caseKey:w};
var e=[{type:_GROUP_,numCols:1,colSizes:["auto"],items:[{type:_OUTPUT_,value:ZaMsg.COS_LimitZimletsTo,cssStyle:"margin-left:0;"},{type:_ZA_ZIMLET_SELECT_COMBO_,selectRef:ZaCos.A_zimbraZimletAvailableZimlets,ref:ZaCos.A_zimbraZimletAvailableZimlets,choices:ZaNewCosXWizard.zimletChoices,visibilityChecks:[Case_XFormItem.prototype.isCurrentTab],visibilityChangeEventSources:[ZaModel.currentStep],caseKey:w,caseVarRef:ZaModel.currentStep,selectLabel:"",selectLabelLocation:_NONE_}]}];
m.items=e;
c.push(m)
}if(v){var k={type:_CASE_,numCols:1,caseKey:v};
var g=[{type:_GROUP_,numCols:1,colSizes:["auto"],items:[{type:_ZASELECT_RADIO_,selectRef:ZaCos.A_zimbraMailHostPool,ref:ZaCos.A_zimbraMailHostPool,choices:ZaApp.getInstance().getServerIdListChoices(),visibilityChecks:[Case_XFormItem.prototype.isCurrentTab],visibilityChangeEventSources:[ZaModel.currentStep],caseKey:v,caseVarRef:ZaModel.currentStep,radioBoxLabel1:ZaMsg.ServerPool_Donotlimit,radioBoxLabel2:ZaMsg.COS_LimitServersTo}]}];
k.items=g;
c.push(k)
}if(s){var h={type:_CASE_,numCols:1,colSizes:["auto"],caseKey:s,width:"100%",cellpadding:0,id:"cos_form_advanced_tab"};
var l=[{type:_DWT_ALERT_,style:DwtAlert.WARNING,iconVisible:false,content:ZaMsg.NAD_ZERO_UNLIMETED},{type:_ZAWIZ_TOP_GROUPER_,id:"cos_attachment_settings",label:ZaMsg.NAD_AttachmentsGrouper,visibilityChecks:[[ZATopGrouper_XFormItem.isGroupVisible,[ZaCos.A_zimbraAttachmentsBlocked]]],items:[{ref:ZaCos.A_zimbraAttachmentsBlocked,type:_WIZ_CHECKBOX_,msgName:ZaMsg.NAD_RemoveAllAttachments,label:ZaMsg.NAD_RemoveAllAttachments,labelLocation:_LEFT_,trueValue:"TRUE",falseValue:"FALSE",labelCssClass:"xform_label",align:_LEFT_}]},{type:_ZAWIZ_TOP_GROUPER_,id:"cos_quota_settings",label:ZaMsg.NAD_QuotaGrouper,visibilityChecks:[[ZATopGrouper_XFormItem.isGroupVisible,[ZaCos.A_zimbraMailForwardingAddressMaxLength,ZaCos.A_zimbraMailForwardingAddressMaxNumAddrs,ZaCos.A_zimbraMailQuota,ZaCos.A_zimbraContactMaxNumEntries,ZaCos.A_zimbraQuotaWarnPercent,ZaCos.A_zimbraQuotaWarnInterval,ZaCos.A_zimbraQuotaWarnMessage]]],items:[{ref:ZaCos.A_zimbraMailForwardingAddressMaxLength,type:_TEXTFIELD_,msgName:ZaMsg.MSG_zimbraMailForwardingAddressMaxLength,label:ZaMsg.LBL_zimbraMailForwardingAddressMaxLength,labelLocation:_LEFT_,cssClass:"admin_xform_number_input"},{ref:ZaCos.A_zimbraMailForwardingAddressMaxNumAddrs,type:_TEXTFIELD_,msgName:ZaMsg.MSG_zimbraMailForwardingAddressMaxNumAddrs,label:ZaMsg.LBL_zimbraMailForwardingAddressMaxNumAddrs,labelLocation:_LEFT_,cssClass:"admin_xform_number_input"},{ref:ZaCos.A_zimbraMailQuota,type:_TEXTFIELD_,msgName:ZaMsg.MSG_zimbraMailQuota,label:ZaMsg.LBL_zimbraMailQuota,labelLocation:_LEFT_,cssClass:"admin_xform_number_input"},{ref:ZaCos.A_zimbraContactMaxNumEntries,type:_TEXTFIELD_,msgName:ZaMsg.MSG_zimbraContactMaxNumEntries,label:ZaMsg.LBL_zimbraContactMaxNumEntries,labelLocation:_LEFT_,cssClass:"admin_xform_number_input"},{ref:ZaCos.A_zimbraQuotaWarnPercent,type:_INPUT_,msgName:ZaMsg.MSG_zimbraQuotaWarnPercent,label:ZaMsg.LBL_zimbraQuotaWarnPercent,labelLocation:_LEFT_,cssClass:"admin_xform_number_input"},{ref:ZaCos.A_zimbraQuotaWarnInterval,type:_LIFETIME_,msgName:ZaMsg.MSG_zimbraQuotaWarnInterval,label:ZaMsg.LBL_zimbraQuotaWarnInterval,labelLocation:_LEFT_},{ref:ZaCos.A_zimbraQuotaWarnMessage,type:_TEXTAREA_,msgName:ZaMsg.MSG_zimbraQuotaWarnMessage,label:ZaMsg.LBL_zimbraQuotaWarnMessage,labelLocation:_LEFT_,labelCssStyle:"vertical-align:top;",width:"30em"}]},{type:_ZAWIZ_TOP_GROUPER_,id:"cos_datasourcepolling_settings",visibilityChecks:[[ZATopGrouper_XFormItem.isGroupVisible,[ZaCos.A_zimbraDataSourceMinPollingInterval,ZaCos.A_zimbraDataSourcePop3PollingInterval,ZaCos.A_zimbraDataSourceImapPollingInterval,ZaCos.A_zimbraDataSourceCalendarPollingInterval,ZaCos.A_zimbraDataSourceRssPollingInterval,ZaCos.A_zimbraDataSourceCaldavPollingInterval]]],label:ZaMsg.NAD_DataSourcePolling,items:[{ref:ZaCos.A_zimbraDataSourceMinPollingInterval,type:_LIFETIME_,msgName:ZaMsg.MSG_zimbraDataSourceMinPollingInterval,label:ZaMsg.LBL_zimbraDataSourceMinPollingInterval,labelLocation:_LEFT_,onChange:ZaNewCosXWizard.validatePollingInterval,labelCssStyle:"white-space:normal;",nowrap:false,labelWrap:true},{ref:ZaCos.A_zimbraDataSourcePop3PollingInterval,type:_LIFETIME_,msgName:ZaMsg.MSG_zimbraDataSourcePop3PollingInterval,label:ZaMsg.LBL_zimbraDataSourcePop3PollingInterval,labelLocation:_LEFT_,onChange:ZaNewCosXWizard.validatePollingInterval,labelCssStyle:"white-space:normal;",nowrap:false,labelWrap:true},{ref:ZaCos.A_zimbraDataSourceImapPollingInterval,type:_LIFETIME_,msgName:ZaMsg.MSG_zimbraDataSourceImapPollingInterval,label:ZaMsg.LBL_zimbraDataSourceImapPollingInterval,labelLocation:_LEFT_,onChange:ZaNewCosXWizard.validatePollingInterval,labelCssStyle:"white-space:normal;",nowrap:false,labelWrap:true},{ref:ZaCos.A_zimbraDataSourceCalendarPollingInterval,type:_LIFETIME_,msgName:ZaMsg.MSG_zimbraDataSourceCalendarPollingInterval,label:ZaMsg.LBL_zimbraDataSourceCalendarPollingInterval,labelLocation:_LEFT_,onChange:ZaNewCosXWizard.validatePollingInterval,labelCssStyle:"white-space:normal;",nowrap:false,labelWrap:true},{ref:ZaCos.A_zimbraDataSourceRssPollingInterval,type:_LIFETIME_,msgName:ZaMsg.MSG_zimbraDataSourceRssPollingInterval,label:ZaMsg.LBL_zimbraDataSourceRssPollingInterval,labelLocation:_LEFT_,onChange:ZaNewCosXWizard.validatePollingInterval,labelCssStyle:"white-space:normal;",nowrap:false,labelWrap:true},{ref:ZaCos.A_zimbraDataSourceCaldavPollingInterval,type:_LIFETIME_,msgName:ZaMsg.MSG_zimbraDataSourceCaldavPollingInterval,label:ZaMsg.LBL_zimbraDataSourceCaldavPollingInterval,labelLocation:_LEFT_,onChange:ZaNewCosXWizard.validatePollingInterval,labelCssStyle:"white-space:normal;",nowrap:false,labelWrap:true}]},{type:_ZAWIZ_TOP_GROUPER_,id:"cos_proxyalloweddomain_settings",label:ZaMsg.NAD_ProxyAllowedDomains,visibilityChecks:[[ZATopGrouper_XFormItem.isGroupVisible,[ZaCos.A_zimbraProxyAllowedDomains]]],items:[{ref:ZaCos.A_zimbraProxyAllowedDomains,msgName:ZaMsg.MSG_zimbraProxyAllowedDomains,label:ZaMsg.LBL_zimbraProxyAllowedDomains,labelLocation:_LEFT_,labelCssStyle:"vertical-align:top;",type:_REPEAT_,align:_LEFT_,repeatInstance:"",addButtonLabel:ZaMsg.NAD_ProxyAddAllowedDomain,removeButtonLabel:ZaMsg.NAD_ProxyRemoveAllowedDomain,showAddButton:true,showRemoveButton:true,showAddOnNextRow:true,items:[{ref:".",type:_TEXTFIELD_,enableDisableChecks:[],visibilityChecks:[],width:"15em"}]}]},{type:_ZAWIZ_TOP_GROUPER_,id:"cos_password_settings",label:ZaMsg.NAD_PasswordGrouper,items:[{type:_DWT_ALERT_,containerCssStyle:"padding-bottom:0;",style:DwtAlert.WARNING,iconVisible:false,content:((ZaNewCosXWizard.isAllAuthfromInternal())?ZaMsg.Alert_InternalPassword:ZaMsg.Alert_ExternalPassword)},{ref:ZaCos.A_zimbraPasswordLocked,type:_WIZ_CHECKBOX_,msgName:ZaMsg.NAD_PwdLocked,label:ZaMsg.NAD_PwdLocked,trueValue:"TRUE",falseValue:"FALSE",visibilityChecks:[],enableDisableChecks:[[ZaNewCosXWizard.isAllAuthfromInternal]]},{ref:ZaCos.A_zimbraMinPwdLength,type:_TEXTFIELD_,msgName:ZaMsg.MSG_zimbraMinPwdLength,label:ZaMsg.LBL_zimbraMinPwdLength,labelLocation:_LEFT_,cssClass:"admin_xform_number_input",visibilityChecks:[ZaItem.hasWritePermission],enableDisableChecks:[[ZaNewCosXWizard.isAllAuthfromInternal]]},{ref:ZaCos.A_zimbraMaxPwdLength,type:_TEXTFIELD_,msgName:ZaMsg.MSG_zimbraMaxPwdLength,label:ZaMsg.LBL_zimbraMaxPwdLength,labelLocation:_LEFT_,cssClass:"admin_xform_number_input",visibilityChecks:[ZaItem.hasWritePermission],enableDisableChecks:[[ZaNewCosXWizard.isAllAuthfromInternal]]},{ref:ZaCos.A_zimbraPasswordMinUpperCaseChars,type:_TEXTFIELD_,msgName:ZaMsg.MSG_zimbraPasswordMinUpperCaseChars,label:ZaMsg.LBL_zimbraPasswordMinUpperCaseChars,labelLocation:_LEFT_,cssClass:"admin_xform_number_input",visibilityChecks:[ZaItem.hasWritePermission],enableDisableChecks:[[ZaNewCosXWizard.isAllAuthfromInternal]]},{ref:ZaCos.A_zimbraPasswordMinLowerCaseChars,type:_TEXTFIELD_,msgName:ZaMsg.MSG_zimbraPasswordMinLowerCaseChars,label:ZaMsg.LBL_zimbraPasswordMinLowerCaseChars,labelLocation:_LEFT_,cssClass:"admin_xform_number_input",visibilityChecks:[ZaItem.hasWritePermission],enableDisableChecks:[[ZaNewCosXWizard.isAllAuthfromInternal]]},{ref:ZaCos.A_zimbraPasswordMinPunctuationChars,type:_TEXTFIELD_,msgName:ZaMsg.MSG_zimbraPasswordMinPunctuationChars,label:ZaMsg.LBL_zimbraPasswordMinPunctuationChars,labelLocation:_LEFT_,cssClass:"admin_xform_number_input",visibilityChecks:[ZaItem.hasWritePermission],enableDisableChecks:[[ZaNewCosXWizard.isAllAuthfromInternal]]},{ref:ZaCos.A_zimbraPasswordMinNumericChars,type:_TEXTFIELD_,msgName:ZaMsg.MSG_zimbraPasswordMinNumericChars,label:ZaMsg.LBL_zimbraPasswordMinNumericChars,labelLocation:_LEFT_,cssClass:"admin_xform_number_input",visibilityChecks:[ZaItem.hasWritePermission],enableDisableChecks:[[ZaNewCosXWizard.isAllAuthfromInternal]]},{ref:ZaCos.A_zimbraPasswordMinDigitsOrPuncs,type:_TEXTFIELD_,msgName:ZaMsg.MSG_zimbraPasswordMinDigitsOrPuncs,label:ZaMsg.LBL_zimbraPasswordMinDigitsOrPuncs,labelLocation:_LEFT_,cssClass:"admin_xform_number_input",visibilityChecks:[ZaItem.hasWritePermission],enableDisableChecks:[[ZaCosXFormView.isAllAuthfromInternal]]},{ref:ZaCos.A_zimbraMinPwdAge,type:_TEXTFIELD_,msgName:ZaMsg.MSG_passMinAge,label:ZaMsg.LBL_passMinAge,labelLocation:_LEFT_,cssClass:"admin_xform_number_input",visibilityChecks:[],enableDisableChecks:[[ZaNewCosXWizard.isAllAuthfromInternal]]},{ref:ZaCos.A_zimbraMaxPwdAge,type:_TEXTFIELD_,msgName:ZaMsg.MSG_passMaxAge,label:ZaMsg.LBL_passMaxAge,labelLocation:_LEFT_,cssClass:"admin_xform_number_input",visibilityChecks:[],enableDisableChecks:[[ZaNewCosXWizard.isAllAuthfromInternal]]},{ref:ZaCos.A_zimbraEnforcePwdHistory,type:_TEXTFIELD_,msgName:ZaMsg.MSG_zimbraEnforcePwdHistory,label:ZaMsg.LBL_zimbraEnforcePwdHistory,labelLocation:_LEFT_,cssClass:"admin_xform_number_input",visibilityChecks:[],enableDisableChecks:[[ZaNewCosXWizard.isAllAuthfromInternal]]},{ref:ZaCos.A_zimbraPasswordBlockCommonEnabled,type:_WIZ_CHECKBOX_,msgName:ZaMsg.NAD_RejectCommonPwd,label:ZaMsg.NAD_RejectCommonPwd,trueValue:"TRUE",falseValue:"FALSE",visibilityChecks:[],enableDisableChecks:[[ZaNewCosXWizard.isAllAuthfromInternal]]}]},{type:_ZAWIZ_TOP_GROUPER_,id:"cos_password_lockout_settings",label:ZaMsg.NAD_FailedLoginGrouper,items:[{ref:ZaCos.A_zimbraPasswordLockoutEnabled,type:_WIZ_CHECKBOX_,msgName:ZaMsg.LBL_zimbraPasswordLockoutEnabled,label:ZaMsg.LBL_zimbraPasswordLockoutEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaCos.A_zimbraPasswordLockoutMaxFailures,type:_TEXTFIELD_,enableDisableChecks:[ZaNewCosXWizard.isPasswordLockoutEnabled],enableDisableChangeEventSources:[ZaCos.A_zimbraPasswordLockoutEnabled],label:ZaMsg.LBL_zimbraPasswordLockoutMaxFailures,subLabel:ZaMsg.TTP_zimbraPasswordLockoutMaxFailuresSub,msgName:ZaMsg.MSG_zimbraPasswordLockoutMaxFailures,labelLocation:_LEFT_,cssClass:"admin_xform_number_input"},{ref:ZaCos.A_zimbraPasswordLockoutDuration,type:_LIFETIME_,enableDisableChecks:[ZaNewCosXWizard.isPasswordLockoutEnabled],enableDisableChangeEventSources:[ZaCos.A_zimbraPasswordLockoutEnabled],label:ZaMsg.LBL_zimbraPasswordLockoutDuration,subLabel:ZaMsg.TTP_zimbraPasswordLockoutDurationSub,msgName:ZaMsg.MSG_zimbraPasswordLockoutDuration,labelLocation:_LEFT_,textFieldCssClass:"admin_xform_number_input"},{ref:ZaCos.A_zimbraPasswordLockoutFailureLifetime,type:_LIFETIME_,enableDisableChecks:[ZaNewCosXWizard.isPasswordLockoutEnabled],enableDisableChangeEventSources:[ZaCos.A_zimbraPasswordLockoutEnabled],label:ZaMsg.LBL_zimbraPasswordLockoutFailureLifetime,subLabel:ZaMsg.TTP_zimbraPasswordLockoutFailureLifetimeSub,msgName:ZaMsg.MSG_zimbraPasswordLockoutFailureLifetime,labelLocation:_LEFT_,textFieldCssClass:"admin_xform_number_input",labelCssStyle:"white-space:normal;",nowrap:false,labelWrap:true}]},{type:_ZAWIZ_TOP_GROUPER_,label:ZaMsg.NAD_TimeoutGrouper,items:[{ref:ZaCos.A_zimbraAdminAuthTokenLifetime,type:_LIFETIME_,msgName:ZaMsg.MSG_zimbraAdminAuthTokenLifetime,label:ZaMsg.LBL_zimbraAdminAuthTokenLifetime,labelLocation:_LEFT_},{ref:ZaCos.A_zimbraAuthTokenLifetime,type:_LIFETIME_,msgName:ZaMsg.MSG_zimbraAuthTokenLifetime,label:ZaMsg.LBL_zimbraAuthTokenLifetime,labelLocation:_LEFT_},{ref:ZaCos.A_zimbraMailIdleSessionTimeout,type:_LIFETIME_,msgName:ZaMsg.MSG_zimbraMailIdleSessionTimeout,label:ZaMsg.LBL_zimbraMailIdleSessionTimeout,labelLocation:_LEFT_},{ref:ZaCos.A_zimbraDumpsterUserVisibleAge,type:_LIFETIME_,msgName:ZaMsg.MSG_zimbraDumpsterUserVisibleAge,label:ZaMsg.LBL_zimbraDumpsterUserVisibleAge,visibilityChecks:[[ZaItem.hasReadPermission],[XForm.checkInstanceValue,ZaCos.A_zimbraDumpsterEnabled,"TRUE"]],visibilityChangeEventSources:[ZaCos.A_zimbraDumpsterEnabled]}]},{type:_ZAWIZ_TOP_GROUPER_,label:ZaMsg.NAD_MailRetentionGrouper,items:[{type:_DWT_ALERT_,containerCssStyle:"padding-bottom:0;",style:DwtAlert.WARNING,iconVisible:false,content:ZaMsg.Alert_MailRetention},{ref:ZaCos.A_zimbraMailMessageLifetime,type:_LIFETIME2_,msgName:ZaMsg.MSG_zimbraMailMessageLifetime,label:ZaMsg.LBL_zimbraMailMessageLifetime,labelLocation:_LEFT_},{ref:ZaCos.A_zimbraMailTrashLifetime,type:_LIFETIME1_,msgName:ZaMsg.MSG_zimbraMailTrashLifetime,label:ZaMsg.LBL_zimbraMailTrashLifetime,labelLocation:_LEFT_},{ref:ZaCos.A_zimbraMailSpamLifetime,type:_LIFETIME1_,msgName:ZaMsg.MSG_zimbraMailSpamLifetime,label:ZaMsg.LBL_zimbraMailSpamLifetime,labelLocation:_LEFT_},{ref:ZaCos.A_zimbraMailDumpsterLifetime,type:_LIFETIME1_,msgName:ZaMsg.MSG_zimbraMailDumpsterLifetime,label:ZaMsg.LBL_zimbraMailDumpsterLifetime,visibilityChecks:[[ZaItem.hasReadPermission],[XForm.checkInstanceValue,ZaCos.A_zimbraDumpsterEnabled,"TRUE"],[XForm.checkInstanceValue,ZaCos.A_zimbraDumpsterPurgeEnabled,"TRUE"]],visibilityChangeEventSources:[ZaCos.A_zimbraDumpsterEnabled,ZaCos.A_zimbraDumpsterPurgeEnabled]}]},{type:_ZAWIZ_TOP_GROUPER_,label:ZaMsg.NAD_InteropGrouper,visibilityChecks:[[ZATopGrouper_XFormItem.isGroupVisible,[ZaCos.A_zimbraFreebusyExchangeUserOrg]]],items:[{ref:ZaCos.A_zimbraFreebusyExchangeUserOrg,type:_TEXTFIELD_,msgName:ZaMsg.LBL_zimbraFreebusyExchangeUserOrg,width:"250px",label:ZaMsg.LBL_zimbraFreebusyExchangeUserOrg,labelLocation:_LEFT_}]},{type:_SPACER_,height:"10px"}];
h.items=l;
c.push(h)
}u.tableCssStyle="width:100%;overflow:auto;";
this._lastStep=this.stepChoices.length;
u.items=[{type:_OUTPUT_,colSpan:2,valign:_TOP_,ref:ZaModel.currentStep,choices:this.stepChoices,valueChangeEventSources:[ZaModel.currentStep],cssStyle:"white-space: normal"},{type:_SEPARATOR_,align:_CENTER_,valign:_TOP_},{type:_SPACER_,align:_CENTER_,valign:_TOP_},{type:_SWITCH_,width:635,align:_LEFT_,valign:_TOP_,cssStyle:"white-space: normal",items:c}]
};
ZaXDialog.XFormModifiers.ZaNewCosXWizard.push(ZaNewCosXWizard.myXFormModifier);
ZaNewCosXWizard.prototype.getTabChoices=function(){return this.stepChoices
};
ZaNewCosXWizard.isAllAuthfromInternal=function(){var b=true;
var d=ZaNewCosXWizard._domainList;
if(!d){return b
}for(var c=0;
c<d.length&&b;
c++){var e=d[c];
if(e.attrs[ZaDomain.A_AuthMech]==ZaDomain.AuthMech_zimbra){b=false
}}return !b
};
ZaNewCosXWizard.validatePollingInterval=function(h,g,f){var b=f.getInstance();
this.setInstanceValue(h);
var k=b.attrs[ZaCos.A_zimbraPrefMailPollingInterval];
var d=b.attrs[ZaCos.A_zimbraMailMinPollingInterval];
var c=f.getItemsById(ZaCos.A_zimbraPrefMailPollingInterval)[0];
try{if(ZaUtil.getLifeTimeInSeconds(k)<ZaUtil.getLifeTimeInSeconds(d)){c.setError(ZaMsg.tt_mailPollingIntervalError+d);
f.parent.setDirty(false)
}else{c.clearError();
f.parent.setDirty(true)
}}catch(j){c.setError(j.message);
f.parent.setDirty(false)
}}
}if(AjxPackage.define("zimbraAdmin.search.view.ZaSearchToolBar")){ZaSearchToolBar=function(c,b,d){ZaToolBar.call(this,c,null,null,b,"SearchToolBar",d);
this._app=ZaApp.getInstance();
this._searchField=new ZaSearchField(this,"SearchTBSearchField",48,null,d)
};
ZaSearchToolBar.prototype=new ZaToolBar;
ZaSearchToolBar.prototype.constructor=ZaSearchToolBar;
ZaSearchToolBar.prototype.toString=function(){return"ZaSearchToolBar"
};
ZaSearchToolBar.prototype.addSelectionListener=function(b,c){if(b!=ZaSearchToolBar.SEARCHFOR_BUTTON){ZaToolBar.prototype.addSelectionListener.call(this,b,c)
}};
ZaSearchToolBar.prototype.getSearchField=function(){return this._searchField
}
}if(AjxPackage.define("zimbraAdmin.search.view.ZaSearchField")){ZaSearchField=function(e,d,b,c,f){DwtComposite.call(this,e,d,c,null,ZaId.getViewId(ZaId.SEARCH_VIEW,null,f));
this._containedObject=new ZaSearch();
this._initForm(ZaSearch.myXModel,this._getMyXForm());
this._localXForm.setInstance(this._containedObject);
this._app=ZaApp.getInstance();
this._searchFieldId=f
};
ZaSearchField.prototype=new DwtComposite;
ZaSearchField.prototype.constructor=ZaSearchField;
ZaSearchField.prototype.toString=function(){return"ZaSearchField"
};
ZaSearchField.UNICODE_CHAR_RE=/\S/;
ZaSearchField.prototype.registerCallback=function(b,c){this._callbackFunc=b;
this._callbackObj=c
};
ZaSearchField.prototype.setObject=function(b){this._containedObject=b;
this._localXForm.setInstance(this._containedObject)
};
ZaSearchField.prototype.getObject=function(){return this._containedObject
};
ZaSearchField.prototype.getCurrentSearchQuery=function(){var b=this._containedObject[ZaSearch.A_query]=this.getSearchFieldElement().value;
if(b.indexOf("$set:")==0){ZaApp.getInstance().getAppCtxt().getClientCmdHdlr().execute((b.substr(5)).split(" "));
return
}var d={};
var c=ZaApp.getInstance().getSearchBuilderController().isAdvancedSearch(b);
d.types=this.getSearchTypes();
if(c){d.query=b
}else{d.query=ZaSearch.getSearchByNameQuery(b,d.types)
}return d
};
ZaSearchField.prototype.invokeCallback=function(){var c=this._containedObject[ZaSearch.A_query]=this.getSearchFieldElement().value;
if(c.indexOf("$set:")==0){ZaApp.getInstance().getAppCtxt().getClientCmdHdlr().execute((c.substr(5)).split(" "));
return
}var f={};
var e=ZaApp.getInstance().getSearchBuilderController();
var d=e.isAdvancedSearch(c);
var b=ZaApp.getInstance().getSearchListController();
b._isAdvancedSearch=d;
b._currentDomain=null;
b._currentPageNum=1;
b.fetchAttrs=ZaSearch.standardAttributes;
f.types=this.getSearchTypes();
if(d){DBG.println(AjxDebug.DBG1,"Advanced Search ... ");
f.query=c;
DBG.println(AjxDebug.DBG1,"Query = "+f.query)
}else{DBG.println(AjxDebug.DBG1,"Basic Search ....");
b._searchFieldInput=c;
f.query=ZaSearch.getSearchByNameQuery(c,f.types)
}ZaApp.getInstance().getSearchListController()._currentQuery=f.query;
b._currentQuery=f.query;
this._isSearchButtonClicked=false;
if(this._callbackFunc!=null){if(this._callbackObj!=null){ZaApp.getInstance().getCurrentController().switchToNextView(this._callbackObj,this._callbackFunc,f)
}else{ZaApp.getInstance().getCurrentController().switchToNextView(ZaApp.getInstance().getSearchListController(),this._callbackFunc,f)
}}};
ZaSearchField.isLDAPQuery=function(b){var c=/\([^\(\)\=]+=[^\(\)\=]+\)/;
if(b.match(c)!=null){return true
}return false
};
ZaSearchField.prototype.startSearch=function(f,c,d){var e={};
if(!f){f=""
}var b=ZaApp.getInstance().getSearchListController();
b._isAdvancedSearch=true;
if(!c){c=ZaSearchOption.getDefaultObjectTypes()
}b._currentDomain=null;
b._currentPageNum=1;
b.fetchAttrs=ZaSearch.standardAttributes;
e.isShowBubble=d;
e.types=c;
if(!ZaSearchField.isLDAPQuery(f)){f=ZaSearch.getSearchByNameQuery(f,c)
}e.query=f;
ZaApp.getInstance().getSearchListController()._currentQuery=e.query;
b._currentQuery=e.query;
if(this._callbackFunc!=null){if(this._callbackObj!=null){ZaApp.getInstance().getCurrentController().switchToNextView(this._callbackObj,this._callbackFunc,e)
}else{ZaApp.getInstance().getCurrentController().switchToNextView(ZaApp.getInstance().getSearchListController(),this._callbackFunc,e)
}}};
ZaSearchField.prototype.getSearchTypes=function(){var e=ZaApp.getInstance().getSearchBuilderController();
var d=this.getSearchFieldElement().value;
var c=e.isAdvancedSearch(d);
var b=new Array();
if(c){b=e.getAddressTypes()
}else{if(ZaSettings.ENABLED_UI_COMPONENTS[ZaSettings.ACCOUNT_LIST_VIEW]||ZaSettings.ENABLED_UI_COMPONENTS[ZaSettings.CARTE_BLANCHE_UI]){if(this._containedObject[ZaSearch.A_fAccounts]=="TRUE"){b.push(ZaSearch.ACCOUNTS)
}}if(ZaSettings.ENABLED_UI_COMPONENTS[ZaSettings.ALIAS_LIST_VIEW]||ZaSettings.ENABLED_UI_COMPONENTS[ZaSettings.CARTE_BLANCHE_UI]){if(this._containedObject[ZaSearch.A_fAliases]=="TRUE"){b.push(ZaSearch.ALIASES)
}}if(ZaSettings.ENABLED_UI_COMPONENTS[ZaSettings.DL_LIST_VIEW]||ZaSettings.ENABLED_UI_COMPONENTS[ZaSettings.CARTE_BLANCHE_UI]){if(this._containedObject[ZaSearch.A_fdistributionlists]=="TRUE"){b.push(ZaSearch.DLS)
}}if(ZaSettings.ENABLED_UI_COMPONENTS[ZaSettings.RESOURCE_LIST_VIEW]||ZaSettings.ENABLED_UI_COMPONENTS[ZaSettings.CARTE_BLANCHE_UI]){if(this._containedObject[ZaSearch.A_fResources]=="TRUE"){b.push(ZaSearch.RESOURCES)
}}if(ZaSettings.ENABLED_UI_COMPONENTS[ZaSettings.DOMAIN_LIST_VIEW]||ZaSettings.ENABLED_UI_COMPONENTS[ZaSettings.CARTE_BLANCHE_UI]){if(this._containedObject[ZaSearch.A_fDomains]=="TRUE"){b.push(ZaSearch.DOMAINS)
}}if(ZaSettings.ENABLED_UI_COMPONENTS[ZaSettings.COS_LIST_VIEW]||ZaSettings.ENABLED_UI_COMPONENTS[ZaSettings.CARTE_BLANCHE_UI]){if(this._containedObject[ZaSearch.A_fCoses]=="TRUE"){b.push(ZaSearch.COSES)
}}}return b
};
ZaSearchField.srchButtonHndlr=function(d){var g=this.getForm().parent;
var j=g.getSearchFieldElement().value;
if(!j||j.length<3){var f=this.getParentItem().getItems()[2]||this;
return f.setError(AjxMessageFormat.format(AjxMsg.stringTooShort,3))
}var e=ZaApp.getInstance().getCurrentController();
if(e&&e.setPageNum){e.setPageNum(1)
}g.setCurrentSavedSearch({});
var c=ZaZimbraAdmin.getInstance().getOverviewPanelController();
var b=c.getOverviewPanel().getFolderTree();
var h=c.getSearchItemPath();
c.setSearchItemPath(h);
b.setSelectionByPath(h);
return;
g.invokeCallback(d)
};
ZaSearchField.entryKeyHandler=function(b,c){ZaSearchField.srchButtonHndlr.call(b)
};
ZaSearchField.helpSrchButtonHndlr=function(c){var b=this.getForm().getItemsById(ZaSearch.A_query)[0].getElement().value;
if(b&&b.length>0){var e="http://support.zimbra.com/help/index.php";
var d=[];
d.push("query="+b);
if(typeof(ZaLicense)==typeof(_UNDEFINED_)){d.push("FOSS=1")
}if(ZaServerVersionInfo.version){d.push("version="+ZaServerVersionInfo.version)
}e=e+"?"+AjxStringUtil.urlEncode(d.join("&"));
window.open(e,"_blank")
}};
ZaSearchField.saveSrchButtonHndlr=function(b){var c=this.getForm();
var e=c.parent;
var d=c.getItemsById(ZaSearch.A_query)[0].getElement().value;
if(d&&d.length>0){e.getSaveAndEditSeachDialog().show(null,d)
}};
ZaSearchField.prototype.getSaveAndEditSeachDialog=function(){if(!this._savedAndEditSearchDialog){this._savedAndEditSearchDialog=new ZaSaveSearchDialog(this)
}return this._savedAndEditSearchDialog
};
ZaSearchField.prototype.showSavedSearchButtonHndlr=function(b){var c=this.getForm().parent;
c.showSavedSearchMenus()
};
ZaSearchField.prototype.showSavedSearchMenus=function(){if(this._savedSearchMenu&&this._savedSearchMenu.isPoppedUp()){return
}if(ZaSearch.SAVED_SEARCHES.length<=0||ZaSearch._savedSearchToBeUpdated){var b=new AjxCallback(this,this.popupSavedSearch);
ZaSearch.getSavedSearches(null,b)
}else{this.popupSavedSearch(null)
}};
ZaSearchField.prototype.popupSavedSearch=function(e,d){if(e){ZaSearch.updateSavedSearch(e)
}if(ZaSearch.SAVED_SEARCHES.length<=0){if(this._savedSearchMenu){this._savedSearchMenu.popdown()
}return
}this._queryFieldElement=this.getSearchFieldElement();
var c=Dwt.getBounds(this._queryFieldElement);
this.getSavedSearchMenu().popup(0,c.x,c.y+c.height)
};
ZaSearchField.prototype.getSearchFieldElement=function(){var b=this._localXForm.getItemsById(ZaSearch.A_query)[0];
var c=b.getId()+"_display";
var d=document.getElementById(c);
return d
};
ZaSearchField.prototype.selectSavedSearch=function(b,e,d){var g=ZaSearch.parseSavedSearchQuery(e);
var c=ZaApp.getInstance().getSearchListController();
if(c._uiContainer){var f={type:3,unique:true,query:g,displayName:b};
c._uiContainer.removeAllBubbles(true);
c._uiContainer.addBubble(f)
}};
ZaSearchField.prototype.getSavedSearchActionMenu=function(){if(!this._savedSearchActionMenu){this._popupOperations=[];
this._popupOperations[ZaOperation.EDIT]=new ZaOperation(ZaOperation.EDIT,ZaMsg.TBB_Edit,ZaMsg.ACTBB_Edit_tt,"Properties","PropertiesDis",new AjxListener(this,this._editSavedSearchListener));
this._popupOperations[ZaOperation.DELETE]=new ZaOperation(ZaOperation.DELETE,ZaMsg.TBB_Delete,ZaMsg.ACTBB_Delete_tt,"Delete","DeleteDis",new AjxListener(this,this._deleteSavedSearchListener));
this._savedSearchActionMenu=new ZaPopupMenu(this,"ActionMenu",null,this._popupOperations,this._searchFieldId,ZaId.MENU_POP)
}return this._savedSearchActionMenu
};
ZaSearchField.prototype._savedSearchItemMouseUpListener=function(b,d,c){this.getSavedSearchActionMenu().popdown();
if(c.button==DwtMouseEvent.RIGHT){this._currentSavedSearch={name:b,query:d};
this.getSavedSearchActionMenu().popup(0,c.docX,c.docY);
this.getSavedSearchActionMenu().setZIndex(this._savedSearchMenu.getZIndex()+1)
}};
ZaSearchField.prototype._editSavedSearchListener=function(b){this._savedSearchActionMenu.popdown();
this.getSaveAndEditSeachDialog().show(this._currentSavedSearch.name,this._currentSavedSearch.query)
};
ZaSearchField.prototype._deleteSavedSearchListener=function(b){this._savedSearchActionMenu.popdown();
ZaSearch._savedSearchToBeUpdated=true;
var c=new AjxCallback(this,this.modifySavedSearchCallback);
ZaSearch.modifySavedSearches([{name:this._currentSavedSearch.name,query:null}],c)
};
ZaSearchField.prototype.modifySavedSearchCallback=function(){ZaSearch.updateSavedSearch(ZaSearch.getSavedSearches());
if(ZaSettings.TREE_ENABLED){var b=ZaApp.getInstance()._appCtxt.getAppController().getOverviewPanelController();
b.updateSavedSearchTreeList()
}this.updateSavedSearchMenu()
};
ZaSearchField.prototype.getSavedSearchMenu=function(b){if(!this._savedSearchMenu||b){this.updateSavedSearchMenu()
}return this._savedSearchMenu
};
ZaSearchField.prototype.updateSavedSearchMenu=function(){var g=false;
this._queryFieldElement=this.getSearchFieldElement();
var c=Dwt.getBounds(this._queryFieldElement);
if(this._savedSearchMenu){isPopup=this._savedSearchMenu.isPoppedUp();
this._savedSearchMenu.popdown();
this._savedSearchMenu.dispose()
}this._savedSearchMenu=new DwtMenu({parent:this,id:ZaId.getMenuId(ZaId.PANEL_APPSEARCH,ZaId.MENU_DROP)});
for(var d=0;
d<ZaSearch.SAVED_SEARCHES.length;
d++){var h=ZaSearch.SAVED_SEARCHES[d].name;
var e=ZaSearch.SAVED_SEARCHES[d].query;
var f=new DwtMenuItem({parent:this._savedSearchMenu,id:(ZaId.getMenuItemId(ZaId.SEARCH_QUERY)+"_"+(d+1))});
f.setText(AjxStringUtil.htmlEncode(h));
f.setSize(c.width);
f.addSelectionListener(new AjxListener(this,ZaSearchField.prototype.selectSavedSearch,[h,e]));
f.addListener(DwtEvent.ONMOUSEUP,new AjxListener(this,this._savedSearchItemMouseUpListener,[h,e]));
f.getHtmlElement().style.overflow="hidden"
}if(g){this.popupSavedSearch()
}};
ZaSearchField.advancedButtonHndlr=function(b){var c=this.getForm();
var d=ZaApp.getInstance().getSearchBuilderController();
d.toggleVisible();
ZaApp.getInstance()._appViewMgr.showSearchBuilder(d.isSBVisible());
if(d.isSBVisible()){this.widget.setToolTipContent(ZaMsg.tt_advanced_search_close)
}else{this.widget.setToolTipContent(ZaMsg.tt_advanced_search_open)
}d.setQuery()
};
ZaSearchField.prototype.getItemByName=function(c){var b=this._localXForm.getItems()[0].getItems();
var e=b.length;
for(var d=0;
d<e;
d++){if(b[d].getName()==c){return b[d]
}}return null
};
ZaSearchField.prototype.setTooltipForSearchBuildButton=function(c){var b=this.getItemByName("searchBuildButton");
if(b){b.getWidget().setToolTipContent(c)
}};
ZaSearchField.prototype.setTooltipForSearchButton=function(c){var b=this.getItemByName("searchButton");
if(b){b.getWidget().setToolTipContent(c)
}};
ZaSearchField.prototype.setIconForSearchMenuButton=function(c){var b=this.getItemByName("searchMenuButton");
if(b){b.getWidget().setImage(c)
}};
ZaSearchField.prototype.resetSearchFilter=function(){this._containedObject[ZaSearch.A_fAccounts]="FALSE";
this._containedObject[ZaSearch.A_fdistributionlists]="FALSE";
this._containedObject[ZaSearch.A_fAliases]="FALSE";
this._containedObject[ZaSearch.A_fResources]="FALSE";
this._containedObject[ZaSearch.A_fDomains]="FALSE";
this._containedObject[ZaSearch.A_fCoses]="FALSE"
};
ZaSearchField.prototype.restoreSearchFilter=function(){if(this.searchSelectedType==ZaSearch.ACCOUNTS){this.accFilterSelected()
}else{if(this.searchSelectedType==ZaSearch.ALIASES){this.aliasFilterSelected()
}else{if(this.searchSelectedType==ZaSearch.DLS){this.dlFilterSelected()
}else{if(this.searchSelectedType==ZaSearch.RESOURCES){this.resFilterSelected()
}else{if(this.searchSelectedType==ZaSearch.DOMAINS){this.domainFilterSelected()
}else{if(this.searchSelectedType==ZaSearch.COSES){this.cosFilterSelected()
}else{this.allFilterSelected()
}}}}}}};
ZaSearchField.prototype.allFilterSelected=function(b){if(b){b.item.parent.parent.setImage(b.item.getImage())
}else{this.setIconForSearchMenuButton("SearchAll")
}this._containedObject[ZaSearch.A_fAccounts]="TRUE";
this._containedObject[ZaSearch.A_fdistributionlists]="TRUE";
this._containedObject[ZaSearch.A_fAliases]="TRUE";
this._containedObject[ZaSearch.A_fResources]="TRUE";
this._containedObject[ZaSearch.A_fDomains]="TRUE";
this._containedObject[ZaSearch.A_fCoses]="TRUE";
this.setTooltipForSearchButton(ZaMsg.searchForAll);
this.searchSelectedType=""
};
ZaSearchField.prototype.accFilterSelected=function(b){this.resetSearchFilter();
this.setIconForSearchMenuButton("Account");
this._containedObject[ZaSearch.A_fAccounts]="TRUE";
this.setTooltipForSearchButton(ZaMsg.searchForAccounts);
this.searchSelectedType=ZaSearch.ACCOUNTS
};
ZaSearchField.prototype.accFilterSelectedFromResults=function(b){this.resetSearchFilter();
this._containedObject[ZaSearch.A_fAccounts]="TRUE"
};
ZaSearchField.prototype.aliasFilterSelected=function(b){this.resetSearchFilter();
this.setIconForSearchMenuButton("AccountAlias");
this._containedObject[ZaSearch.A_fAliases]="TRUE";
this.setTooltipForSearchButton(ZaMsg.searchForAliases);
this.searchSelectedType=ZaSearch.ALIASES
};
ZaSearchField.prototype.aliasFilterSelectedFromResults=function(b){this.resetSearchFilter();
this._containedObject[ZaSearch.A_fAliases]="TRUE"
};
ZaSearchField.prototype.dlFilterSelected=function(b){this.resetSearchFilter();
this.setIconForSearchMenuButton("DistributionList");
this._containedObject[ZaSearch.A_fdistributionlists]="TRUE";
this.setTooltipForSearchButton(ZaMsg.searchForDLs);
this.searchSelectedType=ZaSearch.DLS
};
ZaSearchField.prototype.dlFilterSelectedFromResults=function(b){this.resetSearchFilter();
this._containedObject[ZaSearch.A_fdistributionlists]="TRUE"
};
ZaSearchField.prototype.resFilterSelected=function(b){this.resetSearchFilter();
this.setIconForSearchMenuButton("Resource");
this._containedObject[ZaSearch.A_fResources]="TRUE";
this.setTooltipForSearchButton(ZaMsg.searchForResources);
this.searchSelectedType=ZaSearch.RESOURCES
};
ZaSearchField.prototype.domainFilterSelected=function(b){this.resetSearchFilter();
this.setIconForSearchMenuButton("Domain");
this._containedObject[ZaSearch.A_fDomains]="TRUE";
this.setTooltipForSearchButton(ZaMsg.searchForDomains);
this.searchSelectedType=ZaSearch.DOMAINS
};
ZaSearchField.prototype.domainFilterSelectedFromResults=function(b){this.resetSearchFilter();
this._containedObject[ZaSearch.A_fDomains]="TRUE"
};
ZaSearchField.prototype.cosFilterSelected=function(b){this.resetSearchFilter();
this.setIconForSearchMenuButton("COS");
this._containedObject[ZaSearch.A_fCoses]="TRUE";
this.setTooltipForSearchButton(ZaMsg.searchForCOSES);
this.searchSelectedType=ZaSearch.COSES
};
ZaSearchField.searchChoices=new XFormChoices([],XFormChoices.OBJECT_REFERENCE_LIST,null,"labelId");
ZaSearchField.prototype._getMyXForm=function(){var c=new Array();
if(ZaSettings.ENABLED_UI_COMPONENTS[ZaSettings.ACCOUNT_LIST_VIEW]||ZaSettings.ENABLED_UI_COMPONENTS[ZaSettings.CARTE_BLANCHE_UI]){c.push(new ZaOperation(ZaOperation.SEARCH_ACCOUNTS,ZaMsg.SearchFilter_Accounts,ZaMsg.searchForAccounts,"Account","AccountDis",new AjxListener(this,this.accFilterSelected)))
}if(ZaSettings.ENABLED_UI_COMPONENTS[ZaSettings.DL_LIST_VIEW]||ZaSettings.ENABLED_UI_COMPONENTS[ZaSettings.CARTE_BLANCHE_UI]){c.push(new ZaOperation(ZaOperation.SEARCH_DLS,ZaMsg.SearchFilter_DLs,ZaMsg.searchForDLs,"DistributionList","DistributionListDis",new AjxListener(this,this.dlFilterSelected)))
}if(ZaSettings.ENABLED_UI_COMPONENTS[ZaSettings.ALIAS_LIST_VIEW]||ZaSettings.ENABLED_UI_COMPONENTS[ZaSettings.CARTE_BLANCHE_UI]){c.push(new ZaOperation(ZaOperation.SEARCH_ALIASES,ZaMsg.SearchFilter_Aliases,ZaMsg.searchForAliases,"AccountAlias","AccountAlias",new AjxListener(this,this.aliasFilterSelected)))
}if(ZaSettings.ENABLED_UI_COMPONENTS[ZaSettings.RESOURCE_LIST_VIEW]||ZaSettings.ENABLED_UI_COMPONENTS[ZaSettings.CARTE_BLANCHE_UI]){c.push(new ZaOperation(ZaOperation.SEARCH_RESOURCES,ZaMsg.SearchFilter_Resources,ZaMsg.searchForResources,"Resource","ResourceDis",new AjxListener(this,this.resFilterSelected)))
}if(ZaSettings.ENABLED_UI_COMPONENTS[ZaSettings.DOMAIN_LIST_VIEW]||ZaSettings.ENABLED_UI_COMPONENTS[ZaSettings.CARTE_BLANCHE_UI]){c.push(new ZaOperation(ZaOperation.SEARCH_DOMAINS,ZaMsg.SearchFilter_Domains,ZaMsg.searchForDomains,"Domain","DomainDis",new AjxListener(this,this.domainFilterSelected)))
}if(ZaSettings.ENABLED_UI_COMPONENTS[ZaSettings.COS_LIST_VIEW]||ZaSettings.ENABLED_UI_COMPONENTS[ZaSettings.CARTE_BLANCHE_UI]){c.push(new ZaOperation(ZaOperation.SEARCH_COSES,ZaMsg.SearchFilter_COSES,ZaMsg.searchForCOSES,"COS","COS",new AjxListener(this,this.cosFilterSelected)))
}c.push(new ZaOperation(ZaOperation.SEP));
c.push(new ZaOperation(ZaOperation.SEARCH_ALL,ZaMsg.SearchFilter_All,ZaMsg.searchForAll,"SearchAll","SearchAll",new AjxListener(this,this.allFilterSelected)));
ZaSearchField.searchChoices.setChoices(c);
var f=3;
var d;
if(ZaSettings.ENABLED_UI_COMPONENTS[ZaSettings.CARTE_BLANCHE_UI]){f=7;
d=["59","*","80","110","28","12","110"]
}else{d=["59","*","80"];
if(ZaSettings.ENABLED_UI_COMPONENTS[ZaSettings.HELP_SEARCH]){f++;
d.push("100")
}if(ZaSettings.ENABLED_UI_COMPONENTS[ZaSettings.SAVE_SEARCH]){f++;
d.push("28")
}if(ZaSettings.ENABLED_UI_COMPONENTS[ZaSettings.ACCOUNT_LIST_VIEW]||ZaSettings.ENABLED_UI_COMPONENTS[ZaSettings.DL_LIST_VIEW]||ZaSettings.ENABLED_UI_COMPONENTS[ZaSettings.ALIAS_LIST_VIEW]||ZaSettings.ENABLED_UI_COMPONENTS[ZaSettings.RESOURCE_LIST_VIEW]){f+=2;
d.push("12");
d.push("110")
}}var e;
f=4;
d=["46","3","*","28"];
var b=new AjxCallback(this,ZaSearchField.entryKeyHandler);
e={tableCssStyle:"width:100%;",numCols:f,width:"100%",colSizes:d,items:[{type:_MENU_BUTTON_,label:null,choices:ZaSearchField.searchChoices,name:"searchMenuButton",toolTipContent:ZaMsg.searchToolTip,icon:"SearchAll",cssClass:"ZaSearchFieldButton DwtToolbarButton"},{type:_SPACER_,colSpan:1,cssStyle:"",cssClass:"SearchFieldVert",height:14},{type:_GROUP_,numCols:2,width:"100%",cssClass:"oselect",items:[{type:_CATEGORIZED_DYNSELECT_,ref:ZaSearch.A_query,dataFetcherClass:ZaSearch,dataFetcherMethod:ZaSearch.prototype.dynSearchField,labelLocation:_NONE_,width:"100%",inputWidth:"100%",editable:true,forceUpdate:true,choices:new XFormChoices([],XFormChoices.OBJECT_REFERENCE_LIST,"name","value"),visibilityChecks:[],enableDisableChecks:[],entryKeyMethod:b,onChange:function(j,h,g){if(j instanceof ZaItem){this.setInstanceValue(j.name)
}else{this.setInstanceValue(j)
}}}]},{type:_DWT_BUTTON_,toolTipContent:ZaMsg.searchForAll,icon:"Search",name:"searchButton",onActivate:ZaSearchField.srchButtonHndlr,autoPadding:false,cssStyle:"background-color:white;",cssClass:"ZaSearchFieldButton   DwtToolbarButton"}]};
return e
};
ZaSearchField.canSaveSearch=function(){return ZaItem.hasWritePermission("zimbraAdminSavedSearches",ZaZimbraAdmin.currentAdminAccount)
};
ZaSearchField.canViewSavedSearch=function(){return ZaItem.hasReadPermission("zimbraAdminSavedSearches",ZaZimbraAdmin.currentAdminAccount)
};
ZaSearchField.prototype.setCurrentSavedSearch=function(b){this._currentSavedSearch=b
};
ZaSearchField.prototype.getCurrentSavedSearch=function(){if(AjxUtil.isEmpty(this._currentSavedSearch)){this._currentSavedSearch={}
}return this._currentSavedSearch
};
ZaSearchField.defaultName="Saved Search";
ZaSearchField.nameCache={};
ZaSearchField.prototype.getDefaultSearchName=function(c){if(!c){c=ZaSearchField.defaultName
}if(!ZaSearchField.nameCache[c]){ZaSearchField.nameCache[c]=[]
}var b=ZaSearchField.nameCache[c].length+1;
ZaSearchField.nameCache[c].push(b);
return c+" {"+b+"}"
};
ZaSearchField.prototype.doSaveSearch=function(f){var e=this.getCurrentSavedSearch();
var d=this.getSaveAndEditSeachDialog();
var c=e.name?false:true;
var b=this.getDefaultSearchName(e.name);
d.show(b,f,c)
};
ZaSearchField.prototype._initForm=function(c,b){if(c==null||b==null){throw new AjxException("Metadata for XForm and/or XModel are not defined",AjxException.INVALID_PARAM,"ZaSearchField.prototype._initForm")
}this._localXModel=new XModel(c);
this._localXForm=new XForm(b,this._localXModel,null,this);
this._localXForm.draw();
this._drawn=true
};
ZaSaveSearchDialog=function(b){if(!b){return
}this._searchField=b;
DwtDialog.call(this,b.shell);
this._okButton=this.getButton(DwtDialog.OK_BUTTON);
this.registerCallback(DwtDialog.OK_BUTTON,ZaSaveSearchDialog.prototype.okCallback,this)
};
ZaSaveSearchDialog.prototype=new DwtDialog;
ZaSaveSearchDialog.prototype.constructor=ZaSaveSearchDialog;
ZaSaveSearchDialog.prototype.okCallback=function(){var d=[];
var b=this._nameInput.value;
var c=this._queryInput.value;
if(!b){ZaApp.getInstance().getCurrentController().popupErrorDialog(ZaMsg.ERROR_SAVENAME_EMPTY);
ZaSaveSearchDialog.prototype.show(null,c)
}d.push({name:b,query:c});
if(this._isEditMode&&this._origNameOfEdittedSearch!=b){d.push({name:this._origNameOfEdittedSearch,query:""})
}this.savedSearchArr=d;
this._checkExistSearch();
this.popdown()
};
ZaSaveSearchDialog.prototype._checkExistSearch=function(){var e=false;
ZaSearch.updateSavedSearch(ZaSearch.getSavedSearches());
for(var d=0;
d<this.savedSearchArr.length;
d++){var b=this.savedSearchArr[d].name;
if(ZaSearch.SAVED_SEARCHES&&b){for(var c=0;
c<ZaSearch.SAVED_SEARCHES.length;
c++){if(ZaSearch.SAVED_SEARCHES[c].name==b){e=true;
break
}}}}if(e){ZaApp.getInstance().dialogs.confirmMessageDialog=new ZaMsgDialog(ZaApp.getInstance().getAppCtxt().getShell(),null,[DwtDialog.YES_BUTTON,DwtDialog.NO_BUTTON]);
ZaApp.getInstance().dialogs.confirmMessageDialog.setMessage(ZaMsg.Q_SAVE_REPLACE,DwtMessageDialog.WARNING_STYLE);
ZaApp.getInstance().dialogs.confirmMessageDialog.registerCallback(DwtDialog.YES_BUTTON,this._continueDoSave,this);
ZaApp.getInstance().dialogs.confirmMessageDialog.registerCallback(DwtDialog.NO_BUTTON,this._cancelDoSave,this);
ZaApp.getInstance().dialogs.confirmMessageDialog.popup()
}else{ZaSearch.modifySavedSearches(this.savedSearchArr,new AjxCallback(this._searchField,this._searchField.modifySavedSearchCallback))
}return e
};
ZaSaveSearchDialog.prototype._continueDoSave=function(){ZaSearch.modifySavedSearches(this.savedSearchArr,new AjxCallback(this._searchField,this._searchField.modifySavedSearchCallback));
ZaApp.getInstance().dialogs.confirmMessageDialog.popdown()
};
ZaSaveSearchDialog.prototype._cancelDoSave=function(){ZaApp.getInstance().dialogs.confirmMessageDialog.popdown();
this.popup()
};
ZaSaveSearchDialog.prototype.show=function(c,e,b){if(!this._createUI){this._nameInputId=Dwt.getNextId();
this._queryInputId=Dwt.getNextId();
var d=["<table cellspacing='5' style='border-spacing: 7px;'>","<tbody>","<tr>","<td>",ZaMsg.saved_search_editor_name,"</td>","<td>","<div style='overflow: auto;'>","<input type='text' size='50' maxlength='50' id='",this._nameInputId,"' />","</div>","</td>","</tr>","<tr>","<td>",ZaMsg.saved_search_editor_query,"</td>","<td>","<div style='overflow: auto;'>","<input type='text' size='50' maxlength='200' id='",this._queryInputId,"' />","</div>","</td>","</tr>","</tbody>","</table>"];
this.setContent(d.join(""));
this._createUI=true
}if(!c||b){this.setTitle(ZaMsg.t_saved_search);
this._isEditMode=false
}else{this.setTitle(ZaMsg.t_edit_saved_search);
this._isEditMode=true;
this._origNameOfEdittedSearch=c
}this.popup();
if(!this._nameInput){this._nameInput=document.getElementById(this._nameInputId)
}this._nameInput.value=c||"";
if(!this._queryInput){this._queryInput=document.getElementById(this._queryInputId)
}this._queryInput.value=e||""
}
}if(AjxPackage.define("zimbraAdmin.search.view.ZaSearchListView")){ZaSearchListView=function(e){var d=null;
var c=DwtControl.ABSOLUTE_STYLE;
var b=this._getHeaderList();
ZaListView.call(this,{parent:e,className:d,posStyle:c,headerList:b,id:ZaId.TAB_SEARCH_MANAGE,scrollLoading:true});
this._appCtxt=this.shell.getData(ZaAppCtxt.LABEL)
};
ZaSearchListView.prototype=new ZaListView;
ZaSearchListView.prototype.constructor=ZaSearchListView;
ZaSearchListView.prototype.toString=function(){return"ZaSearchListView"
};
ZaSearchListView.prototype.getTitle=function(){return ZaMsg.Accounts_view_title
};
ZaSearchListView.prototype.getTabIcon=function(){return"search"
};
ZaSearchListView.prototype.getTabTitle=function(){return ZaMsg.Search_view_title
};
ZaSearchListView.prototype.getTabToolTip=function(){var b=ZaApp.getInstance().getSearchListController();
if(b){if(b._isAdvancedSearch&&b._currentQuery){return ZaMsg.tt_tab_Search+b._currentQuery
}else{if(!b._isAdvancedSearch&&b._searchFieldInput){return ZaMsg.tt_tab_Search+b._searchFieldInput
}}}return ZaMsg.Search_view_title
};
ZaSearchListView.prototype._createItemHtml=function(k,c,g){var j=new Array(50);
var b=document.createElement("div");
b[DwtListView._STYLE_CLASS]="Row";
b[DwtListView._SELECTED_STYLE_CLASS]=b[DwtListView._STYLE_CLASS]+"-"+DwtCssStyle.SELECTED;
b.className=b[DwtListView._STYLE_CLASS];
this.associateItemWithElement(k,b,DwtListView.TYPE_LIST_ITEM);
var p=0;
j[p++]="<table width='100%' cellspacing='0' cellpadding='0'>";
j[p++]="<tr>";
var d=this._headerList.length;
for(var h=0;
h<d;
h++){var o=this._headerList[h]._field;
var n=this._headerList[h]._width+4;
var m=Dwt.getNextId();
var e=ZaId.TAB_SEARCH_MANAGE;
if(o=="type"){j[p++]='<td id="'+e+"_data_type_"+m+'" width='+this._headerList[h]._width+">";
switch(k.type){case ZaItem.ACCOUNT:if(k.attrs[ZaAccount.A_zimbraIsAdminAccount]=="TRUE"){j[p++]=AjxImg.getImageHtml("AdminUser")
}else{if(k.attrs[ZaAccount.A_zimbraIsDelegatedAdminAccount]=="TRUE"){j[p++]=AjxImg.getImageHtml("DomainAdminUser")
}else{if(k.attrs[ZaAccount.A_zimbraIsSystemAccount]=="TRUE"){j[p++]=AjxImg.getImageHtml("SpecialAccount")
}else{if(k.attrs[ZaAccount.A_zimbraIsSystemResource]=="TRUE"){j[p++]=AjxImg.getImageHtml("SystemResource")
}else{if(k.attrs[ZaAccount.A_zimbraIsExternalVirtualAccount]=="TRUE"){j[p++]=AjxImg.getImageHtml("AccountExternalVirtual")
}else{j[p++]=AjxImg.getImageHtml("Account")
}}}}}break;
case ZaItem.DL:if(k.attrs[ZaDistributionList.A_isAdminGroup]=="TRUE"){j[p++]=AjxImg.getImageHtml("DistributionListGroup")
}else{j[p++]=AjxImg.getImageHtml("DistributionList")
}break;
case ZaItem.ALIAS:j[p++]=AjxImg.getImageHtml("AccountAlias");
break;
case ZaItem.RESOURCE:if(k.attrs[ZaResource.A_zimbraCalResType]==ZaResource.RESOURCE_TYPE_LOCATION){j[p++]=AjxImg.getImageHtml("Location")
}else{j[p++]=AjxImg.getImageHtml("Resource")
}break;
case ZaItem.DOMAIN:var l="Domain";
var q=k.attrs[ZaDomain.A_domainType];
if(q==="alias"){l+="Alias"
}j[p++]=AjxImg.getImageHtml(l);
break;
case ZaItem.COS:j[p++]=AjxImg.getImageHtml("COS");
break;
default:j[p++]=k.type;
break
}j[p++]="</td>"
}else{if(o==ZaAccount.A_name){j[p++]='<td id="'+e+"_data_emailaddress_"+m+'" nowrap width='+(AjxEnv.isIE?n:this._headerList[h]._width)+"><nobr>";
if(k.type==ZaItem.DOMAIN){j[p++]=AjxStringUtil.htmlEncode(k.attrs[ZaDomain.A_domainName])
}else{if(k.isExternal){j[p++]="<span class='asterisk'>*</span>"
}j[p++]=AjxStringUtil.htmlEncode(k.name)
}j[p++]="</nobr></td>"
}else{if(o==ZaAccount.A_displayname){j[p++]='<td id="'+e+"_data_displayname_"+m+'" nowrap width='+(AjxEnv.isIE?n:this._headerList[h]._width)+"><nobr>";
j[p++]=AjxStringUtil.htmlEncode(k.attrs[ZaAccount.A_displayname]);
j[p++]="</nobr></td>"
}else{if(o==ZaAccount.A_accountStatus){j[p++]='<td id="'+e+"_data_status_"+m+'" width='+(AjxEnv.isIE?n:this._headerList[h]._width)+"><nobr>";
var f="";
if(k.type==ZaItem.ACCOUNT){f=ZaAccount._accountStatus(k.attrs[ZaAccount.A_accountStatus])
}else{if(k.type==ZaItem.DL){f=ZaDistributionList.getDLStatus(k.attrs[ZaDistributionList.A_mailStatus])
}else{if(k.type==ZaItem.RESOURCE){f=ZaResource.getAccountStatusLabel(k.attrs[ZaAccount.A_accountStatus])
}else{if(k.type==ZaItem.DOMAIN){f=ZaDomain._domainStatus(k.attrs[ZaDomain.A_zimbraDomainStatus])
}}}}j[p++]=f;
j[p++]="</nobr></td>"
}else{if(o==ZaAccount.A_zimbraLastLogonTimestamp){j[p++]='<td id="'+e+"_data_lastlogontime_"+m+'" width='+(AjxEnv.isIE?n:this._headerList[h]._width)+"><nobr>";
j[p++]=AjxStringUtil.htmlEncode(ZaAccount.getLastLoginTime(k.attrs[ZaAccount.A_zimbraLastLogonTimestamp]));
j[p++]="</nobr></td>"
}else{if(o==ZaAccount.A_description){j[p++]='<td id="'+e+"_data_description_"+m+'" width='+this._headerList[h]._width+"><nobr>";
j[p++]=AjxStringUtil.htmlEncode(ZaItem.getDescriptionValue(k.attrs[ZaAccount.A_description]));
j[p++]="</nobr></td>"
}}}}}}}j[p++]="</tr></table>";
b.innerHTML=j.join("");
return b
};
ZaSearchListView.prototype._getHeaderList=function(){var b=new Array();
var d=1;
var c=0;
b[c++]=new ZaListHeaderItem("type",ZaMsg.ALV_Type_col,null,"40px",null,null,true,true);
this._defaultColumnSortable=d;
b[c++]=new ZaListHeaderItem(ZaAccount.A_name,ZaMsg.CLV_Name_col,null,"220px",null,null,true,true);
b[c++]=new ZaListHeaderItem(ZaAccount.A_displayname,ZaMsg.ALV_DspName_col,null,"220px",null,null,true,true);
b[c++]=new ZaListHeaderItem(ZaAccount.A_accountStatus,ZaMsg.ALV_Status_col,null,"120px",null,null,true,true);
b[c++]=new ZaListHeaderItem(ZaAccount.A_zimbraLastLogonTimestamp,ZaMsg.ALV_Last_Login,null,Dwt_Button_XFormItem.estimateMyWidth(ZaMsg.ALV_Last_Login,false,0),null,null,true,true);
b[c++]=new ZaListHeaderItem(ZaAccount.A_description,ZaMsg.ALV_Description_col,null,"auto",null,null,true,true);
return b
};
ZaSearchListView.prototype._sortColumn=function(c,d){try{ZaApp.getInstance().getAccountListController().setSortOrder(d);
ZaApp.getInstance().getAccountListController().setSortField(c.getSortField());
ZaApp.getInstance().getAccountListController().show()
}catch(b){ZaApp.getInstance().getCurrentController()._handleException(b)
}};
function ZaSearchXFormView(b){ZaTabView.call(this,b,"ZaSearchXFormView","DwtTabView ZaXFormListView");
this.initForm(ZaSearchEdit.myXModel,this.getMyXForm());
this._localXForm.removeListener(DwtEvent.XFORMS_VALUE_CHANGED,this.formChangeListener);
this._localXForm.setController(ZaApp.getInstance());
this._localXForm.setInstance({});
this._bubbleList=new ZaSearchBubbleList()
}ZaSearchXFormView.prototype=new ZaTabView();
ZaSearchXFormView.prototype.constructor=ZaSearchXFormView;
ZaTabView.XFormModifiers.ZaSearchXFormView=new Array();
ZaSearchXFormView.prototype.bubbleChangeCallback=function(){var b=ZaApp.getInstance().getSearchListController()._uiContainer.getQueryFormBubbles();
b=b?b:"";
ZaApp.getInstance().getSearchListController()._uiContainer.setQueryField(b);
if(ZaApp.getInstance().getSearchListController()._uiContainer.isEnableForSearch()){var d=ZaApp.getInstance().getSearchListController()._uiContainer.getSearchTypeFormBubbles();
var c=ZaApp.getInstance().getSearchListController()._searchField;
c.startSearch(b,d,true)
}};
ZaSearchXFormView.prototype.addBubble=function(d,c){try{if(d.displayName){d.parent=this;
d.parentId=this._htmlElId;
d.queryCell=this._localXForm.getItemById(this._localXForm.getId()+"_"+ZaSearchEdit.A2_currentQuery).getContainer();
this._bubbleList.addBubble(d)
}if(!c){this.bubbleChangeCallback()
}}catch(b){ZaApp.getInstance().getCurrentController()._handleException(b,"ZaSearchXFormView.prototype.addBubble")
}};
ZaSearchXFormView.prototype._removeBubble=function(d,c){var b=DwtControl.fromElementId(d);
if(!b){return
}this._bubbleList.removeBubble(b);
b.dispose();
if(!c){this.bubbleChangeCallback()
}};
ZaSearchXFormView.removeBubble=function(d,f,c){try{var e=DwtControl.ALL_BY_ID[f];
if(e){e._removeBubble(d,c)
}}catch(b){ZaApp.getInstance().getCurrentController()._handleException(b,"ZaSearchXFormView.removeBubble")
}};
ZaSearchXFormView.prototype.removeAllBubbles=function(e){var b=this._bubbleList.size();
for(var d=b-1;
d>=0;
d--){var c=this._bubbleList.getBubble(d);
if(c){this._bubbleList.removeBubble(c);
c.dispose()
}}if(!e){this.bubbleChangeCallback()
}};
ZaSearchXFormView.prototype.getQueryFormBubbles=function(){return this._bubbleList.getQueryFormBubbles()
};
ZaSearchXFormView.prototype.getSearchTypeFormBubbles=function(){return this._bubbleList.getSearchTypeFormBubbles()
};
ZaSearchXFormView.prototype.isEnableForSearch=function(){return this._bubbleList.isEnableForSearch()
};
ZaSearchXFormView.labelSelectionListener=function(b){if(b.detail==DwtListView.ITEM_DBL_CLICKED){if(b.item){this._selectedItem=b.item;
ZaApp.getInstance().getAccountViewController().show(b.item)
}}};
ZaSearchXFormView.prototype.getQueryField=function(){return this._localXForm.getInstanceValue(ZaSearchEdit.A2_currentQuery)
};
ZaSearchXFormView.prototype.setQueryField=function(b){this._localXForm.setInstanceValue(b,ZaSearchEdit.A2_currentQuery)
};
ZaSearchXFormView.prototype.setQueryFieldVisible=function(b){this.queryVisible=b
};
ZaSearchXFormView.createPopupMenu=function(b){this.getForm().parent.widget=b
};
ZaSearchXFormView.getCustomHeight=function(){try{var f=this.getForm();
var g=this.getForm().parent.getHtmlElement();
var d=parseInt(g.style.height);
if(isNaN(d)){d=g.clientHeight?g.clientHeight:g.offsetHeight
}var h=f.getItemsById("xform_header");
var b=0;
if(h){var e=h[0];
if(e){b=e.getElement().clientHeight?e.getElement().clientHeight:e.getElement().offsetHeight
}}if(d<=0){return"100%"
}else{return d-b-2
}}catch(c){}return"100%"
};
ZaSearchXFormView.getCustomWidth=function(){try{var d=this.getForm().parent.getHtmlElement();
var b=parseInt(d.style.width);
if(isNaN(b)){b=d.clientWidth?d.clientWidth:d.offsetWidth
}if(b<=0){return"100%"
}else{return b
}}catch(c){}return"100%"
};
ZaSearchXFormView.doQuickSearch=function(){if(ZaApp.getInstance().getSearchListController()._uiContainer){ZaApp.getInstance().getSearchListController()._uiContainer.bubbleChangeCallback()
}};
ZaSearchXFormView.doSaveSearch=function(){var b=ZaApp.getInstance().getSearchListController()._uiContainer.getQueryFormBubbles();
b=b?b:"";
ZaApp.getInstance().getSearchListController()._searchField.doSaveSearch(b)
};
ZaSearchXFormView.isSearchFieldVisible=function(){var b=ZaApp.getInstance().getSearchListController()._uiContainer;
if(b){if(!b.queryVisible){return false
}}return true
};
ZaSearchXFormView.myXFormModifier=function(c){c.tableCssStyle="width:100%;overflow:auto;";
var b=ZaSearchListView.prototype._getHeaderList();
c.items=[{type:_GROUP_,visibilityChecks:[ZaSearchXFormView.isSearchFieldVisible],visibilityChangeEventSources:[ZaSearchEdit.A2_currentQuery],colSizes:["*","70px","100px"],colSpan:2,numCols:3,width:"100%",id:"xform_header",items:[{type:_OUTPUT_,ref:ZaSearchEdit.A2_currentQuery,containerCssClass:"search_field_container",cssStyle:"display:none;"},{type:_DWT_BUTTON_,label:ZaMsg.LBL_QuickSearch,name:"SearchButton",autoPadding:false,onActivate:ZaSearchXFormView.doQuickSearch,visibilityChecks:[],enableDisableChecks:[]},{type:_DWT_BUTTON_,label:ZaMsg.LBL_SaveSearch,name:"saveSearchButton",autoPadding:false,onActivate:ZaSearchXFormView.doSaveSearch,visibilityChecks:[],visibilityChecks:["(ZaSettings.ENABLED_UI_COMPONENTS[ZaSettings.SAVE_SEARCH] || ZaSettings.ENABLED_UI_COMPONENTS[ZaSettings.CARTE_BLANCHE_UI])"],enableDisableChangeEventSources:[ZaSearchEdit.A2_currentQuery],enableDisableChecks:[[XForm.checkInstanceValueNotEmty,ZaSearchEdit.A2_currentQuery]]}]},{ref:ZaSearchEdit.A2_searchResult,colSpan:2,cssClass:"ZaFullPageXFormListView",id:"searchReusltList",type:_DWT_LIST_,createPopupMenu:ZaSearchXFormView.createPopupMenu,multiselect:true,widgetClass:ZaSearchListView,headerList:b,getCustomHeight:ZaSearchXFormView.getCustomHeight,getCustomWidth:ZaSearchXFormView.getCustomWidth,visibilityChecks:[],enableDisableChecks:[]}]
};
ZaTabView.XFormModifiers.ZaSearchXFormView.push(ZaSearchXFormView.myXFormModifier);
ZaSearchEdit=function(){};
ZaSearchEdit.A2_currentQuery="currentQuery";
ZaSearchEdit.A2_searchResult="searchResult";
ZaSearchEdit.myXModel={items:[{id:ZaSearchEdit.A2_currentQuery,type:_STRING_},{id:ZaSearchEdit.A2_searchResult,type:_LIST_}]}
}if(AjxPackage.define("zimbraAdmin.search.view.ZaSearchBuilderToolbarView")){ZaSearchBuilderToolbarView=function(b){this._toolbarOperations={};
this._toolbarOrder=[];
this._toolbarOperations[ZaOperation.SEARCH_BY_BASIC]=new ZaOperation(ZaOperation.SEARCH_BY_BASIC,ZaMsg.searchByBasic,ZaMsg.tt_searchByBasic,"SearchAll","SearchAll",new AjxListener(this,this.basicTypeSelectHndlr));
this._toolbarOperations[ZaOperation.SEARCH_BY_ADDESS_TYPE]=new ZaOperation(ZaOperation.SEARCH_BY_ADDESS_TYPE,ZaMsg.searchByAddressType,ZaMsg.tt_searchByAddressType,"SearchAll","SearchAll",new AjxListener(this,this.objTypeSelectHndlr));
this._toolbarOperations[ZaOperation.SEARCH_BY_DOMAIN]=new ZaOperation(ZaOperation.SEARCH_BY_DOMAIN,ZaMsg.searchByDomain,ZaMsg.tt_searchByDomain,"Domain","DomainDis",new AjxListener(this,this.domainSelectHndlr));
this._toolbarOperations[ZaOperation.SEARCH_BY_SERVER]=new ZaOperation(ZaOperation.SEARCH_BY_SERVER,ZaMsg.searchByServer,ZaMsg.tt_searchByServer,"Server","ServerDis",new AjxListener(this,this.serverSelectHndlr));
this._toolbarOperations[ZaOperation.SEARCH_BY_ADVANCED]=new ZaOperation(ZaOperation.SEARCH_BY_ADVANCED,ZaMsg.searchByAdvanced,ZaMsg.tt_searchByAdvanced,"SearchAll","SearchAll",new AjxListener(this,this.advancedSelectHndlr));
this._toolbarOperations[ZaOperation.SEP]=new ZaOperation(ZaOperation.SEP);
this._toolbarOperations[ZaOperation.SEARCH_BY_REMOVE_ALL]=new ZaOperation(ZaOperation.SEARCH_BY_REMOVE_ALL,ZaMsg.searchByRemoveAll,ZaMsg.tt_searchByRemoveAll,null,null,new AjxListener(this,this.removeSelectHndlr),null,null,"ZaSearchBuilderOptionRemoveAll");
this._toolbarOperations[ZaOperation.SEARCH_BY_COS]=new ZaOperation(ZaOperation.SEARCH_BY_COS,ZaMsg.searchByCOS,ZaMsg.tt_searchByCOS,"COS","COS",new AjxListener(this,this.cosSelectHndlr));
this._toolbarOperations[ZaOperation.NONE]=new ZaOperation(ZaOperation.NONE);
this._toolbarOperations[ZaOperation.CLOSE]=new ZaOperation(ZaOperation.CLOSE,ZaMsg.TBB_Close,ZaMsg.tt_advanced_search_close,"Close","CloseDis",new AjxListener(this,this.closeHndlr));
this._toolbarOrder.push(ZaOperation.SEARCH_BY_BASIC);
if(ZaSettings.ENABLED_UI_COMPONENTS[ZaSettings.CARTE_BLANCHE_UI]||ZaSettings.ENABLED_UI_COMPONENTS[ZaSettings.ACCOUNT_LIST_VIEW]||ZaSettings.ENABLED_UI_COMPONENTS[ZaSettings.DL_LIST_VIEW]||ZaSettings.ENABLED_UI_COMPONENTS[ZaSettings.ALIAS_LIST_VIEW]||ZaSettings.ENABLED_UI_COMPONENTS[ZaSettings.RESOURCE_LIST_VIEW]){this._toolbarOrder.push(ZaOperation.SEARCH_BY_ADDESS_TYPE)
}if(ZaSettings.ENABLED_UI_COMPONENTS[ZaSettings.DOMAIN_LIST_VIEW]||ZaSettings.ENABLED_UI_COMPONENTS[ZaSettings.CARTE_BLANCHE_UI]){this._toolbarOrder.push(ZaOperation.SEARCH_BY_DOMAIN)
}if(ZaSettings.ENABLED_UI_COMPONENTS[ZaSettings.SERVER_LIST_VIEW]||ZaSettings.ENABLED_UI_COMPONENTS[ZaSettings.CARTE_BLANCHE_UI]){this._toolbarOrder.push(ZaOperation.SEARCH_BY_SERVER)
}this._toolbarOrder.push(ZaOperation.SEARCH_BY_ADVANCED);
this._toolbarOrder.push(ZaOperation.SEARCH_BY_COS);
this._toolbarOrder.push(ZaOperation.SEP);
this._toolbarOrder.push(ZaOperation.SEARCH_BY_REMOVE_ALL);
this._toolbarOrder.push(ZaOperation.NONE);
this._toolbarOrder.push(ZaOperation.CLOSE);
ZaToolBar.call(this,b,this._toolbarOperations,this._toolbarOrder,null,"ZaSearchBuilderToolBar");
this._app=ZaApp.getInstance();
this.zShow(false);
this._controller=ZaApp.getInstance().getSearchBuilderController();
this._view={}
};
ZaSearchBuilderToolbarView.prototype=new ZaToolBar;
ZaSearchBuilderToolbarView.prototype.constructor=ZaSearchBuilderToolbarView;
ZaSearchBuilderToolbarView.prototype.toString=function(){return"ZaSearchBuilderToolbarView"
};
ZaSearchBuilderToolbarView.prototype.basicTypeSelectHndlr=function(b){this._controller.addOptionView(ZaSearchOption.BASIC_TYPE_ID)
};
ZaSearchBuilderToolbarView.prototype.objTypeSelectHndlr=function(b){this._controller.addOptionView(ZaSearchOption.OBJECT_TYPE_ID);
b.item.setEnabled(false)
};
ZaSearchBuilderToolbarView.prototype.domainSelectHndlr=function(b){this._controller.addOptionView(ZaSearchOption.DOMAIN_ID)
};
ZaSearchBuilderToolbarView.prototype.serverSelectHndlr=function(b){this._controller.addOptionView(ZaSearchOption.SERVER_ID);
this._controller.listAllServers();
b.item.setEnabled(false)
};
ZaSearchBuilderToolbarView.prototype.advancedSelectHndlr=function(b){this._controller.addOptionView(ZaSearchOption.ADVANCED_ID)
};
ZaSearchBuilderToolbarView.prototype.cosSelectHndlr=function(b){this._controller.addOptionView(ZaSearchOption.COS_ID)
};
ZaSearchBuilderToolbarView.prototype.removeSelectHndlr=function(b){this._controller.removeAllOptionViews();
this._controller.setQuery()
};
ZaSearchBuilderToolbarView.prototype.closeHndlr=function(b){DBG.println(AjxDebug.DBG3,"Close ... ");
this._controller.toggleVisible();
ZaApp.getInstance()._appViewMgr.showSearchBuilder(this._controller.isSBVisible());
this._controller.setQuery();
ZaApp.getInstance().getSearchListController()._searchField.setTooltipForSearchBuildButton(ZaMsg.tt_advanced_search_open)
}
}if(AjxPackage.define("zimbraAdmin.search.view.ZaSearchOptionView")){ZaSearchOptionView=function(f,g,e,d){DwtComposite.call(this,f,"ZaSearchOptionView",Dwt.ABSOLUTE_STYLE,true);
this._width=e||ZaSearchOptionView.WIDTH;
var c=ZaSearchOptionView.HEIGHT;
var b=f.getNextOptionX();
var j=0;
this.setBounds(b,j,this._width,c);
this._app=ZaApp.getInstance();
this._position=d;
this._optionId=g;
this._controller=ZaApp.getInstance().getSearchBuilderController();
this._label;
if(g==ZaSearchOption.OBJECT_TYPE_ID){this._label=new ZaOperation(ZaOperation.LABEL,ZaMsg.searchByAddressType,null,"SearchAll","SearchAll")
}else{if(g==ZaSearchOption.DOMAIN_ID){this._label=new ZaOperation(ZaOperation.LABEL,ZaMsg.SearchFilter_Domains,null,"Domain","DomainDis")
}else{if(g==ZaSearchOption.SERVER_ID){this._label=new ZaOperation(ZaOperation.LABEL,ZaMsg.searchByServer,null,"Server","ServerDis")
}else{if(g==ZaSearchOption.BASIC_TYPE_ID){this._label=new ZaOperation(ZaOperation.LABEL,ZaMsg.searchByBasic,null,"SearchAll","SearchAll")
}else{if(g==ZaSearchOption.ADVANCED_ID){this._label=new ZaOperation(ZaOperation.LABEL,ZaMsg.searchByAdvanced,null,"SearchAll","SearchAll")
}else{if(g==ZaSearchOption.COS_ID){this._label=new ZaOperation(ZaOperation.LABEL,ZaMsg.searchByCOS,null,"COS","COS")
}}}}}}var h=[];
h.push(this._label);
h.push(new ZaOperation(ZaOperation.NONE));
h.push(new ZaOperation(ZaOperation.CLOSE,null,ZaMsg.ALTBB_Close_tt,"Close","CloseDis",new AjxListener(this,this.closeButtonListener)));
this._header=new ZaToolBar(this,h,null,null,"DwtToolBar");
this._header.setSize(this._width,ZaSearchOptionView.HEADER_HEIGHT);
this.initForm(ZaSearchOption.getObjectTypeXModel(g),ZaSearchOption.getObjectTypeXForm(g,c),ZaSearchOption.getDefaultInstance(g))
};
ZaSearchOptionView.prototype=new DwtComposite;
ZaSearchOptionView.prototype.constructor=ZaSearchOptionView;
ZaSearchOptionView.HEADER_HEIGHT=28;
ZaSearchOptionView.WIDTH=200;
ZaSearchOptionView.BASIC_OPTION_WIDTH=200;
ZaSearchOptionView.DOMAIN_OPTION_WIDTH=280;
ZaSearchOptionView.COS_OPTION_WIDTH=280;
ZaSearchOptionView.ADVANCED_OPTION_WIDTH=320;
ZaSearchOptionView.MARGIN=0;
ZaSearchOptionView.HEIGHT=225;
ZaSearchOptionView.prototype.closeButtonListener=function(b){DBG.println(AjxDebug.DBG3,"Close options ... ");
this._controller.removeOptionView(this._position,true)
};
ZaSearchOptionView.prototype.setPosition=function(b){this._position=b
};
ZaSearchOptionView.prototype.getPosition=function(){return this._position
};
ZaSearchOptionView.prototype.initForm=function(d,c,b){if(d==null||c==null){throw new AjxException("Metadata for XForm and/or XModel are not defined",AjxException.INVALID_PARAM,"ZaSearchOptionView.prototype.initForm")
}this._localXModel=new XModel(d);
this._localXForm=new XForm(c,this._localXModel,b,this);
this._localXForm.setController(ZaApp.getInstance());
this._localXForm.draw();
this._drawn=true
}
}if(AjxPackage.define("zimbraAdmin.search.view.ZaSearchBuilderView")){ZaSearchBuilderView=function(b){DwtComposite.call(this,b,"ZaSearchBuilderView",Dwt.ABSOLUTE_STYLE,true);
var c=false;
this.zShow(c);
this._app=ZaApp.getInstance();
this._option_next_x=0;
this._controller=ZaApp.getInstance().getSearchBuilderController();
this.setScrollStyle(DwtControl.SCROLL)
};
ZaSearchBuilderView.prototype=new DwtComposite();
ZaSearchBuilderView.prototype.constructor=ZaSearchBuilderView;
ZaSearchBuilderView.prototype.toString=function(){return"ZaSearchBuilderView"
};
ZaSearchBuilderView.prototype.getNextOptionX=function(b){if(b==null){b=this._controller._option_views.length
}if(b<=0){return ZaSearchOptionView.MARGIN
}else{var c=this._controller._option_views[b-1];
return c.getX()+c.getW()+ZaSearchOptionView.MARGIN
}}
}if(AjxPackage.define("zimbraAdmin.search.view.ZaSearchOptionDialog")){ZaSearchOptionDialog=function(e,g,b,d,c){if(arguments.length==0){return
}var f="ZaSearchOptionDialog";
if(!this._standardButtons){this._standardButtons=[DwtDialog.OK_BUTTON,DwtDialog.CANCEL_BUTTON]
}if(!this._extraButtons){this._extraButtons=[]
}this._contextId=c?c:ZaId.DLG_UNDEF;
this._optionId=g;
DwtDialog.call(this,{parent:e,className:f,standardButtons:this._standardButtons,extraButtons:this._extraButtons,mode:DwtBaseDialog.MODELESS,id:ZaId.getDialogId(this._contextId)});
this._controller=ZaApp.getInstance().getSearchBuilderController();
this._app=ZaApp.getInstance();
this._localXForm=null;
this._localXModel=null;
this._drawn=false;
this._containedObject=null;
this._pageDiv=document.createElement("div");
this._pageDiv.className="ZaXWizardDialogPageDiv";
Dwt.setSize(this._pageDiv,b,d);
this._pageDiv.style.overflow="auto";
this._pageDiv.style["overflow-y"]="auto";
this._pageDiv.style["overflow-x"]="auto";
this._createContentHtml();
this.initForm(ZaSearchOption.getNewObjectTypeXModel(g),ZaSearchOption.getNewObjectTypeXForm(g),ZaSearchOption.getDefaultInstance(g));
this._localXForm.addListener(DwtEvent.XFORMS_VALUE_CHANGED,new AjxListener(this,this._handleXFormChange));
this._localXForm.addListener(DwtEvent.XFORMS_VALUE_ERROR,new AjxListener(this,this._handleXFormError))
};
ZaSearchOptionDialog.prototype=new ZaXDialog;
ZaSearchOptionDialog.prototype.constructor=ZaSearchOptionDialog;
ZaSearchOptionDialog.TEMPLATE="admin.Widgets#ZaSeachOptionDialog";
ZaSearchOptionDialog.prototype._createHtmlFromTemplate=function(b,c){DwtDialog.prototype._createHtmlFromTemplate.call(this,ZaSearchOptionDialog.TEMPLATE,c)
};
ZaSearchOptionDialog.prototype.getMyXForm=function(b){};
ZaSearchOptionDialog.prototype._handleXFormChange=function(b){this._button[DwtDialog.OK_BUTTON].setEnabled(true)
};
ZaSearchOptionDialog.prototype._handleXFormError=function(b){this._button[DwtDialog.OK_BUTTON].setEnabled(false)
}
}if(AjxPackage.define("zimbraAdmin.search.view.ZaSearchBubbleList")){ZaSearchBubbleList=function(){this._bubbleList=new AjxVector()
};
ZaSearchBubbleList.prototype.constructor=ZaSearchBubbleList;
ZaSearchBubbleList.prototype.toString=function(){return"ZaSearchBubbleList"
};
ZaSearchBubbleList.prototype.size=function(){return this._bubbleList.size()
};
ZaSearchBubbleList.prototype.getQueryFormBubbles=function(){var h="";
var c=0;
this._filterQuery={};
for(var e=0;
e<this._bubbleList.size();
e++){var j=this._bubbleList.get(e);
var f=j.query;
if(f!=null&&f.length>0){if(j.type==2){if(!this._filterQuery[j.optionalType]){this._filterQuery[j.optionalType]=[]
}this._filterQuery[j.optionalType].push(f)
}else{h+=f
}c++
}}var b;
var d;
for(var g in this._filterQuery){b="";
d=0;
for(var e=0;
e<this._filterQuery[g].length;
e++){b+=this._filterQuery[g][e];
d++
}if(d>1){b="(|"+b+")"
}if(b!=null&&b.length>0){c++;
h+=b
}}if(c>1){h="(&"+h+")"
}return h
};
ZaSearchBubbleList.prototype.isEnableForSearch=function(){var b=false;
for(var c=0;
c<this._bubbleList.size();
c++){b=b||this._bubbleList.get(c).disableForSearch
}return !b
};
ZaSearchBubbleList.prototype.getSearchTypeFormBubbles=function(){var b=new Array();
var g=new Array();
var h={};
var e=0;
for(var f=0;
f<this._bubbleList.size();
f++){var d=this._bubbleList.get(f).searchType;
if(!AjxUtil.isEmpty(d)){for(var c=0;
c<d.length;
c++){if(h[d[c]]==null){h[d[c]]=1;
g.push(d[c])
}else{h[d[c]]++
}}e++
}}for(var f=0;
f<g.length;
f++){if(h[g[f]]==e){b.push(g[f])
}}if(!AjxUtil.isEmpty(b)){return b
}};
ZaSearchBubbleList.prototype.getBubble=function(b){return this._bubbleList.get(b)
};
ZaSearchBubbleList.prototype.getBubbleByDisplayName=function(b){if(!b){return
}for(var c=0;
c<this._bubbleList.size();
c++){if(this._bubbleList.get(c).displayName==b){return this._bubbleList.get(c)
}}};
ZaSearchBubbleList.prototype._addBubble=function(b,c){if(!b){return
}this._bubbleList.add(b,c)
};
ZaSearchBubbleList.prototype.addBubble=function(c){var b;
if(c.unique){b=this.getBubbleByDisplayName(c.displayName);
if(b){b.update(c)
}else{b=new ZaSearchBubble(c);
this._addBubble(b)
}}else{b=new ZaSearchBubble(c);
this._addBubble(b)
}};
ZaSearchBubbleList.prototype.removeBubble=function(b){if(!b){return
}this._bubbleList.remove(b)
};
ZaSearchBubbleList.prototype.removeAllBubbles=function(){this._bubbleList.removeAll()
};
ZaSearchBubble=function(b){b=b||{};
b.id=this.id=Dwt.getNextId();
b.className=this.className=b.className||"addrBubble";
DwtControl.call(this,b);
this.type=b.type;
if(b.type==2){this.optionalType=b.optionalType||1
}this.query=b.query;
this.searchType=b.searchType;
this.parentCell=b.queryCell;
this.parentId=b.parentId;
this.unique=b.unique||false;
this.disableForSearch=b.disableForSearch||false;
this.displayName=this.getDisplayName(b.displayName);
this._createHtml();
this._setEventHdlrs([DwtEvent.ONMOUSEOVER]);
this.addListener(DwtEvent.ONMOUSEOVER,new AjxListener(this,this._mouseOverListener))
};
ZaSearchBubble.prototype=new DwtControl;
ZaSearchBubble.prototype.constructor=ZaSearchBubble;
ZaSearchBubble.prototype.toString=function(){return"ZaSearchBubble"
};
ZaSearchBubble.displayNameList=new Object();
ZaSearchBubble.prototype.getDisplayName=function(b){var c;
if(!ZaSearchBubble.displayNameList[b]||this.unique){ZaSearchBubble.displayNameList[b]=1;
c=b
}else{c=b+" "+ZaSearchBubble.displayNameList[b];
ZaSearchBubble.displayNameList[b]++
}return c
};
ZaSearchBubble.prototype._createElement=function(){return document.createElement("SPAN")
};
ZaSearchBubble.prototype._createHtml=function(){var g=this.getHtmlElement();
var c=this.id+"_remove";
var h='ZaSearchXFormView.removeBubble("'+this.id+'","'+this.parentId+'");';
var f="display:inline-block;cursor:pointer;";
var b=AjxImg.getImageHtml("BubbleDelete",f,"id='"+c+"' onclick='"+h+"'");
var d=this.displayName&&this.displayName.toString();
var e="<span id='"+this.id+"_displayName'>"+AjxStringUtil.htmlEncode(d)+"</span>"+b;
g.innerHTML=e;
this.reparentHtmlElement(this.parentCell)
};
ZaSearchBubble.prototype.setDisplayName=function(b){this.displayName=b
};
ZaSearchBubble.prototype.setQuery=function(b){this.query=b
};
ZaSearchBubble.prototype.setType=function(b){this.type=b
};
ZaSearchBubble.prototype.update=function(b){this.type=b.type;
this.query=b.query
};
ZaSearchBubble.prototype._mouseOverListener=function(b){this._mouseOverAction(b)
};
ZaSearchBubble.prototype._mouseOverAction=function(c){var b=this.getToolTip();
this.setToolTipContent(b);
return true
};
ZaSearchBubble.prototype.getToolTip=function(){return AjxStringUtil.htmlEncode(this.query)
}
}if(AjxPackage.define("zimbraAdmin.status.view.ZaServicesListView")){ZaServicesListView=function(e,f){if(arguments.length==0){return
}var d=f||"ZaServicesListView";
var c=DwtControl.ABSOLUTE_STYLE;
var b=this._getHeaderList();
ZaListView.call(this,{parent:e,className:d,posStyle:c,headerList:b,id:ZaId.TAB_STATUS_MANAGE});
this._appCtxt=this.shell.getData(ZaAppCtxt.LABEL)
};
ZaServicesListView.prototype=new ZaListView;
ZaServicesListView.prototype.constructor=ZaServicesListView;
ZaServicesListView.STYLE_CLASS="Row";
ZaServicesListView.SELECTED_STYLE_CLASS="Row-"+DwtCssStyle.SELECTED;
ZaServicesListView.prototype.toString=function(){return"ZaServicesListView"
};
ZaServicesListView.prototype.getTitle=function(){return ZaMsg.Status_view_title
};
ZaServicesListView.prototype.getTabIcon=function(){return"Status"
};
ZaServicesListView.prototype._createItemHtml=function(f,c,g){var e=new Array(50);
var h=document.createElement("div");
this.associateItemWithElement(f,h,DwtListView.TYPE_LIST_ITEM);
var b=0;
h[DwtListView._STYLE_CLASS]=ZaServicesListView.STYLE_CLASS;
h[DwtListView._SELECTED_STYLE_CLASS]=ZaServicesListView.SELECTED_STYLE_CLASS;
h.className=ZaServicesListView.STYLE_CLASS;
b=ZaServicesListView._writeElement.call(this,e,b,f,false);
if(f.serviceMap!=null){for(var d in f.serviceMap){b=ZaServicesListView._writeElement.call(this,e,b,f.serviceMap[d],true,d)
}}h.innerHTML=e.join("");
h.style.height="auto";
return h
};
ZaServicesListView._writeElement=function(e,b,h,g,f){e[b++]="<table ";
if(g){e[b++]="class='ZaServicesListView_table'"
}else{e[b++]="class='ZaServicesListView_server_table'"
}e[b++]="_serviceInfo=";
e[b++]=g;
e[b++]=">";
e[b++]="<tr>";
var d=this._headerList.length;
for(var c=0;
c<d;
c++){var j=this._headerList[c]._field;
if(j==ZaStatus.PRFX_Server){if(!g){e[b++]="<td width=";
e[b++]=(this._headerList[c]._width);
e[b++]="><table cellpadding=0 cellspacing=0 border=0 style='table-layout:fixed;'>";
e[b++]="<tr>";
e[b++]="<td width=\"14px\" aligh=left onclick='javascript:ZaServicesListView.expand(event, this)'>";
e[b++]=AjxImg.getImageHtml("NodeExpanded");
e[b++]="</td>";
e[b++]="<td align=left width=20>";
if(h.status==1){e[b++]=AjxImg.getImageHtml("Check")
}else{if(h.status==0){e[b++]=AjxImg.getImageHtml("Cancel")
}else{e[b++]="&nbsp;"
}}e[b++]="</td>";
e[b++]="<td>";
e[b++]=AjxStringUtil.htmlEncode(h.name);
e[b++]="</td>";
e[b++]="</tr></table></td>"
}else{e[b++]="<td width=";
e[b++]=(this._headerList[c]._width);
e[b++]=" aligh=left>";
e[b++]=AjxStringUtil.htmlEncode(" ");
e[b++]="</td>"
}}else{if(j==ZaStatus.PRFX_Service){if(g){e[b++]="<td width=";
e[b++]=this._headerList[c]._width;
e[b++]=" ><table cellpadding=0 cellspacing=0 border=0><tr><td width=20>";
if(h.status==1){e[b++]=AjxImg.getImageHtml("Check")
}else{e[b++]=AjxImg.getImageHtml("Cancel")
}e[b++]="</td><td>";
e[b++]=AjxStringUtil.htmlEncode(f);
e[b++]="</td></tr></table></td>"
}else{e[b++]="<td width=";
e[b++]=this._headerList[c]._width;
e[b++]=" aligh=left>";
e[b++]=AjxStringUtil.htmlEncode(" ");
e[b++]="</td>"
}}else{if(j==ZaStatus.PRFX_Time){e[b++]="<td width=";
e[b++]=this._headerList[c]._width;
e[b++]=" aligh=left>";
if(g){if(((new Date()).getTime()-h.timestamp)>21*60*1000){e[b++]="<span class='ZaStaleData'>";
e[b++]=AjxStringUtil.htmlEncode(h.time);
e[b++]="&nbsp;";
e[b++]=ZaMsg.DataIsStale;
e[b++]="</span>"
}else{e[b++]=AjxStringUtil.htmlEncode(h.time)
}}else{e[b++]=AjxStringUtil.htmlEncode(" ")
}e[b++]="</td>"
}}}}e[b++]="</tr></table>";
return b
};
ZaServicesListView.prototype._setNoResultsHtml=function(){var b=document.createElement("div");
b.innerHTML="<table width='100%' cellspacing='0' cellpadding='1'><tr><td class='NoResults'><br>"+ZaMsg.ServerStatusUnavailable+"</td></tr></table>";
this._parentEl.appendChild(b)
};
ZaServicesListView.prototype._getHeaderList=function(){var b=[new ZaListHeaderItem(ZaStatus.PRFX_Server,ZaMsg.STV_Server_col,null,250,null,null,true,true),new ZaListHeaderItem(ZaStatus.PRFX_Service,ZaMsg.STV_Service_col,null,100,null,null,true,true),new ZaListHeaderItem(ZaStatus.PRFX_Time,ZaMsg.STV_Time_col,null,200,null,null,true,true)];
return b
};
ZaServicesListView.expand=function(f,b){var e=DwtUiEvent.getEvent(f);
var g=DwtUiEvent.getTarget(e);
var d=g;
while(d!=null){if(d.getAttribute("_serviceInfo")!=null){break
}d=d.parentNode
}var c=d.nextSibling;
var h=true;
if(c!=null){if(c.style.display=="none"){b.firstChild.className=AjxImg.getClassForImage("NodeExpanded");
h=false
}else{b.firstChild.className=AjxImg.getClassForImage("NodeCollapsed")
}while(c!=null&&c.getAttribute("_serviceInfo")=="true"){if(h){c.style.display="none"
}else{c.style.display=""
}c=c.nextSibling
}}else{b.firstChild.className=""
}}
}if(AjxPackage.define("zimbraAdmin.statistics.view.ZaGlobalStatsView")){ZaGlobalStatsView=function(b){DwtTabView.call(this,b);
this._appCtxt=this.shell.getData(ZaAppCtxt.LABEL);
if(ZaSettings.ENABLED_UI_COMPONENTS[ZaSettings.GLOBAL_ADVANCED_STATS_TAB]||ZaSettings.ENABLED_UI_COMPONENTS[ZaSettings.CARTE_BLANCHE_UI]){this._advancedPage=new ZaGlobalAdvancedStatsPage(this);
this.addTab(ZaMsg.TABT_Advanced_Stats,this._advancedPage)
}this._tabBar.setVisible(false)
};
ZaGlobalStatsView.prototype=new DwtTabView;
ZaGlobalStatsView.prototype.constructor=ZaGlobalStatsView;
ZaGlobalStatsView.extTabObjects=new Array();
ZaGlobalStatsView.prototype.toString=function(){return"ZaGlobalStatsView"
};
ZaGlobalStatsView.prototype.getAllServersInfo=function(){try{var d=AjxSoapDoc.create("GetAllServersRequest",ZaZimbraAdmin.URN,null);
d.getMethod().setAttribute("applyConfig","false");
d.getMethod().setAttribute("service","mta");
var g=new Object();
g.soapDoc=d;
g.asyncMode=false;
var c={controller:ZaApp.getInstance().getCurrentController(),busyMsg:ZaMsg.BUSY_GET_ALL_SERVER};
var f=ZaRequestMgr.invoke(g,c).Body.GetAllServersResponse;
var e=f.server;
return e
}catch(b){ZaApp.getInstance().getCurrentController()._handleException(b,"ZaGlobalStatsView.getAllServersInfo",null,false)
}};
ZaGlobalStatsView.prototype.getAllServersMtaServiceStatus=function(){var g=ZaGlobalStatsView.prototype.getAllServersInfo();
if(!g){return null
}var e=null;
var h={};
var d=0;
var c=0;
var k=false;
var m=false;
var l=[];
for(d=0;
d<g.length;
d++){e=g[d].a;
h.id=g[d].id;
h.name=g[d].name;
var b;
for(c=0,k=m=false;
c<e.length;
c++){b=e[c];
if("mta"==b._content){if(b.n==ZaServer.A_zimbraServiceEnabled){k=true
}else{if(b.n==ZaServer.A_zimbraServiceInstalled){m=true
}}}}var f=(k&&m);
l[h.name]=f
}return l
};
ZaGlobalStatsView.prototype.isAllMtaDisable=function(){var b=ZaGlobalStatsView.prototype.getAllServersMtaServiceStatus();
if(!b){return true
}var c=0;
for(c in b){if(b[c]){return false
}}return true
};
ZaGlobalStatsView.prototype.setObject=function(e){this._containedObject=e;
if(!ZaGlobalStatsView.prototype.isAllMtaDisable()){if(this._msgCountPage==null){this._msgCountPage=new ZaGlobalMessageCountPage(this);
this.addTab(ZaMsg.TABT_InMsgs,this._msgCountPage)
}this._msgCountPage.setObject(e);
if(this._msgsVolumePage==null){this._msgsVolumePage=new ZaGlobalMessageVolumePage(this);
this.addTab(ZaMsg.TABT_InData,this._msgsVolumePage)
}this._msgsVolumePage.setObject(e);
if(this._spamPage==null){this._spamPage=new ZaGlobalSpamActivityPage(this);
this.addTab(ZaMsg.TABT_Spam_Activity,this._spamPage)
}this._spamPage.setObject(e)
}if(this._advancedPage){this._advancedPage.setObject(e)
}for(var d=0;
d<ZaGlobalStatsView.extTabObjects.length;
d++){var c=ZaGlobalStatsView.extTabObjects[d];
if(typeof(c.memthod)=="function"){var b=null;
if(!c.tabKey){b=new c.memthod(this);
c.tabKey=this.addTab(c.title,b)
}else{b=this.getTabView(c.tabKey)
}if(b){b.setObject(e)
}}}};
ZaGlobalStatsView.prototype.getTitle=function(){return ZaMsg.GlobalStats_view_title
};
ZaGlobalStatsView.prototype.getTabTitle=function(){return ZaMsg.GlobalStats_view_title
};
ZaGlobalStatsView.prototype.getTabIcon=function(){return"Statistics"
};
ZaGlobalStatsView.prototype.getTabToolTip=function(){return ZaMsg.GlobalStats_view_title
};
ZaGlobalStatsView.prototype._resetTabSizes=function(c,h){var g=this._tabBar.getSize();
var k=Dwt.getSize(this.titleCell);
var e=g.y||this._tabBar.getHtmlElement().clientHeight;
var l=k.y||this.titleCell.clientHeight;
var f=c;
var b=(h-e-l);
var j=(b>50)?b:50;
if(this._tabs&&this._tabs.length){for(var d in this._tabs){if(this._tabs[d]["view"]){this._tabs[d]["view"].resetSize(f,j)
}}}};
ZaGlobalStatsView.prototype._createHtml=function(){DwtTabView.prototype._createHtml.call(this);
this._table=document.createElement("table");
var e=this.getHtmlElement();
e.insertBefore(this._table,e.firstChild);
var d;
var b;
var c;
d=this._table.insertRow(0);
d.align="center";
d.vAlign="middle";
this.titleCell=d.insertCell(d.cells.length);
this.titleCell.align="center";
this.titleCell.vAlign="middle";
this.titleCell.noWrap=true;
this.titleCell.id=Dwt.getNextId();
this.titleCell.align="left";
this.titleCell.innerHTML=AjxStringUtil.htmlEncode(ZaMsg.NAD_GlobalStatistics);
this.titleCell.className="AdminTitleBar"
};
ZaGlobalStatsView.prototype.getTabChoices=function(){var c=[];
if(ZaSettings.ENABLED_UI_COMPONENTS[ZaSettings.GLOBAL_ADVANCED_STATS_TAB]||ZaSettings.ENABLED_UI_COMPONENTS[ZaSettings.CARTE_BLANCHE_UI]){c.push(ZaMsg.TABT_Advanced_Stats)
}if(!ZaGlobalStatsView.prototype.isAllMtaDisable()){c.push(ZaMsg.TABT_InMsgs);
c.push(ZaMsg.TABT_InData);
c.push(ZaMsg.TABT_Spam_Activity)
}for(var d=0;
d<ZaGlobalStatsView.extTabObjects.length;
d++){var b=ZaGlobalStatsView.extTabObjects[d];
if(typeof(b.memthod)=="function"){c.push(b.title)
}}var e=[];
for(var d=1;
d<=c.length;
d++){e.push({value:d,label:c[d-1]})
}return e
}
}if(AjxPackage.define("zimbraAdmin.statistics.view.ZaGlobalMessageVolumePage")){ZaGlobalMessageVolumePage=function(b){DwtTabViewPage.call(this,b);
this._fieldIds=new Object();
this.initialized=false;
this.setScrollStyle(DwtControl.SCROLL)
};
ZaGlobalMessageVolumePage.prototype=new DwtTabViewPage;
ZaGlobalMessageVolumePage.prototype.constructor=ZaGlobalMessageVolumePage;
ZaGlobalMessageVolumePage.prototype.toString=function(){return"ZaGlobalMessageVolumePage"
};
ZaGlobalMessageVolumePage.prototype.showMe=function(d){this.setZIndex(DwtTabView.Z_ACTIVE_TAB);
if(this.parent.getHtmlElement().offsetHeight>26){this._contentEl.style.height=this.parent.getHtmlElement().offsetHeight-26
}else{var c=parseInt(this.parent.getHtmlElement().style.height);
var b=AjxStringUtil.getUnitsFromSizeString(this.parent.getHtmlElement().style.height);
if(c>26){this._contentEl.style.height=(Number(c-26).toString()+b)
}}this._contentEl.style.width=this.parent.getHtmlElement().style.width;
if(d){this.setObject()
}ZaGlobalAdvancedStatsPage.plotGlobalQuickChart("global-message-volume-48hours","zmmtastats",["mta_volume"],["bytes"],"now-48h","now",{convertToCount:1});
ZaGlobalAdvancedStatsPage.plotGlobalQuickChart("global-message-volume-30days","zmmtastats",["mta_volume"],["bytes"],"now-30d","now",{convertToCount:1});
ZaGlobalAdvancedStatsPage.plotGlobalQuickChart("global-message-volume-60days","zmmtastats",["mta_volume"],["bytes"],"now-60d","now",{convertToCount:1});
ZaGlobalAdvancedStatsPage.plotGlobalQuickChart("global-message-volume-year","zmmtastats",["mta_volume"],["bytes"],"now-1y","now",{convertToCount:1})
};
ZaGlobalMessageVolumePage.prototype.setObject=function(){};
ZaGlobalMessageVolumePage.prototype._createHtml=function(){DwtTabViewPage.prototype._createHtml.call(this);
var b=0;
var c=new Array(50);
c[b++]="<div class='StatsHeader'>"+ZaMsg.Stats_MV_Header+"</div>";
c[b++]="<div class='StatsDiv'>";
c[b++]="<div class='StatsImageTitle'>"+AjxStringUtil.htmlEncode(ZaMsg.NAD_StatsHour)+"</div>";
c[b++]="<div class='StatsImage'>";
c[b++]="<canvas id='loggercanvasglobal-message-volume-48hours'></canvas><div id='loggerchartglobal-message-volume-48hours'></div>";
c[b++]="</div>";
c[b++]="<div class='StatsImageTitle'>"+AjxStringUtil.htmlEncode(ZaMsg.NAD_StatsDay)+"</div>";
c[b++]="<div class='StatsImage'>";
c[b++]="<canvas id='loggercanvasglobal-message-volume-30days'></canvas><div id='loggerchartglobal-message-volume-30days'></div>";
c[b++]="</div>";
c[b++]="<div class='StatsImageTitle'>"+AjxStringUtil.htmlEncode(ZaMsg.NAD_StatsMonth)+"</div>";
c[b++]="<div class='StatsImage'>";
c[b++]="<canvas id='loggercanvasglobal-message-volume-60days'></canvas><div id='loggerchartglobal-message-volume-60days'></div>";
c[b++]="</div>";
c[b++]="<div class='StatsImageTitle'>"+AjxStringUtil.htmlEncode(ZaMsg.NAD_StatsYear)+"</div>";
c[b++]="<div class='StatsImage'>";
c[b++]="<canvas id='loggercanvasglobal-message-volume-year'></canvas><div id='loggerchartglobal-message-volume-year'></div>";
c[b++]="</div>";
c[b++]="</div>";
this.getHtmlElement().innerHTML=c.join("")
}
}if(AjxPackage.define("zimbraAdmin.statistics.view.ZaGlobalMessageCountPage")){ZaGlobalMessageCountPage=function(b){DwtTabViewPage.call(this,b);
this._fieldIds=new Object();
this.initialized=false;
this.setScrollStyle(DwtControl.SCROLL)
};
ZaGlobalMessageCountPage.prototype=new DwtTabViewPage;
ZaGlobalMessageCountPage.prototype.constructor=ZaGlobalMessageCountPage;
ZaGlobalMessageCountPage.prototype.toString=function(){return"ZaGlobalMessageCountPage"
};
ZaGlobalMessageCountPage.prototype.showMe=function(d){this.setZIndex(DwtTabView.Z_ACTIVE_TAB);
if(this.parent.getHtmlElement().offsetHeight>26){this._contentEl.style.height=this.parent.getHtmlElement().offsetHeight-26
}else{var c=parseInt(this.parent.getHtmlElement().style.height);
var b=AjxStringUtil.getUnitsFromSizeString(this.parent.getHtmlElement().style.height);
if(c>26){this._contentEl.style.height=(Number(c-26).toString()+b)
}}this._contentEl.style.width=this.parent.getHtmlElement().style.width;
if(d){this.setObject()
}};
ZaGlobalMessageCountPage.prototype.setObject=function(){ZaGlobalAdvancedStatsPage.plotGlobalQuickChart("global-message-count-48hours","zmmtastats",["mta_count"],["msgs"],"now-48h","now",{convertToCount:1});
ZaGlobalAdvancedStatsPage.plotGlobalQuickChart("global-message-count-30days","zmmtastats",["mta_count"],["msgs"],"now-30d","now",{convertToCount:1});
ZaGlobalAdvancedStatsPage.plotGlobalQuickChart("global-message-count-60days","zmmtastats",["mta_count"],["msgs"],"now-60d","now",{convertToCount:1});
ZaGlobalAdvancedStatsPage.plotGlobalQuickChart("global-message-count-year","zmmtastats",["mta_count"],["msgs"],"now-1y","now",{convertToCount:1})
};
ZaGlobalMessageCountPage.prototype._createHtml=function(){DwtTabViewPage.prototype._createHtml.call(this);
var b=0;
var c=new Array(50);
c[b++]="<div class='StatsHeader'>"+ZaMsg.Stats_MC_Header+"</div>";
c[b++]="<div class='StatsDiv'>";
c[b++]="<div class='StatsImageTitle'>"+AjxStringUtil.htmlEncode(ZaMsg.NAD_StatsHour)+"</div>";
c[b++]="<div class='StatsImage'>";
c[b++]="<canvas id='loggercanvasglobal-message-count-48hours'></canvas><div id='loggerchartglobal-message-count-48hours'></div>";
c[b++]="</div>";
c[b++]="<div class='StatsImageTitle'>"+AjxStringUtil.htmlEncode(ZaMsg.NAD_StatsDay)+"</div>";
c[b++]="<div class='StatsImage'>";
c[b++]="<canvas id='loggercanvasglobal-message-count-30days'></canvas><div id='loggerchartglobal-message-count-30days'></div>";
c[b++]="</div>";
c[b++]="<div class='StatsImageTitle'>"+AjxStringUtil.htmlEncode(ZaMsg.NAD_StatsMonth)+"</div>";
c[b++]="<div class='StatsImage'>";
c[b++]="<canvas id='loggercanvasglobal-message-count-60days'></canvas><div id='loggerchartglobal-message-count-60days'></div>";
c[b++]="</div>";
c[b++]="<div class='StatsImageTitle'>"+AjxStringUtil.htmlEncode(ZaMsg.NAD_StatsYear)+"</div>";
c[b++]="<div class='StatsImage'>";
c[b++]="<canvas id='loggercanvasglobal-message-count-year'></canvas><div id='loggerchartglobal-message-count-year'></div>";
c[b++]="</div>";
c[b++]="</div>";
this.getHtmlElement().innerHTML=c.join("")
}
}if(AjxPackage.define("zimbraAdmin.statistics.view.ZaGlobalSpamActivityPage")){ZaGlobalSpamActivityPage=function(b){DwtTabViewPage.call(this,b);
this._fieldIds=new Object();
this.initialized=false;
this.setScrollStyle(DwtControl.SCROLL)
};
ZaGlobalSpamActivityPage.prototype=new DwtTabViewPage;
ZaGlobalSpamActivityPage.prototype.constructor=ZaGlobalSpamActivityPage;
ZaGlobalSpamActivityPage.prototype.toString=function(){return"ZaGlobalSpamActivityPage"
};
ZaGlobalSpamActivityPage.prototype.showMe=function(d){this.setZIndex(DwtTabView.Z_ACTIVE_TAB);
if(this.parent.getHtmlElement().offsetHeight>26){this._contentEl.style.height=this.parent.getHtmlElement().offsetHeight-26
}else{var c=parseInt(this.parent.getHtmlElement().style.height);
var b=AjxStringUtil.getUnitsFromSizeString(this.parent.getHtmlElement().style.height);
if(c>26){this._contentEl.style.height=(Number(c-26).toString()+b)
}}this._contentEl.style.width=this.parent.getHtmlElement().style.width;
if(d){this.setObject()
}ZaGlobalAdvancedStatsPage.plotGlobalQuickChart("global-message-asav-48hours","zmmtastats",["filter_virus","filter_spam"],["filtered"],"now-48h","now",{convertToCount:1});
ZaGlobalAdvancedStatsPage.plotGlobalQuickChart("global-message-asav-30days","zmmtastats",["filter_virus","filter_spam"],["filtered"],"now-30d","now",{convertToCount:1});
ZaGlobalAdvancedStatsPage.plotGlobalQuickChart("global-message-asav-60days","zmmtastats",["filter_virus","filter_spam"],["filtered"],"now-60d","now",{convertToCount:1});
ZaGlobalAdvancedStatsPage.plotGlobalQuickChart("global-message-asav-year","zmmtastats",["filter_virus","filter_spam"],["filtered"],"now-1y","now",{convertToCount:1})
};
ZaGlobalSpamActivityPage.prototype.setObject=function(){};
ZaGlobalSpamActivityPage.prototype._createHtml=function(){DwtTabViewPage.prototype._createHtml.call(this);
var b=0;
var c=new Array(50);
c[b++]="<div class='StatsHeader'>"+ZaMsg.Stats_AV_Header+"</div>";
c[b++]="<div class='StatsDiv'>";
c[b++]="<div class='StatsImageTitle'>"+AjxStringUtil.htmlEncode(ZaMsg.NAD_StatsHour)+"</div>";
c[b++]="<div class='StatsImage'>";
c[b++]="<canvas id='loggercanvasglobal-message-asav-48hours'><div id='loggerchartglobal-message-asav-48hours'></div>";
c[b++]="</div>";
c[b++]="<div class='StatsImageTitle'>"+AjxStringUtil.htmlEncode(ZaMsg.NAD_StatsDay)+"</div>";
c[b++]="<div class='StatsImage'>";
c[b++]="<canvas id='loggercanvasglobal-message-asav-30days'><div id='loggerchartglobal-message-asav-30days'></div>";
c[b++]="</div>";
c[b++]="<div class='StatsImageTitle'>"+AjxStringUtil.htmlEncode(ZaMsg.NAD_StatsMonth)+"</div>";
c[b++]="<div class='StatsImage'>";
c[b++]="<canvas id='loggercanvasglobal-message-asav-60days'><div id='loggerchartglobal-message-asav-60days'></div>";
c[b++]="</div>";
c[b++]="<div class='StatsImageTitle'>"+AjxStringUtil.htmlEncode(ZaMsg.NAD_StatsYear)+"</div>";
c[b++]="<div class='StatsImage'>";
c[b++]="<canvas id='loggercanvasglobal-message-asav-year'><div id='loggerchartglobal-message-asav-year'></div>";
c[b++]="</div>";
c[b++]="</div>";
this.getHtmlElement().innerHTML=c.join("")
}
}if(AjxPackage.define("zimbraAdmin.statistics.view.ZaGlobalAdvancedStatsPage")){ZaGlobalAdvancedStatsPage=function(b){DwtTabViewPage.call(this,b);
this._fieldIds=new Object();
this._app=ZaApp.getInstance();
this.initialized=false;
this.setScrollStyle(DwtControl.SCROLL)
};
ZaGlobalAdvancedStatsPage.prototype=new DwtTabViewPage;
ZaGlobalAdvancedStatsPage.prototype.constructor=ZaGlobalAdvancedStatsPage;
ZaGlobalAdvancedStatsPage.prototype.toString=function(){return"ZaGlobalAdvancedStatsPage"
};
ZaGlobalAdvancedStatsPage.prototype.showMe=function(e){this.setZIndex(DwtTabView.Z_ACTIVE_TAB);
if(this.parent.getHtmlElement().offsetHeight>26){this._contentEl.style.height=this.parent.getHtmlElement().offsetHeight-26
}else{var d=parseInt(this.parent.getHtmlElement().style.height);
var c=AjxStringUtil.getUnitsFromSizeString(this.parent.getHtmlElement().style.height);
if(d>26){this._contentEl.style.height=(Number(d-26).toString()+c)
}}this._contentEl.style.width=this.parent.getHtmlElement().style.width;
if(e){this.setObject()
}if(!this._chartHtmlShown){ZaGlobalAdvancedStatsPage.insertChartHTML(this.getHtmlElement());
this._chartHtmlShown=true
}var b=ZaApp.getInstance().getCurrentController();
b._helpURL=location.pathname+ZaUtil.HELP_URL+"monitoring/creating_advanced_server_statistics.htm?locid="+AjxEnv.DEFAULT_LOCALE;
b._helpButtonText=ZaMsg.helpCreateAdvServerStat
};
ZaGlobalAdvancedStatsPage.prototype.hideMe=function(){DwtTabViewPage.prototype.hideMe.call(this);
var b=ZaApp.getInstance().getCurrentController();
b._helpURL=location.pathname+ZaUtil.HELP_URL+"monitoring/checking_usage_statistics.htm?locid="+AjxEnv.DEFAULT_LOCALE;
b._helpButtonText=ZaMsg.helpCheckStatistics
};
ZaGlobalAdvancedStatsPage.getDataTipText=function(b){return AjxMessageFormat.format(ZaMsg.NAD_AdvStatsDataTip,[ZaGlobalAdvancedStatsPage.formatLabel(b.formattedValue),AjxDateFormat.format(ZaMsg.NAD_AdvStatsTipDateFormat,new Date(b.label))])
};
ZaGlobalAdvancedStatsPage.formatLabel=function(b){return b.split(".")[0].toString()
};
ZaGlobalAdvancedStatsPage.dynamicColors=function(){var e=Math.floor(Math.random()*255);
var d=Math.floor(Math.random()*255);
var c=Math.floor(Math.random()*255);
return"rgb("+e+","+d+","+c+")"
};
ZaGlobalAdvancedStatsPage.getTarget=function(b){if(b&&b.target){return b.target
}else{return window.event.srcElement
}};
ZaGlobalAdvancedStatsPage.indexOf=function(c,d){if(Array.indexOf){return c.indexOf(d)
}else{for(var b=0;
b<c.length;
b++){if(c[b]==d){return b
}}return -1
}};
ZaGlobalAdvancedStatsPage.setText=function(c,d){var b=(document.getElementsByTagName("body")[0].innerText!=undefined);
if(b){c.innerText=d
}else{c.textContent=d
}};
ZaGlobalAdvancedStatsPage.plotGlobalQuickChart=function(b,q,j,h,c,l,r){var d=document.getElementById("loggerchart"+b);
var f=document.getElementById("loggercanvas"+b);
ZaGlobalAdvancedStatsPage.setText(d,ZaMsg.NAD_AdvStatsLoadingDataLabel);
f.style.display="none";
var n=AjxSoapDoc.create("GetLoggerStatsRequest",ZaZimbraAdmin.URN,null);
n.set("startTime",{"!time":c});
n.set("endTime",{"!time":l});
var p=[];
for(var m=0;
m<j.length;
m++){p.push({"!name":j[m]})
}var o={"!name":q,"!limit":"true"};
if(p.length>0){o.values={stat:[]};
for(var m=0;
m<p.length;
m++){o.values.stat.push(p[m])
}}n.set("stats",o);
var g=function(t){if(t.isException&&t.isException()){ZaApp.getInstance().getCurrentController()._handleException(t.getException(),"ZaGlobalAdvancedStatsPage.plotGlobalQuickChart",null,false);
return
}var v=t.getResponse().Body.GetLoggerStatsResponse;
if(!v.hostname||!v.hostname[0].stats){var I=document.getElementById("loggerchart"+b);
ZaGlobalAdvancedStatsPage.setText(I,ZaMsg.NAD_AdvStatsNoDataLabel);
return
}var J={};
var A=v.hostname;
if(A[0]&&A[0].stats[0]&&A[0].stats[0].values){var x=A[0].stats[0].values;
var H=x.length;
var w=A.length;
for(var E=0;
E<H;
E++){var B=0;
for(var D=0;
D<w;
D++){if(A[D].stats&&A[D].stats.length>0&&A[D].stats[0].values&&A[D].stats[0].values.length>0&&A[D].stats[0].values[E]&&A[D].stats[0].values[E].stat&&A[D].stats[0].values[E].stat.length>0&&A[D].stats[0].values[E].stat[0]){B=B+parseFloat(A[D].stats[0].values[E].stat[0].value)
}}var G=B/w;
if(!J[A[0].stats[0].values[E].t]){J[A[0].stats[0].values[E].t]={}
}J[A[0].stats[0].values[E].t][A[0].stats[0].values[0].stat[0].name]=G
}}var y=[];
var F=0;
var s=Object.keys(J);
if(s[1]!=null){F=s[1]-s[0]
}for(var E in J){record={timestamp:new Date(E*1000)};
for(var D in J[E]){record[D]=J[E][D]
}for(var D=0;
D<j.length;
D++){if(!record[j[D]]){record[j[D]]=0
}if(r&&r.convertToCount){record[j[D]]=record[j[D]]*F
}}y.push(record)
}if(y.length<1){ZaGlobalAdvancedStatsPage.setText(d,ZaMsg.NAD_AdvStatsNoDataLabel);
f.style.display="none";
return
}else{ZaGlobalAdvancedStatsPage.setText(d,"");
f.style.display="block"
}var z=[];
for(var E=0;
E<j.length;
E++){var u=j[E];
if(h!=null){u=u+" ("+h[h.length==1?0:E]+")"
}z.push({displayName:u,yField:j[E]})
}var C=["timestamp"];
for(var E=0;
E<j.length;
E++){C.push(j[E])
}ZaGlobalAdvancedStatsPage.plotChart(b,C,z,y)
};
var k={soapDoc:n,asyncMode:true,callback:new AjxCallback(g)};
var e={controller:ZaApp.getInstance().getCurrentController()};
ZaRequestMgr.invoke(k,e)
};
ZaGlobalAdvancedStatsPage.plotQuickChart=function(c,q,r,j,h,d,l,s){var b=document.getElementById("loggerchart"+c);
var f=document.getElementById("loggercanvas"+c);
b.style.display="block";
ZaGlobalAdvancedStatsPage.setText(b,ZaMsg.NAD_AdvStatsLoadingDataLabel);
f.style.display="none";
var n=AjxSoapDoc.create("GetLoggerStatsRequest",ZaZimbraAdmin.URN,null);
n.set("hostname",{"!hn":q});
n.set("startTime",{"!time":d});
n.set("endTime",{"!time":l});
var p=[];
for(var m=0;
m<j.length;
m++){p.push({"!name":j[m]})
}var o={"!name":r,"!limit":"true"};
if(p.length>0){o.values={stat:[]};
for(var m=0;
m<p.length;
m++){o.values.stat.push(p[m])
}}n.set("stats",o);
var g=function(u){if(u.isException&&u.isException()){ZaApp.getInstance().getCurrentController()._handleException(u.getException(),"ZaGlobalAdvancedStatsPage.plotGlobalQuickChart",null,false);
return
}var t=u.getResponse().Body.GetLoggerStatsResponse;
if(!t.hostname||!t.hostname[0].stats){var z=document.getElementById("loggerchart"+c);
ZaGlobalAdvancedStatsPage.setText(z,ZaMsg.NAD_AdvStatsNoDataLabel);
return
}var F=t.hostname[0].stats[0].values;
if(!F){var z=document.getElementById("loggerchart"+c);
ZaGlobalAdvancedStatsPage.setText(z,ZaMsg.NAD_AdvStatsNoDataLabel);
return
}var G=[];
var B=0;
var C=new Array();
for(var w=0;
w<j.length;
w++){C.push(j[w].replace(/[\/%:]/g,"_"))
}for(var w=0;
w<F.length;
w++){if(w+1<F.length){B=F[w+1].t-F[w].t
}var A=new Date(F[w].t*1000);
var x={timestamp:A};
for(var v=0;
v<F[w].stat.length;
v++){if(ZaGlobalAdvancedStatsPage.indexOf(j,F[w].stat[v].name)!=-1){x[F[w].stat[v].name.replace(/[\/%:]/g,"_")]=F[w].stat[v].value
}}for(var v=0;
v<C.length;
v++){if(!x[C[v]]){x[C[v]]=0
}if(s&&s.convertToCount){x[C[v]]=x[C[v]]*B
}}G.push(x)
}if(G.length<1){ZaGlobalAdvancedStatsPage.setText(b,ZaMsg.NAD_AdvStatsNoDataLabel);
f.style.display="none";
return
}else{ZaGlobalAdvancedStatsPage.setText(b,"");
f.style.display="block"
}var D=[];
for(var w=0;
w<j.length;
w++){var E=j[w];
if(h!=null){if((h.length==1&&h[0]!=null)||(h.length>1&&h[w]!=null)){E=E+" ("+h[h.length==1?0:w]+")"
}}D.push({displayName:E,yField:C[w]})
}var y=["timestamp"];
for(var w=0;
w<C.length;
w++){y.push(C[w])
}ZaGlobalAdvancedStatsPage.plotChart(c,y,D,G)
};
var k={soapDoc:n,asyncMode:true,callback:new AjxCallback(g)};
var e={controller:ZaApp.getInstance().getCurrentController(),busyMsg:ZaMsg.PQ_LOADING};
ZaRequestMgr.invoke(k,e)
};
ZaGlobalAdvancedStatsPage.plotChart=function(b,k,o,r){var m=0;
for(var f=0;
f<o.length;
f++){o[f].style={size:4,lineSize:1}
}for(var f=0;
f<r.length;
f++){for(var e=0;
e<o.length;
e++){m=Math.max(m,r[f][o[e].yField])
}}var h={};
if(r.length>1){var q=r[1].timestamp.getTime()-r[0].timestamp.getTime();
q=q/1000/60;
h.title=AjxMessageFormat.format(ZaMsg.NAD_AdvStatsIntervalFormatMinutes,[q])
}else{h.title=AjxMessageFormat.format(ZaMsg.NAD_AdvStatsIntervalFormatMinutes,[0])
}h.labelFunction=function(u){var s=r[0].timestamp.getTime();
var j=r[r.length-1].timestamp.getTime();
var v=(j-s)/1000;
var t;
if(v>2*24*60*60){t=AjxDateFormat.getDateInstance(AjxDateFormat.SHORT)
}else{t=AjxDateFormat.getTimeInstance(AjxDateFormat.SHORT)
}return t.format(u)
};
h.maximum=r[r.length-1].timestamp;
h.minimum=r[0].timestamp;
var d=document.getElementById("loggercanvas"+b);
d.parentNode.style.height="200px";
var l=[],g=[];
if(this.lineColors===undefined){this.lineColors={}
}if(o.length>1){o.forEach(function(j){if(!this.lineColors[j.displayName]){this.lineColors[j.displayName]=ZaGlobalAdvancedStatsPage.dynamicColors()
}},this)
}else{this.lineColors[o[0].displayName]="rgb(54, 162, 235)"
}for(var n=0;
n<o.length;
n++){g[n]={label:o[n].displayName,backgroundColor:this.lineColors[o[n].displayName],borderColor:this.lineColors[o[n].displayName],data:[],fill:false};
l[n]=[];
r.forEach(function(j){l[n].push(j.timestamp);
g[n].data.push(j[o[n].yField])
})
}ZaGlobalAdvancedStatsPage.CHART_DATA_SOURCE=g;
var c={type:"line",data:{labels:l[0],datasets:g},options:{animation:false,responsive:true,maintainAspectRatio:false,datasets:{line:{tension:0.4}},plugins:{legend:{display:true,position:"bottom"},tooltip:{enabled:true,mode:"point",external:function(j){if(!j){return
}j.displayColors=false
},callbacks:{title:function(){return null
},label:function(j){return ZaGlobalAdvancedStatsPage.getDataTipText(j)
}}}},hover:{mode:"nearest",intersect:true},scales:{x:{display:true,title:{display:true,text:h.title},ticks:{display:true,autoSkip:true,autoSkipPadding:15,maxRotation:0,callback:function(u,t,j){var s=this.getLabelForValue(u);
return h.labelFunction(s)
}}},y:{display:true,suggestedMin:0,suggestedMax:m+10,ticks:{maxTicksLimit:o[0].style.size,callback:function(t,s,j){return t.toLocaleString()
}}}}}};
var p=document.getElementById("loggercanvas"+b).getContext("2d");
if(window["loggercanvas"+b]&&window["loggercanvas"+b].destroy!==undefined){window["loggercanvas"+b].destroy()
}window["loggercanvas"+b]=new Chart(p,c)
};
ZaGlobalAdvancedStatsPage.prototype.setObject=function(b){};
ZaGlobalAdvancedStatsPage.serverSelected=function(d,j){var c=ZaGlobalAdvancedStatsPage.getTarget(d);
var e=c[c.selectedIndex].value;
var h=AjxSoapDoc.create("GetLoggerStatsRequest",ZaZimbraAdmin.URN,null);
h.set("hostname",{"!hn":e});
var b=function(l){var k=l.getResponse().Body.GetLoggerStatsResponse;
var o=document.getElementById("select-group"+j);
var q=k.hostname[0].stats;
ZaGlobalAdvancedStatsPage.clearSelect(o);
for(var n=0,m=q.length;
n<m;
n++){var p=document.createElement("option");
if(n==0){p.selected="selected"
}p.value=q[n].name;
ZaGlobalAdvancedStatsPage.setText(p,q[n].name);
o.appendChild(p)
}ZaGlobalAdvancedStatsPage.groupSelected({target:o},j)
};
var f={soapDoc:h,asyncMode:true,callback:new AjxCallback(b)};
var g={controller:ZaApp.getInstance().getCurrentController(),busyMsg:ZaMsg.PQ_LOADING};
ZaRequestMgr.invoke(f,g)
};
ZaGlobalAdvancedStatsPage.clearSelect=function(d){var b=d.getElementsByTagName("option");
for(var c=d.childNodes.length;
c>0;
c--){d.removeChild(d.childNodes.item(c-1))
}};
ZaGlobalAdvancedStatsPage.groupSelected=function(d,h){var b=ZaGlobalAdvancedStatsPage.getTarget(d);
var f=document.getElementById("select-servers"+h);
var e=f[f.selectedIndex].value;
var g=b[b.selectedIndex].value;
var c=document.getElementById("select-counter"+h);
ZaGlobalAdvancedStatsPage.clearSelect(c);
ZaGlobalAdvancedStatsPage._getCounters(e,g,c)
};
ZaGlobalAdvancedStatsPage._getCounters=function(d,h,c){var g=AjxSoapDoc.create("GetLoggerStatsRequest",ZaZimbraAdmin.URN,null);
g.set("hostname",{"!hn":d});
var j=g.set("stats",{"!name":h});
g.set(null,"get-counters",j);
var b=function(l){var k=l.getResponse().Body.GetLoggerStatsResponse;
var p=k.hostname[0].stats[0].values[0].stat;
if(p){for(var n=0,m=p.length;
n<m;
n++){var o=document.createElement("option");
o.value=p[n].name;
ZaGlobalAdvancedStatsPage.setText(o,p[n].name);
if(p[n].type){o.columnUnit=p[n].type
}c.appendChild(o)
}}};
var e={soapDoc:g,asyncMode:true,callback:new AjxCallback(b)};
var f={controller:ZaApp.getInstance().getCurrentController(),busyMsg:ZaMsg.PQ_LOADING};
ZaRequestMgr.invoke(e,f)
};
ZaGlobalAdvancedStatsPage.getMTAHosts=function(){if(ZaGlobalAdvancedStatsPage.MTA_HOSTS){return ZaGlobalAdvancedStatsPage.MTA_HOSTS
}var k=new Array();
var h=ZaApp.getInstance().getServerList();
if(h){var c=h.getArray();
var d=c.length;
for(var f=0;
f<d;
f++){var m=c[f];
var n=false;
var l=false;
if(m.attrs){var b=m.attrs[ZaServer.A_zimbraServiceEnabled];
var g=m.attrs[ZaServer.A_zimbraServiceEnabled];
var e;
for(e in b){if(b[e]=="mta"){l=true;
break
}}for(e in g){if(g[e]=="mta"){n=true;
break
}}}if(n&&l){k.push(c[f].name)
}}}ZaGlobalAdvancedStatsPage.MTA_HOSTS=k;
return ZaGlobalAdvancedStatsPage.MTA_HOSTS
};
ZaGlobalAdvancedStatsPage.hideDIVs=function(e){if(e&&e instanceof Array){var d=e.length;
for(var c=0;
c<d;
c++){var b=document.getElementById("loggerchart"+e[c]);
if(b!=null){b.style.display="none"
}}}};
ZaGlobalAdvancedStatsPage.getCounters=function(m,n){var k=AjxSoapDoc.create("GetLoggerStatsRequest",ZaZimbraAdmin.URN,null);
k.set("hostname",{"!hn":m});
var c=k.set("stats",{"!name":n});
k.set(null,"get-counters",c);
var f={soapDoc:k};
var e={controller:ZaApp.getInstance().getCurrentController(),busyMsg:ZaMsg.PQ_LOADING};
var d=ZaRequestMgr.invoke(f,e).Body.GetLoggerStatsResponse;
if(d&&d.hostname&&d.hostname[0]&&d.hostname[0].stats&&d.hostname[0].stats[0]&&d.hostname[0].stats[0].values&&d.hostname[0].stats[0].values[0]&&d.hostname[0].stats[0].values[0].stat){var b=d.hostname[0].stats[0].values[0].stat;
var l=[];
if(b){for(var h=0,g=b.length;
h<g;
h++){l.push(b[h].name)
}}return l
}return 0
};
ZaGlobalAdvancedStatsPage.counterSelected=function(p,b){var m=ZaGlobalAdvancedStatsPage.getTarget(p);
if(AjxUtil.isEmpty(m)){return
}var d=document.getElementById("loggerchart"+b);
ZaGlobalAdvancedStatsPage.setText(d,ZaMsg.NAD_AdvStatsLoadingDataLabel);
var n=document.getElementById("select-servers"+b);
if(AjxUtil.isEmpty(n)||AjxUtil.isEmpty(n.selectedIndex)||n.selectedIndex<0||!n[n.selectedIndex]||!n[n.selectedIndex].value){return
}var l=n[n.selectedIndex].value;
var k=document.getElementById("select-group"+b);
if(AjxUtil.isEmpty(k)||AjxUtil.isEmpty(k.selectedIndex)||k.selectedIndex<0||!k[k.selectedIndex]||!k[k.selectedIndex].value){return
}var o=k[k.selectedIndex].value;
var e=[];
var j=[];
var h=0;
for(var f=0;
f<m.options.length;
f++){if(m.options[f].selected){e[h]=m.options[f].value;
j[h]=m.options[f].columnUnit?m.options[f].columnUnit:null;
h++
}}if(e.length==0){return
}var c=document.getElementById("input-start-time"+b).value;
var g=document.getElementById("input-end-time"+b).value;
ZaGlobalAdvancedStatsPage.plotQuickChart(b,l,o,e,j,c,g)
};
ZaGlobalAdvancedStatsPage.showhide=function(c){var b=document.getElementById(c);
b.style.display=(b.style.display=="none")?"":"none";
return b.style.display!="none"
};
ZaGlobalAdvancedStatsPage.removeChild=function(c){var b=document.getElementById(c);
if(!AjxUtil.isEmpty(b)&&!AjxUtil.isEmpty(b.parentNode)){b.parentNode.removeChild(b)
}};
ZaGlobalAdvancedStatsPage.insertChartHTML=function(f){var q=Math.random();
var e=document.createElement("form");
e.style.margin="5px 10px";
e.id="loggerform"+q;
e.onsubmit="return false;";
e.action="#";
var u=document.createElement("table");
u.className="ChartSettings";
var c=document.createElement("tbody");
u.appendChild(c);
u.id="loggertable"+q;
u.style.tableLayout="fixed";
if(AjxEnv.isIE){u.style.width="96%"
}var l;
var d;
var k;
var r;
d=document.createElement("tr");
k=document.createElement("td");
l=document.createElement("label");
l.style.display="block";
l.htmlFor="select-servers"+q;
ZaGlobalAdvancedStatsPage.setText(l,ZaMsg.NAD_AdvStatsServerLabel);
r=document.createElement("select");
r.id="select-servers"+q;
r.style.width="18em";
r.name="servers";
r.onchange=function(w){ZaGlobalAdvancedStatsPage.serverSelected(w,q)
};
k.vAlign="top";
k.appendChild(l);
k.appendChild(r);
d.appendChild(k);
k=document.createElement("td");
l=document.createElement("label");
l.style.display="block";
l.htmlFor="select-group"+q;
ZaGlobalAdvancedStatsPage.setText(l,ZaMsg.NAD_AdvStatsGroupLabel);
r=document.createElement("select");
r.id="select-group"+q;
r.style.width="18em";
r.name="groups";
r.onchange=function(w){ZaGlobalAdvancedStatsPage.groupSelected(w,q)
};
k.vAlign="top";
k.appendChild(l);
k.appendChild(r);
d.appendChild(k);
k=document.createElement("td");
l=document.createElement("label");
l.style.display="block";
l.htmlFor="select-counter"+q;
ZaGlobalAdvancedStatsPage.setText(l,ZaMsg.NAD_AdvStatsCountersLabel);
r=document.createElement("select");
r.id="select-counter"+q;
r.style.width="18em";
r.name="counters";
r.multiple=true;
r.size=5;
r.onchange=function(w){ZaGlobalAdvancedStatsPage.counterSelected(w,q)
};
k.vAlign="top";
k.appendChild(l);
k.appendChild(r);
d.appendChild(k);
c.appendChild(d);
var m;
d=document.createElement("tr");
k=document.createElement("td");
l=document.createElement("label");
l.style.display="block";
l.htmlFor="input-start-time"+q;
ZaGlobalAdvancedStatsPage.setText(l,ZaMsg.NAD_AdvStatsStartLabel);
m=document.createElement("input");
m.id="input-start-time"+q;
m.type="text";
m.name="startTime";
m.value="now-1d";
k.appendChild(l);
k.appendChild(m);
k.valign="top";
d.appendChild(k);
k=document.createElement("td");
l=document.createElement("label");
l.style.display="block";
l.htmlFor="input-end-time"+q;
ZaGlobalAdvancedStatsPage.setText(l,ZaMsg.NAD_AdvStatsEndLabel);
m=document.createElement("input");
m.id="input-end-time"+q;
m.type="text";
m.name="endTime";
m.value="now";
k.appendChild(l);
k.appendChild(m);
k.valign="top";
d.appendChild(k);
c.appendChild(d);
e.appendChild(u);
var v;
var s;
v=document.createElement("a");
v.href="javascript:void(0)";
v.className="LinkButton";
v.onclick=function(w){var x=ZaGlobalAdvancedStatsPage.showhide("loggertable"+q);
var y=ZaGlobalAdvancedStatsPage.getTarget(w);
ZaGlobalAdvancedStatsPage.setText(y,(x?ZaMsg.NAD_AdvStatsHideChartSettingsLabel:ZaMsg.NAD_AdvStatsShowChartSettingsLabel));
return false
};
ZaGlobalAdvancedStatsPage.setText(v,ZaMsg.NAD_AdvStatsHideChartSettingsLabel);
e.appendChild(v);
v=document.createElement("a");
v.href="javascript:void(0)";
v.className="LinkButton";
v.onclick=function(){var w=document.getElementById("select-counter"+q);
ZaGlobalAdvancedStatsPage.counterSelected({target:w},q);
return false
};
ZaGlobalAdvancedStatsPage.setText(v,ZaMsg.NAD_AdvStatsUpdateChartLabel);
e.appendChild(v);
v=document.createElement("a");
v.href="javascript:void(0)";
v.className="LinkButton";
v.onclick=function(){ZaGlobalAdvancedStatsPage.removeChild("loggerform"+q);
ZaGlobalAdvancedStatsPage.removeChild("loggerchart"+q);
ZaGlobalAdvancedStatsPage.removeChild("loggercanvas"+q);
return false
};
ZaGlobalAdvancedStatsPage.setText(v,ZaMsg.NAD_AdvStatsRemoveChartLabel);
e.appendChild(v);
var n=document.createElement("div");
n.style.padding="5px 10px 15px";
n.id="loggerchart"+q;
f.appendChild(e);
f.appendChild(n);
var t=document.createElement("div");
t.style.height="200px";
var h=document.createElement("canvas");
h.id="loggercanvas"+q;
t.appendChild(h);
f.appendChild(t);
var b=document.getElementById("select-servers"+q);
var j=AjxSoapDoc.create("GetLoggerStatsRequest",ZaZimbraAdmin.URN,null);
var p=function(x){var w=x.getResponse().Body.GetLoggerStatsResponse;
ZaGlobalAdvancedStatsPage.clearSelect(b);
if(w.hostname){for(var z=0,y=w.hostname.length;
z<y;
z++){var A=document.createElement("option");
if(z==0){A.selected="selected"
}A.value=w.hostname[z].hn;
ZaGlobalAdvancedStatsPage.setText(A,w.hostname[z].hn);
b.appendChild(A)
}ZaGlobalAdvancedStatsPage.serverSelected({target:b},q)
}};
var o={soapDoc:j,asyncMode:true,callback:new AjxCallback(p)};
var g={controller:ZaApp.getInstance().getCurrentController(),busyMsg:ZaMsg.PQ_LOADING};
ZaRequestMgr.invoke(o,g)
};
ZaGlobalAdvancedStatsPage.prototype._createHtml=function(){DwtTabViewPage.prototype._createHtml.call(this);
var c=this.getHtmlElement();
var d=document.createElement("div");
d.style.padding="5px 10px";
var b=document.createElement("a");
ZaGlobalAdvancedStatsPage.setText(b,ZaMsg.NAD_AdvStatsAddChartLabel);
b.href="javascript:void(0)";
b.className="LinkButton";
b.onclick=function(){ZaGlobalAdvancedStatsPage.insertChartHTML(c);
return false
};
d.appendChild(b);
c.appendChild(d)
}
}if(AjxPackage.define("zimbraAdmin.statistics.view.ZaServerStatsView")){ZaServerStatsView=function(b){DwtTabView.call(this,b);
this._appCtxt=this.shell.getData(ZaAppCtxt.LABEL);
this._tabBar.setVisible(false);
this._lastWidth=0;
this._lastHeight=0
};
ZaServerStatsView.prototype=new DwtTabView;
ZaServerStatsView.prototype.constructor=ZaServerStatsView;
ZaServerStatsView.prototype._isMtaEnabled=function(b){return b&&b.attrs[ZaServer.A_zimbraMtaServiceEnabled]
};
ZaServerStatsView.prototype._isMailStoreEnabled=function(b){return b&&b.attrs[ZaServer.A_zimbraMailboxServiceEnabled]&&b.attrs[ZaServer.A_zimbraMailClientServiceEnabled]
};
ZaServerStatsView.prototype.toString=function(){return"ZaServerStatsView"
};
ZaServerStatsView.prototype.getTabToolTip=function(){if(this._containedObject){return ZaMsg.tt_tab_View+" "+this._containedObject.type+" "+this._containedObject.name+" "+ZaMsg.tt_tab_Statistics
}else{return""
}};
ZaServerStatsView.prototype.getTabIcon=function(){return"StatisticsByServer"
};
ZaServerStatsView.prototype.getTabTitle=function(){if(this._containedObject){return this._containedObject.name
}else{return""
}};
ZaServerStatsView.prototype.updateTab=function(){var b=this.getAppTab();
b.resetLabel(this.getTabTitle());
b.setImage(this.getTabIcon());
b.setToolTipContent(this.getTabToolTip())
};
ZaServerStatsView.prototype.getAppTab=function(){return ZaApp.getInstance().getTabGroup().getTabById(this.__internalId)
};
ZaServerStatsView.prototype.setObject=function(c){if(!c||!c.id){return
}this._containedObject=c;
this.serverId=c.id;
if(this._msgCountPage==null){this._diskPage=new ZaServerDiskStatsPage(this);
this.addTab(ZaMsg.TABT_Disk,this._diskPage)
}this._diskPage.setObject(c);
if(this._sessionPage==null){this._sessionPage=new ZaServerSessionStatsPage(this);
this.addTab(ZaMsg.TABT_Session,this._sessionPage)
}this._sessionPage.setObject(c);
if(ZaZimbraAdmin.isGlobalAdmin()&&this._isMailStoreEnabled(c)){if(this._mbxPage==null){this._mbxPage=new ZaServerMBXStatsPage(this);
ZaServerMBXStatsPage.TAB_KEY=this.addTab(ZaMsg.TABT_MBX,this._mbxPage)
}this._mbxPage.setObject(c)
}if(this._isMtaEnabled(c)){if(this._msgCountPage==null){this._msgCountPage=new ZaServerMessageCountPage(this);
this.addTab(ZaMsg.TABT_InMsgs,this._msgCountPage)
}this._msgCountPage.setObject(c);
if(this._msgsVolumePage==null){this._msgsVolumePage=new ZaServerMessageVolumePage(this);
this.addTab(ZaMsg.TABT_InData,this._msgsVolumePage)
}this._msgsVolumePage.setObject(c);
if(this._spamPage==null){this._spamPage=new ZaServerSpamActivityPage(this);
this.addTab(ZaMsg.TABT_Spam_Activity,this._spamPage)
}this._spamPage.setObject(c)
}var b=AjxStringUtil.htmlEncode(ZaMsg.NAD_ServerStatistics);
if(c.name){b=b+c.name
}this.titleCell.innerHTML=b;
if(this._lastWidth&&this._lastHeight){this._resetTabSizes(this._lastWidth,this._lastHeight)
}};
ZaServerStatsView.prototype._resetTabSizes=function(c,h){this._lastWidth=c;
this._lastHeight=h;
var g=this._tabBar.getSize();
var k=Dwt.getSize(this.titleCell);
var e=g.y||this._tabBar.getHtmlElement().clientHeight;
var l=k.y||this.titleCell.clientHeight;
var f=c;
var b=(h-e-l);
var j=(b>50)?b:50;
if(this._tabs&&this._tabs.length){for(var d in this._tabs){if(this._tabs[d]["view"]){this._tabs[d]["view"].resetSize(f,j)
}}}};
ZaServerStatsView.prototype._createHtml=function(){DwtTabView.prototype._createHtml.call(this);
this._table=document.createElement("table");
var e=this.getHtmlElement();
e.insertBefore(this._table,e.firstChild);
var d;
var b;
var c;
d=this._table.insertRow(0);
d.align="center";
d.vAlign="middle";
this.titleCell=d.insertCell(d.cells.length);
this.titleCell.align="center";
this.titleCell.vAlign="middle";
this.titleCell.noWrap=true;
this.titleCell.id=Dwt.getNextId();
this.titleCell.align="left";
this.titleCell.innerHTML=AjxStringUtil.htmlEncode(ZaMsg.NAD_ServerStatistics);
this.titleCell.className="AdminTitleBar"
};
ZaServerStatsView.prototype.getTabChoices=function(){var b=[ZaMsg.TABT_Disk,ZaMsg.TABT_Session];
var d=this._containedObject;
if(ZaZimbraAdmin.isGlobalAdmin()&&this._isMailStoreEnabled(d)){b.push(ZaMsg.TABT_MBX)
}if(this._isMtaEnabled(d)){b.push(ZaMsg.TABT_InMsgs);
b.push(ZaMsg.TABT_InData);
b.push(ZaMsg.TABT_Spam_Activity)
}var e=[];
for(var c=1;
c<=b.length;
c++){e.push({value:c,label:b[c-1]})
}return e
}
}if(AjxPackage.define("zimbraAdmin.statistics.view.ZaServerMessageVolumePage")){ZaServerMessageVolumePage=function(b){this.serverId=b.serverId;
DwtTabViewPage.call(this,b);
this._fieldIds=new Object();
this.initialized=false;
this.setScrollStyle(DwtControl.SCROLL)
};
ZaServerMessageVolumePage.prototype=new DwtTabViewPage;
ZaServerMessageVolumePage.prototype.constructor=ZaServerMessageVolumePage;
ZaServerMessageVolumePage.prototype.toString=function(){return"ZaServerMessageVolumePage"
};
ZaServerMessageVolumePage.prototype.showMe=function(j){this.setZIndex(DwtTabView.Z_ACTIVE_TAB);
if(this.parent.getHtmlElement().offsetHeight>26){this._contentEl.style.height=this.parent.getHtmlElement().offsetHeight-26
}else{var f=parseInt(this.parent.getHtmlElement().style.height);
var h=AjxStringUtil.getUnitsFromSizeString(this.parent.getHtmlElement().style.height);
if(f>26){this._contentEl.style.height=(Number(f-26).toString()+h)
}}this._contentEl.style.width=this.parent.getHtmlElement().style.width;
if(j&&this._currentObject){this.setObject(this._currentObject)
}if(this._currentObject){var m=this._currentObject;
var e=this.serverId;
var d=document.getElementById("loggerchartservermv-"+e);
d.style.display="block";
var l=["servermv-no-mta-"+e,"server-message-volume-48hours-"+e,"server-message-volume-30days-"+e,"server-message-volume-60days-"+e,"server-message-volume-year-"+e];
ZaGlobalAdvancedStatsPage.hideDIVs(l);
var k=ZaGlobalAdvancedStatsPage.getMTAHosts();
if(ZaGlobalAdvancedStatsPage.indexOf(k,m.name)!=-1){var b=[null,"now-48h","now-30d","now-60d","now-1y"];
for(var c=1;
c<l.length;
c++){ZaGlobalAdvancedStatsPage.plotQuickChart(l[c],m.name,"zmmtastats",["mta_volume"],["bytes"],b[c],"now",{convertToCount:1})
}}else{var g=document.getElementById("loggerchartservermv-no-mta-"+e);
g.style.display="block";
d.style.display="none";
ZaGlobalAdvancedStatsPage.setText(g,ZaMsg.Stats_NO_MTA)
}}};
ZaServerMessageVolumePage.prototype.setObject=function(b){this._currentObject=b
};
ZaServerMessageVolumePage.prototype._createHtml=function(){DwtTabViewPage.prototype._createHtml.call(this);
var b=0;
var d=new Array(50);
var c=this.serverId;
d[b++]="<h1 style='display:none;' id='loggerchartservermv-no-mta-"+c+"'></h1>";
d[b++]="<div class='StatsHeader'>"+ZaMsg.Stats_MV_Header+"</div>";
d[b++]="<div class='StatsDiv' id='loggerchartservermv-"+c+"'>";
d[b++]="<div class='StatsImageTitle'>"+AjxStringUtil.htmlEncode(ZaMsg.NAD_StatsHour)+"</div>";
d[b++]="<div class='StatsImage'>";
d[b++]="<canvas id='loggercanvasserver-message-volume-48hours-"+c+"'><div id='loggerchartserver-message-volume-48hours-"+c+"'></div>";
d[b++]="</div>";
d[b++]="<div class='StatsImageTitle'>"+AjxStringUtil.htmlEncode(ZaMsg.NAD_StatsDay)+"</div>";
d[b++]="<div class='StatsImage'>";
d[b++]="<canvas id='loggercanvasserver-message-volume-30days-"+c+"'><div id='loggerchartserver-message-volume-30days-"+c+"'></div>";
d[b++]="</div>";
d[b++]="<div class='StatsImageTitle'>"+AjxStringUtil.htmlEncode(ZaMsg.NAD_StatsMonth)+"</div>";
d[b++]="<div class='StatsImage'>";
d[b++]="<canvas id='loggercanvasserver-message-volume-60days-"+c+"'><div id='loggerchartserver-message-volume-60days-"+c+"'></div>";
d[b++]="</div>";
d[b++]="<div class='StatsImageTitle'>"+AjxStringUtil.htmlEncode(ZaMsg.NAD_StatsYear)+"</div>";
d[b++]="<div class='StatsImage'>";
d[b++]="<canvas id='loggercanvasserver-message-volume-year-"+c+"'><div id='loggerchartserver-message-volume-year-"+c+"'></div>";
d[b++]="</div>";
d[b++]="</div>";
this.getHtmlElement().innerHTML=d.join("")
}
}if(AjxPackage.define("zimbraAdmin.statistics.view.ZaServerMessageCountPage")){ZaServerMessageCountPage=function(b){this.serverId=b.serverId;
DwtTabViewPage.call(this,b);
this._fieldIds=new Object();
this.initialized=false;
this.setScrollStyle(DwtControl.SCROLL)
};
ZaServerMessageCountPage.prototype=new DwtTabViewPage;
ZaServerMessageCountPage.prototype.constructor=ZaServerMessageCountPage;
ZaServerMessageCountPage.prototype.toString=function(){return"ZaServerMessageCountPage"
};
ZaServerMessageCountPage.prototype.showMe=function(j){this.setZIndex(DwtTabView.Z_ACTIVE_TAB);
if(this.parent.getHtmlElement().offsetHeight>26){this._contentEl.style.height=this.parent.getHtmlElement().offsetHeight-26
}else{var f=parseInt(this.parent.getHtmlElement().style.height);
var h=AjxStringUtil.getUnitsFromSizeString(this.parent.getHtmlElement().style.height);
if(f>26){this._contentEl.style.height=(Number(f-26).toString()+h)
}}this._contentEl.style.width=this.parent.getHtmlElement().style.width;
if(j&&this._currentObject){this.setObject(this._currentObject)
}if(this._currentObject){var m=this._currentObject;
var e=this.serverId;
var d=document.getElementById("loggerchartservermc-"+e);
d.style.display="block";
var l=["servermc-no-mta-"+e,"server-message-count-48hours-"+e,"server-message-count-30days-"+e,"server-message-count-60days-"+e,"server-message-count-year-"+e];
ZaGlobalAdvancedStatsPage.hideDIVs(l);
var k=ZaGlobalAdvancedStatsPage.getMTAHosts();
if(ZaGlobalAdvancedStatsPage.indexOf(k,m.name)!=-1){var b=[null,"now-48h","now-30d","now-60d","now-1y"];
for(var c=1;
c<l.length;
c++){ZaGlobalAdvancedStatsPage.plotQuickChart(l[c],m.name,"zmmtastats",["mta_count"],["msgs"],b[c],"now",{convertToCount:1})
}}else{var g=document.getElementById("loggerchartservermc-no-mta-"+e);
g.style.display="block";
d.style.display="none";
ZaGlobalAdvancedStatsPage.setText(g,ZaMsg.Stats_NO_MTA)
}}};
ZaServerMessageCountPage.prototype.setObject=function(b){this._currentObject=b
};
ZaServerMessageCountPage.prototype._createHtml=function(){var b=0;
var d=new Array(50);
var c=this.serverId;
DwtTabViewPage.prototype._createHtml.call(this);
d[b++]="<h1 style='display:none;' id='loggerchartservermc-no-mta-"+c+"'></h1>";
d[b++]="<div class='StatsHeader'>"+ZaMsg.Stats_MC_Header+"</div>";
d[b++]="<div class='StatsDiv' id='loggerchartservermc-"+c+"'>";
d[b++]="<div class='StatsImageTitle'>"+AjxStringUtil.htmlEncode(ZaMsg.NAD_StatsHour)+"</div>";
d[b++]="<div class='StatsImage'>";
d[b++]="<canvas id='loggercanvasserver-message-count-48hours-"+c+"'><div id='loggerchartserver-message-count-48hours-"+c+"'></div>";
d[b++]="</div>";
d[b++]="<div class='StatsImageTitle'>"+AjxStringUtil.htmlEncode(ZaMsg.NAD_StatsDay)+"</div>";
d[b++]="<div class='StatsImage'>";
d[b++]="<canvas id='loggercanvasserver-message-count-30days-"+c+"'><div id='loggerchartserver-message-count-30days-"+c+"'></div>";
d[b++]="</div>";
d[b++]="<div class='StatsImageTitle'>"+AjxStringUtil.htmlEncode(ZaMsg.NAD_StatsMonth)+"</div>";
d[b++]="<div class='StatsImage'>";
d[b++]="<canvas id='loggercanvasserver-message-count-60days-"+c+"'><div id='loggerchartserver-message-count-60days-"+c+"'></div>";
d[b++]="</div>";
d[b++]="<div class='StatsImageTitle'>"+AjxStringUtil.htmlEncode(ZaMsg.NAD_StatsYear)+"</div>";
d[b++]="<div class='StatsImage'>";
d[b++]="<canvas id='loggercanvasserver-message-count-year-"+c+"'><div id='loggerchartserver-message-count-year-"+c+"'></div>";
d[b++]="</div>";
d[b++]="</div>";
this.getHtmlElement().innerHTML=d.join("")
}
}if(AjxPackage.define("zimbraAdmin.statistics.view.ZaServerSpamActivityPage")){ZaServerSpamActivityPage=function(b){this.serverId=b.serverId;
DwtTabViewPage.call(this,b);
this._fieldIds=new Object();
this.initialized=false;
this.setScrollStyle(DwtControl.SCROLL)
};
ZaServerSpamActivityPage.prototype=new DwtTabViewPage;
ZaServerSpamActivityPage.prototype.constructor=ZaServerSpamActivityPage;
ZaServerSpamActivityPage.prototype.toString=function(){return"ZaServerSpamActivityPage"
};
ZaServerSpamActivityPage.prototype.showMe=function(j){this.setZIndex(DwtTabView.Z_ACTIVE_TAB);
if(this.parent.getHtmlElement().offsetHeight>26){this._contentEl.style.height=this.parent.getHtmlElement().offsetHeight-26
}else{var f=parseInt(this.parent.getHtmlElement().style.height);
var h=AjxStringUtil.getUnitsFromSizeString(this.parent.getHtmlElement().style.height);
if(f>26){this._contentEl.style.height=(Number(f-26).toString()+h)
}}this._contentEl.style.width=this.parent.getHtmlElement().style.width;
if(j&&this._currentObject){this.setObject(this._currentObject)
}if(this._currentObject){var m=this._currentObject;
var e=this.serverId;
var d=document.getElementById("loggerchartserverasav-"+e);
d.style.display="block";
var l=["serverasav-no-mta-"+e,"server-message-asav-48hours-"+e,"server-message-asav-30days-"+e,"server-message-asav-60days-"+e,"server-message-asav-year-"+e];
ZaGlobalAdvancedStatsPage.hideDIVs(l);
var k=ZaGlobalAdvancedStatsPage.getMTAHosts();
if(ZaGlobalAdvancedStatsPage.indexOf(k,m.name)!=-1){var b=[null,"now-48h","now-30d","now-60d","now-1y"];
for(var c=1;
c<l.length;
c++){ZaGlobalAdvancedStatsPage.plotQuickChart(l[c],m.name,"zmmtastats",["filter_virus","filter_spam"],["filtered"],b[c],"now",{convertToCount:1})
}}else{var g=document.getElementById("loggerchartserverasav-no-mta-"+e);
g.style.display="block";
d.style.display="none";
ZaGlobalAdvancedStatsPage.setText(g,ZaMsg.Stats_NO_MTA)
}}};
ZaServerSpamActivityPage.prototype.setObject=function(b){this._currentObject=b
};
ZaServerSpamActivityPage.prototype._createHtml=function(){DwtTabViewPage.prototype._createHtml.call(this);
var b=0;
var d=new Array(50);
var c=this.serverId;
d[b++]="<h1 style='display:none;' id='loggerchartserverasav-no-mta-"+c+"'></h1>";
d[b++]="<div class='StatsHeader'>"+ZaMsg.Stats_AV_Header+"</div>";
d[b++]="<div class='StatsDiv' id='loggerchartserverasav-"+c+"'>";
d[b++]="<div class='StatsImageTitle'>"+AjxStringUtil.htmlEncode(ZaMsg.NAD_StatsHour)+"</div>";
d[b++]="<div class='StatsImage'>";
d[b++]="<canvas id='loggercanvasserver-message-asav-48hours-"+c+"'><div id='loggerchartserver-message-asav-48hours-"+c+"'></div>";
d[b++]="</div>";
d[b++]="<div class='StatsImageTitle'>"+AjxStringUtil.htmlEncode(ZaMsg.NAD_StatsDay)+"</div>";
d[b++]="<div class='StatsImage'>";
d[b++]="<canvas id='loggercanvasserver-message-asav-30days-"+c+"'><div id='loggerchartserver-message-asav-30days-"+c+"'></div>";
d[b++]="</div>";
d[b++]="<div class='StatsImageTitle'>"+AjxStringUtil.htmlEncode(ZaMsg.NAD_StatsMonth)+"</div>";
d[b++]="<div class='StatsImage'>";
d[b++]="<canvas id='loggercanvasserver-message-asav-60days-"+c+"'><div id='loggerchartserver-message-asav-60days-"+c+"'></div>";
d[b++]="</div>";
d[b++]="<div class='StatsImageTitle'>"+AjxStringUtil.htmlEncode(ZaMsg.NAD_StatsYear)+"</div>";
d[b++]="<div class='StatsImage'>";
d[b++]="<canvas id='loggercanvasserver-message-asav-year-"+c+"'><div id='loggerchartserver-message-asav-year-"+c+"'></div>";
d[b++]="</div>";
d[b++]="</div>";
this.getHtmlElement().innerHTML=d.join("")
}
}if(AjxPackage.define("zimbraAdmin.statistics.view.ZaServerDiskStatsPage")){ZaServerDiskStatsPage=function(b){this.serverId=b.serverId;
DwtTabViewPage.call(this,b);
this._fieldIds=new Object();
this.initialized=false;
this.setScrollStyle(DwtControl.SCROLL)
};
ZaServerDiskStatsPage.prototype=new DwtTabViewPage;
ZaServerDiskStatsPage.prototype.constructor=ZaServerDiskStatsPage;
ZaServerDiskStatsPage.prototype.toString=function(){return"ZaServerDiskStatsPage"
};
ZaServerDiskStatsPage.prototype.showMe=function(k){this.setZIndex(DwtTabView.Z_ACTIVE_TAB);
if(this.parent.getHtmlElement().offsetHeight>26){this._contentEl.style.height=this.parent.getHtmlElement().offsetHeight-26
}else{var h=parseInt(this.parent.getHtmlElement().style.height);
var j=AjxStringUtil.getUnitsFromSizeString(this.parent.getHtmlElement().style.height);
if(h>26){this._contentEl.style.height=(Number(h-26).toString()+j)
}}this._contentEl.style.width=this.parent.getHtmlElement().style.width;
if(k&&this._currentObject){this.setObject(this._currentObject)
}if(this._currentObject){var o=this._currentObject;
var g=this.serverId;
if(!this._disks){var m=ZaGlobalAdvancedStatsPage.getCounters(o.name,"df.csv");
var e={};
for(var f=0;
f<m.length;
f++){var b=m[f].split("::");
e[b[0]]=1
}var l=[];
for(var f in e){l.push(f)
}this._disks=l
}var c=[];
for(var f=0;
f<this._disks.length;
f++){c.push(this._disks[f]+"::disk_pct_used")
}var n=["server-disk-stat-48hours-"+g,"server-disk-stat-30days-"+g,"server-disk-stat-60days-"+g,"server-disk-stat-year-"+g];
var d=["now-48h","now-30d","now-60d","now-1y"];
for(var f=0;
f<n.length;
f++){ZaGlobalAdvancedStatsPage.plotQuickChart(n[f],o.name,"df.csv",c,null,d[f],"now")
}}};
ZaServerDiskStatsPage.prototype.setObject=function(b){this._currentObject=b
};
ZaServerDiskStatsPage.prototype._createHtml=function(){var b=0;
var d=new Array(50);
DwtTabViewPage.prototype._createHtml.call(this);
var c=this.serverId;
d[b++]="<div class='StatsDiv'>";
d[b++]="<div class='StatsImageTitle'>"+AjxStringUtil.htmlEncode(ZaMsg.NAD_StatsHour)+"</div>";
d[b++]="<div class='StatsImage'>";
d[b++]="<canvas id='loggercanvasserver-disk-stat-48hours-"+c+"'><div id='loggerchartserver-disk-stat-48hours-"+c+"'></div>";
d[b++]="</div>";
d[b++]="<div class='StatsImageTitle'>"+AjxStringUtil.htmlEncode(ZaMsg.NAD_StatsDay)+"</div>";
d[b++]="<div class='StatsImage'>";
d[b++]="<canvas id='loggercanvasserver-disk-stat-30days-"+c+"'><div id='loggerchartserver-disk-stat-30days-"+c+"'></div>";
d[b++]="</div>";
d[b++]="<div class='StatsImageTitle'>"+AjxStringUtil.htmlEncode(ZaMsg.NAD_StatsMonth)+"</div>";
d[b++]="<div class='StatsImage'>";
d[b++]="<canvas id='loggercanvasserver-disk-stat-60days-"+c+"'><div id='loggerchartserver-disk-stat-60days-"+c+"'></div>";
d[b++]="</div>";
d[b++]="<div class='StatsImageTitle'>"+AjxStringUtil.htmlEncode(ZaMsg.NAD_StatsYear)+"</div>";
d[b++]="<div class='StatsImage'>";
d[b++]="<canvas id='loggercanvasserver-disk-stat-year-"+c+"'><div id='loggerchartserver-disk-stat-year-"+c+"'></div>";
d[b++]="</div>";
d[b++]="</div>";
this.getHtmlElement().innerHTML=d.join("")
}
}if(AjxPackage.define("zimbraAdmin.statistics.view.ZaServerMBXStatsPage")){ZaServerMBXStatsPage=function(b){DwtTabViewPage.call(this,b);
this.setScrollStyle(Dwt.SCROLL_Y);
this._rendered=false;
this._initialized=false;
this._hide=true;
this._prevSortBy=null;
this._prevAscending=null
};
ZaServerMBXStatsPage.prototype=new DwtTabViewPage;
ZaServerMBXStatsPage.prototype.constructor=ZaServerMBXStatsPage;
ZaServerMBXStatsPage.MBX_DISPLAY_LIMIT=ZaSettings.RESULTSPERPAGE;
ZaServerMBXStatsPage.XFORM_ITEM_ACCOUNT="account";
ZaServerMBXStatsPage.XFORM_ITEM_DISKUSAGE="diskUsage";
ZaServerMBXStatsPage.XFORM_ITEM_QUOTAUSAGE="quotaUsage";
ZaServerMBXStatsPage.XFORM_ITEM_QUOTA="quota";
ZaServerMBXStatsPage.XFORM_ITEM_DISKMBX="diskMbx";
ZaServerMBXStatsPage.XFORM_ITEM_QUOTAMBX="quotaMbx";
ZaServerMBXStatsPage.TAB_KEY=0;
ZaServerMBXStatsPage._offset=0;
ZaServerMBXStatsPage._totalPage=0;
ZaServerMBXStatsPage._currentPage=0;
ZaServerMBXStatsPage.prototype.toString=function(){return"ZaServerMBXStatsPage"
};
ZaServerMBXStatsPage.prototype.setObject=function(b){this._server=b;
DBG.println("Set the new Server Name = "+this._server.name);
this._render(b)
};
ZaServerMBXStatsPage.prototype._render=function(e){if(!this._rendered){var d={getMbxPool:function(g,f){return f.mbxPool
},setMbxPool:function(j,f,h,g){f.mbxPool=j
},items:[{id:"mbxPool",type:_LIST_,setter:"setMbxPool",setterScope:_MODEL_,getter:"getMbxPool",getterScope:_MODEL_}]};
var c=new XModel(d);
var b=new Array();
this._view=new XForm(this._getXForm(),c,b,this);
this._view.setController(this);
this._view.draw();
this._rendered=true
}else{this.showMe(true)
}};
ZaServerMBXStatsPage.prototype.getMbxes=function(h,f,o,b,e){var l={totalPage:0,curPage:0,hasMore:false,mbxes:new Array()};
var u=AjxSoapDoc.create("GetQuotaUsageRequest",ZaZimbraAdmin.URN,null);
this._prevAscending=b;
this._prevSortBy=o;
if(o==null||o==ZaServerMBXStatsPage.XFORM_ITEM_DISKUSAGE){o="totalUsed"
}else{if(o==ZaServerMBXStatsPage.XFORM_ITEM_QUOTAUSAGE){o="percentUsed"
}else{if(o==ZaServerMBXStatsPage.XFORM_ITEM_QUOTA){o="quotaLimit"
}else{if(o==ZaServerMBXStatsPage.XFORM_ITEM_ACCOUNT){o="account"
}else{o="totalUsed"
}}}}u.getMethod().setAttribute("sortBy",o);
if(b){u.getMethod().setAttribute("sortAscending",b)
}u.getMethod().setAttribute("offset",f);
u.getMethod().setAttribute("limit",ZaServerMBXStatsPage.MBX_DISPLAY_LIMIT);
u.getMethod().setAttribute("refresh","1");
var s=new Object();
s.soapDoc=u;
s.targetServer=h;
var t=e?true:false;
if(t){s.asyncMode=true;
s.callback=e
}var d={controller:ZaApp.getInstance().getCurrentController(),busyMsg:ZaMsg.BUSY_GET_QUOTA};
var n=ZaRequestMgr.invoke(s,d);
if(t){return n
}else{n=n.Body.GetQuotaUsageResponse
}if((n.account&&n.account.length>0)&&(n.searchTotal&&n.searchTotal>0)){l.hasMore=n.more;
var p=n.searchTotal;
l.totalPage=parseInt(Math.ceil(p/ZaServerMBXStatsPage.MBX_DISPLAY_LIMIT));
l.curPage=f/ZaServerMBXStatsPage.MBX_DISPLAY_LIMIT+1;
var j=n.account;
var r=0;
var m=0;
var g=0;
var c=1048576;
var k=new Array();
for(var q=0;
q<j.length;
q++){g=(j[q].used/c).toFixed(2);
if(j[q].limit==0){r=ZaMsg.Unlimited;
m=0
}else{if(j[q].limit>=c){r=(j[q].limit/c).toFixed()
}else{r=1
}m=((g*100)/r).toFixed()
}k[q]={account:j[q].name,diskUsage:AjxMessageFormat.format(ZaMsg.MBXStats_DISK_MSB,[AjxUtil.formatSizeForUnits(j[q].used,AjxUtil.SIZE_MEGABYTES,false,1)]),quotaUsage:m+"%",quota:r+" MB"};
k[q].toString=function(){return this.account
}
}l.mbxes=k
}return l
};
ZaServerMBXStatsPage.prototype._getXForm=function(){if(this._xform!=null){return this._xform
}var f=1;
var c=new Array();
var e=1;
c[0]=new ZaListHeaderItem(ZaServerMBXStatsPage.XFORM_ITEM_ACCOUNT,ZaMsg.MBXStats_ACCOUNT,null,250,f++,ZaServerMBXStatsPage.XFORM_ITEM_ACCOUNT,true,true);
c[1]=new ZaListHeaderItem(ZaServerMBXStatsPage.XFORM_ITEM_QUOTA,ZaMsg.MBXStats_QUOTA,null,120,f++,ZaServerMBXStatsPage.XFORM_ITEM_QUOTA,true,true);
e=f;
c[2]=new ZaListHeaderItem(ZaServerMBXStatsPage.XFORM_ITEM_DISKUSAGE,ZaMsg.MBXStats_DISKUSAGE,null,200,f++,ZaServerMBXStatsPage.XFORM_ITEM_DISKUSAGE,true,true);
c[3]=new ZaListHeaderItem(ZaServerMBXStatsPage.XFORM_ITEM_QUOTAUSAGE,ZaMsg.MBXStats_QUOTAUSAGE,null,"auto",f++,ZaServerMBXStatsPage.XFORM_ITEM_QUOTAUSAGE,false,true);
var d="width:100%;overflow:visible;";
var b=AjxEnv.isIE?d+"height:100%;":d;
this._xform={numCols:1,tableCssStyle:b,items:[{ref:"mbxPool",type:_DWT_LIST_,id:"mbxPool",width:"100%",cssClass:"MBXList",defaultColumnSortable:e,getCustomWidth:ZaServerMBXStatsPage.getCustomWidth,getCustomHeight:ZaServerMBXStatsPage.getCustomHeight,forceUpdate:true,widgetClass:ZaServerMbxListView,headerList:c}]};
return this._xform
};
ZaServerMBXStatsPage.getCustomWidth=function(){var c=this.getForm().parent;
if(c._rendered){var b=c.getBounds();
return b.width
}return"100%"
};
ZaServerMBXStatsPage.getCustomHeight=function(){var c=this.getForm().parent;
if(c._rendered){var b=c.getBounds();
return b.height
}return"100%"
};
ZaServerMBXStatsPage.prototype.showMe=function(f){this.setZIndex(DwtTabView.Z_ACTIVE_TAB);
if(this.parent.getHtmlElement().offsetHeight>26){this._contentEl.style.height=this.parent.getHtmlElement().offsetHeight-26
}else{var e=parseInt(this.parent.getHtmlElement().style.height);
var d=AjxStringUtil.getUnitsFromSizeString(this.parent.getHtmlElement().style.height);
if(e>26){this._contentEl.style.height=(Number(e-26).toString()+d)
}}this._contentEl.style.width=this.parent.getHtmlElement().style.width;
var c=null;
if(!this._initialized||f){var g=this._server.attrs;
var h={};
if(g&&(!(g[ZaServer.A_zimbraMailboxServiceInstalled]&&g[ZaServer.A_zimbraMailboxServiceEnabled]))){h.mbxes=[]
}else{h=this.getMbxes(this._server.id,0,this._prevSortBy,this._prevAscending)
}c={serverid:this._server.id,offset:0,sortBy:this._prevSortBy,sortAscending:this._prevAscending,curPage:h.curPage,totalPage:h.totalPage,mbxPool:h.mbxes};
var b=this._view;
b.setInstance(c);
if(!this._initialized){var j=this.parent.getBounds();
this.setSize(j.width,j.height)
}this.mbxPoolWidget=b.getItemById(b.getId()+"_mbxPool").getWidget();
this.mbxPoolWidget.setScrollHasMore(h.hasMore);
this._initialized=true
}else{c=this._view.getInstance()
}this.updateToolbar(c.curPage,c.totalPage);
this._hide=false
};
ZaServerMBXStatsPage.prototype.hideMe=function(){DwtTabViewPage.prototype.hideMe.call(this);
this.updateToolbar(null,null,true);
this._hide=true
};
ZaServerMBXStatsPage.prototype.updateMbxLists=function(e,c,g,h,d){if(e){if(c==null){c=e.serverid
}if(g==null){g=e.offset
}if(h==null){h=e.sortBy
}if(d==null){d=e.sortAscending
}}var f=this.getMbxes(c,g,h,d);
e={serverid:c,offset:g,sortBy:h,sortAscending:d,curPage:f.curPage,totalPage:f.totalPage,mbxPool:f.mbxes};
var b=this._view;
b.parent.updateToolbar(e.curPage,e.totalPage);
b.setInstance(e);
this.mbxPoolWidget.setScrollHasMore(f.hasMore)
};
ZaServerMBXStatsPage.prototype.updateToolbar=function(g,f,e){var b=ZaApp.getInstance().getCurrentController();
try{if(b instanceof ZaServerStatsController){var c=b.getToolBar();
if(c){if(!e){if(g>1){c.enable([ZaOperation.PAGE_BACK,ZaOperation.LABEL],true)
}else{c.enable([ZaOperation.PAGE_BACK],false)
}if(g<f){c.enable([ZaOperation.PAGE_FORWARD,ZaOperation.LABEL],true)
}else{c.enable([ZaOperation.PAGE_FORWARD],false)
}if(g&&f){c.getButton("PageInfo").setText(AjxMessageFormat.format(ZaMsg.MBXStats_PAGEINFO,[g,f]))
}b._helpURL=location.pathname+ZaUtil.HELP_URL+"managing_servers/viewing_mailbox_quotas.htm?locid="+AjxEnv.DEFAULT_LOCALE;
b._helpButtonText=ZaMsg.helpViewMailboxQuotas
}else{c.enable([ZaOperation.PAGE_FORWARD,ZaOperation.PAGE_BACK,ZaOperation.LABEL],false);
c.getButton("PageInfo").setText(AjxMessageFormat.format(ZaMsg.MBXStats_PAGEINFO,[1,1]));
b._helpURL=location.pathname+ZaUtil.HELP_URL+"monitoring/checking_usage_statistics.htm?locid="+AjxEnv.DEFAULT_LOCALE;
b._helpButtonText=ZaMsg.helpCheckStatistics
}}}}catch(d){b._handleException(d,"ZaServerMBXStatsPage.updateToolbar",null,false)
}};
ZaServerMbxListView=function(e,d,c,b){var c=DwtControl.ABSOLUTE_STYLE;
ZaListView.call(this,e,d,c,b,undefined,undefined,true);
this.setLocation(0,0)
};
ZaServerMbxListView.prototype=new ZaListView;
ZaServerMbxListView.prototype.constructor=ZaServerMbxListView;
ZaServerMbxListView.prototype.toString=function(){return"ZaServerMbxListView"
};
ZaServerMbxListView.prototype._createItemHtml=function(g,c,f){var k=new Array(50);
var b=document.createElement("div");
b[DwtListView._STYLE_CLASS]="Row";
b[DwtListView._SELECTED_STYLE_CLASS]=b[DwtListView._STYLE_CLASS]+"-"+DwtCssStyle.SELECTED;
b.className=b[DwtListView._STYLE_CLASS];
this.associateItemWithElement(g,b,DwtListView.TYPE_LIST_ITEM);
var p=0;
k[p++]="<table width='100%'  cellspacing='0' cellpadding='0'>";
k[p++]="<tr>";
if(this._headerList){var e=this._headerList.length;
var l=null;
var d=null;
var j=null;
var m=null;
var n=null;
for(var h=0;
h<e;
h++){var o=this._headerList[h]._field;
if(o==ZaServerMBXStatsPage.XFORM_ITEM_ACCOUNT){k[p++]="<td width="+this._headerList[h]._width+"><nobr>";
k[p++]=AjxStringUtil.htmlEncode(g[ZaServerMBXStatsPage.XFORM_ITEM_ACCOUNT]);
k[p++]="</nobr></td>"
}else{if(o==ZaServerMBXStatsPage.XFORM_ITEM_QUOTAUSAGE){k[p++]="<td width="+this._headerList[h]._width+">";
d="mbxprogressused";
j="mbxprogressbar";
l=new DwtProgressBar(this);
m=g[ZaServerMBXStatsPage.XFORM_ITEM_QUOTAUSAGE];
n=parseInt(m);
if(n>85){d+="Critical"
}else{if(n>65){d+="Warning"
}}l.setProgressCssClass(d);
l.setWholeCssClass(j);
l.setLabel(m,true);
l.setValueByPercent(m);
k[p++]=l.getHtmlElement().innerHTML;
k[p++]="</td>";
l.dispose()
}else{if(o==ZaServerMBXStatsPage.XFORM_ITEM_QUOTA){k[p++]="<td width="+this._headerList[h]._width+">";
k[p++]=AjxStringUtil.htmlEncode(g[ZaServerMBXStatsPage.XFORM_ITEM_QUOTA]);
k[p++]="</td>"
}else{if(o==ZaServerMBXStatsPage.XFORM_ITEM_DISKUSAGE){k[p++]="<td width="+this._headerList[h]._width+">";
k[p++]=AjxStringUtil.htmlEncode(g[ZaServerMBXStatsPage.XFORM_ITEM_DISKUSAGE]);
k[p++]="</td>"
}}}}}}else{k[p++]="<td width=100%><nobr>";
k[p++]=AjxStringUtil.htmlEncode(g[ZaServerMBXStatsPage.XFORM_ITEM_ACCOUNT]);
k[p++]="</nobr></td>"
}k[p++]="</tr></table>";
b.innerHTML=k.join("");
return b
};
ZaServerMbxListView.prototype._setNoResultsHtml=function(){var b=new AjxBuffer();
var c=document.createElement("div");
b.append("<table width='100%' cellspacing='0' cellpadding='1'>","<tr><td class='NoResults'>",AjxStringUtil.htmlEncode(ZaMsg.MBXStats_NoMbx),"</td></tr></table>");
c.innerHTML=b.toString();
this._addRow(c)
};
ZaServerMbxListView.prototype._sortColumn=function(e,g){var d=g?1:0;
var h=e._sortField;
var b=this.parent;
var f=b.getInstance();
var c=b.parent;
c.updateMbxLists(f,null,0,h,d)
};
ZaServerMbxListView.prototype._loadMsg=function(h){var g=h.offset;
var b=this.parent.getInstance();
var f=b.serverid;
var j=b.sortBy;
var d=b.sortAscending;
var c=h.limit;
var e=new AjxCallback(this,this.updateMoreItems);
ZaServerMBXStatsPage.prototype.getMbxes.call(this.parent.parent,f,g,j,d,e)
};
ZaServerMbxListView.prototype.updateMoreItems=function(f){if(f&&!f.isException()){f=f.getResponse().Body.GetQuotaUsageResponse;
var j=AjxNumberFormat.getInstance();
if((f.account&&f.account.length>0)&&(f.searchTotal&&f.searchTotal>0)){var d=f.more;
var e=f.searchTotal;
var b=f.account;
var l=0;
var m=0;
var h=0;
var c=1048576;
var k=new Array();
for(var g=0;
g<b.length;
g++){h=(b[g].used/c).toFixed(2);
if(b[g].limit==0){l=ZaMsg.Unlimited;
m=0
}else{if(b[g].limit>=c){l=(b[g].limit/c).toFixed()
}else{l=1
}m=((h*100)/l).toFixed()
}k[g]={account:b[g].name,diskUsage:AjxMessageFormat.format(ZaMsg.MBXStats_DISK_MSB,[AjxUtil.formatSizeForUnits(b[g].used,AjxUtil.SIZE_MEGABYTES,false,1)]),quotaUsage:m+"%",quota:l+" MB"};
k[g].toString=function(){return this.account
}
}this.replenish(AjxVector.fromArray(k));
this.setScrollHasMore(d)
}}}
}if(AjxPackage.define("zimbraAdmin.statistics.view.ZaServerSessionStatsPage")){ZaServerSessionStatsPage=function(b){DwtTabViewPage.call(this,b);
this._adminSessResp={};
this._imapSessResp={};
this._soapSessResp={};
this._offset={soap:0,admin:0,imap:0};
this._sortBy={soap:"nameAsc",admin:"nameAsc",imap:"nameAsc"};
this._pageObj={};
this._pageObj.soap={curPage:1,totalPage:1};
this._pageObj.admin={curPage:1,totalPage:1};
this._pageObj.imap={curPage:1,totalPage:1};
this._rendered=false
};
ZaServerSessionStatsPage.PAGE_LIMIT=25;
ZaServerSessionStatsPage.prototype=new DwtTabViewPage;
ZaServerSessionStatsPage.prototype.constructor=ZaServerSessionStatsPage;
ZaServerSessionStatsPage.prototype.setObject=function(b){this._server=b
};
ZaServerSessionStatsPage.prototype.setSortBy=function(d){var b=this._localXForm.getInstance();
var c=b[ZaModel.currentTab];
if(c==ZaServerSessionStatsPage.SOAP_TAB_ID){this._sortBy.soap=d
}else{if(c==ZaServerSessionStatsPage.ADMIN_TAB_ID){this._sortBy.admin=d
}else{if(c==ZaServerSessionStatsPage.IMAP_TAB_ID){this._sortBy.imap=d
}}}};
ZaServerSessionStatsPage.prototype.setOffset=function(d){var b=this._localXForm.getInstance();
var c=b[ZaModel.currentTab];
if(c==ZaServerSessionStatsPage.SOAP_TAB_ID){this._offset.soap=d
}else{if(c==ZaServerSessionStatsPage.ADMIN_TAB_ID){this._offset.admin=d
}else{if(c==ZaServerSessionStatsPage.IMAP_TAB_ID){this._offset.imap=d
}}}};
ZaServerSessionStatsPage.prototype._createHtml=function(){DwtTabViewPage.prototype._createHtml.call(this)
};
ZaServerSessionStatsPage.prototype.showMe=function(f){if(!this._rendered){this.setZIndex(DwtTabView.Z_ACTIVE_TAB);
if(this.parent.getHtmlElement().offsetHeight>26){this._contentEl.style.height=this.parent.getHtmlElement().offsetHeight-26
}else{var d=parseInt(this.parent.getHtmlElement().style.height);
var c=AjxStringUtil.getUnitsFromSizeString(this.parent.getHtmlElement().style.height);
if(d>26){this._contentEl.style.height=(Number(d-26).toString()+c)
}}this._contentEl.style.width=this.parent.getHtmlElement().style.width;
var b={currentTab:ZaServerSessionStatsPage.SOAP_TAB_ID};
var e=new XModel({id:"currentTab",type:_UNTYPED_});
this._localXForm=this._view=new XForm(this._getXForm(),e,b,this);
this._view.setController(this);
this._view.draw()
}var g={};
if(f&&f>1){g.refresh="1"
}if(!this._rendered||f>0){this.getSessions({type:"soap"});
this.getSessions({type:"admin"});
this.getSessions({type:"imap"})
}this._rendered=true
};
ZaServerSessionStatsPage.prototype.hideMe=function(){DwtTabViewPage.prototype.hideMe.call(this);
this.updateToolbar(null,true);
this._hide=true
};
ZaServerSessionStatsPage.prototype._pageListener=function(b){var d=this.getType();
var f={};
var e=this._pageObj[d]["curPage"];
var c=this._pageObj[d]["totalPage"];
if(b){f.offset=(e-2)*ZaServerSessionStatsPage.PAGE_LIMIT
}else{f.offset=e*ZaServerSessionStatsPage.PAGE_LIMIT
}f.type=d;
this.getSessions(f)
};
ZaServerSessionStatsPage.prototype.getType=function(c){if(!c){var b=this._localXForm.getInstance();
c=b[ZaModel.currentTab]
}var d;
if(c==ZaServerSessionStatsPage.SOAP_TAB_ID){d="soap"
}else{if(c==ZaServerSessionStatsPage.ADMIN_TAB_ID){d="admin"
}else{if(c==ZaServerSessionStatsPage.IMAP_TAB_ID){d="imap"
}}}return d
};
ZaServerSessionStatsPage.prototype.updateToolbar=function(b,f){var e=ZaApp.getInstance().getCurrentController();
try{if(e instanceof ZaServerStatsController){if(!this._localXForm){return
}var l=this._localXForm.getInstance();
var c=l[ZaModel.currentTab];
var j=this.getType(c);
var k=e.getToolBar();
var h=this._pageObj[j]["curPage"];
var d=this._pageObj[j]["totalPage"];
if(k){if((!f)&&b&&(b==c)){if(h>1){k.enable([ZaOperation.PAGE_BACK,ZaOperation.LABEL],true)
}else{k.enable([ZaOperation.PAGE_BACK],false)
}if(h<d){k.enable([ZaOperation.PAGE_FORWARD,ZaOperation.LABEL],true)
}else{k.enable([ZaOperation.PAGE_FORWARD],false)
}if(h&&d){k.getButton("PageInfo").setText(AjxMessageFormat.format(ZaMsg.MBXStats_PAGEINFO,[h,d]))
}e._helpURL=location.pathname+ZaUtil.HELP_URL+"managing_servers/viewing_mailbox_quotas.htm?locid="+AjxEnv.DEFAULT_LOCALE;
e._helpButtonText=ZaMsg.helpViewMailboxQuotas
}else{if(f){k.enable([ZaOperation.PAGE_FORWARD,ZaOperation.PAGE_BACK,ZaOperation.LABEL],false);
k.getButton("PageInfo").setText(AjxMessageFormat.format(ZaMsg.MBXStats_PAGEINFO,[1,1]));
e._helpURL=location.pathname+ZaUtil.HELP_URL+"monitoring/checking_usage_statistics.htm?locid="+AjxEnv.DEFAULT_LOCALE;
e._helpButtonText=ZaMsg.helpCheckStatistics
}}}}}catch(g){e._handleException(g,"ZaServerSessionStatsPage.updateToolbar",null,false)
}};
ZaServerSessionStatsPage.prototype.dumpSession=function(){var d=AjxSoapDoc.create("DumpSessionsRequest",ZaZimbraAdmin.URN,null);
var b="1";
var e="1";
d.getMethod().setAttribute("listSessions",b);
d.getMethod().setAttribute("groupByAccount",e);
var c=new ZmCsfeCommand();
var f={};
f.soapDoc=d;
f.noAuthToken=true;
f.targetServer=this._server.id;
f.asyncMode=true;
f.callback=new AjxCallback(this,this.dumpSessionCallback);
c.invoke(f)
};
ZaServerSessionStatsPage.prototype.getSessions=function(f){var e=AjxSoapDoc.create("GetSessionsRequest",ZaZimbraAdmin.URN,null);
if(!f){f={}
}var b=this._localXForm.getInstance();
var c=b[ZaModel.currentTab];
if(!f.type){f.type=this.getType(c)
}e.getMethod().setAttribute("type",f.type);
if(f.refresh){e.getMethod().setAttribute("refresh",f.fresh)
}e.getMethod().setAttribute("limit",ZaServerSessionStatsPage.PAGE_LIMIT);
if(!f.offset){f.offset=this._offset[f.type]
}e.getMethod().setAttribute("offset",f.offset);
if(!f.sortBy){f.sortBy=this._sortBy[f.type]
}e.getMethod().setAttribute("sortBy",f.sortBy);
var d=new ZmCsfeCommand();
f.soapDoc=e;
f.noAuthToken=true;
f.targetServer=this._server.id;
f.asyncMode=true;
f.callback=new AjxCallback(this,this.getSessionsCallback,[f]);
d.invoke(f)
};
ZaServerSessionStatsPage.prototype.getSessionsCallback=function(f,j){if(j._data.Body){var d=j._data.Body.GetSessionsResponse;
var c=this._localXForm.getInstance();
c[f.type+"_total"]=d.total;
var h=new AjxVector();
if(d.total>0&&d.s){this._processGetSessResp(d.s,h)
}c[f.type]=h.getArray();
c[f.type].join=ZaServerSessionStatsPage._objArrJoin;
var b=this._localXForm.getItemsById("xform_tabbar")[0];
var g=b.getWidget();
if(f.type=="soap"){g.getItem(ZaServerSessionStatsPage.SOAP_TAB_ID-1).setText(ZaMsg.TABT_SessStatsSoap+" ("+c[f.type+"_total"]+") ")
}else{if(f.type=="admin"){g.getItem(ZaServerSessionStatsPage.ADMIN_TAB_ID-1).setText(ZaMsg.TABT_SessStatsAdmin+" ("+c[f.type+"_total"]+") ")
}else{if(f.type=="imap"){g.getItem(ZaServerSessionStatsPage.IMAP_TAB_ID-1).setText(ZaMsg.TABT_SessStatsImap+" ("+c[f.type+"_total"]+") ")
}}}this._localXForm.setInstance(c)
}this._updatePageObj(f,c[f.type+"_total"]);
var e=c[ZaModel.currentTab];
if((f.type=="soap"&&e==ZaServerSessionStatsPage.SOAP_TAB_ID)||(f.type=="admin"&&e==ZaServerSessionStatsPage.ADMIN_TAB_ID)||(f.type=="imap"&&e==ZaServerSessionStatsPage.IMAP_TAB_ID)){this.updateToolbar(e,false)
}};
ZaServerSessionStatsPage.prototype._updatePageObj=function(d,c){var b=d.type;
var e=d.offset;
this._pageObj[b]["curPage"]=e/ZaServerSessionStatsPage.PAGE_LIMIT+1;
this._pageObj[b]["totalPage"]=Math.ceil(c/ZaServerSessionStatsPage.PAGE_LIMIT)||1
};
ZaServerSessionStatsPage._objArrJoin=function(){var b=[];
for(var c=0;
c<this.length;
c++){b.push(this[c].sid)
}return b.join()
};
ZaServerSessionStatsPage.prototype._processGetSessResp=function(b,d){for(var c=0;
c<b.length;
c++){var e=b[c];
d.add(new ZaServerSession(e.name,e.zid,e.sid,e.cd,e.ld))
}};
ZaServerSessionStatsPage.prototype.dumpSessionCallback=function(d){var c=d._data.Body.DumpSessionsResponse;
this._activeSessions=c.activeSessions;
this._activeAdminSessions=this._activeAdminAccounts=0;
this._activeSoapSessions=this._activeSoapAccounts=0;
this._activeImapSessions=this._activeImapAccounts=0;
this._adminSessList=new AjxVector();
this._imapSessList=new AjxVector();
this._soapSessList=new AjxVector();
if(c.admin){this._adminSessResp=c.admin[0];
this._processResponse(this._adminSessResp,this._adminSessList);
this._activeAdminSessions=this._adminSessResp.activeSessions;
this._activeAdminAccounts=this._adminSessResp.activeAccounts
}if(c.imap){this._imapSessResp=c.imap[0];
this._processResponse(this._imapSessResp,this._imapSessList);
this._activeImapSessions=this._imapSessResp.activeSessions;
this._activeImapAccounts=this._imapSessResp.activeAccounts
}if(c.soap){this._soapSessResp=c.soap[0];
this._processResponse(this._soapSessResp,this._soapSessList);
this._activeSoapSessions=this._soapSessResp.activeSessions;
this._activeSoapAccounts=this._soapSessResp.activeAccounts
}if(this._localXForm){var b=this._localXForm.getInstance();
b[ZaServerSession.A_activeSessions]=this._activeSessions;
b[ZaServerSession.A_activeAdminAccounts]=this._activeAdminAccounts;
b[ZaServerSession.A_activeAdminSessions]=this._activeAdminSessions;
b[ZaServerSession.A_activeSoapSessions]=this._activeSoapSessions;
b[ZaServerSession.A_activeSoapAccounts]=this._activeSoapAccounts;
b[ZaServerSession.A_activeImapAccounts]=this._activeImapAccounts;
b[ZaServerSession.A_activeImapSessions]=this._activeImapSessions;
b.admin=this._adminSessList.getArray();
b.soap=this._soapSessList.getArray();
b.imap=this._imapSessList.getArray();
this._localXForm.setInstance(b)
}};
ZaServerSessionStatsPage.prototype._processResponse=function(c,f){for(var e=0;
e<c.zid.length;
e++){var b=c.zid[e];
var g=b.s;
for(var d=0;
d<g.length;
d++){f.add(new ZaServerSession(b.name,b.id,g[d].sid,g[d].cd,g[d].ld))
}}};
ZaServerSessionStatsPage.prototype.getStatCountsOutput=function(e){var d=new AjxBuffer();
var b=this._localXForm.getInstance();
if(e==ZaServerSession.A_activeSessions){var c=b.soap_total+b.admin_total+b.imap_total;
d.append(ZaMsg.SessStats_ActiveSessions," ",c)
}return d.join("")
};
ZaServerSessionStatsPage.SOAP_TAB_ID=1;
ZaServerSessionStatsPage.ADMIN_TAB_ID=2;
ZaServerSessionStatsPage.IMAP_TAB_ID=3;
ZaServerSessionStatsPage.prototype._getXForm=function(){if(this._xform!=null){return this._xform
}var d=ZaServerSessionListView._getHeaderList();
var c=ZaServerSessionListView._getHeaderList();
var b=ZaServerSessionListView._getHeaderList();
this._xform={x_showBorder:1,numCols:1,cssClass:"ZaServerSessionStatsPage",tableCssStyle:"width:100%",itemDefaults:{},items:[{type:_SPACER_,height:"10px",colSpan:"2",id:"xform_header"},{ref:ZaServerSession.A_activeSessions,type:_OUTPUT_,height:"15px",colSpan:"*",getDisplayValue:"return this.getFormController().getStatCountsOutput(ZaServerSession.A_activeSessions)"},{type:_SPACER_,height:"10px",colSpan:"2",id:"xform_header"},{type:_TAB_BAR_,ref:ZaModel.currentTab,colSpan:"2",onChange:ZaServerSessionStatsPage.tabChanged,choices:[{value:ZaServerSessionStatsPage.SOAP_TAB_ID,label:ZaMsg.TABT_SessStatsSoap},{value:ZaServerSessionStatsPage.ADMIN_TAB_ID,label:ZaMsg.TABT_SessStatsAdmin},{value:ZaServerSessionStatsPage.IMAP_TAB_ID,label:ZaMsg.TABT_SessStatsImap}],cssClass:"ZaTabBar",id:"xform_tabbar"},{type:_SWITCH_,align:_LEFT_,valign:_TOP_,items:[{type:_ZATABCASE_,caseKey:1,align:_LEFT_,valign:_TOP_,cssStyle:"position: absolute; overflow: auto;",paddingStyle:"",getCustomWidth:ZaServerSessionListView.getCustomWidth,getCustomHeight:ZaServerSessionListView.getCustomHeight,items:[{ref:"soap",type:_DWT_LIST_,width:"100%",cssClass:"MBXList",height:(AjxEnv.isIE?"":"100%"),forceUpdate:true,widgetClass:ZaServerSessionListView,headerList:d,defaultColumnSortable:1}]},{type:_ZATABCASE_,caseKey:2,align:_LEFT_,valign:_TOP_,cssStyle:"position: absolute; overflow: auto;",paddingStyle:"",getCustomWidth:ZaServerSessionListView.getCustomWidth,getCustomHeight:ZaServerSessionListView.getCustomHeight,items:[{ref:"admin",type:_DWT_LIST_,width:"100%",cssClass:"MBXList",height:(AjxEnv.isIE?"":"100%"),forceUpdate:true,widgetClass:ZaServerSessionListView,headerList:c,defaultColumnSortable:1}]},{type:_ZATABCASE_,caseKey:3,align:_LEFT_,valign:_TOP_,cssStyle:"position: absolute; overflow: auto;",paddingStyle:"",getCustomWidth:ZaServerSessionListView.getCustomWidth,getCustomHeight:ZaServerSessionListView.getCustomHeight,items:[{ref:"imap",type:_DWT_LIST_,width:"100%",cssClass:"MBXList",height:(AjxEnv.isIE?"":"100%"),forceUpdate:true,widgetClass:ZaServerSessionListView,headerList:b,defaultColumnSortable:1}]}]}]};
return this._xform
};
ZaServerSessionStatsPage.tabChanged=function(d,c,b){this.setInstanceValue(d);
b.parent.updateToolbar(d,false)
};
ZaServerSession=function(c,e,b,f,d){this.name=c;
this.zid=e;
this.sid=b;
this.cd=f;
this.ld=d
};
ZaServerSession.A_activeSessions="activeSessions";
ZaServerSession.A_activeSoapSessions="activeSoapSessions";
ZaServerSession.A_activeImapSessions="activeImapSessions";
ZaServerSession.A_activeAdminSessions="activeAdminSessions";
ZaServerSession.A_activeAccounts="activeAccounts";
ZaServerSession.A_activeAdminAccounts="activeAdminAccounts";
ZaServerSession.A_activeImapAccounts="activeImapAccounts";
ZaServerSession.A_activeSoapAccounts="activeSoapAccounts";
ZaServerSession.getDate=function(c){var b=new Date();
b.setTime(c);
return AjxDateFormat.format("MM/dd/yyyy HH:mm:ss",b)
};
ZaServerSessionListView=function(f,b,e,c){this._app=f.parent._app;
var d=null;
var e=DwtControl.ABSOLUTE_STYLE;
ZaListView.call(this,f,d,e,c);
this.setLocation(0,0);
this._bSortAsc=true
};
ZaServerSessionListView.prototype=new ZaListView;
ZaServerSessionListView.prototype.constructor=ZaServerSessionListView;
ZaServerSessionListView._getHeaderList=function(){var c=new Array();
var b=0;
var d=1;
c[b++]=new ZaListHeaderItem("name",ZaMsg.h_account_name,null,"150px",d++,"name",true,true);
c[b++]=new ZaListHeaderItem("sid",ZaMsg.h_session_id,null,"150px",null,"sid",true,true);
c[b++]=new ZaListHeaderItem("cd",ZaMsg.h_sess_cd,null,"150px",d++,"created",true,true);
c[b++]=new ZaListHeaderItem("ld",ZaMsg.h_sess_ld,null,"auto",d++,"accessed",true,true);
return c
};
ZaServerSessionListView.prototype._createItemHtml=function(c){var f=new Array(50);
var h=document.createElement("div");
h[DwtListView._STYLE_CLASS]="Row";
h[DwtListView._SELECTED_STYLE_CLASS]=h[DwtListView._STYLE_CLASS]+"-"+DwtCssStyle.SELECTED;
h.className=h[DwtListView._STYLE_CLASS];
this.associateItemWithElement(c,h,DwtListView.TYPE_LIST_ITEM);
h.style.height="20";
var b=0;
f[b++]="<table width='100%' height='20' cellspacing='2' cellpadding='0'>";
f[b++]="<tr>";
if(this._headerList){var e=this._headerList.length;
for(var d=0;
d<e;
d++){var g=this._headerList[d]._field;
if(g=="name"){f[b++]="<td width="+this._headerList[d]._width+"><nobr>";
f[b++]=AjxStringUtil.htmlEncode(c.name);
f[b++]="</nobr></td>"
}else{if(g=="sid"){f[b++]="<td width="+this._headerList[d]._width+">";
f[b++]=AjxStringUtil.htmlEncode(c.sid);
f[b++]="</td>"
}else{if(g=="cd"){f[b++]="<td width="+this._headerList[d]._width+">";
f[b++]=AjxStringUtil.htmlEncode(ZaServerSession.getDate(c.cd.toString()));
f[b++]="</td>"
}else{if(g=="ld"){f[b++]="<td width="+this._headerList[d]._width+">";
f[b++]=AjxStringUtil.htmlEncode(ZaServerSession.getDate(c.ld.toString()));
f[b++]="</td>"
}}}}}}else{f[b++]="<td width=100%><nobr>";
f[b++]=AjxStringUtil.htmlEncode(c.zid);
f[b++]="</nobr></td>"
}f[b++]="</tr></table>";
h.innerHTML=f.join("");
return h
};
ZaServerSessionListView.prototype._setNoResultsHtml=function(){var b=new AjxBuffer();
var c=document.createElement("div");
b.append("<table width='100%' cellspacing='0' cellpadding='1'>","<tr><td class='NoResults'>",AjxStringUtil.htmlEncode(ZaMsg.sess_noSess),"</td></tr></table>");
c.innerHTML=b.toString();
this._addRow(c)
};
ZaServerSessionListView.prototype._sortColumn=function(e,f){var g=e._sortField+(f?"Asc":"Desc");
try{var c=ZaApp.getInstance().getCurrentController();
var b=c._contentView._sessionPage;
b.setSortBy(g);
b.showMe(1)
}catch(d){ZaApp.getInstance().getCurrentController()._handleException(d)
}};
ZaServerSessionListView.getCustomWidth=function(){return ZATabCase_XFormItem.prototype.getCustomWidth.call(this)
};
ZaServerSessionListView.getCustomHeight=function(){var b=ZATabCase_XFormItem.prototype.getCustomHeight.call(this);
return b-23
}
}if(AjxPackage.define("zimbraAdmin.rp.view.ZaRetentionPolicyListView")){ZaRetentionPolicyListView=function(e,d,c,b){ZaListView.call(this,e,d,c,b)
};
ZaRetentionPolicyListView.prototype=new ZaListView;
ZaRetentionPolicyListView.prototype.constructor=ZaRetentionPolicyListView;
ZaRetentionPolicyListView.prototype.toString=function(){return"ZaRetentionPolicyListView"
};
ZaRetentionPolicyListView.prototype._createItemHtml=function(l){var g=new Array(50);
var b=document.createElement("div");
b[DwtListView._STYLE_CLASS]="Row";
b[DwtListView._SELECTED_STYLE_CLASS]=b[DwtListView._STYLE_CLASS]+"-"+DwtCssStyle.SELECTED;
b.className=b[DwtListView._STYLE_CLASS];
this.associateItemWithElement(l,b,DwtListView.TYPE_LIST_ITEM);
var k=0;
g[k++]="<table width='100%' cellspacing='0' cellpadding='0'>";
g[k++]="<tr>";
if(this._headerList){var c=this._headerList.length;
for(var f=0;
f<c;
f++){var h=this._headerList[f]._field;
if(h==ZaRetentionPolicy.A2_name){g[k++]="<td align=left height=20px width="+this._headerList[f]._width+">";
g[k++]=AjxStringUtil.htmlEncode(l[ZaRetentionPolicy.A2_name]);
g[k++]="</td>"
}else{if(h==ZaRetentionPolicy.A2_lifetime){g[k++]="<td align=left height=20px width="+this._headerList[f]._width+">";
var d=l[ZaRetentionPolicy.A2_lifetime];
var e=d.substr(0,d.length-1);
var j=d.substr(d.length-1,1);
g[k++]=AjxMessageFormat.format(ZaMsg["TTL_Retention_Policy_"+j],e);
g[k++]="</td>"
}}}}else{g[k++]="<td width=100%>";
g[k++]=AjxStringUtil.htmlEncode(l);
g[k++]="</td>"
}g[k++]="</tr></table>";
b.innerHTML=g.join("");
return b
};
ZaRetentionPolicyListView.prototype._setNoResultsHtml=function(){var b=new AjxBuffer();
var c=document.createElement("div");
b.append("<table width='100%' cellspacing='0' cellpadding='1'>","<tr><td class='NoResults'><br>&nbsp","</td></tr></table>");
c.innerHTML=b.toString();
this._addRow(c)
}
}if(AjxPackage.define("zimbraAdmin.rp.view.ZaRetentionPolicyDlg")){ZaRetentionPolicyDlg=function(d,b,c,e){if(arguments.length==0){return
}this._standardButtons=[DwtDialog.CANCEL_BUTTON,DwtDialog.OK_BUTTON];
ZaXDialog.call(this,d,null,e,b,c,"ZaRetentionPolicyDlg");
this.initForm(ZaRetentionPolicy.myXModel,this.getMyXForm());
this.setTitle(e)
};
ZaRetentionPolicyDlg.prototype=new ZaXDialog;
ZaRetentionPolicyDlg.prototype.constructor=ZaRetentionPolicyDlg;
ZaRetentionPolicyDlg.prototype.isVisible=function(c){var b=this.getForm().getInstanceValue(ZaRetentionPolicy.A2_type);
return b==c
};
ZaRetentionPolicyDlg.prototype.getMyXForm=function(){var b={numCols:2,items:[{type:_GROUP_,isTabGroup:true,numCols:2,colSizes:["150px","auto"],items:[{ref:ZaRetentionPolicy.A2_name,type:_INPUT_,msgName:ZaMsg.LBL_Policy_Name,label:ZaMsg.LBL_Policy_Name,labelLocation:_LEFT_,cssClass:"admin_xform_number_input",width:"300px"},{ref:ZaRetentionPolicy.A2_lifetime,type:_LONG_LIFETIME_,msgName:ZaMsg.LBL_Policy_Retention,label:ZaMsg.LBL_Policy_Retention,labelLocation:_LEFT_,visibilityChecks:[[ZaRetentionPolicyDlg.prototype.isVisible,ZaRetentionPolicy.TYPE_KEEP]]},{ref:ZaRetentionPolicy.A2_lifetime,type:_LONG_LIFETIME_,msgName:ZaMsg.LBL_Policy_Purge,label:ZaMsg.LBL_Policy_Purge,labelLocation:_LEFT_,visibilityChecks:[[ZaRetentionPolicyDlg.prototype.isVisible,ZaRetentionPolicy.TYPE_PURGE]]}]}]};
return b
}
}if(AjxPackage.define("zimbraAdmin.globalconfig.view.GlobalConfigXFormView")){GlobalConfigXFormView=function(b,c){ZaTabView.call(this,{parent:b,iKeyName:"GlobalConfigXFormView",contextId:ZaId.TAB_GSET_EDIT});
this.TAB_INDEX=0;
this.initForm(ZaGlobalConfig.myXModel,this.getMyXForm(c),null)
};
GlobalConfigXFormView.prototype=new ZaTabView();
GlobalConfigXFormView.prototype.constructor=GlobalConfigXFormView;
ZaTabView.XFormModifiers.GlobalConfigXFormView=new Array();
ZaTabView.XFormSetObjectMethods.GlobalConfigXFormView=new Array();
GlobalConfigXFormView.prototype.getTitle=function(){return ZaMsg.GlobalConfig_view_title
};
GlobalConfigXFormView.onRepeatRemove=function(b,c){var d=this.getInstanceValue();
if(d==null||typeof(d)=="string"||b>=d.length||b<0){return
}d.splice(b,1);
c.parent.setDirty(true)
};
GlobalConfigXFormView.prototype.getTabIcon=function(){return"GlobalSettings"
};
GlobalConfigXFormView.prototype.getTabTitle=function(){return this.getTitle()
};
GlobalConfigXFormView.prototype.getTabToolTip=function(){return this.getTitle()
};
GlobalConfigXFormView.blockedExtSelectionListener=function(){var b=this.widget.getSelection();
if(b&&b.length){b.sort();
b=AjxUtil.htmlDecode(b);
this.getModel().setInstanceValue(this.getInstance(),ZaGlobalConfig.A2_blocked_extension_selection,b)
}else{this.getModel().setInstanceValue(this.getInstance(),ZaGlobalConfig.A2_blocked_extension_selection,null)
}};
GlobalConfigXFormView.commonExtSelectionListener=function(){var b=this.widget.getSelection();
if(b&&b.length){b.sort();
this.getModel().setInstanceValue(this.getInstance(),ZaGlobalConfig.A2_common_extension_selection,b)
}else{this.getModel().setInstanceValue(this.getInstance(),ZaGlobalConfig.A2_common_extension_selection,null)
}};
GlobalConfigXFormView.shouldEnableRemoveAllButton=function(){return(!AjxUtil.isEmpty(this.getInstanceValue(ZaGlobalConfig.A_zimbraMtaBlockedExtension)))
};
GlobalConfigXFormView.shouldEnableRemoveButton=function(){return(!AjxUtil.isEmpty(this.getInstanceValue(ZaGlobalConfig.A2_blocked_extension_selection)))
};
GlobalConfigXFormView.shouldEnableAddButton=function(){return(!AjxUtil.isEmpty(this.getInstanceValue(ZaGlobalConfig.A2_common_extension_selection)))
};
GlobalConfigXFormView.shouldEnableAddAllButton=function(){return(!AjxUtil.isEmpty(this.getInstanceValue(ZaGlobalConfig.A_zimbraMtaCommonBlockedExtension)))
};
GlobalConfigXFormView.removeExt=function(){var b=this.getInstanceValue(ZaGlobalConfig.A_zimbraMtaBlockedExtension);
var c=this.getInstanceValue(ZaGlobalConfig.A2_blocked_extension_selection);
var d=AjxUtil.arraySubtract(b,c);
this.setInstanceValue(d,ZaGlobalConfig.A_zimbraMtaBlockedExtension);
this.getForm().parent.setDirty(true)
};
GlobalConfigXFormView.removeAllExt=function(){this.setInstanceValue([],ZaGlobalConfig.A_zimbraMtaBlockedExtension);
this.setInstanceValue([],ZaGlobalConfig.A2_blocked_extension_selection);
this.getForm().parent.setDirty(true)
};
GlobalConfigXFormView.addCommonExt=function(){var c=this.getInstanceValue(ZaGlobalConfig.A_zimbraMtaBlockedExtension);
var b=this.getInstanceValue(ZaGlobalConfig.A2_common_extension_selection);
c=AjxUtil.isEmpty(c)?[]:c;
b=AjxUtil.isEmpty(b)?[]:b;
this.setInstanceValue(AjxUtil.mergeArrays(c,b),ZaGlobalConfig.A_zimbraMtaBlockedExtension);
this.getForm().parent.setDirty(true)
};
GlobalConfigXFormView.addAllCommonExt=function(){var c=this.getInstanceValue(ZaGlobalConfig.A_zimbraMtaBlockedExtension);
var b=this.getInstanceValue(ZaGlobalConfig.A_zimbraMtaCommonBlockedExtension);
c=AjxUtil.isEmpty(c)?[]:c;
b=AjxUtil.isEmpty(b)?[]:b;
this.setInstanceValue(AjxUtil.mergeArrays(c,b),ZaGlobalConfig.A_zimbraMtaBlockedExtension);
this.getForm().parent.setDirty(true)
};
GlobalConfigXFormView.addNewExt=function(){var b=this.getInstanceValue(ZaGlobalConfig.A_zimbraNewExtension);
if(AjxUtil.isEmpty(b)){return
}var d=this.getInstanceValue(ZaGlobalConfig.A_zimbraMtaBlockedExtension);
d=AjxUtil.isEmpty(d)?[]:d;
var c=b.split(/[\s,;]+/);
if(AjxUtil.isEmpty(c)){return
}this.setInstanceValue(AjxUtil.mergeArrays(d,c),ZaGlobalConfig.A_zimbraMtaBlockedExtension);
this.setInstanceValue(null,ZaGlobalConfig.A_zimbraNewExtension);
this.getForm().parent.setDirty(true)
};
GlobalConfigXFormView.retentionSelectionListener=function(b){this.getForm().setInstanceValue(this.getSelection(),ZaGlobalConfig.A2_retentionPoliciesKeep_Selection)
};
GlobalConfigXFormView.purgeSelectionListener=function(){this.getForm().setInstanceValue(this.getSelection(),ZaGlobalConfig.A2_retentionPoliciesPurge_Selection)
};
GlobalConfigXFormView.deleteButtonListener=function(b){var c=this.getForm().getInstanceValue(ZaGlobalConfig.A2_retentionPoliciesKeep_Selection);
if(b){c=this.getForm().getInstanceValue(ZaGlobalConfig.A2_retentionPoliciesPurge_Selection)
}if(!c){return
}if(!ZaApp.getInstance().dialogs.deleteGlobalRetionPolicyConfirmMessageDialog){ZaApp.getInstance().dialogs.deleteGlobalRetionPolicyConfirmMessageDialog=new ZaMsgDialog(ZaApp.getInstance().getAppCtxt().getShell(),null,[DwtDialog.YES_BUTTON,DwtDialog.NO_BUTTON],null,ZaId.CTR_PREFIX+"DELETE_RETENTION_POLICY_ConfirmMessage")
}ZaApp.getInstance().dialogs.deleteGlobalRetionPolicyConfirmMessageDialog.setMessage(ZaMsg.Q_Delete_RetentionPolicy_Confirm,DwtMessageDialog.WARNING_STYLE);
ZaApp.getInstance().dialogs.deleteGlobalRetionPolicyConfirmMessageDialog.registerCallback(DwtDialog.YES_BUTTON,GlobalConfigXFormView.deleteRetentionPolicies,this,[b]);
ZaApp.getInstance().dialogs.deleteGlobalRetionPolicyConfirmMessageDialog.popup()
};
GlobalConfigXFormView.deleteRetentionPolicies=function(c){if(ZaApp.getInstance().dialogs.deleteGlobalRetionPolicyConfirmMessageDialog){ZaApp.getInstance().dialogs.deleteGlobalRetionPolicyConfirmMessageDialog.popdown()
}var e=this.getForm().getInstanceValue(ZaGlobalConfig.A2_retentionPoliciesKeep_Selection);
var d=this.getForm().getInstanceValue(ZaGlobalConfig.A2_retentionPoliciesKeep);
if(c){e=this.getForm().getInstanceValue(ZaGlobalConfig.A2_retentionPoliciesPurge_Selection);
d=this.getForm().getInstanceValue(ZaGlobalConfig.A2_retentionPoliciesPurge)
}if(!e){return
}for(var b=0;
b<e.length;
b++){e[b].deletePolicy();
AjxUtil.arrayRemove(d,e[b])
}if(c){this.getForm().setInstanceValue([],ZaGlobalConfig.A2_retentionPoliciesPurge);
this.getForm().setInstanceValue(d,ZaGlobalConfig.A2_retentionPoliciesPurge);
this.getForm().setInstanceValue([],ZaGlobalConfig.A2_retentionPoliciesPurge_Selection)
}else{this.getForm().setInstanceValue([],ZaGlobalConfig.A2_retentionPoliciesKeep);
this.getForm().setInstanceValue(d,ZaGlobalConfig.A2_retentionPoliciesKeep);
this.getForm().setInstanceValue([],ZaGlobalConfig.A2_retentionPoliciesKeep_Selection)
}};
GlobalConfigXFormView.addButtonListener=function(b){var c;
if(b){c=new ZaRetentionPolicy(null,null,null,ZaRetentionPolicy.TYPE_PURGE)
}else{c=new ZaRetentionPolicy()
}if(!ZaApp.getInstance().dialogs.newGlobalRetentionPolicyDialog){ZaApp.getInstance().dialogs.newGlobalRetentionPolicyDialog=new ZaRetentionPolicyDlg(ZaApp.getInstance().getAppCtxt().getShell(),"500px","100px",ZaMsg.TTL_Policy_Add);
ZaApp.getInstance().dialogs.newGlobalRetentionPolicyDialog.registerCallback(DwtDialog.OK_BUTTON,GlobalConfigXFormView.createRetentionPolicy,this,ZaApp.getInstance().dialogs.newGlobalRetentionPolicyDialog._localXForm)
}ZaApp.getInstance().dialogs.newGlobalRetentionPolicyDialog.setObject(c);
ZaApp.getInstance().dialogs.newGlobalRetentionPolicyDialog.popup()
};
GlobalConfigXFormView.createRetentionPolicy=function(c){if(ZaApp.getInstance().dialogs.newGlobalRetentionPolicyDialog){var d=c.getInstance();
var b;
if(d[ZaRetentionPolicy.A2_type]==ZaRetentionPolicy.TYPE_KEEP){b=this.getForm().getInstanceValue(ZaGlobalConfig.A2_retentionPoliciesKeep)
}else{b=this.getForm().getInstanceValue(ZaGlobalConfig.A2_retentionPoliciesPurge)
}if(!b){b=[]
}if(!ZaRetentionPolicy.checkValues(d,b)){return false
}ZaApp.getInstance().dialogs.newGlobalRetentionPolicyDialog.popdown();
d.createPolicy();
b.push(d);
if(d[ZaRetentionPolicy.A2_type]==ZaRetentionPolicy.TYPE_KEEP){this.getForm().setInstanceValue([],ZaGlobalConfig.A2_retentionPoliciesKeep);
this.getForm().setInstanceValue(b,ZaGlobalConfig.A2_retentionPoliciesKeep);
this.getForm().setInstanceValue([],ZaGlobalConfig.A2_retentionPoliciesKeep_Selection)
}else{this.getForm().setInstanceValue([],ZaGlobalConfig.A2_retentionPoliciesPurge);
this.getForm().setInstanceValue(b,ZaGlobalConfig.A2_retentionPoliciesPurge);
this.getForm().setInstanceValue([],ZaGlobalConfig.A2_retentionPoliciesPurge_Selection)
}}};
GlobalConfigXFormView.editButtonListener=function(b){var c;
if(b){c=this.getForm().getInstanceValue(ZaGlobalConfig.A2_retentionPoliciesPurge_Selection)[0]
}else{c=this.getForm().getInstanceValue(ZaGlobalConfig.A2_retentionPoliciesKeep_Selection)[0]
}if(!ZaApp.getInstance().dialogs.editGlobalRetentionPolicyDialog){ZaApp.getInstance().dialogs.editGlobalRetentionPolicyDialog=new ZaRetentionPolicyDlg(ZaApp.getInstance().getAppCtxt().getShell(),"500px","100px",ZaMsg.TTL_Policy_Edit);
ZaApp.getInstance().dialogs.editGlobalRetentionPolicyDialog.registerCallback(DwtDialog.OK_BUTTON,GlobalConfigXFormView.updateRetentionPolicy,this,ZaApp.getInstance().dialogs.editGlobalRetentionPolicyDialog._localXForm)
}ZaApp.getInstance().dialogs.editGlobalRetentionPolicyDialog.setObject(c);
ZaApp.getInstance().dialogs.editGlobalRetentionPolicyDialog.popup()
};
GlobalConfigXFormView.updateRetentionPolicy=function(d){if(ZaApp.getInstance().dialogs.editGlobalRetentionPolicyDialog){var e=d.getInstance();
var c;
if(e[ZaRetentionPolicy.A2_type]==ZaRetentionPolicy.TYPE_KEEP){c=this.getForm().getInstanceValue(ZaGlobalConfig.A2_retentionPoliciesKeep)
}else{c=this.getForm().getInstanceValue(ZaGlobalConfig.A2_retentionPoliciesPurge)
}if(!c){c=[]
}if(!ZaRetentionPolicy.checkValues(e,c)){return false
}ZaApp.getInstance().dialogs.editGlobalRetentionPolicyDialog.popdown();
e.modifyPolicy();
var b=AjxUtil.indexOf(c,e);
AjxUtil.arrayRemove(c,e);
AjxUtil.arrayAdd(c,e,b);
if(e[ZaRetentionPolicy.A2_type]==ZaRetentionPolicy.TYPE_KEEP){this.getForm().setInstanceValue([],ZaGlobalConfig.A2_retentionPoliciesKeep);
this.getForm().setInstanceValue(c,ZaGlobalConfig.A2_retentionPoliciesKeep);
this.getForm().setInstanceValue([],ZaGlobalConfig.A2_retentionPoliciesKeep_Selection)
}else{this.getForm().setInstanceValue([],ZaGlobalConfig.A2_retentionPoliciesPurge);
this.getForm().setInstanceValue(c,ZaGlobalConfig.A2_retentionPoliciesPurge);
this.getForm().setInstanceValue([],ZaGlobalConfig.A2_retentionPoliciesPurge_Selection)
}}};
GlobalConfigXFormView.GENERAL_TAB_ATTRS=[ZaGlobalConfig.A_zimbraMailPurgeSleepInterval,ZaGlobalConfig.A_zimbraFileUploadMaxSize,ZaGlobalConfig.A_zimbraGalMaxResults,ZaGlobalConfig.A_zimbraDefaultDomainName,ZaGlobalConfig.A_zimbraScheduledTaskNumThreads];
GlobalConfigXFormView.GENERAL_TAB_RIGHTS=[];
GlobalConfigXFormView.ATTACHMENTS_TAB_ATTRS=[ZaGlobalConfig.A_zimbraMtaBlockedExtensionWarnRecipient,ZaGlobalConfig.A_zimbraMtaBlockedExtension,ZaGlobalConfig.A_zimbraMtaCommonBlockedExtension];
GlobalConfigXFormView.ATTACHMENTS_TAB_RIGHTS=[];
GlobalConfigXFormView.MTA_TAB_ATTRS=[ZaGlobalConfig.A_zimbraMtaSaslAuthEnable,ZaGlobalConfig.A_zimbraMtaTlsAuthOnly,ZaGlobalConfig.A_zimbraSmtpHostname,ZaGlobalConfig.A_zimbraSmtpPort,ZaGlobalConfig.A_zimbraMtaRelayHost,ZaGlobalConfig.A_zimbraMtaFallbackRelayHost,ZaGlobalConfig.A_zimbraMtaMyNetworks,ZaGlobalConfig.A_zimbraMtaSmtpDnsSupportLevel,ZaGlobalConfig.A_zimbraMilterServerEnabled,ZaGlobalConfig.A_zimbraMilterBindPort];
GlobalConfigXFormView.MTA_TAB_RIGHTS=[];
GlobalConfigXFormView.IMAP_TAB_ATTRS=[ZaGlobalConfig.A_zimbraImapServerEnabled,ZaGlobalConfig.A_zimbraImapSSLServerEnabled,ZaGlobalConfig.A_zimbraImapCleartextLoginEnabled,ZaGlobalConfig.A_zimbraImapNumThreads];
GlobalConfigXFormView.IMAP_TAB_RIGHTS=[];
GlobalConfigXFormView.POP_TAB_ATTRS=[ZaGlobalConfig.A_zimbraPop3ServerEnabled,ZaGlobalConfig.A_zimbraPop3SSLServerEnabled,ZaGlobalConfig.A_zimbraPop3CleartextLoginEnabled,ZaGlobalConfig.A_zimbraPop3NumThreads];
GlobalConfigXFormView.POP_TAB_RIGHTS=[];
GlobalConfigXFormView.ASAV_TAB_ATTRS=[ZaGlobalConfig.A_zimbraSpamKillPercent,ZaGlobalConfig.A_zimbraSpamTagPercent,ZaGlobalConfig.A_zimbraSpamSubjectTag,ZaGlobalConfig.A_zimbraVirusDefinitionsUpdateFrequency,ZaGlobalConfig.A_zimbraVirusBlockEncryptedArchive,ZaGlobalConfig.A_zimbraVirusWarnRecipient];
GlobalConfigXFormView.ASAV_TAB_RIGHTS=[];
GlobalConfigXFormView.INTEROP_TAB_ATTRS=[ZaGlobalConfig.A_zimbraFreebusyExchangeURL,ZaGlobalConfig.A_zimbraFreebusyExchangeAuthScheme,ZaGlobalConfig.A_zimbraFreebusyExchangeServerType,ZaGlobalConfig.A_zimbraFreebusyExchangeAuthUsername,ZaGlobalConfig.A_zimbraFreebusyExchangeAuthPassword,ZaGlobalConfig.A_zimbraFreebusyExchangeUserOrg];
GlobalConfigXFormView.INTEROP_TAB_RIGHTS=[ZaGlobalConfig.CHECK_EXCHANGE_AUTH_CONFIG_RIGHT];
GlobalConfigXFormView.AUTH_TAB_ATTRS=[ZaGlobalConfig.A_zimbraSpnegoAuthEnabled,ZaGlobalConfig.A_zimbraSpnegoAuthRealm,ZaGlobalConfig.A_zimbraSpnegoAuthErrorURL,ZaGlobalConfig.A_zimbraWebClientLoginURL,ZaGlobalConfig.A_zimbraWebClientLogoutURL,ZaGlobalConfig.A_zimbraWebClientLoginURLAllowedUA,ZaGlobalConfig.A_zimbraWebClientLogoutURLAllowedUA,ZaGlobalConfig.A_zimbraWebClientLoginURLAllowedIP,ZaGlobalConfig.A_zimbraWebClientLogoutURLAllowedIP,ZaGlobalConfig.A_zimbraForceClearCookies,ZaGlobalConfig.A_zimbraEphemeralBackendURL];
GlobalConfigXFormView.AUTH_TAB_RIGHTS=[];
GlobalConfigXFormView.SKIN_TAB_ATTRS=[ZaGlobalConfig.A_zimbraSkinForegroundColor,ZaGlobalConfig.A_zimbraSkinBackgroundColor,ZaGlobalConfig.A_zimbraSkinSecondaryColor,ZaGlobalConfig.A_zimbraSkinSelectionColor,ZaGlobalConfig.A_zimbraSkinLogoURL,ZaGlobalConfig.A_zimbraSkinLogoLoginBanner,ZaGlobalConfig.A_zimbraSkinLogoAppBanner];
GlobalConfigXFormView.SKIN_TAB_RIGHTS=[];
GlobalConfigXFormView.BC_TAB_ATTRS=[ZaGlobalConfig.A_zimbraBasicAuthRealm,ZaGlobalConfig.A_zimbraMailAddressValidationRegex];
GlobalConfigXFormView.BC_TAB_RIGHTS=[];
GlobalConfigXFormView.AUTO_PROV_TAB_ATTRS=[ZaGlobalConfig.A_zimbraAutoProvNotificationBody,ZaGlobalConfig.A_zimbraAutoProvNotificationSubject];
GlobalConfigXFormView.AUTO_PROV_TAB_RIGHTS=[];
GlobalConfigXFormView.RETENTION_POLICY_TAB_ATTRS=[];
GlobalConfigXFormView.RETENTION_POLICY_TAB_RIGHTS=[];
GlobalConfigXFormView.prototype.loadRetentionPolicies=function(){var b=ZaRetentionPolicy.getRetentionPolicies();
if(b){this.getForm().setInstanceValue(b[ZaRetentionPolicy.TYPE_KEEP],ZaGlobalConfig.A2_retentionPoliciesKeep);
this.getForm().setInstanceValue(b[ZaRetentionPolicy.TYPE_PURGE],ZaGlobalConfig.A2_retentionPoliciesPurge)
}};
GlobalConfigXFormView.prototype.setObject=function(f){ZaTabView.prototype.setObject.call(this,f);
if(ZaTabView.XFormSetObjectMethods.GlobalConfigXFormView){var b=ZaTabView.XFormSetObjectMethods.GlobalConfigXFormView;
var d=b.length;
var e=this._containedObject;
for(var c=0;
c<d;
c++){if(typeof(b[c])=="function"){e=b[c].call(this,e,f)
}}this._containedObject=e
}this._localXForm.setInstance(this._containedObject)
};
GlobalConfigXFormView.myXFormModifier=function(y,c){var u=new Array();
var d=1;
var z=0;
u[z++]=new ZaListHeaderItem(ZaRetentionPolicy.A2_name,ZaMsg.CLV_Policy_Name_col,null,"200px",d,ZaRetentionPolicy.A2_name,true,true);
u[z++]=new ZaListHeaderItem(ZaRetentionPolicy.A2_lifetime,ZaMsg.CLV_Policy_Retention_col,null,"auto",null,null,true,true);
var h=new Array();
z=0;
h[z++]=new ZaListHeaderItem(ZaRetentionPolicy.A2_name,ZaMsg.CLV_Policy_Name_col,null,"200px",d++,ZaRetentionPolicy.A2_name,true,true);
h[z++]=new ZaListHeaderItem(ZaRetentionPolicy.A2_lifetime,ZaMsg.CLV_Policy_Purge_col,null,"auto",null,null,true,true);
y.tableCssStyle="width:100%;overflow:auto;";
var G,F,D,C,B,A,x,w,v,q,o,m;
var b=[];
var E=[];
this.helpMap={};
if(ZaTabView.isTAB_ENABLED(c,GlobalConfigXFormView.GENERAL_TAB_ATTRS,GlobalConfigXFormView.GENERAL_TAB_RIGHTS)){G=++this.TAB_INDEX;
this.helpMap[G]=[location.pathname,ZaUtil.HELP_URL,"managing_global_settings/global_settings.htm","?locid=",AjxEnv.DEFAULT_LOCALE].join("");
var r={type:_ZATABCASE_,caseKey:G,colSizes:["auto"],numCols:1,paddingStyle:"padding-left:15px;",width:"98%",cellpadding:2,items:[{type:_ZA_TOP_GROUPER_,numCols:2,colSizes:["275px","auto"],label:ZaMsg.TABT_GeneralPage,items:[{ref:ZaGlobalConfig.A_zimbraGalMaxResults,type:_TEXTFIELD_,label:ZaMsg.LBL_zimbraGalMaxResults,msgName:ZaMsg.MSG_zimbraGalMaxResults,labelLocation:_LEFT_,cssClass:"admin_xform_number_input"},{ref:ZaGlobalConfig.A_zimbraDefaultDomainName,type:_DYNSELECT_,label:ZaMsg.NAD_DefaultDomainName,toolTipContent:ZaMsg.tt_StartTypingDomainName,dataFetcherMethod:ZaSearch.prototype.dynSelectSearchDomains,dataFetcherClass:ZaSearch,editable:true},{ref:ZaGlobalConfig.A_zimbraScheduledTaskNumThreads,type:_TEXTFIELD_,label:ZaMsg.NAD_zimbraScheduledTaskNumThreads,labelLocation:_LEFT_,cssClass:"admin_xform_number_input"},{ref:ZaGlobalConfig.A_zimbraMailPurgeSleepInterval,type:_LIFETIME_,label:ZaMsg.LBL_zimbraMailPurgeSleepInterval,width:"5em"},{ref:ZaGlobalConfig.A_zimbraFileUploadMaxSize,type:_TEXTFIELD_,label:ZaMsg.NAD_DOC_MaxUploadSize,labelLocation:_LEFT_,cssClass:"admin_xform_number_input"},{ref:ZaGlobalConfig.A_zimbraHelpAdminURL,type:_TEXTFIELD_,label:ZaMsg.Domain_zimbraHelpAdminURL,labelLocation:_LEFT_,width:200},{ref:ZaGlobalConfig.A_zimbraHelpDelegatedURL,type:_TEXTFIELD_,label:ZaMsg.Domain_zimbraHelpDelegatedURL,labelLocation:_LEFT_,width:200}]}]};
E.push(r);
b.push({value:G,label:ZaMsg.TABT_GeneralPage})
}if(ZaTabView.isTAB_ENABLED(c,GlobalConfigXFormView.ATTACHMENTS_TAB_ATTRS,GlobalConfigXFormView.ATTACHMENTS_TAB_RIGHTS)){F=++this.TAB_INDEX;
this.helpMap[F]=[location.pathname,ZaUtil.HELP_URL,"managing_global_settings/blocking_attachments_to_email.htm","?locid=",AjxEnv.DEFAULT_LOCALE].join("");
b.push({value:F,label:ZaMsg.NAD_Tab_Attachments});
var p={type:_ZATABCASE_,caseKey:F,id:"gs_form_attachment_tab",paddingStyle:"padding-left:15px;",width:"98%",cellpadding:2,numCols:2,colSizes:["40%","60%"],items:[{type:_GROUP_,id:"attachment_settings",width:"98%",numCols:2,colSpan:2,colSizes:[250,"*"],items:[{ref:ZaGlobalConfig.A_zimbraAttachmentsBlocked,type:_CHECKBOX_,label:ZaMsg.NAD_GlobalRemoveAllAttachments,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaGlobalConfig.A_zimbraMtaBlockedExtensionWarnRecipient,type:_CHECKBOX_,label:ZaMsg.LBL_zimbraMtaBlockedExtensionWarnRecipient,trueValue:"TRUE",falseValue:"FALSE"}]},{type:_GROUP_,width:"98%",numCols:1,items:[{type:_SPACER_,height:"10"},{type:_ZACENTER_GROUPER_,numCols:1,width:"100%",label:ZaMsg.NAD_GlobalBlockedExtensions,items:[{ref:ZaGlobalConfig.A_zimbraMtaBlockedExtension,type:_DWT_LIST_,getDisplayValue:AjxUtil.htmlEncode,height:"200",width:"98%",cssClass:"DLTarget",cssStyle:"margin-left: 5px; ",onSelection:GlobalConfigXFormView.blockedExtSelectionListener},{type:_SPACER_,height:"5"},{type:_GROUP_,width:"100%",numCols:4,colSizes:[125,10,125,"*"],items:[{type:_DWT_BUTTON_,label:ZaMsg.DLXV_ButtonRemoveAll,width:120,onActivate:"GlobalConfigXFormView.removeAllExt.call(this)",enableDisableChecks:[GlobalConfigXFormView.shouldEnableRemoveAllButton,[ZaItem.hasWritePermission,ZaGlobalConfig.A_zimbraMtaBlockedExtension]],enableDisableChangeEventSources:[ZaGlobalConfig.A_zimbraMtaBlockedExtension,ZaGlobalConfig.A_zimbraMtaBlockedExtension]},{type:_CELLSPACER_},{type:_DWT_BUTTON_,label:ZaMsg.DLXV_ButtonRemove,width:120,onActivate:"GlobalConfigXFormView.removeExt.call(this)",enableDisableChecks:[GlobalConfigXFormView.shouldEnableRemoveButton,[ZaItem.hasWritePermission,ZaGlobalConfig.A_zimbraMtaBlockedExtension]],enableDisableChangeEventSources:[ZaGlobalConfig.A2_blocked_extension_selection,ZaGlobalConfig.A_zimbraMtaBlockedExtension]},{type:_CELLSPACER_}]}]}]},{type:_GROUP_,width:"98%",numCols:1,items:[{type:_SPACER_,height:"10"},{type:_ZACENTER_GROUPER_,numCols:1,width:"100%",label:ZaMsg.NAD_GlobalCommonExtensions,items:[{ref:ZaGlobalConfig.A_zimbraMtaCommonBlockedExtension,type:_DWT_LIST_,height:"200",width:"98%",cssClass:"DLSource",onSelection:GlobalConfigXFormView.commonExtSelectionListener},{type:_SPACER_,height:"5"},{type:_GROUP_,width:"98%",numCols:7,colSizes:[95,10,70,10,90,60,70],items:[{type:_DWT_BUTTON_,label:ZaMsg.DLXV_ButtonAddSelected,width:95,onActivate:"GlobalConfigXFormView.addCommonExt.call(this)",enableDisableChecks:[GlobalConfigXFormView.shouldEnableAddButton,[ZaItem.hasWritePermission,ZaGlobalConfig.A_zimbraMtaBlockedExtension]],enableDisableChangeEventSources:[ZaGlobalConfig.A2_common_extension_selection,ZaGlobalConfig.A_zimbraMtaBlockedExtension]},{type:_CELLSPACER_},{type:_DWT_BUTTON_,label:ZaMsg.DLXV_ButtonAddAll,width:70,onActivate:"GlobalConfigXFormView.addAllCommonExt.call(this)",enableDisableChecks:[GlobalConfigXFormView.shouldEnableAddAllButton,[ZaItem.hasWritePermission,ZaGlobalConfig.A_zimbraMtaBlockedExtension]],enableDisableChangeEventSources:[ZaGlobalConfig.A_zimbraMtaCommonBlockedExtension,ZaGlobalConfig.A_zimbraMtaBlockedExtension]},{type:_CELLSPACER_},{type:_TEXTFIELD_,cssStyle:"width:60px;",ref:ZaGlobalConfig.A_zimbraNewExtension,label:ZaMsg.NAD_Attach_NewExtension,visibilityChecks:[],enableDisableChecks:[[ZaItem.hasWritePermission,ZaGlobalConfig.A_zimbraMtaBlockedExtension]],enableDisableChangeEventSources:[ZaGlobalConfig.A_zimbraMtaBlockedExtension]},{type:_DWT_BUTTON_,label:ZaMsg.NAD_Attach_AddExtension,width:70,onActivate:"GlobalConfigXFormView.addNewExt.call(this)",enableDisableChecks:[[XForm.checkInstanceValueNotEmty,ZaGlobalConfig.A_zimbraNewExtension],[ZaItem.hasWritePermission,ZaGlobalConfig.A_zimbraMtaBlockedExtension]],enableDisableChangeEventSources:[ZaGlobalConfig.A_zimbraNewExtension,ZaGlobalConfig.A_zimbraMtaBlockedExtension]}]}]}]}]};
E.push(p)
}if(ZaTabView.isTAB_ENABLED(c,GlobalConfigXFormView.MTA_TAB_ATTRS,GlobalConfigXFormView.MTA_TAB_RIGHTS)){D=++this.TAB_INDEX;
this.helpMap[D]=[location.pathname,ZaUtil.HELP_URL,"managing_global_settings/mta_smtp_restrictions.htm","?locid=",AjxEnv.DEFAULT_LOCALE].join("");
b.push({value:D,label:ZaMsg.NAD_Tab_MTA});
var n={type:_ZATABCASE_,caseKey:D,paddingStyle:"padding-left:15px;",width:"98%",cellpadding:2,colSizes:["auto"],numCols:1,id:"global_mta_tab",items:[{type:_ZA_TOP_GROUPER_,label:ZaMsg.Global_MTA_AuthenticationGrp,visibilityChecks:[[ZATopGrouper_XFormItem.isGroupVisible,[ZaGlobalConfig.A_zimbraMtaSaslAuthEnable,ZaGlobalConfig.A_zimbraMtaTlsAuthOnly]]],visibilityChangeEventSources:[ZaGlobalConfig.A_zimbraMtaSaslAuthEnable,ZaGlobalConfig.A_zimbraMtaTlsAuthOnly],items:[{ref:ZaGlobalConfig.A_zimbraMtaSaslAuthEnable,type:_CHECKBOX_,label:ZaMsg.NAD_MTA_Authentication,trueValue:"yes",falseValue:"no"},{ref:ZaGlobalConfig.A_zimbraMtaTlsAuthOnly,type:_CHECKBOX_,enableDisableChangeEventSources:[ZaGlobalConfig.A_zimbraMtaSaslAuthEnable,ZaGlobalConfig.A_zimbraMtaTlsAuthOnly],enableDisableChecks:[[ZaItem.hasWritePermission,ZaGlobalConfig.A_zimbraMtaTlsAuthOnly],[XForm.checkInstanceValue,ZaGlobalConfig.A_zimbraMtaSaslAuthEnable,"yes"]],label:ZaMsg.NAD_MTA_TlsAuthenticationOnly,trueValue:"TRUE",falseValue:"FALSE"}]},{type:_ZA_TOP_GROUPER_,label:ZaMsg.Global_MTA_NetworkGrp,id:"mta_network_group",visibilityChecks:[[ZATopGrouper_XFormItem.isGroupVisible,[ZaGlobalConfig.A_zimbraSmtpHostname,ZaGlobalConfig.A_zimbraSmtpPort,ZaGlobalConfig.A_zimbraMtaRelayHost,ZaGlobalConfig.A_zimbraMtaFallbackRelayHost,ZaGlobalConfig.A_zimbraDNSCheckHostname,ZaGlobalConfig.A_zimbraMtaMyNetworks,ZaGlobalConfig.A_zimbraMtaSmtpDnsSupportLevel]]],visibilityChangeEventSources:[ZaGlobalConfig.A_zimbraSmtpHostname,ZaGlobalConfig.A_zimbraSmtpPort,ZaGlobalConfig.A_zimbraMtaRelayHost,ZaGlobalConfig.A_zimbraMtaFallbackRelayHost,ZaGlobalConfig.A_zimbraDNSCheckHostname,ZaGlobalConfig.A_zimbraMtaMyNetworks,ZaGlobalConfig.A_zimbraMtaSmtpDnsSupportLevel],items:[{ref:ZaGlobalConfig.A_zimbraSmtpHostname,type:_REPEAT_,label:ZaMsg.LBL_zimbraSmtpHostname,labelLocation:_LEFT_,align:_LEFT_,repeatInstance:"",showAddButton:true,showRemoveButton:true,showAddOnNextRow:true,addButtonLabel:ZaMsg.Add_zimbraSmtpHostname,removeButtonLabel:ZaMsg.Remove_zimbraSmtpHostname,removeButtonCSSStyle:"margin-left: 50px",visibilityChecks:[ZaItem.hasReadPermission],items:[{ref:".",type:_TEXTFIELD_,label:null,labelLocation:_NONE_,toolTipContent:ZaMsg.tt_zimbraSmtpHostname,visibilityChecks:[ZaItem.hasReadPermission]}]},{ref:ZaGlobalConfig.A_zimbraSmtpPort,type:_OUTPUT_,label:ZaMsg.NAD_MTA_WebMailPort,visibilityChecks:[ZaItem.hasReadPermission]},{ref:ZaGlobalConfig.A_zimbraMtaRelayHost,label:ZaMsg.NAD_MTA_RelayMTA,labelLocation:_LEFT_,type:_HOSTPORT_,onClick:"ZaController.showTooltip",toolTipContent:ZaMsg.tt_MTA_RelayMTA,visibilityChecks:[ZaItem.hasReadPermission],onMouseout:"ZaController.hideTooltip"},{ref:ZaGlobalConfig.A_zimbraMtaFallbackRelayHost,label:ZaMsg.NAD_MTA_FallbackRelay,labelLocation:_LEFT_,type:_HOSTPORT_,onClick:"ZaController.showTooltip",toolTipContent:ZaMsg.tt_MTA_FallbackRelay,visibilityChecks:[ZaItem.hasReadPermission],onMouseout:"ZaController.hideTooltip"},{type:_DWT_ALERT_,containerCssStyle:"padding-bottom:0px",style:DwtAlert.INFO,iconVisible:true,content:ZaMsg.Domain_InboundSMTPNote,colSpan:"*"},{ref:ZaGlobalConfig.A_zimbraDNSCheckHostname,type:_TEXTFIELD_,label:ZaMsg.Domain_zimbraDNSCheckHostname,toolTipContent:ZaMsg.Domain_zimbraDNSCheckHostname},{ref:ZaGlobalConfig.A_zimbraMtaMyNetworks,type:_TEXTAREA_,label:ZaMsg.NAD_MTA_MyNetworks,msgName:ZaMsg.NAD_MTA_MyNetworks,width:250},{ref:ZaGlobalConfig.A_zimbraMtaSmtpDnsSupportLevel,type:_OSELECT1_,label:ZaMsg.NAD_MTA_SMTP_Dns,choices:ZaSettings.getSmtpDnsSupportLevel}]},{type:_ZA_TOP_GROUPER_,label:ZaMsg.Global_MTA_MilterServer,visibilityChecks:[[ZATopGrouper_XFormItem.isGroupVisible,[ZaGlobalConfig.A_zimbraMilterBindPort,ZaGlobalConfig.A_zimbraMilterServerEnabled]]],visibilityChangeEventSources:[ZaGlobalConfig.A_zimbraMilterBindPort,ZaGlobalConfig.A_zimbraMilterServerEnabled],items:[{ref:ZaGlobalConfig.A_zimbraMilterBindPort,type:_OUTPUT_,label:ZaMsg.NAD_MTA_MilterBindPort},{ref:ZaGlobalConfig.A_zimbraMilterServerEnabled,type:_CHECKBOX_,label:ZaMsg.NAD_MTA_MilterServerEnabled,trueValue:"TRUE",falseValue:"FALSE"}]},{type:_ZA_TOP_GROUPER_,label:ZaMsg.Global_MTA_Messages,visibilityChecks:[[ZATopGrouper_XFormItem.isGroupVisible,[ZaGlobalConfig.A_zimbraMtaMaxMessageSize,ZaGlobalConfig.A_zimbraSmtpSendAddOriginatingIP]]],visibilityChangeEventSources:[ZaGlobalConfig.A_zimbraMtaMaxMessageSize,ZaGlobalConfig.A_zimbraSmtpSendAddOriginatingIP],items:[{ref:ZaGlobalConfig.A_zimbraMtaMaxMessageSize,type:_TEXTFIELD_,label:ZaMsg.NAD_MTA_MaxMsgSize,width:"6em"},{ref:ZaGlobalConfig.A_zimbraSmtpSendAddOriginatingIP,type:_CHECKBOX_,label:ZaMsg.NAD_add_x_orginate_IP,trueValue:"TRUE",falseValue:"FALSE"}]},{type:_ZA_TOP_GROUPER_,label:ZaMsg.NAD_MTA_PolicyServiceChecks,visibilityChecks:[[ZATopGrouper_XFormItem.isGroupVisible,[ZaGlobalConfig.A_zimbraMtaPolicyService]]],items:[{ref:ZaGlobalConfig.A_zimbraMtaPolicyService,type:_REPEAT_,label:ZaMsg.NAD_MTA_policy_service,labelLocation:_LEFT_,align:_LEFT_,repeatInstance:"",showAddButton:true,showRemoveButton:true,showAddOnNextRow:true,addButtonLabel:ZaMsg.NAD_Add,removeButtonLabel:ZaMsg.NAD_Remove,items:[{ref:".",type:_TEXTFIELD_,label:null,visibilityChecks:[],enableDisableChecks:[]}]}]},{type:_ZA_TOP_GROUPER_,label:ZaMsg.NAD_MTA_ProtocolChecks,visibilityChecks:[[ZATopGrouper_XFormItem.isGroupVisible,[ZaGlobalConfig.A_zimbraMtaRejectInvalidHeloHostname,ZaGlobalConfig.A_zimbraMtaRejectNonFqdnHeloHostname,ZaGlobalConfig.A_zimbraMtaRejectNonFqdnSender]]],visibilityChangeEventSources:[ZaGlobalConfig.A_zimbraMtaRejectUnknownClientHostname,ZaGlobalConfig.A_zimbraMtaRejectUnknownReverseClientHostname,ZaGlobalConfig.A_zimbraMtaRejectUnknownSenderDomain,ZaGlobalConfig.A_zimbraMtaRejectUnknownHeloHostname],items:[{ref:ZaGlobalConfig.A_zimbraMtaRejectInvalidHeloHostname,type:_CHECKBOX_,label:ZaMsg.NAD_MTA_reject_invalid_helo_hostname},{ref:ZaGlobalConfig.A_zimbraMtaRejectNonFqdnHeloHostname,type:_CHECKBOX_,label:ZaMsg.NAD_MTA_reject_non_fqdn_helo_hostname},{ref:ZaGlobalConfig.A_zimbraMtaRejectNonFqdnSender,type:_CHECKBOX_,label:ZaMsg.NAD_MTA_reject_non_fqdn_sender}]},{type:_ZA_TOP_GROUPER_,label:ZaMsg.NAD_MTA_DnsChecks,visibilityChecks:[[ZATopGrouper_XFormItem.isGroupVisible,[ZaGlobalConfig.A_zimbraMtaRejectUnknownClientHostname,ZaGlobalConfig.A_zimbraMtaRejectUnknownReverseClientHostname,ZaGlobalConfig.A_zimbraMtaRejectUnknownSenderDomain,ZaGlobalConfig.A_zimbraMtaRejectUnknownHeloHostname]]],visibilityChangeEventSources:[ZaGlobalConfig.A_zimbraMtaRejectUnknownClientHostname,ZaGlobalConfig.A_zimbraMtaRejectUnknownReverseClientHostname,ZaGlobalConfig.A_zimbraMtaRejectUnknownSenderDomain,ZaGlobalConfig.A_zimbraMtaRejectUnknownHeloHostname],items:[{ref:ZaGlobalConfig.A_zimbraMtaRejectUnknownClientHostname,type:_CHECKBOX_,label:ZaMsg.NAD_MTA_reject_unknown_client_hostname},{ref:ZaGlobalConfig.A_zimbraMtaRejectUnknownReverseClientHostname,type:_CHECKBOX_,label:ZaMsg.NAD_MTA_reject_unknown_reverse_client_hostname},{ref:ZaGlobalConfig.A_zimbraMtaRejectUnknownSenderDomain,type:_CHECKBOX_,label:ZaMsg.NAD_MTA_reject_unknown_sender_domain},{ref:ZaGlobalConfig.A_zimbraMtaRejectUnknownHeloHostname,type:_CHECKBOX_,label:ZaMsg.NAD_MTA_reject_unknown_helo_hostname},{ref:ZaGlobalConfig.A_zimbraMtaRejectRblClient,type:_REPEAT_,label:ZaMsg.NAD_MTA_reject_rbl_client,labelLocation:_LEFT_,align:_LEFT_,repeatInstance:"",showAddButton:true,showRemoveButton:true,showAddOnNextRow:true,addButtonLabel:ZaMsg.NAD_Add,removeButtonLabel:ZaMsg.NAD_Remove,items:[{ref:".",type:_TEXTFIELD_,label:null}]},{ref:ZaGlobalConfig.A_zimbraMtaRejectRHSblClient,type:_REPEAT_,label:ZaMsg.NAD_MTA_reject_rhsbl_client,labelLocation:_LEFT_,align:_LEFT_,repeatInstance:"",showAddButton:true,showRemoveButton:true,showAddOnNextRow:true,addButtonLabel:ZaMsg.NAD_Add,removeButtonLabel:ZaMsg.NAD_Remove,items:[{ref:".",type:_TEXTFIELD_,label:null}]},{ref:ZaGlobalConfig.A_zimbraMtaRejectRHSblReverseClient,type:_REPEAT_,label:ZaMsg.NAD_MTA_reject_rhsbl_reverse_client,labelLocation:_LEFT_,align:_LEFT_,repeatInstance:"",showAddButton:true,showRemoveButton:true,showAddOnNextRow:true,addButtonLabel:ZaMsg.NAD_Add,removeButtonLabel:ZaMsg.NAD_Remove,items:[{ref:".",type:_TEXTFIELD_,label:null}]},{ref:ZaGlobalConfig.A_zimbraMtaRejectRHSblSender,type:_REPEAT_,label:ZaMsg.NAD_MTA_reject_rhsbl_sender,labelLocation:_LEFT_,align:_LEFT_,repeatInstance:"",showAddButton:true,showRemoveButton:true,showAddOnNextRow:true,addButtonLabel:ZaMsg.NAD_Add,removeButtonLabel:ZaMsg.NAD_Remove,items:[{ref:".",type:_TEXTFIELD_,label:null}]}]},{type:_SPACER_,height:10}]};
E.push(n)
}if(ZaTabView.isTAB_ENABLED(c,GlobalConfigXFormView.IMAP_TAB_ATTRS,GlobalConfigXFormView.IMAP_TAB_RIGHTS)){C=++this.TAB_INDEX;
this.helpMap[C]=[location.pathname,ZaUtil.HELP_URL,"managing_global_settings/imap_and_pop_proxy_server.htm","?locid=",AjxEnv.DEFAULT_LOCALE].join("");
b.push({value:C,label:ZaMsg.NAD_Tab_IMAP});
var l={type:_ZATABCASE_,caseKey:C,paddingStyle:"padding-left:15px;",width:"98%",cellpadding:2,colSizes:["auto"],numCols:1,id:"global_imap_tab",items:[{type:_DWT_ALERT_,containerCssStyle:"padding-bottom:0px",style:DwtAlert.WARNING,iconVisible:true,content:ZaMsg.Alert_ServerRestart},{type:_ZA_TOP_GROUPER_,label:ZaMsg.Global_IMAP_ServiceGrp,items:[{ref:ZaGlobalConfig.A_zimbraImapServerEnabled,type:_CHECKBOX_,label:ZaMsg.IMAP_Service,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaGlobalConfig.A_zimbraImapSSLServerEnabled,type:_CHECKBOX_,label:ZaMsg.IMAP_SSLService,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaGlobalConfig.A_zimbraImapCleartextLoginEnabled,type:_CHECKBOX_,label:ZaMsg.IMAP_CleartextLoginEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaGlobalConfig.A_zimbraImapNumThreads,type:_TEXTFIELD_,label:ZaMsg.IMAP_NumThreads,width:"5em"}]}]};
E.push(l)
}if(ZaTabView.isTAB_ENABLED(c,GlobalConfigXFormView.POP_TAB_ATTRS,GlobalConfigXFormView.POP_TAB_RIGHTS)){B=++this.TAB_INDEX;
this.helpMap[B]=[location.pathname,ZaUtil.HELP_URL,"managing_global_settings/configuring_pop.htm","?locid=",AjxEnv.DEFAULT_LOCALE].join("");
b.push({value:B,label:ZaMsg.NAD_Tab_POP});
var k={type:_ZATABCASE_,caseKey:B,paddingStyle:"padding-left:15px;",width:"98%",cellpadding:2,colSizes:["auto"],numCols:1,id:"global_pop_tab",items:[{type:_DWT_ALERT_,containerCssStyle:"padding-bottom:0px",style:DwtAlert.WARNING,iconVisible:true,content:ZaMsg.Alert_ServerRestart},{type:_ZA_TOP_GROUPER_,label:ZaMsg.Global_POP_ServiceGrp,items:[{ref:ZaGlobalConfig.A_zimbraPop3ServerEnabled,type:_CHECKBOX_,label:ZaMsg.NAD_POP_Service,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaGlobalConfig.A_zimbraPop3SSLServerEnabled,type:_CHECKBOX_,label:ZaMsg.NAD_POP_SSL,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaGlobalConfig.A_zimbraPop3CleartextLoginEnabled,type:_CHECKBOX_,label:ZaMsg.NAD_POP_CleartextLoginEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaGlobalConfig.A_zimbraPop3NumThreads,type:_TEXTFIELD_,label:ZaMsg.NAD_POP_NumThreads,width:"5em"}]}]};
E.push(k)
}if(ZaTabView.isTAB_ENABLED(c,GlobalConfigXFormView.ASAV_TAB_ATTRS,GlobalConfigXFormView.ASAV_TAB_RIGHTS)){A=++this.TAB_INDEX;
this.helpMap[A]=[location.pathname,ZaUtil.HELP_URL,"managing_global_settings/anti-spam_protection.htm","?locid=",AjxEnv.DEFAULT_LOCALE].join("");
b.push({value:A,label:ZaMsg.NAD_Tab_ASAV});
var j={type:_ZATABCASE_,caseKey:A,paddingStyle:"padding-left:15px;",width:"98%",cellpadding:2,colSizes:["auto"],numCols:1,id:"global_asav_tab",items:[{type:_ZA_TOP_GROUPER_,label:ZaMsg.NAD_AS_Settings,items:[{type:_DWT_ALERT_,containerCssStyle:"padding-bottom:0px",style:DwtAlert.WARNING,iconVisible:true,content:ZaMsg.Alert_AmavisdRestart},{ref:ZaGlobalConfig.A_zimbraSpamKillPercent,type:_INPUT_,label:ZaMsg.NAD_Spam_KillPercent,width:"4em"},{ref:ZaGlobalConfig.A_zimbraSpamTagPercent,type:_INPUT_,label:ZaMsg.NAD_Spam_TagPercent,width:"4em"},{ref:ZaGlobalConfig.A_zimbraSpamSubjectTag,type:_INPUT_,label:ZaMsg.NAD_Spam_SubjectPrefix,width:"20em"}]},{type:_ZA_TOP_GROUPER_,label:ZaMsg.NAD_AV_Settings,items:[{ref:ZaGlobalConfig.A_zimbraVirusDefinitionsUpdateFrequency,type:_INPUT_,label:ZaMsg.NAD_Virus_DefUpdateFreq,width:"5em"},{ref:ZaGlobalConfig.A_zimbraVirusBlockEncryptedArchive,type:_CHECKBOX_,label:ZaMsg.NAD_Virus_BlockEncrypted,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaGlobalConfig.A_zimbraVirusWarnRecipient,type:_CHECKBOX_,label:ZaMsg.NAD_Virus_NotifyRecipient,trueValue:"TRUE",falseValue:"FALSE"}]}]};
E.push(j)
}if(ZaTabView.isTAB_ENABLED(c,GlobalConfigXFormView.INTEROP_TAB_ATTRS,GlobalConfigXFormView.INTEROP_TAB_RIGHTS)){x=++this.TAB_INDEX;
this.helpMap[x]=[location.pathname,ZaUtil.HELP_URL,"managing_global_settings/making_free_busy_view__available_.htm","?locid=",AjxEnv.DEFAULT_LOCALE].join("");
b.push({value:x,label:ZaMsg.TABT_Interop});
var g={type:_ZATABCASE_,caseKey:x,paddingStyle:"padding-left:15px;",width:"98%",cellpadding:2,colSizes:["auto"],numCols:1,id:"global_interop_tab",items:[{type:_ZA_TOP_GROUPER_,label:ZaMsg.NAD_Exchange_Settings,items:[{ref:ZaGlobalConfig.A_zimbraFreebusyExchangeURL,type:_TEXTFIELD_,label:ZaMsg.NAD_Exchange_URL,width:"30em"},{ref:ZaGlobalConfig.A_zimbraFreebusyExchangeAuthScheme,type:_OSELECT1_,label:ZaMsg.NAD_Exchange_Auth_Schema},{ref:ZaGlobalConfig.A_zimbraFreebusyExchangeServerType,type:_OSELECT1_,label:ZaMsg.NAD_Exchange_Server_Type},{ref:ZaGlobalConfig.A_zimbraFreebusyExchangeAuthUsername,type:_TEXTFIELD_,label:ZaMsg.NAD_Exchange_Auth_User,width:"20em"},{ref:ZaGlobalConfig.A_zimbraFreebusyExchangeAuthPassword,type:_PASSWORD_,label:ZaMsg.NAD_Exchange_Auth_Password,width:"20em"},{ref:ZaGlobalConfig.A_zimbraFreebusyExchangeUserOrg,type:_TEXTFIELD_,label:ZaMsg.LBL_zimbraFreebusyExchangeUserOrg,width:"20em"},{type:_GROUP_,colSpan:2,numCols:5,colSizes:["120px","10px","170px","20px","160px"],items:[{type:_CELLSPACER_},{type:_DWT_BUTTON_,colSpan:2,label:ZaMsg.Check_Settings,autoPadding:false,onActivate:ZaItem.checkInteropSettings,enableDisableChecks:[ZaZimbraAdmin.canChangeExchangeConfig]},{type:_CELLSPACER_},{type:_DWT_BUTTON_,colSpan:2,label:ZaMsg.Clear_Settings,autoPadding:false,onActivate:ZaItem.clearInteropSettings,enableDisableChecks:[ZaZimbraAdmin.canChangeExchangeConfig]},{type:_CELLSPACER_}]}]}]};
E.push(g)
}if(ZaTabView.isTAB_ENABLED(c,GlobalConfigXFormView.SKIN_TAB_ATTRS,GlobalConfigXFormView.SKIN_TAB_RIGHTS)){w=++this.TAB_INDEX;
this.helpMap[w]=[location.pathname,ZaUtil.HELP_URL,"cos/customizing_ui_themes.htm","?locid=",AjxEnv.DEFAULT_LOCALE].join("");
b.push({value:w,label:ZaMsg.TABT_Themes});
var f={type:_ZATABCASE_,caseKey:w,paddingStyle:"padding-left:15px;",width:"98%",cellpadding:2,colSizes:["auto"],numCols:1,id:"global_skin_tab",items:[{type:_ZA_TOP_GROUPER_,label:ZaMsg.NAD_Skin_Color_Settings,items:[{type:_DWT_ALERT_,style:DwtAlert.WARNING,iconVisible:true,content:ZaMsg.Alert_Flush_Theme_Cache,colSpan:2,visibilityChecks:[],ref:null},{ref:ZaGlobalConfig.A_zimbraSkinForegroundColor,type:_DWT_COLORPICKER_,label:ZaMsg.NAD_zimbraSkinForegroundColor,labelLocation:_LEFT_,buttonImage:"Color",width:"50px"},{ref:ZaGlobalConfig.A_zimbraSkinBackgroundColor,type:_DWT_COLORPICKER_,label:ZaMsg.NAD_zimbraSkinBackgroundColor,labelLocation:_LEFT_,buttonImage:"Color",width:"50px"},{ref:ZaGlobalConfig.A_zimbraSkinSecondaryColor,type:_DWT_COLORPICKER_,label:ZaMsg.NAD_zimbraSkinSecondaryColor,labelLocation:_LEFT_,buttonImage:"Color",width:"50px"},{ref:ZaGlobalConfig.A_zimbraSkinSelectionColor,type:_DWT_COLORPICKER_,label:ZaMsg.NAD_zimbraSkinSelectionColor,buttonImage:"Color",width:"50px",labelLocation:_LEFT_},{type:_GROUP_,colSpan:2,cssStyle:"margin-top: 10px; margin-left: 200px; width: 200px;",items:[{type:_DWT_BUTTON_,label:ZaMsg.bt_ResetAllSkinColor,onActivate:ZaDomainXFormView.resetAllColorThemes}]}]}]};
E.push(f)
}if(ZaTabView.isTAB_ENABLED(c,GlobalConfigXFormView.BC_TAB_ATTRS,GlobalConfigXFormView.BC_TAB_RIGHTS)){v=++this.TAB_INDEX;
this.helpMap[v]=[location.pathname,ZaUtil.HELP_URL,"managing_global_settings/account_email_validation.htm","?locid=",AjxEnv.DEFAULT_LOCALE].join("");
b.push({value:v,label:ZaMsg.Domain_Tab_Advanced});
var e={type:_ZATABCASE_,caseKey:v,paddingStyle:"padding-left:15px;",width:"98%",cellpadding:2,colSizes:["auto"],numCols:1,id:"global_ad_tab",items:[{type:_ZA_TOP_GROUPER_,label:ZaMsg.Domain_BC_ShareConf,items:[{ref:ZaGlobalConfig.A_zimbraBasicAuthRealm,type:_TEXTFIELD_,label:ZaMsg.Domain_zimbraBasicAuthRealm}]},{type:_ZA_TOP_GROUPER_,label:ZaMsg.Domain_AD_EmailValidate,visibilityChecks:[[ZaItem.hasReadPermission,ZaGlobalConfig.A_zimbraMailAddressValidationRegex]],visibilityChangeEventSources:[ZaGlobalConfig.A_zimbraMailAddressValidationRegex],items:[{ref:ZaGlobalConfig.A_zimbraMailAddressValidationRegex,type:_REPEAT_,nowrap:false,labelWrap:true,label:ZaMsg.LBL_EmailValidate,labelLocation:_LEFT_,align:_LEFT_,repeatInstance:"",showAddButton:true,showRemoveButton:true,showAddOnNextRow:true,addButtonLabel:ZaMsg.NAD_AddRegex,removeButtonLabel:ZaMsg.NAD_RemoveRegex,removeButtonCSSStyle:"margin-left: 50px",items:[{ref:".",type:_TEXTFIELD_,label:null}]}]}]};
E.push(e)
}if(ZaTabView.isTAB_ENABLED(c,GlobalConfigXFormView.AUTH_TAB_ATTRS,GlobalConfigXFormView.AUTH_TAB_RIGHTS)){q=++this.TAB_INDEX;
this.helpMap[q]=[location.pathname,ZaUtil.HELP_URL,"managing_global_settings/managing_single_sign_on_as_a_global_setting.htm","?locid=",AjxEnv.DEFAULT_LOCALE].join("");
b.push({value:q,label:ZaMsg.NAD_Tab_AUTH});
var t={type:_ZATABCASE_,caseKey:q,paddingStyle:"padding-left:15px;",width:"98%",cellpadding:2,colSizes:["auto"],numCols:1,id:"global_auth_tab",items:[{type:_ZA_TOP_GROUPER_,label:ZaMsg.NAD_WEBCLIENT_Configure,items:[{ref:ZaGlobalConfig.A_zimbraWebClientLoginURL,type:_TEXTFIELD_,width:"200px",label:ZaMsg.LBL_zimbraWebClientLoginURL},{ref:ZaGlobalConfig.A_zimbraWebClientLogoutURL,type:_TEXTFIELD_,width:"200px",label:ZaMsg.LBL_zimbraWebClientLogoutURL},{ref:ZaGlobalConfig.A_zimbraWebClientLoginURLAllowedUA,type:_REPEAT_,nowrap:false,labelWrap:true,label:ZaMsg.LBL_zimbraWebClientLoginURLAllowedUA,msgName:ZaMsg.MSG_zimbraWebClientLoginURLAllowedUA,labelLocation:_LEFT_,addButtonLabel:ZaMsg.NAD_Add,align:_LEFT_,showAddButton:true,showRemoveButton:true,showAddOnNextRow:true,removeButtonLabel:ZaMsg.NAD_Remove,items:[{ref:".",type:_TEXTFIELD_,label:null,width:"200px"}]},{ref:ZaGlobalConfig.A_zimbraWebClientLogoutURLAllowedUA,type:_REPEAT_,nowrap:false,labelWrap:true,label:ZaMsg.LBL_zimbraWebClientLogoutURLAllowedUA,msgName:ZaMsg.MSG_zimbraWebClientLogoutURLAllowedUA,labelLocation:_LEFT_,addButtonLabel:ZaMsg.NAD_Add,align:_LEFT_,showAddButton:true,showRemoveButton:true,showAddOnNextRow:true,removeButtonLabel:ZaMsg.NAD_Remove,items:[{ref:".",type:_TEXTFIELD_,label:null,width:"200px"}]},{ref:ZaGlobalConfig.A_zimbraWebClientLoginURLAllowedIP,type:_REPEAT_,nowrap:false,labelWrap:true,label:ZaMsg.LBL_zimbraWebClientLoginURLAllowedIP,msgName:ZaMsg.MSG_zimbraWebClientLoginURLAllowedIP,labelLocation:_LEFT_,addButtonLabel:ZaMsg.NAD_Add,align:_LEFT_,showAddButton:true,showRemoveButton:true,showAddOnNextRow:true,removeButtonLabel:ZaMsg.NAD_Remove,items:[{ref:".",type:_TEXTFIELD_,label:null,width:"200px"}]},{ref:ZaGlobalConfig.A_zimbraWebClientLogoutURLAllowedIP,type:_REPEAT_,nowrap:false,labelWrap:true,label:ZaMsg.LBL_zimbraWebClientLogoutURLAllowedIP,msgName:ZaMsg.MSG_zimbraWebClientLogoutURLAllowedIP,labelLocation:_LEFT_,addButtonLabel:ZaMsg.NAD_Add,align:_LEFT_,showAddButton:true,showRemoveButton:true,showAddOnNextRow:true,removeButtonLabel:ZaMsg.NAD_Remove,items:[{ref:".",type:_TEXTFIELD_,label:null,width:"200px"}]},{ref:ZaGlobalConfig.A_zimbraForceClearCookies,type:_CHECKBOX_,trueValue:"TRUE",falseValue:"FALSE",label:ZaMsg.LBL_zimbraForceClearCookies,msgName:ZaMsg.MSG_zimbraForceClearCookies,labelLocation:_LEFT_}]},{type:_ZA_TOP_GROUPER_,label:ZaMsg.NAD_Ephemeral_Setting,items:[{ref:ZaGlobalConfig.A_zimbraEphemeralBackendURL,type:_TEXTFIELD_,width:"200px",label:ZaMsg.LBL_zimbraEphemeralBackendURL}]}]};
E.push(t)
}if(ZaTabView.isTAB_ENABLED(c,GlobalConfigXFormView.RETENTION_POLICY_TAB_ATTRS,GlobalConfigXFormView.RETENTION_POLICY_TAB_RIGHTS)){o=++this.TAB_INDEX;
this.helpMap[o]=[location.pathname,ZaUtil.HELP_URL,"managing_global_settings/retention_policies.htm","?locid=",AjxEnv.DEFAULT_LOCALE].join("");
b.push({value:o,label:ZaMsg.TABT_RetentionPolicy});
var s={type:_SUPER_TABCASE_,caseKey:o,paddingStyle:"padding-left:15px;",width:"98%",cellpadding:2,colSizes:["100%"],numCols:1,id:"global_retentionpolicy_tab",loadDataMethods:[GlobalConfigXFormView.prototype.loadRetentionPolicies],items:[{type:_ZA_TOP_GROUPER_,id:"global_form_keep_p_group",numCols:1,width:"98%",colSizes:["auto"],label:ZaMsg.Glb_RetentionPolicies,cssStyle:"margin:10px;padding-bottom:0;",items:[{ref:ZaGlobalConfig.A2_retentionPoliciesKeep,type:_DWT_LIST_,height:"200",width:"99%",preserveSelection:false,multiselect:true,cssClass:"DLSource",headerList:u,widgetClass:ZaRetentionPolicyListView,onSelection:GlobalConfigXFormView.retentionSelectionListener,valueChangeEventSources:[ZaGlobalConfig.A2_retentionPoliciesKeep]},{type:_GROUP_,numCols:5,colSizes:["100px","auto","100px","auto","100px"],width:"350px",cssStyle:"margin:10px;padding-bottom:0;",items:[{type:_DWT_BUTTON_,label:ZaMsg.TBB_Delete,width:"100px",onActivate:"GlobalConfigXFormView.deleteButtonListener.call(this);",enableDisableChangeEventSources:[ZaGlobalConfig.A2_retentionPoliciesKeep_Selection],enableDisableChecks:[function(){var H=this.getForm().getInstanceValue(ZaGlobalConfig.A2_retentionPoliciesKeep_Selection);
return H&&H.length>0
}]},{type:_CELLSPACER_},{type:_DWT_BUTTON_,label:ZaMsg.TBB_Edit,width:"100px",onActivate:"GlobalConfigXFormView.editButtonListener.call(this);",enableDisableChangeEventSources:[ZaGlobalConfig.A2_retentionPoliciesKeep_Selection],enableDisableChecks:[function(){var H=this.getForm().getInstanceValue(ZaGlobalConfig.A2_retentionPoliciesKeep_Selection);
return H&&H.length==1
}]},{type:_CELLSPACER_},{type:_DWT_BUTTON_,label:ZaMsg.NAD_Add,width:"100px",onActivate:"GlobalConfigXFormView.addButtonListener.call(this);"}]}]},{type:_ZA_TOP_GROUPER_,id:"global_form_purge_p_group",width:"98%",numCols:1,colSizes:["auto"],label:ZaMsg.Glb_DisposalPolicies,cssStyle:"margin:10px;padding-bottom:0;",items:[{ref:ZaGlobalConfig.A2_retentionPoliciesPurge,type:_DWT_LIST_,height:"200",width:"99%",preserveSelection:false,multiselect:true,cssClass:"DLSource",headerList:h,widgetClass:ZaRetentionPolicyListView,onSelection:GlobalConfigXFormView.purgeSelectionListener,valueChangeEventSources:[ZaGlobalConfig.A2_retentionPoliciesPurge]},{type:_GROUP_,numCols:5,colSizes:["100px","auto","100px","auto","100px"],width:"350px",cssStyle:"margin:10px;padding-bottom:0;",items:[{type:_DWT_BUTTON_,label:ZaMsg.TBB_Delete,width:"100px",onActivate:"GlobalConfigXFormView.deleteButtonListener.call(this, 1);",enableDisableChangeEventSources:[ZaGlobalConfig.A2_retentionPoliciesPurge_Selection],enableDisableChecks:[function(){var H=this.getForm().getInstanceValue(ZaGlobalConfig.A2_retentionPoliciesPurge_Selection);
return H&&H.length>0
}]},{type:_CELLSPACER_},{type:_DWT_BUTTON_,label:ZaMsg.TBB_Edit,width:"100px",onActivate:"GlobalConfigXFormView.editButtonListener.call(this, 1);",enableDisableChangeEventSources:[ZaGlobalConfig.A2_retentionPoliciesPurge_Selection],enableDisableChecks:[function(){var H=this.getForm().getInstanceValue(ZaGlobalConfig.A2_retentionPoliciesPurge_Selection);
return H&&H.length==1
}]},{type:_CELLSPACER_},{type:_DWT_BUTTON_,label:ZaMsg.NAD_Add,width:"100px",onActivate:"GlobalConfigXFormView.addButtonListener.call(this,1);"}]}]}]};
E.push(s)
}this.tabChoices=b;
y.items=[{type:_DWT_ALERT_,cssClass:"DwtTabTable",containerCssStyle:"padding-bottom:0px",style:DwtAlert.INFO,iconVisible:false,content:ZaMsg.Alert_GlobalConfig,id:"xform_header"},{type:_TAB_BAR_,ref:ZaModel.currentTab,id:"xform_tabbar",height:"0px",containerCssStyle:"padding-top:0px; ",cssStyle:"display:none;",choices:b},{type:_SWITCH_,align:_LEFT_,valign:_TOP_,items:E}]
};
ZaTabView.XFormModifiers.GlobalConfigXFormView.push(GlobalConfigXFormView.myXFormModifier);
GlobalConfigXFormView.prototype.getTabChoices=function(){return this.tabChoices
}
}if(AjxPackage.define("zimbraAdmin.accounts.view.ZaAccMiniListView")){ZaAccMiniListView=function(g,f,e,c,b,h,d){if(arguments.length==0){return
}if(e==null){e=DwtControl.RELATIVE_STYLE
}ZaListView.call(this,g,f,e,c,b,h,d);
this.hideHeader=true
};
ZaAccMiniListView.prototype=new ZaListView;
ZaAccMiniListView.prototype.constructor=ZaAccMiniListView;
ZaAccMiniListView.prototype.toString=function(){return"ZaAccMiniListView"
};
ZaAccMiniListView.prototype.createHeaderHtml=function(b){if(!this.hideHeader){DwtListView.prototype.createHeaderHtml.call(this,b)
}};
ZaAccMiniListView.prototype._createItemHtml=function(h,c,e){var g=new Array(50);
var b=document.createElement("div");
b[DwtListView._STYLE_CLASS]="Row";
b[DwtListView._SELECTED_STYLE_CLASS]=b[DwtListView._STYLE_CLASS]+"-"+DwtCssStyle.SELECTED;
b.className=b[DwtListView._STYLE_CLASS];
this.associateItemWithElement(h,b,DwtListView.TYPE_LIST_ITEM);
var l=0;
g[l++]="<table width='100%' cellspacing='0' cellpadding='0'>";
g[l++]="<tr>";
if(typeof(h)=="string"){g[l++]="<td width=100%>";
g[l++]=AjxStringUtil.htmlEncode(h);
g[l++]="</td>"
}else{if(this._headerList){var d=this._headerList.length;
for(var f=0;
f<d;
f++){var k=this._headerList[f]._field;
var j=null;
if(k!=null){if(k=="type"){g[l++]="<td width="+this._headerList[f]._width+">";
switch(h.type){case ZaItem.ACCOUNT:if(h.attrs[ZaAccount.A_zimbraIsAdminAccount]=="TRUE"){j=("AdminUser")
}else{if(h.attrs[ZaAccount.A_zimbraIsDelegatedAdminAccount]=="TRUE"){j=("DomainAdminUser")
}else{if(h.attrs[ZaAccount.A_zimbraIsSystemAccount]=="TRUE"){j=("SpecialAccount")
}else{if(h.attrs[ZaAccount.A_zimbraIsSystemResource]=="TRUE"){j=("SystemResource")
}else{if(h.attrs[ZaAccount.A_zimbraIsExternalVirtualAccount]=="TRUE"){j=("AccountExternalVirtual")
}else{if(h.isExternal){j=("AccountIMAP")
}else{j=("Account")
}}}}}}break;
case ZaItem.DL:if(h.attrs[ZaDistributionList.A_isAdminGroup]=="TRUE"){j=("DistributionListGroup")
}else{j=("DistributionList")
}break;
case ZaItem.ALIAS:j=("AccountAlias");
break;
case ZaItem.DOMAIN:j=("Domain");
break;
case ZaItem.COS:j=("COS");
break;
case ZaItem.RESOURCE:if(h.attrs[ZaResource.A_zimbraCalResType]==ZaResource.RESOURCE_TYPE_LOCATION){j=("Location")
}else{j=("Resource")
}break;
default:g[l++]=AjxStringUtil.htmlEncode(h.type);
break
}if(j!=null){g[l++]=AjxImg.getImageHtml(j)
}g[l++]="</td>"
}else{if(k==ZaAccount.A_name){g[l++]="<td align='left' width="+this._headerList[f]._width+"><nobr>";
g[l++]=AjxStringUtil.htmlEncode(h.name);
g[l++]="</nobr></td>"
}else{if(k==ZaAccount.A_displayname){g[l++]="<td align='left' width="+this._headerList[f]._width+"><nobr>";
g[l++]=AjxStringUtil.htmlEncode(h.attrs[ZaAccount.A_displayname]);
g[l++]="</nobr></td>"
}}}}}}else{if(typeof(h)=="object"){g[l++]="<td width=100%>";
g[l++]=AjxStringUtil.htmlEncode(h.name);
g[l++]="</td>"
}else{g[l++]="<td width=100%>";
g[l++]=AjxStringUtil.htmlEncode(String(h));
g[l++]="</td>"
}}}g[l++]="</tr></table>";
b.innerHTML=g.join("");
return b
};
ZaAccMiniListView.prototype._setNoResultsHtml=function(){var b=new AjxBuffer();
var c=document.createElement("div");
b.append("<table width='100%' cellspacing='0' cellpadding='1'>","<tr><td class='NoResults'><br>&nbsp","</td></tr></table>");
c.innerHTML=b.toString();
this._addRow(c)
};
ZaAccMiniListView.prototype._sortColumn=function(b,c){if(this.parent.parent.searchAccounts){this.parent.parent.searchAccounts(b.getSortField(),c)
}}
}if(AjxPackage.define("zimbraAdmin.dl.view.ZaDLXFormView")){ZaDLXFormView=function(b,c){ZaTabView.call(this,b,"ZaDLXFormView");
this.dlStatusChoices=[{value:"enabled",label:ZaMsg.DL_Status_enabled},{value:"disabled",label:ZaMsg.DL_Status_disabled}];
this.TAB_INDEX=0;
this.initForm(ZaDistributionList.myXModel,this.getMyXForm(c));
this._localXForm.addListener(DwtEvent.XFORMS_VALUE_CHANGED,new AjxListener(this,ZaDLXFormView.prototype.handleXFormChange));
this._localXForm.addListener(DwtEvent.XFORMS_VALUE_ERROR,new AjxListener(this,ZaDLXFormView.prototype.handleXFormChange))
};
ZaDLXFormView.prototype=new ZaTabView();
ZaDLXFormView.prototype.constructor=ZaDLXFormView;
ZaTabView.XFormModifiers.ZaDLXFormView=new Array();
ZaTabView.ObjectModifiers.ZaDLXFormView=[];
ZaDLXFormView.prototype.getTitle=function(){return ZaMsg.DL_view_title
};
ZaDLXFormView.prototype.getTabIcon=function(){if(this._containedObject&&this._containedObject.attrs&&this._containedObject.attrs[ZaDistributionList.A_isAdminGroup]=="TRUE"){return"DistributionListGroup"
}else{return"DistributionList"
}};
ZaDLXFormView.prototype.handleXFormChange=function(b){if(b&&this._localXForm.hasErrors()){ZaZimbraAdmin.getInstance().getCurrentAppBar().enableButton(ZaOperation.SAVE,false)
}else{ZaZimbraAdmin.getInstance().getCurrentAppBar().enableButton(ZaOperation.SAVE,true)
}};
ZaDLXFormView.membersSelectionListener=function(c){var b=this.widget.getSelection();
if(b&&b.length){b.sort();
this.getModel().setInstanceValue(this.getInstance(),ZaDistributionList.A2_membersSelected,b)
}else{this.getModel().setInstanceValue(this.getInstance(),ZaDistributionList.A2_membersSelected,null)
}if(c.detail==DwtListView.ITEM_DBL_CLICKED){ZaDLXFormView.removeSelectedMembers.call(this,c)
}};
ZaDLXFormView.nonmemberSelectionListener=function(c){var b=this.widget.getSelection();
if(b&&b.length){b.sort();
this.getModel().setInstanceValue(this.getInstance(),ZaDistributionList.A2_nonmembersSelected,b)
}else{this.getModel().setInstanceValue(this.getInstance(),ZaDistributionList.A2_nonmembersSelected,null)
}if(c.detail==DwtListView.ITEM_DBL_CLICKED){ZaAccountMemberOfListView._addSelectedLists(this.getForm(),b)
}};
ZaDLXFormView.memberPoolSelectionListener=function(c){var b=this.widget.getSelection();
if(b&&b.length){b.sort();
this.getModel().setInstanceValue(this.getInstance(),ZaDistributionList.A2_memberPoolSelected,b)
}else{this.getModel().setInstanceValue(this.getInstance(),ZaDistributionList.A2_memberPoolSelected,null)
}if(c.detail==DwtListView.ITEM_DBL_CLICKED){ZaDLXFormView.addSelectedAddressesToMembers.call(this,c)
}};
ZaDLXFormView.directMemberSelectionListener=function(c){var b=this.widget.getSelection();
if(b&&b.length){b.sort();
this.getModel().setInstanceValue(this.getInstance(),ZaDistributionList.A2_directMemberSelected,b)
}else{this.getModel().setInstanceValue(this.getInstance(),ZaDistributionList.A2_directMemberSelected,null)
}if(c.detail==DwtListView.ITEM_DBL_CLICKED){ZaAccountMemberOfListView._removeSelectedLists(this.getForm(),b)
}};
ZaDLXFormView.indirectMemberSelectionListener=function(c){var b=this.widget.getSelection();
if(b&&b.length){b.sort();
this.getModel().setInstanceValue(this.getInstance(),ZaDistributionList.A2_indirectMemberSelected,b)
}else{this.getModel().setInstanceValue(this.getInstance(),ZaDistributionList.A2_indirectMemberSelected,null)
}};
ZaDLXFormView.removeMemberListFromPage=function(f,k,l){if(!f||AjxUtil.isEmpty(k)){return null
}var m={};
var j;
for(j=0;
j<k.length;
j++){var c=k[j];
var e=c[ZaAccount.A_name];
if(e){m[e]=c
}}if(!l){l=(f.getInstanceValue(ZaDistributionList.A2_memPagenum)||1)
}var d=f.getInstanceValue(ZaDistributionList.A2_allMemberPages)||[];
if(d==null){return null
}--l;
if(d[l]==null){d[l]=[]
}var h=f.getInstanceValue(ZaDistributionList.A2_allMemberHash)||{};
var b=d[l];
var g=[];
for(j=0;
j<b.length;
j++){var c=b[j];
var e=c[ZaAccount.A_name];
if(m[e]==null){g.push(c)
}else{h[e]=null
}}d[l]=g;
f.setInstanceValue(d,ZaDistributionList.A2_allMemberPages);
f.setInstanceValue(h,ZaDistributionList.A2_allMemberHash);
return g
};
ZaDLXFormView.removeMembers=function(e,m){var g=e.getInstanceValue(ZaDistributionList.A2_addList)||[];
g=g.sort(ZaDistributionList.compareTwoMembers);
m=m.sort(ZaDistributionList.compareTwoMembers);
var f=[];
var l=0,k=0;
var n=[];
while(l<g.length&&k<m.length){var r=g[l];
var d=m[k];
var c=d[ZaAccount.A_name];
var o=ZaDistributionList.compareTwoMembers(r,d);
if(o>0){f.push(d);
k++
}else{if(o<0){n.push(r);
l++
}else{l++;
k++
}}}for(;
l<g.length;
l++){n.push(g[l])
}if(n.length<g.length){n._version=(g._version||0)+1;
e.setInstanceValue(n,ZaDistributionList.A2_addList)
}for(;
k<m.length;
k++){f.push(m[k])
}var b=e.getInstanceValue(ZaDistributionList.A2_removeList);
for(k=0;
k<b.length;
k++){f.push(b[k])
}f._version=(b._version||0)+1;
e.setInstanceValue(f,ZaDistributionList.A2_removeList);
var q=e.getInstanceValue(ZaDistributionList.A2_memberList);
var p=ZaDLXFormView.removeMemberListFromPage(e,m)||[];
p._version=(q._version||0)+1;
e.setInstanceValue(p,ZaDistributionList.A2_memberList);
var h=e.getInstanceValue(ZaDistributionList.A2_numMembers)||0;
h-=m.length;
e.setInstanceValue(h,ZaDistributionList.A2_numMembers);
e.parent.setDirty(true)
};
ZaDLXFormView.removeSelectedMembers=function(d){var c=this.getForm();
var b=c.getInstanceValue(ZaDistributionList.A2_membersSelected);
ZaDLXFormView.removeMembers(c,b)
};
ZaDLXFormView.removeOnePageMembers=function(d){var c=this.getForm();
var b=c.getInstanceValue(ZaDistributionList.A2_memberList);
ZaDLXFormView.removeMembers(c,b)
};
ZaDLXFormView.srchButtonHndlr=function(b){this.setInstanceValue([],ZaDistributionList.A2_memberPool);
this.setInstanceValue(1,ZaDistributionList.A2_poolPagenum);
this.setInstanceValue(1,ZaDistributionList.A2_poolNumPages);
this.setInstanceValue(-1,ZaDistributionList.A2_totalNumInPool);
this.setInstanceValue(null,ZaDistributionList.A2_memberPoolSelected);
var c=this.getForm().parent;
ZaDLXFormView.prototype.searchAccounts.call(c,null,true)
};
ZaDLXFormView.fwdPoolButtonHndlr=function(b){var c=this.getForm().parent;
var d=this.getInstanceValue(ZaDistributionList.A2_poolPagenum);
this.setInstanceValue(d+1,ZaDistributionList.A2_poolPagenum);
ZaDLXFormView.prototype.searchAccounts.call(c,null,true)
};
ZaDLXFormView.backPoolButtonHndlr=function(b){var c=this.getForm().parent;
var d=this.getInstanceValue(ZaDistributionList.A2_poolPagenum)-1;
this.setInstanceValue(d,ZaDistributionList.A2_poolPagenum);
ZaDLXFormView.prototype.searchAccounts.call(c,null,true)
};
ZaDLXFormView.fwdMemButtonHndlr=function(b){var d=this.getInstanceValue(ZaDistributionList.A2_memPagenum)+1;
this.setInstanceValue(d,ZaDistributionList.A2_memPagenum);
var c=ZaApp.getInstance().getCurrentController()._currentObject;
if(c&&c[ZaDistributionList.A2_allMemberPages]){c[ZaDistributionList.A2_memPagenum]=d;
var e=c[ZaDistributionList.A2_allMemberPages][d-1]||[];
this.setInstanceValue(e,ZaDistributionList.A2_memberList)
}};
ZaDLXFormView.backMemButtonHndlr=function(b){var d=this.getInstanceValue(ZaDistributionList.A2_memPagenum)-1;
this.setInstanceValue(d,ZaDistributionList.A2_memPagenum);
var c=ZaApp.getInstance().getCurrentController()._currentObject;
if(c&&c[ZaDistributionList.A2_allMemberPages]){c[ZaDistributionList.A2_memPagenum]=d;
var e=c[ZaDistributionList.A2_allMemberPages][d-1]||[];
this.setInstanceValue(e,ZaDistributionList.A2_memberList)
}};
ZaDLXFormView.getMemberSelection=function(){var b=this.getItemsById(ZaDistributionList.A2_members)[0];
var c=null;
if(b){var c=b.getSelection()
}if(c){return c
}else{return[]
}};
ZaDLXFormView.shouldEnableMemberListButtons=function(){return(ZaDLXFormView.getMemberSelection.call(this).length>0)
};
ZaDLXFormView.shouldEnableRemoveThisPageButton=function(){return(!AjxUtil.isEmpty(this.getInstanceValue(ZaDistributionList.A2_memberList)))
};
ZaDLXFormView.shouldEnableAddAllButton=function(){var b=this.getItemsById(ZaDistributionList.A2_memberPool)[0].widget.getList();
if(b!=null){return(b.size()>0)
}return false
};
ZaDLXFormView.getMemberPoolSelection=function(){var b=this.getItemsById(ZaDistributionList.A2_memberPool)[0];
var c=null;
if(b){var c=b.getSelection()
}if(c){return c
}else{return[]
}};
ZaDLXFormView.shouldEnableMemberPoolListButtons=function(){return(ZaDLXFormView.getMemberPoolSelection.call(this).length>0)
};
ZaDLXFormView.shouldEnableFreeFormButtons=function(){var b=this.getInstance().optionalAdd;
return(b&&b.length>0)
};
ZaDLXFormView.shouldEnablePoolForwardButton=function(){return(this.getInstanceValue(ZaDistributionList.A2_poolPagenum)<this.getInstanceValue(ZaDistributionList.A2_poolNumPages))
};
ZaDLXFormView.shouldEnablePoolBackButton=function(){return(this.getInstanceValue(ZaDistributionList.A2_poolPagenum)>1)
};
ZaDLXFormView.shouldEnableMemForwardButton=function(){return(this.getInstanceValue(ZaDistributionList.A2_memPagenum)<this.getInstanceValue(ZaDistributionList.A2_memNumPages))
};
ZaDLXFormView.shouldEnableMemBackButton=function(){return(this.getInstanceValue(ZaDistributionList.A2_memPagenum)>1)
};
ZaDLXFormView.addMemberListToPage=function(d,k,j){if(!d||AjxUtil.isEmpty(k)){return null
}if(!j){j=(d.getInstanceValue(ZaDistributionList.A2_memPagenum)||1)
}var c=d.getInstanceValue(ZaDistributionList.A2_allMemberPages)||[];
if(c==null){return null
}--j;
if(c[j]==null){c[j]=[]
}var e=d.getInstanceValue(ZaDistributionList.A2_allMemberHash)||{};
var h=c[j];
for(var g=0;
g<k.length;
g++){var f=k[g];
if(!f||!f[ZaAccount.A_name]){continue
}var b=f[ZaAccount.A_name];
if(b&&e[b]==null){h.push(f);
e[b]=f
}}d.setInstanceValue(c,ZaDistributionList.A2_allMemberPages);
d.setInstanceValue(e,ZaDistributionList.A2_allMemberHash);
return h
};
ZaDLXFormView.excludeAddressesInAllMembers=function(g,f){if(!g||AjxUtil.isEmpty(f)){return null
}var e=[];
var b=[];
var h=g.getInstanceValue(ZaDistributionList.A2_allMemberHash)||{};
for(var d=0;
d<f.length;
d++){var j=f[d];
if(!j||!j[ZaAccount.A_name]){continue
}var c=j[ZaAccount.A_name];
if(c&&h[c]==null){e.push(j)
}else{b.push(c)
}}return[b,e]
};
ZaDLXFormView.addAddressesToMembers=function(b,s){var u=ZaDLXFormView.excludeAddressesInAllMembers(b,s);
var l=u[0],g=u[1];
if(l.length>0){var n=l.join("<br>");
var f=AjxMessageFormat.format(ZaMsg.DLXV_MsgMemberExisted,[n]);
if(g.length>0){var m=g.join("<br>");
f+=("<br><br>");
f+=AjxMessageFormat.format(ZaMsg.DLXV_MsgMemberCanBeAdded,[m])
}ZaApp.getInstance().getCurrentController().popupMsgDialog(f)
}if(g.length<=0){return
}var d=b.getInstanceValue(ZaDistributionList.A2_memberList);
var e=ZaDLXFormView.addMemberListToPage(b,g);
if(!e||!e.length){return
}e._version=(d._version||0)+1;
b.setInstanceValue(e,ZaDistributionList.A2_memberList);
var p=b.getInstanceValue(ZaDistributionList.A2_removeList)||[];
p=p.sort(ZaDistributionList.compareTwoMembers);
g=g.sort(ZaDistributionList.compareTwoMembers);
var t=[],h=[];
var r=0,q=0;
while(r<p.length&&q<g.length){var o=p[r];
var w=g[q];
var x=w[ZaAccount.A_name];
var k=ZaDistributionList.compareTwoMembers(o,w);
if(k>0){t.push(w);
q++
}else{if(k<0){h.push(o);
r++
}else{r++;
q++
}}}for(;
r<p.length;
r++){h.push(p[r])
}if(h.length<p.length){h._version=(p._version||0)+1;
b.setInstanceValue(h,ZaDistributionList.A2_removeList)
}for(;
q<g.length;
q++){t.push(g[q])
}var v=b.getInstanceValue(ZaDistributionList.A2_addList)||[];
for(q=0;
q<v.length;
q++){t.push(v[q])
}t._version=(v._version||0)+1;
b.setInstanceValue(t,ZaDistributionList.A2_addList);
var c=b.getInstanceValue(ZaDistributionList.A2_numMembers)||0;
c+=(g.length);
b.setInstanceValue(c,ZaDistributionList.A2_numMembers);
b.parent.setDirty(true)
};
ZaDLXFormView.addSelectedAddressesToMembers=function(d){var c=this.getForm();
var b=c.getInstanceValue(ZaDistributionList.A2_memberPoolSelected);
if(AjxUtil.isEmpty(b)){return
}ZaDLXFormView.addAddressesToMembers(c,b)
};
ZaDLXFormView.addOnePageAddressesToMembers=function(d){var c=this.getForm();
var b=c.getInstanceValue(ZaDistributionList.A2_memberPool);
if(AjxUtil.isEmpty(b)){return
}ZaDLXFormView.addAddressesToMembers(c,b)
};
ZaDLXFormView.addFreeFormAddressToMembers=function(b){var c=this.getForm();
var h=c.getInstanceValue(ZaDistributionList.A2_optionalAdd);
if(AjxUtil.isEmpty(h)){return
}var h=h.split(/[\r\n,;]+/);
var e=[];
var f=/([^\<\;]*)\<([^\>]+)\>/;
for(var g=0;
g<h.length;
g++){var j=AjxStringUtil.trim(h[g],true);
if(j){var k=f.exec(j);
if(k!=null){j=k[2]
}if(!AjxUtil.isEmailAddress(j)){var d=AjxMessageFormat.format(ZaMsg.WARNING_DL_INVALID_EMAIL,[j]);
ZaApp.getInstance().getCurrentController().popupErrorDialog(d,null,DwtMessageDialog.WARNING_STYLE);
return
}e.push(new ZaDistributionListMember(j))
}}ZaDLXFormView.addAddressesToMembers(c,e);
this.setInstanceValue("",ZaDistributionList.A2_optionalAdd)
};
ZaDLXFormView._copyAttrFromEntry=function(c,e,g){if(!c||!e||!g){return
}for(var d in g.attrs){var f=c.getModel().getItem(d);
var b=g.attrs[d];
if((f!=null&&f.type==_LIST_)||(b!=null&&b instanceof Array)){e.attrs[d]=ZaItem.deepCloneListItem(b)
}else{e.attrs[d]=b
}}if(g.setAttrs){e.setAttrs=g.setAttrs
}if(g.getAttrs){e.getAttrs=g.getAttrs
}if(g.rights){e.rights=g.rights
}if(g._defaultValues){e._defaultValues=g._defaultValues
}};
ZaDLXFormView.prototype.setObject=function(b){this._containedObject=new ZaDistributionList();
this._containedObject.attrs=new Object();
ZaDLXFormView._copyAttrFromEntry(this._localXForm,this._containedObject,b);
this._containedObject[ZaDistributionList.A2_addList]=b[ZaDistributionList.A2_addList]||[];
this._containedObject[ZaDistributionList.A2_addList]._version=1;
this._containedObject[ZaDistributionList.A2_removeList]=b[ZaDistributionList.A2_removeList]||[];
this._containedObject[ZaDistributionList.A2_removeList]._version=1;
this._containedObject[ZaDistributionList.A2_memberList]=b[ZaDistributionList.A2_memberList]||[];
this._containedObject[ZaDistributionList.A2_memberList]._version=1;
this._containedObject[ZaDistributionList.A2_numMembers]=b[ZaDistributionList.A2_numMembers]||0;
this._containedObject[ZaDistributionList.A2_allMemberHash]=b[ZaDistributionList.A2_allMemberHash]||{};
this._containedObject[ZaDistributionList.A2_allMemberPages]=b[ZaDistributionList.A2_allMemberPages]||[];
this._containedObject[ZaDistributionList.A2_memberPool]=b[ZaDistributionList.A2_memberPool]||[];
this._containedObject[ZaDistributionList.A2_memberPool]._version=1;
this._containedObject[ZaDistributionList.A2_poolPagenum]=this._containedObject[ZaDistributionList.A2_poolPagenum]||1;
this._containedObject[ZaDistributionList.A2_poolNumPages]=b[ZaDistributionList.A2_poolNumPages]||1;
this._containedObject[ZaDistributionList.A2_totalNumInPool]=b[ZaDistributionList.A2_totalNumInPool]||-1;
this._containedObject[ZaDistributionList.A2_query]="";
this._containedObject.name=b.name;
if(b.name==""){this._containedObject.name=ZaMsg.TBB_New
}this._containedObject.type=b.type;
this._containedObject.id=b.id;
if(!b[ZaModel.currentTab]){this._containedObject[ZaModel.currentTab]="1"
}else{this._containedObject[ZaModel.currentTab]=b[ZaModel.currentTab]
}if(!b.id){if(ZaItem.hasWritePermission(ZaAccount.A_zimbraIsDelegatedAdminAccount,b)){this._containedObject.attrs[ZaDistributionList.A_mailStatus]="enabled"
}}this.modifyContainedObject();
this._localXForm.setInstance(this._containedObject)
};
ZaDLXFormView.prototype.srchResWithoutSelf=function(f,b){var d=new Array();
var c=f.getArray();
for(var e=0;
e<c.length;
e++){if(c[e].type==ZaItem.DL&&c[e]==b){continue
}else{if(c[e].type==ZaItem.ALIAS&&c[e].getAliasTargetObj()==b){continue
}else{d.push(c[e])
}}}return d
};
ZaDLXFormView.prototype.searchAccounts=function(f,e){var c=ZaDistributionList.MEMBER_POOL_PAGE_SIZE;
var d=this._containedObject[ZaDistributionList.A2_poolPagenum];
var b=ZaDLXFormView.getMatchedAccounts.call(this,f,e,d,c);
this._containedObject[ZaDistributionList.A2_memberPool]=b.list;
this._containedObject[ZaDistributionList.A2_poolNumPages]=b.numPages;
this._containedObject[ZaDistributionList.A2_totalNumInPool]=b.searchTotal||0;
this._localXForm.setInstance(this._containedObject)
};
ZaDLXFormView.prototype.getAllMatchedAccounts=function(){var c=0;
var d=1;
var b=ZaDLXFormView.getMatchedAccounts.call(this,ZaAccount.A_name,true,d,c);
return b.list
};
ZaDLXFormView.getMatchedAccounts=function(k,e,c,g){k=(k!=null)?k:ZaAccount.A_name;
e=!!e;
g=(g>=0)?g:ZaDistributionList.MEMBER_POOL_PAGE_SIZE;
c=(c>=0)?c:this._containedObject[ZaDistributionList.A2_poolPagenum];
var l={};
try{var h=[ZaSearch.ACCOUNTS,ZaSearch.DLS,ZaSearch.ALIASES];
var b=ZaSearch.getSearchByNameQuery(this._containedObject[ZaDistributionList.A2_query],h,true);
var f=this._containedObject[ZaAccount.A_name];
b=ZaDLXFormView.makeQueryStringWithoutSelf(b,f);
var d=new ZaSearchQuery(b,h,false,"",null,g);
l=ZaSearch.searchByQueryHolder(d,c,k,e);
if(l.list){l.list=l.list.getArray()
}else{l.list=[];
l.numPages=0;
l.searchTotal=0
}}catch(j){if(j.code!=ZmCsfeException.MAIL_QUERY_PARSE_ERROR){ZaApp.getInstance().getCurrentController()._handleException(j,"ZaDLXFormView.prototype.searchAccounts",null,false)
}else{this.popupErrorDialog(ZaMsg.queryParseError,j);
this._searchField.setEnabled(true)
}}return l
};
ZaDLXFormView._makeAddressExcluded=function(b){if(AjxUtil.isEmpty(b)){return""
}return("(!(mail="+b+"))(!(zimbraMailAddress="+b+"))(!(zimbraMailDeliveryAddress="+b+"))(!(zimbraMailForwardingAddress="+b+"))(!(zimbraMemberOf="+b+"))")
};
ZaDLXFormView.makeQueryStringWithoutSelf=function(c,b){if(c==null){c=""
}if(!b||!b.length){return c
}var d=ZaDLXFormView._makeAddressExcluded(b);
d=d?"(&"+c+"(&"+d+"))":c;
return d
};
ZaDLXFormView.aliasSelectionListener=function(c){var b=this.widget.getSelection();
if(b&&b.length){b.sort();
b=AjxUtil.htmlDecode(b);
this.getModel().setInstanceValue(this.getInstance(),ZaDistributionList.A2_alias_selection_cache,b)
}else{this.getModel().setInstanceValue(this.getInstance(),ZaDistributionList.A2_alias_selection_cache,null)
}if(c.detail==DwtListView.ITEM_DBL_CLICKED){ZaDLXFormView.editAliasButtonListener.call(this)
}};
ZaDLXFormView.deleteAliasButtonListener=function(){var b=this.getInstance();
if(b[ZaDistributionList.A2_alias_selection_cache]!=null){var f=b[ZaDistributionList.A2_alias_selection_cache].length;
if(f&&b.attrs[ZaAccount.A_zimbraMailAlias]){var d=b.attrs[ZaAccount.A_zimbraMailAlias];
for(var e=0;
e<f;
e++){var g=d.length-1;
for(var c=g;
c>=0;
c--){if(d[c]==b[ZaDistributionList.A2_alias_selection_cache][e]){d.splice(c,1);
break
}}}this.getModel().setInstanceValue(b,ZaAccount.A_zimbraMailAlias,d)
}}this.getModel().setInstanceValue(b,ZaDistributionList.A2_alias_selection_cache,[]);
this.getForm().parent.setDirty(true)
};
ZaDLXFormView.editAliasButtonListener=function(){var b=this.getInstance();
if(b.alias_selection_cache&&b.alias_selection_cache[0]){var f=this.getForm().parent;
if(!f.editAliasDlg){f.editAliasDlg=new ZaEditAliasXDialog(ZaApp.getInstance().getAppCtxt().getShell(),"550px","150px",ZaMsg.Edit_Alias_Title);
f.editAliasDlg.registerCallback(DwtDialog.OK_BUTTON,ZaDLXFormView.updateAlias,this.getForm(),null)
}var e={};
e[ZaAccount.A_name]=b[ZaDistributionList.A2_alias_selection_cache][0];
var d=b.attrs[ZaAccount.A_zimbraMailAlias].length;
for(var c=0;
c<d;
c++){if(b[ZaDistributionList.A2_alias_selection_cache][0]==b.attrs[ZaAccount.A_zimbraMailAlias][c]){e[ZaAlias.A_index]=c;
break
}}f.editAliasDlg.setObject(e);
f.editAliasDlg.popup()
}};
ZaDLXFormView.updateAlias=function(){if(this.parent.editAliasDlg){this.parent.editAliasDlg.popdown();
var d=this.parent.editAliasDlg.getObject();
var c=this.getInstance();
var b=c.attrs[ZaAccount.A_zimbraMailAlias];
if(d[ZaAlias.A_index]>=0&&b[d[ZaAlias.A_index]]!=d[ZaAccount.A_name]){b[d[ZaAlias.A_index]]=d[ZaAccount.A_name];
this.getModel().setInstanceValue(this.getInstance(),ZaAccount.A_zimbraMailAlias,b);
this.getModel().setInstanceValue(this.getInstance(),ZaDistributionList.A2_alias_selection_cache,new Array());
this.parent.setDirty(true)
}}};
ZaDLXFormView.addAliasButtonListener=function(){var b=this.getInstance();
var d=this.getForm().parent;
if(!d.addAliasDlg){d.addAliasDlg=new ZaEditAliasXDialog(ZaApp.getInstance().getAppCtxt().getShell(),"550px","150px",ZaMsg.Add_Alias_Title);
d.addAliasDlg.registerCallback(DwtDialog.OK_BUTTON,ZaDLXFormView.addAlias,this.getForm(),null)
}var c={};
c[ZaAccount.A_name]="";
c[ZaAlias.A_index]=-1;
d.addAliasDlg.setObject(c);
d.addAliasDlg.popup()
};
ZaDLXFormView.addAlias=function(){if(this.parent.addAliasDlg){this.parent.addAliasDlg.popdown();
var d=this.parent.addAliasDlg.getObject();
if(d[ZaAccount.A_name]&&d[ZaAccount.A_name].length>1){var c=this.getInstance();
var b=c.attrs[ZaAccount.A_zimbraMailAlias];
b.push(d[ZaAccount.A_name]);
this.getModel().setInstanceValue(this.getInstance(),ZaAccount.A_zimbraMailAlias,b);
this.getModel().setInstanceValue(this.getInstance(),ZaDistributionList.A2_alias_selection_cache,new Array());
this.parent.setDirty(true)
}}};
ZaDLXFormView.isEditAliasEnabled=function(){return(!AjxUtil.isEmpty(this.getInstanceValue(ZaDistributionList.A2_alias_selection_cache))&&this.getInstanceValue(ZaAccount.A2_alias_selection_cache).length==1)
};
ZaDLXFormView.isDeleteAliasEnabled=function(){return(!AjxUtil.isEmpty(this.getInstanceValue(ZaDistributionList.A2_alias_selection_cache)))
};
ZaDLXFormView.ownerSelectionListener=function(c){var b=this.widget.getSelection();
if(b&&b.length){b.sort();
b=AjxUtil.htmlDecode(b);
this.getModel().setInstanceValue(this.getInstance(),ZaDistributionList.A2_owners_selection_cache,b)
}else{this.getModel().setInstanceValue(this.getInstance(),ZaDistributionList.A2_owners_selection_cache,null)
}if(c.detail==DwtListView.ITEM_DBL_CLICKED){ZaDLXFormView.editOwnerButtonListener.call(this)
}};
ZaDLXFormView.deleteOwnerButtonListener=function(){var b=this.getInstance();
if(b[ZaDistributionList.A2_owners_selection_cache]!=null){var f=b[ZaDistributionList.A2_owners_selection_cache].length;
if(f&&b[ZaDistributionList.A2_DLOwners]){var d=b[ZaDistributionList.A2_DLOwners];
for(var e=0;
e<f;
e++){var g=d.length-1;
for(var c=g;
c>=0;
c--){if(d[c]==b[ZaDistributionList.A2_owners_selection_cache][e]){d.splice(c,1);
break
}}}this.getModel().setInstanceValue(b,ZaDistributionList.A2_DLOwners,d)
}}this.getModel().setInstanceValue(b,ZaDistributionList.A2_owners_selection_cache,[]);
this.getForm().parent.setDirty(true)
};
ZaDLXFormView.editOwnerButtonListener=function(){var b=this.getInstance();
if(b[ZaDistributionList.A2_owners_selection_cache]&&b[ZaDistributionList.A2_owners_selection_cache][0]){var f=this.getForm().parent;
if(!f.editOwnerDlg){f.editOwnerDlg=new ZaEditAliasXDialog(ZaApp.getInstance().getAppCtxt().getShell(),"450px","150px",ZaMsg.Edit_Owner_Title);
f.editOwnerDlg.registerCallback(DwtDialog.OK_BUTTON,ZaDLXFormView.updateOwner,this.getForm(),null)
}var e={};
e[ZaAccount.A_name]=b[ZaDistributionList.A2_owners_selection_cache][0];
var d=b[ZaDistributionList.A2_DLOwners].length;
for(var c=0;
c<d;
c++){if(b[ZaDistributionList.A2_owners_selection_cache][0]==b[ZaDistributionList.A2_DLOwners][c]){e[ZaAlias.A_index]=c;
break
}}f.editOwnerDlg.setObject(e);
f.editOwnerDlg.popup()
}};
ZaDLXFormView.updateOwner=function(){if(this.parent.editOwnerDlg){this.parent.editOwnerDlg.popdown();
var d=this.parent.editOwnerDlg.getObject();
var c=this.getInstance();
var b=c[ZaDistributionList.A2_DLOwners];
if(d[ZaAlias.A_index]>=0&&b[d[ZaAlias.A_index]]!=d[ZaAccount.A_name]){if(!ZaDLXFormView.checkOwner(d[ZaAccount.A_name])){return
}b[d[ZaAlias.A_index]]=d[ZaAccount.A_name];
this.getModel().setInstanceValue(this.getInstance(),ZaDistributionList.A2_DLOwners,b);
this.getModel().setInstanceValue(this.getInstance(),ZaDistributionList.A2_owners_selection_cache,new Array());
this.parent.setDirty(true)
}}};
ZaDLXFormView.addOwnerButtonListener=function(){var c=this.getForm().parent;
if(!c.addOwnerDlg){c.addOwnerDlg=new ZaEditAliasXDialog(ZaApp.getInstance().getAppCtxt().getShell(),"450px","150px",ZaMsg.Add_Owner_Title);
c.addOwnerDlg.registerCallback(DwtDialog.OK_BUTTON,ZaDLXFormView.addOwner,this.getForm(),null)
}var b={};
b[ZaAccount.A_name]="";
b[ZaAlias.A_index]=-1;
c.addOwnerDlg.setObject(b);
c.addOwnerDlg.popup()
};
ZaDLXFormView.addOwner=function(){if(this.parent.addOwnerDlg){this.parent.addOwnerDlg.popdown();
var d=this.parent.addOwnerDlg.getObject();
if(d[ZaAccount.A_name]&&d[ZaAccount.A_name].length>1){if(!ZaDLXFormView.checkOwner(d[ZaAccount.A_name])){return
}var c=this.getInstance();
var b=c[ZaDistributionList.A2_DLOwners];
b.push(d[ZaAccount.A_name]);
this.getModel().setInstanceValue(this.getInstance(),ZaDistributionList.A2_DLOwners,b);
this.getModel().setInstanceValue(this.getInstance(),ZaDistributionList.A2_owners_selection_cache,new Array());
this.parent.setDirty(true)
}}};
ZaDLXFormView.checkOwner=function(c){var b=false;
try{b=ZaSearch.isAccountExist({name:c,popupError:false})
}catch(d){}if(!b){ZaApp.getInstance().getCurrentController().popupErrorDialog(ZaMsg.ERROR_NO_SUCH_ACCOUNT)
}return b
};
ZaDLXFormView.isEditOwnerEnabled=function(){return(!AjxUtil.isEmpty(this.getInstanceValue(ZaDistributionList.A2_owners_selection_cache))&&this.getInstanceValue(ZaDistributionList.A2_owners_selection_cache).length==1)
};
ZaDLXFormView.isDeleteOwnerEnabled=function(){return(!AjxUtil.isEmpty(this.getInstanceValue(ZaDistributionList.A2_owners_selection_cache)))
};
ZaDLXFormView.isDynamicDL=function(){return this.getInstanceValue(ZaDistributionList.A2_dlType)===ZaDistributionList.DYNAMIC_DL_TYPE
};
ZaDLXFormView.isNotDynamicDL=function(){return !ZaDLXFormView.isDynamicDL.call(this)
};
ZaDLXFormView.isNotACLGroup=function(){return this.getInstanceValue(ZaDistributionList.A_zimbraIsACLGroup)==="FALSE"
};
ZaDLXFormView.isACLGroup=function(){return !ZaDLXFormView.isNotACLGroup.call(this)
};
ZaDLXFormView.NOTES_TAB_ATTRS=[ZaAccount.A_notes];
ZaDLXFormView.NOTES_TAB_RIGHTS=[];
ZaDLXFormView.MEMBEROF_TAB_ATTRS=[];
ZaDLXFormView.MEMBEROF_TAB_RIGHTS=[ZaDistributionList.GET_DL_MEMBERSHIP_RIGHT];
ZaDLXFormView.ALIASES_TAB_ATTRS=[ZaAccount.A_zimbraMailAlias];
ZaDLXFormView.ALIASES_TAB_RIGHTS=[ZaDistributionList.ADD_DL_ALIAS_RIGHT,ZaDistributionList.REMOVE_DL_ALIAS_RIGHT];
ZaDLXFormView.OWNER_TAB_ATTRS=[];
ZaDLXFormView.OWNER_TAB_RIGHTS=[];
ZaDLXFormView.PREF_TAB_ATTRS=[ZaDistributionList.A_zimbraPrefReplyToEnabled,ZaDistributionList.A_zimbraPrefReplyToDisplay,ZaDistributionList.A_zimbraPrefReplyToAddress];
ZaDLXFormView.PREF_TAB_RIGHTS=[];
ZaDLXFormView.myXFormModifier=function(A,c){var o=new Array();
var d=1;
o[0]=new ZaListHeaderItem("type",ZaMsg.ALV_Type_col,null,"34px",null,"objectClass",true,true);
o[1]=new ZaListHeaderItem(ZaAccount.A_name,ZaMsg.ALV_Name_col,null,"200px",d++,ZaAccount.A_name,true,true);
o[2]=new ZaListHeaderItem(ZaAccount.A_displayname,ZaMsg.ALV_DspName_col,null,null,d++,ZaAccount.A_displayname,true,true);
var p=new Array();
p[0]=new ZaListHeaderItem(ZaAccount.A_name,ZaMsg.ALV_Name_col,null,"100%",d++,ZaAccount.A_name,true,true);
var F=new ZaAccountMemberOfsourceHeaderList(ZaAccountMemberOfsourceHeaderList.DIRECT);
var w=new ZaAccountMemberOfsourceHeaderList(ZaAccountMemberOfsourceHeaderList.INDIRECT);
var s=new ZaAccountMemberOfsourceHeaderList(ZaAccountMemberOfsourceHeaderList.NON);
this.tabChoices=new Array();
this.helpMap={};
var I,H,G,D,C,B;
I=++this.TAB_INDEX;
this.tabChoices.push({value:I,label:ZaMsg.DLXV_TabMembers});
this.helpMap[I]=[location.pathname,ZaUtil.HELP_URL,"managing_accounts/distribution_lists.htm","?locid=",AjxEnv.DEFAULT_LOCALE].join("");
if(ZaTabView.isTAB_ENABLED(c,ZaDLXFormView.NOTES_TAB_ATTRS,ZaDLXFormView.NOTES_TAB_RIGHTS)){H=++this.TAB_INDEX;
this.tabChoices.push({value:H,label:ZaMsg.DLXV_TabProperties});
this.helpMap[H]=[location.pathname,ZaUtil.HELP_URL,"managing_accounts/distribution_lists.htm","?locid=",AjxEnv.DEFAULT_LOCALE].join("")
}if(ZaTabView.isTAB_ENABLED(c,ZaDLXFormView.MEMBEROF_TAB_ATTRS,ZaDLXFormView.MEMBEROF_TAB_RIGHTS)&&(!c.dynamic)){G=++this.TAB_INDEX;
this.tabChoices.push({value:G,label:ZaMsg.TABT_MemberOf});
this.helpMap[G]=[location.pathname,ZaUtil.HELP_URL,"managing_accounts/distribution_lists.htm","?locid=",AjxEnv.DEFAULT_LOCALE].join("")
}if(ZaTabView.isTAB_ENABLED(c,ZaDLXFormView.ALIASES_TAB_ATTRS,ZaDLXFormView.ALIASES_TAB_RIGHTS)){D=++this.TAB_INDEX;
this.tabChoices.push({value:D,label:ZaMsg.TABT_Aliases});
this.helpMap[D]=[location.pathname,ZaUtil.HELP_URL,"managing_accounts/distribution_lists.htm","?locid=",AjxEnv.DEFAULT_LOCALE].join("")
}if(ZaTabView.isTAB_ENABLED(c,ZaDLXFormView.OWNER_TAB_ATTRS,ZaDLXFormView.OWNER_TAB_RIGHTS)){C=++this.TAB_INDEX;
this.tabChoices.push({value:C,label:ZaMsg.TABT_Owners});
this.helpMap[C]=[location.pathname,ZaUtil.HELP_URL,"managing_accounts/distribution_lists.htm","?locid=",AjxEnv.DEFAULT_LOCALE].join("")
}if(ZaTabView.isTAB_ENABLED(c,ZaDLXFormView.PREF_TAB_ATTRS,ZaDLXFormView.PREF_TAB_RIGHTS)){B=++this.TAB_INDEX;
this.tabChoices.push({value:B,label:ZaMsg.TABT_Preferences});
this.helpMap[B]=[location.pathname,ZaUtil.HELP_URL,"managing_accounts/distribution_lists.htm","?locid=",AjxEnv.DEFAULT_LOCALE].join("")
}A.tableCssStyle="width:100%;overflow:auto;";
A.numCols=5;
A.colSizes=[10,"auto",20,"auto",10];
A.itemDefaults={_INPUT_:{cssClass:"inputBorder"},_TEXTAREA_:{cssClass:"inputBorder"},_TEXTFIELD_:{cssClass:"inputBorder",containerCssStyle:"width:100%"}};
var b=[];
var E,J,z,y,n,v;
if(AjxEnv.isWebKitBased||AjxEnv.isFirefox){E=30;
J=310;
z="99%";
y=342;
n="99%"
}else{E=25;
J=308;
z="100%";
y=338;
n="100%"
}v="100%";
var r={type:_ZATABCASE_,caseKey:I,numCols:2,id:"dl_form_members",colSizes:["440px","440px"],cssStyle:"table-layout:fixed; padding-top:5px;",items:[{type:_GROUP_,width:"98%",numCols:1,items:[{type:_SPACER_,height:"5"},{type:_GROUP_,width:"98%",id:"dl_form_members_general_group",numCols:2,colSizes:[130,"*"],items:[{ref:ZaAccount.A_name,type:_EMAILADDR_,msgName:ZaMsg.MSG_LabelListName,label:ZaMsg.LBL_LabelListName,forceUpdate:true,tableCssStyle:"width:100%",inputWidth:"100",domainPartWidth:"100%",id:"dl_name_field",nameContainerCss:"width:100px",domainContainerWidth:"100%",midContainerCss:"width:20px",visibilityChecks:[],enableDisableChecks:[[XFormItem.prototype.hasRight,ZaDistributionList.RENAME_DL_RIGHT]]},{type:_SPACER_,height:"3"},{ref:ZaAccount.A_displayname,type:_TEXTFIELD_,label:ZaMsg.NAD_DisplayName,msgName:ZaMsg.NAD_DisplayName,align:_LEFT_,cssClass:"admin_xform_name_input",width:"100%"},{type:_SPACER_,height:"3"},{ref:"description",msgName:ZaMsg.NAD_Description,label:ZaMsg.NAD_Description,labelLocation:_LEFT_,align:_LEFT_,type:_TEXTAREA_,enableDisableChecks:[ZaItem.hasWritePermission],visibilityChecks:[ZaItem.hasReadPermission],cssClass:"admin_xform_name_input",width:"100%",height:"100"}]},{type:_SPACER_,height:"20"},{type:_GROUPER_,borderCssClass:"LeftGrouperBorder",width:"100%",numCols:1,colSizes:["auto"],label:ZaMsg.DLXV_LabelListMembers,items:[{type:_GROUP_,width:"100%",height:E,numCols:3,colSizes:["*","20px","104px"],items:[{type:_OUTPUT_,ref:ZaDistributionList.A2_numMembers,align:_LEFT_,valueChangeEventSources:[ZaDistributionList.A2_numMembers,ZaDistributionList.A2_memNumPages],getDisplayValue:ZaDLXFormView.showMembersNum},{type:_CELLSPACER_},{type:_GROUP_,width:"100%",numCols:3,colSizes:["32px","40px","32px"],visibilityChangeEventSources:[ZaDistributionList.A2_memNumPages],visibilityChecks:[[ZaDLXFormView.isMoreThanOnePage,ZaDistributionList.A2_memNumPages]],items:[{type:_DWT_BUTTON_,label:null,labelLocation:_NONE_,width:"100%",id:"backButton",icon:"LeftArrow",disIcon:"LeftArrowDis",enableDisableChecks:[ZaDLXFormView.shouldEnableMemBackButton],enableDisableChangeEventSources:[ZaDistributionList.A2_memberList,ZaDistributionList.A2_memNumPages,ZaDistributionList.A2_memPagenum],onActivate:"ZaDLXFormView.backMemButtonHndlr.call(this,event)"},{type:_OUTPUT_,ref:ZaDistributionList.A2_memPagenum,valueChangeEventSources:[ZaDistributionList.A2_memPagenum,ZaDistributionList.A2_memNumPages],align:_CENTER_,getDisplayValue:ZaDLXFormView.showMembersPaging},{type:_DWT_BUTTON_,label:null,labelLocation:_NONE_,width:"100%",id:"fwdButton",icon:"RightArrow",disIcon:"RightArrowDis",enableDisableChecks:[ZaDLXFormView.shouldEnableMemForwardButton],enableDisableChangeEventSources:[ZaDistributionList.A2_memberList,ZaDistributionList.A2_memNumPages,ZaDistributionList.A2_memPagenum],onActivate:"ZaDLXFormView.fwdMemButtonHndlr.call(this,event)"}]}]},{type:_SPACER_,height:"5"},{ref:ZaDistributionList.A2_memberList,type:_DWT_LIST_,height:J,width:z,cssClass:"DLTarget",cssStyle:"margin-left: 5px; ",widgetClass:ZaAccMiniListView,headerList:p,hideHeader:true,onSelection:ZaDLXFormView.membersSelectionListener,bmolsnr:true},{type:_SPACER_,height:"8"},{type:_GROUP_,width:"99%",numCols:3,colSizes:["45%","10%","45%"],items:[{type:_DWT_BUTTON_,label:ZaMsg.DLXV_ButtonRemoveSelected,id:"removeButton",onActivate:"ZaDLXFormView.removeSelectedMembers.call(this,event)",nowrap:true,cssStyle:"padding:0px;",enableDisableChangeEventSources:[ZaDistributionList.A2_membersSelected],enableDisableChecks:[[XForm.checkInstanceValueNotEmty,ZaDistributionList.A2_membersSelected],[XFormItem.prototype.hasRight,ZaDistributionList.REMOVE_DL_MEMBER_RIGHT]]},{type:_CELLSPACER_},{type:_DWT_BUTTON_,label:ZaMsg.DLXV_ButtonRemovePage,nowrap:true,cssStyle:"padding:0px;",visibilityChangeEventSources:[ZaDistributionList.A2_numMembers],visibilityChecks:[[XForm.checkInstanceValueNot,ZaDistributionList.A2_numMembers,0]],enableDisableChangeEventSources:[ZaDistributionList.A2_memberList],enableDisableChecks:[ZaDLXFormView.shouldEnableRemoveThisPageButton,[XFormItem.prototype.hasRight,ZaDistributionList.REMOVE_DL_MEMBER_RIGHT]],onActivate:"ZaDLXFormView.removeOnePageMembers.call(this,event)"}]}]}]},{type:_ZARIGHT_GROUPER_,numCols:1,width:v,label:ZaMsg.DLXV_GroupLabelAddMembers,items:[{type:_GROUP_,width:"100%",numCols:3,colSizes:["*","10px","104px"],items:[{type:_GROUP_,width:"100%",items:[{type:_TEXTFIELD_,cssClass:"admin_xform_name_input",ref:ZaSearch.A_query,label:ZaMsg.DLXV_LabelFind,labelLocation:_LEFT_,labelCssStyle:"white-space: nowrap;",visibilityChecks:[],enableDisableChecks:[],width:"100%",align:_LEFT_,elementChanged:function(O,N,M){var L=M.charCode;
if(L==13||L==3){ZaDLXFormView.srchButtonHndlr.call(this)
}else{this.getForm().itemChanged(this,O,M)
}}}]},{type:_CELLSPACER_},{type:_DWT_BUTTON_,label:ZaMsg.DLXV_ButtonSearch,onActivate:ZaDLXFormView.srchButtonHndlr}]},{type:_SPACER_,height:"5",colSpan:"*"},{type:_GROUP_,width:"100%",numCols:3,colSizes:["*","10px","104px"],items:[{type:_GROUP_,items:[{type:_OUTPUT_,ref:ZaDistributionList.A2_totalNumInPool,align:_LEFT_,visibilityChecks:[[ZaDLXFormView.checkTotalNumInPool,-1]],getDisplayValue:ZaDLXFormView.showSearchFoundNum,nowrap:false}]},{type:_CELLSPACER_},{type:_GROUP_,visibilityChangeEventSources:[ZaDistributionList.A2_poolNumPages],visibilityChecks:[[ZaDLXFormView.isMoreThanOnePage,ZaDistributionList.A2_poolNumPages]],numCols:3,colSizes:["32px","40px","32px"],items:[{type:_DWT_BUTTON_,label:null,labelLocation:_NONE_,id:"backButton",icon:"LeftArrow",disIcon:"LeftArrowDis",enableDisableChecks:[ZaDLXFormView.shouldEnablePoolBackButton],enableDisableChangeEventSources:[ZaDistributionList.A2_poolPagenum],onActivate:"ZaDLXFormView.backPoolButtonHndlr.call(this,event)"},{type:_OUTPUT_,ref:ZaDistributionList.A2_poolPagenum,align:_CENTER_,getDisplayValue:ZaDLXFormView.showSearchFoundPaging},{type:_DWT_BUTTON_,label:null,labelLocation:_NONE_,id:"fwdButton",icon:"RightArrow",disIcon:"RightArrowDis",enableDisableChecks:[ZaDLXFormView.shouldEnablePoolForwardButton],enableDisableChangeEventSources:[ZaDistributionList.A2_poolPagenum],onActivate:"ZaDLXFormView.fwdPoolButtonHndlr.call(this,event)"}]}]},{type:_SPACER_,height:"5"},{ref:ZaDistributionList.A2_memberPool,type:_DWT_LIST_,height:y,width:n,cssClass:"DLSource",forceUpdate:true,widgetClass:ZaAccMiniListView,headerList:o,hideHeader:false,onSelection:ZaDLXFormView.memberPoolSelectionListener},{type:_SPACER_,height:"5",colSpan:"*"},{type:_GROUP_,width:v,items:[{type:_GROUP_,width:"99%",numCols:3,colSizes:["45%","10%","45%"],items:[{type:_DWT_BUTTON_,label:ZaMsg.DLXV_ButtonAddSelected,nowrap:true,onActivate:"ZaDLXFormView.addSelectedAddressesToMembers.call(this,event)",enableDisableChangeEventSources:[ZaDistributionList.A2_memberPoolSelected],enableDisableChecks:[[XForm.checkInstanceValueNotEmty,ZaDistributionList.A2_memberPoolSelected],[XFormItem.prototype.hasRight,ZaDistributionList.ADD_DL_MEMBER_RIGHT]]},{type:_CELLSPACER_},{type:_DWT_BUTTON_,label:ZaMsg.DLXV_ButtonAddPage,nowrap:true,onActivate:"ZaDLXFormView.addOnePageAddressesToMembers.call(this,event)",visibilityChangeEventSources:[ZaDistributionList.A2_totalNumInPool],visibilityChecks:[[ZaDLXFormView.checkTotalNumInPool,1]],enableDisableChangeEventSources:[ZaDistributionList.A2_memberPool],enableDisableChecks:[[XForm.checkInstanceValueNotEmty,ZaDistributionList.A2_memberPool],[XFormItem.prototype.hasRight,ZaDistributionList.ADD_DL_MEMBER_RIGHT]]}]},{type:_SPACER_}]},{type:_SPACER_,height:"5"},{type:_OUTPUT_,value:ZaMsg.DLXV_GroupLabelEnterAddressBelow,visibilityChecks:[[XFormItem.prototype.hasRight,ZaDistributionList.ADD_DL_MEMBER_RIGHT]]},{type:_SPACER_,height:"5"},{ref:ZaDistributionList.A2_optionalAdd,type:_TEXTAREA_,width:v,height:98,bmolsnr:true,visibilityChecks:[[XFormItem.prototype.hasRight,ZaDistributionList.ADD_DL_MEMBER_RIGHT]],enableDisableChecks:[]},{type:_SPACER_,height:"5",visibilityChecks:[[XFormItem.prototype.hasRight,ZaDistributionList.ADD_DL_MEMBER_RIGHT]]},{type:_GROUP_,numCols:2,width:v,colSizes:[80,"auto"],visibilityChecks:[[XFormItem.prototype.hasRight,ZaDistributionList.ADD_DL_MEMBER_RIGHT]],items:[{type:_DWT_BUTTON_,label:ZaMsg.DLXV_ButtonAddFromFreeForm,width:"100%",onActivate:"ZaDLXFormView.addFreeFormAddressToMembers.call(this,event)",enableDisableChecks:[[XForm.checkInstanceValueNotEmty,ZaDistributionList.A2_optionalAdd]],enableDisableChangeEventSources:[ZaDistributionList.A2_optionalAdd]},{type:_OUTPUT_,value:ZaMsg.DLXV_SeparateAddresses,align:"right"}]}]},{type:_CELLSPACER_}]};
b.push(r);
if(H){var q={type:_ZATABCASE_,caseKey:H,id:"dl_form_properties",colSizes:[10,"auto"],colSpan:"*",paddingStyle:"padding-left:15px;",cellpadding:2,items:[{type:_ZA_TOP_GROUPER_,label:ZaMsg.DLXV_LabelProperties,id:"dl_properties",colSpan:"*",numCols:2,colSizes:[275,"*"],visibilityChangeEventSources:[],items:[{type:_INPUT_,ref:ZaDistributionList.A_memberOfURL,label:ZaMsg.LBL_Member_URL,labelLocation:_LEFT_,labelCssClass:"xform_label",width:"100%",visibilityChecks:[[ZaDLXFormView.isDynamicDL],[ZaDLXFormView.isNotACLGroup]]},{type:_OUTPUT_,ref:ZaDistributionList.A_memberOfURL,label:ZaMsg.LBL_Member_URL,labelLocation:_LEFT_,labelCssClass:"xform_label",visibilityChecks:[[ZaDLXFormView.isDynamicDL],[ZaDLXFormView.isACLGroup]]},{ref:ZaDistributionList.A2_dlType,type:_WIZ_CHECKBOX_,trueValue:ZaDistributionList.DYNAMIC_DL_TYPE,falseValue:ZaDistributionList.STATIC_DL_TYPE,label:ZaMsg.LBL_DL_Type,labelLocation:_LEFT_,labelCssClass:"xform_label",labelWrap:true,align:_LEFT_,nowrap:false,msgName:ZaMsg.LBL_DL_Type,subLabel:"",visibilityChecks:[ZaDLXFormView.hasListGroupRight],enableDisableChecks:false},{ref:ZaDistributionList.A_zimbraIsACLGroup,type:_WIZ_CHECKBOX_,trueValue:"TRUE",falseValue:"FALSE",label:ZaMsg.LBL_ACL_Group,labelLocation:_LEFT_,labelCssClass:"xform_label",align:_LEFT_,subLabel:"",visibilityChecks:[ZaDLXFormView.isDynamicDL],enableDisableChecks:false},{ref:ZaAccount.A_zimbraHideInGal,type:_CHECKBOX_,trueValue:"TRUE",falseValue:"FALSE",label:ZaMsg.LBL_zimbraHideInGal,labelLocation:_LEFT_,labelCssClass:"xform_label",labelWrap:true,align:_LEFT_,nowrap:false,msgName:ZaMsg.LBL_zimbraHideInGal,cssStyle:"padding-left:0px"},{ref:"zimbraMailStatus",type:_CHECKBOX_,trueValue:"enabled",falseValue:"disabled",align:_LEFT_,nowrap:false,labelWrap:true,label:ZaMsg.DLXV_LabelEnabled,msgName:ZaMsg.DLXV_LabelEnabled,labelLocation:_LEFT_,labelCssClass:"xform_label",cssStyle:"padding-left:0px"},{type:_GROUP_,numCols:2,label:ZaMsg.DLXV_SubscriptionRequest,labelLocation:_LEFT_,items:[{ref:ZaDistributionList.A_zimbraDistributionListSubscriptionPolicy,type:_RADIO_,groupname:"subscription_settings",msgName:ZaMsg.DLXV_SubscriptionPolicyAccept,label:ZaMsg.DLXV_SubscriptionPolicyAccept,onChange:ZaTabView.onFormFieldChanged,updateElement:function(){this.getElement().checked=(this.getInstanceValue(ZaDistributionList.A_zimbraDistributionListSubscriptionPolicy)==ZaDistributionList.A2_zimbraDLSubscriptionPolicyAccept)
},elementChanged:function(N,M,L){this.getForm().itemChanged(this,ZaDistributionList.A2_zimbraDLSubscriptionPolicyAccept,L)
}},{ref:ZaDistributionList.A_zimbraDistributionListSubscriptionPolicy,type:_RADIO_,groupname:"subscription_settings",msgName:ZaMsg.DLXV_SubscriptionPolicyApproval,label:ZaMsg.DLXV_SubscriptionPolicyApproval,onChange:ZaTabView.onFormFieldChanged,updateElement:function(){this.getElement().checked=(this.getInstanceValue(ZaDistributionList.A_zimbraDistributionListSubscriptionPolicy)==ZaDistributionList.A2_zimbraDLSubscriptionPolicyApproval)
},elementChanged:function(N,M,L){this.getForm().itemChanged(this,ZaDistributionList.A2_zimbraDLSubscriptionPolicyApproval,L)
}},{ref:ZaDistributionList.A_zimbraDistributionListSubscriptionPolicy,type:_RADIO_,groupname:"subscription_settings",msgName:ZaMsg.DLXV_SubscriptionPolicyReject,label:ZaMsg.DLXV_SubscriptionPolicyReject,onChange:ZaTabView.onFormFieldChanged,updateElement:function(){this.getElement().checked=(this.getInstanceValue(ZaDistributionList.A_zimbraDistributionListSubscriptionPolicy)==ZaDistributionList.A2_zimbraDLSubscriptionPolicyReject)
},elementChanged:function(N,M,L){this.getForm().itemChanged(this,ZaDistributionList.A2_zimbraDLSubscriptionPolicyReject,L)
}}]},{type:_GROUP_,numCols:2,label:ZaMsg.DLXV_UnsubscriptionRequest,labelLocation:_LEFT_,items:[{ref:ZaDistributionList.A_zimbraDistributionListUnsubscriptionPolicy,type:_RADIO_,groupname:"unsubscription_settings",msgName:ZaMsg.DLXV_SubscriptionPolicyAccept,label:ZaMsg.DLXV_SubscriptionPolicyAccept,onChange:ZaTabView.onFormFieldChanged,updateElement:function(){this.getElement().checked=(this.getInstanceValue(ZaDistributionList.A_zimbraDistributionListUnsubscriptionPolicy)==ZaDistributionList.A2_zimbraDLSubscriptionPolicyAccept)
},elementChanged:function(N,M,L){this.getForm().itemChanged(this,ZaDistributionList.A2_zimbraDLSubscriptionPolicyAccept,L)
}},{ref:ZaDistributionList.A_zimbraDistributionListUnsubscriptionPolicy,type:_RADIO_,groupname:"unsubscription_settings",msgName:ZaMsg.DLXV_SubscriptionPolicyApproval,label:ZaMsg.DLXV_SubscriptionPolicyApproval,onChange:ZaTabView.onFormFieldChanged,updateElement:function(){this.getElement().checked=(this.getInstanceValue(ZaDistributionList.A_zimbraDistributionListUnsubscriptionPolicy)==ZaDistributionList.A2_zimbraDLSubscriptionPolicyApproval)
},elementChanged:function(N,M,L){this.getForm().itemChanged(this,ZaDistributionList.A2_zimbraDLSubscriptionPolicyApproval,L)
}},{ref:ZaDistributionList.A_zimbraDistributionListUnsubscriptionPolicy,type:_RADIO_,groupname:"unsubscription_settings",msgName:ZaMsg.DLXV_SubscriptionPolicyReject,label:ZaMsg.DLXV_SubscriptionPolicyReject,onChange:ZaTabView.onFormFieldChanged,updateElement:function(){this.getElement().checked=(this.getInstanceValue(ZaDistributionList.A_zimbraDistributionListUnsubscriptionPolicy)==ZaDistributionList.A2_zimbraDLSubscriptionPolicyReject)
},elementChanged:function(N,M,L){this.getForm().itemChanged(this,ZaDistributionList.A2_zimbraDLSubscriptionPolicyReject,L)
}}]},{ref:ZaDistributionList.A_zimbraDistributionListSendShareMessageToNewMembers,type:_CHECKBOX_,trueValue:"TRUE",falseValue:"FALSE",align:_LEFT_,nowrap:false,labelWrap:true,label:ZaMsg.DL_zimbraDistributionListSendShareMessageToNewMembers,msgName:ZaMsg.DL_zimbraDistributionListSendShareMessageToNewMembers,labelLocation:_LEFT_,labelCssClass:"xform_label",cssStyle:"padding-left: 0px"},{ref:ZaAccount.A_notes,type:_TEXTAREA_,label:ZaMsg.DLXV_LabelNotes,labelLocation:_LEFT_,width:"98%",height:"100",labelCssStyle:"vertical-align: top",cssStyle:"margin-left:5px"}]}]};
b.push(q)
}if(G){var K="7";
if(AjxEnv.isIE){K="3"
}var m={type:_ZATABCASE_,numCols:2,colSpan:"*",caseKey:G,colSizes:["450px","420px"],items:[{type:_GROUP_,width:"98%",numCols:1,items:[{type:_SPACER_,height:"5"},{type:_ZALEFT_GROUPER_,numCols:1,label:ZaMsg.Account_DirectGroupLabel,containerCssStyle:"padding-top:5px",width:"100%",items:[{ref:ZaAccount.A2_directMemberList,type:_S_DWT_LIST_,width:"98%",height:200,cssClass:"DLSource",widgetClass:ZaAccountMemberOfListView,headerList:F,defaultColumnSortable:0,onSelection:ZaDLXFormView.directMemberSelectionListener,forceUpdate:true},{type:_SPACER_,height:"5"},{type:_GROUP_,width:"100%",numCols:8,colSizes:[65,10,65,55,75,10,65,10],items:[{type:_DWT_BUTTON_,label:ZaMsg.DLXV_ButtonRemoveAll,enableDisableChangeEventSources:[ZaDistributionList.A2_directMemberList],enableDisableChecks:[[XForm.checkInstanceValueNotEmty,ZaDistributionList.A2_directMemberList]],onActivate:"ZaAccountMemberOfListView.removeAllGroups.call(this,event, ZaAccount.A2_directMemberList)"},{type:_CELLSPACER_},{type:_DWT_BUTTON_,label:ZaMsg.DLXV_ButtonRemove,id:"removeButton",onActivate:"ZaAccountMemberOfListView.removeGroups.call(this,event, ZaAccount.A2_directMemberList)",enableDisableChangeEventSources:[ZaDistributionList.A2_directMemberSelected],enableDisableChecks:[[XForm.checkInstanceValueNotEmty,ZaDistributionList.A2_directMemberSelected]]},{type:_CELLSPACER_},{type:_DWT_BUTTON_,label:ZaMsg.Previous,id:"backButton",icon:"LeftArrow",disIcon:"LeftArrowDis",onActivate:"ZaAccountMemberOfListView.backButtonHndlr.call(this,event, ZaAccount.A2_directMemberList)",enableDisableChecks:[[ZaAccountMemberOfListView.shouldEnableBackButton,ZaAccount.A2_directMemberList]],enableDisableChangeEventSources:[ZaAccount.A2_directMemberList+"_offset"]},{type:_CELLSPACER_},{type:_DWT_BUTTON_,label:ZaMsg.Next,id:"fwdButton",icon:"RightArrow",disIcon:"RightArrowDis",onActivate:"ZaAccountMemberOfListView.fwdButtonHndlr.call(this,event, ZaAccount.A2_directMemberList)",enableDisableChangeEventSources:[ZaAccount.A2_directMemberList+"_more"],enableDisableChecks:[[ZaAccountMemberOfListView.shouldEnableForwardButton,ZaAccount.A2_directMemberList]]},{type:_CELLSPACER_}]}]},{type:_SPACER_,height:"10"},{type:_ZALEFT_GROUPER_,numCols:1,width:"100%",label:ZaMsg.Account_IndirectGroupLabel,containerCssStyle:"padding-top:5px",items:[{ref:ZaAccount.A2_indirectMemberList,type:_S_DWT_LIST_,width:"98%",height:200,cssClass:"DLSource",widgetClass:ZaAccountMemberOfListView,headerList:w,defaultColumnSortable:0,onSelection:ZaDLXFormView.indirectMemberSelectionListener,forceUpdate:true},{type:_SPACER_,height:"5"},{type:_GROUP_,width:"100%",numCols:8,colSizes:[65,10,65,55,75,10,65,10],items:[{type:_CELLSPACER_},{type:_CELLSPACER_},{type:_CELLSPACER_},{type:_CELLSPACER_},{type:_DWT_BUTTON_,label:ZaMsg.Previous,id:"indirectBackButton",icon:"LeftArrow",disIcon:"LeftArrowDis",onActivate:"ZaAccountMemberOfListView.backButtonHndlr.call(this,event, ZaAccount.A2_indirectMemberList)",enableDisableChecks:[[ZaAccountMemberOfListView.shouldEnableBackButton,ZaAccount.A2_indirectMemberList]],enableDisableChangeEventSources:[ZaAccount.A2_indirectMemberList+"_offset"]},{type:_CELLSPACER_},{type:_DWT_BUTTON_,label:ZaMsg.Next,id:"indirectFwdButton",icon:"RightArrow",disIcon:"RightArrowDis",onActivate:"ZaAccountMemberOfListView.fwdButtonHndlr.call(this,event, ZaAccount.A2_indirectMemberList)",enableDisableChecks:[[ZaAccountMemberOfListView.shouldEnableForwardButton,ZaAccount.A2_indirectMemberList]],enableDisableChangeEventSources:[ZaAccount.A2_indirectMemberList+"_more"]},{type:_CELLSPACER_}]}]}]},{type:_GROUP_,width:"98%",numCols:1,items:[{type:_SPACER_,height:"5"},{type:_ZARIGHT_GROUPER_,numCols:1,width:"100%",label:ZaMsg.Account_NonGroupLabel,containerCssStyle:"padding-top:5px",items:[{type:_GROUP_,numCols:3,width:"98%",items:[{ref:"query",type:_TEXTFIELD_,width:"100%",cssClass:"admin_xform_name_input",nowrap:false,labelWrap:true,label:ZaMsg.DLXV_LabelFind,labelCssStyle:"white-space: nowrap;",visibilityChecks:[],enableDisableChecks:[],elementChanged:function(O,N,M){var L=M.charCode;
if(L==13||L==3){ZaAccountMemberOfListView.prototype.srchButtonHndlr.call(this)
}else{this.getForm().itemChanged(this,O,M)
}}},{type:_DWT_BUTTON_,label:ZaMsg.DLXV_ButtonSearch,width:80,onActivate:ZaAccountMemberOfListView.prototype.srchButtonHndlr},{ref:ZaAccount.A2_showSameDomain,type:_CHECKBOX_,align:_RIGHT_,label:null,labelLocation:_NONE_,trueValue:"TRUE",falseValue:"FALSE",visibilityChecks:[]},{type:_OUTPUT_,value:ZaMsg.NAD_SearchSameDomain,colSpan:2}]},{type:_SPACER_,height:K},{ref:ZaAccount.A2_nonMemberList,type:_S_DWT_LIST_,width:"98%",height:440,cssClass:"DLSource",widgetClass:ZaAccountMemberOfListView,headerList:s,defaultColumnSortable:0,onSelection:ZaDLXFormView.nonmemberSelectionListener,forceUpdate:true},{type:_SPACER_,height:"5"},{type:_GROUP_,width:"100%",numCols:8,colSizes:[55,10,65,10,65,10,55,10],items:[{type:_DWT_BUTTON_,label:ZaMsg.DLXV_ButtonAddFromList,onActivate:"ZaAccountMemberOfListView.addGroups.call(this,event, ZaAccount.A2_nonMemberList)",enableDisableChangeEventSources:[ZaDistributionList.A2_nonmembersSelected],enableDisableChecks:[[XForm.checkInstanceValueNotEmty,ZaDistributionList.A2_nonmembersSelected]]},{type:_CELLSPACER_},{type:_DWT_BUTTON_,label:ZaMsg.DLXV_ButtonAddAll,onActivate:"ZaAccountMemberOfListView.addAllGroups.call(this,event, ZaAccount.A2_nonMemberList)",enableDisableChangeEventSources:[ZaAccount.A2_nonMemberList],enableDisableChecks:[[XForm.checkInstanceValueNotEmty,ZaAccount.A2_nonMemberList]]},{type:_CELLSPACER_},{type:_DWT_BUTTON_,label:ZaMsg.Previous,id:"backButton",icon:"LeftArrow",disIcon:"LeftArrowDis",enableDisableChangeEventSources:[ZaAccount.A2_nonMemberList+"_offset"],enableDisableChecks:[[ZaAccountMemberOfListView.shouldEnableBackButton,ZaAccount.A2_nonMemberList]],onActivate:"ZaAccountMemberOfListView.backButtonHndlr.call(this,event, ZaAccount.A2_nonMemberList)"},{type:_CELLSPACER_},{type:_DWT_BUTTON_,label:ZaMsg.Next,id:"fwdButton",icon:"RightArrow",disIcon:"RightArrowDis",enableDisableChangeEventSources:[ZaAccount.A2_nonMemberList+"_more"],enableDisableChecks:[[ZaAccountMemberOfListView.shouldEnableForwardButton,ZaAccount.A2_nonMemberList]],onActivate:"ZaAccountMemberOfListView.fwdButtonHndlr.call(this,event, ZaAccount.A2_nonMemberList)"},{type:_CELLSPACER_}]}]}]}]};
b.push(m)
}if(D){var x={type:_DWT_BUTTON_,label:ZaMsg.NAD_Add,width:"100px",onActivate:"ZaDLXFormView.addAliasButtonListener.call(this);"};
if(c.id){x.enableDisableChecks=[[XFormItem.prototype.hasRight,ZaDistributionList.ADD_DL_ALIAS_RIGHT]]
}else{x.enableDisableChecks=[[ZaItem.hasWritePermission,ZaAccount.A_zimbraMailAlias]]
}var e={type:_DWT_BUTTON_,label:ZaMsg.TBB_Edit,width:"100px",enableDisableChangeEventSources:[ZaDistributionList.A2_alias_selection_cache],onActivate:"ZaDLXFormView.editAliasButtonListener.call(this);",id:"editAliasButton"};
if(c.id){e.enableDisableChecks=[ZaDLXFormView.isEditAliasEnabled,[XFormItem.prototype.hasRight,ZaDistributionList.REMOVE_DL_ALIAS_RIGHT],[XFormItem.prototype.hasRight,ZaAccount.ADD_DL_ALIAS_RIGHT]]
}else{e.enableDisableChecks=[ZaDLXFormView.isEditAliasEnabled,[ZaItem.hasWritePermission,ZaAccount.A_zimbraMailAlias]]
}var t={type:_DWT_BUTTON_,label:ZaMsg.TBB_Delete,width:"100px",onActivate:"ZaDLXFormView.deleteAliasButtonListener.call(this);",id:"deleteAliasButton",enableDisableChangeEventSources:[ZaDistributionList.A2_alias_selection_cache]};
if(c.id){t.enableDisableChecks=[ZaDLXFormView.isDeleteAliasEnabled,[XFormItem.prototype.hasRight,ZaDistributionList.REMOVE_DL_ALIAS_RIGHT]]
}else{t.enableDisableChecks=[ZaDLXFormView.isDeleteAliasEnabled,[ZaItem.hasWritePermission,ZaAccount.A_zimbraMailAlias]]
}var l={type:_ZATABCASE_,width:"100%",numCols:1,colSizes:["auto"],caseKey:D,items:[{type:_SPACER_,height:"9"},{type:_GROUPER_,borderCssClass:"LeftGrouperBorder",width:"100%",numCols:1,colSizes:["auto"],label:ZaMsg.NAD_EditDLAliasesGroup,items:[{ref:ZaAccount.A_zimbraMailAlias,type:_DWT_LIST_,height:"200",width:"350px",getDisplayValue:AjxUtil.htmlEncode,forceUpdate:true,preserveSelection:false,multiselect:true,cssClass:"DLSource",headerList:null,onSelection:ZaDLXFormView.aliasSelectionListener},{type:_GROUP_,numCols:6,colSizes:["100px","10px","100px","10px","100px","auto"],cssStyle:"margin:10px;padding-bottom:0;",items:[t,{type:_CELLSPACER_},e,{type:_CELLSPACER_},x]}]}]};
b.push(l)
}if(C){var h={type:_DWT_BUTTON_,label:ZaMsg.NAD_Add,width:"100px",onActivate:"ZaDLXFormView.addOwnerButtonListener.call(this);"};
var f={type:_DWT_BUTTON_,label:ZaMsg.TBB_Edit,width:"100px",enableDisableChangeEventSources:[ZaDistributionList.A2_owners_selection_cache],enableDisableChecks:[ZaDLXFormView.isEditOwnerEnabled],onActivate:"ZaDLXFormView.editOwnerButtonListener.call(this);"};
var u={type:_DWT_BUTTON_,label:ZaMsg.TBB_Delete,width:"100px",onActivate:"ZaDLXFormView.deleteOwnerButtonListener.call(this);",enableDisableChangeEventSources:[ZaDistributionList.A2_owners_selection_cache],enableDisableChecks:[ZaDLXFormView.isDeleteOwnerEnabled]};
var k={type:_ZATABCASE_,width:"100%",numCols:1,colSizes:["auto"],caseKey:C,items:[{type:_SPACER_,height:"9"},{type:_GROUPER_,borderCssClass:"LeftGrouperBorder",width:"100%",numCols:1,colSizes:["auto"],label:ZaMsg.DLXV_GroupLabelDLOwners,items:[{ref:ZaDistributionList.A2_DLOwners,type:_DWT_LIST_,height:"200",width:"350px",getDisplayValue:AjxUtil.htmlEncode,forceUpdate:true,preserveSelection:false,multiselect:true,cssClass:"DLSource",headerList:null,onSelection:ZaDLXFormView.ownerSelectionListener},{type:_GROUP_,numCols:6,colSizes:["100px","10px","100px","10px","100px","auto"],cssStyle:"margin:10px;padding-bottom:0;",items:[u,{type:_CELLSPACER_},f,{type:_CELLSPACER_},h]}]}]};
b.push(k)
}if(B){var j={type:_ZATABCASE_,caseKey:B,colSpan:"*",paddingStyle:"padding-left:15px;",width:"98%",cellpadding:2,items:[{type:_ZA_TOP_GROUPER_,label:ZaMsg.NAD_MailOptionsReceiving,id:"dl_pref_replyto_group",colSpan:"*",numCols:2,colSizes:[275,"*"],visibilityChecks:[[ZATopGrouper_XFormItem.isGroupVisible,[ZaDistributionList.A_zimbraPrefReplyToEnabled,ZaDistributionList.A_zimbraPrefReplyToDisplay,ZaDistributionList.A_zimbraPrefReplyToAddress]]],visibilityChangeEventSources:[],items:[{ref:ZaDistributionList.A_zimbraPrefReplyToEnabled,type:_CHECKBOX_,visibilityChecks:[[ZaItem.hasReadPermission,ZaDistributionList.A_zimbraPrefReplyToEnabled]],label:ZaMsg.DLXV_ReplayToEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaDistributionList.A_zimbraPrefReplyToDisplay,type:_TEXTFIELD_,label:ZaMsg.DLXV_ReplayToAddrDisplay,labelLocation:_LEFT_,containerCssStyle:"padding-left:3px;",emptyText:ZaMsg.DLXV_ReplayToAddrEmptyText,visibilityChecks:[[ZaItem.hasReadPermission,ZaDistributionList.A_zimbraPrefReplyToDisplay]],enableDisableChecks:[[XForm.checkInstanceValue,ZaDistributionList.A_zimbraPrefReplyToEnabled,"TRUE"],[ZaItem.hasWritePermission,ZaDistributionList.A_zimbraPrefReplyToAddress]],enableDisableChangeEventSources:[ZaDistributionList.A_zimbraPrefReplyToEnabled],width:"15em"},{ref:ZaDistributionList.A_zimbraPrefReplyToAddress,type:_TEXTFIELD_,label:ZaMsg.DLXV_ReplayToAddr,labelLocation:_LEFT_,containerCssStyle:"padding-left:3px;",width:"24em",inputWidth:"32em",nowrap:false,labelWrap:true,visibilityChecks:[[ZaItem.hasReadPermission,ZaDistributionList.A_zimbraPrefReplyToAddress]],enableDisableChangeEventSources:[ZaDistributionList.A_zimbraPrefReplyToEnabled],enableDisableChecks:[[XForm.checkInstanceValue,ZaDistributionList.A_zimbraPrefReplyToEnabled,"TRUE"],[ZaItem.hasWritePermission,ZaDistributionList.A_zimbraPrefReplyToAddress]]}]}]};
b.push(j)
}var g=[{type:_AJX_IMAGE_,src:"Group_32",label:null,rowSpan:3},{type:_OUTPUT_,ref:"name",label:null,cssClass:"AdminTitle",height:"auto",width:350,rowSpan:3,cssStyle:"word-wrap:break-word;overflow:hidden",getDisplayValue:AjxUtil.htmlEncode}];
if(ZaItem.hasReadPermission(ZaItem.A_zimbraId,c)){g.push({type:_OUTPUT_,ref:ZaItem.A_zimbraId,label:ZaMsg.NAD_ZimbraID})
}if(ZaItem.hasReadPermission(ZaItem.A_zimbraCreateTimestamp,c)){g.push({type:_OUTPUT_,ref:ZaItem.A_zimbraCreateTimestamp,label:ZaMsg.LBL_zimbraCreateTimestamp,labelLocation:_LEFT_,getDisplayValue:function(){var L=ZaItem.formatServerTime(this.getInstanceValue());
if(!L){return ZaMsg.Server_Time_NA
}else{return L
}}})
}if(ZaItem.hasReadPermission(ZaDistributionList.A_mailStatus,c)){g.push({type:_OUTPUT_,ref:ZaDistributionList.A_mailStatus,label:ZaMsg.NAD_ResourceStatus,choices:this.dlStatusChoices})
}A.items=[{type:_GROUP_,cssClass:"ZmSelectedHeaderBg",colSpan:"*",id:"xform_header",items:[{type:_GROUP_,numCols:4,colSizes:["32px","*","80px","*"],items:g}]},{type:_TAB_BAR_,choices:this.tabChoices,cssStyle:"display:none;",ref:ZaModel.currentTab,colSpan:"*",cssClass:"ZaTabBar",id:"xform_tabbar"},{type:_SWITCH_,items:b}]
};
ZaTabView.XFormModifiers.ZaDLXFormView.push(ZaDLXFormView.myXFormModifier);
ZaDLXFormView.prototype.getTabChoices=function(){return this.tabChoices
};
ZaDLXFormView.isMoreThanOnePage=function(d){var c=this.getForm();
var b=c.getInstanceValue(d)||0;
return b>1
};
ZaDLXFormView.showSearchFoundNum=function(b){if(AjxUtil.isEmpty(b)){return
}return AjxMessageFormat.format(ZaMsg.DLXV_MsgSearchFound,[b])
};
ZaDLXFormView.showSearchFoundPaging=function(d){var c=d||1;
var b=this.getForm().getInstanceValue(ZaDistributionList.A2_poolNumPages)||1;
return c+"/"+b
};
ZaDLXFormView.showMembersNum=function(b){if(b==null){return ZaMsg.splashScreenLoading
}if(b<0){b=0
}return AjxMessageFormat.format(ZaMsg.DLXV_MsgMemberNum,[b])
};
ZaDLXFormView.showMembersPaging=function(d){var c=d||1;
var b=this.getForm().getInstanceValue(ZaDistributionList.A2_memNumPages)||1;
return c+"/"+b
};
ZaDLXFormView.checkTotalNumInPool=function(c){if(AjxUtil.isEmpty(c)){c=0
}var b=this.getForm().getInstanceValue(ZaDistributionList.A2_totalNumInPool);
if(b==null){b=-1
}return b>c
};
ZaDLXFormView.prototype.updateMemberList=function(e){if(AjxUtil.isEmpty(e)){return
}var c=this.getMyForm();
if(c){var b=c.getInstance()||{};
b[ZaDistributionList.A2_allMemberHash]=e[ZaDistributionList.A2_allMemberHash]||{};
b[ZaDistributionList.A2_numMembers]=e[ZaDistributionList.A2_numMembers]||0;
var d=e[ZaDistributionList.A2_allMemberPages]||[];
b[ZaDistributionList.A2_allMemberPages]=d;
var f=(d&&d.length)?d[0]:[];
f._version=1;
b[ZaDistributionList.A2_memberList]=e[ZaDistributionList.A2_memberList]=f;
b[ZaDistributionList.A2_memPagenum]=1;
b[ZaDistributionList.A2_memNumPages]=e[ZaDistributionList.A2_memNumPages]||1;
b[ZaAccount.A2_memberOf]=ZaAccountMemberOfListView.cloneMemberOf(e);
b[ZaAccount.A2_directMemberList+"_more"]=e[ZaAccount.A2_directMemberList+"_more"];
b[ZaAccount.A2_directMemberList+"_offset"]=e[ZaAccount.A2_directMemberList+"_offset"];
b[ZaAccount.A2_indirectMemberList+"_more"]=e[ZaAccount.A2_indirectMemberList+"_more"];
b[ZaAccount.A2_indirectMemberList+"_offset"]=e[ZaAccount.A2_indirectMemberList+"_offset"];
b[ZaAccount.A2_nonMemberList+"_more"]=e[ZaAccount.A2_nonMemberList+"_more"];
b[ZaAccount.A2_nonMemberList+"_offset"]=e[ZaAccount.A2_nonMemberList+"_offset"];
if(e[ZaDistributionList.A2_DLOwners]){b[ZaDistributionList.A2_DLOwners]=ZaItem.deepCloneListItem(e[ZaDistributionList.A2_DLOwners])
}if(e[ZaDistributionList.A2_dlType]){b[ZaDistributionList.A2_dlType]=e[ZaDistributionList.A2_dlType]
}if(b.id!=e.id){b.id=e.id
}ZaDLXFormView._copyAttrFromEntry(c,b,e);
c.setInstance(b)
}};
ZaDLXFormView.hasListGroupRight=function(){return ZaZimbraAdmin.haveTargetRight(ZaItem.GROUP,ZaDomain.RIGHT_LIST_GROUP,ZaAccount.getDomain(this.getInstance().getName()))
}
}if(AjxPackage.define("zimbraAdmin.dl.view.ZaNewDLXWizard")){ZaNewDLXWizard=function(d,e){var b,c;
if(AjxEnv.isWebKitBased||AjxEnv.isFirefox){c="740px";
b="465px"
}else{c="720px";
b="455px"
}ZaXWizardDialog.call(this,d,null,ZaMsg.DLTBB_New_tt,c,b,"ZaNewDLXWizard",null,ZaId.DLG_NEW_DL);
this.dlStatusChoices=[{value:"enabled",label:ZaMsg.DL_Status_enabled},{value:"disabled",label:ZaMsg.DL_Status_disabled}];
this.initForm(ZaDistributionList.myXModel,this.getMyXForm(e));
this._localXForm.addListener(DwtEvent.XFORMS_VALUE_CHANGED,new AjxListener(this,ZaNewDLXWizard.prototype.handleXFormChange));
this._localXForm.addListener(DwtEvent.XFORMS_VALUE_ERROR,new AjxListener(this,ZaNewDLXWizard.prototype.handleXFormChange))
};
ZaNewDLXWizard.prototype=new ZaXWizardDialog;
ZaNewDLXWizard.prototype.constructor=ZaNewDLXWizard;
ZaNewDLXWizard.prototype.toString=function(){return"ZaNewDLXWizard"
};
ZaXDialog.XFormModifiers.ZaNewDLXWizard=new Array();
ZaNewDLXWizard.helpURL=location.pathname+ZaUtil.HELP_URL+"managing_accounts/create_an_account.htm?locid="+AjxEnv.DEFAULT_LOCALE;
ZaNewDLXWizard.prototype.getTitle=function(){return ZaMsg.DLTBB_New_tt
};
ZaNewDLXWizard.prototype.getTabIcon=function(){if(this._containedObject&&this._containedObject.attrs&&this._containedObject.attrs[ZaDistributionList.A_isAdminGroup]=="TRUE"){return"DistributionListGroup"
}else{return"DistributionList"
}};
ZaNewDLXWizard.prototype.handleXFormChange=function(b){if(b&&this._localXForm.hasErrors()){this._button[DwtWizardDialog.NEXT_BUTTON].setEnabled(false);
this._button[DwtWizardDialog.FINISH_BUTTON].setEnabled(false)
}else{if(this._containedObject[ZaAccount.A_name]&&this._containedObject[ZaAccount.A_name].indexOf("@")>0){this._button[DwtWizardDialog.FINISH_BUTTON].setEnabled(true);
if(this._containedObject[ZaModel.currentStep]!=this._lastStep){this._button[DwtWizardDialog.NEXT_BUTTON].setEnabled(true)
}if(this._containedObject[ZaModel.currentStep]!=1){this._button[DwtWizardDialog.PREV_BUTTON].setEnabled(true)
}}}};
ZaNewDLXWizard.prototype.popup=function(b){ZaXWizardDialog.prototype.popup.call(this,b);
this._button[DwtWizardDialog.NEXT_BUTTON].setEnabled(false);
this._button[DwtWizardDialog.FINISH_BUTTON].setEnabled(false);
this._button[DwtWizardDialog.PREV_BUTTON].setEnabled(false)
};
ZaNewDLXWizard.prototype.createDomainAndAccount=function(c){try{var e=new ZaDomain();
e.name=c;
e.attrs[ZaDomain.A_domainName]=c;
var d=ZaItem.create(e,ZaDomain,"ZaDomain");
if(d!=null){ZaApp.getInstance().getCurrentController().closeCnfrmDelDlg();
this.finishWizard()
}}catch(b){ZaApp.getInstance().getCurrentController()._handleException(b,"ZaNewDLXWizard.prototype.createDomainAndAccount",null,false)
}};
ZaNewDLXWizard.prototype.finishWizard=function(){try{if(!ZaDistributionList.checkValues(this._containedObject)){return false
}var b=ZaItem.create(this._containedObject,ZaDistributionList,"ZaDistributionList");
if(b!=null){ZaApp.getInstance().getDistributionListController().fireCreationEvent(this._containedObject);
this.popdown();
ZaApp.getInstance().getAppCtxt().getAppController().setActionStatusMsg(AjxMessageFormat.format(ZaMsg.DLCreated,[b.name]))
}}catch(c){switch(c.code){case ZmCsfeException.ACCT_EXISTS:ZaApp.getInstance().getCurrentController().popupErrorDialog(ZaMsg.ERROR_ACCOUNT_EXISTS);
break;
case ZmCsfeException.ACCT_INVALID_PASSWORD:ZaApp.getInstance().getCurrentController().popupErrorDialog(ZaMsg.ERROR_PASSWORD_INVALID,c);
ZaApp.getInstance().getAppCtxt().getErrorDialog().showDetail(true);
break;
case ZmCsfeException.NO_SUCH_COS:ZaApp.getInstance().getCurrentController().popupErrorDialog(AjxMessageFormat.format(ZaMsg.ERROR_NO_SUCH_COS,[this._containedObject.attrs[ZaAccount.A_COSId]]),c);
break;
case ZmCsfeException.NO_SUCH_DOMAIN:ZaApp.getInstance().dialogs.confirmMessageDialog2.setMessage(AjxMessageFormat.format(ZaMsg.CreateDomain_q,[ZaAccount.getDomain(this._containedObject.name)]),DwtMessageDialog.WARNING_STYLE);
ZaApp.getInstance().dialogs.confirmMessageDialog2.registerCallback(DwtDialog.YES_BUTTON,this.createDomainAndAccount,this,[ZaAccount.getDomain(this._containedObject.name)]);
ZaApp.getInstance().dialogs.confirmMessageDialog2.registerCallback(DwtDialog.NO_BUTTON,ZaController.prototype.closeCnfrmDelDlg,ZaApp.getInstance().getCurrentController(),null);
ZaApp.getInstance().dialogs.confirmMessageDialog2.popup();
break;
default:ZaApp.getInstance().getCurrentController()._handleException(c,"ZaNewDLXWizard.prototype.finishWizard",null,false);
break
}}};
ZaNewDLXWizard.prototype.goNext=function(){if(this._containedObject[ZaModel.currentStep]==1){if(ZaSearch.isAccountExist.call(this,{name:this._containedObject[ZaAccount.A_name],popupError:true})){return false
}this._button[DwtWizardDialog.PREV_BUTTON].setEnabled(true)
}this.goPage(this._containedObject[ZaModel.currentStep]+1);
if(this._containedObject[ZaModel.currentStep]==this._lastStep){this._button[DwtWizardDialog.NEXT_BUTTON].setEnabled(false)
}};
ZaNewDLXWizard.prototype.goPrev=function(){if(this._containedObject[ZaModel.currentStep]==2){this._button[DwtWizardDialog.PREV_BUTTON].setEnabled(false)
}else{if(this._containedObject[ZaModel.currentStep]==this._lastStep){this._button[DwtWizardDialog.NEXT_BUTTON].setEnabled(true)
}}this.goPage(this._containedObject[ZaModel.currentStep]-1)
};
ZaNewDLXWizard.nonmemberSelectionListener=function(c){var b=this.widget.getSelection();
if(b&&b.length){b.sort();
this.getModel().setInstanceValue(this.getInstance(),ZaDistributionList.A2_nonmembersSelected,b)
}else{this.getModel().setInstanceValue(this.getInstance(),ZaDistributionList.A2_nonmembersSelected,null)
}if(c.detail==DwtListView.ITEM_DBL_CLICKED){ZaAccountMemberOfListView._addSelectedLists(this.getForm(),b)
}};
ZaNewDLXWizard.directMemberSelectionListener=function(c){var b=this.widget.getSelection();
if(b&&b.length){b.sort();
this.getModel().setInstanceValue(this.getInstance(),ZaDistributionList.A2_directMemberSelected,b)
}else{this.getModel().setInstanceValue(this.getInstance(),ZaDistributionList.A2_directMemberSelected,null)
}if(c.detail==DwtListView.ITEM_DBL_CLICKED){ZaAccountMemberOfListView._removeSelectedLists(this.getForm(),b)
}};
ZaNewDLXWizard.indirectMemberSelectionListener=function(c){var b=this.widget.getSelection();
if(b&&b.length){b.sort();
this.getModel().setInstanceValue(this.getInstance(),ZaDistributionList.A2_indirectMemberSelected,b)
}else{this.getModel().setInstanceValue(this.getInstance(),ZaDistributionList.A2_indirectMemberSelected,null)
}};
ZaNewDLXWizard.removeAllMembers=function(b){var c=this.getForm();
var g=c.getModel().getInstanceValue(c.getInstance(),ZaDistributionList.A2_removeList);
var k=c.getModel().getInstanceValue(c.getInstance(),ZaDistributionList.A2_memberList);
var d=c.getModel().getInstanceValue(c.getInstance(),ZaDistributionList.A2_addList);
var j=[];
for(var h=0;
h<k.length;
h++){var f=k[h];
if(!d||d.length==0||AjxUtil.indexOf(d,f,false)<0){j.push(f)
}}var e=AjxUtil.mergeArrays(g,j);
e._version=g._version+1;
this.setInstanceValue([],ZaDistributionList.A2_addList);
this.setInstanceValue([],ZaDistributionList.A2_memberList);
this.setInstanceValue(e,ZaDistributionList.A2_removeList);
this.getForm().parent.setDirty(true)
};
ZaNewDLXWizard.removeMembers=function(c){var d=this.getForm();
var o=d.getModel().getInstanceValue(d.getInstance(),ZaDistributionList.A2_memberList);
var e=d.getModel().getInstanceValue(d.getInstance(),ZaDistributionList.A2_addList);
var b=d.getModel().getInstanceValue(d.getInstance(),ZaDistributionList.A2_membersSelected);
var k=d.getModel().getInstanceValue(d.getInstance(),ZaDistributionList.A2_removeList);
var m=d.getModel().getInstanceValue(d.getInstance(),ZaDistributionList.A2_origList);
var n=AjxUtil.arraySubtract(o,d.getModel().getInstanceValue(d.getInstance(),ZaDistributionList.A2_membersSelected));
n._version=o._version+1;
this.setInstanceValue(n,ZaDistributionList.A2_memberList);
var l=AjxUtil.arraySubtract(e,d.getModel().getInstanceValue(d.getInstance(),ZaDistributionList.A2_membersSelected));
l._version=e._version+1;
this.setInstanceValue(l,ZaDistributionList.A2_addList);
var j=[];
for(var h=0;
h<b.length;
h++){var g=b[h];
if(!e||e.length==0||AjxUtil.indexOf(e,g,false)<0){if(m&&m.length>0&&AjxUtil.indexOf(m,g,false)>=0){j.push(g)
}}}var f=AjxUtil.mergeArrays(k,j);
f._version=k._version+1;
this.setInstanceValue(f,ZaDistributionList.A2_removeList);
this.getForm().parent.setDirty(true)
};
ZaNewDLXWizard.getMemberSelection=function(){var b=this.getItemsById(ZaDistributionList.A2_members)[0];
var c=null;
if(b){var c=b.getSelection()
}if(c){return c
}else{return[]
}};
ZaNewDLXWizard.shouldEnableMemberListButtons=function(){return(ZaNewDLXWizard.getMemberSelection.call(this).length>0)
};
ZaNewDLXWizard.shouldEnableRemoveAllButton=function(){return(!AjxUtil.isEmpty(this.getInstanceValue(ZaDistributionList.A2_memberList)))
};
ZaNewDLXWizard.shouldEnableAddAllButton=function(){var b=this.getItemsById("memberPool")[0].widget.getList();
if(b!=null){return(b.size()>0)
}return false
};
ZaNewDLXWizard.getMemberPoolSelection=function(){var b=this.getItemsById("memberPool")[0];
var c=null;
if(b){var c=b.getSelection()
}if(c){return c
}else{return[]
}};
ZaNewDLXWizard.shouldEnableMemberPoolListButtons=function(){return(ZaNewDLXWizard.getMemberPoolSelection.call(this).length>0)
};
ZaNewDLXWizard.shouldEnableFreeFormButtons=function(){var b=this.getInstance().optionalAdd;
return(b&&b.length>0)
};
ZaNewDLXWizard.addAddressesToMembers=function(h){var g=this.getForm();
var c=g.getModel().getInstanceValue(g.getInstance(),ZaDistributionList.A2_memberPoolSelected);
var b=[];
for(var f=0;
f<c.length;
f++){var j=c[f];
if(j.name!=g.getInstance().name){b.push(j)
}}var e=AjxUtil.mergeArrays(g.getModel().getInstanceValue(g.getInstance(),ZaDistributionList.A2_addList),b,ZaDistributionList.compareTwoMembers);
e._version=g.getModel().getInstanceValue(g.getInstance(),ZaDistributionList.A2_addList)._version+1;
var d=AjxUtil.mergeArrays(g.getModel().getInstanceValue(g.getInstance(),ZaDistributionList.A2_memberList),b,ZaDistributionList.compareTwoMembers);
d._version=g.getModel().getInstanceValue(g.getInstance(),ZaDistributionList.A2_memberList)._version+1;
this.setInstanceValue(e,ZaDistributionList.A2_addList);
this.setInstanceValue(d,ZaDistributionList.A2_memberList);
this.getForm().parent.setDirty(true)
};
ZaNewDLXWizard.addAllAddressesToMembers=function(h){var g=this.getForm();
var c=g.getModel().getInstanceValue(g.getInstance(),ZaDistributionList.A2_memberPool);
var b=[];
for(var f=0;
f<c.length;
f++){var j=c[f];
if(j.name!=g.getInstance().name){b.push(j)
}}var e=AjxUtil.mergeArrays(g.getModel().getInstanceValue(g.getInstance(),ZaDistributionList.A2_addList),b,ZaDistributionList.compareTwoMembers);
e._version=g.getModel().getInstanceValue(g.getInstance(),ZaDistributionList.A2_addList)._version+1;
var d=AjxUtil.mergeArrays(g.getModel().getInstanceValue(g.getInstance(),ZaDistributionList.A2_memberList),b,ZaDistributionList.compareTwoMembers);
d._version=g.getModel().getInstanceValue(g.getInstance(),ZaDistributionList.A2_memberList)._version+1;
this.setInstanceValue(e,ZaDistributionList.A2_addList);
this.setInstanceValue(d,ZaDistributionList.A2_memberList);
this.getForm().parent.setDirty(true)
};
ZaNewDLXWizard.prototype.setObject=function(e){this._containedObject=new ZaDistributionList();
this._containedObject.attrs=new Object();
this._containedObject[ZaDistributionList.A2_memberList]=new Array();
this._containedObject[ZaDistributionList.A2_memberList]._version=1;
if(e._uuid){this._containedObject._uuid=e._uuid
}if(e[ZaDistributionList.A2_memberList]){var f;
f=e[ZaDistributionList.A2_memberList];
for(var d=0;
d<f.length;
++d){this._containedObject[ZaDistributionList.A2_memberList].push(f[d])
}}for(var b in e.attrs){var c=this._localXForm.getModel().getItem(b);
if((c!=null&&c.type==_LIST_)||(e.attrs[b]!=null&&e.attrs[b] instanceof Array)){this._containedObject.attrs[b]=ZaItem.deepCloneListItem(e.attrs[b])
}else{this._containedObject.attrs[b]=e.attrs[b]
}}this._containedObject[ZaDistributionList.A2_addList]=e[ZaDistributionList.A2_addList]||new Array();
this._containedObject[ZaDistributionList.A2_addList]._version=1;
this._containedObject[ZaDistributionList.A2_removeList]=e[ZaDistributionList.A2_removeList]||new Array();
this._containedObject[ZaDistributionList.A2_removeList]._version=1;
this._containedObject[ZaDistributionList.A2_poolPagenum]=e[ZaDistributionList.A2_poolPagenum]||1;
this._containedObject[ZaDistributionList.A2_poolNumPages]=e[ZaDistributionList.A2_poolNumPages];
this._containedObject[ZaDistributionList.A2_memPagenum]=e[ZaDistributionList.A2_memPagenum]||1;
this._containedObject[ZaDistributionList.A2_memNumPages]=e[ZaDistributionList.A2_memNumPages];
this._containedObject[ZaDistributionList.A2_query]=e[ZaDistributionList.A2_query]||"";
this._containedObject[ZaAccount.A2_memberOf]=ZaAccountMemberOfListView.cloneMemberOf(e);
this._containedObject[ZaDistributionList.A2_origList]=e[ZaDistributionList.A2_origList];
this._containedObject[ZaAccount.A2_directMemberList+"_more"]=e[ZaAccount.A2_directMemberList+"_more"];
this._containedObject[ZaAccount.A2_directMemberList+"_offset"]=e[ZaAccount.A2_directMemberList+"_offset"];
this._containedObject[ZaAccount.A2_indirectMemberList+"_more"]=e[ZaAccount.A2_indirectMemberList+"_more"];
this._containedObject[ZaAccount.A2_indirectMemberList+"_offset"]=e[ZaAccount.A2_indirectMemberList+"_offset"];
this._containedObject[ZaAccount.A2_nonMemberList+"_more"]=e[ZaAccount.A2_nonMemberList+"_more"];
this._containedObject[ZaAccount.A2_nonMemberList+"_offset"]=e[ZaAccount.A2_nonMemberList+"_offset"];
this._containedObject[ZaModel.currentStep]=e[ZaModel.currentStep]||1;
this._containedObject[ZaDistributionList.A2_allMemberHash]=new Array();
this._containedObject[ZaDistributionList.A2_allMemberPages]=new Array();
if(e.rights){this._containedObject.rights=e.rights
}if(e.setAttrs){this._containedObject.setAttrs=e.setAttrs
}if(e.getAttrs){this._containedObject.getAttrs=e.getAttrs
}if(e._defaultValues){this._containedObject._defaultValues=e._defaultValues
}this._containedObject[ZaDistributionList.A2_DLOwners]=new Array();
if(e[ZaDistributionList.A2_DLOwners]){this._containedObject[ZaDistributionList.A2_DLOwners]=ZaItem.deepCloneListItem(e[ZaDistributionList.A2_DLOwners])
}this._containedObject.name=e.name;
if(e.name==""){this._containedObject.name=ZaMsg.TBB_New
}this._containedObject.type=e.type;
this._containedObject.id=e.id;
if(e[ZaDistributionList.A2_dlType]===ZaDistributionList.STATIC_DL_TYPE){this._containedObject[ZaAccount.A2_autoMailServer]=e[ZaAccount.A2_autoMailServer]
}if(e[ZaDistributionList.A2_dlType]){this._containedObject[ZaDistributionList.A2_dlType]=e[ZaDistributionList.A2_dlType]
}if(!e.id){if(ZaItem.hasWritePermission(ZaAccount.A_zimbraIsDelegatedAdminAccount,e)){this._containedObject.attrs[ZaDistributionList.A_mailStatus]="enabled"
}}this._localXForm.setInstance(this._containedObject)
};
ZaNewDLXWizard.prototype.srchResWithoutSelf=function(f,b){var d=new Array();
var c=f.getArray();
for(var e=0;
e<c.length;
e++){if(c[e].type==ZaItem.DL&&c[e]==b){continue
}else{if(c[e].type==ZaItem.ALIAS&&c[e].getAliasTargetObj()==b){continue
}else{d.push(c[e])
}}}return d
};
ZaNewDLXWizard.prototype.searchAccounts=function(f,g){try{f=(f!=null)?f:ZaAccount.A_name;
var d=[ZaSearch.ACCOUNTS,ZaSearch.DLS,ZaSearch.ALIASES];
var e=new ZaSearchQuery(ZaSearch.getSearchByNameQuery(this._containedObject.query,d,true),d,false,"",null,10);
var b=ZaSearch.searchByQueryHolder(e,this._containedObject.poolPagenum,f,g);
if(b.list){this._containedObject.memberPool=this.srchResWithoutSelf(b.list,this._containedObject[ZaAccount.A_name])
}this._containedObject.poolNumPages=b.numPages;
this._localXForm.setInstance(this._containedObject)
}catch(c){if(c.code!=ZmCsfeException.MAIL_QUERY_PARSE_ERROR){ZaApp.getInstance().getCurrentController()._handleException(c,"ZaNewDLXWizard.prototype.searchAccounts",null,false)
}else{this.popupErrorDialog(ZaMsg.queryParseError,c);
this._searchField.setEnabled(true)
}}};
ZaNewDLXWizard.aliasSelectionListener=function(c){var b=this.widget.getSelection();
if(b&&b.length){b.sort();
this.getModel().setInstanceValue(this.getInstance(),ZaDistributionList.A2_alias_selection_cache,b)
}else{this.getModel().setInstanceValue(this.getInstance(),ZaDistributionList.A2_alias_selection_cache,null)
}if(c.detail==DwtListView.ITEM_DBL_CLICKED){ZaNewDLXWizard.editAliasButtonListener.call(this)
}};
ZaNewDLXWizard.deleteAliasButtonListener=function(){var b=this.getInstance();
if(b[ZaDistributionList.A2_alias_selection_cache]!=null){var f=b[ZaDistributionList.A2_alias_selection_cache].length;
if(f&&b.attrs[ZaAccount.A_zimbraMailAlias]){var d=b.attrs[ZaAccount.A_zimbraMailAlias];
for(var e=0;
e<f;
e++){var g=d.length-1;
for(var c=g;
c>=0;
c--){if(d[c]==b[ZaDistributionList.A2_alias_selection_cache][e]){d.splice(c,1);
break
}}}this.getModel().setInstanceValue(b,ZaAccount.A_zimbraMailAlias,d)
}}this.getModel().setInstanceValue(b,ZaDistributionList.A2_alias_selection_cache,[]);
this.getForm().parent.setDirty(true)
};
ZaNewDLXWizard.editAliasButtonListener=function(){var b=this.getInstance();
if(b.alias_selection_cache&&b.alias_selection_cache[0]){var f=this.getForm().parent;
if(!f.editAliasDlg){f.editAliasDlg=new ZaEditAliasXDialog(ZaApp.getInstance().getAppCtxt().getShell(),"550px","150px",ZaMsg.Edit_Alias_Title);
f.editAliasDlg.registerCallback(DwtDialog.OK_BUTTON,ZaNewDLXWizard.updateAlias,this.getForm(),null)
}var e={};
e[ZaAccount.A_name]=b[ZaDistributionList.A2_alias_selection_cache][0];
var d=b.attrs[ZaAccount.A_zimbraMailAlias].length;
for(var c=0;
c<d;
c++){if(b[ZaDistributionList.A2_alias_selection_cache][0]==b.attrs[ZaAccount.A_zimbraMailAlias][c]){e[ZaAlias.A_index]=c;
break
}}f.editAliasDlg.setObject(e);
f.editAliasDlg.popup()
}};
ZaNewDLXWizard.updateAlias=function(){if(this.parent.editAliasDlg){this.parent.editAliasDlg.popdown();
var d=this.parent.editAliasDlg.getObject();
var c=this.getInstance();
var b=c.attrs[ZaAccount.A_zimbraMailAlias];
if(d[ZaAlias.A_index]>=0&&b[d[ZaAlias.A_index]]!=d[ZaAccount.A_name]){b[d[ZaAlias.A_index]]=d[ZaAccount.A_name];
this.getModel().setInstanceValue(this.getInstance(),ZaAccount.A_zimbraMailAlias,b);
this.getModel().setInstanceValue(this.getInstance(),ZaDistributionList.A2_alias_selection_cache,new Array());
this.parent.setDirty(true)
}}};
ZaNewDLXWizard.addAliasButtonListener=function(){var b=this.getInstance();
var d=this.getForm().parent;
if(!d.addAliasDlg){d.addAliasDlg=new ZaEditAliasXDialog(ZaApp.getInstance().getAppCtxt().getShell(),"550px","150px",ZaMsg.Add_Alias_Title);
d.addAliasDlg.registerCallback(DwtDialog.OK_BUTTON,ZaNewDLXWizard.addAlias,this.getForm(),null)
}var c={};
c[ZaAccount.A_name]="";
c[ZaAlias.A_index]=-1;
d.addAliasDlg.setObject(c);
d.addAliasDlg.popup()
};
ZaNewDLXWizard.addAlias=function(){if(this.parent.addAliasDlg){this.parent.addAliasDlg.popdown();
var d=this.parent.addAliasDlg.getObject();
if(d[ZaAccount.A_name]&&d[ZaAccount.A_name].length>1){var c=this.getInstance();
var b=c.attrs[ZaAccount.A_zimbraMailAlias];
b.push(d[ZaAccount.A_name]);
this.getModel().setInstanceValue(this.getInstance(),ZaAccount.A_zimbraMailAlias,b);
this.getModel().setInstanceValue(this.getInstance(),ZaDistributionList.A2_alias_selection_cache,new Array());
this.parent.setDirty(true)
}}};
ZaNewDLXWizard.isEditAliasEnabled=function(){return(!AjxUtil.isEmpty(this.getInstanceValue(ZaDistributionList.A2_alias_selection_cache))&&this.getInstanceValue(ZaAccount.A2_alias_selection_cache).length==1)
};
ZaNewDLXWizard.isDeleteAliasEnabled=function(){return(!AjxUtil.isEmpty(this.getInstanceValue(ZaDistributionList.A2_alias_selection_cache)))
};
ZaNewDLXWizard.NOTES_TAB_ATTRS=[ZaAccount.A_notes];
ZaNewDLXWizard.NOTES_TAB_RIGHTS=[];
ZaNewDLXWizard.MEMBEROF_TAB_ATTRS=[];
ZaNewDLXWizard.MEMBEROF_TAB_RIGHTS=[ZaDistributionList.GET_DL_MEMBERSHIP_RIGHT];
ZaNewDLXWizard.ALIASES_TAB_ATTRS=[ZaAccount.A_zimbraMailAlias];
ZaNewDLXWizard.ALIASES_TAB_RIGHTS=[ZaDistributionList.ADD_DL_ALIAS_RIGHT,ZaDistributionList.REMOVE_DL_ALIAS_RIGHT];
ZaNewDLXWizard.OWNER_TAB_ATTRS=[];
ZaNewDLXWizard.OWNER_TAB_RIGHTS=[];
ZaNewDLXWizard.PREF_TAB_ATTRS=[ZaDistributionList.A_zimbraPrefReplyToEnabled,ZaDistributionList.A_zimbraPrefReplyToDisplay,ZaDistributionList.A_zimbraPrefReplyToAddress];
ZaNewDLXWizard.PREF_TAB_RIGHTS=[];
ZaNewDLXWizard.myXFormModifier=function(x,c){var m=new Array();
var d=1;
m[0]=new ZaListHeaderItem("type",ZaMsg.ALV_Type_col,null,null,null,"objectClass",true,true);
m[1]=new ZaListHeaderItem(ZaAccount.A_name,ZaMsg.ALV_Name_col,null,null,d++,ZaAccount.A_name,true,true);
m[2]=new ZaListHeaderItem(ZaAccount.A_displayname,ZaMsg.ALV_DspName_col,null,null,d++,ZaAccount.A_displayname,true,true);
var n=new Array();
n[0]=new ZaListHeaderItem(ZaAccount.A_name,ZaMsg.ALV_Name_col,null,"100%",d++,ZaAccount.A_name,true,true);
var C=new ZaAccountMemberOfsourceHeaderList(ZaAccountMemberOfsourceHeaderList.DIRECT);
var t=new ZaAccountMemberOfsourceHeaderList(ZaAccountMemberOfsourceHeaderList.INDIRECT);
var q=new ZaAccountMemberOfsourceHeaderList(ZaAccountMemberOfsourceHeaderList.NON);
this.TAB_INDEX=0;
this.stepChoices=[];
var F,E,D,A,z,y;
F=++this.TAB_INDEX;
this.stepChoices.push({value:F,label:ZaMsg.DLXV_TabMembers});
if(ZaTabView.isTAB_ENABLED(c,ZaNewDLXWizard.NOTES_TAB_ATTRS,ZaNewDLXWizard.NOTES_TAB_RIGHTS)){E=++this.TAB_INDEX;
this.stepChoices.push({value:E,label:ZaMsg.DLXV_TabProperties})
}if(ZaTabView.isTAB_ENABLED(c,ZaNewDLXWizard.MEMBEROF_TAB_ATTRS,ZaNewDLXWizard.MEMBEROF_TAB_RIGHTS)){D=++this.TAB_INDEX;
this.stepChoices.push({value:D,label:ZaMsg.TABT_MemberOf})
}if(ZaTabView.isTAB_ENABLED(c,ZaNewDLXWizard.ALIASES_TAB_ATTRS,ZaNewDLXWizard.ALIASES_TAB_RIGHTS)){A=++this.TAB_INDEX;
this.stepChoices.push({value:A,label:ZaMsg.TABT_Aliases})
}if(ZaTabView.isTAB_ENABLED(c,ZaNewDLXWizard.OWNER_TAB_ATTRS,ZaNewDLXWizard.OWNER_TAB_RIGHTS)){z=++this.TAB_INDEX;
this.stepChoices.push({value:z,label:ZaMsg.TABT_Owners})
}if(ZaTabView.isTAB_ENABLED(c,ZaNewDLXWizard.PREF_TAB_ATTRS,ZaNewDLXWizard.PREF_TAB_RIGHTS)){y=++this.TAB_INDEX;
this.stepChoices.push({value:y,label:ZaMsg.TABT_Preferences})
}x.tableCssStyle="width:100%;overflow:auto;";
x.numCols=5;
x.colSizes=[10,"auto",20,"auto",10];
x.itemDefaults={_INPUT_:{cssClass:"inputBorder"},_TEXTAREA_:{cssClass:"inputBorder"},_TEXTFIELD_:{cssClass:"inputBorder",containerCssStyle:"width:95%"}};
var b=[];
var B,G,w,v,l,s;
B=30;
G=200;
w="98%";
v=250;
l="98%";
s="100%";
var p={type:_CASE_,caseKey:F,numCols:2,id:"dl_form_members",colSizes:["320px","380px"],cssStyle:"padding-top:5px; table-layout:fixed;",items:[{type:_GROUP_,width:"98%",numCols:1,items:[{type:_SPACER_,height:"5"},{type:_GROUP_,width:"96%",id:"dl_form_members_general_group",numCols:2,colSizes:[100,"*"],items:[{ref:ZaAccount.A_name,type:_EMAILADDR_,msgName:ZaMsg.MSG_LabelListName,label:ZaMsg.LBL_LabelListName,forceUpdate:true,tableCssStyle:"width: 100%",inputWidth:"70px",domainPartWidth:"80px",id:"dl_name_field",nameContainerCss:"width: 70px",domainContainerWidth:"80px",midContainerCss:"width: 20px",visibilityChecks:[],enableDisableChecks:[[XFormItem.prototype.hasRight,ZaDistributionList.RENAME_DL_RIGHT]]},{type:_SPACER_,height:"3"},{ref:ZaAccount.A_displayname,type:_TEXTFIELD_,label:ZaMsg.NAD_DisplayName,msgName:ZaMsg.NAD_DisplayName,align:_LEFT_,cssClass:"admin_xform_name_input",width:"95%"},{type:_SPACER_,height:"3"},{ref:"description",msgName:ZaMsg.NAD_Description,label:ZaMsg.NAD_Description,labelLocation:_LEFT_,align:_LEFT_,type:_TEXTAREA_,enableDisableChecks:[ZaItem.hasWritePermission],visibilityChecks:[ZaItem.hasReadPermission],cssClass:"admin_xform_name_input",cssStyle:"resize: none",width:"100%",height:"100"}]},{type:_SPACER_,height:"20"},{type:_GROUPER_,borderCssClass:"LeftGrouperBorder",width:"100%",numCols:1,colSizes:["auto"],label:ZaMsg.DLXV_LabelListMembers,items:[{type:_GROUP_,width:"100%",height:B,numCols:3,colSizes:["*","20px","104px"],items:[{type:_OUTPUT_,ref:ZaDistributionList.A2_numMembers,align:_LEFT_,valueChangeEventSources:[ZaDistributionList.A2_numMembers,ZaDistributionList.A2_memNumPages],getDisplayValue:ZaDLXFormView.showMembersNum},{type:_CELLSPACER_},{type:_GROUP_,width:"100%",numCols:3,colSizes:["32px","40px","32px"],visibilityChangeEventSources:[ZaDistributionList.A2_memNumPages],visibilityChecks:[[ZaDLXFormView.isMoreThanOnePage,ZaDistributionList.A2_memNumPages]],items:[{type:_DWT_BUTTON_,label:null,labelLocation:_NONE_,width:"100%",id:"backButton",icon:"LeftArrow",disIcon:"LeftArrowDis",enableDisableChecks:[ZaDLXFormView.shouldEnableMemBackButton],enableDisableChangeEventSources:[ZaDistributionList.A2_memberList,ZaDistributionList.A2_memNumPages,ZaDistributionList.A2_memPagenum],onActivate:"ZaDLXFormView.backMemButtonHndlr.call(this,event)"},{type:_OUTPUT_,ref:ZaDistributionList.A2_memPagenum,valueChangeEventSources:[ZaDistributionList.A2_memPagenum,ZaDistributionList.A2_memNumPages],align:_CENTER_,getDisplayValue:ZaDLXFormView.showMembersPaging},{type:_DWT_BUTTON_,label:null,labelLocation:_NONE_,width:"100%",id:"fwdButton",icon:"RightArrow",disIcon:"RightArrowDis",enableDisableChecks:[ZaDLXFormView.shouldEnableMemForwardButton],enableDisableChangeEventSources:[ZaDistributionList.A2_memberList,ZaDistributionList.A2_memNumPages,ZaDistributionList.A2_memPagenum],onActivate:"ZaDLXFormView.fwdMemButtonHndlr.call(this,event)"}]}]},{type:_SPACER_,height:"5"},{ref:ZaDistributionList.A2_memberList,type:_DWT_LIST_,height:G,width:w,cssClass:"DLTarget",cssStyle:"margin-left: 5px; ",widgetClass:ZaAccMiniListView,headerList:n,hideHeader:true,onSelection:ZaDLXFormView.membersSelectionListener,bmolsnr:true},{type:_SPACER_,height:"8"},{type:_GROUP_,width:"98%",numCols:3,cssStyle:"table-layout:fixed",items:[{type:_DWT_BUTTON_,id:"removeButton",label:ZaMsg.DLXV_ButtonRemoveSelected,width:"140px",nowrap:true,cssStyle:"padding:0px;",enableDisableChangeEventSources:[ZaDistributionList.A2_membersSelected],enableDisableChecks:[[XForm.checkInstanceValueNotEmty,ZaDistributionList.A2_membersSelected],[XFormItem.prototype.hasRight,ZaDistributionList.REMOVE_DL_MEMBER_RIGHT]],onActivate:"ZaDLXFormView.removeSelectedMembers.call(this,event)"},{type:_CELLSPACER_,width:"10px"},{type:_DWT_BUTTON_,label:ZaMsg.DLXV_ButtonRemovePage,width:"140px",nowrap:true,cssStyle:"padding:0px;",visibilityChangeEventSources:[ZaDistributionList.A2_numMembers],visibilityChecks:[[XForm.checkInstanceValueNot,ZaDistributionList.A2_numMembers,0]],enableDisableChangeEventSources:[ZaDistributionList.A2_memberList],enableDisableChecks:[ZaDLXFormView.shouldEnableRemoveThisPageButton,[XFormItem.prototype.hasRight,ZaDistributionList.REMOVE_DL_MEMBER_RIGHT]],onActivate:"ZaDLXFormView.removeOnePageMembers.call(this,event)"}]}]},{type:_SPACER_,height:"5"}]},{type:_ZARIGHT_GROUPER_,numCols:1,width:s,label:ZaMsg.DLXV_GroupLabelAddMembers,items:[{type:_GROUP_,width:"100%",numCols:3,colSizes:["64%","6%","30%"],items:[{type:_GROUP_,width:"100%",numCols:2,colSizes:["20%","80%"],items:[{type:_TEXTFIELD_,cssClass:"admin_xform_name_input",ref:ZaSearch.A_query,label:ZaMsg.DLXV_LabelFind,labelLocation:_LEFT_,labelCssStyle:"white-space: nowrap;",visibilityChecks:[],enableDisableChecks:[],width:"95%",align:_LEFT_,elementChanged:function(K,J,I){var H=I.charCode;
if(H==13||H==3){ZaDLXFormView.srchButtonHndlr.call(this)
}else{this.getForm().itemChanged(this,K,I)
}}}]},{type:_CELLSPACER_},{type:_DWT_BUTTON_,label:ZaMsg.DLXV_ButtonSearch,onActivate:ZaDLXFormView.srchButtonHndlr}]},{type:_SPACER_,height:"5",colSpan:"*"},{type:_GROUP_,width:"100%",numCols:3,colSizes:["*","10px","104px"],items:[{type:_GROUP_,items:[{type:_OUTPUT_,ref:ZaDistributionList.A2_totalNumInPool,align:_LEFT_,visibilityChecks:[[ZaDLXFormView.checkTotalNumInPool,-1]],getDisplayValue:ZaDLXFormView.showSearchFoundNum,nowrap:false}]},{type:_CELLSPACER_},{type:_GROUP_,visibilityChangeEventSources:[ZaDistributionList.A2_poolNumPages],visibilityChecks:[[ZaDLXFormView.isMoreThanOnePage,ZaDistributionList.A2_poolNumPages]],numCols:3,colSizes:["32px","40px","32px"],width:"100%",items:[{type:_DWT_BUTTON_,label:null,labelLocation:_NONE_,id:"backButton",icon:"LeftArrow",disIcon:"LeftArrowDis",enableDisableChecks:[ZaDLXFormView.shouldEnablePoolBackButton],enableDisableChangeEventSources:[ZaDistributionList.A2_poolPagenum],onActivate:"ZaDLXFormView.backPoolButtonHndlr.call(this,event)"},{type:_OUTPUT_,ref:ZaDistributionList.A2_poolPagenum,align:_CENTER_,getDisplayValue:ZaDLXFormView.showSearchFoundPaging},{type:_DWT_BUTTON_,label:null,labelLocation:_NONE_,id:"fwdButton",icon:"RightArrow",disIcon:"RightArrowDis",enableDisableChecks:[ZaDLXFormView.shouldEnablePoolForwardButton],enableDisableChangeEventSources:[ZaDistributionList.A2_poolPagenum],onActivate:"ZaDLXFormView.fwdPoolButtonHndlr.call(this,event)"}]}]},{type:_SPACER_,height:"5"},{ref:ZaDistributionList.A2_memberPool,type:_DWT_LIST_,height:v,width:l,cssClass:"DLSource",forceUpdate:true,widgetClass:ZaAccMiniListView,headerList:m,hideHeader:false,onSelection:ZaDLXFormView.memberPoolSelectionListener},{type:_SPACER_,height:"5",colSpan:"*"},{type:_GROUP_,width:s,items:[{type:_GROUP_,width:"98%",numCols:3,cssStyle:"table-layout:fixed",items:[{type:_DWT_BUTTON_,label:ZaMsg.DLXV_ButtonAddSelected,width:"140px",nowrap:true,onActivate:"ZaDLXFormView.addSelectedAddressesToMembers.call(this,event)",enableDisableChangeEventSources:[ZaDistributionList.A2_memberPoolSelected],enableDisableChecks:[[XForm.checkInstanceValueNotEmty,ZaDistributionList.A2_memberPoolSelected],[XFormItem.prototype.hasRight,ZaDistributionList.ADD_DL_MEMBER_RIGHT]]},{type:_CELLSPACER_,width:"10px"},{type:_DWT_BUTTON_,label:ZaMsg.DLXV_ButtonAddPage,width:"140px",nowrap:true,onActivate:"ZaDLXFormView.addOnePageAddressesToMembers.call(this,event)",visibilityChangeEventSources:[ZaDistributionList.A2_totalNumInPool],visibilityChecks:[[ZaDLXFormView.checkTotalNumInPool,1]],enableDisableChangeEventSources:[ZaDistributionList.A2_memberPool],enableDisableChecks:[[XForm.checkInstanceValueNotEmty,ZaDistributionList.A2_memberPool],[XFormItem.prototype.hasRight,ZaDistributionList.ADD_DL_MEMBER_RIGHT]]}]},{type:_SPACER_}]},{type:_SPACER_,height:"5"},{type:_OUTPUT_,value:ZaMsg.DLXV_GroupLabelEnterAddressBelow,visibilityChecks:[[XFormItem.prototype.hasRight,ZaDistributionList.ADD_DL_MEMBER_RIGHT]]},{type:_SPACER_,height:"5"},{ref:ZaDistributionList.A2_optionalAdd,type:_TEXTAREA_,cssStyle:"resize: none",width:"98%",height:98,bmolsnr:true,visibilityChecks:[[XFormItem.prototype.hasRight,ZaDistributionList.ADD_DL_MEMBER_RIGHT]],enableDisableChecks:[]},{type:_SPACER_,height:"5",visibilityChecks:[[XFormItem.prototype.hasRight,ZaDistributionList.ADD_DL_MEMBER_RIGHT]]},{type:_GROUP_,numCols:2,colSizes:["20%","80%"],width:s,visibilityChecks:[[XFormItem.prototype.hasRight,ZaDistributionList.ADD_DL_MEMBER_RIGHT]],items:[{type:_DWT_BUTTON_,label:ZaMsg.DLXV_ButtonAddFromFreeForm,onActivate:"ZaDLXFormView.addFreeFormAddressToMembers.call(this,event)",enableDisableChecks:[[XForm.checkInstanceValueNotEmty,ZaDistributionList.A2_optionalAdd]],enableDisableChangeEventSources:[ZaDistributionList.A2_optionalAdd]},{type:_OUTPUT_,value:ZaMsg.DLXV_SeparateAddresses}]}]}]};
b.push(p);
if(E){var o={type:_CASE_,caseKey:E,colSpan:"*",items:[{type:_GROUPER_,label:ZaMsg.DLXV_LabelProperties,id:"dl_properties",colSpan:"*",numCols:2,colSizes:[175,"*"],visibilityChangeEventSources:[],items:[{ref:"zimbraMailStatus",type:_WIZ_CHECKBOX_,trueValue:"enabled",falseValue:"disabled",align:_LEFT_,nowrap:false,labelWrap:true,label:ZaMsg.DLXV_LabelEnabled,msgName:ZaMsg.DLXV_LabelEnabled,labelLocation:_LEFT_,labelCssClass:"xform_label",cssStyle:"padding-left:0px;margin-bottom-10px;"},{ref:ZaAccount.A_zimbraHideInGal,type:_WIZ_CHECKBOX_,trueValue:"TRUE",falseValue:"FALSE",label:ZaMsg.LBL_zimbraHideInGal,labelLocation:_LEFT_,labelCssClass:"xform_label",labelWrap:true,align:_LEFT_,nowrap:false,msgName:ZaMsg.LBL_zimbraHideInGal,cssStyle:"padding-left: 0px; margin-bottom: 10px;"},{type:_GROUP_,colSpan:"*",colSizes:["175px","*"],labelCssClass:"xform_label",cssStyle:"padding-left: 0px",items:[{ref:ZaDistributionList.A2_dlType,type:_WIZ_CHECKBOX_,trueValue:ZaDistributionList.DYNAMIC_DL_TYPE,falseValue:ZaDistributionList.STATIC_DL_TYPE,label:ZaMsg.LBL_DL_Type,labelLocation:_LEFT_,labelCssClass:"xform_label",cssStyle:"margin-bottom-10px;",labelWrap:true,align:_LEFT_,nowrap:false,msgName:ZaMsg.LBL_DL_Type,subLabel:"",visibilityChecks:[ZaZimbraAdmin.canCreateGroup],enableDisableChecks:[],elementChanged:function(K,I,H){var J=this.getParentItem().items[2];
if(K==ZaDistributionList.STATIC_DL_TYPE){if(J.hasError()){J.clearError()
}J.setInstanceValue(null)
}else{if(this.getInstanceValue(ZaDistributionList.A_zimbraIsACLGroup)!="TRUE"){J.setError(AjxMsg.valueIsRequired)
}}this.getForm().itemChanged(this,K,H)
}},{type:_GROUP_,numCols:3,colSizes:["25%","10%","65%"],nowrap:true,label:ZaMsg.NAD_MailServer,labelLocation:_LEFT_,visibilityChangeEventSources:[ZaDistributionList.A2_dlType],visibilityChecks:[[ZaItem.hasWritePermission,ZaAccount.A_mailHost],[XForm.checkInstanceValue,ZaDistributionList.A2_dlType,ZaDistributionList.STATIC_DL_TYPE]],items:[{ref:ZaAccount.A_mailHost,type:_OSELECT1_,label:null,editable:false,choices:ZaApp.getInstance().getServerListChoices(),enableDisableChecks:[ZaAccount.isAutoMailServer],enableDisableChangeEventSources:[ZaAccount.A2_autoMailServer],visibilityChecks:[],cssStyle:"margin-left: 5px;"},{ref:ZaAccount.A2_autoMailServer,type:_WIZ_CHECKBOX_,msgName:ZaMsg.NAD_Auto,label:ZaMsg.NAD_Auto,trueValue:"TRUE",falseValue:"FALSE",visibilityChecks:[],labelLocation:_RIGHT_,align:_RIGHT_,subLabel:"",enableDisableChecks:[]}]},{ref:ZaDistributionList.A_zimbraIsACLGroup,type:_WIZ_CHECKBOX_,trueValue:"TRUE",falseValue:"FALSE",label:ZaMsg.LBL_ACL_Group,labelLocation:_LEFT_,labelCssClass:"xform_label",align:_LEFT_,subLabel:"",visibilityChangeEventSources:[ZaDistributionList.A2_dlType],visibilityChecks:[[XForm.checkInstanceValue,ZaDistributionList.A2_dlType,ZaDistributionList.DYNAMIC_DL_TYPE]],enableDisableChecks:[],elementChanged:function(K,I,H){var J=this.getParentItem().items[2];
if(K=="TRUE"){if(J.hasError()){J.clearError()
}J.setInstanceValue(null)
}else{J.setError(AjxMsg.valueIsRequired)
}this.getForm().itemChanged(this,K,H)
}},{type:_INPUT_,ref:ZaDistributionList.A_memberOfURL,label:ZaMsg.LBL_Member_URL,labelLocation:_LEFT_,labelCssClass:"xform_label",cssStyle:"margin-left: 5px;",width:"80%",bmolsnr:true,visibilityChangeEventSources:[ZaDistributionList.A2_dlType],visibilityChecks:[[XForm.checkInstanceValue,ZaDistributionList.A2_dlType,ZaDistributionList.DYNAMIC_DL_TYPE]],enableDisableChangeEventSources:[ZaDistributionList.A_zimbraIsACLGroup],enableDisableChecks:[ZaDLXFormView.isNotACLGroup]}]},{type:_SPACER_,height:"5"},{type:_GROUP_,numCols:2,colSizes:["5%","*"],label:ZaMsg.DLXV_SubscriptionRequest,labelLocation:_LEFT_,items:[{ref:ZaDistributionList.A_zimbraDistributionListSubscriptionPolicy,type:_RADIO_,groupname:"subscription_settings",msgName:ZaMsg.DLXV_SubscriptionPolicyAccept,label:ZaMsg.DLXV_SubscriptionPolicyAccept,onChange:ZaTabView.onFormFieldChanged,updateElement:function(){this.getElement().checked=(this.getInstanceValue(ZaDistributionList.A_zimbraDistributionListSubscriptionPolicy)==ZaDistributionList.A2_zimbraDLSubscriptionPolicyAccept)
},elementChanged:function(J,I,H){this.getForm().itemChanged(this,ZaDistributionList.A2_zimbraDLSubscriptionPolicyAccept,H)
}},{ref:ZaDistributionList.A_zimbraDistributionListSubscriptionPolicy,type:_RADIO_,groupname:"subscription_settings",msgName:ZaMsg.DLXV_SubscriptionPolicyApproval,label:ZaMsg.DLXV_SubscriptionPolicyApproval,onChange:ZaTabView.onFormFieldChanged,updateElement:function(){this.getElement().checked=(this.getInstanceValue(ZaDistributionList.A_zimbraDistributionListSubscriptionPolicy)==ZaDistributionList.A2_zimbraDLSubscriptionPolicyApproval)
},elementChanged:function(J,I,H){this.getForm().itemChanged(this,ZaDistributionList.A2_zimbraDLSubscriptionPolicyApproval,H)
}},{ref:ZaDistributionList.A_zimbraDistributionListSubscriptionPolicy,type:_RADIO_,groupname:"subscription_settings",msgName:ZaMsg.DLXV_SubscriptionPolicyReject,label:ZaMsg.DLXV_SubscriptionPolicyReject,onChange:ZaTabView.onFormFieldChanged,updateElement:function(){this.getElement().checked=(this.getInstanceValue(ZaDistributionList.A_zimbraDistributionListSubscriptionPolicy)==ZaDistributionList.A2_zimbraDLSubscriptionPolicyReject)
},elementChanged:function(J,I,H){this.getForm().itemChanged(this,ZaDistributionList.A2_zimbraDLSubscriptionPolicyReject,H)
}}]},{type:_SPACER_,height:"5"},{type:_GROUP_,numCols:2,colSizes:["5%","*"],label:ZaMsg.DLXV_UnsubscriptionRequest,labelLocation:_LEFT_,items:[{ref:ZaDistributionList.A_zimbraDistributionListUnsubscriptionPolicy,type:_RADIO_,groupname:"unsubscription_settings",msgName:ZaMsg.DLXV_SubscriptionPolicyAccept,label:ZaMsg.DLXV_SubscriptionPolicyAccept,onChange:ZaTabView.onFormFieldChanged,updateElement:function(){this.getElement().checked=(this.getInstanceValue(ZaDistributionList.A_zimbraDistributionListUnsubscriptionPolicy)==ZaDistributionList.A2_zimbraDLSubscriptionPolicyAccept)
},elementChanged:function(J,I,H){this.getForm().itemChanged(this,ZaDistributionList.A2_zimbraDLSubscriptionPolicyAccept,H)
}},{ref:ZaDistributionList.A_zimbraDistributionListUnsubscriptionPolicy,type:_RADIO_,groupname:"unsubscription_settings",msgName:ZaMsg.DLXV_SubscriptionPolicyApproval,label:ZaMsg.DLXV_SubscriptionPolicyApproval,onChange:ZaTabView.onFormFieldChanged,updateElement:function(){this.getElement().checked=(this.getInstanceValue(ZaDistributionList.A_zimbraDistributionListUnsubscriptionPolicy)==ZaDistributionList.A2_zimbraDLSubscriptionPolicyApproval)
},elementChanged:function(J,I,H){this.getForm().itemChanged(this,ZaDistributionList.A2_zimbraDLSubscriptionPolicyApproval,H)
}},{ref:ZaDistributionList.A_zimbraDistributionListUnsubscriptionPolicy,type:_RADIO_,groupname:"unsubscription_settings",msgName:ZaMsg.DLXV_SubscriptionPolicyReject,label:ZaMsg.DLXV_SubscriptionPolicyReject,onChange:ZaTabView.onFormFieldChanged,updateElement:function(){this.getElement().checked=(this.getInstanceValue(ZaDistributionList.A_zimbraDistributionListUnsubscriptionPolicy)==ZaDistributionList.A2_zimbraDLSubscriptionPolicyReject)
},elementChanged:function(J,I,H){this.getForm().itemChanged(this,ZaDistributionList.A2_zimbraDLSubscriptionPolicyReject,H)
}}]},{type:_SPACER_,height:"5"},{ref:ZaDistributionList.A_zimbraDistributionListSendShareMessageToNewMembers,type:_WIZ_CHECKBOX_,trueValue:"TRUE",falseValue:"FALSE",align:_LEFT_,nowrap:false,labelWrap:true,label:ZaMsg.DL_zimbraDistributionListSendShareMessageToNewMembers,subLabel:"",msgName:ZaMsg.DL_zimbraDistributionListSendShareMessageToNewMembers,labelLocation:_LEFT_,labelCssClass:"xform_label",cssStyle:"padding-left: 0px"},{type:_SPACER_,height:"5"},{ref:ZaAccount.A_notes,type:_TEXTAREA_,label:ZaMsg.DLXV_LabelNotes,labelLocation:_LEFT_,width:"400",height:"100",labelCssStyle:"vertical-align: top",cssStyle:"margin-left: 5px; resize: none;"}]}]};
b.push(o)
}if(D){var k={type:_CASE_,caseKey:D,numCols:2,colSpan:"*",colSizes:[400,400],items:[{type:_DWT_ALERT_,containerCssStyle:"padding-bottom:0;",style:DwtAlert.INFO,colSpan:"*",iconVisible:false,content:ZaMsg.WARNING_DYNAMIC_DL_MEMBER,visibilityChecks:[[XForm.checkInstanceValue,ZaDistributionList.A2_dlType,ZaDistributionList.DYNAMIC_DL_TYPE]],visibilityChangeEventSources:[ZaDistributionList.A2_dlType]},{type:_GROUP_,width:"98%",numCols:1,visibilityChecks:[[XForm.checkInstanceValue,ZaDistributionList.A2_dlType,ZaDistributionList.STATIC_DL_TYPE]],visibilityChangeEventSources:[ZaDistributionList.A2_dlType],items:[{type:_SPACER_,height:"5"},{type:_ZALEFT_GROUPER_,numCols:1,label:ZaMsg.Account_DirectGroupLabel,containerCssStyle:"padding-top: 5px",width:"100%",items:[{ref:ZaAccount.A2_directMemberList,type:_S_DWT_LIST_,width:"98%",height:200,cssClass:"DLSource",widgetClass:ZaAccountMemberOfListView,headerList:C,defaultColumnSortable:0,onSelection:ZaNewDLXWizard.directMemberSelectionListener,forceUpdate:true},{type:_SPACER_,height:"5"},{type:_GROUP_,width:"100%",numCols:8,colSizes:[70,5,65,5,75,5,60,5],items:[{type:_DWT_BUTTON_,label:ZaMsg.DLXV_ButtonRemoveAll,enableDisableChangeEventSources:[ZaDistributionList.A2_directMemberList],enableDisableChecks:[[XForm.checkInstanceValueNotEmty,ZaDistributionList.A2_directMemberList]],onActivate:"ZaAccountMemberOfListView.removeAllGroups.call(this,event, ZaAccount.A2_directMemberList)"},{type:_CELLSPACER_},{type:_DWT_BUTTON_,label:ZaMsg.DLXV_ButtonRemove,id:"removeButton",onActivate:"ZaAccountMemberOfListView.removeGroups.call(this,event, ZaAccount.A2_directMemberList)",enableDisableChangeEventSources:[ZaDistributionList.A2_directMemberSelected],enableDisableChecks:[[XForm.checkInstanceValueNotEmty,ZaDistributionList.A2_directMemberSelected]]},{type:_CELLSPACER_},{type:_DWT_BUTTON_,label:ZaMsg.Previous,id:"backButton",icon:"LeftArrow",disIcon:"LeftArrowDis",onActivate:"ZaAccountMemberOfListView.backButtonHndlr.call(this,event, ZaAccount.A2_directMemberList)",enableDisableChecks:[[ZaAccountMemberOfListView.shouldEnableBackButton,ZaAccount.A2_directMemberList]],enableDisableChangeEventSources:[ZaAccount.A2_directMemberList+"_offset"]},{type:_CELLSPACER_},{type:_DWT_BUTTON_,label:ZaMsg.Next,id:"fwdButton",icon:"RightArrow",disIcon:"RightArrowDis",onActivate:"ZaAccountMemberOfListView.fwdButtonHndlr.call(this,event, ZaAccount.A2_directMemberList)",enableDisableChangeEventSources:[ZaAccount.A2_directMemberList+"_more"],enableDisableChecks:[[ZaAccountMemberOfListView.shouldEnableForwardButton,ZaAccount.A2_directMemberList]]},{type:_CELLSPACER_}]}]},{type:_SPACER_,height:"10"},{type:_ZALEFT_GROUPER_,numCols:1,width:"100%",label:ZaMsg.Account_IndirectGroupLabel,containerCssStyle:"padding-top: 5px",items:[{ref:ZaAccount.A2_indirectMemberList,type:_S_DWT_LIST_,width:"98%",height:200,cssClass:"DLSource",widgetClass:ZaAccountMemberOfListView,headerList:t,defaultColumnSortable:0,onSelection:ZaNewDLXWizard.indirectMemberSelectionListener,forceUpdate:true},{type:_SPACER_,height:"5"},{type:_GROUP_,width:"100%",numCols:8,colSizes:[70,5,65,5,75,5,60,5],items:[{type:_CELLSPACER_},{type:_CELLSPACER_},{type:_CELLSPACER_},{type:_CELLSPACER_},{type:_DWT_BUTTON_,label:ZaMsg.Previous,id:"indirectBackButton",icon:"LeftArrow",disIcon:"LeftArrowDis",onActivate:"ZaAccountMemberOfListView.backButtonHndlr.call(this,event, ZaAccount.A2_indirectMemberList)",enableDisableChecks:[[ZaAccountMemberOfListView.shouldEnableBackButton,ZaAccount.A2_indirectMemberList]],enableDisableChangeEventSources:[ZaAccount.A2_indirectMemberList+"_offset"]},{type:_CELLSPACER_},{type:_DWT_BUTTON_,label:ZaMsg.Next,id:"indirectFwdButton",icon:"RightArrow",disIcon:"RightArrowDis",onActivate:"ZaAccountMemberOfListView.fwdButtonHndlr.call(this,event, ZaAccount.A2_indirectMemberList)",enableDisableChecks:[[ZaAccountMemberOfListView.shouldEnableForwardButton,ZaAccount.A2_indirectMemberList]],enableDisableChangeEventSources:[ZaAccount.A2_indirectMemberList+"_more"]},{type:_CELLSPACER_}]}]}]},{type:_GROUP_,width:"98%",numCols:1,visibilityChecks:[[XForm.checkInstanceValue,ZaDistributionList.A2_dlType,ZaDistributionList.STATIC_DL_TYPE]],visibilityChangeEventSources:[ZaDistributionList.A2_dlType],items:[{type:_ZARIGHT_GROUPER_,numCols:1,width:"100%",label:ZaMsg.Account_NonGroupLabel,containerCssStyle:"padding-top: 5px",items:[{type:_GROUP_,width:"100%",numCols:3,colSizes:["64%","6%","30%"],items:[{type:_GROUP_,width:"100%",numCols:2,colSizes:["20%","80%"],items:[{ref:"query",type:_TEXTFIELD_,width:"95%",cssClass:"admin_xform_name_input",nowrap:false,labelWrap:true,label:ZaMsg.DLXV_LabelFind,visibilityChecks:[],enableDisableChecks:[],elementChanged:function(K,J,I){var H=I.charCode;
if(H==13||H==3){ZaAccountMemberOfListView.prototype.srchButtonHndlr.call(this)
}else{this.getForm().itemChanged(this,K,I)
}}}]},{type:_CELLSPACER_},{type:_DWT_BUTTON_,label:ZaMsg.DLXV_ButtonSearch,onActivate:ZaAccountMemberOfListView.prototype.srchButtonHndlr}]},{type:_GROUP_,width:"100%",numCols:2,items:[{ref:ZaAccount.A2_showSameDomain,type:_WIZ_CHECKBOX_,label:ZaMsg.NAD_SearchSameDomain,labelLocation:_RIGHT_,trueValue:"TRUE",falseValue:"FALSE",visibilityChecks:[]}]},{type:_SPACER_,height:"5"},{ref:ZaAccount.A2_nonMemberList,type:_S_DWT_LIST_,width:"98%",height:440,cssClass:"DLSource",widgetClass:ZaAccountMemberOfListView,headerList:q,defaultColumnSortable:0,onSelection:ZaNewDLXWizard.nonmemberSelectionListener,forceUpdate:true},{type:_SPACER_,height:"5"},{type:_GROUP_,width:"100%",numCols:8,colSizes:[70,5,65,5,75,5,60,5],items:[{type:_DWT_BUTTON_,label:ZaMsg.DLXV_ButtonAddFromList,onActivate:"ZaAccountMemberOfListView.addGroups.call(this,event, ZaAccount.A2_nonMemberList)",enableDisableChangeEventSources:[ZaDistributionList.A2_nonmembersSelected],enableDisableChecks:[[XForm.checkInstanceValueNotEmty,ZaDistributionList.A2_nonmembersSelected]]},{type:_CELLSPACER_},{type:_DWT_BUTTON_,label:ZaMsg.DLXV_ButtonAddAll,onActivate:"ZaAccountMemberOfListView.addAllGroups.call(this,event, ZaAccount.A2_nonMemberList)",enableDisableChangeEventSources:[ZaAccount.A2_nonMemberList],enableDisableChecks:[[XForm.checkInstanceValueNotEmty,ZaAccount.A2_nonMemberList]]},{type:_CELLSPACER_},{type:_DWT_BUTTON_,label:ZaMsg.Previous,id:"backButton",icon:"LeftArrow",disIcon:"LeftArrowDis",enableDisableChangeEventSources:[ZaAccount.A2_nonMemberList+"_offset"],enableDisableChecks:[[ZaAccountMemberOfListView.shouldEnableBackButton,ZaAccount.A2_nonMemberList]],onActivate:"ZaAccountMemberOfListView.backButtonHndlr.call(this,event, ZaAccount.A2_nonMemberList)"},{type:_CELLSPACER_},{type:_DWT_BUTTON_,label:ZaMsg.Next,id:"fwdButton",icon:"RightArrow",disIcon:"RightArrowDis",enableDisableChangeEventSources:[ZaAccount.A2_nonMemberList+"_more"],enableDisableChecks:[[ZaAccountMemberOfListView.shouldEnableForwardButton,ZaAccount.A2_nonMemberList]],onActivate:"ZaAccountMemberOfListView.fwdButtonHndlr.call(this,event, ZaAccount.A2_nonMemberList)"},{type:_CELLSPACER_}]}]}]}]};
b.push(k)
}if(A){var u={type:_DWT_BUTTON_,label:ZaMsg.NAD_Add,width:"100px",onActivate:"ZaNewDLXWizard.addAliasButtonListener.call(this);"};
if(c.id){u.enableDisableChecks=[[XFormItem.prototype.hasRight,ZaDistributionList.ADD_DL_ALIAS_RIGHT]]
}else{u.enableDisableChecks=[[ZaItem.hasWritePermission,ZaAccount.A_zimbraMailAlias]]
}var e={type:_DWT_BUTTON_,label:ZaMsg.TBB_Edit,width:"100px",enableDisableChangeEventSources:[ZaDistributionList.A2_alias_selection_cache],onActivate:"ZaNewDLXWizard.editAliasButtonListener.call(this);",id:"editAliasButton"};
if(c.id){e.enableDisableChecks=[ZaNewDLXWizard.isEditAliasEnabled,[XFormItem.prototype.hasRight,ZaDistributionList.REMOVE_DL_ALIAS_RIGHT],[XFormItem.prototype.hasRight,ZaAccount.ADD_DL_ALIAS_RIGHT]]
}else{e.enableDisableChecks=[ZaNewDLXWizard.isEditAliasEnabled,[ZaItem.hasWritePermission,ZaAccount.A_zimbraMailAlias]]
}var r={type:_DWT_BUTTON_,label:ZaMsg.TBB_Delete,width:"100px",onActivate:"ZaNewDLXWizard.deleteAliasButtonListener.call(this);",id:"deleteAliasButton",enableDisableChangeEventSources:[ZaDistributionList.A2_alias_selection_cache]};
if(c.id){r.enableDisableChecks=[ZaNewDLXWizard.isDeleteAliasEnabled,[XFormItem.prototype.hasRight,ZaDistributionList.REMOVE_DL_ALIAS_RIGHT]]
}else{r.enableDisableChecks=[ZaNewDLXWizard.isDeleteAliasEnabled,[ZaItem.hasWritePermission,ZaAccount.A_zimbraMailAlias]]
}var j={type:_CASE_,caseKey:A,width:"100%",numCols:1,items:[{type:_GROUPER_,borderCssClass:"LeftGrouperBorder",width:"100%",numCols:1,label:ZaMsg.NAD_EditDLAliasesGroup,items:[{ref:ZaAccount.A_zimbraMailAlias,type:_DWT_LIST_,height:"200",width:"98%",forceUpdate:true,preserveSelection:false,multiselect:true,cssClass:"DLSource",headerList:null,onSelection:ZaNewDLXWizard.aliasSelectionListener},{type:_GROUP_,numCols:6,colSizes:["100px","10px","100px","10px","100px","auto"],cssStyle:"margin-bottom: 10px; padding-bottom: 0px; margin-top: 10px; margin-left: 10px; margin-right: 10px;",items:[r,{type:_CELLSPACER_},e,{type:_CELLSPACER_},u]}]}]};
b.push(j)
}if(z){var h={type:_CASE_,caseKey:z,numCols:1,items:[{ref:ZaDistributionList.A2_DLOwners,type:_REPEAT_,label:null,showAddButton:true,showRemoveButton:true,addButtonLabel:ZaMsg.BTN_Add_Owner,showAddOnNextRow:true,removeButtonLabel:ZaMsg.BTN_Remove_Owner,removeButtonCSSStyle:"margin-left: 50px",enableDisableChecks:[],visibilityChecks:[],items:[{ref:".",type:_EMAILADDR_,getDisplayValue:AjxUtil.htmlEncode,label:null,enableDisableChecks:[],visibilityChecks:[]}]}]};
b.push(h)
}if(y){var g={type:_CASE_,caseKey:y,numCols:1,items:[{type:_GROUPER_,label:ZaMsg.NAD_MailOptionsReceiving,id:"dl_pref_replyto_group",colSpan:"*",numCols:2,colSizes:[225,"*"],visibilityChecks:[[ZATopGrouper_XFormItem.isGroupVisible,[ZaDistributionList.A_zimbraPrefReplyToEnabled,ZaDistributionList.A_zimbraPrefReplyToDisplay,ZaDistributionList.A_zimbraPrefReplyToAddress]]],visibilityChangeEventSources:[],items:[{ref:ZaDistributionList.A_zimbraPrefReplyToEnabled,type:_WIZ_CHECKBOX_,visibilityChecks:[[ZaItem.hasReadPermission,ZaDistributionList.A_zimbraPrefReplyToEnabled]],label:ZaMsg.DLXV_ReplayToEnabled,trueValue:"TRUE",falseValue:"FALSE"},{ref:ZaDistributionList.A_zimbraPrefReplyToDisplay,type:_TEXTFIELD_,label:ZaMsg.DLXV_ReplayToAddrDisplay,emptyText:ZaMsg.DLXV_ReplayToAddrEmptyText,visibilityChecks:[[ZaItem.hasReadPermission,ZaDistributionList.A_zimbraPrefReplyToDisplay]],enableDisableChecks:[[XForm.checkInstanceValue,ZaDistributionList.A_zimbraPrefReplyToEnabled,"TRUE"],[ZaItem.hasWritePermission,ZaDistributionList.A_zimbraPrefReplyToAddress]],enableDisableChangeEventSources:[ZaDistributionList.A_zimbraPrefReplyToEnabled]},{type:_TEXTFIELD_,ref:ZaDistributionList.A_zimbraPrefReplyToAddress,label:ZaMsg.DLXV_ReplayToAddr,editable:true,forceUpdate:true,visibilityChecks:[[ZaItem.hasReadPermission,ZaDistributionList.A_zimbraPrefReplyToAddress]],enableDisableChangeEventSources:[ZaDistributionList.A_zimbraPrefReplyToEnabled],enableDisableChecks:[[XForm.checkInstanceValue,ZaDistributionList.A_zimbraPrefReplyToEnabled,"TRUE"],[ZaItem.hasWritePermission,ZaDistributionList.A_zimbraPrefReplyToAddress]]}]}]};
b.push(g)
}var f=[{type:_AJX_IMAGE_,src:"Group_32",label:null,rowSpan:3},{type:_OUTPUT_,ref:"name",label:null,cssClass:"AdminTitle",height:"auto",width:350,rowSpan:3,cssStyle:"word-wrap: break-word; overflow: hidden"}];
if(ZaItem.hasReadPermission(ZaItem.A_zimbraId,c)){f.push({type:_OUTPUT_,ref:ZaItem.A_zimbraId,label:ZaMsg.NAD_ZimbraID})
}if(ZaItem.hasReadPermission(ZaItem.A_zimbraCreateTimestamp,c)){f.push({type:_OUTPUT_,ref:ZaItem.A_zimbraCreateTimestamp,label:ZaMsg.LBL_zimbraCreateTimestamp,labelLocation:_LEFT_,getDisplayValue:function(){var H=ZaItem.formatServerTime(this.getInstanceValue());
if(!H){return ZaMsg.Server_Time_NA
}return H
}})
}if(ZaItem.hasReadPermission(ZaDistributionList.A_mailStatus,c)){f.push({type:_OUTPUT_,ref:ZaDistributionList.A_mailStatus,label:ZaMsg.NAD_ResourceStatus,choices:this.dlStatusChoices})
}this._lastStep=this.stepChoices.length;
x.items=[{type:_OUTPUT_,colSpan:2,valign:_TOP_,cssStyle:"white-space: normal",ref:ZaModel.currentStep,choices:this.stepChoices,valueChangeEventSources:[ZaModel.currentStep]},{type:_SEPARATOR_,align:_CENTER_,valign:_TOP_},{type:_SPACER_,align:_CENTER_,valign:_TOP_},{type:_SWITCH_,width:700,align:_LEFT_,valign:_TOP_,cssStyle:"white-space: normal",items:b}]
};
ZaXDialog.XFormModifiers.ZaNewDLXWizard.push(ZaNewDLXWizard.myXFormModifier);
ZaNewDLXWizard.isAutoDisplayname=function(){return(this.getInstanceValue(ZaResource.A2_autoLocationName)=="FALSE")
}
}if(AjxPackage.define("zimbraAdmin.resource.view.ZaResourceXFormView")){ZaResourceXFormView=function(b,c){ZaTabView.call(this,{parent:b,iKeyName:"ZaResourceXFormView",contextId:ZaId.TAB_RES_EDIT});
this.TAB_INDEX=0;
if(!ZaResource.accountStatusChoices){ZaResource.accountStatusChoices=[{value:ZaResource.ACCOUNT_STATUS_ACTIVE,label:ZaResource.getAccountStatusLabel(ZaResource.ACCOUNT_STATUS_ACTIVE)},{value:ZaResource.ACCOUNT_STATUS_CLOSED,label:ZaResource.getAccountStatusLabel(ZaResource.ACCOUNT_STATUS_CLOSED)}]
}this.cosChoices=new XFormChoices([],XFormChoices.OBJECT_LIST,"id","name");
this.signatureChoices=new XFormChoices([],XFormChoices.OBJECT_LIST,"id","name");
this.initForm(ZaResource.myXModel,this.getMyXForm(c),null);
this._localXForm.setController(ZaApp.getInstance());
this._helpURL=ZaResourceXFormView.helpURL
};
ZaResourceXFormView.prototype=new ZaTabView();
ZaResourceXFormView.prototype.constructor=ZaResourceXFormView;
ZaTabView.XFormModifiers.ZaResourceXFormView=new Array();
ZaResourceXFormView.TAB_INDEX=0;
ZaResourceXFormView.helpURL=location.pathname+ZaUtil.HELP_URL+"managing_accounts/managing_resource.htm?locid="+AjxEnv.DEFAULT_LOCALE;
ZaResourceXFormView.prototype.getTabIcon=function(){if(this._containedObject&&this._containedObject.attrs&&this._containedObject.attrs[ZaResource.A_zimbraCalResType]==ZaResource.RESOURCE_TYPE_LOCATION){return"Location"
}else{return"Resource"
}};
ZaResourceXFormView.prototype.setObject=function(d){this._containedObject=new ZaResource();
this._containedObject.attrs=new Object();
for(var b in d.attrs){var c=this._localXForm.getModel().getItem(b);
if((c!=null&&c.type==_LIST_)||(d.attrs[b]!=null&&d.attrs[b] instanceof Array)){this._containedObject.attrs[b]=ZaItem.deepCloneListItem(d.attrs[b])
}else{this._containedObject.attrs[b]=d.attrs[b]
}}this._containedObject.name=d.name;
this._containedObject.type=d.type;
if(d.id){this._containedObject.id=d.id
}if(d.rights){this._containedObject.rights=d.rights
}if(d.setAttrs){this._containedObject.setAttrs=d.setAttrs
}if(d.getAttrs){this._containedObject.getAttrs=d.getAttrs
}if(d._defaultValues){this._containedObject._defaultValues=d._defaultValues
}if(this._containedObject.attrs[ZaResource.A_COSId]){this._containedObject[ZaResource.A2_autoCos]="FALSE"
}if(!this._containedObject.attrs[ZaResource.A_COSId]){this._containedObject[ZaResource.A2_autoCos]="TRUE"
}if(this._containedObject.setAttrs[ZaResource.A_COSId]){var e=ZaCos.getCosById(this._containedObject.attrs[ZaResource.A_COSId]);
this.cosChoices.setChoices([e]);
this.cosChoices.dirtyChoices()
}if(d[ZaResource.A2_signatureList]){this._containedObject[ZaResource.A2_signatureList]=d[ZaResource.A2_signatureList]
}else{this._containedObject[ZaResource.A2_signatureList]=[]
}this.signatureChoices.setChoices(ZaSignature.getSignatureChoices(this._containedObject[ZaResource.A2_signatureList]));
this.signatureChoices.dirtyChoices();
this._containedObject[ZaResource.A2_autodisplayname]="FALSE";
this._containedObject[ZaResource.A2_autoLocationName]=d[ZaResource.A2_autoLocationName];
ZaResource.prototype.setSchedulePolicyFromLdapAttrs.call(this._containedObject);
if(!d[ZaModel.currentTab]){this._containedObject[ZaModel.currentTab]="1"
}else{this._containedObject[ZaModel.currentTab]=d[ZaModel.currentTab]
}this._localXForm.setInstance(this._containedObject);
this.setDirty(false);
this.formDirtyLsnr=new AjxListener(ZaApp.getInstance().getCurrentController(),ZaResourceController.prototype.handleXFormChange);
this._localXForm.addListener(DwtEvent.XFORMS_FORM_DIRTY_CHANGE,this.formDirtyLsnr);
this._localXForm.addListener(DwtEvent.XFORMS_VALUE_ERROR,this.formDirtyLsnr)
};
ZaResourceXFormView.deleteCalFwdAddrButtonListener=function(){var c=this.getInstance();
if(c[ZaResource.A2_calFwdAddr_selection_cache]!=null){var f=c[ZaResource.A2_calFwdAddr_selection_cache].length;
if(f&&c.attrs[ZaResource.A_zimbraPrefCalendarForwardInvitesTo]){var b=c.attrs[ZaResource.A_zimbraPrefCalendarForwardInvitesTo];
for(var e=0;
e<f;
e++){var g=b.length-1;
for(var d=g;
d>=0;
d--){if(b[d]==c[ZaResource.A2_calFwdAddr_selection_cache][e]){b.splice(d,1);
break
}}}this.getModel().setInstanceValue(c,ZaResource.A_zimbraPrefCalendarForwardInvitesTo,b);
this.getModel().setInstanceValue(c,ZaResource.A2_calFwdAddr_selection_cache,[])
}}this.getForm().parent.setDirty(true)
};
ZaResourceXFormView.calFwdAddrSelectionListener=function(c){var b=this.widget.getSelection();
if(b&&b.length){b.sort();
b=AjxUtil.htmlDecode(b);
this.getModel().setInstanceValue(this.getInstance(),ZaResource.A2_calFwdAddr_selection_cache,b)
}else{this.getModel().setInstanceValue(this.getInstance(),ZaResource.A2_calFwdAddr_selection_cache,[])
}if(c.detail==DwtListView.ITEM_DBL_CLICKED){ZaResourceXFormView.editCalFwdAddrButtonListener.call(this)
}};
ZaResourceXFormView.editCalFwdAddrButtonListener=function(){var b=this.getInstance();
if(b[ZaResource.A2_calFwdAddr_selection_cache]&&b[ZaResource.A2_calFwdAddr_selection_cache][0]){var f=this.getForm().parent;
if(!f.editCalFwdAddrDlg){f.editCalFwdAddrDlg=new ZaEditFwdAddrXDialog(ZaApp.getInstance().getAppCtxt().getShell(),"400px","150px",ZaMsg.Edit_FwdAddr_Title);
f.editCalFwdAddrDlg.registerCallback(DwtDialog.OK_BUTTON,ZaAccountXFormView.updateCalFwdAddr,this.getForm(),null)
}var e={};
e[ZaAccount.A_name]=b[ZaAccount.A2_calFwdAddr_selection_cache][0];
var d=b.attrs[ZaResource.A_zimbraPrefCalendarForwardInvitesTo].length;
for(var c=0;
c<d;
c++){if(b[ZaResource.A2_calFwdAddr_selection_cache][0]==b.attrs[ZaResource.A_zimbraPrefCalendarForwardInvitesTo][c]){e[ZaAlias.A_index]=c;
break
}}f.editCalFwdAddrDlg.setObject(e);
f.editCalFwdAddrDlg.popup()
}};
ZaResourceXFormView.updateCalFwdAddr=function(){if(this.parent.editCalFwdAddrDlg){this.parent.editCalFwdAddrDlg.popdown();
var d=this.parent.editCalFwdAddrDlg.getObject();
var c=this.getInstance();
var b=c.attrs[ZaResource.A_zimbraPrefCalendarForwardInvitesTo];
if(d[ZaAlias.A_index]>=0&&b[d[ZaAlias.A_index]]!=d[ZaResource.A_name]){this.getModel().setInstanceValue(this.getInstance(),ZaResource.A2_calFwdAddr_selection_cache,[]);
b[d[ZaAlias.A_index]]=d[ZaResource.A_name];
this.getModel().setInstanceValue(c,ZaResource.A_zimbraPrefCalendarForwardInvitesTo,b);
this.parent.setDirty(true)
}}};
ZaResourceXFormView.addCalFwdAddrButtonListener=function(){var b=this.getInstance();
var d=this.getForm().parent;
if(!d.addCalFwdAddrDlg){d.addCalFwdAddrDlg=new ZaEditFwdAddrXDialog(ZaApp.getInstance().getAppCtxt().getShell(),"400px","150px",ZaMsg.Add_FwdAddr_Title);
d.addCalFwdAddrDlg.registerCallback(DwtDialog.OK_BUTTON,ZaResourceXFormView.addCalFwdAddr,this.getForm(),null)
}var c={};
c[ZaAccount.A_name]="";
c[ZaAlias.A_index]=-1;
d.addCalFwdAddrDlg.setObject(c);
d.addCalFwdAddrDlg.popup()
};
ZaResourceXFormView.addCalFwdAddr=function(){if(this.parent.addCalFwdAddrDlg){this.parent.addCalFwdAddrDlg.popdown();
var c=this.parent.addCalFwdAddrDlg.getObject();
if(c[ZaResource.A_name]&&c[ZaResource.A_name].length>1){var b=this.getInstance().attrs[ZaResource.A_zimbraPrefCalendarForwardInvitesTo];
b.push(c[ZaResource.A_name]);
this.getModel().setInstanceValue(this.getInstance(),ZaResource.A_zimbraPrefCalendarForwardInvitesTo,b);
this.getModel().setInstanceValue(this.getInstance(),ZaResource.A2_calFwdAddr_selection_cache,[]);
this.parent.setDirty(true)
}}};
ZaResourceXFormView.isEditCalFwdAddrEnabled=function(){return(!AjxUtil.isEmpty(this.getInstanceValue(ZaResource.A2_calFwdAddr_selection_cache))&&this.getInstanceValue(ZaResource.A2_calFwdAddr_selection_cache).length==1)
};
ZaResourceXFormView.isDeleteCalFwdAddrEnabled=function(){return(!AjxUtil.isEmpty(this.getInstanceValue(ZaResource.A2_calFwdAddr_selection_cache)))
};
ZaResourceXFormView.isAutoDisplayname=function(){return(this.getInstanceValue(ZaResource.A2_autoLocationName)=="FALSE")
};
ZaResourceXFormView.SignatureSelectionListener=function(c){var b=this.widget.getSelection();
if(b&&b.length){b.sort();
b=b.map(function(d){return new ZaSignature(AjxStringUtil.htmlDecode(d.name),d.id,AjxStringUtil.htmlDecode(d.content),d.type)
});
this.getModel().setInstanceValue(this.getInstance(),ZaResource.A2_signature_selection_cache,b)
}else{this.getModel().setInstanceValue(this.getInstance(),ZaResource.A2_signature_selection_cache,[])
}if(c.detail==DwtListView.ITEM_DBL_CLICKED){ZaResourceXFormView.editSignatureButtonListener.call(this)
}};
ZaResourceXFormView.editSignatureButtonListener=function(){try{var b=this.getInstance();
if(b[ZaResource.A2_signature_selection_cache]&&b[ZaResource.A2_signature_selection_cache][0]){var e=this.getForm().parent;
if(!e.editSignatureDlg){e.editSignatureDlg=new ZaEditSignatureDialog(ZaApp.getInstance().getAppCtxt().getShell(),"400px","150px",ZaMsg.Title_EditSignature);
e.editSignatureDlg.registerCallback(DwtDialog.OK_BUTTON,ZaResourceXFormView.updateSignature,this.getForm(),null)
}var d=ZaUtil.deepCloneObject(b[ZaResource.A2_signature_selection_cache][0]);
e.editSignatureDlg.setObject(d);
e.editSignatureDlg.popup()
}}catch(c){ZaApp.getInstance().getCurrentController()._handleException(c,"ZaResourceXFormView.editSignatureButtonListener",null,false)
}};
ZaResourceXFormView.updateSignature=function(){try{if(this.parent.editSignatureDlg){this.parent.editSignatureDlg.popdown();
var f=this.parent.editSignatureDlg.getObject();
var c=this.getInstance();
var b=c[ZaResource.A2_signatureList];
var d=ZaUtil.findValueInObjArrByPropertyName(b,f[ZaSignature.A2_id],ZaSignature.A2_id);
if(d!=-1&&!ZaSignature.compareObject(f,b[d])){ZaSignature.ModifySignature.call(f,"id",c.id);
this.getModel().setInstanceValue(this.getInstance(),ZaResource.A2_signature_selection_cache,[]);
b[d]=f;
this.getModel().setInstanceValue(c,ZaResource.A2_signatureList,b)
}}}catch(e){ZaApp.getInstance().getCurrentController()._handleException(e,"ZaResourceXFormView.updateSignature",null,false)
}};
ZaResourceXFormView.addSignatureButtonListener=function(){try{var b=this.getInstance();
var e=this.getForm().parent;
if(!e.addSignatureDlg){e.addSignatureDlg=new ZaEditSignatureDialog(ZaApp.getInstance().getAppCtxt().getShell(),"400px","150px",ZaMsg.Title_CreateSignature);
e.addSignatureDlg.registerCallback(DwtDialog.OK_BUTTON,ZaResourceXFormView.addSignature,this.getForm(),null)
}var d=new ZaSignature();
e.addSignatureDlg.setObject(d);
e.addSignatureDlg.popup()
}catch(c){ZaApp.getInstance().getCurrentController()._handleException(c,"ZaResourceXFormView.addSignatureButtonListener",null,false)
}};
ZaResourceXFormView.addSignature=function(){try{if(this.parent.addSignatureDlg){this.parent.addSignatureDlg.popdown();
var g=this.parent.addSignatureDlg.getObject();
if(g[ZaSignature.A2_name]&&g[ZaSignature.A2_name].length>0){var c=this.getInstance();
var b=c[ZaResource.A2_signatureList];
var e=ZaUtil.findValueInObjArrByPropertyName(b,g[ZaSignature.A2_name],ZaSignature.A2_name);
if(e==-1){g=ZaSignature.CreateSignature.call(g,"id",c.id);
b.push(g);
this.getModel().setInstanceValue(this.getInstance(),ZaResource.A2_signatureList,b);
this.getModel().setInstanceValue(this.getInstance(),ZaResource.A2_signature_selection_cache,[])
}else{var d=AjxMessageFormat.format(ZaMsg.SignatureExist,g[ZaSignature.A2_name]);
ZaApp.getInstance().getCurrentController().popupErrorDialog(d)
}}else{ZaApp.getInstance().getCurrentController().popupErrorDialog(ZaMsg.CreateWarningMsg)
}}}catch(f){ZaApp.getInstance().getCurrentController()._handleException(f,"ZaResourceXFormView.addSignature",null,false)
}};
ZaResourceXFormView.deleteSignatureButtonListener=function(){try{var l=this.getInstance();
if(l[ZaResource.A2_signature_selection_cache]!=null){var b=l[ZaResource.A2_signature_selection_cache].length;
if(b&&l[ZaResource.A2_signatureList]){var d;
var f=false;
var m;
for(d=0;
d<b;
d++){var j=l[ZaResource.A2_signature_selection_cache][d][ZaSignature.A2_id];
if(this.getInstanceValue(ZaResource.A_zimbraPrefCalendarAutoAcceptSignatureId)==j){f=true;
m=AjxMessageFormat.format(ZaMsg.DeleteWarningAcceptMsg,l[ZaResource.A2_signature_selection_cache][d][ZaSignature.A2_name]);
break
}if(this.getInstanceValue(ZaResource.A_zimbraPrefCalendarAutoDenySignatureId)==j){f=true;
m=AjxMessageFormat.format(ZaMsg.DeleteWarningDenyMsg,l[ZaResource.A2_signature_selection_cache][d][ZaSignature.A2_name]);
break
}if(this.getInstanceValue(ZaResource.A_zimbraPrefCalendarAutoDeclineSignatureId)==j){m=AjxMessageFormat.format(ZaMsg.DeleteWarningDeclineMsg,l[ZaResource.A2_signature_selection_cache][d][ZaSignature.A2_name]);
f=true;
break
}}if(!f){var e=l[ZaResource.A2_signatureList];
for(d=0;
d<b;
d++){var g=e.length-1;
for(var c=g;
c>=0;
c--){if(e[c][ZaSignature.A2_id]==l[ZaResource.A2_signature_selection_cache][d][ZaSignature.A2_id]){ZaSignature.DeleteSignature.call(l[ZaResource.A2_signature_selection_cache][d],"id",l.id);
e.splice(c,1);
break
}}}this.getModel().setInstanceValue(l,ZaResource.A2_signatureList,e);
this.getModel().setInstanceValue(l,ZaResource.A2_signature_selection_cache,[])
}else{ZaApp.getInstance().getCurrentController().popupErrorDialog(m)
}}}}catch(h){ZaApp.getInstance().getCurrentController()._handleException(h,"ZaResourceXFormView.deleteSignatureButtonListener",null,false)
}};
ZaResourceXFormView.isEditSignatureEnabled=function(){return(!AjxUtil.isEmpty(this.getInstanceValue(ZaResource.A2_signature_selection_cache))&&this.getInstanceValue(ZaResource.A2_signature_selection_cache).length==1)
};
ZaResourceXFormView.isDeleteSignatureEnabled=function(){return(!AjxUtil.isEmpty(this.getInstanceValue(ZaResource.A2_signature_selection_cache)))
};
ZaResourceXFormView.isSignatureSelectionEnabled=function(){return(!AjxUtil.isEmpty(this.getInstanceValue(ZaResource.A2_signatureList)))
};
ZaResourceXFormView.isSignatureSectionVisible=function(){return(ZaZimbraAdmin.haveTargetRight(ZaItem.RESOURCE,ZaResource.VIEW_RESOURCE_MAIL_RIGHT,this.getInstance().name)||ZaZimbraAdmin.haveTargetRight(ZaItem.RESOURCE,ZaResource.VIEW_RESOURCE_MAIL_RIGHT,ZaAccount.getDomain(this.getInstance().name)))
};
ZaResourceXFormView.CONTACT_TAB_ATTRS=[ZaResource.A_zimbraCalResContactName,ZaResource.A_zimbraCalResContactEmail,ZaResource.A_zimbraCalResContactPhone,ZaResource.A_contactInfoAutoComplete,ZaResource.A_locationDisplayName,ZaResource.A2_autoLocationName,ZaResource.A_zimbraCalResSite,ZaResource.A_zimbraCalResBuilding,ZaResource.A_zimbraCalResFloor,ZaResource.A_zimbraCalResRoom,ZaResource.A_zimbraCalResCapacity,ZaResource.A_street,ZaResource.A_city,ZaResource.A_state,ZaResource.A_country,ZaResource.A_zip];
ZaResourceXFormView.CONTACT_TAB_RIGHTS=[];
ZaResourceXFormView.myXFormModifier=function(k,o){ZaResource.resTypeChoices=[{value:ZaResource.RESOURCE_TYPE_LOCATION,label:ZaMsg.resType_location},{value:ZaResource.RESOURCE_TYPE_EQUIPMENT,label:ZaMsg.resType_equipment}];
ZaResource.schedulePolicyChoices=[{value:ZaResource.SCHEDULE_POLICY_TT,label:ZaMsg.resScheduleTT},{value:ZaResource.SCHEDULE_POLICY_FT,label:ZaMsg.resScheduleFT},{value:ZaResource.SCHEDULE_POLICY_TF,label:ZaMsg.resScheduleTF},{value:ZaResource.SCHEDULE_POLICY_FF,label:ZaMsg.resScheduleFF}];
var d;
d=ZaSettings.myDomainName;
var h=[{value:ZaResource.RESOURCE_TYPE_LOCATION,label:"Location_32"},{value:ZaResource.RESOURCE_TYPE_EQUIPMENT,label:"Resource_32"}];
var j=[{type:_AJX_IMAGE_,ref:ZaResource.A_zimbraCalResType,src:"Resource_32",label:null,rowSpan:3,choices:h,cssStyle:"margin:auto;"},{type:_OUTPUT_,ref:ZaResource.A_displayname,label:null,cssClass:"AdminTitle",height:"auto",width:350,rowSpan:3,cssStyle:"word-wrap:break-word;overflow:hidden;",visibilityChecks:[ZaItem.hasReadPermission],getDisplayValue:AjxUtil.htmlEncode}];
if(ZaItem.hasReadPermission(ZaItem.A_zimbraId,o)){j.push({type:_OUTPUT_,ref:ZaItem.A_zimbraId,label:ZaMsg.NAD_ZimbraID})
}if(ZaItem.hasReadPermission(ZaItem.A_zimbraCreateTimestamp,o)){j.push({type:_OUTPUT_,ref:ZaItem.A_zimbraCreateTimestamp,label:ZaMsg.LBL_zimbraCreateTimestamp,labelLocation:_LEFT_,getDisplayValue:function(){var t=ZaItem.formatServerTime(this.getInstanceValue());
if(!t){return ZaMsg.Server_Time_NA
}else{return t
}}})
}if(ZaItem.hasReadPermission(ZaResource.A_mailHost,o)){j.push({type:_OUTPUT_,ref:ZaResource.A_mailHost,labelLocation:_LEFT_,label:ZaMsg.NAD_MailServer,getDisplayValue:AjxUtil.htmlEncode})
}if(AjxUtil.isEmailAddress(o[ZaAccount.A_name],false)){j.push({type:_OUTPUT_,ref:ZaResource.A_name,label:ZaMsg.NAD_Email,labelLocation:_LEFT_,required:false,getDisplayValue:AjxUtil.htmlEncode})
}if(ZaItem.hasReadPermission(ZaResource.A_accountStatus,o)){j.push({type:_OUTPUT_,ref:ZaResource.A_accountStatus,label:ZaMsg.NAD_ResourceStatus,labelLocation:_LEFT_,choices:ZaResource.accountStatusChoices})
}if(ZaItem.hasReadPermission(ZaResource.A_zimbraCalResType,o)){j.push({type:_OUTPUT_,ref:ZaResource.A_zimbraCalResType,label:ZaMsg.NAD_ResType,labelLocation:_LEFT_,required:false,getDisplayValue:ZaResource.getResTypeLabel})
}this.tabChoices=new Array();
var e;
var f=++this.TAB_INDEX;
this.tabChoices.push({value:f,label:ZaMsg.TABT_ResourceProperties});
this.helpMap={};
this.helpMap[f]=[location.pathname,ZaUtil.HELP_URL,"managing_accounts/managing_resource.htm","?locid=",AjxEnv.DEFAULT_LOCALE].join("");
if(ZaTabView.isTAB_ENABLED(o,ZaResourceXFormView.CONTACT_TAB_ATTRS,ZaResourceXFormView.CONTACT_TAB_RIGHTS)){e=++this.TAB_INDEX;
this.tabChoices.push({value:e,label:ZaMsg.TABT_ResLocationContact})
}var q=[];
var p={type:_TOP_GROUPER_,label:ZaMsg.NAD_ResourceNameGrouper,id:"resource_form_name_group",colSizes:["275px","*"],numCols:2,items:[{ref:ZaResource.A_displayname,type:_TEXTFIELD_,msgName:ZaMsg.NAD_ResourceName,label:ZaMsg.NAD_ResourceName,labelLocation:_LEFT_,width:"200px"},{ref:ZaResource.A_name,type:_EMAILADDR_,msgName:ZaMsg.NAD_ResAccountName,label:ZaMsg.NAD_ResAccountName,labelLocation:_LEFT_,enableDisableChecks:[[XFormItem.prototype.hasRight,ZaResource.RENAME_CALRES_RIGHT]],visibilityChecks:[]}]};
var l={type:_TOP_GROUPER_,label:ZaMsg.NAD_ResourceSetupGrouper,id:"resource_form_setup_group",colSizes:["275px","*"],numCols:2,items:[{ref:ZaResource.A_zimbraCalResType,type:_OSELECT1_,msgName:ZaMsg.NAD_ResType,label:ZaMsg.NAD_ResType,labelLocation:_LEFT_,choices:ZaResource.resTypeChoices}]};
l.items.push({type:_GROUP_,numCols:3,nowrap:true,label:ZaMsg.NAD_ClassOfService,labelLocation:_LEFT_,visibilityChecks:[[ZaItem.hasWritePermission,ZaResource.A_COSId]],items:[{ref:ZaResource.A_COSId,type:_INPUT_,onChange:ZaAccount.setCosChanged,enableDisableChecks:[[XForm.checkInstanceValue,ZaResource.A2_autoCos,"FALSE"]],enableDisableChangeEventSources:[ZaResource.A2_autoCos],getDisplayValue:function(u){this.createDataList(ZaApp.getInstance().getCosListName());
if(u){var t=ZaCos.getCosById(u);
return t&&t.name
}}},{ref:ZaResource.A2_autoCos,type:_CHECKBOX_,msgName:ZaMsg.NAD_Auto,label:ZaMsg.NAD_Auto,labelLocation:_RIGHT_,subLabel:"",trueValue:"TRUE",falseValue:"FALSE",elementChanged:function(v,u,t){this.getForm().parent.setDirty(true);
if(v=="TRUE"){ZaAccount.setDefaultCos(this.getInstance(),this.getForm().parent._app);
this.getParentItem().getItems()[0].updateElement(null)
}this.getForm().itemChanged(this,v,t)
},enableDisableChecks:[[ZaItem.hasWritePermission,ZaAccount.A_COSId]],visibilityChecks:[]}]});
l.items.push({ref:ZaResource.A_accountStatus,type:_OSELECT1_,editable:false,msgName:ZaMsg.NAD_ResourceStatus,label:ZaMsg.NAD_ResourceStatus,labelLocation:_LEFT_,choices:ZaResource.accountStatusChoices});
l.items.push({ref:ZaResource.A_zimbraCalResAutoDeclineRecurring,type:_CHECKBOX_,msgName:ZaMsg.NAD_DeclineRecurring,label:ZaMsg.NAD_DeclineRecurring,trueValue:"TRUE",falseValue:"FALSE"});
l.items.push({ref:ZaResource.A2_schedulePolicy,type:_OSELECT1_,msgName:ZaMsg.NAD_ResType,label:ZaMsg.NAD_SchedulePolicy,visibilityChecks:[[ZaItem.hasWritePermission,ZaResource.A_zimbraCalResAutoAcceptDecline],[ZaItem.hasWritePermission,ZaResource.A_zimbraCalResAutoDeclineIfBusy]],enableDisableChecks:[[ZaItem.hasReadPermission,ZaResource.A_zimbraCalResAutoAcceptDecline],[ZaItem.hasReadPermission,ZaResource.A_zimbraCalResAutoDeclineIfBusy]],labelLocation:_LEFT_,width:"320px",choices:ZaResource.schedulePolicyChoices});
l.items.push({ref:ZaResource.A_zimbraCalResMaxNumConflictsAllowed,type:_TEXTFIELD_,msgName:ZaMsg.zimbraCalResMaxNumConflictsAllowed,label:ZaMsg.zimbraCalResMaxNumConflictsAllowed,enableDisableChecks:[ZaResource.isAutoDeclineEnabled,[XForm.checkInstanceValueNot,ZaResource.A_zimbraCalResAutoDeclineRecurring,"TRUE"]],enableDisableChangeEventSources:[ZaResource.A2_schedulePolicy,ZaResource.A_zimbraCalResAutoDeclineRecurring],labelLocation:_LEFT_,cssClass:"admin_xform_number_input"});
l.items.push({ref:ZaResource.A_zimbraCalResMaxPercentConflictsAllowed,type:_TEXTFIELD_,msgName:ZaMsg.zimbraCalResMaxPercentConflictsAllowed,label:ZaMsg.zimbraCalResMaxPercentConflictsAllowed,enableDisableChecks:[ZaResource.isAutoDeclineEnabled,[XForm.checkInstanceValueNot,ZaResource.A_zimbraCalResAutoDeclineRecurring,"TRUE"]],enableDisableChangeEventSources:[ZaResource.A2_schedulePolicy,ZaResource.A_zimbraCalResAutoDeclineRecurring],labelLocation:_LEFT_,cssClass:"admin_xform_number_input"});
var b={type:_GROUP_,id:"resource_form_forwarding_group",numCols:2,label:null,colSizes:["275px","425px"],colSpan:"*",visibilityChecks:[[ZaItem.hasReadPermission,ZaResource.A_zimbraPrefCalendarForwardInvitesTo]],items:[{ref:ZaResource.A_zimbraPrefCalendarForwardInvitesTo,type:_DWT_LIST_,height:"100",width:"350px",forceUpdate:true,preserveSelection:false,multiselect:true,cssClass:"DLSource",headerList:null,onSelection:ZaResourceXFormView.calFwdAddrSelectionListener,label:ZaMsg.zimbraPrefCalendarForwardInvitesTo,visibilityChecks:[ZaItem.hasReadPermission],labelCssClass:"gridGroupBodyLabel",labelCssStyle:"text-align:left;border-right:1px solid;",getDisplayValue:AjxUtil.htmlEncode},{type:_GROUP_,numCols:6,width:"625px",colSizes:["275","100px","auto","100px","auto","100px"],colSpan:2,cssStyle:"margin:10px;padding-bottom:0;",items:[{type:_CELLSPACER_},{type:_DWT_BUTTON_,label:ZaMsg.TBB_Delete,width:"100px",onActivate:"ZaResourceXFormView.deleteCalFwdAddrButtonListener.call(this);",enableDisableChecks:[ZaResourceXFormView.isDeleteCalFwdAddrEnabled,[ZaItem.hasWritePermission,ZaResource.A_zimbraPrefCalendarForwardInvitesTo]],enableDisableChangeEventSources:[ZaResource.A2_calFwdAddr_selection_cache]},{type:_CELLSPACER_},{type:_DWT_BUTTON_,label:ZaMsg.TBB_Edit,width:"100px",onActivate:"ZaResourceXFormView.editCalFwdAddrButtonListener.call(this);",enableDisableChecks:[ZaResourceXFormView.isEditCalFwdAddrEnabled,[ZaItem.hasWritePermission,ZaResource.A_zimbraPrefCalendarForwardInvitesTo]],enableDisableChangeEventSources:[ZaResource.A2_calFwdAddr_selection_cache]},{type:_CELLSPACER_},{type:_DWT_BUTTON_,label:ZaMsg.NAD_Add,width:"100px",enableDisableChecks:[[ZaItem.hasWritePermission,ZaResource.A_zimbraPrefCalendarForwardInvitesTo]],onActivate:"ZaResourceXFormView.addCalFwdAddrButtonListener.call(this);"}]}]};
l.items.push(b);
var g={type:_TOP_GROUPER_,label:ZaMsg.NAD_PasswordGrouper,id:"resource_form_password_group",visibilityChecks:[[XFormItem.prototype.hasAnyRight,[ZaResource.SET_CALRES_PASSWORD_RIGHT,ZaResource.CHANGE_CALRES_PASSWORD_RIGHT]]],colSizes:["275px","*"],numCols:2,items:[{ref:ZaResource.A_password,type:_SECRET_,msgName:ZaMsg.NAD_Password,label:ZaMsg.NAD_Password,labelLocation:_LEFT_,cssClass:"admin_xform_name_input",visibilityChecks:[],enableDisableChecks:[]},{ref:ZaResource.A2_confirmPassword,type:_SECRET_,msgName:ZaMsg.NAD_ConfirmPassword,label:ZaMsg.NAD_ConfirmPassword,labelLocation:_LEFT_,cssClass:"admin_xform_name_input",visibilityChecks:[],enableDisableChecks:[]}]};
var c={type:_TOP_GROUPER_,label:ZaMsg.NAD_SignatureGrouper,id:"resource_form_signature_group",visibilityChecks:[ZaResourceXFormView.isSignatureSectionVisible],colSizes:["275px","*"],numCols:2,items:[{type:_GROUP_,id:"resource_form_allsignature_group",numCols:2,label:null,colSizes:["275px","*"],colSpan:"*",items:[{ref:ZaResource.A2_signatureList,type:_DWT_LIST_,height:"100",width:"350px",forceUpdate:true,preserveSelection:false,multiselect:true,cssClass:"DLSource",headerList:null,label:ZaMsg.NAD_AllSignature,labelCssClass:"gridGroupBodyLabel",labelCssStyle:"text-align:left;border-right:1px solid;",onSelection:ZaResourceXFormView.SignatureSelectionListener,bmolsnr:true,getDisplayValue:function(w){var v=this.getForm().parent;
var t=this.getInstance();
var u=ZaSignature.getSignatureChoices(t[ZaResource.A2_signatureList]);
v.signatureChoices.setChoices(u);
v.signatureChoices.dirtyChoices();
return w.map(function(x){return new ZaSignature(AjxStringUtil.htmlEncode(x.name),x.id,AjxStringUtil.htmlEncode(x.content),x.type)
})
}},{type:_GROUP_,numCols:6,width:"625px",colSizes:["275","100px","auto","100px","auto","100px"],colSpan:2,cssStyle:"margin:10px;padding-bottom:0;",items:[{type:_CELLSPACER_},{type:_DWT_BUTTON_,label:ZaMsg.TBB_Delete,width:"100px",onActivate:"ZaResourceXFormView.deleteSignatureButtonListener.call(this);",enableDisableChecks:[ZaResourceXFormView.isDeleteSignatureEnabled],enableDisableChangeEventSources:[ZaResource.A2_signature_selection_cache]},{type:_CELLSPACER_},{type:_DWT_BUTTON_,label:ZaMsg.TBB_Edit,width:"100px",onActivate:"ZaResourceXFormView.editSignatureButtonListener.call(this);",enableDisableChecks:[ZaResourceXFormView.isEditSignatureEnabled],enableDisableChangeEventSources:[ZaResource.A2_signature_selection_cache]},{type:_CELLSPACER_},{type:_DWT_BUTTON_,label:ZaMsg.NAD_Add,width:"100px",enableDisableChecks:[[ZaItem.hasWritePermission,ZaResource.A_zimbraPrefCalendarForwardInvitesTo]],onActivate:"ZaResourceXFormView.addSignatureButtonListener.call(this);"}]}]},{ref:ZaResource.A_zimbraPrefCalendarAutoAcceptSignatureId,type:_OSELECT1_,msgName:ZaMsg.NAD_zimbraPrefCalendarAutoAcceptSignatureId,width:"280px",label:ZaMsg.NAD_zimbraPrefCalendarAutoAcceptSignatureId,labelLocation:_LEFT_,visibilityChecks:[ZaItem.hasReadPermission],enableDisableChecks:[ZaResourceXFormView.isSignatureSelectionEnabled,ZaItem.hasWritePermission],enableDisableChangeEventSources:[ZaResource.A2_signatureList],valueChangeEventSources:[ZaResource.A2_signatureList],choices:this.signatureChoices},{ref:ZaResource.A_zimbraPrefCalendarAutoDeclineSignatureId,type:_OSELECT1_,msgName:ZaMsg.NAD_zimbraPrefCalendarAutoDeclineSignatureId,width:"280px",label:ZaMsg.NAD_zimbraPrefCalendarAutoDeclineSignatureId,labelLocation:_LEFT_,visibilityChecks:[ZaItem.hasReadPermission],enableDisableChecks:[ZaResourceXFormView.isSignatureSelectionEnabled,ZaItem.hasWritePermission],enableDisableChangeEventSources:[ZaResource.A2_signatureList],valueChangeEventSources:[ZaResource.A2_signatureList],choices:this.signatureChoices},{ref:ZaResource.A_zimbraPrefCalendarAutoDenySignatureId,type:_OSELECT1_,msgName:ZaMsg.NAD_zimbraPrefCalendarAutoDenySignatureId,width:"280px",label:ZaMsg.NAD_zimbraPrefCalendarAutoDenySignatureId,labelLocation:_LEFT_,visibilityChecks:[ZaItem.hasReadPermission],enableDisableChecks:[ZaResourceXFormView.isSignatureSelectionEnabled,ZaItem.hasWritePermission],enableDisableChangeEventSources:[ZaResource.A2_signatureList],valueChangeEventSources:[ZaResource.A2_signatureList],choices:this.signatureChoices}]};
var s={type:_TOP_GROUPER_,label:ZaMsg.NAD_NotesGrouper,id:"resource_form_notes_group",colSizes:["275px","*"],numCols:2,items:[ZaItem.descriptionXFormItem,{ref:ZaResource.A_notes,type:_TEXTAREA_,width:"300px",msgName:ZaMsg.NAD_Notes,label:ZaMsg.NAD_Notes,labelLocation:_LEFT_}]};
var n={type:_ZATABCASE_,numCols:1,caseKey:f,paddingStyle:"padding-left:15px;",width:"98%",cellpadding:2,items:[p,l,g,c,s]};
q.push(n);
var r=200;
if(e){this.helpMap[e]=[location.pathname,ZaUtil.HELP_URL,"managing_accounts/managing_resource.htm","?locid=",AjxEnv.DEFAULT_LOCALE].join("");
var m={type:_ZATABCASE_,numCols:1,caseKey:e,paddingStyle:"padding-left:15px;",width:"98%",cellpadding:2,items:[{type:_ZA_TOP_GROUPER_,label:ZaMsg.NAD_ContactInfo,items:[{ref:ZaResource.A_zimbraCalResContactName,type:_TEXTFIELD_,msgName:ZaMsg.NAD_ContactName,label:ZaMsg.NAD_ContactName,labelLocation:_LEFT_,width:r},{ref:ZaResource.A_zimbraCalResContactEmail,type:_TEXTFIELD_,msgName:ZaMsg.NAD_ContactEmail,label:ZaMsg.NAD_ContactEmail,labelLocation:_LEFT_,width:r},{ref:ZaResource.A_zimbraCalResContactPhone,type:_TEXTFIELD_,msgName:ZaMsg.NAD_ContactPhone,label:ZaMsg.NAD_ContactPhone,labelLocation:_LEFT_,width:r},{ref:ZaResource.A_contactInfoAutoComplete,type:_AUTO_COMPLETE_LIST_,matchValue:ZaContactList.matchValue,matchText:ZaContactList.matchText,dataLoaderClass:ZaContactList,dataLoaderMethod:ZaContactList.prototype.getContactList,compCallback:ZaContactList.prototype._autocompleteCallback,inputFieldElementId:ZaResource.A_zimbraCalResContactName}]},{type:_ZA_TOP_GROUPER_,label:ZaMsg.NAD_LocationInfo,colSizes:["275px","*"],numCols:2,items:[{type:_GROUP_,numCols:3,colSizes:["156px","22px","100px"],nowrap:true,msgName:ZaMsg.NAD_LocationDisplayName,label:ZaMsg.NAD_LocationDisplayName,labelLocation:_LEFT_,visibilityChecks:[[ZaItem.hasReadPermission,ZaResource.A_locationDisplayName]],items:[{ref:ZaResource.A_locationDisplayName,type:_TEXTFIELD_,label:null,cssClass:"admin_xform_name_input",width:r,enableDisableChecks:[ZaResourceXFormView.isAutoDisplayname,ZaItem.hasWritePermission],enableDisableChangeEventSources:[ZaResource.A2_autoLocationName],bmolsnr:true},{ref:ZaResource.A2_autoLocationName,type:_CHECKBOX_,msgName:ZaMsg.NAD_Auto,subLabel:"",label:ZaMsg.NAD_Auto,labelLocation:_RIGHT_,trueValue:"TRUE",falseValue:"FALSE",elementChanged:ZaResource.setAutoLocationName,enableDisableChecks:[[ZaItem.hasWritePermission,ZaResource.A_locationDisplayName]],visibilityChecks:[[ZaItem.hasReadPermission,ZaResource.A_locationDisplayName]]}]},{ref:ZaResource.A_zimbraCalResSite,type:_TEXTFIELD_,msgName:ZaMsg.NAD_Site,label:ZaMsg.NAD_Site,labelLocation:_LEFT_,width:r,elementChanged:ZaResource.setAutoLocationName},{ref:ZaResource.A_zimbraCalResBuilding,type:_TEXTFIELD_,msgName:ZaMsg.NAD_Building,label:ZaMsg.NAD_Building,labelLocation:_LEFT_,width:r,elementChanged:ZaResource.setAutoLocationName},{ref:ZaResource.A_zimbraCalResFloor,type:_TEXTFIELD_,msgName:ZaMsg.NAD_Floor,label:ZaMsg.NAD_Floor,labelLocation:_LEFT_,width:r,elementChanged:ZaResource.setAutoLocationName},{ref:ZaResource.A_zimbraCalResRoom,type:_TEXTFIELD_,msgName:ZaMsg.NAD_Room,label:ZaMsg.NAD_Room,labelLocation:_LEFT_,width:r,elementChanged:ZaResource.setAutoLocationName},{ref:ZaResource.A_zimbraCalResCapacity,type:_TEXTFIELD_,msgName:ZaMsg.NAD_Capacity,label:ZaMsg.NAD_Capacity,labelLocation:_LEFT_,width:r,visibilityChecks:[ZaResource.isLocation],visibilityChangeEventSources:[ZaResource.A_zimbraCalResType]}]},{type:_ZA_TOP_GROUPER_,label:ZaMsg.NAD_Address,items:ZaAccountXFormView.getAddressFormItem()}]};
q.push(m)
}k.tableCssStyle="width:100%;";
k.items=[{type:_GROUP_,cssClass:"ZmSelectedHeaderBg",colSpan:"*",id:"xform_header",items:[{type:_GROUP_,numCols:4,colSizes:["60px","*","80px","*"],items:j}]},{type:_TAB_BAR_,ref:ZaModel.currentTab,choices:this.tabChoices,cssClass:"ZaTabBar",cssStyle:"display:none;",id:"xform_tabbar"},{type:_SWITCH_,align:_LEFT_,valign:_TOP_,items:q}]
};
ZaTabView.XFormModifiers.ZaResourceXFormView.push(ZaResourceXFormView.myXFormModifier);
ZaResourceXFormView.prototype.getTabChoices=function(){return this.tabChoices
}
}if(AjxPackage.define("zimbraAdmin.resource.view.ZaNewResourceXWizard")){ZaNewResourceXWizard=function(b){ZaXWizardDialog.call(this,b,null,ZaMsg.NCD_NewResTitle,"760px","300px","ZaNewResourceXWizard",null,ZaId.DLG_NEW_RES);
this.TAB_INDEX=0;
ZaNewResourceXWizard.step1=++this.TAB_INDEX;
ZaNewResourceXWizard.step2=++this.TAB_INDEX;
ZaNewResourceXWizard.step3=++this.TAB_INDEX;
if(!ZaResource.accountStatusChoices){ZaResource.accountStatusChoices=[{value:ZaResource.ACCOUNT_STATUS_ACTIVE,label:ZaResource.getAccountStatusLabel(ZaResource.ACCOUNT_STATUS_ACTIVE)},{value:ZaResource.ACCOUNT_STATUS_CLOSED,label:ZaResource.getAccountStatusLabel(ZaResource.ACCOUNT_STATUS_CLOSED)}]
}this.stepChoices=[{label:ZaMsg.TABT_ResourceProperties,value:ZaNewResourceXWizard.step1},{label:ZaMsg.TABT_ResLocationContact,value:ZaNewResourceXWizard.step2},{label:ZaMsg.TABT_SignatureProperties,value:ZaNewResourceXWizard.step3}];
this.signatureChoices=new XFormChoices([],XFormChoices.OBJECT_LIST,"id","name");
this._lastStep=this.stepChoices.length;
this.initForm(ZaResource.myXModel,this.getMyXForm());
this._localXForm.setController(ZaApp.getInstance());
this._localXForm.addListener(DwtEvent.XFORMS_FORM_DIRTY_CHANGE,new AjxListener(this,ZaNewResourceXWizard.prototype.handleXFormChange));
this._localXForm.addListener(DwtEvent.XFORMS_VALUE_ERROR,new AjxListener(this,ZaNewResourceXWizard.prototype.handleXFormChange));
this._helpURL=ZaNewResourceXWizard.helpURL;
this._domains={}
};
ZaNewResourceXWizard.prototype=new ZaXWizardDialog;
ZaNewResourceXWizard.prototype.constructor=ZaNewResourceXWizard;
ZaXDialog.XFormModifiers.ZaNewResourceXWizard=new Array();
ZaNewResourceXWizard.helpURL=location.pathname+ZaUtil.HELP_URL+"managing_accounts/managing_resource.htm?locid="+AjxEnv.DEFAULT_LOCALE;
ZaNewResourceXWizard.prototype.handleXFormChange=function(){if(this._localXForm.hasErrors()){this._button[DwtWizardDialog.FINISH_BUTTON].setEnabled(false)
}else{if(this._containedObject.attrs[ZaResource.A_displayname]&&this._containedObject[ZaResource.A_name].indexOf("@")>0){this._button[DwtWizardDialog.FINISH_BUTTON].setEnabled(true);
if(this._containedObject[ZaModel.currentStep]!=this._lastStep){this._button[DwtWizardDialog.NEXT_BUTTON].setEnabled(true)
}if(this._containedObject[ZaModel.currentStep]!=1){this._button[DwtWizardDialog.PREV_BUTTON].setEnabled(true)
}}}};
ZaNewResourceXWizard.prototype.popup=function(b){ZaXWizardDialog.prototype.popup.call(this,b);
this._button[DwtWizardDialog.NEXT_BUTTON].setEnabled(false);
this._button[DwtWizardDialog.FINISH_BUTTON].setEnabled(false);
this._button[DwtWizardDialog.PREV_BUTTON].setEnabled(false)
};
ZaNewResourceXWizard.prototype.createDomainAndAccount=function(c){try{var e=new ZaDomain();
e.name=c;
e.attrs[ZaDomain.A_domainName]=c;
var d=ZaItem.create(e,ZaDomain,"ZaDomain");
if(d!=null){ZaApp.getInstance().getCurrentController().closeCnfrmDelDlg();
this.finishWizard()
}}catch(b){ZaApp.getInstance().getCurrentController()._handleException(b,"ZaNewResourceXWizard.prototype.createDomainAndAccount",null,false)
}};
ZaNewResourceXWizard.prototype.finishWizard=function(){try{if(!ZaResource.checkValues(this._containedObject)){return false
}var c=ZaItem.create(this._containedObject,ZaResource,"ZaResource");
if(c!=null){ZaApp.getInstance().getResourceController().fireCreationEvent(c);
this.popdown();
ZaApp.getInstance().getAppCtxt().getAppController().setActionStatusMsg(AjxMessageFormat.format(ZaMsg.ResourceCreated,[c.name]))
}}catch(b){switch(b.code){case ZmCsfeException.ACCT_EXISTS:ZaApp.getInstance().getCurrentController().popupErrorDialog(ZaMsg.ERROR_ACCOUNT_EXISTS);
break;
case ZmCsfeException.ACCT_INVALID_PASSWORD:ZaApp.getInstance().getCurrentController().popupErrorDialog(ZaMsg.ERROR_PASSWORD_INVALID,b);
ZaApp.getInstance().getAppCtxt().getErrorDialog().showDetail(true);
break;
case ZmCsfeException.NO_SUCH_COS:ZaApp.getInstance().getCurrentController().popupErrorDialog(AjxMessageFormat.format(ZaMsg.ERROR_NO_SUCH_COS,[this._containedObject.attrs[ZaAccount.A_COSId]]),b);
break;
case ZmCsfeException.SIGNATURE_EXISTS:this.popdown();
ZaApp.getInstance().getCurrentController()._handleException(b,"ZaNewResourceXWizard.prototype.finishWizard",null,false);
break;
case ZmCsfeException.NO_SUCH_DOMAIN:ZaApp.getInstance().dialogs.confirmMessageDialog2.setMessage(AjxMessageFormat.format(ZaMsg.CreateDomain_q,[ZaAccount.getDomain(this._containedObject.name)]),DwtMessageDialog.WARNING_STYLE);
ZaApp.getInstance().dialogs.confirmMessageDialog2.registerCallback(DwtDialog.YES_BUTTON,this.createDomainAndAccount,this,[ZaAccount.getDomain(this._containedObject.name)]);
ZaApp.getInstance().dialogs.confirmMessageDialog2.registerCallback(DwtDialog.NO_BUTTON,ZaController.prototype.closeCnfrmDelDlg,ZaApp.getInstance().getCurrentController(),null);
ZaApp.getInstance().dialogs.confirmMessageDialog2.popup();
break;
default:ZaApp.getInstance().getCurrentController()._handleException(b,"ZaNewResourceXWizard.prototype.finishWizard",null,false);
break
}}};
ZaNewResourceXWizard.prototype.goNext=function(){if(this._containedObject[ZaModel.currentStep]==1){if(this._containedObject.attrs[ZaResource.A_password]){if(this._containedObject.attrs[ZaResource.A_password]!=this._containedObject[ZaResource.A2_confirmPassword]){ZaApp.getInstance().getCurrentController().popupErrorDialog(ZaMsg.ERROR_PASSWORD_MISMATCH);
return false
}}this._button[DwtWizardDialog.PREV_BUTTON].setEnabled(true);
var e={query:["(|(uid=",this._containedObject[ZaResource.A_name],")(cn=",this._containedObject[ZaResource.A_name],")(sn=",this._containedObject[ZaResource.A_name],")(gn=",this._containedObject[ZaResource.A_name],")(mail=",this._containedObject[ZaResource.A_name],")(zimbraMailDeliveryAddress=",this._containedObject[ZaResource.A_name],"))"].join(""),limit:2,applyCos:0,controller:ZaApp.getInstance().getCurrentController(),types:[ZaSearch.DLS,ZaSearch.ALIASES,ZaSearch.ACCOUNTS,ZaSearch.RESOURCES]};
var d=ZaSearch.searchDirectory(e).Body.SearchDirectoryResponse;
var c=new ZaItemList();
c.loadFromJS(d);
if(c.size()>0){var b=c.getArray()[0];
if(b.type==ZaItem.ALIAS){ZaApp.getInstance().getCurrentController().popupErrorDialog(ZaMsg.ERROR_aliasWithThisNameExists)
}else{if(b.type==ZaItem.RESOURCE){ZaApp.getInstance().getCurrentController().popupErrorDialog(ZaMsg.ERROR_resourceWithThisNameExists)
}else{if(b.type==ZaItem.DL){ZaApp.getInstance().getCurrentController().popupErrorDialog(ZaMsg.ERROR_dlWithThisNameExists)
}else{ZaApp.getInstance().getCurrentController().popupErrorDialog(ZaMsg.ERROR_accountWithThisNameExists)
}}}return false
}this._button[DwtWizardDialog.PREV_BUTTON].setEnabled(true)
}this.goPage(this._containedObject[ZaModel.currentStep]+1);
if(this._containedObject[ZaModel.currentStep]==this._lastStep){this._button[DwtWizardDialog.NEXT_BUTTON].setEnabled(false)
}};
ZaNewResourceXWizard.prototype.goPrev=function(){if(this._containedObject[ZaModel.currentStep]==2){this._button[DwtWizardDialog.PREV_BUTTON].setEnabled(false)
}this._button[DwtWizardDialog.NEXT_BUTTON].setEnabled(true);
this.goPage(this._containedObject[ZaModel.currentStep]-1)
};
ZaNewResourceXWizard.prototype.setObject=function(e){this._containedObject=new ZaResource();
this._containedObject.attrs=new Object();
for(var b in e.attrs){this._containedObject.attrs[b]=e.attrs[b]
}if(e.name){this._containedObject.name=e.name
}if(e.rights){this._containedObject.rights=e.rights
}if(e.setAttrs){this._containedObject.setAttrs=e.setAttrs
}if(e.getAttrs){this._containedObject.getAttrs=e.getAttrs
}if(e._defaultValues){this._containedObject._defaultValues=e._defaultValues
}this._containedObject.id=e.id||null;
if(e._uuid){this._containedObject._uuid=e._uuid
}this._containedObject.attrs[ZaResource.A_zimbraCalResType]=e.attrs[ZaResource.A_zimbraCalResType]||ZaResource.RESOURCE_TYPE_LOCATION;
this._containedObject[ZaResource.A2_schedulePolicy]=e[ZaResource.A2_schedulePolicy]||ZaResource.SCHEDULE_POLICY_TT;
this._containedObject.attrs[ZaResource.A_accountStatus]=e.attrs[ZaResource.A_accountStatus]||ZaResource.ACCOUNT_STATUS_ACTIVE;
this._containedObject[ZaResource.A2_autodisplayname]=e[ZaResource.A2_autodisplayname]||"TRUE";
this._containedObject[ZaResource.A2_autoMailServer]=e[ZaResource.A2_autoMailServer]||"TRUE";
this._containedObject[ZaResource.A2_autoCos]=e[ZaResource.A2_autoCos]||"TRUE";
this._containedObject[ZaResource.A2_autoLocationName]=e[ZaResource.A2_autoLocationName]||"TRUE";
this._containedObject[ZaResource.A2_confirmPassword]=e[ZaResource.A2_confirmPassword]||null;
this._containedObject[ZaModel.currentStep]=e[ZaModel.currentStep]||1;
this._containedObject[ZaResource.A2_signatureList]=e[ZaResource.A2_signatureList]||[];
this.signatureChoices.setChoices(ZaSignature.getNewSignatureChoices(this._containedObject[ZaResource.A2_signatureList]));
this.signatureChoices.dirtyChoices();
var d;
if(!d){try{d=ZaApp.getInstance().getGlobalConfig().attrs[ZaGlobalConfig.A_zimbraDefaultDomainName]
}catch(c){if(c.code!=ZmCsfeException.SVC_PERM_DENIED){throw (c)
}}}if(!d){d=ZaSettings.myDomainName
}if(e[ZaResource.A_name]){this._containedObject[ZaResource.A_name]=e[ZaResource.A_name]
}else{this._containedObject[ZaResource.A_name]="@"+d
}this._localXForm.setInstance(this._containedObject)
};
ZaNewResourceXWizard.onCOSChanged=function(d,c,b){if(ZaItem.ID_PATTERN.test(d)){b.getInstance()._defaultValues=ZaCos.getCosById(d,b.parent._app);
this.setInstanceValue(d)
}else{b.getInstance()._defaultValues=ZaCos.getCosByName(d,b.parent._app);
if(b.getInstance().cos){d=b.getInstance()._defaultValues.id
}}this.setInstanceValue(d);
b.parent._isCosChanged=true;
return d
};
ZaNewResourceXWizard.isAutoDisplayname=ZaResourceXFormView.isAutoDisplayname;
ZaNewResourceXWizard.myXFormModifier=function(e){ZaResource.resTypeChoices=[{value:ZaResource.RESOURCE_TYPE_LOCATION,label:ZaMsg.resType_location},{value:ZaResource.RESOURCE_TYPE_EQUIPMENT,label:ZaMsg.resType_equipment}];
ZaResource.schedulePolicyChoices=[{value:ZaResource.SCHEDULE_POLICY_TT,label:ZaMsg.resScheduleTT},{value:ZaResource.SCHEDULE_POLICY_FT,label:ZaMsg.resScheduleFT},{value:ZaResource.SCHEDULE_POLICY_TF,label:ZaMsg.resScheduleTF},{value:ZaResource.SCHEDULE_POLICY_FF,label:ZaMsg.resScheduleFF}];
var c;
c=ZaSettings.myDomainName;
var k="@"+c;
var m=new Array();
this.cosChoices=new XFormChoices([],XFormChoices.OBJECT_LIST,"id","name");
var l={type:_ZAWIZ_TOP_GROUPER_,label:ZaMsg.NAD_ResourceNameGrouper,id:"resource_wiz_name_group",numCols:2,items:[{ref:ZaResource.A_displayname,type:_TEXTFIELD_,msgName:ZaMsg.NAD_ResourceName,label:ZaMsg.NAD_ResourceName,labelLocation:_LEFT_,elementChanged:function(v,t,s){if(this.getInstance()[ZaResource.A2_autodisplayname]=="TRUE"){try{var p=this.getInstanceValue(ZaResource.A_name);
var u=/[^a-zA-Z0-9_\-\.]/g;
var q=v.replace(u,"")+p.substring(p.indexOf("@"));
this.getModel().setInstanceValue(this.getInstance(),ZaResource.A_name,q);
this.getModel().setInstanceValue(this.getInstance(),ZaResource.A2_autodisplayname,"TRUE")
}catch(r){ZaApp.getInstance().getCurrentController()._handleException(r,"XForm."+ZaResource.A_displayname+".elementChanged",null,false)
}}this.getForm().itemChanged(this,v,s)
}},{ref:ZaResource.A_name,type:_EMAILADDR_,msgName:ZaMsg.NAD_ResAccountName,label:ZaMsg.NAD_ResAccountName,labelLocation:_LEFT_,id:"resource_email_addr",bmolsnr:true,onChange:function(r,q,p){this.getModel().setInstanceValue(this.getInstance(),ZaResource.A2_autodisplayname,"FALSE");
this.setInstanceValue(r)
},visibilityChecks:[],enableDisableChecks:[]}]};
var f={type:_ZAWIZ_TOP_GROUPER_,label:ZaMsg.NAD_ResourceSetupGrouper,id:"resource_wiz_name_group",numCols:2,items:[{ref:ZaResource.A_zimbraCalResType,type:_OSELECT1_,msgName:ZaMsg.NAD_ResType,label:ZaMsg.NAD_ResType,labelLocation:_LEFT_,choices:ZaResource.resTypeChoices,visibilityChecks:[],enableDisableChecks:[]}]};
f.items.push({type:_GROUP_,numCols:3,nowrap:true,label:ZaMsg.NAD_ClassOfService,labelLocation:_LEFT_,visibilityChecks:[[ZaItem.hasWritePermission,ZaAccount.A_COSId]],items:[{ref:ZaResource.A_COSId,type:_INPUT_,label:null,onChange:ZaAccount.setCosChanged,enableDisableChecks:[[XForm.checkInstanceValue,ZaResource.A2_autoCos,"FALSE"]],enableDisableChangeEventSources:[ZaResource.A2_autoCos],getDisplayValue:function(q){if(q){var p=ZaCos.getCosById(q);
return p&&p.name
}}},{ref:ZaResource.A2_autoCos,type:_WIZ_CHECKBOX_,msgName:ZaMsg.NAD_Auto,label:ZaMsg.NAD_Auto,labelLocation:_RIGHT_,trueValue:"TRUE",falseValue:"FALSE",elementChanged:function(t,r,q){var s=this.getParentItem().getItems()[0];
var p=this.getForm();
if(t=="TRUE"){s.updateElement(null);
ZaAccount.setDefaultCos(this.getInstance(),p.parent._app)
}else{s.createDataList(ZaApp.getInstance().getCosListName())
}p.itemChanged(this,t,q)
},visibilityChecks:[],enableDisableChecks:[[ZaItem.hasWritePermission,ZaAccount.A_COSId]]}]});
f.items.push({ref:ZaResource.A_accountStatus,type:_OSELECT1_,editable:false,msgName:ZaMsg.NAD_ResourceStatus,label:ZaMsg.NAD_ResourceStatus,labelLocation:_LEFT_,choices:ZaResource.accountStatusChoices,visibilityChecks:[[ZaItem.hasWritePermission,ZaResource.A_accountStatus]],enableDisableChecks:[]});
f.items.push({ref:ZaResource.A_zimbraCalResAutoDeclineRecurring,type:_WIZ_CHECKBOX_,msgName:ZaMsg.NAD_DeclineRecurring,label:ZaMsg.NAD_DeclineRecurring,labelCssClass:"xform_label",align:_LEFT_,labelLocation:_LEFT_,trueValue:"TRUE",falseValue:"FALSE"});
f.items.push({ref:ZaResource.A2_schedulePolicy,type:_OSELECT1_,msgName:ZaMsg.NAD_ResType,visibilityChecks:[[ZaItem.hasWritePermission,ZaResource.A_zimbraCalResAutoAcceptDecline],[ZaItem.hasWritePermission,ZaResource.A_zimbraCalResAutoDeclineIfBusy]],enableDisableChecks:[],label:ZaMsg.NAD_SchedulePolicy,labelLocation:_LEFT_,choices:ZaResource.schedulePolicyChoices});
f.items.push({ref:ZaResource.A_zimbraCalResMaxNumConflictsAllowed,type:_TEXTFIELD_,msgName:ZaMsg.zimbraCalResMaxNumConflictsAllowed,label:ZaMsg.zimbraCalResMaxNumConflictsAllowed,enableDisableChecks:[ZaResource.isAutoDeclineEnabled,[XForm.checkInstanceValueNot,ZaResource.A_zimbraCalResAutoDeclineRecurring,"TRUE"]],enableDisableChangeEventSources:[ZaResource.A_zimbraCalResAutoDeclineRecurring,ZaResource.A2_schedulePolicy],labelLocation:_LEFT_,cssClass:"admin_xform_number_input"});
f.items.push({ref:ZaResource.A_zimbraCalResMaxPercentConflictsAllowed,type:_TEXTFIELD_,msgName:ZaMsg.zimbraCalResMaxPercentConflictsAllowed,label:ZaMsg.zimbraCalResMaxPercentConflictsAllowed,enableDisableChecks:[ZaResource.isAutoDeclineEnabled,[XForm.checkInstanceValueNot,ZaResource.A_zimbraCalResAutoDeclineRecurring,"TRUE"]],enableDisableChangeEventSources:[ZaResource.A_zimbraCalResAutoDeclineRecurring,ZaResource.A2_schedulePolicy],labelLocation:_LEFT_,cssClass:"admin_xform_number_input"});
f.items.push({type:_GROUP_,numCols:3,nowrap:true,label:ZaMsg.NAD_MailServer,labelLocation:_LEFT_,visibilityChecks:[[ZaItem.hasWritePermission,ZaAccount.A_mailHost]],items:[{ref:ZaResource.A_mailHost,type:_OSELECT1_,label:null,editable:false,choices:ZaApp.getInstance().getServerListChoices(),visibilityChecks:[],enableDisableChecks:[ZaAccount.isAutoMailServer],enableDisableChangeEventSources:[ZaResource.A2_autoMailServer]},{ref:ZaResource.A2_autoMailServer,type:_WIZ_CHECKBOX_,msgName:ZaMsg.NAD_Auto,visibilityChecks:[],enableDisableChecks:[],label:ZaMsg.NAD_Auto,labelLocation:_RIGHT_,trueValue:"TRUE",falseValue:"FALSE"}]});
f.items.push({ref:ZaResource.A_zimbraPrefCalendarForwardInvitesTo,type:_REPEAT_,label:ZaMsg.zimbraPrefCalendarForwardInvitesTo,labelLocation:_LEFT_,labelCssClass:"xform_label",repeatInstance:k,showAddButton:true,showRemoveButton:true,addButtonLabel:ZaMsg.NAD_AddAddress,showAddOnNextRow:true,removeButtonLabel:ZaMsg.NAD_RemoveAddress,nowrap:false,labelWrap:true,items:[{ref:".",type:_TEXTFIELD_,label:null,width:250,visibilityChecks:[],enableDisableChecks:[]}]});
var d={type:_ZAWIZ_TOP_GROUPER_,label:ZaMsg.NAD_PasswordGrouper,id:"account_wiz_password_group",numCols:2,visibilityChecks:[ZaNewResourceXWizard.canSetPassword],items:[{ref:ZaResource.A_password,type:_SECRET_,msgName:ZaMsg.NAD_Password,label:ZaMsg.NAD_Password,visibilityChecks:[],enableDisableChecks:[],labelLocation:_LEFT_,cssClass:"admin_xform_name_input"},{ref:ZaResource.A2_confirmPassword,type:_SECRET_,msgName:ZaMsg.NAD_ConfirmPassword,label:ZaMsg.NAD_ConfirmPassword,visibilityChecks:[],enableDisableChecks:[],labelLocation:_LEFT_,cssClass:"admin_xform_name_input"}]};
var o={type:_ZAWIZ_TOP_GROUPER_,label:ZaMsg.NAD_NotesGrouper,id:"account_wiz_notes_group",numCols:2,items:[{ref:ZaResource.A_description,type:_INPUT_,msgName:ZaMsg.NAD_Description,label:ZaMsg.NAD_Description,labelLocation:_LEFT_,width:"300px",cssClass:"admin_xform_name_input"},{ref:ZaResource.A_notes,type:_TEXTAREA_,msgName:ZaMsg.NAD_Notes,label:ZaMsg.NAD_Notes,labelLocation:_LEFT_}]};
var j={type:_CASE_,numCols:1,caseKey:ZaNewResourceXWizard.step1,align:_LEFT_,valign:_TOP_,items:[l,f,d,o]};
m.push(j);
var n=250;
var h={type:_CASE_,numCols:1,caseKey:ZaNewResourceXWizard.step2,items:[{type:_ZAWIZGROUP_,colSizes:["200px","275px"],items:[{ref:ZaResource.A_zimbraCalResContactName,type:_TEXTFIELD_,msgName:ZaMsg.NAD_ContactName,label:ZaMsg.NAD_ContactName,labelLocation:_LEFT_,width:n},{ref:ZaResource.A_zimbraCalResContactEmail,type:_TEXTFIELD_,msgName:ZaMsg.NAD_ContactEmail,label:ZaMsg.NAD_ContactEmail,labelLocation:_LEFT_,width:n},{ref:ZaResource.A_zimbraCalResContactPhone,type:_TEXTFIELD_,msgName:ZaMsg.NAD_ContactPhone,label:ZaMsg.NAD_ContactPhone,labelLocation:_LEFT_,width:n},{ref:ZaResource.A_contactInfoAutoComplete,type:_AUTO_COMPLETE_LIST_,matchValue:ZaContactList.matchValue,matchText:ZaContactList.matchText,dataLoaderClass:ZaContactList,dataLoaderMethod:ZaContactList.prototype.getContactList,compCallback:ZaContactList.prototype._autocompleteCallback,inputFieldElementId:ZaResource.A_zimbraCalResContactName}]},{type:_ZAWIZGROUP_,colSizes:["200px","300px"],items:[{type:_GROUP_,numCols:3,nowrap:true,width:200,msgName:ZaMsg.NAD_LocationDisplayName,label:ZaMsg.NAD_LocationDisplayName,labelLocation:_LEFT_,visibilityChecks:[[ZaItem.hasWritePermission,ZaResource.A_locationDisplayName]],items:[{ref:ZaResource.A_locationDisplayName,type:_TEXTFIELD_,label:null,width:n,enableDisableChecks:[ZaNewResourceXWizard.isAutoDisplayname,ZaItem.hasWritePermission],enableDisableChangeEventSources:[ZaResource.A2_autoLocationName],bmolsnr:true},{ref:ZaResource.A2_autoLocationName,type:_WIZ_CHECKBOX_,msgName:ZaMsg.NAD_Auto,label:ZaMsg.NAD_Auto,labelLocation:_RIGHT_,trueValue:"TRUE",falseValue:"FALSE",elementChanged:ZaResource.setAutoLocationName,enableDisableChecks:[[ZaItem.hasWritePermission,ZaResource.A_locationDisplayName]],visibilityChecks:[[ZaItem.hasWritePermission,ZaResource.A_locationDisplayName]]}]},{ref:ZaResource.A_zimbraCalResSite,type:_TEXTFIELD_,msgName:ZaMsg.NAD_Site,label:ZaMsg.NAD_Site,labelLocation:_LEFT_,width:n,elementChanged:ZaResource.setAutoLocationName},{ref:ZaResource.A_zimbraCalResBuilding,type:_TEXTFIELD_,msgName:ZaMsg.NAD_Building,label:ZaMsg.NAD_Building,labelLocation:_LEFT_,width:n,elementChanged:ZaResource.setAutoLocationName},{ref:ZaResource.A_zimbraCalResFloor,type:_TEXTFIELD_,msgName:ZaMsg.NAD_Floor,label:ZaMsg.NAD_Floor,labelLocation:_LEFT_,width:n,elementChanged:ZaResource.setAutoLocationName},{ref:ZaResource.A_zimbraCalResRoom,type:_TEXTFIELD_,msgName:ZaMsg.NAD_Room,label:ZaMsg.NAD_Room,labelLocation:_LEFT_,width:n,elementChanged:ZaResource.setAutoLocationName},{ref:ZaResource.A_zimbraCalResCapacity,type:_TEXTFIELD_,msgName:ZaMsg.NAD_Capacity,label:ZaMsg.NAD_Capacity,labelLocation:_LEFT_,width:n,visibilityChecks:[ZaResourceXFormView.isLocation],visibilityChangeEventSources:[ZaResource.A_zimbraCalResType]}]},{type:_ZAWIZGROUP_,colSizes:["200px","275px"],items:ZaAccountXFormView.getAddressFormItemForDialog()}]};
m.push(h);
var b={type:_ZAWIZGROUP_,id:"account_wiz_signature_group",numCols:2,colSpan:2,width:"100%",colSizes:["200px","auto"],items:[{ref:ZaResource.A2_signatureList,type:_REPEAT_,msgName:"",colSpan:2,label:"",labelLocation:_NONE_,addButtonLabel:ZaMsg.NAD_AddSignature,removeButtonLabel:ZaMsg.NAD_RemoveSignature,showAddOnNextRow:true,addButtonCSSStyle:"margin-left:200px",showAddButton:true,showRemoveButton:true,visibilityChecks:[ZaResourceXFormView.isSignatureSectionVisible],enableDisableChecks:[],items:[{ref:".",type:_SIGNATURE_,width:"100%",visibilityChecks:[],enableDisableChecks:[]}],getDisplayValue:function(s){var r=this.getForm().parent;
var p=this.getInstance();
var q=ZaSignature.getNewSignatureChoices(p[ZaResource.A2_signatureList]);
r.signatureChoices.setChoices(q);
r.signatureChoices.dirtyChoices();
return s
}},{ref:ZaResource.A_zimbraPrefCalendarAutoAcceptSignatureId,type:_OSELECT1_,msgName:ZaMsg.NAD_zimbraPrefCalendarAutoAcceptSignatureId,width:"280px",label:ZaMsg.NAD_zimbraPrefCalendarAutoAcceptSignatureId,labelLocation:_LEFT_,visibilityChecks:[ZaItem.hasWritePermission],enableDisableChecks:[ZaResourceXFormView.isSignatureSelectionEnabled],enableDisableChangeEventSources:[ZaResource.A2_signatureList],valueChangeEventSources:[ZaResource.A2_signatureList],choices:this.signatureChoices},{ref:ZaResource.A_zimbraPrefCalendarAutoDeclineSignatureId,type:_OSELECT1_,msgName:ZaMsg.NAD_zimbraPrefCalendarAutoDeclineSignatureId,width:"280px",label:ZaMsg.NAD_zimbraPrefCalendarAutoDeclineSignatureId,labelLocation:_LEFT_,visibilityChecks:[ZaItem.hasWritePermission],enableDisableChecks:[ZaResourceXFormView.isSignatureSelectionEnabled],enableDisableChangeEventSources:[ZaResource.A2_signatureList],valueChangeEventSources:[ZaResource.A2_signatureList],choices:this.signatureChoices},{ref:ZaResource.A_zimbraPrefCalendarAutoDenySignatureId,type:_OSELECT1_,msgName:ZaMsg.NAD_zimbraPrefCalendarAutoDenySignatureId,width:"280px",label:ZaMsg.NAD_zimbraPrefCalendarAutoDenySignatureId,labelLocation:_LEFT_,visibilityChecks:[ZaItem.hasWritePermission],enableDisableChecks:[ZaResourceXFormView.isSignatureSelectionEnabled],enableDisableChangeEventSources:[ZaResource.A2_signatureList],valueChangeEventSources:[ZaResource.A2_signatureList],choices:this.signatureChoices}]};
var g={type:_CASE_,numCols:1,caseKey:ZaNewResourceXWizard.step3,align:_LEFT_,valign:_TOP_,items:[b]};
m.push(g);
e.items=[{type:_OUTPUT_,colSpan:2,valign:_TOP_,cssStyle:"white-space: normal",ref:ZaModel.currentStep,choices:this.stepChoices,valueChangeEventSources:[ZaModel.currentStep]},{type:_SEPARATOR_,align:_CENTER_,valign:_TOP_},{type:_SPACER_,align:_CENTER_,valign:_TOP_},{type:_SWITCH_,width:720,align:_LEFT_,valign:_TOP_,cssStyle:"white-space: normal",items:m}]
};
ZaXDialog.XFormModifiers.ZaNewResourceXWizard.push(ZaNewResourceXWizard.myXFormModifier);
ZaNewResourceXWizard.isAutoDisplayname=function(){return(this.getInstanceValue(ZaResource.A2_autoLocationName)=="FALSE")
};
ZaNewResourceXWizard.canSetPassword=function(){return(ZaZimbraAdmin.haveAnyTargetRight(ZaItem.RESOURCE,ZaResource.SET_CALRES_PASSWORD_RIGHT)||ZaZimbraAdmin.haveAnyTargetRight(ZaItem.RESOURCE,ZaResource.CHANGE_CALRES_PASSWORD_RIGHT))
}
}if(AjxPackage.define("zimbraAdmin.resource.view.ZaSignatureDlg")){ZaEditSignatureDialog=function(d,b,c,e){if(arguments.length==0){return
}this._standardButtons=[DwtDialog.OK_BUTTON,DwtDialog.CANCEL_BUTTON];
ZaXDialog.call(this,d,null,e,b,c,null,ZaId.DLG_EDIT_SIGNATURE);
this._containedObject={};
this.initForm(ZaSignature.myXModel,this.getMyXForm());
this._localXForm.addListener(DwtEvent.XFORMS_FORM_DIRTY_CHANGE,new AjxListener(this,ZaEditSignatureDialog.prototype.handleXFormChange));
this._localXForm.addListener(DwtEvent.XFORMS_VALUE_ERROR,new AjxListener(this,ZaEditSignatureDialog.prototype.handleXFormChange))
};
ZaEditSignatureDialog.prototype=new ZaXDialog;
ZaEditSignatureDialog.prototype.constructor=ZaEditSignatureDialog;
ZaEditSignatureDialog.prototype.handleXFormChange=function(){var c=this.getObject();
var b=(!AjxUtil.isEmpty(c[ZaSignature.A2_name]))&&(!AjxUtil.isEmpty(c[ZaSignature.A2_content]));
this._button[DwtDialog.OK_BUTTON].setEnabled(b)
};
ZaEditSignatureDialog.prototype.getMyXForm=function(){var b={numCols:1,items:[{type:_GROUP_,isTabGroup:true,items:[{ref:ZaSignature.A2_name,type:_TEXTFIELD_,width:"300px",label:ZaMsg.Dlg_SignatureName,visibilityChecks:[],enableDisableChecks:[]},{ref:ZaSignature.A2_content,type:_TEXTAREA_,width:"300px",label:ZaMsg.Dlg_SignatureContent,msgName:ZaMsg.Dlg_SignatureContent,labelLocation:_LEFT_,visibilityChecks:[],enableDisableChecks:[]}]}]};
return b
}
}if(AjxPackage.define("zimbraAdmin.ZaZimbraAdmin")){ZaZimbraAdmin=function(b){if(arguments.length==0){return
}ZaZimbraAdmin._instance=this;
ZaController.call(this,b,null,"ZaZimbraAdmin");
ZaZimbraAdmin.showSplash(this._shell);
skin.showSkin();
b.setAppController(this);
this._appFactory=new Object();
this._appFactory[ZaZimbraAdmin.ADMIN_APP]=ZaApp;
this.startup()
};
ZaZimbraAdmin.prototype=new ZaController;
ZaZimbraAdmin.prototype.constructor=ZaZimbraAdmin;
ZaZimbraAdmin._instance=null;
ZaZimbraAdmin.ADMIN_APP="admin";
ZaZimbraAdmin.currentUserName="";
ZaZimbraAdmin.currentUserLogin="";
ZaZimbraAdmin.currentUserId="";
ZaZimbraAdmin.URN="urn:zimbraAdmin";
ZaZimbraAdmin.VIEW_INDEX=0;
ZaZimbraAdmin.FIRST_DAY_OF_WEEK=0;
ZaZimbraAdmin.isFirstRequest=false;
ZaZimbraAdmin._ADDRESSES=ZaZimbraAdmin.VIEW_INDEX++;
ZaZimbraAdmin._SEARCHES=ZaZimbraAdmin.VIEW_INDEX++;
ZaZimbraAdmin._ACCOUNTS_LIST_VIEW=ZaZimbraAdmin.VIEW_INDEX++;
ZaZimbraAdmin._ALIASES_LIST_VIEW=ZaZimbraAdmin.VIEW_INDEX++;
ZaZimbraAdmin._DISTRIBUTION_LISTS_LIST_VIEW=ZaZimbraAdmin.VIEW_INDEX++;
ZaZimbraAdmin._SYS_CONFIG=ZaZimbraAdmin.VIEW_INDEX++;
ZaZimbraAdmin._GLOBAL_SETTINGS=ZaZimbraAdmin.VIEW_INDEX++;
ZaZimbraAdmin._SERVERS_LIST_VIEW=ZaZimbraAdmin.VIEW_INDEX++;
ZaZimbraAdmin._DOMAINS_LIST_VIEW=ZaZimbraAdmin.VIEW_INDEX++;
ZaZimbraAdmin._COS_LIST_VIEW=ZaZimbraAdmin.VIEW_INDEX++;
ZaZimbraAdmin._MONITORING=ZaZimbraAdmin.VIEW_INDEX++;
ZaZimbraAdmin._TOOLS=ZaZimbraAdmin.VIEW_INDEX++;
ZaZimbraAdmin._STATUS=ZaZimbraAdmin.VIEW_INDEX++;
ZaZimbraAdmin._STATISTICS=ZaZimbraAdmin.VIEW_INDEX++;
ZaZimbraAdmin._STATISTICS_BY_SERVER=ZaZimbraAdmin.VIEW_INDEX++;
ZaZimbraAdmin._SEARCH_LIST_VIEW=ZaZimbraAdmin.VIEW_INDEX++;
ZaZimbraAdmin._SEARCH_BUILDER_VIEW=ZaZimbraAdmin.VIEW_INDEX++;
ZaZimbraAdmin._SEARCH_BUILDER_TOOLBAR_VIEW=ZaZimbraAdmin.VIEW_INDEX++;
ZaZimbraAdmin._ZIMLET_LIST_VIEW=ZaZimbraAdmin.VIEW_INDEX++;
ZaZimbraAdmin._ADMIN_ZIMLET_LIST_VIEW=ZaZimbraAdmin.VIEW_INDEX++;
ZaZimbraAdmin._RESOURCE_LIST_VIEW=ZaZimbraAdmin.VIEW_INDEX++;
ZaZimbraAdmin._SERVER_VIEW=ZaZimbraAdmin.VIEW_INDEX++;
ZaZimbraAdmin._DOMAIN_VIEW=ZaZimbraAdmin.VIEW_INDEX++;
ZaZimbraAdmin._COS_VIEW=ZaZimbraAdmin.VIEW_INDEX++;
ZaZimbraAdmin._ACCOUNT_VIEW=ZaZimbraAdmin.VIEW_INDEX++;
ZaZimbraAdmin._ALIAS_VIEW=ZaZimbraAdmin.VIEW_INDEX++;
ZaZimbraAdmin._DL_VIEW=ZaZimbraAdmin.VIEW_INDEX++;
ZaZimbraAdmin._HELP_VIEW=ZaZimbraAdmin.VIEW_INDEX++;
ZaZimbraAdmin._MIGRATION_WIZ_VIEW=ZaZimbraAdmin.VIEW_INDEX++;
ZaZimbraAdmin._POSTQ_VIEW=ZaZimbraAdmin.VIEW_INDEX++;
ZaZimbraAdmin._POSTQ_BY_SERVER_VIEW=ZaZimbraAdmin.VIEW_INDEX++;
ZaZimbraAdmin._RESOURCE_VIEW=ZaZimbraAdmin.VIEW_INDEX++;
ZaZimbraAdmin._ZIMLET_VIEW=ZaZimbraAdmin.VIEW_INDEX++;
ZaZimbraAdmin._HOME_VIEW=ZaZimbraAdmin.VIEW_INDEX++;
ZaZimbraAdmin._MONITOR_HOME_VIEW=ZaZimbraAdmin.VIEW_INDEX++;
ZaZimbraAdmin._MANAGE_ACCOUNT_HOME_VIEW=ZaZimbraAdmin.VIEW_INDEX++;
ZaZimbraAdmin._ADMINISTRATION_HOME_VIEW=ZaZimbraAdmin.VIEW_INDEX++;
ZaZimbraAdmin._MIGRATION_HOME_VIEW=ZaZimbraAdmin.VIEW_INDEX++;
ZaZimbraAdmin._DOWNLOAD_VIEW=ZaZimbraAdmin.VIEW_INDEX++;
ZaZimbraAdmin._SEARCH_HOME_VIEW=ZaZimbraAdmin.VIEW_INDEX++;
ZaZimbraAdmin._SEARCH_RESULT_VIEW=ZaZimbraAdmin.VIEW_INDEX++;
ZaZimbraAdmin._SEARCH_FILTER_VIEW=ZaZimbraAdmin.VIEW_INDEX++;
ZaZimbraAdmin._SERVER_STATUS_VIEW=ZaZimbraAdmin.VIEW_INDEX++;
ZaZimbraAdmin._SERVER_STATISTICS_VIEW=ZaZimbraAdmin.VIEW_INDEX++;
ZaZimbraAdmin._SERVER_STATISTICS_TAB_VIEW=ZaZimbraAdmin.VIEW_INDEX++;
ZaZimbraAdmin._SERVER_LIST_FOR_STATISTICS_VIEW=ZaZimbraAdmin.VIEW_INDEX++;
ZaZimbraAdmin._HELP_CENTER_HOME_VIEW=ZaZimbraAdmin.VIEW_INDEX++;
ZaZimbraAdmin._HELP_CENTER_VIEW=ZaZimbraAdmin.VIEW_INDEX++;
ZaZimbraAdmin._HOME_VIEW=ZaZimbraAdmin.VIEW_INDEX++;
ZaZimbraAdmin._XFORM_VIEW=ZaZimbraAdmin.VIEW_INDEX++;
ZaZimbraAdmin._XFORM_TAB_VIEW=ZaZimbraAdmin.VIEW_INDEX++;
ZaZimbraAdmin._ACCOUNT_ALIAS_LIST_VIEW=ZaZimbraAdmin.VIEW_INDEX++;
ZaZimbraAdmin._COS_ACCOUNT_LIST_VIEW=ZaZimbraAdmin.VIEW_INDEX++;
ZaZimbraAdmin._COS_DOMAIN_LIST_VIEW=ZaZimbraAdmin.VIEW_INDEX++;
ZaZimbraAdmin._DOMAIN_ACCOUNT_LIST_VIEW=ZaZimbraAdmin.VIEW_INDEX++;
ZaZimbraAdmin._DOMAIN_ALIAS_LIST_VIEW=ZaZimbraAdmin.VIEW_INDEX++;
ZaZimbraAdmin._DL_ALIAS_LIST_VIEW=ZaZimbraAdmin.VIEW_INDEX++;
ZaZimbraAdmin._DL_MEMBERS_LIST_VIEW=ZaZimbraAdmin.VIEW_INDEX++;
ZaZimbraAdmin._COOKIE_NAME="ZM_ADMIN_AUTH_TOKEN";
ZaZimbraAdmin.TEST_COOKIE_NAME="ZA_TEST";
ZaZimbraAdmin.prototype.toString=function(){return"ZaZimbraAdmin"
};
ZaZimbraAdmin.clearCookie=function(){try{var e=AjxSoapDoc.create("ClearCookieRequest",ZaZimbraAdmin.URN,null);
var c=e.set("cookie");
c.setAttribute("name",ZaZimbraAdmin._COOKIE_NAME);
var b=new ZmCsfeCommand();
var f=new Object();
f.soapDoc=e;
f.skipExpiredToken=true;
f.asyncMode=false;
f.noAuthToken=true;
b.invoke(f)
}catch(d){this._handleException(d,"ZaZimbraAdmin.clearCookie",null,true)
}};
ZaZimbraAdmin.run=function(h){if(window._dwtShellId){return
}if(!DBG){DBG=new AjxDebug(AjxDebug.NONE,null,false)
}ZmCsfeCommand.setServerUri(location.protocol+"//"+h+ZaSettings.CSFE_SERVER_URI);
ZmCsfeCommand.setCookieName(ZaZimbraAdmin._COOKIE_NAME);
var n=AjxSoapDoc.create("GetDomainInfoRequest",ZaZimbraAdmin.URN,null);
var o=n.set("domain",location.hostname);
o.setAttribute("by","virtualHostname");
var e=new ZmCsfeCommand();
var f=new Object();
f.soapDoc=n;
f.noAuthToken=true;
var g;
var b=false;
try{g=e.invoke(f).Body.GetDomainInfoResponse
}catch(l){if(l.code==ZmCsfeException.SVC_AUTH_EXPIRED){b=true
}else{throw l
}}if(b){ZaZimbraAdmin.clearCookie();
f.resend=true;
g=e.invoke(f).Body.GetDomainInfoResponse
}if(g){var j={};
ZaItem.prototype.initFromJS.call(j,g.domain[0]);
ZaZimbraAdmin.zimbraAdminLoginURL=j.attrs.zimbraAdminConsoleLoginURL;
if(j.attrs.zimbraSkinLogoURL){ZaSettings.LOGO_URI=j.attrs.zimbraSkinLogoURL
}}var d=new ZaAppCtxt();
var c=window.document.getElementById(ZaSettings.get(ZaSettings.SKIN_SHELL_ID));
var k=new DwtShell({userShell:c});
d.setShell(k);
this._kbMgr=k.getKeyboardMgr();
this._kbMgr.enable(true);
this._kbMgr.registerKeyMap(new ZaKeyMap());
this._kbMgr.pushDefaultHandler(this);
this._kbMgr.setTabGroup(d.getRootTabGroup());
var m=new ZaZimbraAdmin(d)
};
ZaZimbraAdmin.prototype.getKeymapNameToUse=function(){if(ZaApp.getInstance()&&ZaApp.getInstance().getCurrentController()){var b=ZaApp.getInstance().getCurrentController();
if(b&&b.handleKeyAction){return b.toString()
}}return"ZaGlobal"
};
ZaZimbraAdmin.prototype.handleKeyAction=function(){switch(actionCode){case ZaKeyMap.DBG_NONE:alert("Setting domain search limit to:"+AjxDebug.NONE);
break;
case ZaKeyMap.DBG_1:alert("Setting domain search limit to:"+AjxDebug.DBG1);
break;
case ZaKeyMap.DBG_2:alert("Setting domain search limit to:"+AjxDebug.DBG2);
break;
case ZaKeyMap.DBG_3:alert("Setting domain search limit to:"+AjxDebug.DBG3);
break;
default:if(ZaApp.getInstance()&&ZaApp.getInstance().getCurrentController()){var b=ZaApp.getInstance().getCurrentController();
if(b&&b.handleKeyAction){return b.handleKeyAction(actionCode,ev)
}}else{return false
}break
}return true
};
ZaZimbraAdmin.getInstance=function(){if(ZaZimbraAdmin._instance){return ZaZimbraAdmin._instance
}else{ZaZimbraAdmin.run(document.domain);
return ZaZimbraAdmin._instance
}};
ZaZimbraAdmin.prototype.getApp=function(){return this._app
};
ZaZimbraAdmin.prototype.getAdminApp=function(){return this._app
};
ZaZimbraAdmin.prototype.getAppViewMgr=function(){return this._appViewMgr
};
ZaZimbraAdmin.prototype.getOverviewPanelController=function(){if(ZaSettings.TREE_ENABLED){if(this._overviewPanelController==null){this._overviewPanelController=new ZaOverviewPanelController(this._appCtxt,this._shell);
this._overviewPanelController.addSearchListener(new AjxListener(this._overviewPanelController,ZaOverviewPanelController.prototype.handleSearchFinished))
}return this._overviewPanelController
}else{return null
}};
ZaZimbraAdmin.prototype.getTaskController=function(){if(this._taskController==null){this._taskController=new ZaTaskController(this._appCtxt,this._shell)
}return this._taskController
};
ZaZimbraAdmin.prototype.setActiveApp=function(b){};
ZaZimbraAdmin.logOff=function(){ZmCsfeCommand.noAuth=true;
window.onbeforeunload=null;
var c=DwtShell.getShell(window);
c.setBusy(true);
var d=location.protocol+"//"+location.hostname+((location.port=="80")?"":":"+location.port)+location.pathname+location.search;
if(location.search){d=d+"&logoff=1"
}else{d=d+"?logoff=1"
}var b=new AjxTimedAction(null,ZaZimbraAdmin.redir,[d]);
AjxTimedAction.scheduleAction(b,100)
};
ZaZimbraAdmin.redir=function(b){window.location=b
};
ZaZimbraAdmin.isLanguage=function(c){var b=null;
if(ZaZimbraAdmin.LOCALE==null){b=AjxEnv.DEFAULT_LOCALE
}else{b=ZaZimbraAdmin.LOCALE
}return b==c
};
ZaZimbraAdmin.prototype.startup=function(b){this._appViewMgr=new ZaAppViewMgr(this._shell,this,true);
try{if(!b){this._refreshing=true;
this._doAuth()
}}catch(c){if(c&&c.code!=ZmCsfeException.NO_AUTH_TOKEN&&c.code!=ZmCsfeException.SVC_AUTH_EXPIRED&&c.code!=ZmCsfeException.SVC_AUTH_REQUIRED){if(!ZaSettings.initialized){ZaSettings.init()
}else{ZaZimbraAdmin._killSplash()
}}this._handleException(c,"ZaZimbraAdmin.prototype.startup",null,true)
}};
ZaZimbraAdmin.reload_msg=function(){var b=[];
b.push([appContextPath,"/res/","I18nMsg,TzMsg,AjxMsg,ZMsg,ZaMsg,ZabMsg,AjxKeys",".js?v=",appVers,ZaZimbraAdmin.LOCALE_QS].join(""));
var c=new AjxCallback(ZaZimbraAdmin.reinit_func);
AjxInclude(b,null,c);
ZaZimbraAdmin._LOCALE_MSG_RELOADED=true
};
ZaZimbraAdmin.reinit_func=function(){AjxFormat.initialize();
ZaItem.initDescriptionItem();
ZaSettings.initConst();
ZaDomain.initDomainStatus();
Dwt_Datetime_XFormItem.initialize()
};
ZaZimbraAdmin.initInfo=function(h){if(h&&h.Body&&h.Body.GetInfoResponse){ZaZimbraAdmin.currentUserLogin=h.Body.GetInfoResponse.name;
ZaZimbraAdmin.currentUserId=h.Body.GetInfoResponse.id;
var d=h.Body.GetInfoResponse.name;
if(d){var f=d.split("@");
if(f.length>1){ZaSettings.myDomainName=f[1]
}}ZaZimbraAdmin.currentAdminId=h.Body.GetInfoResponse.id;
if(h.Body.GetInfoResponse.attrs){if(h.Body.GetInfoResponse.attrs.attr&&h.Body.GetInfoResponse.attrs.attr instanceof Array){var g=h.Body.GetInfoResponse.attrs.attr;
for(var e=0;
e<g.length;
e++){if(g[e].name=="displayName"){var b=g[e]._content;
if(b!=null&&b.length>0){ZaZimbraAdmin.currentUserName=b
}}}}else{if(h.Body.GetInfoResponse.attrs._attrs&&typeof(h.Body.GetInfoResponse.attrs._attrs)=="object"){var g=h.Body.GetInfoResponse.attrs._attrs;
if(g.displayName&&g.displayName.length){ZaZimbraAdmin.currentUserName=g.displayName
}}}if(!ZaZimbraAdmin.currentUserName||ZaZimbraAdmin.currentUserName.length<=0){ZaZimbraAdmin.currentUserName=ZaZimbraAdmin.currentUserLogin
}if(h&&h.Body&&h.Body.GetInfoResponse&&h.Body.GetInfoResponse.prefs){var c=h.Body.GetInfoResponse.prefs._attrs;
if(c&&c.zimbraPrefLocale){ZaZimbraAdmin.LOCALE=c.zimbraPrefLocale
}if(c&&c[ZaAccount.A_zimbraPrefAdminConsoleWarnOnExit]){ZaZimbraAdmin.isWarnOnExit=(c[ZaAccount.A_zimbraPrefAdminConsoleWarnOnExit]=="TRUE")
}if(c&&!AjxUtil.isEmpty(c[ZaAccount.A_zimbraPrefCalendarFirstDayOfWeek])){ZaZimbraAdmin.FIRST_DAY_OF_WEEK=c[ZaAccount.A_zimbraPrefCalendarFirstDayOfWeek]
}}}}};
ZaZimbraAdmin.prototype._setLicenseStatusMessage=function(){if((typeof ZaLicense=="function")&&(ZaSettings.LICENSE_ENABLED)){ZaLicense.setLicenseStatus(this)
}};
ZaZimbraAdmin.prototype.setStatusMsg=function(c,b){if(!ZaSettings.STATUS_ENABLED){return
}};
ZaZimbraAdmin.prototype.clearStatus=function(){if(!ZaSettings.STATUS_ENABLED){return
}};
ZaZimbraAdmin.prototype._createAppTabs=function(){var b=new ZaAppTabGroup(this._shell);
return b
};
ZaZimbraAdmin.prototype._createRefreshLink=function(){var d=document.getElementById(ZaSettings.SKIN_REFRESH_DOM_ID);
if(!d){return
}var c=new DwtComposite(this._shell,"RefreshContainer",Dwt.RELATIVE_STYLE);
var b=c.getHtmlElement();
c.setCursor("pointer");
b.onclick=function(){ZaZimbraAdmin.prototype._refreshListener.call(ZaZimbraAdmin.getInstance())
};
b.innerHTML=this._getAppLink(null,"SearchRefreshWhite");
c.reparentHtmlElement(ZaSettings.SKIN_REFRESH_DOM_ID)
};
ZaZimbraAdmin.prototype._createPreviousLink=function(){var d=document.getElementById(ZaSettings.SKIN_PREVIOUS_DOM_ID);
if(!d){return
}var c=this._previousContainer=new DwtComposite(this._shell,"PreviousContainer",Dwt.RELATIVE_STYLE);
var b=c.getHtmlElement();
c.setCursor("pointer");
b.onclick=function(){ZaZimbraAdmin.prototype._goPrevListener.call(ZaZimbraAdmin.getInstance())
};
b.innerHTML=AjxImg.getImageSpanHtml("LeftArrowNormal");
c.reparentHtmlElement(ZaSettings.SKIN_PREVIOUS_DOM_ID)
};
ZaZimbraAdmin.prototype._createNextLink=function(){var d=document.getElementById(ZaSettings.SKIN_NEXT_DOM_ID);
if(!d){return
}var c=this._nextContainer=new DwtComposite(this._shell,"NextContainer",Dwt.RELATIVE_STYLE);
var b=c.getHtmlElement();
c.setCursor("pointer");
b.onclick=function(){ZaZimbraAdmin.prototype._goNextListener.call(ZaZimbraAdmin.getInstance())
};
b.innerHTML=AjxImg.getImageSpanHtml("RightArrowNormal");
c.reparentHtmlElement(ZaSettings.SKIN_NEXT_DOM_ID)
};
ZaZimbraAdmin.prototype.updatePreNext=function(){var b=this._historyMgr.isPrevious();
var c=this._historyMgr.isNext();
this._previousContainer.setEnabled(b);
this._nextContainer.setEnabled(c)
};
ZaZimbraAdmin.prototype._refreshListener=function(f){var e=ZaApp.getInstance().getCurrentController();
if(AjxUtil.isInstance(e,ZaHelpViewController)){return
}var b=ZaZimbraAdmin.getInstance().getOverviewPanelController().getOverviewPanel().getFolderTree();
if(AjxUtil.isEmpty(b)){return
}var c=b.getCurrentSelectedItems().getArray();
if(AjxUtil.isEmpty(c)||AjxUtil.isEmpty(c[0])){return
}var d=c[0];
var g=b.getABPath(d.getData("dataItem"));
if(AjxUtil.isEmpty(g)){return
}b.setSelectionByPath(g,false,undefined,undefined,undefined,true)
};
ZaZimbraAdmin.prototype._goPrevListener=function(c){var b=this._historyMgr.getPrevious();
if(b){b.goToView();
this.updatePreNext()
}};
ZaZimbraAdmin.prototype._goNextListener=function(c){var b=this._historyMgr.getNext();
if(b){b.goToView();
this.updatePreNext()
}};
ZaZimbraAdmin.prototype._createHelpLink=function(){var d=document.getElementById(ZaSettings.SKIN_HELP_DOM_ID);
if(!d){return
}var b=new DwtBorderlessButton(this._shell,"","",Dwt.RELATIVE_STYLE);
b.setText(ZaMsg.help);
b.setDropDownImages("NodeExpandedWhite");
d.innerHTML="";
b.reparentHtmlElement(ZaSettings.SKIN_HELP_DOM_ID);
var f=new Array();
var e=new ZaPopupMenu(b,"ZaHelpDropdown",null,f,"ZA_HELP");
var c=new DwtMenuItem({parent:e,id:"zaHelpHomepage",className:"ZaHelpDropdownFirstItem"});
c.setText(ZabMsg.zimbraHomePage);
c.addSelectionListener(new AjxListener(this,this._contextHelpListener));
c=new DwtMenuItem({parent:e,id:"zaHelpCenter",className:"ZaHelpDropdownItem"});
c.setText(ZaMsg.zimbraHelpCenter);
c.addSelectionListener(new AjxListener(this,this._helpListener));
c=new DwtMenuItem({parent:e,id:"aboutZimbra",className:"ZaHelpDropdownLastItem"});
c.setText(ZabMsg.zimbraAbout);
c.addSelectionListener(new AjxListener(this,this._aboutZimbraListener));
e.addChild(this._createHelpSearch(),0);
e.addPopupListener(new AjxListener(this,this._helpMenuPopupListener,e));
b.setMenu(e,true)
};
ZaZimbraAdmin.prototype._createHelpSearch=function(){var e=new DwtComposite(this._shell,"ZaHelpDropdownSearch",Dwt.RELATIVE_STYLE);
var d=new DwtComposite(e,"SearchPanel",Dwt.RELATIVE_STYLE);
var b=new DwtComposite({parent:d,className:"ImgSearch ZaHelpSearchIcon"});
b.getHtmlElement().onclick=this._openSupportSite;
var c=new DwtInputField({parent:d,validationStyle:DwtInputField.ONEXIT_VALIDATION,inputId:"ZaHelpSearchInput"});
c.setValidatorFunction(c.getInputElement(),this._openSupportSite);
c.getInputElement().onblur=null;
return e
};
ZaZimbraAdmin.prototype._helpMenuPopupListener=function(f){var c=f.getItem(1);
if(!c){return null
}var d=c.getW()-20;
var b=Math.floor((d-30)/5.5);
var e=ZaApp.getInstance().getCurrentController()._helpButtonText;
if(b<e.length){e=e.substring(0,(b-3))+"..."
}c.setText(e)
};
ZaZimbraAdmin.prototype._openSupportSite=function(){window.open(ZaSettings.ZIMBRA_SUPPORT_URL_QUERY+document.getElementById("ZaHelpSearchInput").value)
};
ZaZimbraAdmin.prototype._contextHelpListener=function(){window.open(ZaApp.getInstance().getCurrentController()._helpURL)
};
ZaZimbraAdmin.prototype._aboutZimbraListener=function(){if(!this.aboutZimbraDialog){this.aboutZimbraDialog=new ZaAboutDialog(this._shell)
}this.aboutZimbraDialog.popup()
};
ZaZimbraAdmin.prototype._createOldHelpLink=function(){var f=document.getElementById(ZaSettings.SKIN_HELP_DOM_ID);
if(!f){return
}var e=new DwtComposite(this._shell,"HelpContainer",Dwt.RELATIVE_STYLE);
var c=e.getHtmlElement();
e.setCursor("pointer");
var g="";
if(ZaSettings.isYahooSmbPADomainAdmin){e.getHtmlElement().innerHTML=this._getAppLink("SMBAccount.openHelpDesk();",g,ZaMsg.helpDesk,skin.skin_container_help_max_str_length)
}else{var d=new AjxListener(this,this._helpListener);
var b=this;
e.getHtmlElement().onclick=function(){ZaZimbraAdmin.prototype._helpListener.call(b)
};
e.getHtmlElement().innerHTML=this._getAppLink(null,g,ZaMsg.helpDesk,skin.skin_container_help_max_str_length)
}e.reparentHtmlElement(ZaSettings.SKIN_HELP_DOM_ID)
};
ZaZimbraAdmin.prototype._createDownloadLink=function(){var e=document.getElementById(ZaSettings.SKIN_DW_DOM_ID);
if(!e){return
}var d=new DwtComposite(this._shell,"DWContainer",Dwt.RELATIVE_STYLE);
var c=new AjxListener(this,this._dwListener);
var b=this;
d.getHtmlElement().onclick=function(){ZaZimbraAdmin.prototype._dwListener.call(b)
};
d.setCursor("pointer");
d.getHtmlElement().innerHTML=this._getAppLink(null,"Migration",ZaMsg.goToMigrationWiz,skin.skin_container_dw_max_str_length);
d.reparentHtmlElement(ZaSettings.SKIN_DW_DOM_ID)
};
ZaZimbraAdmin.prototype._setUserName=function(){var c=document.getElementById(ZaSettings.SKIN_USER_NAME_ID);
if(!c){return
}if(!ZaZimbraAdmin.currentUserName){return
}var e=new DwtLabel(this._shell,"","",Dwt.RELATIVE_STYLE);
var b=AjxStringUtil.htmlEncode(ZaZimbraAdmin.currentUserName);
var d="<div class='skin_container_username_div'>"+b+"</div>";
e.setText(d);
e._setMouseEvents();
e.setToolTipContent(b);
c.innerHTML="";
e.reparentHtmlElement(ZaSettings.SKIN_USER_NAME_ID)
};
ZaZimbraAdmin.prototype._createUserName=function(){var d=document.getElementById(ZaSettings.SKIN_USERNAME_DOM_ID);
if(!d){return
}if(!ZaZimbraAdmin.currentUserName){return
}var c=new DwtBorderlessButton(this._shell,"","",Dwt.RELATIVE_STYLE);
var b=AjxStringUtil.htmlEncode(ZaZimbraAdmin.currentUserName);
var f="<div class='skin_container_username_div'>"+b+"</div>";
c.setText(f);
c.setDropDownImages("NodeExpandedWhite");
c.setToolTipContent(b);
d.innerHTML="";
c.reparentHtmlElement(ZaSettings.SKIN_USERNAME_DOM_ID);
var g=new Array();
g.push(new ZaOperation(ZaOperation.LOGOFF,ZaMsg.logOff,ZaMsg.logOff,"Logoff","LogoffDis",new AjxListener(window,ZaZimbraAdmin.logOff)));
var e=new ZaPopupMenu(c,null,null,g,"ZA_LOGOFF");
c.setMenu(e,true)
};
ZaZimbraAdmin.prototype._helpListener=function(j){var d=ZaZimbraAdmin.currentUserLogin;
var k=ZaZimbraAdmin.currentAdminAccount;
if(k){var c=null;
var b=(k.attrs[ZaAccount.A_zimbraIsAdminAccount]=="TRUE")?"A_zimbraHelpAdminURL":"A_zimbraHelpDelegatedURL";
var f=d.split("@")[1];
var g=ZaDomain.getDomainByName(f);
var e=ZaApp.getInstance().getGlobalConfig();
if(g){c=g.attrs[ZaDomain[b]]
}if(!c&&e){c=e.attrs[ZaGlobalConfig[b]]
}if(c){window.open(c);
return
}}var h=skin&&skin.hints&&skin.hints.helpButton;
if(h&&h.url){var l=h.url.match(/\?/)?"&":"?";
var c=[h.url,l,"locid=",AjxEnv.DEFAULT_LOCALE].join("");
window.open(c);
return
}if(ZaApp.getInstance().getCurrentController()){ZaApp.getInstance().getCurrentController().switchToNextView(ZaApp.getInstance().getHelpViewController(),ZaHelpViewController.prototype.show,null)
}else{ZaApp.getInstance().getHelpViewController().show()
}};
ZaZimbraAdmin.prototype._dwListener=function(b){if(ZaApp.getInstance().getCurrentController()){ZaApp.getInstance().getCurrentController().switchToNextView(ZaApp.getInstance().getMigrationWizController(),ZaMigrationWizController.prototype.show,null)
}else{ZaApp.getInstance().getMigrationWizController().show()
}};
ZaZimbraAdmin.prototype._createBanner=function(){var c=document.getElementById(ZaSettings.SKIN_LOGO_DOM_ID);
if(!c){return
}var b=new DwtComposite(this._shell,"LogoContainer",Dwt.ABSOLUTE_STYLE);
var e=new Array();
var d=0;
e[d++]="<a href='";
e[d++]=ZaAppCtxt.getLogoURI();
e[d++]="' target='_blank'><div  class='"+AjxImg.getClassForImage("AppBanner")+"'></div></a>";
b.getHtmlElement().innerHTML=e.join("");
b.getHtmlElement().style.height="100%";
return b
};
ZaZimbraAdmin.prototype._createLogOff=function(){var b;
if(ZaSettings.isYahooSmbPADomainAdmin){b="SMBAccount.logOff();"
}else{b="ZaZimbraAdmin.logOff();"
}var c=document.getElementById(ZaSettings.SKIN_LOGOFF_DOM_ID);
if(c){c.innerHTML=this._getAppLink(b,"Logoff",ZaMsg.logOff);
c.style.cursor="pointer"
}};
ZaZimbraAdmin.prototype._getLoginMsgPanel=function(){if(!this._loginMsgPanel){this._loginMsgPanel=new DwtComposite(this._shell,null,Dwt.ABSOLUTE_STYLE);
var b;
try{b=ZaDomain.getLoginMessage()
}catch(c){this._handleException(c,"ZaZimbraAdmin.prototype._getLoginMsgPanel",null,true)
}if(b){var e=new DwtAlert(this._loginMsgPanel,null,Dwt.ABSOLUTE_STYLE);
e.setStyle(DwtAlert.INFORMATION);
e.setContent(b);
var d=new DwtButton({parent:this._loginMsgPanel,className:"DwtToolbarButton"});
d.setImage("Close");
d.setText(ZaMsg.TBB_Close);
d.addSelectionListener(new AjxListener(this,this.closeLoginMsg));
e.setDismissContent(d)
}else{this.closeLoginMsg()
}}return this._loginMsgPanel
};
ZaZimbraAdmin.prototype.closeLoginMsg=function(){var c=this._loginMsgPanel.getHTMLElId();
Dwt.hide(c);
skin.hideLoginMsg();
var b=ZaApp.getInstance().getAppViewMgr();
b.fitAll()
};
ZaZimbraAdmin.prototype._getAppLink=function(g,e,f,d){var c=[];
var b=0;
c[b++]="<table border=0 cellpadding=1 cellspacing=1 align=right><tr>";
c[b++]="<td align=right><span ";
if(g){c[b++]=" onclick='"+g+"' "
}c[b++]=">";
c[b++]=AjxImg.getImageHtml(e,null,"border=0");
c[b++]="</span></td>";
c[b++]="<td width=1% align=right style='white-space:nowrap;'><span ";
if(g){c[b++]=" onclick='"+g+"' "
}if((d!=null)&&d>0){if(f!=null&&f.length>d){var h=f;
f=f.substring(0,d-3)+"...";
c[b++]="title='"+h+"'"
}}c[b++]=">";
c[b++]=f;
c[b++]="</span></td></tr></table>";
return c.join("")
};
ZaZimbraAdmin.prototype._createActionStatus=function(){this.actionStatusView=new ZaActionStatusView(this._shell,"ZaStatus",Dwt.ABSOLUTE_STYLE)
};
ZaZimbraAdmin.prototype.setActionStatusMsg=function(b){if(this.actionStatusView){b=Dwt.getParams(arguments,ZaActionStatusView.MSG_PARAMS);
this.actionStatusView.setStatusMsg(b)
}};
ZaZimbraAdmin._killSplash=function(){if(ZaZimbraAdmin._splashScreen){ZaZimbraAdmin._splashScreen.setVisible(false)
}};
ZaZimbraAdmin.showSplash=function(b){if(ZaZimbraAdmin._splashScreen){ZaZimbraAdmin._splashScreen.setVisible(true)
}else{ZaZimbraAdmin._splashScreen=new ZaSplashScreen(b);
ZaZimbraAdmin._splashScreen.setVisible(true)
}};
ZaZimbraAdmin.prototype._createApp=function(){this._app=ZaApp.getInstance(this._appCtxt,this._shell)
};
ZaZimbraAdmin.prototype.getHistoryMgr=function(){return this._historyMgr
};
ZaZimbraAdmin.prototype._createHistoryMgr=function(){if(!this._historyMgr){this._historyMgr=new ZaHistoryMgr()
}};
ZaZimbraAdmin.prototype._launchApp=function(){ZaSettings.TREE_ENABLED=(document.getElementById(ZaSettings.SKIN_TREE_ID)!=null);
ZaSettings.CURRENT_APP_ENABLED=(document.getElementById(ZaSettings.SKIN_CURRENT_APP_ID)!=null);
ZaSettings.BANNER_ENABLED=(document.getElementById(ZaSettings.SKIN_LOGO_DOM_ID)!=null);
ZaSettings.STATUS_ENABLED=(document.getElementById(ZaSettings.SKIN_STATUS_ID)!=null);
ZaSettings.SEARCH_PANEL_ENABLED=(document.getElementById(ZaSettings.SKIN_SEARCH_PANEL_ID)!=null);
if(!this._app){this._createApp()
}ZaApp.getInstance().initDialogs();
this._appCtxt.setClientCmdHdlr(new ZaClientCmdHandler());
var b=new Object();
if(skin&&skin.show){skin.show(true);
skin.showSearchBuilder(false)
}this._createLogOff();
this._createHelpLink();
this._createDownloadLink();
this._setUserName();
if(ZaSettings.BANNER_ENABLED){b[ZaAppViewMgr.C_BANNER]=this._createBanner()
}if(ZaSettings.STATUS_ENABLED){b[ZaAppViewMgr.C_STATUS]=this._statusBox=new DwtText(this._shell,"statusBox",Dwt.ABSOLUTE_STYLE);
this.clearStatus();
this._setLicenseStatusMessage()
}if(ZaSettings.SEARCH_PANEL_ENABLED){this._createActionStatus();
b[ZaAppViewMgr.C_SEARCH_BUILDER_TOOLBAR]=ZaApp.getInstance().getSearchBuilderToolbarController().getSearchBuilderTBPanel();
b[ZaAppViewMgr.C_SEARCH_BUILDER]=ZaApp.getInstance().getSearchBuilderController().getSearchBuilderPanel()
}if(ZaSettings.TREE_ENABLED){b[ZaAppViewMgr.C_TREE]=this.getOverviewPanelController().getOverviewPanel()
}if(document.getElementById(ZaSettings.SKIN_APP_SASH_ID)){b[ZaAppViewMgr.C_SASH]=new DwtSash({parent:this._shell,style:DwtSash.HORIZONTAL_STYLE,className:"AppSash-horiz",threshold:20,id:"z_sash"})
}if(ZaSettings.SEARCH_PANEL_ENABLED){b[ZaAppViewMgr.C_SEARCH]=ZaApp.getInstance().getSearchListController().getSearchPanel()
}if(document.getElementById(ZaSettings.SKIN_SEARCH_BUILDER_APP_SASH_ID)!=null){b[ZaAppViewMgr.C_SEARCH_BUILDER_SASH]=new DwtSash({parent:this._shell,style:DwtSash.VERTICAL_STYLE,className:"AppSash-vert",threshod:20,id:"z_sb_sash"})
}b[ZaAppViewMgr.C_LOGIN_MESSAGE]=this._getLoginMsgPanel();
b[ZaAppViewMgr.C_APP_TABS]=this._createAppTabs();
if(ZaSettings.CURRENT_APP_ENABLED){b[ZaAppViewMgr.C_CURRENT_APP]=new ZaCurrentAppToolBar(this._shell)
}this._appViewMgr.addComponents(b,true);
ZaApp.getInstance().launch();
ZaZimbraAdmin._killSplash()
};
ZaZimbraAdmin.prototype.updateHistory=function(b,c){if(c){this._historyMgr.addHistory(b)
}if(b.displayName){this._header.setText(b)
}if(b.path){this._currentAppBar.setText(b.path)
}};
ZaZimbraAdmin.prototype.refreshHistoryTreeByDelete=function(d){var b=AjxUtil.toArray(d);
var g=false;
for(var f=0;
f<b.length;
f++){var h=b[f].name;
var c=this._historyMgr.findHistoryByName(h);
for(var e=0;
e<c.size();
e++){c.get(e).setEnabled(false);
g=true
}this._historyMgr.deleteHistoryObjByName(h)
}if(g){this._historyMgr.refreshHistory()
}};
ZaZimbraAdmin.prototype.getSettingMenu=function(c,b){if(!this._currentAppBar){return""
}return this._currentAppBar.getMenu()
};
ZaZimbraAdmin.prototype.getCurrentAppBar=function(){return this._currentAppBar
};
ZaZimbraAdmin.prototype._lauchNewApp=function(){ZaSettings.TREE_ENABLED=(document.getElementById(ZaSettings.SKIN_TREE_DOM_ID)!=null);
ZaSettings.BANNER_ENABLED=(document.getElementById(ZaSettings.SKIN_LOGO_DOM_ID)!=null);
ZaSettings.TOASTER_ENABLED=(document.getElementById(ZaSettings.SKIN_TOASTER_DOM_ID)!=null);
if(!this._app){this._createApp()
}this._createHistoryMgr();
ZaApp.getInstance().initDialogs();
this._appCtxt.setClientCmdHdlr(new ZaClientCmdHandler());
var b=new Object();
if(skin&&skin.show){skin.show(true)
}this._createRefreshLink();
this._createPreviousLink();
this._createNextLink();
this._historyMgr.addChangeListener(new AjxListener(this,this.updatePreNext));
this._createUserName();
this._createHelpLink();
if(ZaSettings.BANNER_ENABLED){b[ZaAppViewMgr.C_BANNER]=this._createBanner()
}if(ZaSettings.TOASTER_ENABLED){this._createActionStatus()
}b[ZaAppViewMgr.C_SEARCH]=ZaApp.getInstance().getSearchListController().getSearchPanel();
this._header=b[ZaAppViewMgr.C_TREE_TOP]=new ZaCrtAppTreeHeader(this._shell);
if(ZaSettings.TREE_ENABLED){b[ZaAppViewMgr.C_TREE]=this.getOverviewPanelController().getOverviewPanel()
}this._currentAppBar=b[ZaAppViewMgr.C_APP_HEADER]=new ZaCurrentAppBar(this._shell);
b[ZaAppViewMgr.C_TOOL_HEADER]=this.getTaskController().getTaskHeaderPanel();
b[ZaAppViewMgr.C_TOOL]=this.getTaskController().getTaskContentPanel();
this._appViewMgr.addComponents(b,true);
ZaApp.getInstance().launch();
ZaZimbraAdmin._killSplash()
};
ZaZimbraAdmin.noOpAction=null;
ZaZimbraAdmin.noOpHandler=null;
ZaZimbraAdmin.noOpInterval=120000;
ZaZimbraAdmin.prototype.cancelNoOp=function(){if(ZaZimbraAdmin.noOpHandler){AjxTimedAction.cancelAction(this.noOpHandler);
ZaZimbraAdmin.noOpHandler=null
}};
ZaZimbraAdmin.prototype.scheduleNoOp=function(){if(!ZaZimbraAdmin.noOpAction){ZaZimbraAdmin.noOpAction=new AjxTimedAction(this,this.sendNoOp)
}ZaZimbraAdmin.noOpHandler=AjxTimedAction.scheduleAction(ZaZimbraAdmin.noOpAction,120000)
};
ZaZimbraAdmin.prototype.sendNoOp=function(){try{var d=AjxSoapDoc.create("NoOpRequest",ZaZimbraAdmin.URN,null);
var c=new ZmCsfeCommand();
var e=new Object();
e.soapDoc=d;
e.asyncMode=false;
e.noAuthToken=true;
c.invoke(e);
this.scheduleNoOp()
}catch(b){this._handleException(b,"ZaZimbraAdmin.prototype.sendNoOp",null,true);
this.cancelNoOp()
}};
ZaZimbraAdmin._bannerBarMouseHdlr=function(b){window.status=ZaMsg.done;
return true
};
ZaZimbraAdmin._confirmExitMethod=function(){var c=ZaMsg.appExitWarning;
var b=ZaAppTabGroup.getDirtyTabTitles();
if(b.length>0){c=ZaMsg.appExitWarningWithDirtyTab+"\n"+b.join("\n")
}return c
};
ZaZimbraAdmin._confirmAuthInvalidExitMethod=function(){var b=ZaMsg.authInvalidExitWarning;
return b
};
ZaZimbraAdmin.setOnbeforeunload=function(b){if(b){window.onbeforeunload=b
}else{window.onbeforeunload=null
}};
ZaZimbraAdmin.unloadHackCallback=function(){if(ZaZimbraAdmin.isWarnOnExit){ZaZimbraAdmin.setOnbeforeunload(null);
var c=function(){ZaZimbraAdmin.setOnbeforeunload(ZaZimbraAdmin._confirmExitMethod)
};
var b=new AjxTimedAction(null,c);
AjxTimedAction.scheduleAction(b,3000)
}};
ZaZimbraAdmin.isGlobalAdmin=function(){return(ZaZimbraAdmin.currentAdminAccount&&ZaZimbraAdmin.currentAdminAccount.attrs&&(ZaZimbraAdmin.currentAdminAccount.attrs[ZaAccount.A_zimbraIsAdminAccount]=="TRUE"))
};
ZaZimbraAdmin.hasGlobalDomainListAccess=function(){return(ZaZimbraAdmin.isGlobalAdmin()||(ZaSettings.targetRights[ZaItem.DOMAIN]&&ZaSettings.targetRights[ZaItem.DOMAIN][ZaDomain.RIGHT_LIST_DOMAIN]&&ZaSettings.targetRights[ZaItem.DOMAIN][ZaDomain.RIGHT_LIST_DOMAIN].some))
};
ZaZimbraAdmin.hasGlobalCOSSListAccess=function(){return(ZaZimbraAdmin.isGlobalAdmin()||(ZaSettings.targetRights[ZaItem.COS]&&ZaSettings.targetRights[ZaItem.COS][ZaCos.RIGHT_LIST_COS]&&ZaSettings.targetRights[ZaItem.COS][ZaCos.RIGHT_LIST_COS].some))
};
ZaZimbraAdmin.canCreateTopDomain=function(){return(ZaZimbraAdmin.isGlobalAdmin()||(ZaSettings.targetRights[ZaItem.GLOBAL_GRANT]&&ZaSettings.targetRights[ZaItem.GLOBAL_GRANT][ZaDomain.RIGHT_CREATE_TOP_DOMAIN]&&ZaSettings.targetRights[ZaItem.GLOBAL_GRANT][ZaDomain.RIGHT_CREATE_TOP_DOMAIN].some))
};
ZaZimbraAdmin.canCreateDomain=function(){return(ZaZimbraAdmin.isGlobalAdmin()||(ZaSettings.targetRights[ZaItem.GLOBAL_GRANT]&&ZaSettings.targetRights[ZaItem.GLOBAL_GRANT][ZaDomain.RIGHT_CREATE_TOP_DOMAIN]&&ZaSettings.targetRights[ZaItem.GLOBAL_GRANT][ZaDomain.RIGHT_CREATE_TOP_DOMAIN].some)||(ZaSettings.targetRights[ZaItem.GLOBAL_GRANT]&&ZaSettings.targetRights[ZaItem.GLOBAL_GRANT][ZaDomain.RIGHT_CREATE_SUB_DOMAIN]&&ZaSettings.targetRights[ZaItem.GLOBAL_GRANT][ZaDomain.RIGHT_CREATE_SUB_DOMAIN].some)||(ZaSettings.targetRights[ZaItem.DOMAIN]&&ZaSettings.targetRights[ZaItem.DOMAIN][ZaDomain.RIGHT_CREATE_SUB_DOMAIN]&&ZaSettings.targetRights[ZaItem.DOMAIN][ZaDomain.RIGHT_CREATE_SUB_DOMAIN].some))
};
ZaZimbraAdmin.canCreateAccount=function(){return(ZaZimbraAdmin.isGlobalAdmin()||(ZaSettings.targetRights[ZaItem.DOMAIN]&&ZaSettings.targetRights[ZaItem.DOMAIN][ZaDomain.RIGHT_CREATE_ACCOUNT]&&ZaSettings.targetRights[ZaItem.DOMAIN][ZaDomain.RIGHT_CREATE_ACCOUNT].some)||(ZaSettings.targetRights[ZaItem.GLOBAL_GRANT]&&ZaSettings.targetRights[ZaItem.GLOBAL_GRANT][ZaDomain.RIGHT_CREATE_ACCOUNT]&&ZaSettings.targetRights[ZaItem.GLOBAL_GRANT][ZaDomain.RIGHT_CREATE_ACCOUNT].some))
};
ZaZimbraAdmin.canListAccounts=function(){return(ZaZimbraAdmin.isGlobalAdmin()||(ZaSettings.targetRights[ZaItem.DOMAIN]&&ZaSettings.targetRights[ZaItem.DOMAIN][ZaAccount.RIGHT_LIST_ACCOUNT]&&ZaSettings.targetRights[ZaItem.DOMAIN][ZaAccount.RIGHT_LIST_ACCOUNT].some)||(ZaSettings.targetRights[ZaItem.GLOBAL_GRANT]&&ZaSettings.targetRights[ZaItem.GLOBAL_GRANT][ZaAccount.RIGHT_LIST_ACCOUNT]&&ZaSettings.targetRights[ZaItem.GLOBAL_GRANT][ZaAccount.RIGHT_LIST_ACCOUNT].some)||(ZaSettings.targetRights[ZaItem.ACCOUNT]&&ZaSettings.targetRights[ZaItem.ACCOUNT][ZaAccount.RIGHT_LIST_ACCOUNT]&&ZaSettings.targetRights[ZaItem.ACCOUNT][ZaAccount.RIGHT_LIST_ACCOUNT].some))
};
ZaZimbraAdmin.canCreateAlias=function(){return(ZaZimbraAdmin.isGlobalAdmin()||(ZaSettings.targetRights[ZaItem.DOMAIN]&&ZaSettings.targetRights[ZaItem.DOMAIN][ZaDomain.RIGHT_CREATE_ALIAS]&&ZaSettings.targetRights[ZaItem.DOMAIN][ZaDomain.RIGHT_CREATE_ALIAS].some)||(ZaSettings.targetRights[ZaItem.GLOBAL_GRANT]&&ZaSettings.targetRights[ZaItem.GLOBAL_GRANT][ZaDomain.RIGHT_CREATE_ALIAS]&&ZaSettings.targetRights[ZaItem.GLOBAL_GRANT][ZaDomain.RIGHT_CREATE_ALIAS].some))
};
ZaZimbraAdmin.canCreateDL=function(){return(ZaZimbraAdmin.isGlobalAdmin()||(ZaSettings.targetRights[ZaItem.DOMAIN]&&ZaSettings.targetRights[ZaItem.DOMAIN][ZaDomain.RIGHT_CREATE_DL]&&ZaSettings.targetRights[ZaItem.DOMAIN][ZaDomain.RIGHT_CREATE_DL].some)||(ZaSettings.targetRights[ZaItem.GLOBAL_GRANT]&&ZaSettings.targetRights[ZaItem.GLOBAL_GRANT][ZaDomain.RIGHT_CREATE_DL]&&ZaSettings.targetRights[ZaItem.GLOBAL_GRANT][ZaDomain.RIGHT_CREATE_DL].some))
};
ZaZimbraAdmin.canCreateGroup=function(){return(ZaZimbraAdmin.isGlobalAdmin()||(ZaSettings.targetRights[ZaItem.DOMAIN]&&ZaSettings.targetRights[ZaItem.DOMAIN][ZaDomain.RIGHT_CREATE_GROUP]&&ZaSettings.targetRights[ZaItem.DOMAIN][ZaDomain.RIGHT_CREATE_GROUP].some)||(ZaSettings.targetRights[ZaItem.GLOBAL_GRANT]&&ZaSettings.targetRights[ZaItem.GLOBAL_GRANT][ZaDomain.RIGHT_CREATE_GROUP]&&ZaSettings.targetRights[ZaItem.GLOBAL_GRANT][ZaDomain.RIGHT_CREATE_GROUP].some))
};
ZaZimbraAdmin.canCreateCalRes=function(){return(ZaZimbraAdmin.isGlobalAdmin()||(ZaSettings.targetRights[ZaItem.DOMAIN]&&ZaSettings.targetRights[ZaItem.DOMAIN][ZaDomain.RIGHT_CREATE_CALRES]&&ZaSettings.targetRights[ZaItem.DOMAIN][ZaDomain.RIGHT_CREATE_CALRES].some)||(ZaSettings.targetRights[ZaItem.GLOBAL_GRANT]&&ZaSettings.targetRights[ZaItem.GLOBAL_GRANT][ZaDomain.RIGHT_CREATE_CALRES]&&ZaSettings.targetRights[ZaItem.GLOBAL_GRANT][ZaDomain.RIGHT_CREATE_CALRES].some))
};
ZaZimbraAdmin.canCreateCos=function(){return(ZaZimbraAdmin.isGlobalAdmin()||(ZaSettings.targetRights[ZaItem.GLOBAL_GRANT]&&ZaSettings.targetRights[ZaItem.GLOBAL_GRANT][ZaDomain.CREATE_COS_RIGHT]&&ZaSettings.targetRights[ZaItem.GLOBAL_GRANT][ZaDomain.CREATE_COS_RIGHT].some))
};
ZaZimbraAdmin.canChangeExchangeConfig=function(){return(ZaZimbraAdmin.isGlobalAdmin()||(ZaSettings.targetRights[ZaItem.DOMAIN]&&ZaSettings.targetRights[ZaItem.DOMAIN][ZaDomain.CHECK_EXCHANGE_AUTH_CONFIG_RIGHT]&&ZaSettings.targetRights[ZaItem.DOMAIN][ZaDomain.CHECK_EXCHANGE_AUTH_CONFIG_RIGHT].some)||(ZaSettings.targetRights[ZaItem.GLOBAL_GRANT]&&ZaSettings.targetRights[ZaItem.GLOBAL_GRANT][ZaDomain.CHECK_EXCHANGE_AUTH_CONFIG_RIGHT]&&ZaSettings.targetRights[ZaItem.GLOBAL_GRANT][ZaDomain.CHECK_EXCHANGE_AUTH_CONFIG_RIGHT].some))
};
ZaZimbraAdmin.haveTargetRight=function(c,d,b){return(ZaZimbraAdmin.isGlobalAdmin()||(ZaSettings.targetRights[c][d]&&(ZaSettings.targetRights[c][d][b]||ZaSettings.targetRights[c][d].all)))
};
ZaZimbraAdmin.haveAnyTargetRight=function(b,c){return(ZaZimbraAdmin.isGlobalAdmin()||(ZaSettings.targetRights[b][c]&&ZaSettings.targetRights[b][c].some))
}
}if(AjxPackage.define("zimbraAdmin.helpdesk.view.ZaHelpView")){ZaHelpView=function(b){if(arguments.length==0){return
}ZaTabView.call(this,b,"ZaHelpView");
this.setScrollStyle(Dwt.SCROLL);
this.initForm(new Object(),this.getMyXForm())
};
ZaHelpView.mainHelpPage="administration_console_help.htm";
ZaHelpView.RELEASE_NOTES_URL="https://www.zimbra.com/support/documentation/zcs-ne-documentation.html";
ZaHelpView.HELP_FORUM_LINK="https://www.zimbra.com/forums/";
ZaHelpView.HELP_WIKI_LINK="https://wiki.zimbra.com";
ZaHelpView.prototype=new ZaTabView();
ZaHelpView.prototype.constructor=ZaHelpView;
ZaTabView.XFormModifiers.ZaHelpView=new Array();
ZaHelpView.prototype.getTabIcon=function(){return"Help"
};
ZaHelpView.prototype.getTabTitle=function(){return ZaMsg.Help_view_title
};
ZaHelpView.prototype.getTitle=function(){return ZaMsg.Help_view_title
};
ZaHelpView.prototype.initForm=function(c,b){if(c==null||b==null){throw new AjxException("Metadata for XForm and/or XModel are not defined",AjxException.INVALID_PARAM,"ZaHelpView.prototype.initForm")
}this._localXModel=new XModel(c);
this._localXForm=new XForm(b,this._localXModel,null,this);
this._localXForm.setController(this);
this._localXForm.draw();
this._localXForm.setInstance({});
this._drawn=true
};
ZaHelpView.prototype.showAboutDialog=function(){var b=this._appCtxt.getAppController();
b._aboutZimbraListener()
};
ZaHelpView.showWikiLink=function(){return !AjxUtil.isEmpty(ZabMsg.HELP_WIKI_LINK)
};
ZaHelpView.myXFormModifier=function(f){f.tableCssStyle="width:100%;overflow:auto;";
f.itemDefaults={_SEPARATOR_:{containerCssStyle:"padding-right:3px;padding-left:3px;"}};
if(!ZaSettings.isOctopus()){f.items=ZaHelpView.getAdminXFormItems();
return
}f.items=[{type:_SWITCH_,align:_LEFT_,valign:_TOP_,items:[{type:_ZATABCASE_,id:"help_view_tab",numCols:1,width:"100%",caseKey:1,paddingStyle:"padding-left:15px;",width:"98%",cellpadding:2,visibilityChecks:[],items:[{type:_OUTPUT_,label:null,value:ZabMsg.HELP_PAGE_0,colSpan:"*",cssStyle:"font-size:12pt;	font-weight: bold;"},{type:_OUTPUT_,label:null,value:ZabMsg.HELP_PAGE_1,colSpan:"*",cssStyle:"font-size:12px;"},{type:_SPACER_,colSpan:"*"},{type:_GROUP_,numCols:2,id:"ZimbraHelpPageDownloadItems",colSpan:"*",items:[{type:_GROUP_,numCols:2,items:[{type:_OUTPUT_,value:AjxImg.getImageHtml("Help")},{type:_ANCHOR_,cssStyle:"font-size:12px;",showInNewWindow:true,labelLocation:_NONE_,label:ZabMsg.HELP_PAGE_2,href:(location.pathname+ZaUtil.HELP_URL+ZaHelpView.mainHelpPage+"?locid="+AjxEnv.DEFAULT_LOCALE)}]},{type:_GROUP_,numCols:2,items:[{type:_OUTPUT_,value:AjxImg.getImageHtml("PDFDoc")},{type:_ANCHOR_,cssStyle:"font-size:12px;",showInNewWindow:true,labelLocation:_NONE_,label:ZaMsg.HELP_PAGE_4,href:ZaHelpView.RELEASE_NOTES_URL}]},{type:_SPACER_,colSpan:"*"},{type:_OUTPUT_,cssStyle:"font-size:12px;",label:null,value:ZabMsg.HELP_PAGE_3,cssStyle:"padding-right:10px;padding-left:10px;",containerCssStyle:"width:50%;"},{type:_OUTPUT_,cssStyle:"font-size:12px;",label:null,value:ZaMsg.HELP_PAGE_5,cssStyle:"padding-right:10px;padding-left:10px;",containerCssStyle:"width:50%;"},{type:_SEPARATOR_,colSpan:1,cssClass:"helpSeparator"},{type:_SEPARATOR_,colSpan:1,cssClass:"helpSeparator"},{type:_GROUP_,numCols:2,items:[{type:_OUTPUT_,value:AjxImg.getImageHtml("PDFDoc")},{type:_ANCHOR_,cssStyle:"font-size:12px;",href:ZaHelpView.HELP_FORUM_LINK,showInNewWindow:true,labelLocation:_NONE_,label:ZabMsg.HELP_PAGE_6}]},{type:_GROUP_,numCols:2,visibilityChecks:[[ZaHelpView.showWikiLink]],items:[{type:_OUTPUT_,value:AjxImg.getImageHtml("PDFDoc")},{type:_ANCHOR_,cssStyle:"font-size:12px;",href:ZaHelpView.HELP_WIKI_LINK,showInNewWindow:true,labelLocation:_NONE_,label:ZaMsg.HELP_PAGE_12}]},{type:_SPACER_,colSpan:"*"},{type:_OUTPUT_,cssStyle:"font-size:12px;",label:null,value:ZabMsg.HELP_PAGE_7,cssStyle:"padding-right:10px;padding-left:10px;"},{type:_OUTPUT_,label:null,value:ZabMsg.HELP_PAGE_13,visibilityChecks:[[ZaHelpView.showWikiLink]],cssStyle:"padding-right:10px;padding-left:10px;"},{type:_SEPARATOR_,colSpan:1,cssClass:"helpSeparator"},{type:_SEPARATOR_,colSpan:1,cssClass:"helpSeparator"}]},{type:_SPACER_,height:10},{type:_GROUP_,colSpan:"*",items:[{type:_DWT_BUTTON_,id:"about_button",label:ZabMsg.About_Button_Label,onActivate:"this.getFormController().showAboutDialog()",width:"125px"}]}]}]}];
var e;
if(!ZaSettings.isOctopus()){e=[{type:_GROUP_,numCols:2,items:[{type:_OUTPUT_,value:AjxImg.getImageHtml("PDFDoc")},{type:_ANCHOR_,cssStyle:"font-size:12px;",showInNewWindow:true,labelLocation:_NONE_,label:ZabMsg.HELP_PAGE_8,href:(location.pathname+"adminhelp/pdf/admin.pdf?locid="+AjxEnv.DEFAULT_LOCALE)}]},{type:_GROUP_,numCols:4,items:[{type:_OUTPUT_,value:AjxImg.getImageHtml("PDFDoc")},{type:_ANCHOR_,cssStyle:"font-size:12px;",showInNewWindow:true,labelLocation:_NONE_,label:ZaMsg.HELP_PAGE_10_EXCHANGE,href:(location.pathname+"adminhelp/pdf/MigrationWizard.pdf?locid="+AjxEnv.DEFAULT_LOCALE)},{type:_OUTPUT_,value:AjxImg.getImageHtml("PDFDoc")},{type:_ANCHOR_,cssStyle:"font-size:12px;",showInNewWindow:true,labelLocation:_NONE_,label:ZaMsg.HELP_PAGE_10_DOMINO,href:(location.pathname+"adminhelp/pdf/MigrationWizard_Domino.pdf?locid="+AjxEnv.DEFAULT_LOCALE)}]},{type:_SPACER_,colSpan:"*"},{type:_OUTPUT_,cssStyle:"font-size:12px;",label:null,value:ZabMsg.HELP_PAGE_9,cssStyle:"padding-right:10px;padding-left:10px;"},{type:_OUTPUT_,cssStyle:"font-size:12px;",label:null,value:ZaMsg.HELP_PAGE_11,cssStyle:"padding-right:10px;padding-left:10px;"},{type:_SEPARATOR_,colSpan:1,cssClass:"helpSeparator"},{type:_SEPARATOR_,colSpan:1,cssClass:"helpSeparator"},{type:_GROUP_,numCols:2,id:"HelpOtherGuides",items:[{type:_OUTPUT_,value:AjxImg.getImageHtml("PDFDoc")},{type:_ANCHOR_,cssStyle:"font-size:12px;",showInNewWindow:true,labelLocation:_NONE_,label:ZaMsg.HELP_OTHER_GUIDES_IMPORT,href:(location.pathname+"adminhelp/pdf/Import_Wizard_Outlook.pdf?locid="+AjxEnv.DEFAULT_LOCALE)}]},{type:_GROUP_,numCols:2,id:"iCalMigDoc",items:[{type:_OUTPUT_,value:AjxImg.getImageHtml("PDFDoc")},{type:_ANCHOR_,cssStyle:"font-size:12px;",showInNewWindow:true,labelLocation:_NONE_,label:ZaMsg.ICAL_MIG_GUIDE,href:(location.pathname+"help/admin/pdf/Zimbra%20iCalendar%20Migration%20Guide.pdf?locid="+AjxEnv.DEFAULT_LOCALE)}]},{type:_SPACER_},{type:_OUTPUT_,cssStyle:"font-size:12px;",label:null,value:ZaMsg.HELP_OTHER_GUIDES_IMPORT_INFO,cssStyle:"padding-right:10px;padding-left:10px;"},{type:_OUTPUT_,cssStyle:"font-size:12px;",label:null,value:ZaMsg.ICAL_MIG_GUIDE_INFO,cssStyle:"padding-right:10px;padding-left:10px;"},{type:_SEPARATOR_,colSpan:1,cssClass:"helpSeparator"},{type:_SEPARATOR_,colSpan:1,cssClass:"helpSeparator"}]
}else{e=[{type:_GROUP_,numCols:2,items:[{type:_OUTPUT_,value:AjxImg.getImageHtml("PDFDoc")},{type:_ANCHOR_,cssStyle:"font-size:12px;",showInNewWindow:true,labelLocation:_NONE_,label:ZabMsg.HELP_PAGE_8,href:(location.pathname+"help/admin/pdf/o_admin_guide.pdf?locid="+AjxEnv.DEFAULT_LOCALE)}]},{type:_GROUP_,numCols:2,id:"zwcEndUserGuide",items:[{type:_OUTPUT_,value:AjxImg.getImageHtml("PDFDoc")},{type:_ANCHOR_,cssStyle:"font-size:12px;",showInNewWindow:true,labelLocation:_NONE_,label:ZabMsg.ZWC_END_USER_GUIDE,href:(location.pathname+"help/admin/pdf/o_webclient_user_guide.pdf?locid="+AjxEnv.DEFAULT_LOCALE)},{type:_OUTPUT_,value:AjxImg.getImageHtml("PDFDoc")},{type:_ANCHOR_,cssStyle:"font-size:12px;",showInNewWindow:true,labelLocation:_NONE_,label:ZabMsg.ANDROID_END_USER_GUIDE,href:(location.pathname+"help/admin/pdf/o_androidclient_user_guide.pdf?locid="+AjxEnv.DEFAULT_LOCALE)},{type:_OUTPUT_,value:AjxImg.getImageHtml("PDFDoc")},{type:_ANCHOR_,cssStyle:"font-size:12px;",showInNewWindow:true,labelLocation:_NONE_,label:ZabMsg.IOS_END_USER_GUIDE,href:(location.pathname+"help/admin/pdf/o_iosclient_user_guide.pdf?locid="+AjxEnv.DEFAULT_LOCALE)}]},{type:_SPACER_,colSpan:"*"},{type:_OUTPUT_,cssStyle:"font-size:12px;",label:null,value:ZabMsg.HELP_PAGE_9,cssStyle:"padding-right:10px;padding-left:10px;"},{type:_OUTPUT_,cssStyle:"font-size:12px;",label:null,value:ZabMsg.ZWC_END_USER_GUIDE_INFO,cssStyle:"padding-right:10px;padding-left:10px;"},{type:_SEPARATOR_,colSpan:1,cssClass:"helpSeparator"},{type:_SEPARATOR_,colSpan:1,cssClass:"helpSeparator"}]
}var d=f.items[0].items[0].items;
for(var b=0;
b<d.length;
b++){if(d[b].id=="ZimbraHelpPageDownloadItems"){d[b].items=d[b].items.concat(e);
break
}}if(!ZaSettings.isNetworkVersion()&&!ZaSettings.isOctopus()){var c=[{type:_GROUP_,numCols:2,id:"zwcEndUserGuide",items:[{type:_OUTPUT_,value:AjxImg.getImageHtml("PDFDoc")},{type:_ANCHOR_,cssStyle:"font-size:12px;",showInNewWindow:true,labelLocation:_NONE_,label:ZabMsg.ZWC_END_USER_GUIDE,href:(location.pathname+"help/admin/pdf/zimbra_user_guide.pdf?locid="+AjxEnv.DEFAULT_LOCALE)}]},{type:_CELL_SPACER_},{type:_SPACER_,colSpan:"*"},{type:_OUTPUT_,cssStyle:"font-size:12px;",label:null,value:ZabMsg.ZWC_END_USER_GUIDE_INFO,cssStyle:"padding-right:10px;padding-left:10px;"},{type:_CELL_SPACER_},{type:_SEPARATOR_,colSpan:1,cssClass:"helpSeparator"}];
var d=f.items[0].items[0].items;
for(var b=0;
b<d.length;
b++){if(d[b].id=="ZimbraHelpPageDownloadItems"){d[b].items=d[b].items.concat(c);
break
}}}else{}};
ZaTabView.XFormModifiers.ZaHelpView.push(ZaHelpView.myXFormModifier);
ZaHelpView.getAdminXFormItems=function(){var b="";
var c={type:_OUTPUT_,cssStyle:"font-size: 8px; margin-left: 20px;",label:null,value:"<li></li>"};
return[{type:_SWITCH_,align:_LEFT_,valign:_TOP_,items:[{type:_ZATABCASE_,id:"help_view_tab",numCols:1,width:"100%",caseKey:1,paddingStyle:"padding-left: 15px;",width:"98%",cellpadding:2,visibilityChecks:[function(){return true
}],items:[{type:_SPACER_,height:"10"},{type:_OUTPUT_,label:null,value:ZaMsg.title_help_center,colSpan:"*",cssStyle:"font-size: 12pt; font-weight: bold;"},{type:_GROUP_,width:"100%",numCols:2,colSizes:["70%","30%"],items:[{type:_SPACER_,height:"10"},{type:_ZALEFT_GROUPER_,numCols:1,width:"100%",labelCssClass:"ZaHelpViewGroupLabel",borderCssClass:"ZaHelpViewGroupBorder",items:[{type:_GROUP_,id:"helpDocsGroup",numCols:1,width:"100%",items:[ZaHelpView._getAnchorItem(ZaMsg.subtitle_help_center_1,ZaUtil.HELP_URL+ZaHelpView.mainHelpPage,14),ZaHelpView._getDescItem(ZaMsg.desc_help_center_1),{type:_SPACER_,height:"5"},{type:_GROUP_,width:"100%",numCols:2,colSizes:["20","*"],items:[c,{type:_ANCHOR_,cssStyle:"font-size: 13px;",showInNewWindow:true,labelLocation:_NONE_,label:ZaMsg.sub_desc_help_center_1,href:ZaHelpView.RELEASE_NOTES_URL}]},{type:_SPACER_,height:"20"},ZaHelpView._getAnchorItem(ZaMsg.subtitle_help_center_2,"adminhelp/pdf/admin.pdf",14),ZaHelpView._getDescItem(ZaMsg.desc_help_center_2),{type:_SPACER_,height:"5"},{visibilityChecks:[function(){try{return ZaSettings.EnabledZimlet.com_zimbra_mobilesync
}catch(d){return false
}}],enableDisableChecks:[],type:_GROUP_,width:"100%",numCols:2,colSizes:["20","*"],items:[c,ZaHelpView._getAnchorItem(ZaMsg.sub_desc_help_center_2,"adminhelp/pdf/ZCS%20Connector%20for%20Outlook.pdf",13)]},{type:_SPACER_,height:"20"},ZaHelpView._getAnchorItem(ZaMsg.subtitle_help_center_3,"help/admin/pdf/zimbra_user_guide.pdf",14),ZaHelpView._getDescItem(ZaMsg.desc_help_center_3),{type:_SPACER_,height:"5"},{visibilityChecks:[function(){try{return ZaSettings.EnabledZimlet.com_zimbra_mobilesync
}catch(d){return false
}}],enableDisableChecks:[],type:_GROUP_,width:"100%",numCols:2,colSizes:["20","*"],items:[c,ZaHelpView._getAnchorItem(ZaMsg.sub_desc_help_center_3,"adminhelp/pdf/User%20Instructions%20Connector%20for%20Outlook.pdf",13)]}]},{type:_SPACER_,height:"20"},{type:_GROUP_,colSpan:"*",id:"helpAskCommunity",containerCssClass:"ZaHelpAskCommunityContainer",cssClass:"ZaHelpAskCommunityPanel",numCols:1,items:[{type:_GROUP_,colSpan:"*",numCols:1,width:"100%",containerCssClass:"ZaHelpAskCommunityContent",items:[{type:_OUTPUT_,label:null,value:ZaMsg.title_ask_community,colSpan:"*",cssStyle:"font-size: 12px; font-weight: bold;"},ZaHelpView._getDescItem(ZaMsg.desc_ask_community_1),{type:_SPACER_,height:"10"},ZaHelpView._getDescItem(ZaMsg.desc_ask_community_2)]}]}]},{type:_ZARIGHT_GROUPER_,numCols:1,width:"100%",labelCssClass:"ZaHelpViewGroupLabel",borderCssClass:"ZaHelpViewGroupNoneBorder",containerCssStyle:"vertical-align:top",items:[{type:_OUTPUT_,label:null,value:ZaMsg.title_top_migration_questions,colSpan:"*",cssStyle:"font-size: 14px; font-weight: bold;"},{type:_SPACER_,height:"20"},{type:_GROUP_,width:"100%",numCols:2,colSizes:["20","*"],items:[c,ZaHelpView._getAnchorItem(ZaMsg.ques_top_migration_questions_1,"adminhelp/pdf/Migration_Exch_Admin.pdf",13)]},{type:_SPACER_,height:"20"},{type:_GROUP_,width:"100%",numCols:2,colSizes:["20","*"],items:[c,ZaHelpView._getAnchorItem(ZaMsg.ques_top_migration_questions_2,"adminhelp/pdf/Migration_Exch_User.pdf",13)]},{type:_SPACER_,height:"20"},{type:_GROUP_,width:"100%",numCols:2,colSizes:["20","*"],items:[c,ZaHelpView._getAnchorItem(ZaMsg.ques_top_migration_questions_3,"adminhelp/pdf/MigrationWizard_Domino.pdf",13)]},{type:_SPACER_,height:"20"},{type:_GROUP_,width:"100%",numCols:2,colSizes:["20","*"],items:[c,ZaHelpView._getAnchorItem(ZaMsg.ques_top_migration_questions_4,"adminhelp/pdf/Zimbra%20iCalendar%20Migration%20Guide.pdf",13)]}]}]}]}]}]
};
ZaHelpView._getAnchorItem=function(c,e,d){if(!c||!e){return
}if(!d){d=12
}var b={type:_ANCHOR_,showInNewWindow:true,labelLocation:_NONE_,label:c,href:ZaHelpView._getGuideURL(e),cssStyle:"font-size: "+d+"px;"};
return b
};
ZaHelpView._getDescItem=function(c){if(!c){return
}var b={type:_OUTPUT_,cssStyle:"font-size: 12px; padding-top: 5px; padding-right: 10px; padding-left: 10px;",label:null,value:c};
return b
};
ZaHelpView._getGuideURL=function(b){var c=[];
c.push(location.pathname);
c.push(b);
c.push("?locid=");
c.push(AjxEnv.DEFAULT_LOCALE);
return c.join("")
}
}if(AjxPackage.define("zimbraAdmin.helpdesk.view.ZaMWizView")){ZaMigrationWizView=function(b){if(arguments.length==0){return
}ZaTabView.call(this,{parent:b,iKeyName:"ZaMigrationWizView",contextId:ZaId.TAB_DOWNLOADS});
this.setScrollStyle(Dwt.SCROLL);
this.initForm(new Object(),this.getMyXForm())
};
ZaMigrationWizView.prototype=new ZaTabView();
ZaMigrationWizView.prototype.constructor=ZaMigrationWizView;
ZaTabView.XFormModifiers.ZaMigrationWizView=new Array();
ZaMigrationWizView.prototype.getTabIcon=function(){return"MigrationWiz"
};
ZaMigrationWizView.prototype.getTabTitle=function(){return ZaMsg.Migration_wiz_title
};
ZaMigrationWizView.prototype.getTitle=function(){return ZaMsg.Migration_wiz_title
};
ZaMigrationWizView.prototype.initForm=function(c,b){if(c==null||b==null){throw new AjxException("Metadata for XForm and/or XModel are not defined",AjxException.INVALID_PARAM,"ZaMigrationWizView.prototype.initForm")
}this._localXModel=new XModel(c);
this._localXForm=new XForm(b,this._localXModel,null,this,ZaId.getTabViewId(this._contextId));
this._localXForm.setController(this);
this._localXForm.draw();
this._localXForm.refresh();
this._drawn=true
};
ZaMigrationWizView.myXFormModifier=function(b){b.tableCssStyle="width:100%;overflow:auto;";
b.itemDefaults={_SEPARATOR_:{containerCssStyle:"padding-right:3px;padding-left:3px;"}};
b.items=[{type:_OUTPUT_,label:null,value:ZaMsg.DOWNLOAD_PAGE_0,colSpan:"*",cssStyle:"font-size:12pt;	font-weight: bold;"},{type:_GROUP_,numCols:2,colSpan:"*",items:[{type:_OUTPUT_,label:null,value:ZaMsg.DOWNLOAD_PAGE_1,cssStyle:"font-size:12px;"},{type:_OUTPUT_,value:AjxImg.getImageHtml("Help")}]},{type:_SPACER_,colSpan:"*"},{type:_OUTPUT_,label:null,value:ZaMsg.DOWNLOAD_FOR_ADMIN,colSpan:"*",cssStyle:"font-size:10pt;font-weight: bold;"},{type:_SPACER_,colSpan:"*"},{type:_GROUP_,numCols:1,colSpan:"*",zName:"DownloadsForAdmin",items:[{type:_GROUP_,numCols:3,items:[{type:_OUTPUT_,value:AjxImg.getImageHtml("Migration")},{type:_OUTPUT_,cssStyle:"font-size:12px",labelLocation:_NONE_,label:null,id:"general_migration_x86_link",value:ZaMigrationWizView.getDownloadLink(ZaMsg.GENERAL_MIG_WIZ_X86_DOWNLOAD_LINK,ZaMsg.GENERAL_MIG_WIZ_X86_DOWNLOAD_LINK_MSG)},{type:_OUTPUT_,cssStyle:"font-size:12px",labelLocation:_NONE_,label:null,id:"general_migration_x64_link",value:ZaMigrationWizView.getDownloadLink(ZaMsg.GENERAL_MIG_WIZ_X64_DOWNLOAD_LINK,ZaMsg.GENERAL_MIG_WIZ_X64_DOWNLOAD_LINK_MSG)}]},{type:_OUTPUT_,cssClass:"ZaDownloadText",label:null,value:ZaMsg.GENERAL_MIG_WIZ_DOWNLOAD_TEXT},{type:_GROUP_,numCols:2,items:[{type:_OUTPUT_,value:AjxImg.getImageHtml("Migration")},{type:_OUTPUT_,cssStyle:"font-size:12px;",labelLocation:_NONE_,label:null,id:"domino_migration_link",value:ZaMigrationWizView.getDownloadLink(ZaMsg.DOMINO_MIG_WIZ_DOWNLOAD_LINK,ZaMsg.DOMINO_MIG_WIZ_DOWNLOAD_LINK_MSG)}]},{type:_OUTPUT_,cssClass:"ZaDownloadText",label:null,value:ZaMsg.DOMINO_MIG_WIZ_DOWNLOAD_TEXT},{type:_GROUP_,numCols:2,items:[{type:_OUTPUT_,value:AjxImg.getImageHtml("Migration")},{type:_OUTPUT_,cssStyle:"font-size:12px;",labelLocation:_NONE_,label:null,id:"exchange_migration_link",value:ZaMigrationWizView.getDownloadLink(ZaMsg.MIG_WIZ_DOWNLOAD_LINK,ZaMsg.MIG_WIZ_DOWNLOAD_LINK_MSG)}]},{type:_OUTPUT_,cssClass:"ZaDownloadText",label:null,value:ZaMsg.MIG_WIZ_DOWNLOAD_TEXT}]},{type:_SPACER_,colSpan:"*"},{type:_OUTPUT_,label:null,value:ZaMsg.DOWNLOAD_FOR_USER,colSpan:"*",cssStyle:"font-size:10pt;font-weight: bold;"},{type:_SPACER_,colSpan:"*"},{type:_GROUP_,numCols:1,colSpan:"*",zName:"DownloadsForUser",items:[{type:_GROUP_,numCols:3,items:[{type:_OUTPUT_,value:AjxImg.getImageHtml("Migration")},{type:_OUTPUT_,cssStyle:"font-size:12px;",labelLocation:_NONE_,label:null,id:"pst_import_link",value:ZaMigrationWizView.getDownloadLink(ZaMsg.IMPORT_WIZ_DOWNLOAD_LINK,ZaMsg.IMPORT_WIZ_DOWNLOAD_LINK_MSG)},{type:_OUTPUT_,cssStyle:"font-size:12px;",labelLocation:_NONE_,label:null,id:"pst_import_help_link",value:["(<A target='_blank' onclick='ZaZimbraAdmin.unloadHackCallback();' HREF='",location.pathname,"adminhelp/pdf/User Instructions for ZCS Import Wizard.pdf?locid=",AjxEnv.DEFAULT_LOCALE,"'>",ZaMsg.IMPORT_WIZ_DOWNLOAD_HELP,"</a>)"].join("")}]},{type:_OUTPUT_,cssClass:"ZaDownloadText",label:null,value:ZaMsg.IMPORT_WIZ_DOWNLOAD_TEXT}]}]
};
ZaTabView.XFormModifiers.ZaMigrationWizView.push(ZaMigrationWizView.myXFormModifier);
ZaMigrationWizView.getDownloadLink=function(b,c){return'<a onclick="ZaZimbraAdmin.unloadHackCallback();" target="_blank" href="'+b+'">'+c+"</a>"
}
}if(AjxPackage.define("zimbraAdmin.mta.view.ZaQSummaryListView")){ZaQSummaryListView=function(e,d,c,b){ZaListView.call(this,e,d,c,b)
};
ZaQSummaryListView.prototype=new ZaListView;
ZaQSummaryListView.prototype.constructor=ZaQSummaryListView;
ZaQSummaryListView.prototype.toString=function(){return"ZaQSummaryListView"
};
ZaQSummaryListView.prototype._createItemHtml=function(f){var e=new Array(50);
var h=document.createElement("div");
h[DwtListView._STYLE_CLASS]="Row";
h[DwtListView._SELECTED_STYLE_CLASS]=h[DwtListView._STYLE_CLASS]+"-"+DwtCssStyle.SELECTED;
h.className=h[DwtListView._STYLE_CLASS];
this.associateItemWithElement(f,h,DwtListView.TYPE_LIST_ITEM);
var b=0;
e[b++]="<table width='100%' cellspacing='2' cellpadding='0'>";
e[b++]="<tr>";
if(this._headerList){var d=this._headerList.length;
for(var c=0;
c<d;
c++){var g=this._headerList[c]._field;
if(g==ZaMTAQSummaryItem.A_text_col){e[b++]="<td width='"+this._headerList[c]._width+"' align=left>";
e[b++]=AjxStringUtil.htmlEncode(f[ZaMTAQSummaryItem.A_text]);
e[b++]="</td>"
}else{if(g==ZaMTAQSummaryItem.A_count_col){e[b++]="<td width='"+this._headerList[c]._width+"' align=left>";
e[b++]=f[ZaMTAQSummaryItem.A_count];
e[b++]="</td>"
}}}}else{e[b++]="<td width=100%>";
e[b++]=AjxStringUtil.htmlEncode(f);
e[b++]="</td>"
}e[b++]="</tr></table>";
h.innerHTML=e.join("");
return h
};
ZaQSummaryListView.prototype._setNoResultsHtml=function(){var b=new AjxBuffer();
var c=document.createElement("div");
b.append("<table width='100%' cellspacing='0' cellpadding='1'>","<tr><td class='NoResults'><br>&nbsp","</td></tr></table>");
c.innerHTML=b.toString();
this._addRow(c)
};
ZaQSummaryListView.prototype._sortColumn=function(c,d){if(d){var b=function(f,e){return(f<e)?1:((f>e)?-1:0)
};
this.getList().sort(b)
}else{this.getList().sort()
}};
ZaQSummaryListView.prototype._handleColHeaderResize=function(b){ZaListView._handleColHeaderResize.call(this,b)
}
}if(AjxPackage.define("zimbraAdmin.mta.view.ZaQMessagesListView")){ZaQMessagesListView=function(e,d,c,b){ZaListView.call(this,e,d,c,b)
};
ZaQMessagesListView.prototype=new ZaListView;
ZaQMessagesListView.prototype.constructor=ZaQMessagesListView;
ZaQMessagesListView.prototype.toString=function(){return"ZaQMessagesListView"
};
ZaQMessagesListView.prototype._createItemHtml=function(f){var e=new Array(50);
var h=document.createElement("div");
h[DwtListView._STYLE_CLASS]="Row";
h[DwtListView._SELECTED_STYLE_CLASS]=h[DwtListView._STYLE_CLASS]+"-"+DwtCssStyle.SELECTED;
h.className=h[DwtListView._STYLE_CLASS];
this.associateItemWithElement(f,h,DwtListView.TYPE_LIST_ITEM);
var b=0;
e[b++]="<table width='100%' cellspacing='0' cellpadding='0'>";
e[b++]="<tr>";
if(this._headerList){var d=this._headerList.length;
for(var c=0;
c<d;
c++){var g=this._headerList[c]._field;
if(g==ZaMTAQMsgItem.A_id){e[b++]="<td align=left height=20px width="+this._headerList[c]._width+">";
e[b++]=AjxStringUtil.htmlEncode(String(f[ZaMTAQMsgItem.A_id]));
e[b++]="</td>"
}else{if(g==ZaMTAQMsgItem.A_recipients){e[b++]="<td align=left height=20px width="+this._headerList[c]._width+">";
e[b++]=f[ZaMTAQMsgItem.A_recipients];
e[b++]="</td>"
}else{if(g==ZaMTAQMsgItem.A_content_filter){e[b++]="<td align=left height=20px width="+this._headerList[c]._width+">";
e[b++]=f[ZaMTAQMsgItem.A_content_filter];
e[b++]="</td>"
}else{if(g==ZaMTAQMsgItem.A_time){e[b++]="<td align=left height=20px width="+this._headerList[c]._width+">";
e[b++]=AjxDateUtil.computeDateStr(new Date(),parseInt(f[ZaMTAQMsgItem.A_time]));
e[b++]="</td>"
}else{if(g==ZaMTAQMsgItem.A_origin_host){e[b++]="<td align=left height=20px width="+this._headerList[c]._width+">";
e[b++]=AjxStringUtil.htmlEncode(f[ZaMTAQMsgItem.A_origin_host]);
e[b++]="</td>"
}else{if(g==ZaMTAQMsgItem.A_sender){e[b++]="<td align=left height=20px width="+this._headerList[c]._width+">";
e[b++]=f[ZaMTAQMsgItem.A_sender];
e[b++]="</td>"
}else{if(g==ZaMTAQMsgItem.A_origin_ip){e[b++]="<td align=left height=20px width="+this._headerList[c]._width+">";
e[b++]=f[ZaMTAQMsgItem.A_origin_ip];
e[b++]="</td>"
}else{if(g==ZaMTAQMsgItem.A_fromdomain){e[b++]="<td align=left height=20px width="+this._headerList[c]._width+">";
e[b++]=f[ZaMTAQMsgItem.A_fromdomain];
e[b++]="</td>"
}}}}}}}}}}else{e[b++]="<td width=100%>";
e[b++]=AjxStringUtil.htmlEncode(f);
e[b++]="</td>"
}e[b++]="</tr></table>";
h.innerHTML=e.join("");
return h
};
ZaQMessagesListView.prototype._setNoResultsHtml=function(){var b=new AjxBuffer();
var c=document.createElement("div");
b.append("<table width='100%' cellspacing='0' cellpadding='1'>","<tr><td class='NoResults'><br>&nbsp","</td></tr></table>");
c.innerHTML=b.toString();
this._addRow(c)
};
ZaQMessagesListView.prototype._sortColumn=function(c,d){if(d){var b=function(f,e){return(f<e)?1:((f>e)?-1:0)
};
this.getList().sort(b)
}else{this.getList().sort()
}};
ZaQMessagesListView.prototype._handleColHeaderResize=function(b){ZaListView._handleColHeaderResize.call(this,b)
}
}if(AjxPackage.define("zimbraAdmin.mta.view.ZaMTAListView")){ZaMTAListView=function(e){var d=null;
var c=DwtControl.ABSOLUTE_STYLE;
var b=this._getHeaderList();
ZaListView.call(this,{parent:e,className:d,posStyle:c,headerList:b,id:ZaId.TAB_MTX_MANAGE});
this._appCtxt=this.shell.getData(ZaAppCtxt.LABEL)
};
ZaMTAListView.prototype=new ZaListView;
ZaMTAListView.prototype.toString=function(){return"ZaMTAListView"
};
ZaMTAListView.prototype.getTitle=function(){return ZaMsg.PostQ_title
};
ZaMTAListView.prototype.getTabIcon=function(){return"Queue"
};
ZaMTAListView.prototype.setUI=function(){ZaListView.prototype.setUI.call(this);
var e=this._list;
var b=e.size();
for(var c=0;
c<b;
c++){var d=e.get(c);
var f=this._getItemId(d);
this.higlightQItem(f,ZaMTA.A_DeferredQ,(parseInt(d[ZaMTA.A_DeferredQ][ZaMTA.A_count])>parseInt(ZaMTA.threashHold)));
this.higlightQItem(f,ZaMTA.A_IncomingQ,(parseInt(d[ZaMTA.A_IncomingQ][ZaMTA.A_count])>parseInt(ZaMTA.threashHold)));
this.higlightQItem(f,ZaMTA.A_ActiveQ,(parseInt(d[ZaMTA.A_ActiveQ][ZaMTA.A_count])>parseInt(ZaMTA.threashHold)));
this.higlightQItem(f,ZaMTA.A_CorruptQ,(parseInt(d[ZaMTA.A_CorruptQ][ZaMTA.A_count])>parseInt(ZaMTA.threashHold)));
this.higlightQItem(f,ZaMTA.A_HoldQ,(parseInt(d[ZaMTA.A_HoldQ][ZaMTA.A_count])>parseInt(ZaMTA.threashHold)))
}};
ZaMTAListView.prototype.higlightQItem=function(e,b,c){var d=document.getElementById(e+"_"+b);
if(d){d.style.color=c?"#FD4545":"black";
d.style.fontWeight=c?"bold":"normal"
}};
ZaMTAListView.prototype._createItemHtml=function(c,d,f){var h=new Array(50);
var b=document.createElement("div");
b[DwtListView._STYLE_CLASS]="Row";
b[DwtListView._SELECTED_STYLE_CLASS]=b[DwtListView._STYLE_CLASS]+"-"+DwtCssStyle.SELECTED;
b.className=b[DwtListView._STYLE_CLASS];
this.associateItemWithElement(c,b,DwtListView.TYPE_LIST_ITEM);
var j=this._getItemId(c);
var l=0;
h[l++]="<table width='100%' cellspacing='0' cellpadding='0'>";
h[l++]="<tr>";
var e=this._headerList.length;
for(var g=0;
g<e;
g++){var k=this._headerList[g]._field;
if(k==ZaMTA.A_Servername){h[l++]="<td width="+this._headerList[g]._width+">";
h[l++]=AjxStringUtil.htmlEncode(c[ZaMTA.A_name]);
h[l++]="</td>"
}else{if(k==ZaMTA.A_DeferredQ){h[l++]="<td width="+this._headerList[g]._width+"><span id='"+(j+"_"+ZaMTA.A_DeferredQ)+"'>";
h[l++]=c[ZaMTA.A_DeferredQ][ZaMTA.A_count];
h[l++]="</span></td>"
}else{if(k==ZaMTA.A_IncomingQ){h[l++]="<td width="+this._headerList[g]._width+"><span id='"+(j+"_"+ZaMTA.A_IncomingQ)+"'>";
h[l++]=c[ZaMTA.A_IncomingQ][ZaMTA.A_count];
h[l++]="</span></td>"
}else{if(k==ZaMTA.A_ActiveQ){h[l++]="<td width="+this._headerList[g]._width+"><span id='"+(j+"_"+ZaMTA.A_ActiveQ)+"'>";
h[l++]=c[ZaMTA.A_ActiveQ][ZaMTA.A_count];
h[l++]="</span></td>"
}else{if(k==ZaMTA.A_CorruptQ){h[l++]="<td width="+this._headerList[g]._width+"><span id='"+(j+"_"+ZaMTA.A_CorruptQ)+"'>";
h[l++]=c[ZaMTA.A_CorruptQ][ZaMTA.A_count];
h[l++]="</span></td>"
}else{if(k==ZaMTA.A_HoldQ){h[l++]="<td width="+this._headerList[g]._width+"><span id='"+(j+"_"+ZaMTA.A_HoldQ)+"'>";
h[l++]=c[ZaMTA.A_HoldQ][ZaMTA.A_count];
h[l++]="</span></td>"
}}}}}}}h[l++]="</tr></table>";
b.innerHTML=h.join("");
return b
};
ZaMTAListView.prototype._getHeaderList=function(){var b=new Array();
b[0]=new ZaListHeaderItem(ZaMTA.A_Servername,ZaMsg.SLV_ServiceHName_col,null,"auto",null,null,true,true);
b[1]=new ZaListHeaderItem(ZaMTA.A_DeferredQ,ZaMsg.PQV_DeferredQ_col,null,100,null,null,true,true);
b[2]=new ZaListHeaderItem(ZaMTA.A_IncomingQ,ZaMsg.PQV_IncomingQ_col,null,100,null,null,true,true);
b[3]=new ZaListHeaderItem(ZaMTA.A_ActiveQ,ZaMsg.PQV_ActiveQ_col,null,100,null,null,true,true);
b[4]=new ZaListHeaderItem(ZaMTA.A_CorruptQ,ZaMsg.PQV_CorruptQ_col,null,100,null,null,true,true);
b[5]=new ZaListHeaderItem(ZaMTA.A_HoldQ,ZaMsg.PQV_HoldQ_col,null,100,null,null,true,true);
return b
}
}if(AjxPackage.define("zimbraAdmin.mta.view.ZaMTAXFormView")){ZaMTAXFormView=function(b){ZaTabView.call(this,{parent:b,iKeyName:"ZaMTAXFormView",contextId:ZaId.TAB_MTX_EDIT});
this.TAB_INDEX=0;
ZaMTAXFormView._tab1=++this.TAB_INDEX;
ZaMTAXFormView._tab2=++this.TAB_INDEX;
ZaMTAXFormView._tab3=++this.TAB_INDEX;
ZaMTAXFormView._tab4=++this.TAB_INDEX;
ZaMTAXFormView._tab5=++this.TAB_INDEX;
this.initForm(ZaMTA.myXModel,this.getMyXForm());
this._localXForm.addListener(DwtEvent.XFORMS_FORM_DIRTY_CHANGE,new AjxListener(this,ZaMTAXFormView.prototype.handleXFormChange));
this._localXForm.setController(ZaApp.getInstance())
};
ZaMTAXFormView.prototype=new ZaTabView();
ZaMTAXFormView.prototype.constructor=ZaMTAXFormView;
ZaTabView.XFormModifiers.ZaMTAXFormView=new Array();
ZaMTAXFormView.SCANNER_STATUS_CHOICES=new XFormChoices([{value:ZaMTA.STATUS_IDLE,label:ZaMsg.PQ_ScannerIdle},{value:ZaMTA.STATUS_SCANNING,label:ZaMsg.PQ_ScannerScanning},{value:ZaMTA.STATUS_SCAN_COMPLETE,label:ZaMsg.PQ_ScannerScanComplete},{value:ZaMTA.STATUS_STALE,label:ZaMsg.PQ_ScannerStaleData}],XFormChoices.OBJECT_LIST,"value","label");
ZaMTAXFormView.tabChoices=new XFormChoices([{value:ZaMTAXFormView._tab1,label:ZaMsg.PQV_Tab_Deferred},{value:ZaMTAXFormView._tab2,label:ZaMsg.PQV_Tab_IncomingQ},{value:ZaMTAXFormView._tab3,label:ZaMsg.PQV_Tab_ActiveQ},{value:ZaMTAXFormView._tab4,label:ZaMsg.PQV_Tab_HoldQ},{value:ZaMTAXFormView._tab5,label:ZaMsg.PQV_Tab_CorruptQ}],XFormChoices.OBJECT_LIST,"value","label");
ZaMTAXFormView.prototype.getTabIcon=function(){return"Queue"
};
ZaMTAXFormView.prototype.setObject=function(b){this._containedObject=b;
this._containedObject._viewInternalId=this.__internalId;
if(!b[ZaModel.currentTab]){this._containedObject[ZaModel.currentTab]="1"
}else{this._containedObject[ZaModel.currentTab]=b[ZaModel.currentTab]
}ZaMTAXFormView.SCANNER_STATUS_CHOICES.setChoices([{value:ZaMTA.STATUS_IDLE,label:ZaMsg.PQ_ScannerIdle},{value:ZaMTA.STATUS_SCANNING,label:ZaMsg.PQ_ScannerScanning},{value:ZaMTA.STATUS_SCAN_COMPLETE,label:ZaMsg.PQ_ScannerScanComplete},{value:ZaMTA.STATUS_STALE,label:ZaMsg.PQ_ScannerStaleData}]);
ZaMTAXFormView.tabChoices.setChoices([{value:ZaMTAXFormView._tab1,label:ZaMsg.PQV_Tab_Deferred+" ("+this._containedObject[ZaMTA.A_DeferredQ][ZaMTA.A_count]+")"},{value:ZaMTAXFormView._tab2,label:ZaMsg.PQV_Tab_IncomingQ+" ("+this._containedObject[ZaMTA.A_IncomingQ][ZaMTA.A_count]+")"},{value:ZaMTAXFormView._tab3,label:ZaMsg.PQV_Tab_ActiveQ+" ("+this._containedObject[ZaMTA.A_ActiveQ][ZaMTA.A_count]+")"},{value:ZaMTAXFormView._tab4,label:ZaMsg.PQV_Tab_HoldQ+" ("+this._containedObject[ZaMTA.A_HoldQ][ZaMTA.A_count]+")"},{value:ZaMTAXFormView._tab5,label:ZaMsg.PQV_Tab_CorruptQ+" ("+this._containedObject[ZaMTA.A_CorruptQ][ZaMTA.A_count]+")"}]),ZaMTAXFormView.tabChoices.dirtyChoices();
this._localXForm.setInstance(this._containedObject);
ZaMTAXFormView.prototype.handleXFormChange.call(this)
};
ZaMTAXFormView.prototype.handleXFormChange=function(){if(this._containedObject[ZaModel.currentTab]=="1"&&(this._containedObject[ZaMTA.A_DeferredQ][ZaMTA.A_Status]==ZaMTA.STATUS_IDLE)){this._containedObject.getMailQStatus(ZaMTA.A_DeferredQ,null,0,null,true)
}if(this._containedObject[ZaModel.currentTab]=="2"&&(this._containedObject[ZaMTA.A_IncomingQ][ZaMTA.A_Status]==ZaMTA.STATUS_IDLE)){this._containedObject.getMailQStatus(ZaMTA.A_IncomingQ,null,0,null,true)
}if(this._containedObject[ZaModel.currentTab]=="3"&&(this._containedObject[ZaMTA.A_ActiveQ][ZaMTA.A_Status]==ZaMTA.STATUS_IDLE)){this._containedObject.getMailQStatus(ZaMTA.A_ActiveQ,null,0,null,true)
}if(this._containedObject[ZaModel.currentTab]=="4"&&(this._containedObject[ZaMTA.A_HoldQ][ZaMTA.A_Status]==ZaMTA.STATUS_IDLE)){this._containedObject.getMailQStatus(ZaMTA.A_HoldQ,null,0,null,true)
}if(this._containedObject[ZaModel.currentTab]=="5"&&(this._containedObject[ZaMTA.A_CorruptQ][ZaMTA.A_Status]==ZaMTA.STATUS_IDLE)){this._containedObject.getMailQStatus(ZaMTA.A_CorruptQ,null,0,null,true)
}};
ZaMTAXFormView._listObjects={};
ZaMTAXFormView.filterListSelectionListener=function(f){if(f.dwtObj&&this.refPath){ZaMTAXFormView._listObjects[this.refPath]=f.dwtObj
}var c=this.getInstance();
var d=this.getRef().split("/");
var e=d[1];
var g=d[0];
if(!c[g][ZaMTA.A_selection_cache]){c[g][ZaMTA.A_selection_cache]={}
}var b=this.widget.getSelection();
if(b&&b.length){this.getModel().setInstanceValue(c,g+"/"+ZaMTA.A_selection_cache+"/"+e,b)
}else{this.getModel().setInstanceValue(c,g+"/"+ZaMTA.A_selection_cache+"/"+e,null);
c[g][ZaMTA.A_selection_cache][e]=null
}c._viewInternalId=this.getForm().parent.__internalId;
c.getMailQStatus(g,c[g][ZaMTA.A_selection_cache])
};
ZaMTAXFormView.msgListSelectionListener=function(d){if(d.dwtObj&&this.refPath){ZaMTAXFormView._listObjects[this.refPath]=d.dwtObj
}var b=this.getInstance();
var c=this.getRef().split("/");
var e=c[0];
if(!b[e][ZaMTA.MsgIDS]){b[e][ZaMTA.MsgIDS]={}
}this.getModel().setInstanceValue(b,e+"/"+ZaMTA.MsgIDS,AjxUtil.isEmpty(this.widget.getSelection())?{}:this.widget.getSelection())
};
ZaMTAXFormView.searchQueue=function(c){var b=this.getInstance();
var d=this.getRef();
b.getMailQStatus(d,b[d][ZaMTA.A_selection_cache])
};
ZaMTAXFormView.clearFilter=function(c){this.setInstanceValue("",this.getRef()+"/"+ZaMTA.A_selection_cache);
this.setInstanceValue("",this.getRef()+"/"+ZaMTA.A_query);
for(var b in ZaMTAXFormView._listObjects){if(ZaMTAXFormView._listObjects[b]){ZaMTAXFormView._listObjects[b].deselectAll()
}}};
ZaMTAXFormView.showAllMsgs=function(b){ZaMTAXFormView.clearFilter.call(this,b);
ZaMTAXFormView.searchQueue.call(this,b)
};
ZaMTAXFormView.actionButtonListener=function(f){var e,h,d,b;
e=this.getRef();
form=this.getForm();
b=this.getInstance();
var g=new Object();
g[ZaMTAActionDialog.QNAME]=e;
switch(f){case ZaMTA.ActionRequeue:d=ZaMsg.PQ_REQ_DLG_TITLE;
g[ZaMTAActionDialog.MESSAGE]=ZaMsg.PQ_SELECT_WHAT_TO_REQ;
g[ZaMTAActionDialog.QUESTION]=ZaMsg.PQ_Q_REQUEUE_MESSAGES;
break;
case ZaMTA.ActionDelete:d=ZaMsg.PQ_DEL_DLG_TITLE;
g[ZaMTAActionDialog.MESSAGE]=ZaMsg.PQ_SELECT_WHAT_TO_DEL;
g[ZaMTAActionDialog.QUESTION]=ZaMsg.PQ_Q_DELETE_MESSAGES;
break;
case ZaMTA.ActionHold:d=ZaMsg.PQ_HOLD_DLG_TITLE;
g[ZaMTAActionDialog.MESSAGE]=ZaMsg.PQ_SELECT_WHAT_TO_HOLD;
g[ZaMTAActionDialog.QUESTION]=ZaMsg.PQ_Q_HOLD_MESSAGES;
break;
case ZaMTA.ActionRelease:d=ZaMsg.PQ_REL_DLG_TITLE;
g[ZaMTAActionDialog.MESSAGE]=ZaMsg.PQ_SELECT_WHAT_TO_REL;
g[ZaMTAActionDialog.QUESTION]=ZaMsg.PQ_Q_RELEASE_MESSAGES;
break
}var c=form.parent;
c.selectActionDialog=ZaApp.getInstance().dialogs.selectActionDialog=new ZaMTAActionDialog(ZaApp.getInstance().getAppCtxt().getShell(),d,b);
g[ZaMTAActionDialog.MSG_IDS]=b[e][ZaMTA.MsgIDS];
g[ZaMTAActionDialog.FLTR_ITEMS]=b[e][ZaMTA.A_selection_cache];
g[ZaMTAActionDialog.ANSWER]=ZaMTAActionDialog.SELECTED_MSGS;
g[ZaMTAActionDialog.ACTION]=f;
c.selectActionDialog.setObject(g);
c.selectActionDialog.registerCallback(DwtDialog.OK_BUTTON,c.actionDlgCallback,c,f);
c.selectActionDialog.popup()
};
ZaMTAXFormView.prototype.actionDlgCallback=function(b){if(this.selectActionDialog){var e=this.selectActionDialog.getObject();
var f;
if(e[ZaMTAActionDialog.ANSWER]==ZaMTAActionDialog.SELECTED_MSGS){f=e[ZaMTAActionDialog.MSG_IDS];
if(f&&f.length){this.showConfirmationDlg(e[ZaMTAActionDialog.ACTION],f,e[ZaMTAActionDialog.QNAME],ZaMTA.A_messages)
}else{this.selectActionDialog.popdown()
}}else{if(e[ZaMTAActionDialog.ANSWER]==ZaMTAActionDialog.FLTRED_SET){f={};
var d;
if(e[ZaMTAActionDialog.FLTR_ITEMS]){for(var c in e[ZaMTAActionDialog.FLTR_ITEMS]){if(e[ZaMTAActionDialog.FLTR_ITEMS][c]){d=c;
f[c]=e[ZaMTAActionDialog.FLTR_ITEMS][c]
}}}if(d){this.showConfirmationDlg(e[ZaMTAActionDialog.ACTION],f,e[ZaMTAActionDialog.QNAME],d)
}else{f=[];
f[0]={};
f[0][ZaMTAQMsgItem.A_id]=ZaMTA.ID_ALL;
this.showConfirmationDlg(e[ZaMTAActionDialog.ACTION],f,e[ZaMTAActionDialog.QNAME],ZaMTA.A_messages)
}}}}};
ZaMTAXFormView.prototype.showConfirmationDlg=function(d,c,g,k){this.confirmMessageDialog=ZaApp.getInstance().dialogs.ConfirmMessageDialog=new ZaMsgDialog(ZaApp.getInstance().getAppCtxt().getShell(),null,[DwtDialog.YES_BUTTON,DwtDialog.NO_BUTTON],null,ZaId.VIEW_MTA+"_confirmMessage");
if(c){if(k==ZaMTA.A_messages){var h="0";
if(c.length){if(c[0][ZaMTAQMsgItem.A_id]==ZaMTA.ID_ALL){h=ZaMsg.PQ_AllMessages
}else{h=String(c.length)
}}switch(d){case ZaMTA.ActionRequeue:dlgMsg=String(ZaMsg.PQ_Q_REQUEUE_MESSAGES).replace("{0}",h).replace("{1}",g);
break;
case ZaMTA.ActionDelete:dlgMsg=String(ZaMsg.PQ_Q_DELETE_MESSAGES).replace("{0}",h).replace("{1}",g);
break;
case ZaMTA.ActionHold:dlgMsg=String(ZaMsg.PQ_Q_HOLD_MESSAGES).replace("{0}",h).replace("{1}",g);
break;
case ZaMTA.ActionRelease:dlgMsg=String(ZaMsg.PQ_Q_RELEASE_MESSAGES).replace("{0}",h).replace("{1}",g);
break
}}else{switch(d){case ZaMTA.ActionRequeue:dlgMsg=ZaMsg.PQ_Q_REQUEUE_MESSAGES2;
break;
case ZaMTA.ActionDelete:dlgMsg=ZaMsg.PQ_Q_DELETE_MESSAGES2;
break;
case ZaMTA.ActionHold:dlgMsg=ZaMsg.PQ_Q_HOLD_MESSAGES2;
break;
case ZaMTA.ActionRelease:dlgMsg=ZaMsg.PQ_Q_RELEASE_MESSAGES2;
break
}dlgMsg+="<br><ul>";
var f=0;
for(var l in c){if(c[l]){var b=c[l].length;
dlgMsg+="<li>";
dlgMsg+=l;
dlgMsg+="<ul>";
for(var e=0;
e<b;
e++){if(f>19){dlgMsg+="<li>...</li>";
break
}dlgMsg+="<li>";
dlgMsg+=c[l][e][ZaMTAQSummaryItem.A_text];
dlgMsg+=(" ("+c[l][e][ZaMTAQSummaryItem.A_count]+" "+ZaMsg.messages+")");
dlgMsg+="</li>";
f++
}dlgMsg+="</ul></li>"
}}}dlgMsg+="</ul>";
if(k==ZaMTA.A_messages){this.confirmMessageDialog.registerCallback(DwtDialog.YES_BUTTON,this.actionMsgsByIDCallback,this,{action:d,removelist:c,qName:g,field:k})
}else{this.confirmMessageDialog.registerCallback(DwtDialog.YES_BUTTON,this.actionMsgsByQueryCallback,this,{action:d,removelist:c,qName:g,field:k})
}}if(dlgMsg){this.confirmMessageDialog.setMessage(dlgMsg,DwtMessageDialog.INFO_STYLE)
}this.confirmMessageDialog.registerCallback(DwtDialog.NO_BUTTON,this.doNotCallback,this);
this.confirmMessageDialog.popup()
};
ZaMTAXFormView.popupMenuListener=function(e){var d,f,g;
if(this.xFormItem){var c=this.xFormItem.getRef().split("/");
d=c[0];
if(c.length>1){f=c[1]
}}var b=this.xFormItem.getForm().parent;
if(f==ZaMTA.A_messages){var g=new Array();
if(this.getSelectionCount()>0){g=this.getSelection()
}}else{var g={};
g[f]=new Array();
if(this.getSelectionCount()>0){g[f]=this.getSelection()
}}b.showConfirmationDlg(e,g,d,f)
};
ZaMTAXFormView.prototype.actionMsgsByIDCallback=function(d){var b=[],g,f,c;
g=d.action;
c=d.removelist;
f=d.qName;
for(var e in c){b.push(c[e][ZaMTAQMsgItem.A_id])
}if(b.length>0){this._containedObject.mailQueueAction(f,g,"id",b.join(","))
}this.confirmMessageDialog.popdown();
if(this.selectActionDialog){this.selectActionDialog.popdown()
}};
ZaMTAXFormView.prototype.actionMsgsByQueryCallback=function(d){var b=[],f,c,e,g;
f=d.action;
c=d.removelist;
e=d.qName;
g=d.field;
this._containedObject.mailQueueAction(e,f,"query",c);
this.confirmMessageDialog.popdown();
if(this.selectActionDialog){this.selectActionDialog.popdown()
}};
ZaMTAXFormView.prototype.doNotCallback=function(){if(this.confirmMessageDialog){this.confirmMessageDialog.popdown()
}};
ZaMTAXFormView.backMsgsButtonHndlr=function(d){var b=this.getInstance();
var e=this.getRef();
var c=this.getInstanceValue(this.getRef()+"/"+ZaMTA.A_pageNum);
if(c){c--
}else{c=0
}b.getMailQStatus(e,b[e][ZaMTA.A_selection_cache],c*ZaMTA.RESULTSPERPAGE)
};
ZaMTAXFormView.fwdMsgsButtonHndlr=function(d){var b=this.getInstance();
var e=this.getRef();
var c=this.getInstanceValue(this.getRef()+"/"+ZaMTA.A_pageNum);
if(c){c++
}else{c=1
}b.getMailQStatus(e,b[e][ZaMTA.A_selection_cache],c*ZaMTA.RESULTSPERPAGE)
};
ZaMTAXFormView.listActionListener=function(b){this.actionMenu.popup(0,b.docX,b.docY)
};
ZaMTAXFormView.isParsingProgressBarVisible=function(c){var b=this.getInstance();
return(b[c][ZaMTA.A_Status]==ZaMTA.STATUS_SCANNING||b[c][ZaMTA.A_Status]==ZaMTA.STATUS_SCAN_COMPLETE)
};
ZaMTAXFormView.refreshListener=function(d){var b=this.getRef().split("/");
var c=b[1];
var e=b[0];
ZaMTAXFormView.clearFilter.call(this,d);
this.getInstance().getMailQStatus(e,null,null,null,true);
this.getInstance().load();
ZaMTAXFormView.tabChoices.setChoices([{value:ZaMTAXFormView._tab1,label:ZaMsg.PQV_Tab_Deferred+" ("+this.getInstance()[ZaMTA.A_DeferredQ][ZaMTA.A_count]+")"},{value:ZaMTAXFormView._tab2,label:ZaMsg.PQV_Tab_IncomingQ+" ("+this.getInstance()[ZaMTA.A_IncomingQ][ZaMTA.A_count]+")"},{value:ZaMTAXFormView._tab3,label:ZaMsg.PQV_Tab_ActiveQ+" ("+this.getInstance()[ZaMTA.A_ActiveQ][ZaMTA.A_count]+")"},{value:ZaMTAXFormView._tab4,label:ZaMsg.PQV_Tab_HoldQ+" ("+this.getInstance()[ZaMTA.A_HoldQ][ZaMTA.A_count]+")"},{value:ZaMTAXFormView._tab5,label:ZaMsg.PQV_Tab_CorruptQ+" ("+this.getInstance()[ZaMTA.A_CorruptQ][ZaMTA.A_count]+")"}]),ZaMTAXFormView.tabChoices.dirtyChoices()
};
ZaMTAXFormView.createPopupMenu=function(d){popupOperations=[new ZaOperation(ZaOperation.DELETE,ZaMsg.TBB_Delete,ZaMsg.PQ_Delete_tt,null,null,new AjxListener(d,ZaMTAXFormView.popupMenuListener,ZaMTA.ActionDelete)),new ZaOperation(ZaOperation.REQUEUE,ZaMsg.TBB_Requeue,ZaMsg.PQ_Requeue_tt,null,null,new AjxListener(d,ZaMTAXFormView.popupMenuListener,ZaMTA.ActionRequeue))];
var b=this.getRef().split("/");
var c=b[0];
if(c==ZaMTA.A_HoldQ){popupOperations.push(new ZaOperation(ZaOperation.RELEASE,ZaMsg.TBB_Release,ZaMsg.PQ_Release_tt,null,null,new AjxListener(d,ZaMTAXFormView.popupMenuListener,ZaMTA.ActionRelease)))
}else{popupOperations.push(new ZaOperation(ZaOperation.HOLD,ZaMsg.TBB_Hold,ZaMsg.PQ_Hold_tt,null,null,new AjxListener(d,ZaMTAXFormView.popupMenuListener,ZaMTA.ActionHold)))
}d.actionMenu=new ZaPopupMenu(d,"ActionMenu",null,popupOperations,ZaId.VIEW_MTA,ZaId.MENU_POP);
d.addActionListener(new AjxListener(d,ZaMTAXFormView.listActionListener));
d.xFormItem=this
};
ZaMTAXFormView.shouldEnableMsgsForwardButton=function(b){return(this.getInstanceValue(b+"/"+ZaMTA.A_more))
};
ZaMTAXFormView.shouldEnableMsgsBackButton=function(b){var c=this.getInstanceValue(b+"/"+ZaMTA.A_pageNum);
return(c&&(c>0))
};
ZaMTAXFormView.myXFormModifier=function(d){d.tableCssStyle="width:100%;position:static;overflow:auto;";
var b=new Array();
b[0]=new ZaListHeaderItem(ZaMTAQSummaryItem.A_text_col,ZaMsg.PQV_name_col,null,"auto",false,null,true,true);
b[1]=new ZaListHeaderItem(ZaMTAQSummaryItem.A_count_col,ZaMsg.PQV_count_col,null,"38px",false,null,true,true);
var c=new Array();
c[0]=new ZaListHeaderItem(ZaMTAQMsgItem.A_id,ZaMsg.PQV_qid_col,null,"132px",null,null,true,true);
if(ZaZimbraAdmin.LOCALE=="en"||ZaZimbraAdmin.LOCALE=="en_AU"||ZaZimbraAdmin.LOCALE=="en_GB"){c[1]=new ZaListHeaderItem(ZaMTAQMsgItem.A_recipients,ZaMsg.PQV_recipients_col,null,"136px",null,null,true,true);
c[2]=new ZaListHeaderItem(ZaMTAQMsgItem.A_sender,ZaMsg.PQV_sender_col,null,"136px",null,null,true,true)
}else{c[1]=new ZaListHeaderItem(ZaMTAQMsgItem.A_recipients,ZaMsg.PQV_recipients_col,null,"106px",null,null,true,true);
c[2]=new ZaListHeaderItem(ZaMTAQMsgItem.A_sender,ZaMsg.PQV_sender_col,null,"106px",null,null,true,true)
}c[3]=new ZaListHeaderItem(ZaMTAQMsgItem.A_origin_ip,ZaMsg.PQV_origin_ip_col,null,"97px",null,null,true,true);
c[4]=new ZaListHeaderItem(ZaMTAQMsgItem.A_origin_host,ZaMsg.PQV_origin_host_col,null,"103px",null,null,true,true);
c[5]=new ZaListHeaderItem(ZaMTAQMsgItem.A_fromdomain,ZaMsg.PQV_origin_domain_col,null,"106px",null,null,true,true);
c[6]=new ZaListHeaderItem(ZaMTAQMsgItem.A_content_filter,ZaMsg.PQV_content_filter_col,"103px",null,null,null,true,true);
c[7]=new ZaListHeaderItem(ZaMTAQMsgItem.A_time,ZaMsg.PQV_time_col,null,"78px",null,null,true,true);
d.items=[{type:_GROUP_,cssClass:"ZmSelectedHeaderBg",colSpan:"*",id:"xform_header",items:[{type:_GROUP_,numCols:2,colSizes:["32px","auto"],items:[{type:_AJX_IMAGE_,src:"Queue_32",label:null},{type:_OUTPUT_,ref:ZaMTA.A_name,label:null,cssClass:"AdminTitle",visibilityChecks:[ZaItem.hasReadPermission],height:32}]}]},{type:_TAB_BAR_,ref:ZaModel.currentTab,containerCssStyle:"background-color:#DDD;padding-top:5px;",choices:ZaMTAXFormView.tabChoices,cssClass:"ZaTabBar",id:"xform_tabbar"},{type:_SWITCH_,items:[{type:_ZATABCASE_,numCols:1,width:"100%",caseKey:ZaMTAXFormView._tab1,items:[{type:_SPACER_,height:"15"},{type:_GROUP_,numCols:8,colSizes:["10%","10%","10%","15%","17%","25%","auto","10%"],tableCssClass:"search_field_tableCssClass",cssClass:"qsearch_field_bar",width:"95%",items:[{type:_OUTPUT_,label:ZaMsg.TBB_LastUpdated,ref:ZaMTA.A_DeferredQ+"/"+ZaMTA.A_refreshTime},{type:_OUTPUT_,label:ZaMsg.PQ_AnalyzerStatus,ref:ZaMTA.A_DeferredQ+"/"+ZaMTA.A_Status,choices:ZaMTAXFormView.SCANNER_STATUS_CHOICES},{type:_DWT_PROGRESS_BAR_,label:ZaMsg.PQ_ParsingProgress,maxValue:null,maxValueRef:ZaMTA.A_DeferredQ+"/"+ZaMTA.A_count,ref:ZaMTA.A_DeferredQ+"/"+ZaMTA.A_totalComplete,visibilityChecks:[[ZaMTAXFormView.isParsingProgressBarVisible,ZaMTA.A_DeferredQ]],visibilityChangeEventSources:[ZaMTA.A_DeferredQ+"/"+ZaMTA.A_Status],align:_CENTER_,wholeCssClass:"mtaprogressbar",progressCssClass:"progressused"},{type:_CELLSPACER_},{type:_DWT_BUTTON_,ref:ZaMTA.A_DeferredQ,label:ZaMsg.PQ_AnalyzeQueue,onActivate:ZaMTAXFormView.refreshListener}]},{type:_SPACER_,height:"1"},{type:_ZAALLSCREEN_GROUPER_,numCols:6,width:"100%",colSizes:["18%","15%","17%","17%","17%","15%"],label:ZaMsg.PQV_Summary,items:[{type:_ZASMALL_CENTER_GROUPER_,numCols:1,width:"100%",label:ZaMsg.PQV_GroupRDomain,items:[{ref:ZaMTA.A_DeferredQ+"/"+ZaMTA.A_rdomain,type:_DWT_LIST_,height:"150",width:"97%",cssClass:"DLSource",forceUpdate:false,createPopupMenu:ZaMTAXFormView.createPopupMenu,preserveSelection:true,multiselect:true,bmolsnr:true,onSelection:ZaMTAXFormView.filterListSelectionListener,widgetClass:ZaQSummaryListView,headerList:b}]},{type:_ZASMALL_CENTER_GROUPER_,numCols:1,width:"100%",label:ZaMsg.PQV_GroupOriginIP,items:[{ref:ZaMTA.A_DeferredQ+"/"+ZaMTA.A_origip,type:_DWT_LIST_,height:"150",width:"96%",cssClass:"DLSource",forceUpdate:false,createPopupMenu:ZaMTAXFormView.createPopupMenu,preserveSelection:true,multiselect:true,bmolsnr:true,onSelection:ZaMTAXFormView.filterListSelectionListener,widgetClass:ZaQSummaryListView,headerList:b}]},{type:_ZASMALL_CENTER_GROUPER_,numCols:1,width:"100%",label:ZaMsg.PQV_GroupSenderDomain,items:[{ref:ZaMTA.A_DeferredQ+"/"+ZaMTA.A_sdomain,type:_DWT_LIST_,height:"150",width:"97%",cssClass:"DLSource",forceUpdate:false,createPopupMenu:ZaMTAXFormView.createPopupMenu,preserveSelection:true,multiselect:true,bmolsnr:true,onSelection:ZaMTAXFormView.filterListSelectionListener,widgetClass:ZaQSummaryListView,headerList:b}]},{type:_ZASMALL_CENTER_GROUPER_,numCols:1,width:"100%",label:ZaMsg.PQV_GroupReceiverAddress,items:[{ref:ZaMTA.A_DeferredQ+"/"+ZaMTA.A_raddress,type:_DWT_LIST_,height:"150",width:"97%",cssClass:"DLSource",forceUpdate:false,createPopupMenu:ZaMTAXFormView.createPopupMenu,preserveSelection:true,multiselect:true,bmolsnr:true,onSelection:ZaMTAXFormView.filterListSelectionListener,widgetClass:ZaQSummaryListView,headerList:b}]},{type:_ZASMALL_CENTER_GROUPER_,numCols:1,width:"100%",label:ZaMsg.PQV_GroupSenderAddress,items:[{ref:ZaMTA.A_DeferredQ+"/"+ZaMTA.A_saddress,type:_DWT_LIST_,height:"150",width:"97%",cssClass:"DLSource",forceUpdate:false,createPopupMenu:ZaMTAXFormView.createPopupMenu,preserveSelection:true,multiselect:true,bmolsnr:true,onSelection:ZaMTAXFormView.filterListSelectionListener,widgetClass:ZaQSummaryListView,headerList:b}]},{type:_ZASMALL_CENTER_GROUPER_,numCols:1,width:"100%",label:ZaMsg.PQV_GroupError,items:[{ref:ZaMTA.A_DeferredQ+"/"+ZaMTA.A_error,type:_DWT_LIST_,height:"150",width:"96%",cssClass:"DLSource",forceUpdate:false,createPopupMenu:ZaMTAXFormView.createPopupMenu,preserveSelection:true,multiselect:true,bmolsnr:true,onSelection:ZaMTAXFormView.filterListSelectionListener,widgetClass:ZaQSummaryListView,headerList:b}]}]},{type:_SPACER_,height:"15"},{type:_ZAALLSCREEN_GROUPER_,numCols:1,width:"100%",label:ZaMsg.PQV_Messages,items:[{type:_GROUP_,numCols:9,colSizes:["16%","2%","16%","2%","16%","2%","16%","2%","28%"],tableCssClass:"search_field_tableCssClass",cssClass:"qsearch_field_bar",items:[{type:_DWT_BUTTON_,ref:ZaMTA.A_DeferredQ,label:ZaMsg.TBB_RequeueAll,onActivate:"ZaMTAXFormView.actionButtonListener.call(this,ZaMTA.ActionRequeue);",toolTipContent:ZaMsg.PQ_Requeue_tt},{type:_CELLSPACER_},{type:_DWT_BUTTON_,ref:ZaMTA.A_DeferredQ,label:ZaMsg.TBB_HoldAll,onActivate:"ZaMTAXFormView.actionButtonListener.call(this,ZaMTA.ActionHold);",toolTipContent:ZaMsg.PQ_Hold_tt},{type:_CELLSPACER_},{type:_DWT_BUTTON_,ref:ZaMTA.A_DeferredQ,label:ZaMsg.PQ_DeleteAll,onActivate:"ZaMTAXFormView.actionButtonListener.call(this,ZaMTA.ActionDelete);",toolTipContent:ZaMsg.PQ_Delete_tt},{type:_CELLSPACER_},{type:_DWT_BUTTON_,label:ZaMsg.PQ_showAllMsgs,ref:ZaMTA.A_DeferredQ,onActivate:ZaMTAXFormView.showAllMsgs},{type:_CELLSPACER_},{type:_GROUP_,numCols:3,items:[{type:_DWT_BUTTON_,label:ZaMsg.Previous,toolTipContent:ZaMsg.PrevPage_tt,width:86,id:"backButton",icon:"LeftArrow",disIcon:"LeftArrowDis",ref:ZaMTA.A_DeferredQ,onActivate:"ZaMTAXFormView.backMsgsButtonHndlr.call(this,event)",enableDisableChangeEventSources:[ZaMTA.A_DeferredQ+"/"+ZaMTA.A_pageNum],enableDisableChecks:[[ZaMTAXFormView.shouldEnableMsgsBackButton,ZaMTA.A_DeferredQ]]},{type:_CELLSPACER_},{type:_DWT_BUTTON_,label:ZaMsg.Next,toolTipContent:ZaMsg.NextPage_tt,width:86,id:"fwdButton",icon:"RightArrow",disIcon:"RightArrowDis",ref:ZaMTA.A_DeferredQ,labelLocation:(DwtLabel.IMAGE_RIGHT|DwtLabel.ALIGN_CENTER),enableDisableChangeEventSources:[ZaMTA.A_DeferredQ+"/"+ZaMTA.A_more],enableDisableChecks:[[ZaMTAXFormView.shouldEnableMsgsForwardButton,ZaMTA.A_DeferredQ]],onActivate:"ZaMTAXFormView.fwdMsgsButtonHndlr.call(this,event)"}]}]},{ref:ZaMTA.A_DeferredQ+"/"+ZaMTA.A_messages,onSelection:ZaMTAXFormView.msgListSelectionListener,type:_DWT_LIST_,height:"200",width:"99%",cssClass:"DLSource",forceUpdate:false,createPopupMenu:ZaMTAXFormView.createPopupMenu,multiselect:true,widgetClass:ZaQMessagesListView,headerList:c}]}]},{type:_ZATABCASE_,numCols:1,width:"100%",caseKey:ZaMTAXFormView._tab2,items:[{type:_SPACER_,height:"15"},{type:_GROUP_,numCols:8,colSizes:["10%","10%","10%","15%","15%","25%","auto","10%"],tableCssClass:"search_field_tableCssClass",cssClass:"qsearch_field_bar",width:"95%",items:[{type:_OUTPUT_,label:ZaMsg.TBB_LastUpdated,ref:ZaMTA.A_IncomingQ+"/"+ZaMTA.A_refreshTime},{type:_OUTPUT_,label:ZaMsg.PQ_AnalyzerStatus,ref:ZaMTA.A_IncomingQ+"/"+ZaMTA.A_Status,choices:ZaMTAXFormView.SCANNER_STATUS_CHOICES},{type:_DWT_PROGRESS_BAR_,label:ZaMsg.PQ_ParsingProgress,maxValue:null,maxValueRef:ZaMTA.A_IncomingQ+"/"+ZaMTA.A_count,ref:ZaMTA.A_IncomingQ+"/"+ZaMTA.A_totalComplete,visibilityChecks:[[ZaMTAXFormView.isParsingProgressBarVisible,ZaMTA.A_IncomingQ]],visibilityChangeEventSources:[ZaMTA.A_IncomingQ+"/"+ZaMTA.A_Status],align:_CENTER_,wholeCssClass:"mtaprogressbar",progressCssClass:"progressused"},{type:_CELLSPACER_},{type:_DWT_BUTTON_,ref:ZaMTA.A_IncomingQ,label:ZaMsg.PQ_AnalyzeQueue,onActivate:ZaMTAXFormView.refreshListener}]},{type:_SPACER_,height:"1"},{type:_ZAALLSCREEN_GROUPER_,numCols:5,width:"100%",label:ZaMsg.PQV_Summary,colSizes:["20%","20%","20%","20%","20%"],items:[{type:_ZASMALL_CENTER_GROUPER_,numCols:1,width:"100%",label:ZaMsg.PQV_GroupRDomain,items:[{ref:ZaMTA.A_IncomingQ+"/"+ZaMTA.A_rdomain,type:_DWT_LIST_,height:"150",width:"97%",cssClass:"DLSource",forceUpdate:false,createPopupMenu:ZaMTAXFormView.createPopupMenu,preserveSelection:true,multiselect:true,bmolsnr:true,onSelection:ZaMTAXFormView.filterListSelectionListener,widgetClass:ZaQSummaryListView,headerList:b}]},{type:_ZASMALL_CENTER_GROUPER_,numCols:1,width:"100%",label:ZaMsg.PQV_GroupOriginIP,items:[{ref:ZaMTA.A_IncomingQ+"/"+ZaMTA.A_origip,type:_DWT_LIST_,height:"150",width:"97%",cssClass:"DLSource",forceUpdate:false,createPopupMenu:ZaMTAXFormView.createPopupMenu,preserveSelection:true,multiselect:true,bmolsnr:true,onSelection:ZaMTAXFormView.filterListSelectionListener,widgetClass:ZaQSummaryListView,headerList:b}]},{type:_ZASMALL_CENTER_GROUPER_,numCols:1,width:"100%",label:ZaMsg.PQV_GroupSenderDomain,items:[{ref:ZaMTA.A_IncomingQ+"/"+ZaMTA.A_sdomain,type:_DWT_LIST_,height:"150",width:"97%",cssClass:"DLSource",forceUpdate:false,createPopupMenu:ZaMTAXFormView.createPopupMenu,preserveSelection:true,multiselect:true,bmolsnr:true,onSelection:ZaMTAXFormView.filterListSelectionListener,widgetClass:ZaQSummaryListView,headerList:b}]},{type:_ZASMALL_CENTER_GROUPER_,numCols:1,width:"100%",label:ZaMsg.PQV_GroupReceiverAddress,items:[{ref:ZaMTA.A_IncomingQ+"/"+ZaMTA.A_raddress,type:_DWT_LIST_,height:"150",width:"97%",cssClass:"DLSource",forceUpdate:false,createPopupMenu:ZaMTAXFormView.createPopupMenu,preserveSelection:true,multiselect:true,bmolsnr:true,onSelection:ZaMTAXFormView.filterListSelectionListener,widgetClass:ZaQSummaryListView,headerList:b}]},{type:_ZASMALL_CENTER_GROUPER_,numCols:1,width:"100%",label:ZaMsg.PQV_GroupSenderAddress,items:[{ref:ZaMTA.A_IncomingQ+"/"+ZaMTA.A_saddress,type:_DWT_LIST_,height:"150",width:"97%",cssClass:"DLSource",forceUpdate:false,createPopupMenu:ZaMTAXFormView.createPopupMenu,preserveSelection:true,multiselect:true,bmolsnr:true,onSelection:ZaMTAXFormView.filterListSelectionListener,widgetClass:ZaQSummaryListView,headerList:b}]}]},{type:_SPACER_,height:"15"},{type:_ZAALLSCREEN_GROUPER_,numCols:1,width:"100%",label:ZaMsg.PQV_Messages,items:[{type:_GROUP_,numCols:9,colSizes:["16%","3%","16%","3%","16%","3%","16%","3%","24%"],tableCssClass:"search_field_tableCssClass",cssClass:"qsearch_field_bar",items:[{type:_DWT_BUTTON_,ref:ZaMTA.A_IncomingQ,label:ZaMsg.TBB_RequeueAll,onActivate:"ZaMTAXFormView.actionButtonListener.call(this,ZaMTA.ActionRequeue)",toolTipContent:ZaMsg.PQ_Requeue_tt},{type:_CELLSPACER_},{type:_DWT_BUTTON_,ref:ZaMTA.A_IncomingQ,label:ZaMsg.TBB_HoldAll,onActivate:"ZaMTAXFormView.actionButtonListener.call(this,ZaMTA.ActionHold)",toolTipContent:ZaMsg.PQ_Hold_tt},{type:_CELLSPACER_},{type:_DWT_BUTTON_,ref:ZaMTA.A_IncomingQ,label:ZaMsg.PQ_DeleteAll,onActivate:"ZaMTAXFormView.actionButtonListener.call(this,ZaMTA.ActionDelete)",toolTipContent:ZaMsg.PQ_Delete_tt},{type:_CELLSPACER_},{type:_DWT_BUTTON_,label:ZaMsg.PQ_showAllMsgs,ref:ZaMTA.A_IncomingQ,onActivate:ZaMTAXFormView.showAllMsgs},{type:_CELLSPACER_},{type:_GROUP_,numCols:3,items:[{type:_DWT_BUTTON_,label:ZaMsg.Previous,toolTipContent:ZaMsg.PrevPage_tt,width:86,id:"backButton",icon:"LeftArrow",disIcon:"LeftArrowDis",ref:ZaMTA.A_IncomingQ,onActivate:"ZaMTAXFormView.backMsgsButtonHndlr.call(this,event)",enableDisableChangeEventSources:[ZaMTA.A_IncomingQ+"/"+ZaMTA.A_pageNum],enableDisableChecks:[[ZaMTAXFormView.shouldEnableMsgsBackButton,ZaMTA.A_IncomingQ]]},{type:_CELLSPACER_},{type:_DWT_BUTTON_,label:ZaMsg.Next,toolTipContent:ZaMsg.NextPage_tt,width:86,id:"fwdButton",icon:"RightArrow",disIcon:"RightArrowDis",ref:ZaMTA.A_IncomingQ,labelLocation:(DwtLabel.IMAGE_RIGHT|DwtLabel.ALIGN_CENTER),onActivate:"ZaMTAXFormView.fwdMsgsButtonHndlr.call(this,event)",enableDisableChangeEventSources:[ZaMTA.A_IncomingQ+"/"+ZaMTA.A_more],enableDisableChecks:[[ZaMTAXFormView.shouldEnableMsgsForwardButton,ZaMTA.A_IncomingQ]]}]}]},{ref:ZaMTA.A_IncomingQ+"/"+ZaMTA.A_messages,onSelection:ZaMTAXFormView.msgListSelectionListener,type:_DWT_LIST_,height:"200",width:"99%",cssClass:"DLSource",forceUpdate:false,createPopupMenu:ZaMTAXFormView.createPopupMenu,multiselect:true,widgetClass:ZaQMessagesListView,headerList:c}]}]},{type:_ZATABCASE_,numCols:1,cssClass:(AjxEnv.isIE?"IEcontainer":"XFormCase"),width:"100%",caseKey:ZaMTAXFormView._tab3,items:[{type:_SPACER_,height:"15"},{type:_GROUP_,numCols:8,colSizes:["10%","10%","10%","15%","15%","25%","auto","10%"],tableCssClass:"search_field_tableCssClass",cssClass:"qsearch_field_bar",items:[{type:_OUTPUT_,label:ZaMsg.TBB_LastUpdated,ref:ZaMTA.A_ActiveQ+"/"+ZaMTA.A_refreshTime},{type:_OUTPUT_,label:ZaMsg.PQ_AnalyzerStatus,ref:ZaMTA.A_ActiveQ+"/"+ZaMTA.A_Status,choices:ZaMTAXFormView.SCANNER_STATUS_CHOICES},{type:_DWT_PROGRESS_BAR_,label:ZaMsg.PQ_ParsingProgress,maxValue:null,maxValueRef:ZaMTA.A_ActiveQ+"/"+ZaMTA.A_count,ref:ZaMTA.A_ActiveQ+"/"+ZaMTA.A_totalComplete,visibilityChecks:[[ZaMTAXFormView.isParsingProgressBarVisible,ZaMTA.A_ActiveQ]],visibilityChangeEventSources:[ZaMTA.A_ActiveQ+"/"+ZaMTA.A_Status],align:_CENTER_,wholeCssClass:"mtaprogressbar",progressCssClass:"progressused"},{type:_CELLSPACER_},{type:_DWT_BUTTON_,ref:ZaMTA.A_ActiveQ,label:ZaMsg.PQ_AnalyzeQueue,onActivate:ZaMTAXFormView.refreshListener}]},{type:_SPACER_,height:"1"},{type:_ZAALLSCREEN_GROUPER_,numCols:5,width:"100%",label:ZaMsg.PQV_Summary,colSizes:["20%","20%","20%","20%","20%"],items:[{type:_ZASMALL_CENTER_GROUPER_,numCols:1,width:"100%",label:ZaMsg.PQV_GroupRDomain,items:[{ref:ZaMTA.A_ActiveQ+"/"+ZaMTA.A_rdomain,type:_DWT_LIST_,height:"150",width:"97%",cssClass:"DLSource",forceUpdate:false,createPopupMenu:ZaMTAXFormView.createPopupMenu,preserveSelection:true,multiselect:true,bmolsnr:true,onSelection:ZaMTAXFormView.filterListSelectionListener,widgetClass:ZaQSummaryListView,headerList:b}]},{type:_ZASMALL_CENTER_GROUPER_,numCols:1,width:"100%",label:ZaMsg.PQV_GroupOriginIP,items:[{ref:ZaMTA.A_ActiveQ+"/"+ZaMTA.A_origip,type:_DWT_LIST_,height:"150",width:"97%",cssClass:"DLSource",forceUpdate:false,createPopupMenu:ZaMTAXFormView.createPopupMenu,preserveSelection:true,multiselect:true,bmolsnr:true,onSelection:ZaMTAXFormView.filterListSelectionListener,widgetClass:ZaQSummaryListView,headerList:b}]},{type:_ZASMALL_CENTER_GROUPER_,numCols:1,width:"100%",label:ZaMsg.PQV_GroupSenderDomain,items:[{ref:ZaMTA.A_ActiveQ+"/"+ZaMTA.A_sdomain,type:_DWT_LIST_,height:"150",width:"97%",cssClass:"DLSource",forceUpdate:false,createPopupMenu:ZaMTAXFormView.createPopupMenu,preserveSelection:true,multiselect:true,bmolsnr:true,onSelection:ZaMTAXFormView.filterListSelectionListener,widgetClass:ZaQSummaryListView,headerList:b}]},{type:_ZASMALL_CENTER_GROUPER_,numCols:1,width:"100%",label:ZaMsg.PQV_GroupReceiverAddress,items:[{ref:ZaMTA.A_ActiveQ+"/"+ZaMTA.A_raddress,type:_DWT_LIST_,height:"150",width:"97%",cssClass:"DLSource",forceUpdate:false,createPopupMenu:ZaMTAXFormView.createPopupMenu,preserveSelection:true,multiselect:true,bmolsnr:true,onSelection:ZaMTAXFormView.filterListSelectionListener,widgetClass:ZaQSummaryListView,headerList:b}]},{type:_ZASMALL_CENTER_GROUPER_,numCols:1,width:"100%",label:ZaMsg.PQV_GroupSenderAddress,items:[{ref:ZaMTA.A_ActiveQ+"/"+ZaMTA.A_saddress,type:_DWT_LIST_,height:"150",width:"97%",cssClass:"DLSource",forceUpdate:false,createPopupMenu:ZaMTAXFormView.createPopupMenu,preserveSelection:true,multiselect:true,bmolsnr:true,onSelection:ZaMTAXFormView.filterListSelectionListener,widgetClass:ZaQSummaryListView,headerList:b}]}]},{type:_SPACER_,height:"15"},{type:_ZAALLSCREEN_GROUPER_,numCols:1,width:"100%",label:ZaMsg.PQV_Messages,items:[{type:_GROUP_,numCols:9,colSizes:["16%","3%","16%","3%","16%","3%","16%","3%","24%"],tableCssClass:"search_field_tableCssClass",cssClass:"qsearch_field_bar",items:[{type:_DWT_BUTTON_,ref:ZaMTA.A_ActiveQ,label:ZaMsg.TBB_RequeueAll,onActivate:"ZaMTAXFormView.actionButtonListener.call(this,ZaMTA.ActionRequeue)",toolTipContent:ZaMsg.PQ_Requeue_tt},{type:_CELLSPACER_},{type:_DWT_BUTTON_,ref:ZaMTA.A_ActiveQ,label:ZaMsg.TBB_HoldAll,onActivate:"ZaMTAXFormView.actionButtonListener.call(this,ZaMTA.ActionHold)",toolTipContent:ZaMsg.PQ_Hold_tt},{type:_CELLSPACER_},{type:_DWT_BUTTON_,ref:ZaMTA.A_ActiveQ,label:ZaMsg.PQ_DeleteAll,onActivate:"ZaMTAXFormView.actionButtonListener.call(this,ZaMTA.ActionDelete)",toolTipContent:ZaMsg.PQ_Delete_tt},{type:_CELLSPACER_},{type:_DWT_BUTTON_,label:ZaMsg.PQ_showAllMsgs,ref:ZaMTA.A_ActiveQ,onActivate:ZaMTAXFormView.showAllMsgs},{type:_CELLSPACER_},{type:_GROUP_,numCols:3,items:[{type:_DWT_BUTTON_,label:ZaMsg.Previous,toolTipContent:ZaMsg.PrevPage_tt,width:86,id:"backButton",icon:"LeftArrow",disIcon:"LeftArrowDis",ref:ZaMTA.A_ActiveQ,onActivate:"ZaMTAXFormView.backMsgsButtonHndlr.call(this,event)",enableDisableChangeEventSources:[ZaMTA.A_ActiveQ+"/"+ZaMTA.A_pageNum],enableDisableChecks:[[ZaMTAXFormView.shouldEnableMsgsBackButton,ZaMTA.A_ActiveQ]]},{type:_CELLSPACER_},{type:_DWT_BUTTON_,label:ZaMsg.Next,toolTipContent:ZaMsg.NextPage_tt,width:86,id:"fwdButton",icon:"RightArrow",disIcon:"RightArrowDis",ref:ZaMTA.A_ActiveQ,labelLocation:(DwtLabel.IMAGE_RIGHT|DwtLabel.ALIGN_CENTER),onActivate:"ZaMTAXFormView.fwdMsgsButtonHndlr.call(this,event)",enableDisableChangeEventSources:[ZaMTA.A_ActiveQ+"/"+ZaMTA.A_more],enableDisableChecks:[[ZaMTAXFormView.shouldEnableMsgsForwardButton,ZaMTA.A_ActiveQ]]}]}]},{ref:ZaMTA.A_ActiveQ+"/"+ZaMTA.A_messages,onSelection:ZaMTAXFormView.msgListSelectionListener,type:_DWT_LIST_,height:"200",width:"99%",cssClass:"DLSource",forceUpdate:false,createPopupMenu:ZaMTAXFormView.createPopupMenu,multiselect:true,widgetClass:ZaQMessagesListView,headerList:c}]}]},{type:_ZATABCASE_,numCols:1,cssClass:(AjxEnv.isIE?"IEcontainer":"XFormCase"),width:"100%",caseKey:ZaMTAXFormView._tab4,items:[{type:_SPACER_,height:"15"},{type:_GROUP_,numCols:8,colSizes:["10%","10%","10%","15%","15%","25%","auto","10%"],tableCssClass:"search_field_tableCssClass",cssClass:"qsearch_field_bar",width:"95%",items:[{type:_OUTPUT_,label:ZaMsg.TBB_LastUpdated,ref:ZaMTA.A_HoldQ+"/"+ZaMTA.A_refreshTime},{type:_OUTPUT_,label:ZaMsg.PQ_AnalyzerStatus,ref:ZaMTA.A_HoldQ+"/"+ZaMTA.A_Status,choices:ZaMTAXFormView.SCANNER_STATUS_CHOICES},{type:_DWT_PROGRESS_BAR_,label:ZaMsg.PQ_ParsingProgress,maxValue:null,maxValueRef:ZaMTA.A_HoldQ+"/"+ZaMTA.A_count,ref:ZaMTA.A_HoldQ+"/"+ZaMTA.A_totalComplete,visibilityChecks:[[ZaMTAXFormView.isParsingProgressBarVisible,ZaMTA.A_HoldQ]],visibilityChangeEventSources:[ZaMTA.A_HoldQ+"/"+ZaMTA.A_Status],align:_CENTER_,wholeCssClass:"mtaprogressbar",progressCssClass:"progressused"},{type:_CELLSPACER_},{type:_DWT_BUTTON_,ref:ZaMTA.A_HoldQ,label:ZaMsg.PQ_AnalyzeQueue,onActivate:ZaMTAXFormView.refreshListener}]},{type:_SPACER_,height:"1"},{type:_ZAALLSCREEN_GROUPER_,numCols:5,width:"100%",label:ZaMsg.PQV_Summary,colSizes:["20%","20%","20%","20%","20%"],items:[{type:_ZASMALL_CENTER_GROUPER_,numCols:1,width:"100%",label:ZaMsg.PQV_GroupRDomain,items:[{ref:ZaMTA.A_HoldQ+"/"+ZaMTA.A_rdomain,type:_DWT_LIST_,height:"150",width:"97%",cssClass:"DLSource",forceUpdate:false,createPopupMenu:ZaMTAXFormView.createPopupMenu,preserveSelection:true,multiselect:true,bmolsnr:true,onSelection:ZaMTAXFormView.filterListSelectionListener,widgetClass:ZaQSummaryListView,headerList:b}]},{type:_ZASMALL_CENTER_GROUPER_,numCols:1,width:"100%",label:ZaMsg.PQV_GroupOriginIP,items:[{ref:ZaMTA.A_HoldQ+"/"+ZaMTA.A_origip,type:_DWT_LIST_,height:"150",width:"97%",cssClass:"DLSource",forceUpdate:false,createPopupMenu:ZaMTAXFormView.createPopupMenu,preserveSelection:true,multiselect:true,bmolsnr:true,onSelection:ZaMTAXFormView.filterListSelectionListener,widgetClass:ZaQSummaryListView,headerList:b}]},{type:_ZASMALL_CENTER_GROUPER_,numCols:1,width:"100%",label:ZaMsg.PQV_GroupSenderDomain,items:[{ref:ZaMTA.A_HoldQ+"/"+ZaMTA.A_sdomain,type:_DWT_LIST_,height:"150",width:"97%",cssClass:"DLSource",forceUpdate:false,createPopupMenu:ZaMTAXFormView.createPopupMenu,preserveSelection:true,multiselect:true,bmolsnr:true,onSelection:ZaMTAXFormView.filterListSelectionListener,widgetClass:ZaQSummaryListView,headerList:b}]},{type:_ZASMALL_CENTER_GROUPER_,numCols:1,width:"100%",label:ZaMsg.PQV_GroupReceiverAddress,items:[{ref:ZaMTA.A_HoldQ+"/"+ZaMTA.A_raddress,type:_DWT_LIST_,height:"150",width:"97%",cssClass:"DLSource",forceUpdate:false,createPopupMenu:ZaMTAXFormView.createPopupMenu,preserveSelection:true,multiselect:true,bmolsnr:true,onSelection:ZaMTAXFormView.filterListSelectionListener,widgetClass:ZaQSummaryListView,headerList:b}]},{type:_ZASMALL_CENTER_GROUPER_,numCols:1,width:"100%",label:ZaMsg.PQV_GroupSenderAddress,items:[{ref:ZaMTA.A_HoldQ+"/"+ZaMTA.A_saddress,type:_DWT_LIST_,height:"150",width:"97%",cssClass:"DLSource",forceUpdate:false,createPopupMenu:ZaMTAXFormView.createPopupMenu,preserveSelection:true,multiselect:true,bmolsnr:true,onSelection:ZaMTAXFormView.filterListSelectionListener,widgetClass:ZaQSummaryListView,headerList:b}]}]},{type:_SPACER_,height:"15"},{type:_ZAALLSCREEN_GROUPER_,numCols:1,width:"100%",label:ZaMsg.PQV_Messages,items:[{type:_GROUP_,numCols:9,colSizes:["16%","3%","16%","3%","16%","3%","16%","3%","24%"],tableCssClass:"search_field_tableCssClass",cssClass:"qsearch_field_bar",items:[{type:_DWT_BUTTON_,ref:ZaMTA.A_HoldQ,label:ZaMsg.TBB_RequeueAll,onActivate:"ZaMTAXFormView.actionButtonListener.call(this,ZaMTA.ActionRequeue)",toolTipContent:ZaMsg.PQ_Requeue_tt},{type:_CELLSPACER_},{type:_DWT_BUTTON_,ref:ZaMTA.A_HoldQ,label:ZaMsg.TBB_ReleaseAll,onActivate:"ZaMTAXFormView.actionButtonListener.call(this,ZaMTA.ActionRelease)",toolTipContent:ZaMsg.PQ_Release_tt},{type:_CELLSPACER_},{type:_DWT_BUTTON_,ref:ZaMTA.A_HoldQ,label:ZaMsg.PQ_DeleteAll,onActivate:"ZaMTAXFormView.actionButtonListener.call(this,ZaMTA.ActionDelete)",toolTipContent:ZaMsg.PQ_Delete_tt},{type:_CELLSPACER_},{type:_DWT_BUTTON_,label:ZaMsg.PQ_showAllMsgs,ref:ZaMTA.A_HoldQ,onActivate:ZaMTAXFormView.showAllMsgs},{type:_CELLSPACER_},{type:_GROUP_,numCols:3,items:[{type:_DWT_BUTTON_,label:ZaMsg.Previous,toolTipContent:ZaMsg.PrevPage_tt,width:86,id:"backButton",icon:"LeftArrow",disIcon:"LeftArrowDis",ref:ZaMTA.A_HoldQ,onActivate:"ZaMTAXFormView.backMsgsButtonHndlr.call(this,event)",enableDisableChangeEventSources:[ZaMTA.A_HoldQ+"/"+ZaMTA.A_pageNum],enableDisableChecks:[[ZaMTAXFormView.shouldEnableMsgsBackButton,ZaMTA.A_HoldQ]]},{type:_CELLSPACER_},{type:_DWT_BUTTON_,label:ZaMsg.Next,toolTipContent:ZaMsg.NextPage_tt,width:86,id:"fwdButton",icon:"RightArrow",disIcon:"RightArrowDis",ref:ZaMTA.A_HoldQ,labelLocation:(DwtLabel.IMAGE_RIGHT|DwtLabel.ALIGN_CENTER),onActivate:"ZaMTAXFormView.fwdMsgsButtonHndlr.call(this,event)",enableDisableChangeEventSources:[ZaMTA.A_HoldQ+"/"+ZaMTA.A_more],enableDisableChecks:[[ZaMTAXFormView.shouldEnableMsgsForwardButton,ZaMTA.A_HoldQ]]}]}]},{ref:ZaMTA.A_HoldQ+"/"+ZaMTA.A_messages,onSelection:ZaMTAXFormView.msgListSelectionListener,type:_DWT_LIST_,height:"200",width:"99%",cssClass:"DLSource",forceUpdate:false,createPopupMenu:ZaMTAXFormView.createPopupMenu,multiselect:true,widgetClass:ZaQMessagesListView,headerList:c}]}]},{type:_ZATABCASE_,numCols:1,cssClass:(AjxEnv.isIE?"IEcontainer":"XFormCase"),width:"100%",caseKey:ZaMTAXFormView._tab5,items:[{type:_SPACER_,height:"15"},{type:_GROUP_,numCols:8,colSizes:["10%","10%","10%","15%","15%","25%","auto","10%"],tableCssClass:"search_field_tableCssClass",cssClass:"qsearch_field_bar",items:[{type:_OUTPUT_,label:ZaMsg.TBB_LastUpdated,ref:ZaMTA.A_CorruptQ+"/"+ZaMTA.A_refreshTime},{type:_OUTPUT_,label:ZaMsg.PQ_AnalyzerStatus,ref:ZaMTA.A_CorruptQ+"/"+ZaMTA.A_Status,choices:ZaMTAXFormView.SCANNER_STATUS_CHOICES},{type:_DWT_PROGRESS_BAR_,label:ZaMsg.PQ_ParsingProgress,maxValue:null,maxValueRef:ZaMTA.A_CorruptQ+"/"+ZaMTA.A_count,ref:ZaMTA.A_CorruptQ+"/"+ZaMTA.A_totalComplete,visibilityChecks:[[ZaMTAXFormView.isParsingProgressBarVisible,ZaMTA.A_CorruptQ]],visibilityChangeEventSources:[ZaMTA.A_CorruptQ+"/"+ZaMTA.A_Status],align:_CENTER_,wholeCssClass:"mtaprogressbar",progressCssClass:"progressused"},{type:_CELLSPACER_},{type:_DWT_BUTTON_,ref:ZaMTA.A_CorruptQ,label:ZaMsg.PQ_AnalyzeQueue,onActivate:ZaMTAXFormView.refreshListener}]},{type:_SPACER_,height:"1"},{type:_ZAALLSCREEN_GROUPER_,numCols:5,width:"100%",label:ZaMsg.PQV_Summary,colSizes:["20%","20%","20%","20%","20%"],items:[{type:_ZASMALL_CENTER_GROUPER_,numCols:1,width:"100%",label:ZaMsg.PQV_GroupRDomain,items:[{ref:ZaMTA.A_CorruptQ+"/"+ZaMTA.A_rdomain,type:_DWT_LIST_,height:"150",width:"97%",cssClass:"DLSource",forceUpdate:false,createPopupMenu:ZaMTAXFormView.createPopupMenu,preserveSelection:true,multiselect:true,bmolsnr:true,onSelection:ZaMTAXFormView.filterListSelectionListener,widgetClass:ZaQSummaryListView,headerList:b}]},{type:_ZASMALL_CENTER_GROUPER_,numCols:1,width:"100%",label:ZaMsg.PQV_GroupOriginIP,items:[{ref:ZaMTA.A_CorruptQ+"/"+ZaMTA.A_origip,type:_DWT_LIST_,height:"150",width:"97%",cssClass:"DLSource",forceUpdate:false,createPopupMenu:ZaMTAXFormView.createPopupMenu,preserveSelection:true,multiselect:true,bmolsnr:true,onSelection:ZaMTAXFormView.filterListSelectionListener,widgetClass:ZaQSummaryListView,headerList:b}]},{type:_ZASMALL_CENTER_GROUPER_,numCols:1,width:"100%",label:ZaMsg.PQV_GroupSenderDomain,items:[{ref:ZaMTA.A_CorruptQ+"/"+ZaMTA.A_sdomain,type:_DWT_LIST_,height:"150",width:"97%",cssClass:"DLSource",forceUpdate:false,createPopupMenu:ZaMTAXFormView.createPopupMenu,preserveSelection:true,multiselect:true,bmolsnr:true,onSelection:ZaMTAXFormView.filterListSelectionListener,widgetClass:ZaQSummaryListView,headerList:b}]},{type:_ZASMALL_CENTER_GROUPER_,numCols:1,width:"100%",label:ZaMsg.PQV_GroupReceiverAddress,items:[{ref:ZaMTA.A_CorruptQ+"/"+ZaMTA.A_raddress,type:_DWT_LIST_,height:"150",width:"97%",cssClass:"DLSource",forceUpdate:false,createPopupMenu:ZaMTAXFormView.createPopupMenu,preserveSelection:true,multiselect:true,bmolsnr:true,onSelection:ZaMTAXFormView.filterListSelectionListener,widgetClass:ZaQSummaryListView,headerList:b}]},{type:_ZASMALL_CENTER_GROUPER_,numCols:1,width:"100%",label:ZaMsg.PQV_GroupSenderAddress,items:[{ref:ZaMTA.A_CorruptQ+"/"+ZaMTA.A_saddress,type:_DWT_LIST_,height:"150",width:"97%",cssClass:"DLSource",forceUpdate:false,createPopupMenu:ZaMTAXFormView.createPopupMenu,preserveSelection:true,multiselect:true,bmolsnr:true,onSelection:ZaMTAXFormView.filterListSelectionListener,widgetClass:ZaQSummaryListView,headerList:b}]}]},{type:_SPACER_,height:"15"},{type:_ZAALLSCREEN_GROUPER_,numCols:1,width:"100%",label:ZaMsg.PQV_Messages,items:[{type:_GROUP_,numCols:9,colSizes:["16%","3%","16%","3%","16%","3%","16%","3%","24%"],tableCssClass:"search_field_tableCssClass",cssClass:"qsearch_field_bar",items:[{type:_DWT_BUTTON_,ref:ZaMTA.A_CorruptQ,label:ZaMsg.TBB_RequeueAll,onActivate:"ZaMTAXFormView.actionButtonListener.call(this,ZaMTA.ActionRequeue)",toolTipContent:ZaMsg.PQ_Requeue_tt},{type:_CELLSPACER_},{type:_DWT_BUTTON_,ref:ZaMTA.A_CorruptQ,label:ZaMsg.TBB_HoldAll,onActivate:"ZaMTAXFormView.actionButtonListener.call(this,ZaMTA.ActionHold)",toolTipContent:ZaMsg.PQ_Hold_tt},{type:_CELLSPACER_},{type:_DWT_BUTTON_,ref:ZaMTA.A_CorruptQ,label:ZaMsg.PQ_DeleteAll,onActivate:"ZaMTAXFormView.actionButtonListener.call(this,ZaMTA.ActionDelete)",toolTipContent:ZaMsg.PQ_Delete_tt},{type:_CELLSPACER_},{type:_DWT_BUTTON_,label:ZaMsg.PQ_showAllMsgs,ref:ZaMTA.A_CorruptQ,onActivate:ZaMTAXFormView.showAllMsgs},{type:_CELLSPACER_},{type:_GROUP_,numCols:3,items:[{type:_DWT_BUTTON_,label:ZaMsg.Previous,toolTipContent:ZaMsg.PrevPage_tt,width:86,id:"backButton",icon:"LeftArrow",disIcon:"LeftArrowDis",ref:ZaMTA.A_CorruptQ,onActivate:"ZaMTAXFormView.backMsgsButtonHndlr.call(this,event)",enableDisableChangeEventSources:[ZaMTA.A_CorruptQ+"/"+ZaMTA.A_pageNum],enableDisableChecks:[[ZaMTAXFormView.shouldEnableMsgsBackButton,ZaMTA.A_CorruptQ]]},{type:_CELLSPACER_},{type:_DWT_BUTTON_,label:ZaMsg.Next,toolTipContent:ZaMsg.NextPage_tt,width:86,id:"fwdButton",icon:"RightArrow",disIcon:"RightArrowDis",ref:ZaMTA.A_CorruptQ,labelLocation:(DwtLabel.IMAGE_RIGHT|DwtLabel.ALIGN_CENTER),onActivate:"ZaMTAXFormView.fwdMsgsButtonHndlr.call(this,event)",enableDisableChangeEventSources:[ZaMTA.A_CorruptQ+"/"+ZaMTA.A_more],enableDisableChecks:[[ZaMTAXFormView.shouldEnableMsgsForwardButton,ZaMTA.A_CorruptQ]]}]}]},{ref:ZaMTA.A_CorruptQ+"/"+ZaMTA.A_messages,onSelection:ZaMTAXFormView.msgListSelectionListener,type:_DWT_LIST_,height:"200",width:"99%",cssClass:"DLSource",forceUpdate:false,createPopupMenu:ZaMTAXFormView.createPopupMenu,multiselect:true,widgetClass:ZaQMessagesListView,headerList:c}]}]}]}]
};
ZaTabView.XFormModifiers.ZaMTAXFormView.push(ZaMTAXFormView.myXFormModifier)
}if(AjxPackage.define("zimbraAdmin.mta.view.ZaMTAActionDialog")){ZaMTAActionDialog=function(e,f,b,c,d){if(arguments.length==0){return
}this._standardButtons=[DwtDialog.CANCEL_BUTTON,DwtDialog.OK_BUTTON];
ZaXDialog.call(this,e,null,f,c,d);
this.initForm(ZaMTAActionDialog.myXModel,this.getMyXForm(b));
this._helpURL=ZaMTAActionDialog.helpURL
};
ZaMTAActionDialog.prototype=new ZaXDialog;
ZaMTAActionDialog.prototype.constructor=ZaMTAActionDialog;
ZaMTAActionDialog.helpURL=location.pathname+ZaUtil.HELP_URL+"monitoring/monitoring_zimbra_mta_mail_queues.htm?locid="+AjxEnv.DEFAULT_LOCALE;
ZaMTAActionDialog.ACTION="action";
ZaMTAActionDialog.QNAME="qname";
ZaMTAActionDialog.MESSAGE="message";
ZaMTAActionDialog.ANSWER="answer";
ZaMTAActionDialog.MSG_IDS="messageids";
ZaMTAActionDialog.FLTR_ITEMS="filteritems";
ZaMTAActionDialog.SELECTED_MSGS="selectedmsgs";
ZaMTAActionDialog.FLTRED_SET="filteredset";
ZaMTAActionDialog.QUESTION="question";
ZaMTAActionDialog.ANSWER_CHOICES=[{value:ZaMTAActionDialog.SELECTED_MSGS,label:ZaMsg.PQ_SELECTED_MSGS},{value:ZaMTAActionDialog.FLTRED_SET,label:ZaMsg.PQ_FILTERED_SET}];
ZaMTAActionDialog.myXModel={items:[{type:_STRING_,ref:ZaMTAActionDialog.QNAME,id:ZaMTAActionDialog.QNAME},{type:_STRING_,ref:ZaMTAActionDialog.ACTION,id:ZaMTAActionDialog.ACTION},{type:_STRING_,ref:ZaMTAActionDialog.MESSAGE,id:ZaMTAActionDialog.MESSAGE},{type:_STRING_,ref:ZaMTAActionDialog.QUESTION,id:ZaMTAActionDialog.QUESTION},{type:_ENUM_,ref:ZaMTAActionDialog.ANSWER,id:ZaMTAActionDialog.ANSWER,choices:ZaMTAActionDialog.ANSWER_CHOICES},{type:_LIST_,id:ZaMTAActionDialog.MSG_IDS,ref:ZaMTAActionDialog.MSG_IDS,listItem:{type:_OBJECT_,items:[{id:ZaMTAQMsgItem.A_id,type:_STRING_},{id:ZaMTAQSummaryItem.A_text,type:_STRING_}]}},{type:_LIST_,id:ZaMTAActionDialog.FLTR_ITEMS,ref:ZaMTAActionDialog.FLTR_ITEMS,listItem:{type:_OBJECT_,items:[{id:ZaMTAQSummaryItem.A_text,type:_STRING_},{id:ZaMTAQSummaryItem.A_count,type:_NUMBER_}]}}]};
Q_MSGS_QUESTION_RADIO_XFormItem=function(){};
XFormItemFactory.createItemType("_Q_MSGS_QUESTION_RADIO_","q_msgs_question_radio",Q_MSGS_QUESTION_RADIO_XFormItem,Composite_XFormItem);
Q_MSGS_QUESTION_RADIO_XFormItem.prototype.numCols=2;
Q_MSGS_QUESTION_RADIO_XFormItem.prototype.nowrap=true;
Q_MSGS_QUESTION_RADIO_XFormItem.prototype.items=[{type:_RADIO_,width:"40px",containerCssStyle:"width:40px",forceUpdate:true,ref:ZaMTAActionDialog.ANSWER,labelLocation:_NONE_,label:null,trueValue:ZaMTAActionDialog.SELECTED_MSGS,falseValue:ZaMTAActionDialog.FLTRED_SET,updateElement:function(b){this.getElement().checked=(b==ZaMTAActionDialog.SELECTED_MSGS)
},elementChanged:function(d,c,b){this.getForm().itemChanged(this,ZaMTAActionDialog.SELECTED_MSGS,b)
},bmolsnr:true},{type:_OUTPUT_,ref:ZaMTAActionDialog.MSG_IDS,getDisplayValue:function(c){var d="",b="0";
if(c){b=c.length
}d=AjxMessageFormat.format(ZaMsg.PQ_SelectedMessages,[b]);
return d
}}];
Q_MSGS_QUESTION_RADIO_XFormItem.prototype.setElementEnabled=function(b){this.getElement().disabled=(b!=true)
};
Q_MSGS_QUESTION_RADIO_XFormItem.prototype.updateEnabledDisabled=function(){var e=true;
if(e){var b=this.getInheritedProperty("enableDisableChecks");
if(b&&b instanceof Array){var d=b.length;
for(var c=0;
c<d;
c++){if(b[c]!=null){if(typeof b[c]==="function"){e=b[c].call(this);
if(!e){break
}}else{if(b[c] instanceof Array){var f=b[c].shift();
if(!f||!f.apply){continue
}e=f.apply(this,b[c]);
b[c].unshift(f);
if(!e){break
}}}}}}else{if(b==false){e=false
}}}if(e){this.enableElement()
}else{this.disableElement()
}};
Q_MSGS_QUESTION_RADIO_XFormItem.prototype.updateVisibility=function(){var isVisible=true;
if(isVisible){var myVisibilityChecks=this.getInheritedProperty("visibilityChecks");
if(myVisibilityChecks&&myVisibilityChecks instanceof Array){var cnt=myVisibilityChecks.length;
for(var i=0;
i<cnt;
i++){if(myVisibilityChecks[i]!=null){if(typeof myVisibilityChecks[i]==="function"){isVisible=myVisibilityChecks[i].call(this);
if(!isVisible){break
}}else{if(myVisibilityChecks[i] instanceof Array){var func=myVisibilityChecks[i].shift();
isVisible=func.apply(this,myVisibilityChecks[i]);
myVisibilityChecks[i].unshift(func);
if(!isVisible){break
}}else{if(typeof myVisibilityChecks==="string"){var instance=this.getInstance();
isVisible=eval(myVisibilityChecks[i]);
if(!isVisible){break
}}}}}}}}if(isVisible){this.show()
}else{this.hide()
}};
Q_FLTRD_QUESTION_RADIO_XFormItem=function(){};
XFormItemFactory.createItemType("_Q_FLTRD_QUESTION_RADIO_","q_fltrd_question_radio",Q_FLTRD_QUESTION_RADIO_XFormItem,Composite_XFormItem);
Q_FLTRD_QUESTION_RADIO_XFormItem.prototype.numCols=2;
Q_FLTRD_QUESTION_RADIO_XFormItem.prototype.nowrap=true;
Q_FLTRD_QUESTION_RADIO_XFormItem.prototype.items=[{type:_RADIO_,width:"40px",containerCssStyle:"width:40px",forceUpdate:true,ref:ZaMTAActionDialog.ANSWER,labelLocation:_NONE_,label:null,trueValue:ZaMTAActionDialog.FLTRED_SET,falseValue:ZaMTAActionDialog.SELECTED_MSGS,updateElement:function(b){this.getElement().checked=(b==ZaMTAActionDialog.FLTRED_SET)
},elementChanged:function(d,c,b){this.getForm().itemChanged(this,ZaMTAActionDialog.FLTRED_SET,b)
},bmolsnr:true},{type:_OUTPUT_,ref:ZaMTAActionDialog.FLTR_ITEMS,getDisplayValue:function(g){var h="";
var b=[];
if(g){for(var f in g){if(g[f]){var e=[];
var d=g[f].length;
for(var c=0;
c<d;
c++){e.push(g[f][c][ZaMTAQSummaryItem.A_text])
}b.push((f+": "+e.join(", ")))
}}}if(b.length){h=String(ZaMsg.PQ_FilteredSet).replace("{0}",b.join("; "))
}else{h=String(ZaMsg.PQ_FilteredSet).replace("{0}",ZaMsg.PQ_AllMessages)
}return h
}}];
Q_FLTRD_QUESTION_RADIO_XFormItem.prototype.setElementEnabled=function(b){this.getElement().disabled=(b!=true)
};
Q_FLTRD_QUESTION_RADIO_XFormItem.prototype.updateEnabledDisabled=function(){var e=true;
if(e){var b=this.getInheritedProperty("enableDisableChecks");
if(b&&b instanceof Array){var d=b.length;
for(var c=0;
c<d;
c++){if(b[c]!=null){if(typeof b[c]==="function"){e=b[c].call(this);
if(!e){break
}}else{if(b[c] instanceof Array){var f=b[c].shift();
if(!f||!f.apply){continue
}e=f.apply(this,b[c]);
b[c].unshift(f);
if(!e){break
}}}}}}else{if(b==false){e=false
}}}if(e){this.enableElement()
}else{this.disableElement()
}};
Q_FLTRD_QUESTION_RADIO_XFormItem.prototype.updateVisibility=function(){var isVisible=true;
if(isVisible){var myVisibilityChecks=this.getInheritedProperty("visibilityChecks");
if(myVisibilityChecks&&myVisibilityChecks instanceof Array){var cnt=myVisibilityChecks.length;
for(var i=0;
i<cnt;
i++){if(myVisibilityChecks[i]!=null){if(typeof myVisibilityChecks[i]==="function"){isVisible=myVisibilityChecks[i].call(this);
if(!isVisible){break
}}else{if(myVisibilityChecks[i] instanceof Array){var func=myVisibilityChecks[i].shift();
isVisible=func.apply(this,myVisibilityChecks[i]);
myVisibilityChecks[i].unshift(func);
if(!isVisible){break
}}else{if(typeof myVisibilityChecks==="string"){var instance=this.getInstance();
isVisible=eval(myVisibilityChecks[i]);
if(!isVisible){break
}}}}}}}}if(isVisible){this.show()
}else{this.hide()
}};
ZaMTAActionDialog.prototype.getMyXForm=function(b){var c={numCols:1,align:_CENTER_,cssStyle:"text-align:center",items:[{type:_OUTPUT_,ref:ZaMTAActionDialog.MESSAGE,label:null,colSpan:"*",align:_LEFT_,valign:_TOP_},{type:_Q_MSGS_QUESTION_RADIO_,visibilityChecks:[[ZaItem.hasAnyRight,[ZaMTA.MANAGE_MAIL_QUEUE_RIGHT],b]],enableDisableChecks:[[ZaItem.hasAnyRight,[ZaMTA.MANAGE_MAIL_QUEUE_RIGHT],b]],align:_LEFT_},{type:_Q_FLTRD_QUESTION_RADIO_,visibilityChecks:[[ZaItem.hasAnyRight,[ZaMTA.MANAGE_MAIL_QUEUE_RIGHT],b]],enableDisableChecks:[[ZaItem.hasAnyRight,[ZaMTA.MANAGE_MAIL_QUEUE_RIGHT],b]],align:_LEFT_}]};
return c
}
}if(AjxPackage.define("zimbraAdmin.accounts.view.ZaAccountMemberOfListView")){ZaAccountMemberOfListView=function(e,d,c,b){ZaListView.call(this,e,d,c,b)
};
ZaAccountMemberOfListView.prototype=new ZaListView;
ZaAccountMemberOfListView.prototype.constructor=ZaAccountMemberOfListView;
ZaAccountMemberOfListView.prototype.toString=function(){return"ZaAccountMemberOfListView"
};
ZaAccountMemberOfListView.A_name="name";
ZaAccountMemberOfListView.A_via="via";
ZaAccountMemberOfListView.SEARCH_LIMIT=25;
ZaAccountMemberOfListView.modelItems=[{id:ZaAccount.A2_directMemberList,type:_LIST_,ref:ZaAccount.A2_memberOf+"/"+ZaAccount.A2_directMemberList},{id:ZaAccount.A2_indirectMemberList,type:_LIST_,ref:ZaAccount.A2_memberOf+"/"+ZaAccount.A2_indirectMemberList},{id:ZaAccount.A2_nonMemberList,type:_LIST_,ref:ZaAccount.A2_memberOf+"/"+ZaAccount.A2_nonMemberList},{id:ZaAccount.A2_nonMemberListSelected,type:_LIST_,ref:ZaAccount.A2_memberOf+"/"+ZaAccount.A2_nonMemberListSelected},{id:ZaAccount.A2_directMemberListSelected,type:_LIST_,ref:ZaAccount.A2_memberOf+"/"+ZaAccount.A2_directMemberListSelected},{id:ZaAccount.A2_indirectMemberListSelected,type:_LIST_,ref:ZaAccount.A2_memberOf+"/"+ZaAccount.A2_indirectMemberListSelected},{id:ZaAccount.A2_directMemberList+"_offset",ref:ZaAccount.A2_directMemberList+"_offset",type:_NUMBER_,defaultValue:0},{id:ZaAccount.A2_nonMemberList+"_offset",ref:ZaAccount.A2_nonMemberList+"_offset",type:_NUMBER_,defaultValue:0},{id:ZaAccount.A2_directMemberList+"_more",ref:ZaAccount.A2_directMemberList+"_more",type:_NUMBER_,defaultValue:0},{id:ZaAccount.A2_nonMemberList+"_more",ref:ZaAccount.A2_nonMemberList+"_more",type:_NUMBER_,defaultValue:0},{id:ZaAccount.A2_showSameDomain,type:_ENUM_,choices:ZaModel.BOOLEAN_CHOICES,ref:ZaAccount.A2_memberOf+"/"+ZaAccount.A2_showSameDomain,defaultValue:"FALSE"},{id:"query",type:_STRING_}];
ZaAccount.myXModel.items=ZaAccount.myXModel.items.concat(ZaAccountMemberOfListView.modelItems);
ZaDistributionList.myXModel.items=ZaDistributionList.myXModel.items.concat(ZaAccountMemberOfListView.modelItems);
ZaAccountMemberOfListView.parseGetAccMembershipResponse=function(h){var k=[];
var b=[];
var g=[];
if(h.dl&&(h.dl instanceof Array)){var c=h.dl;
var e=h.dl.length;
for(var j=0,l=0,f=0;
f<e;
f++){if(c[f].via&&(c[f].via.length>0)){b[j]={name:c[f].name,id:c[f].id,via:c[f].via};
j++
}else{k[l]={name:c[f].name,id:c[f].id};
var o=ZaItem.initAttrsFromJS(c[f]);
if(o.zimbraIsAdminGroup!=null){k[l]["zimbraIsAdminGroup"]=o.zimbraIsAdminGroup
}l++
}}}return{directMemberList:k,indirectMemberList:b,nonMemberList:g}
};
ZaAccountMemberOfListView.getAccountMemberShip=function(f,t){var q=[];
var b=[];
var j=[];
try{soapDoc=AjxSoapDoc.create("GetAccountMembershipRequest",ZaZimbraAdmin.URN,null);
var v=soapDoc.set("account",f);
v.setAttribute("by",t);
var l=new Object();
l.soapDoc=soapDoc;
l.noAuthToken=true;
var g={controller:ZaApp.getInstance().getCurrentController()};
var k=ZaRequestMgr.invoke(l,g).Body.GetAccountMembershipResponse;
if(k.dl&&(k.dl instanceof Array)){var c=k.dl;
var e=k.dl.length;
for(var o=0,s=0,h=0;
h<e;
h++){if(c[h].via&&(c[h].via.length>0)){b[o]={name:c[h].name,id:c[h].id,via:c[h].via};
o++
}else{q[s]={name:c[h].name,id:c[h].id};
var u=ZaItem.initAttrsFromJS(c[h]);
if(u.zimbraIsAdminGroup!=null){q[s]["zimbraIsAdminGroup"]=u.zimbraIsAdminGroup
}s++
}}}}catch(r){ZaApp.getInstance().getCurrentController()._handleException(r,"ZaAccountMemberOfListView.getAccountMemberShip",null,false)
}var p={directMemberList:q,indirectMemberList:b,nonMemberList:j};
return p
};
ZaAccountMemberOfListView.getDlMemberShip=function(f,t){var q=[];
var b=[];
var j=[];
try{soapDoc=AjxSoapDoc.create("GetDistributionListMembershipRequest",ZaZimbraAdmin.URN,null);
var u=soapDoc.set("dl",f);
u.setAttribute("by",t);
var l=new Object();
l.soapDoc=soapDoc;
var g={controller:ZaApp.getInstance().getCurrentController()};
var k=ZaRequestMgr.invoke(l,g).Body.GetDistributionListMembershipResponse;
if(k.dl&&(k.dl instanceof Array)){var c=k.dl;
var e=k.dl.length;
for(var o=0,s=0,h=0;
h<e;
h++){if(c[h].via&&(c[h].via.length>0)){b[o]={name:c[h].name,id:c[h].id,via:c[h].via};
o++
}else{q[s]={name:c[h].name,id:c[h].id};
s++
}}}}catch(r){ZaApp.getInstance().getCurrentController()._handleException(r,"ZaAccountMemberOfListView.getDlMemberShip",null,false)
}var p={directMemberList:q,indirectMemberList:b,nonMemberList:j};
return p
};
ZaAccountMemberOfListView.cloneMemberOf=function(g){var h={};
for(var f in g[ZaAccount.A2_memberOf]){h[f]=[];
for(var d=0;
d<g[ZaAccount.A2_memberOf][f].length;
d++){var c=g[ZaAccount.A2_memberOf][f][d];
if(c instanceof Object){var b={};
for(var e in c){b[e]=c[e]
}h[f].push(b)
}else{h[f].push(c)
}}}return h
};
ZaAccountMemberOfListView.removeAllGroups=function(e,b){var d=this.getForm();
var c=ZaAccountMemberOfListView._getAllInList(d,b);
ZaAccountMemberOfListView._removeSelectedLists(d,c)
};
ZaAccountMemberOfListView.removeGroups=function(e,b){var d=this.getForm();
var c=ZaAccountMemberOfListView._getSelections(d,b);
ZaAccountMemberOfListView._removeSelectedLists(d,c)
};
ZaAccountMemberOfListView._removeSelectedLists=function(b,c){var n=b.getInstance();
var k=n[ZaAccount.A2_memberOf][ZaAccount.A2_directMemberList];
var l=n[ZaAccount.A2_memberOf][ZaAccount.A2_indirectMemberList];
var o=n[ZaAccount.A2_memberOf][ZaAccount.A2_nonMemberList];
var f=-1;
var m=null;
var e=null;
for(var h=0;
h<c.length;
h++){m=c[h][ZaAccountMemberOfListView.A_name];
f=ZaUtil.findValueInObjArrByPropertyName(k,m,ZaAccountMemberOfListView.A_name);
if(f>=0){e=ZaAccountMemberOfListView._findIndirect(l,m);
if(e.length>0){var d=e.join("<br />");
msg=AjxMessageFormat.format(ZaMsg.Q_REMOVE_INDIRECT_GROUP,[m,d]);
var g=new ZaMsgDialog(b.shell,null,[DwtDialog.YES_BUTTON,DwtDialog.NO_BUTTON],null,ZaId.VIEW_MEMLIST);
g.setMessage(msg,DwtMessageDialog.WARNING_STYLE);
g.registerCallback(DwtDialog.YES_BUTTON,ZaAccountMemberOfListView._removeConfirmedList,null,[b,g,m,e]);
g.registerCallback(DwtDialog.NO_BUTTON,ZaAccountMemberOfListView._closeConfirmDialog,null,[b,g]);
g.popup();
continue
}k.splice(f,1);
b.parent.setDirty(true)
}}b.getModel().setInstanceValue(n,ZaAccount.A2_directMemberList,k);
b.getModel().setInstanceValue(n,ZaAccount.A2_indirectMemberList,l);
b.getModel().setInstanceValue(n,ZaAccount.A2_nonMemberList,o);
if(k==null||k.length<=ZaAccountMemberOfListView.SEARCH_LIMIT){b.getModel().setInstanceValue(n,ZaAccount.A2_directMemberList+"_more",0)
}};
ZaAccountMemberOfListView._closeConfirmDialog=function(c,b){if(b){b.popdown()
}};
ZaAccountMemberOfListView._removeConfirmedList=function(b,l,k,c){if(l){var n=b.getInstance();
var g=n[ZaAccount.A2_memberOf][ZaAccount.A2_directMemberList];
var h=n[ZaAccount.A2_memberOf][ZaAccount.A2_indirectMemberList];
var o=n[ZaAccount.A2_memberOf][ZaAccount.A2_nonMemberList];
var e=-1;
var d=-1;
e=ZaUtil.findValueInObjArrByPropertyName(g,k,ZaAccountMemberOfListView.A_name);
if(e>=0){g.splice(e,1)
}for(var f=0;
f<c.length;
f++){e=ZaUtil.findValueInObjArrByPropertyName(h,c[f],ZaAccountMemberOfListView.A_name);
if(e>=0){h.splice(e,1)
}}b.parent.setDirty(true);
ZaAccountMemberOfListView._closeConfirmDialog(b,l);
b.getModel().setInstanceValue(n,ZaAccount.A2_directMemberList,g);
b.getModel().setInstanceValue(n,ZaAccount.A2_indirectMemberList,h);
b.getModel().setInstanceValue(n,ZaAccount.A2_nonMemberList,o)
}};
ZaAccountMemberOfListView._findIndirect=function(c,f,b){var d=-1;
if(!b){b=new Array()
}if(c){for(var e=0;
e<c.length;
e++){if(c[e][ZaAccountMemberOfListView.A_via]==f){b.push(c[e][ZaAccountMemberOfListView.A_name]);
b=ZaAccountMemberOfListView._findIndirect(c,c[e][ZaAccountMemberOfListView.A_name],b)
}}}return b
};
ZaAccountMemberOfListView.addGroups=function(e,b){var d=this.getForm();
var c=ZaAccountMemberOfListView._getSelections(d,b);
ZaAccountMemberOfListView._addSelectedLists(d,c)
};
ZaAccountMemberOfListView.addAllGroups=function(e,b){var d=this.getForm();
var c=ZaAccountMemberOfListView._getAllInList(d,b);
ZaAccountMemberOfListView._addSelectedLists(d,c)
};
ZaAccountMemberOfListView._addSelectedLists=function(g,c){var b=g.getInstance();
var h=b[ZaAccount.A2_memberOf];
var f=[];
for(var e=0;
e<c.length;
e++){var d=ZaUtil.findValueInObjArrByPropertyName(b[ZaAccount.A2_memberOf][ZaAccount.A2_directMemberList],c[e][ZaAccountMemberOfListView.A_name],ZaAccountMemberOfListView.A_name);
if(d>=0){continue
}else{f.push(c[e])
}}if(!h[ZaAccount.A2_directMemberList]){h[ZaAccount.A2_directMemberList]=[]
}h[ZaAccount.A2_directMemberList]=h[ZaAccount.A2_directMemberList].concat(f);
g.parent.setDirty(true);
g.getModel().setInstanceValue(b,ZaAccount.A2_directMemberList,h[ZaAccount.A2_directMemberList]);
g.getModel().setInstanceValue(b,ZaAccount.A2_nonMemberList,h[ZaAccount.A2_nonMemberList]);
g.getModel().setInstanceValue(b,ZaAccount.A2_indirectMemberList,h[ZaAccount.A2_indirectMemberList]);
if(h[ZaAccount.A2_directMemberList].length>ZaAccountMemberOfListView.SEARCH_LIMIT){g.getModel().setInstanceValue(b,ZaAccount.A2_directMemberList+"_more",1)
}};
ZaAccountMemberOfListView._getSelections=function(d,b){var c=d.getItemsById(b)[0].getSelection();
return(c)?c:[]
};
ZaAccountMemberOfListView._getAllInList=function(d,b){var c=d.getItemsById(b)[0].widget;
var e=c.getList().getArray();
c.setSelectedItems(e);
return e
};
ZaAccountMemberOfListView.shouldEnableAddRemoveButton=function(b){return(ZaAccountMemberOfListView._getSelections(this.getForm(),b).length>0)
};
ZaAccountMemberOfListView.shouldEnableAllButton=function(b){var c=this.getInstanceValue(b);
if(c!=null){return(c.length>0)
}return false
};
ZaAccountMemberOfListView.shouldEnableBackButton=function(b){var c=this.getInstance()[b+"_offset"];
return((c&&c>0)?true:false)
};
ZaAccountMemberOfListView.shouldEnableForwardButton=function(b){var c=this.getInstance()[b+"_more"];
return((c&&c>0)?true:false)
};
ZaAccountMemberOfListView.addMemberList=function(h,f){try{var g=[];
if(h[ZaAccount.A2_memberOf]&&h[ZaAccount.A2_memberOf][ZaAccount.A2_directMemberList]){var c=h[ZaAccount.A2_memberOf][ZaAccount.A2_directMemberList];
if(c){if(!c instanceof Array){c=[c]
}for(var e=0;
e<c.length;
e++){var b=c[e].name;
g.push(c[e])
}if(g.length>0){ZaAccountMemberOfListView.addNewGroupsBySoap(f,g)
}}}}catch(d){ZaApp.getInstance().getCurrentController()._handleException(d,"ZaAccountMemberOfListView.addMemberList: add group failed",null,false)
}};
ZaItem.createMethods.ZaAccount.push(ZaAccountMemberOfListView.addMemberList);
ZaItem.createMethods.ZaDistributionList.push(ZaAccountMemberOfListView.addMemberList);
ZaAccountMemberOfListView.modifyMemberList=function(o,c){try{if(!c||(this[ZaAccount.A2_memberOf]==null)||!c[ZaAccount.A2_memberOf]){return
}var f=[];
var g=[];
var l=this[ZaAccount.A2_memberOf][ZaAccount.A2_directMemberList];
var n=c[ZaAccount.A2_memberOf][ZaAccount.A2_directMemberList];
for(var e=0;
e<n.length;
e++){var k=n[e].name;
var d=ZaUtil.findValueInObjArrByPropertyName(l,k,ZaAccountMemberOfListView.A_name);
if(d>=0){}else{f.push(n[e])
}}for(var b=0;
b<l.length;
b++){var k=l[b].name;
var d=ZaUtil.findValueInObjArrByPropertyName(n,k,ZaAccountMemberOfListView.A_name);
if(d>=0){}else{g.push(l[b])
}}if(f.length>0){ZaAccountMemberOfListView.addNewGroupsBySoap(this,f)
}if(g.length>0){ZaAccountMemberOfListView.removeGroupsBySoap(this,g)
}}catch(h){ZaApp.getInstance().getCurrentController()._handleException(h,"ZaAccountMemberOfListView.modifyMemberList: add group failed",null,false)
}};
ZaItem.modifyMethods.ZaAccount.push(ZaAccountMemberOfListView.modifyMemberList);
ZaItem.modifyMethods.ZaDistributionList.push(ZaAccountMemberOfListView.modifyMemberList);
ZaAccountMemberOfListView.addNewGroupsBySoap=function(f,j){var b=j.length;
var c,e,c;
var h=new ZmCsfeCommand();
for(var d=0;
d<b;
++d){c=AjxSoapDoc.create("AddDistributionListMemberRequest",ZaZimbraAdmin.URN,null);
c.set("id",j[d].id);
c.set("dlm",f.name);
var g=new Object();
g.soapDoc=c;
g.noAuthToken=true;
e=h.invoke(g).Body.AddDistributionListMemberResponse
}};
ZaAccountMemberOfListView.removeGroupsBySoap=function(j,d){var k=d.length;
var e,b,c,m,l;
var g=new ZmCsfeCommand();
if(j instanceof ZaDistributionList){m="dlm";
l=j.toString()
}else{m="account";
l=j.id
}var m=j instanceof ZaDistributionList?"dlm":"account";
for(var h=0;
h<k;
++h){c=AjxSoapDoc.create("RemoveDistributionListMemberRequest",ZaZimbraAdmin.URN,null);
c.set("id",d[h].id);
accountEl=c.set(m,l);
var f=new Object();
f.soapDoc=c;
f.noAuthToken=true;
b=g.invoke(f).Body.RemoveDistributionListMemberResponse
}};
ZaAccountMemberOfListView.prototype.srchButtonHndlr=function(){var b=this;
ZaAccountMemberOfListView.doSearch(b,0)
};
ZaAccountMemberOfListView.backButtonHndlr=function(e,c){var b=this.getInstance();
var f=this.getInstanceValue(c+"_offset");
if(f==null){f=0
}var d=0;
if(c==ZaAccount.A2_nonMemberList){d=f-ZaAccountMemberOfListView.SEARCH_LIMIT;
ZaAccountMemberOfListView.doSearch(this,d)
}else{d=f-ZaAccountMemberOfListView.SEARCH_LIMIT;
this.setInstanceValue(d,c+"_offset");
this.setInstanceValue(1,c+"_more");
var g=b[ZaAccount.A2_memberOf][ZaAccount.A2_directMemberList];
var h=b[ZaAccount.A2_memberOf][ZaAccount.A2_indirectMemberList];
this.setInstanceValue(g,ZaAccount.A2_directMemberList);
this.setInstanceValue(h,ZaAccount.A2_indirectMemberList)
}};
ZaAccountMemberOfListView.fwdButtonHndlr=function(e,c){var b=this.getInstance();
var f=this.getInstanceValue(c+"_offset");
if(f==null){f=0
}var d=0;
if(c==ZaAccount.A2_nonMemberList){d=f+ZaAccountMemberOfListView.SEARCH_LIMIT;
ZaAccountMemberOfListView.doSearch(this,d)
}else{d=f+ZaAccountMemberOfListView.SEARCH_LIMIT;
if((d+ZaAccountMemberOfListView.SEARCH_LIMIT)<b[ZaAccount.A2_memberOf][c].length){this.setInstanceValue(1,c+"_more")
}else{this.setInstanceValue(0,c+"_more")
}this.setInstanceValue(d,c+"_offset");
var g=b[ZaAccount.A2_memberOf][ZaAccount.A2_directMemberList];
var h=b[ZaAccount.A2_memberOf][ZaAccount.A2_indirectMemberList];
this.setInstanceValue(g,ZaAccount.A2_directMemberList);
this.setInstanceValue(h,ZaAccount.A2_indirectMemberList)
}};
ZaAccountMemberOfListView.makeQueryStringWithoutNonACLGroup=function(b){if(b==null){b=""
}return"(&"+b+"(!(zimbraIsACLGroup=FALSE)))"
};
ZaAccountMemberOfListView.doSearch=function(u,h){var b=[];
var c=u.getForm();
if(c){var e=c.getInstance();
if(!h){h=0
}var k=e[ZaAccount.A2_memberOf];
try{var o=ZaAccount.A_name;
var j=(k[ZaAccount.A2_showSameDomain]&&(k[ZaAccount.A2_showSameDomain]=="TRUE"))?true:false;
var m=null;
if(j){try{var p=e[ZaAccount.A_name].split("@");
m=p[1]
}catch(s){}}var q=[ZaAccount.A_name,ZaItem.A_zimbraId];
var l=e[ZaSearch.A_query];
var f=[ZaSearch.DLS];
var g=ZaSearch.getSearchByNameQuery(l,f);
g=ZaAccountMemberOfListView.makeQueryStringWithoutNonACLGroup(g);
var v={query:g,sortBy:o,limit:ZaAccountMemberOfListView.SEARCH_LIMIT,offset:h,domain:m,applyCos:0,attrs:q,types:f,controller:ZaApp.getInstance().getCurrentController()};
var n=ZaSearch.searchDirectory(v).Body.SearchDirectoryResponse;
u.setInstanceValue((n.more?1:0),ZaAccount.A2_nonMemberList+"_more");
var t=new ZaItemList(ZaDistributionList,null);
t.loadFromJS(n);
b=t.getArray();
var d=new Array();
for(var r=0;
r<b.length;
r++){d.push({name:b[r].name,id:b[r].id})
}u.setInstanceValue(d,ZaAccount.A2_nonMemberList);
u.setInstanceValue(h,ZaAccount.A2_nonMemberList+"_offset")
}catch(s){ZaApp.getInstance().getCurrentController()._handleException(s,"ZaAccountMemberOfListView.prototype.srchButtonHndlr")
}}return true
};
ZaAccountMemberOfListView.join=function(d){var b=[];
for(var c=0;
c<d.length;
c++){if(d[c].name){b.push(d[c].name)
}}return b.join()
};
ZaAccountMemberOfListView.prototype._createItemHtml=function(k,c,e){var g=new Array(50);
var b=document.createElement("div");
b[DwtListView._STYLE_CLASS]="Row";
b[DwtListView._SELECTED_STYLE_CLASS]=b[DwtListView._STYLE_CLASS]+"-"+DwtCssStyle.SELECTED;
b.className=b[DwtListView._STYLE_CLASS];
this.associateItemWithElement(k,b,DwtListView.TYPE_LIST_ITEM);
var j=0;
g[j++]="<table width='100%' cellspacing='0' cellpadding='0'>";
g[j++]="<tr>";
if(this._headerList){var d=this._headerList.length;
for(var f=0;
f<d;
f++){var h=this._headerList[f]._field;
if(h==ZaAccountMemberOfListView.A_name){g[j++]="<td width="+this._headerList[f]._width+">";
g[j++]=AjxStringUtil.htmlEncode(k[ZaAccountMemberOfListView.A_name]);
g[j++]="</td>"
}else{if(h==ZaAccountMemberOfListView.A_via){g[j++]="<td width="+this._headerList[f]._width+">";
g[j++]=AjxStringUtil.htmlEncode(k[ZaAccountMemberOfListView.A_via]);
g[j++]="</td>"
}}}}else{g[j++]="<td width=100%><nobr>";
g[j++]=AjxStringUtil.htmlEncode(k[ZaAccountMemberOfListView.A_name]);
g[j++]="</nobr></td>"
}g[j++]="</tr></table>";
b.innerHTML=g.join("");
return b
};
ZaAccountMemberOfListView.prototype._setNoResultsHtml=function(){var b=new AjxBuffer();
var d=document.createElement("div");
var c="";
if(this.getCurrentListId().indexOf(ZaAccount.A2_indirectMemberList)>=0){c=ZaMsg.Account_Group_NoInDirectMember
}else{if(this.getCurrentListId().indexOf(ZaAccount.A2_directMemberList)>=0){c=ZaMsg.Account_Group_NoDirectMember
}}b.append("<table width='99%' cellspacing='0' cellpadding='1' style='table-layout:fixed'>","<tr>","<td class='NoResults' style='white-space:normal; word-wrap:break-word; word-break:break-all;' >",AjxStringUtil.htmlEncode(c),"</td>","</tr>","</table>");
d.innerHTML=b.toString();
this._addRow(d)
};
ZaAccountMemberOfListView.prototype.setCurrentListId=function(b){this._currentListId=b
};
ZaAccountMemberOfListView.prototype.getCurrentListId=function(){return this._currentListId
};
S_Dwt_List_XFormItem=function(){};
XFormItemFactory.createItemType("_S_DWT_LIST_","s_dwt_list",S_Dwt_List_XFormItem,Dwt_List_XFormItem);
S_Dwt_List_XFormItem.prototype.setItems=function(b){var n=this.widget.getList();
var p=[];
var g=new Array();
if(n){p=n.getArray()
}g=new Array();
var s=this.getForm().getInstance();
var d=s[ZaAccount.A2_memberOf]?s[ZaAccount.A2_memberOf]["showGroupOnlyAction"]:false;
var q=s[ZaAccount.A2_memberOf]?s[ZaAccount.A2_memberOf][ZaAccountMemberOfListView.A_isgroup]:false;
this.widget.setCurrentListId(this.id);
if(b&&b.length>0){var f=0;
var o=0;
var m=b.length;
if(this.id.indexOf(ZaAccount.A2_indirectMemberList)>=0){f=s[ZaAccount.A2_indirectMemberList+"_offset"];
if(f==null){f=0
}o=s[ZaAccount.A2_indirectMemberList+"_more"];
if(o==null){o=0
}if(o>0&&f+ZaAccountMemberOfListView.SEARCH_LIMIT<=m){m=f+ZaAccountMemberOfListView.SEARCH_LIMIT
}}else{if(this.id.indexOf(ZaAccount.A2_directMemberList)>=0){f=s[ZaAccount.A2_directMemberList+"_offset"];
if(f==null){f=0
}o=s[ZaAccount.A2_directMemberList+"_more"];
if(o==null){o=0
}if(o>0&&f+ZaAccountMemberOfListView.SEARCH_LIMIT<=m){m=f+ZaAccountMemberOfListView.SEARCH_LIMIT
}}}var l=new Array();
var e=-1;
for(var h=f;
h<m;
h++){if(this.id.indexOf(ZaAccount.A2_nonMemberList)>=0){if(s.id==b[h].id){continue
}e=ZaUtil.findValueInObjArrByPropertyName(s[ZaAccount.A2_memberOf][ZaAccount.A2_directMemberList],b[h][ZaAccountMemberOfListView.A_name],ZaAccountMemberOfListView.A_name);
if(e>=0){continue
}}l.push(b[h])
}if(ZaAccountMemberOfListView.join(l)!=ZaAccountMemberOfListView.join(p)){var k=this.getInheritedProperty("preserveSelection");
var r=null;
if(k){r=this.widget.getSelection()
}var c=l.length;
for(var h=0;
h<c;
h++){g.push(l[h])
}this.widget.set(AjxVector.fromArray(g),this.getInheritedProperty("defaultColumnSortable"));
if(k&&r){this.widget.setSelectedItems(r)
}}}else{this.widget.set(AjxVector.fromArray([]))
}};
ZaAccountMemberOfsourceHeaderList=function(b,d){var c=new Array();
c[0]=new ZaListHeaderItem(ZaAccountMemberOfListView.A_name,ZaMsg.CLV_Name_col,null,null,null,ZaAccountMemberOfListView.A_name,false,true);
if(b==ZaAccountMemberOfsourceHeaderList.INDIRECT){c[1]=new ZaListHeaderItem(ZaAccountMemberOfListView.A_via,ZaMsg.Group_via,null,null,null,ZaAccountMemberOfListView.A_via,false,true)
}return c
};
ZaAccountMemberOfsourceHeaderList.DIRECT=1;
ZaAccountMemberOfsourceHeaderList.INDIRECT=2;
ZaAccountMemberOfsourceHeaderList.NON=3
}if(AjxPackage.define("zimbraAdmin.task.view.ZaTaskHeaderPanel")){ZaTaskHeaderPanel=function(c){DwtComposite.call(this,c,"TaskHeaderPanel",Dwt.ABSOLUTE_STYLE);
this._expanded=false;
this.getHtmlElement().innerHTML=this.getImgHtml();
this.getHtmlElement().onclick=AjxCallback.simpleClosure(ZaTaskHeaderPanel.__handleClick,this);
var d=ZaSettings.ENABLED_UI_COMPONENTS[ZaSettings.CARTE_BLANCHE_UI];
if(!d){for(var b=0;
b<ZaSettings.STATUS_PANE_ITEMS.length;
b++){if(ZaSettings.ENABLED_UI_COMPONENTS[ZaSettings.STATUS_PANE_ITEMS[b]]){d=true;
break
}}}if(!d){this.getHtmlElement().style.visibility="hidden"
}};
ZaTaskHeaderPanel.expandedImg="ImgCollapseRight";
ZaTaskHeaderPanel.collapsedImg="ImgCollapseLeft";
ZaTaskHeaderPanel.prototype=new DwtComposite;
ZaTaskHeaderPanel.prototype.constructor=ZaTaskHeaderPanel;
ZaTaskHeaderPanel.prototype.getImgHtml=function(){if(this._expanded){return["<div class='",ZaTaskHeaderPanel.expandedImg,"' ></div>"].join("")
}else{return["<div class='",ZaTaskHeaderPanel.collapsedImg,"' ></div>"].join("")
}};
ZaTaskHeaderPanel.__handleClick=function(b){this._expanded=!this._expanded;
this.getHtmlElement().innerHTML=this.getImgHtml();
ZaZimbraAdmin.getInstance().getTaskController().setExpanded(this._expanded)
}
}if(AjxPackage.define("zimbraAdmin.task.view.ZaTaskContentView")){ZaTaskContentView=function(c,d){ZaTabView.call(this,{parent:c,cssClassName:"ZaTaskTabView DwtTabView",iKeyName:"ZaTaskContentView",contextId:"TabContent"});
this.initForm(ZaTask.myXModel,this.getMyXForm(d),null);
ZaTaskContentView.showStatusPane=ZaSettings.ENABLED_UI_COMPONENTS[ZaSettings.CARTE_BLANCHE_UI];
if(!ZaTaskContentView.showStatusPane){for(var b=0;
b<ZaSettings.STATUS_PANE_ITEMS.length;
b++){if(ZaSettings.ENABLED_UI_COMPONENTS[ZaSettings.STATUS_PANE_ITEMS[b]]){ZaTaskContentView.showStatusPane=true;
break
}}}};
ZaTaskContentView.prototype=new ZaTabView();
ZaTaskContentView.prototype.constructor=ZaTaskContentView;
ZaTabView.XFormModifiers.ZaTaskContentView=new Array();
ZaTaskContentView._dialogCache=new Array();
ZaTaskContentView._getDialog=function(d){var b;
if(d.type==1){var f=d.cacheName;
var e=d.viewForPopup;
var c=d.data;
if(d.cacheDialog&&!ZaTaskContentView._dialogCache[f]){ZaTaskContentView._dialogCache[f]=ZaApp.getInstance().dialogs[f]
}if(!d.cacheDialog||!ZaTaskContentView._dialogCache[f]){ZaTaskContentView._dialogCache[f]=ZaApp.getInstance().dialogs[f]=new e(ZaApp.getInstance().getAppCtxt().getShell(),c);
if(d.finishCallback){ZaTaskContentView._dialogCache[f].registerCallback(d.finishCallback.id,d.finishCallback.callback)
}}b=ZaTaskContentView._dialogCache[f];
b.setObject(d.data)
}else{if(d.type==2){b=d.viewForPopup
}else{}}return b
};
ZaTaskContentView.prototype.setObject=function(b){this._containedObject=b;
this._localXForm.setInstance(this._containedObject);
this.formDirtyLsnr=new AjxListener(ZaApp.getInstance().getCurrentController(),ZaXFormViewController.prototype.handleXFormChange);
this._localXForm.addListener(DwtEvent.XFORMS_FORM_DIRTY_CHANGE,this.formDirtyLsnr);
this._localXForm.addListener(DwtEvent.XFORMS_VALUE_ERROR,this.formDirtyLsnr)
};
ZaTaskContentView.taskItemSelectionListener=function(e){var c=this.widget.getSelection();
if(c&&c.length){var f=c[0];
var d=ZaTaskContentView._getDialog(f);
d.popup();
var b=f.position;
d.setBounds(b.x,b.y,b.width,b.height);
if(d.handleXFormChange){d.handleXFormChange()
}}};
ZaTaskContentView.myXFormModifier=function(e,d){var c=[];
var b={type:_ZATABCASE_,numCols:1,caseKey:1,paddingStyle:"",width:"100%",getCustomWidth:ZaTaskContentView.prototype.getCustomWidth,getCustomHeight:ZaTaskContentView.prototype.getCustomHeight,items:[{type:_AJX_IMAGE_,src:"WorkInProgress",label:null,containerCssStyle:"text-align:center;",visibilityChecks:[[XForm.checkInstanceValue,ZaTask.A2_isExpanded,false]],visibilityChangeEventSources:[ZaTask.A2_isExpanded]},{ref:ZaTask.A_workingInProcess,type:_OUTPUT_,bmolsnr:true,value:0,visibilityChecks:[[XForm.checkInstanceValue,ZaTask.A2_isExpanded,false]],visibilityChangeEventSources:[ZaTask.A2_isExpanded],containerCssStyle:"padding-bottom:10px;text-align:center;",getDisplayValue:function(f){return f.length
}},{type:_GROUP_,numCols:1,visibilityChecks:[[XForm.checkInstanceValue,ZaTask.A2_isExpanded,true]],visibilityChangeEventSources:[ZaTask.A2_isExpanded],cssClass:"ZaTaskListGroup",items:[{type:_COMPOSITE_,numCols:3,tableCssStyle:"width:100%",visibilityChecks:[[XForm.checkInstanceValue,ZaTask.A2_isWIPExpanded,true]],visibilityChangeEventSources:[ZaTask.A2_isWIPExpanded],colSizes:["18px","16px","100%"],items:[{type:_DWT_IMAGE_,value:"ImgNodeExpanded",cssStyle:"position:static;",onClick:function(){this.setInstanceValue(false,ZaTask.A2_isWIPExpanded)
}},{type:_AJX_IMAGE_,src:"WorkInProgress",label:null},{type:_OUTPUT_,value:ZaMsg.MSG_WorkingTask}],cssClass:"ZaTaskTitleNameHeader"},{type:_COMPOSITE_,numCols:3,tableCssStyle:"width:100%",visibilityChecks:[[XForm.checkInstanceValue,ZaTask.A2_isWIPExpanded,false]],visibilityChangeEventSources:[ZaTask.A2_isWIPExpanded],colSizes:["18px","16px","100%"],items:[{type:_DWT_IMAGE_,value:"ImgNodeCollapsed",cssStyle:"position:static;",onClick:function(){this.setInstanceValue(true,ZaTask.A2_isWIPExpanded)
}},{type:_AJX_IMAGE_,src:"WorkInProgress",label:null},{type:_OUTPUT_,value:ZaMsg.MSG_WorkingTask}],cssClass:"ZaTaskTitleNameHeader"},{ref:ZaTask.A_workingInProcess,type:_DWT_LIST_,cssClass:"ZaTaskListContent",forceUpdate:true,preserveSelection:false,multiselect:false,visibilityChecks:[[XForm.checkInstanceValue,ZaTask.A2_isWIPExpanded,true]],visibilityChangeEventSources:[ZaTask.A2_isWIPExpanded],onSelection:ZaTaskContentView.taskItemSelectionListener}]},{type:_AJX_IMAGE_,src:"TaskViewWaiting",label:null,containerCssStyle:"text-align:center;",visibilityChecks:[[XForm.checkInstanceValue,ZaTask.A2_isExpanded,false]],visibilityChangeEventSources:[ZaTask.A2_isExpanded]},{ref:ZaTask.A_runningTask,type:_OUTPUT_,bmolsnr:true,value:0,visibilityChecks:[[XForm.checkInstanceValue,ZaTask.A2_isExpanded,false]],visibilityChangeEventSources:[ZaTask.A2_isExpanded],containerCssStyle:"padding-bottom:10px;text-align:center;",getDisplayValue:function(f){return f.length
}},{type:_GROUP_,numCols:1,visibilityChecks:[[XForm.checkInstanceValue,ZaTask.A2_isExpanded,true]],visibilityChangeEventSources:[ZaTask.A2_isExpanded],cssClass:"ZaTaskListGroup",items:[{type:_COMPOSITE_,numCols:3,tableCssStyle:"width:100%",visibilityChecks:[[XForm.checkInstanceValue,ZaTask.A2_isRTExpanded,true]],visibilityChangeEventSources:[ZaTask.A2_isRTExpanded],colSizes:["18px","16px","100%"],items:[{type:_DWT_IMAGE_,value:"ImgNodeExpanded",cssStyle:"position:static;",onClick:function(){this.setInstanceValue(false,ZaTask.A2_isRTExpanded)
}},{type:_AJX_IMAGE_,src:"TaskViewWaiting",label:null},{type:_OUTPUT_,value:ZaMsg.MSG_RunningTask}],cssClass:"ZaTaskTitleNameHeader"},{type:_COMPOSITE_,numCols:3,tableCssStyle:"width:100%",visibilityChecks:[[XForm.checkInstanceValue,ZaTask.A2_isRTExpanded,false]],visibilityChangeEventSources:[ZaTask.A2_isRTExpanded],colSizes:["18px","16px","100%"],items:[{type:_DWT_IMAGE_,value:"ImgNodeCollapsed",cssStyle:"position:static;",onClick:function(){this.setInstanceValue(true,ZaTask.A2_isRTExpanded)
}},{type:_AJX_IMAGE_,src:"TaskViewWaiting",label:null},{type:_OUTPUT_,value:ZaMsg.MSG_RunningTask}],cssClass:"ZaTaskTitleNameHeader"},{ref:ZaTask.A_runningTask,type:_DWT_LIST_,cssClass:"ZaTaskListContent",forceUpdate:true,preserveSelection:false,multiselect:false,visibilityChecks:[[XForm.checkInstanceValue,ZaTask.A2_isRTExpanded,true]],visibilityChangeEventSources:[ZaTask.A2_isRTExpanded],onSelection:ZaTaskContentView.taskItemSelectionListener}]},{type:_AJX_IMAGE_,src:"Status",label:null,containerCssStyle:"text-align:center;",visibilityChecks:[[XForm.checkInstanceValue,ZaTask.A2_isExpanded,false]],visibilityChangeEventSources:[ZaTask.A2_isExpanded]},{ref:ZaTask.A2_notificationCount,type:_OUTPUT_,bmolsnr:true,value:0,visibilityChecks:[[XForm.checkInstanceValue,ZaTask.A2_isExpanded,false]],visibilityChangeEventSources:[ZaTask.A2_isExpanded],containerCssStyle:"padding-bottom:10px;text-align:center;",getDisplayValue:function(f){if(!f||f<0){return 0
}return f
}},{type:_GROUP_,numCols:1,visibilityChecks:[[XForm.checkInstanceValue,ZaTask.A2_isExpanded,true]],visibilityChangeEventSources:[ZaTask.A2_isExpanded],cssClass:"ZaTaskListGroup",items:[{type:_COMPOSITE_,numCols:3,tableCssStyle:"width:100%",visibilityChecks:[[XForm.checkInstanceValue,ZaTask.A2_isServerExpaned,true]],visibilityChangeEventSources:[ZaTask.A2_isServerExpaned],colSizes:["18px","16px","100%"],items:[{type:_DWT_IMAGE_,value:"ImgNodeExpanded",cssStyle:"position:static;",onClick:function(){this.setInstanceValue(false,ZaTask.A2_isServerExpaned)
}},{type:_AJX_IMAGE_,src:"Status",label:null},{type:_OUTPUT_,value:ZaMsg.MSG_ServerStatus}],cssClass:"ZaTaskTitleNameHeader"},{type:_COMPOSITE_,numCols:3,tableCssStyle:"width:100%",visibilityChecks:[[XForm.checkInstanceValue,ZaTask.A2_isServerExpaned,false]],visibilityChangeEventSources:[ZaTask.A2_isServerExpaned],colSizes:["18px","16px","100%"],items:[{type:_DWT_IMAGE_,value:"ImgNodeCollapsed",cssStyle:"position:static;",onClick:function(){this.setInstanceValue(true,ZaTask.A2_isServerExpaned)
}},{type:_AJX_IMAGE_,src:"Status",label:null},{type:_OUTPUT_,value:ZaMsg.MSG_ServerStatus}],cssClass:"ZaTaskTitleNameHeader"},{ref:ZaTask.A_serverStatus,type:_GROUP_,numCols:1,width:"100%",cssClass:"ZaTaskListContent",forceUpdate:true,preserveSelection:false,multiselect:false,visibilityChecks:[[XForm.checkInstanceValue,ZaTask.A2_isServerExpaned,true]],visibilityChangeEventSources:[ZaTask.A2_isServerExpaned],onSelection:ZaTaskContentView.taskItemSelectionListener,items:[{type:_GROUP_,tableCssClass:"NoResults",width:"100%",visibilityChecks:[[ZaTaskContentView.prototype.canShowServerStatusIsHealthy]],visibilityChangeEventSources:[ZaTask.A2_isRTExpanded,ZaTask.A2_notificationCount],items:[{type:_OUTPUT_,value:"<br><br>"+ZaMsg.ServerStatusHealthy,width:"100%"}]}]}]},{type:_SPACER_,height:"10px"}]};
c.push(b);
e.tableCssStyle="width:100%;";
e.items=[{type:_SWITCH_,align:_LEFT_,valign:_TOP_,items:c}]
};
ZaTaskContentView.prototype.canShowServerStatusIsHealthy=function(){var c=this.getInstanceValue(ZaTask.A2_isRTExpanded)||false;
var b=this.getInstanceValue(ZaTask.A2_notificationCount)||0;
return c&&(b==0)
};
ZaTaskContentView.prototype.getCustomWidth=function(){return ZaTaskContentView.showStatusPane?"100%":"0px"
};
ZaTaskContentView.prototype.getCustomHeight=function(){return ZaTaskContentView.showStatusPane?"100%":"0px"
};
ZaTaskContentView.getImgText=function(d,b){var c=["<div class='","Img",d,"' style='text-align:center;'>",b,"</div>"].join("");
return c
};
ZaTabView.XFormModifiers.ZaTaskContentView.push(ZaTaskContentView.myXFormModifier);
ZaTaskContentView.getNotificationBoard=function(b){return b.items[0].items[0].items[8].items[2]
}
}if(AjxPackage.define("zimbraAdmin.common.EmailAddr_FormItem")){DynSelectDomainPart_XFormItem=function(){};
XFormItemFactory.createItemType("_DYNSELECT_DOMAIN_PART_","dynselect_domain_part",DynSelectDomainPart_XFormItem,DynSelect_XFormItem);
DynSelectDomainPart_XFormItem.prototype.inputSize=35;
DynSelectDomainPart_XFormItem.prototype.setMenuWidth=false;
DynSelectDomainPart_XFormItem.prototype.handleKeyPressDelay=function(b,c){if(!this.dataFetcherObject&&this.dataFetcherClass!=null&&this.dataFetcherMethod!=null){this.dataFetcherObject=new this.dataFetcherClass(this.getForm().getController())
}if(!this.dataFetcherObject){return
}var e=new AjxCallback(this,this.changeDomainChoicesCallback);
this.dataFetcherMethod.call(this.dataFetcherObject,{value:c,event:b,callback:e,applyConfig:1});
var d="";
if(this.getParentItem()._namePart){d=this.getParentItem()._namePart
}d+="@";
d+=c;
this.getForm().itemChanged(this,d,b)
};
DynSelectDomainPart_XFormItem.prototype.changeDomainChoicesCallback=function(f,d,e){var c=[];
AjxEmailAddress.customEmailValidateEegex={};
for(var b=0;
f&&b<f.length;
b++){if(f[b]&&f[b].attrs[ZaDomain.A_domainType]==ZaDomain.domainTypes.local){c.push(f[b]);
AjxEmailAddress.customEmailValidateEegex[f[b].name]=f[b].attrs[ZaDomain.A_zimbraMailAddressValidationRegex]
}}this.changeChoicesCallback(c,d,e)
};
EmailAddr_XFormItem=function(){};
XFormItemFactory.createItemType("_EMAILADDR_","emailaddr",EmailAddr_XFormItem,Composite_XFormItem);
EmailAddr_XFormItem.domainChoices=new XFormChoices([],XFormChoices.OBJECT_LIST,"name","name");
EmailAddr_XFormItem.choicesDirty=false;
EmailAddr_XFormItem.prototype.numCols=4;
EmailAddr_XFormItem.prototype.nowrap=true;
EmailAddr_XFormItem.prototype.visibilityChecks=[ZaItem.hasReadPermission];
EmailAddr_XFormItem.prototype.enableDisableChecks=[ZaItem.hasWritePermission];
EmailAddr_XFormItem.prototype.initializeItems=function(){this._inputWidth=this.getInheritedProperty("inputWidth");
if(this._inputWidth==null){this._inputWidth=200
}this.items[0].width=this._inputWidth;
this.items[0].containerCssStyle=this.getInheritedProperty("nameContainerCss");
this.items[1].containerCssStyle=this.getInheritedProperty("midContainerCss");
this.items[2].inputWidth=this.getInheritedProperty("domainPartWidth");
this.items[2].width=this.getInheritedProperty("domainContainerWidth");
Composite_XFormItem.prototype.initializeItems.call(this);
try{this._domainPart=ZaSettings.myDomainName
}catch(b){this._domainPart=null
}if(this._domainPart==null){if(EmailAddr_XFormItem.domainChoices){if(EmailAddr_XFormItem.domainChoices._choiceObject.length>0){if(EmailAddr_XFormItem.domainChoices._choiceObject[0]){this._domainPart=EmailAddr_XFormItem.domainChoices._choiceObject[0].name
}}}}this._oldDomainPart=this._domainPart;
this._inputDomainPart=""
};
EmailAddr_XFormItem.prototype.items=[{type:_TEXTFIELD_,forceUpdate:true,ref:".",labelLocation:_NONE_,cssClass:"admin_xform_name_input",visibilityChecks:[],enableDisableChecks:[],errorLocation:_PARENT_,getDisplayValue:function(b){var d=b;
if(d){var c=d.split("@");
if(c.length>1){d=c[0]
}}if(d===null||d===undefined){d=""
}this.getParentItem()._namePart=d;
return d
},elementChanged:function(b,d,c){if(b&&this.getParentItem()._inputDomainPart){this.getParentItem()._oldDomainPart=this.getParentItem()._domainPart;
this.getParentItem()._domainPart=this.getParentItem()._inputDomainPart;
this.getParentItem()._inputDomainPart=""
}this.getParentItem()._namePart=b;
var e=b+"@";
if(this.getParentItem()._domainPart){e+=this.getParentItem()._domainPart
}this.getForm().itemChanged(this.getParentItem(),e,c)
}},{type:_OUTPUT_,value:"@"},{type:_DYNSELECT_DOMAIN_PART_,ref:".",labelLocation:_NONE_,choices:EmailAddr_XFormItem.domainChoices,editable:true,bmolsnr:true,toolTipContent:ZaMsg.tt_StartTypingDomainName,visibilityChecks:[],enableDisableChecks:[],dataFetcherMethod:ZaSearch.prototype.dynSelectSearchDomains,dataFetcherClass:ZaSearch,errorLocation:_PARENT_,getDisplayValue:function(b){var d=null;
if(b){var c=b.split("@");
if(c.length>1){d=c[1]
}else{d=b
}}if(!d){if(!this.getParentItem()._domainPart){if(this.getChoices()&&this.getChoices()._choiceObject&&this.getChoices()._choiceObject[0]){d=this.getChoices()._choiceObject[0].name;
this.getParentItem()._domainPart=d
}}else{}}else{this.getParentItem()._domainPart=d
}return d
},elementChanged:function(b,f,e){var h;
var d=this.getParentItem()._domainPart;
if(this.getParentItem()._namePart){h=this.getParentItem()._namePart+"@"+b
}else{h="@"+b
}if(b){var c=this.getDisplayElement();
if(c){if(this.getInheritedProperty("editable")){c.value=b
}else{c.innerHTML=b
}}}if(this.getParentItem()._namePart){this.getParentItem()._domainPart=b;
this.getParentItem()._oldDomainPart=d
}else{this.getParentItem()._inputDomainPart=b
}var g=AjxEmailAddress.customEmailValidateEegex[b];
if(g&&g instanceof Array){AjxEmailAddress.customInvalidEmailPats=g
}else{if(g){AjxEmailAddress.customInvalidEmailPats=[g]
}else{AjxEmailAddress.customInvalidEmailPats=[]
}}this.getForm().itemChanged(this.getParentItem(),h,e)
}}];
EmailAddr_XFormItem.prototype.resetEditedState=function(){this.items[2].edited=false
};
EmailAddr_XFormItem.resetDomainLists=function(b){if(b||EmailAddr_XFormItem.choicesDirty){DBG.println(AjxDebug.DBG3,"Reset the domain lists ....");
ZaApp.getInstance().searchDomains();
EmailAddr_XFormItem.choicesDirty=false
}};
EmailAddr_XFormItem.prototype.getOldDomainPart=function(){return this._oldDomainPart
};
EmailAddr_XFormItem.prototype.getCurrentDomainPart=function(){return this._domainPart
};
EmailAddr_XFormItem.prototype.clearNameNullError=function(){if(this._namePart==""){if(this.hasError()){this.clearError();
this.setInstanceValue("");
var c=this.getForm();
var b=new DwtXFormsEvent(c,this,"");
c.notifyListeners(DwtEvent.XFORMS_VALUE_CHANGED,b);
c.setIsDirty(true,this);
return true
}}return false
}
}}if(AjxPackage.define("admin.Widgets")){AjxTemplate.register("admin.Widgets#ZaAppTab",function(c,g,f,b){var e=Boolean(b);
f=(typeof f=="string"?{id:f}:f)||{};
b=b||[];
var d=b.length;
b[d++]="<table role=\"presentation\" class='ZWidgetTable ZAppTabTable ZAppTabBorder' style='table-layout:auto;'><tr id='";
b[d++]=f.id;
b[d++]="_row'><td id='";
b[d++]=f.id;
b[d++]="_left_icon'  \tclass='ZLeftIcon ZWidgetIcon'></td><td id='";
b[d++]=f.id;
b[d++]="_title'\t\tclass='ZWidgetTitle'></td><td id='";
b[d++]=f.id;
b[d++]="_right_icon' \tclass='ZRightIcon ZWidgetIcon'></td></tr></table>";
return e?b.length:b.join("")
},{id:"admin.Widgets#ZaAppTab","class":"ZAppTab"},false);
AjxTemplate.register("admin.Widgets",AjxTemplate.getTemplate("admin.Widgets#ZaAppTab"),AjxTemplate.getParams("admin.Widgets#ZaAppTab"));
AjxTemplate.register("admin.Widgets#ZaToolBarLabel",function(c,g,f,b){var e=Boolean(b);
f=(typeof f=="string"?{id:f}:f)||{};
b=b||[];
var d=b.length;
b[d++]='<table role="presentation" id=\'';
b[d++]=f.id;
b[d++]="_label'\t\tclass='ZWidgetTable ZLabelBorder'><tr><td id='";
b[d++]=f.id;
b[d++]="_left_icon'\tclass='ZLeftIcon ZWidgetIcon'></td><td id='";
b[d++]=f.id;
b[d++]="_title'\t\tclass='ZWidgetTitle ZaNowrapTitle'></td><td id='";
b[d++]=f.id;
b[d++]="_right_icon'\tclass='ZRightIcon ZWidgetIcon'></td></tr></table>";
return e?b.length:b.join("")
},{id:"admin.Widgets#ZaToolBarLabel","class":"ZaToolBarLabel ZWidget"},false);
AjxTemplate.register("admin.Widgets#ZaToast",function(c,g,f,b){var e=Boolean(b);
f=(typeof f=="string"?{id:f}:f)||{};
b=b||[];
var d=b.length;
b[d++]="<div class='ZaToastBG'><div class='ZaToastContent'><div id='";
b[d++]=f.id;
b[d++]="_icon' class='ZaToastIcon'></div><div id='";
b[d++]=f.id;
b[d++]="_text' class='ZaToastText'></div></div></div>";
return e?b.length:b.join("")
},{id:"admin.Widgets#ZaToast","class":"ZaToastInfo"},false);
AjxTemplate.register("admin.Widgets#ZaCurrentAppBar",function(c,g,f,b){var e=Boolean(b);
f=(typeof f=="string"?{id:f}:f)||{};
b=b||[];
var d=b.length;
b[d++]="<table role=\"presentation\" style='table-layout:fixed;width:100%; height:100%'><tr><td id='";
b[d++]=f.id;
b[d++]="_title'\tclass='ZWidgetTitle'\tstyle='width:100%'></td><td id='";
b[d++]=f.id;
b[d++]="_action'\t\t\t\t\t\t\tstyle='width:0px'><div><table role=\"presentation\" class='ZToolbarTable'><tr id='";
b[d++]=f.id;
b[d++]="_actionitems'></tr></table></div></td><td id='";
b[d++]=f.id;
b[d++]="_settingimg'\t\t\t\t\t\tstyle='width:20px'></td><td id='";
b[d++]=f.id;
b[d++]="_dropdown'\tclass='ZDropDown'\t\tstyle='width:20px'></td></tr></table>";
return e?b.length:b.join("")
},{id:"admin.Widgets#ZaCurrentAppBar","class":"ZaCurrentAppBar"},false);
AjxTemplate.register("admin.Widgets#ZaTreeHeaderButton",function(c,g,f,b){var e=Boolean(b);
f=(typeof f=="string"?{id:f}:f)||{};
b=b||[];
var d=b.length;
b[d++]='<table role="presentation" id=\'';
b[d++]=f.id;
b[d++]="_table' class='DwtLinkButtonTable ";
b[d++]=f.bgImg;
b[d++]="' style='table-layout:fixed;width:100%'><tr><td id='";
b[d++]=f.id;
b[d++]="_doubleArrow' style='width:20px'><div></div></td><td id='";
b[d++]=f.id;
b[d++]="_left_icon'  \tclass='ZLeftIcon ZWidgetIcon'\tstyle='width:0px'></td><td id='";
b[d++]=f.id;
b[d++]="_title'\t\tclass='ZWidgetTitle'\t\t\tstyle='width:120px'></td><td id='";
b[d++]=f.id;
b[d++]="_right_icon' \tclass='ZRightIcon ZWidgetIcon'\tstyle='width:0px'></td><td id='";
b[d++]=f.id;
b[d++]="_dropdown' \tclass='ZDropDown'\t\t\t\tstyle='width:20px'></td><td id='";
b[d++]=f.id;
b[d++]="_fill'\t\t\t\t\t\t\t\t\t\t\tstyle='width:100%;'></td><td id='";
b[d++]=f.id;
b[d++]="_img'\t\t\t\t\t\t\t\t\t\t\tstyle='width:20px'></td></tr></table>";
return e?b.length:b.join("")
},{id:"admin.Widgets#ZaTreeHeaderButton","class":"ZWidget"},false);
AjxTemplate.register("admin.Widgets#ZaTreeItem",function(c,g,f,b){var e=Boolean(b);
f=(typeof f=="string"?{id:f}:f)||{};
b=b||[];
var d=b.length;
b[d++]="<div class='";
b[d++]=f.divClassName;
b[d++]="' id='";
b[d++]=f.id;
b[d++]="_div'><table role=\"presentation\" id='";
b[d++]=f.id;
b[d++]="_table'><tr>";
if(f.isCheckedStyle){b[d++]="<td nowrap id='";
b[d++]=f.id;
b[d++]='_checkboxCell\' class="ZTreeItemCheckboxCell"><div class="ZTreeItemCheckbox" id=\'';
b[d++]=f.id;
b[d++]="_checkbox'><div class=\"ZTreeItemCheckboxImg\" id='";
b[d++]=f.id;
b[d++]="_checkboxImg'>";
b[d++]=AjxImg.getImageHtml("MenuCheck");
b[d++]="</div></div></td>"
}b[d++]="<td width=16 nowrap class='imageCell' id='";
b[d++]=f.id;
b[d++]="_imageCell'></td><td nowrap class='";
b[d++]=f.textClassName;
b[d++]="' id='";
b[d++]=f.id;
b[d++]="_textTDCell'><div class='ZTreeItemTextCell' id='";
b[d++]=f.id;
b[d++]="_textCell'></div></td><td width=16 class='imageCell' id='";
b[d++]=f.id;
b[d++]="_extraCell'></td><td width=1% align=center nowrap id='";
b[d++]=f.id;
b[d++]="_countCell'></td><td align=center nowrap id='";
b[d++]=f.id;
b[d++]="_nodeCell'></td></tr></table></div>";
return e?b.length:b.join("")
},{id:"admin.Widgets#ZaTreeItem"},false);
AjxTemplate.register("admin.Widgets#ZaBaseDialog",function(c,g,f,b){var e=Boolean(b);
f=(typeof f=="string"?{id:f}:f)||{};
b=b||[];
var d=b.length;
b[d++]="<div class='DwtDialog WindowOuterContainer'><table role=\"presentation\"><tr class='DwtDialogHeader' id='";
b[d++]=f.dragId;
b[d++]="'><td class='minWidth'>";
b[d++]=f.icon;
b[d++]="</td><td id='";
b[d++]=f.id;
b[d++]="_title' class='DwtDialogTitle'>";
b[d++]=f.title;
b[d++]="</td><td class='minWidth'><div class='";
b[d++]=f.closeIcon2;
b[d++]="'></div></td><td class='minWidth'><div class='";
b[d++]=f.closeIcon1;
b[d++]="'></div></td><td width=24 id='";
b[d++]=f.id;
b[d++]="_minimize' class='DwtDialogMinIcon'></td></tr><tr><td colspan='5'><div class='horizSep'></div></td></tr><tr><td class='WindowInnerContainer' colspan='5'><table role=\"presentation\"><tr><td><div id='";
b[d++]=f.id;
b[d++]="_content' class='DwtDialogBody'></div></td></tr></tr><td>";
if(f.controlsTemplateId){b[d++]=AjxTemplate.expand(f.controlsTemplateId,f)
}b[d++]="</td></table></td></tr></table></div>";
return e?b.length:b.join("")
},{width:"20",id:"admin.Widgets#ZaBaseDialog",height:"32"},false);
AjxTemplate.register("admin.Widgets#ZaSeachOptionDialog",function(c,g,f,b){var e=Boolean(b);
f=(typeof f=="string"?{id:f}:f)||{};
b=b||[];
var d=b.length;
b[d++]="<div class='DwtDialog'><table role=\"presentation\"><tr><td class='WindowInnerContainer' colspan='4'><table role=\"presentation\"><tr><td><div id='";
b[d++]=f.id;
b[d++]="_content' class='DwtDialogBody'></div></td></tr></tr><td>";
if(f.controlsTemplateId){b[d++]=AjxTemplate.expand(f.controlsTemplateId,f)
}b[d++]="</td></table></td></tr></table></div>";
return e?b.length:b.join("")
},{width:"20",id:"admin.Widgets#ZaSeachOptionDialog",height:"32"},false);
AjxTemplate.register("admin.Widgets#ZaAboutDialog",function(c,g,f,b){var e=Boolean(b);
f=(typeof f=="string"?{id:f}:f)||{};
b=b||[];
var d=b.length;
b[d++]="<div class='ZaAboutDialog'><table role=\"presentation\" style='table-layout:fixed;width:100%'><tr class='ZaAboutDialogHeader' id='";
b[d++]=f.dragId;
b[d++]="'><td id='";
b[d++]=f.id;
b[d++]="_full' class='ZaAboutDialogTitle' style='width:100%;'>&nbsp</td><td width=24 id='";
b[d++]=f.id;
b[d++]="_close' ><div class=";
b[d++]=f.closeIcon;
b[d++]="></div></td></tr><tr><td class='WindowInnerContainer' colspan='2'><table role=\"presentation\"><tr><td><div id='";
b[d++]=f.id;
b[d++]="_content' class='DwtDialogBody'><div><div class='contentBox'><h1><a id='";
b[d++]=f.id;
b[d++]="_bannerLink' target='_new' href='";
b[d++]=f.logoURL;
b[d++]="'><span class='";
b[d++]=f.aboutBanner;
b[d++]="'></span></a></h1><div id='";
b[d++]=f.id;
b[d++]="_longVersion' class='version'>\n";
b[d++]="                                                ";
b[d++]=f.version;
b[d++]="\n";
b[d++]="                                            </div></div></div><div id='";
b[d++]=f.id;
b[d++]="_footer' class='Footer'><div class='copyright'>\n";
b[d++]="                                            ";
b[d++]=f.copyright;
b[d++]="\n";
b[d++]="                                        </div></div></div></td></tr></table></td></tr></table></div>";
return e?b.length:b.join("")
},{width:"20",id:"admin.Widgets#ZaAboutDialog",height:"32"},false)
};
